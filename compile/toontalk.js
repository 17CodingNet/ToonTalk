'use strict';(function(c){var l;"undefined"===typeof exports?"function"===typeof define&&"object"===typeof define.amd&&define.amd?(l={},define(function(){return l})):l="undefined"!==typeof window?window:c:l=exports;(function(c){var d={greatest_common_divisor:function(a,b){if(1===b||1===a)return 1;for(var c;0!==b;){c=b;b=a%b;if(!isFinite(b))return 0;a=c}return a}};d.gcd=d.greatest_common_divisor;d.fromRandom=function(a){return Math.random()*(1<<a)>>>0};d.fromMillitime=function(){return+new Date};d.fromUnixtime=
function(){return.001*d.fromMillitime()|0};"undefined"!==typeof c&&(c.integer=d);(function(a){function b(a,h,d){if(d!==c)return a instanceof b?a:"undefined"===typeof a?e:b.parse(a);for(a=a||[];a.length&&!a[a.length-1];)--a.length;this._d=a;this._s=a.length?h||1:0}var c={};b._construct=function(a,h){return new b(a,h,c)};b.base=1E7;b.base_log10=7;var e=new b([],0,c);b.ZERO=e;var d=new b([1],1,c);b.ONE=d;var g=new b(d._d,-1,c);b.M_ONE=g;b._0=e;b._1=d;b.small=[e,d,new b([2],1,c),new b([3],1,c),new b([4],
1,c),new b([5],1,c),new b([6],1,c),new b([7],1,c),new b([8],1,c),new b([9],1,c),new b([10],1,c),new b([11],1,c),new b([12],1,c),new b([13],1,c),new b([14],1,c),new b([15],1,c),new b([16],1,c),new b([17],1,c),new b([18],1,c),new b([19],1,c),new b([20],1,c),new b([21],1,c),new b([22],1,c),new b([23],1,c),new b([24],1,c),new b([25],1,c),new b([26],1,c),new b([27],1,c),new b([28],1,c),new b([29],1,c),new b([30],1,c),new b([31],1,c),new b([32],1,c),new b([33],1,c),new b([34],1,c),new b([35],1,c),new b([36],
1,c)];b.digits="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");b.prototype.toString=function(a){a=+a||10;if(2>a||36<a)throw Error("illegal radix "+a+".");if(0===this._s)return"0";if(10===a){a=0>this._s?"-":"";a+=this._d[this._d.length-1].toString();for(var h=this._d.length-2;0<=h;h--){for(var c=this._d[h].toString();7>c.length;)c="0"+c;a+=c}return a}h=b.digits;a=b.small[a];for(var c=this._s,e=this.abs(),d=[],g;0!==e._s;)g=e.divRem(a),e=g[0],g=g[1],d.push(h[g.valueOf()]);return(0>c?"-":"")+d.reverse().join("")};
b.radixRegex=[/^$/,/^$/,/^[01]*$/,/^[012]*$/,/^[0-3]*$/,/^[0-4]*$/,/^[0-5]*$/,/^[0-6]*$/,/^[0-7]*$/,/^[0-8]*$/,/^[0-9]*$/,/^[0-9aA]*$/,/^[0-9abAB]*$/,/^[0-9abcABC]*$/,/^[0-9a-dA-D]*$/,/^[0-9a-eA-E]*$/,/^[0-9a-fA-F]*$/,/^[0-9a-gA-G]*$/,/^[0-9a-hA-H]*$/,/^[0-9a-iA-I]*$/,/^[0-9a-jA-J]*$/,/^[0-9a-kA-K]*$/,/^[0-9a-lA-L]*$/,/^[0-9a-mA-M]*$/,/^[0-9a-nA-N]*$/,/^[0-9a-oA-O]*$/,/^[0-9a-pA-P]*$/,/^[0-9a-qA-Q]*$/,/^[0-9a-rA-R]*$/,/^[0-9a-sA-S]*$/,/^[0-9a-tA-T]*$/,/^[0-9a-uA-U]*$/,/^[0-9a-vA-V]*$/,/^[0-9a-wA-W]*$/,
/^[0-9a-xA-X]*$/,/^[0-9a-yA-Y]*$/,/^[0-9a-zA-Z]*$/];b.parse=function(a,h){function d(a){a=a.replace(/\s*[*xX]\s*10\s*(\^|\*\*)\s*/,"e");return a.replace(/^([+\-])?(\d+)\.?(\d*)[eE]([+\-]?\d+)$/,function(a,h,b,c,u){u=+u;var e=0>u,g=b.length+u;a=(e?b:c).length;u=(u=Math.abs(u))>=a?u-a+e:0;a=Array(u+1).join("0");b+=c;return(h||"")+(e?b=a+b:b+=a).substr(0,g+=e?a.length:0)+(g<b.length?"."+b.substr(g):"")})}a=a.toString();if("undefined"===typeof h||10===+h)a=d(a);var g=RegExp("^([+\\-]?)("+("undefined"===
typeof h?"0[xcb]":16==h?"0x":8==h?"0c":2==h?"0b":"")+")?([0-9a-z]*)(?:\\.\\d*)?$","i").exec(a);if(g){var f=g[1]||"+",k=g[2]||"",g=g[3]||"";if("undefined"===typeof h)h="0x"===k||"0X"===k?16:"0c"===k||"0C"===k?8:"0b"===k||"0B"===k?2:10;else if(2>h||36<h)throw Error("Illegal radix "+h+".");h=+h;if(!b.radixRegex[h].test(g))throw Error("Bad digit for radix "+h);g=g.replace(/^0+/,"").split("");if(0===g.length)return e;f="-"===f?-1:1;if(10==h){for(k=[];7<=g.length;)k.push(parseInt(g.splice(g.length-b.base_log10,
b.base_log10).join(""),10));k.push(parseInt(g.join(""),10));return new b(k,f,c)}k=e;h=b.small[h];for(var m=b.small,n=0;n<g.length;n++)k=k.multiply(h).add(m[parseInt(g[n],36)]);return new b(k._d,f,c)}throw Error("Invalid BigInteger format: "+a);};b.prototype.add=function(a){if(0===this._s)return b(a);a=b(a);if(0===a._s)return this;if(this._s!==a._s)return a=a.negate(),this.subtract(a);var h=this._d;a=a._d;for(var e=h.length,g=a.length,d=Array(Math.max(e,g)+1),f=Math.min(e,g),k=0,m=0;m<f;m++)k=h[m]+
a[m]+k,d[m]=k%1E7,k=k/1E7|0;g>e&&(h=a,e=g);for(m=f;k&&m<e;m++)k=h[m]+k,d[m]=k%1E7,k=k/1E7|0;for(k&&(d[m]=k);m<e;m++)d[m]=h[m];return new b(d,this._s,c)};b.prototype.negate=function(){return new b(this._d,-this._s|0,c)};b.prototype.abs=function(){return 0>this._s?this.negate():this};b.prototype.subtract=function(a){if(0===this._s)return b(a).negate();a=b(a);if(0===a._s)return this;if(this._s!==a._s)return a=a.negate(),this.add(a);var h=this;0>this._s&&(h=new b(a._d,1,c),a=new b(this._d,1,c));var g=
h.compareAbs(a);if(0===g)return e;if(0>g){var d=a;a=h;h=d}h=h._d;a=a._d;var d=h.length,f=a.length,k=Array(d),m=0,n,q;for(n=0;n<f;n++)q=h[n]-m-a[n],0>q?(q+=1E7,m=1):m=0,k[n]=q;for(n=f;n<d;n++){q=h[n]-m;if(0>q)q+=1E7;else{k[n++]=q;break}k[n]=q}for(;n<d;n++)k[n]=h[n];return new b(k,g,c)};(function(){function a(h,e){for(var g=h._d,d=g.slice(),f=0;;){var k=(g[f]||0)+1;d[f]=k%1E7;if(9999999>=k)break;++f}return new b(d,e,c)}function h(a,e){for(var g=a._d,d=g.slice(),f=0;;){var k=(g[f]||0)-1;if(0>k)d[f]=
k+1E7;else{d[f]=k;break}++f}return new b(d,e,c)}b.prototype.next=function(){switch(this._s){case 0:return d;case -1:return h(this,-1);default:return a(this,1)}};b.prototype.prev=function(){switch(this._s){case 0:return g;case -1:return a(this,-1);default:return h(this,1)}}})();b.prototype.compareAbs=function(a){if(this===a)return 0;if(!(a instanceof b)){if(!isFinite(a))return isNaN(a)?a:-1;a=b(a)}if(0===this._s)return 0!==a._s?-1:0;if(0===a._s)return 1;var h=this._d.length,c=a._d.length;if(h<c)return-1;
if(h>c)return 1;c=this._d;a=a._d;for(h-=1;0<=h;h--)if(c[h]!==a[h])return c[h]<a[h]?-1:1;return 0};b.prototype.compare=function(a){if(this===a)return 0;a=b(a);return 0===this._s?-a._s:this._s===a._s?this.compareAbs(a)*this._s:this._s};b.prototype.isUnit=function(){return this===d||this===g||1===this._d.length&&1===this._d[0]};b.prototype.multiply=function(a){if(0===this._s)return e;a=b(a);if(0===a._s)return e;if(this.isUnit())return 0>this._s?a.negate():a;if(a.isUnit())return 0>a._s?this.negate():
this;if(this===a)return this.square();var h=this._d.length>=a._d.length,g=(h?this:a)._d,h=(h?a:this)._d,d=g.length,f=h.length,k=d+f,m=Array(k),n;for(n=0;n<k;n++)m[n]=0;for(n=0;n<f;n++){for(var k=0,q=h[n],l=d+n,v,r=n;r<l;r++)v=m[r]+q*g[r-n]+k,k=v/1E7|0,m[r]=v%1E7|0;k&&(v=m[r]+k,m[r]=v%1E7)}return new b(m,this._s*a._s,c)};b.prototype.multiplySingleDigit=function(a){if(0===a||0===this._s)return e;if(1===a)return this;var h;if(1===this._d.length)return h=this._d[0]*a,1E7<=h?new b([h%1E7|0,h/1E7|0],1,
c):new b([h],1,c);if(2===a)return this.add(this);if(this.isUnit())return new b([a],1,c);var g=this._d,d=g.length;h=d+1;for(var f=Array(h),k=0;k<h;k++)f[k]=0;for(var m=k=0;m<d;m++)h=a*g[m]+k,k=h/1E7|0,f[m]=h%1E7|0;k&&(f[m]=k);return new b(f,1,c)};b.prototype.square=function(){if(0===this._s)return e;if(this.isUnit())return d;var a=this._d,h=a.length,g=Array(h+h+1),f,k,m,n;for(n=0;n<h;n++)m=2*n,f=a[n]*a[n],k=f/1E7|0,g[m]=f%1E7,g[m+1]=k;for(n=0;n<h;n++){k=0;m=2*n+1;for(var q=n+1;q<h;q++,m++)f=a[q]*a[n]*
2+g[m]+k,k=f/1E7|0,g[m]=f%1E7;m=h+n;f=k+g[m];k=f/1E7|0;g[m]=f%1E7;g[m+1]+=k}return new b(g,1,c)};b.prototype.quotient=function(a){return this.divRem(a)[0]};b.prototype.divide=b.prototype.quotient;b.prototype.remainder=function(a){return this.divRem(a)[1]};b.prototype.divRem=function(a){a=b(a);if(0===a._s)throw Error("Divide by zero");if(0===this._s)return[e,e];if(1===a._d.length)return this.divRemSmall(a._s*a._d[0]);switch(this.compareAbs(a)){case 0:return[this._s===a._s?d:g,e];case -1:return[e,this]}var h=
this._s*a._s,f=a.abs(),k=this._d,m=k.length,n=[],q,l=new b([],0,c);for(l._s=1;m;)if(l._d.unshift(k[--m]),0>l.compareAbs(a))n.push(0);else{if(0===l._s)q=0;else{var r=l._d.length;q=f._d.length;r=1E7*l._d[r-1]+l._d[r-2];q=1E7*f._d[q-1]+f._d[q-2];l._d.length>f._d.length&&(r=1E7*(r+1));q=Math.ceil(r/q)}do{r=f.multiplySingleDigit(q);if(0>=r.compareAbs(l))break;q--}while(q);n.push(q);q&&(q=l.subtract(r),l._d=q._d.slice(),0===l._d.length&&(l._s=0))}return[new b(n.reverse(),h,c),new b(l._d,this._s,c)]};b.prototype.divRemSmall=
function(a){a=+a;if(0===a)throw Error("Divide by zero");var h=this._s*(0>a?-1:1);a=Math.abs(a);if(1>a||1E7<=a)throw Error("Argument out of range");if(0===this._s)return[e,e];if(1===a||-1===a)return[1===h?this.abs():new b(this._d,h,c),e];if(1===this._d.length){var g=new b([this._d[0]/a|0],1,c);a=new b([this._d[0]%a|0],1,c);0>h&&(g=g.negate());0>this._s&&(a=a.negate());return[g,a]}for(var d=this._d.slice(),g=Array(d.length),f=0,k=0,m=0,n;d.length;)f=1E7*f+d[d.length-1],f<a?(g[m++]=0,d.pop(),k=1E7*k+
f):(n=0===f?0:f/a|0,k=f-a*n,(g[m++]=n)?(d.pop(),f=k):d.pop());a=new b([k],1,c);0>this._s&&(a=a.negate());return[new b(g.reverse(),h,c),a]};b.prototype.isEven=function(){var a=this._d;return 0===this._s||0===a.length||0===a[0]%2};b.prototype.isOdd=function(){return!this.isEven()};b.prototype.sign=function(){return this._s};b.prototype.isPositive=function(){return 0<this._s};b.prototype.isNegative=function(){return 0>this._s};b.prototype.isZero=function(){return 0===this._s};b.prototype.exp10=function(a){a=
+a;if(0===a)return this;if(Math.abs(a)>Number(f))throw Error("exponent too large in BigInteger.exp10");if(0<a){for(var h=new b(this._d.slice(),this._s,c);7<=a;a-=7)h._d.unshift(0);if(0==a)return h;h._s=1;h=h.multiplySingleDigit(Math.pow(10,a));return 0>this._s?h.negate():h}if(-a>=7*this._d.length)return e;h=new b(this._d.slice(),this._s,c);for(a=-a;7<=a;a-=7)h._d.shift();return 0==a?h:h.divRemSmall(Math.pow(10,a))[0]};b.prototype.pow=function(a){if(this.isUnit())return 0<this._s?this:b(a).isOdd()?
this:this.negate();a=b(a);if(0===a._s)return d;if(0>a._s){if(0===this._s)throw Error("Divide by zero");return e}if(0===this._s)return e;if(a.isUnit())return this;if(0<a.compareAbs(f))throw Error("exponent too large in BigInteger.pow");for(var h=this,c=d,g=b.small[2];a.isPositive()&&(!a.isOdd()||(c=c.multiply(h),!a.isUnit()));)h=h.square(),a=a.quotient(g);return c};b.prototype.modPow=function(a,h){for(var c=d,e=this;a.isPositive();)a.isOdd()&&(c=c.multiply(e).remainder(h)),a=a.quotient(b.small[2]),
a.isPositive()&&(e=e.square().remainder(h));return c};b.prototype.log=function(){switch(this._s){case 0:return-Infinity;case -1:return NaN}var a=this._d.length;if(30>7*a)return Math.log(this.valueOf());var h=Math.ceil(30/7),e=this._d.slice(a-h);return Math.log((new b(e,1,c)).valueOf())+(a-h)*Math.log(1E7)};b.prototype.valueOf=function(){return parseInt(this.toString(),10)};b.prototype.toJSValue=function(){return parseInt(this.toString(),10)};var f=b(2147483647);b.MAX_EXP=f;(function(){function a(h){return function(a){return h.call(b(a))}}
function h(a){return function(h,c){return a.call(b(h),b(c))}}function c(a){return function(h,c,e){return a.call(b(h),b(c),b(e))}}(function(){var e,g,d="toJSValue isEven isOdd sign isZero isNegative abs isUnit square negate isPositive toString next prev log".split(" "),f="compare remainder divRem subtract add quotient divide multiply pow compareAbs".split(" "),w=["modPow"];for(e=0;e<d.length;e++)g=d[e],b[g]=a(b.prototype[g]);for(e=0;e<f.length;e++)g=f[e],b[g]=h(b.prototype[g]);for(e=0;e<w.length;e++)g=
w[e],b[g]=c(b.prototype[g]);b.exp10=function(a,h){return b(a).exp10(h)}})()})();a.BigInteger=b})("undefined"!==typeof c?c:this);var q={greatest_common_divisor:function(a,b){if(b.isUnit()||a.isUnit())return BigInteger.ONE;for(var c;!b.isZero();)c=b,b=a.remainder(b),a=c;return a},create:function(){return[0]},clone:function(a){for(var b=[],c=0,e=a.length;c<e;c++)b[c]=a[c];return b},copy:function(a,b){a=[];for(var c=0,e=b.length;c<e;c++)a[c]=b[c];return a},abs:function(a,b){a[0]=Math.abs(b[0]);return a},
str:function(a){return a[0].toString()},toInteger:function(a){return out[0]},fromInteger:function(a){return[parseInt(a)]}};q.ZERO=q.fromInteger(0);q.ONE=q.fromInteger(1);"undefined"!==typeof c&&(c.bigint=q);if(!m)var m=Array;if(!n)var n=Math.pow(2,56);if(!l)var l=16777216;var k={EPSILON:2E-16};k.MAX_LOOPS=l;k.create=function(){var a=new m(2);a[0]=0;a[1]=1;return a};k.clone=function(a){var b=new m(2);b[0]=a[0];b[1]=a[1];return b};k.fromValues=function(a,b){var c=new m(2);c[0]=a;c[1]=b;return k.normalize(c,
c)};k.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};k.set=function(a,b,c){a[0]=b;a[1]=c;return k.normalize(a,a)};k.abs=function(a,b){a[0]=Math.abs(b[0]);a[1]=b[1];return a};k.invert=function(a,b){var c=b[0];a[0]=b[1];a[1]=c;return a};k.reciprocal=k.invert;k.add=function(a,b,c){b[1]===c[1]?(a[0]=b[0]+c[0],a[1]=b[1]):(a[0]=b[0]*c[1]+c[0]*b[1],a[1]=b[1]*c[1]);return k.normalize(a,a)};k.subtract=function(a,b,c){b[1]===c[1]?(a[0]=b[0]-c[0],a[1]=b[1]):(a[0]=b[0]*c[1]-c[0]*b[1],a[1]=b[1]*c[1]);return k.normalize(a,
a)};k.sub=k.subtract;k.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return k.normalize(a,a)};k.mul=k.multiply;k.mediant=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return k.normalize(a,a)};k.divide=function(a,b,c){a[0]=b[0]*c[1];a[1]=b[1]*c[0];return k.normalize(a,a)};k.div=k.divide;k.equals=function(a,b){return 0===a[0]&&0===b[0]||0===a[1]&&0===b[1]?!0:a[0]===b[0]&&a[1]===b[1]};k.approximates=function(a,b){if(k.equals(a,b))return!0;var c=k.create();k.sub(c,a,b);k.abs(c,c);return k.isLessThan(c,
k.INFINITESIMAL)};k.isGreaterThan=function(a,b){return k.equals(a,b)?!1:a[0]*b[1]>b[0]*a[1]};k.isLessThan=function(a,b){return k.equals(a,b)?!1:a[0]*b[1]<b[0]*a[1]};k.isNegative=function(a){return 0>a[0]};k.min=function(a,b,c){k.isLessThan(b,c)?(a[0]=b[0],a[1]=b[1]):(a[0]=c[0],a[1]=c[1]);return a};k.max=function(a,b,c){k.isGreaterThan(b,c)?(a[0]=b[0],a[1]=b[1]):(a[0]=c[0],a[1]=c[1]);return a};k.scalar_multiply=function(a,b,c){a[0]=b[0]*c;a[1]=b[1];return k.normalize(a,a)};k.scalar_divide=function(a,
b,c){a[0]=b[0];a[1]=b[1]*c;return k.normalize(a,a)};k.normalize=function(a,b){if(isNaN(b[0])||isNaN(b[1])||0===b[0]&&0===b[1])return a[0]=0,a[1]=0,a;if(0===b[0])return a[0]=0,a[1]=1,a;if(0===b[1])return a[0]=1,a[1]=0,a;if(b[0]===b[1])return a[0]=1,a[1]=1,a;0<b[1]?(a[0]=b[0],a[1]=b[1]):(a[0]=-b[0],a[1]=-b[1]);var c=d.greatest_common_divisor(Math.abs(a[0]),a[1]);1<c&&(a[0]/=c,a[1]/=c);return a};k.opposite=function(a,b){a[0]=-b[0];a[1]=b[1];return a};k.negative=k.opposite;k.neg=k.opposite;k.power=function(a,
b,c){2===c?(a[0]=b[0]*b[0],a[1]=b[1]*b[1]):0<c?(a[0]=Math.pow(b[0],c),a[1]=Math.pow(b[1],c)):0>c?(c=Math.abs(c),a[0]=Math.pow(b[1],c),a[1]=Math.pow(b[0],c)):k.copy(a,k.ONE);return k.normalize(a,a)};k.pow=k.power;k.sqrt=function(a,b){return k.nthRoot(a,b,2)};k.nthRoot=function(a,b,c){if(k.equals(b,k.ZERO))return k.copy(a,k.ZERO);if(k.equals(b,k.ONE))return k.copy(a,k.ONE);if(k.equals(b,k.INFINITY))return k.copy(a,k.INFINITY);if(k.equals(b,k.INFINULL))return k.copy(a,k.INFINULL);var e=k.isNegative(b);
e&&(b[0]=-b[0]);a=k.copy(a,k.ONE);for(var g=[1,0,0,1],d=k.clone(k.ONE),f=k.MAX_LOOPS;!k.approximates(b,d)&&f--;)k.isLessThan(b,d)?(g[0]+=g[1],g[2]+=g[3]):(g[1]+=g[0],g[3]+=g[2]),a[0]=g[0]+g[1],a[1]=g[2]+g[3],k.pow(d,a,c);e&&(b[0]=-b[0],1===c%2&&k.neg(a,a));return a};k.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};k.str=function(a){return 1===a[1]?a[0].toString():a[0]+"/"+a[1]};k.toDecimal=function(a){return a[0]/a[1]};k.dec=k.toDecimal;k.toInteger=function(a){return Math.round(k.toDecimal(a))};k.round=
k.toInteger;k.floor=function(a){return Math.floor(k.toDecimal(a))};k.ceil=function(a){return Math.ceil(k.toDecimal(a))};k.fromInteger_copy=function(a,b){a[0]=parseInt(b);a[1]=1;return a};k.fromInteger=function(a){return k.fromInteger_copy(k.create(),a)};k.fromIntegerInverse_copy=function(a,b){a[0]=1;a[1]=parseInt(b);0>a[1]&&(a[0]=-a[0],a[1]=-a[1]);return a};k.fromIntegerInverse=function(a){return k.fromIntegerInverse_copy(k.create(),a)};k.fromDecimal=function(a){return k.fromDecimal_copy(k.create(),
a)};k.fromDecimal_copy=function(a,b){b=parseFloat(b);if(isNaN(b))return k.copy(a,k.INFINULL);if(Infinity===b)return k.copy(a,k.INFINITY);if(Math.abs(b)<k.EPSILON)return k.copy(a,k.ZERO);if(Math.abs(b-1)<k.EPSILON)return k.copy(a,k.ONE);if(Math.abs(b%1)<k.EPSILON)return k.fromInteger_copy(a,b);if(Math.abs(1/b%1)<k.EPSILON)return k.fromIntegerInverse_copy(a,Math.round(1/b));k.copy(a,k.ONE);for(var c=[1,0,0,1],e=b,g=1,d=k.MAX_LOOPS;d--&&Math.abs(b-k.toDecimal(a))>k.EPSILON;)g=Math.floor(e),a[0]=g*c[0]+
c[2],a[1]=g*c[1]+c[3],e=1/(e-g),c[2]=c[0],c[3]=c[1],c[0]=a[0],c[1]=a[1];return a};k.fromRandom=function(a){a[0]=0xfffffffffffff*Math.random()<<0;a[1]=Math.abs(0xfffffffffffff*Math.random()<<0);return k.normalize(a,a)};k.sin=function(a,b){if(0===b[1])return k.copy(a,k.ZERO);k.scalar_multiply(a,b,2);var c=k.create();k.pow(c,b,2);k.add(c,c,k.ONE);k.divide(a,a,c);return a};k.cos=function(a,b){if(0===b[1])return k.neg(a,k.ONE);var c=k.create();k.pow(c,b,2);k.sub(a,k.ONE,c);var e=k.create();k.add(e,k.ONE,
c);k.divide(a,a,e);return a};k.tan=function(a,b){k.scalar_multiply(a,b,2);var c=k.create();k.pow(c,b,2);k.scalar_multiply(c,c,2);k.add(a,a,c);k.pow(c,b,4);k.sub(c,k.ONE,c);k.divide(a,a,c);return a};k.toEgyptian=function(a){a=k.clone(a);k.abs(a,a);var b=k.floor(a);b&&k.sub(a,a,k.fromInteger(b));if(!a[0])return b.toString();b||(b="");for(var c=1,e=k.create();1!==a[0];)c++,e=k.fromValues(1,c),k.isGreaterThan(a,e)&&(b&&(b+=" + "),b+=k.str(e),k.sub(a,a,e));return a?b?b+" + "+k.str(a):k.str(a):b?b:"0"};
k.toBabylonian=function(a){var b="",c=k.toDecimal(a);a=parseInt(c);for(var c=c-a,e=0,g=0;0<a;)(e=a%60)&&(b=e+" * 60^"+g+(b?" + ":"")+b),a=(a-e)/60,g++;for(g=-1;0<c;)c*=60,e=parseInt(c+1E-13),c-=e,-1E-13>c||(e&&(b+=(b?" + ":"")+e+" * 60^"+g),g--);return b?b:"0"};k.traceSternBrocot=function(a){var b="";if(k.equals(a,k.ZERO)||k.equals(a,k.ONE)||k.equals(a,k.INFINITY)||k.equals(a,k.INFINULL))return b;if(k.equals(a,k.ZERO))return k.copy(out,k.ZERO);if(k.equals(a,k.ONE))return k.copy(out,k.ONE);if(k.equals(a,
k.INFINITY))return k.copy(out,k.INFINITY);if(k.equals(a,k.INFINULL))return k.copy(out,k.INFINULL);a=k.clone(a);k.isNegative(a)&&(a[0]=-a[0]);for(var c=k.clone(k.ONE),e=[1,0,0,1],g=0,d=0,f=k.MAX_LOOPS;!k.approximates(a,c)&&f--;)k.isLessThan(a,c)?(e[0]+=e[1],e[2]+=e[3],d++,g&&(b+="R",1!==g&&(b+=g),g=0,b+=" ")):(e[1]+=e[0],e[3]+=e[2],g++,d&&(b+="L",1!==d&&(b+=d),d=0,b+=" ")),c[0]=e[0]+e[1],c[1]=e[2]+e[3];d?(b+="L",1!==d&&(b+=d)):g&&(b+="R",1!==g&&(b+=g));0>f&&(b+="...");return b};k.toContinuedFraction=
function(a,b){b="undefined"===typeof b?65536:parseInt(b);if(k.equals(a,k.ZERO))return[0];if(k.equals(a,k.ONE))return[1];if(k.equals(a,k.NEGONE))return[-1];if(k.equals(a,k.INFINITY))return[1,0];if(k.equals(a,k.INFINULL))return[0,0];var c=k.clone(a),e=k.isNegative(c);e&&(c[0]=-c[0]);for(var g=k.clone(k.ONE),d=[1,0,0,1],f=1,m=[0],n=m.length-1;!k.equals(c,g)&&b--;)k.isLessThan(c,g)?(-1===f?m[n]++:(f=-1,m.push(1),n++),d[0]+=d[1],d[2]+=d[3]):(1===f?m[n]++:(f=1,m.push(1),n++),d[1]+=d[0],d[3]+=d[2]),g[0]=
d[0]+d[1],g[1]=d[2]+d[3];0>b?m.push(0):m[n]++;if(e)for(var q in m)m[q]=-m[q];return m};k.fromContinuedFraction=function(a,b){k.fromInteger_copy(a,b[b.length-1]);for(var c=b.length-2;-1<c;c--)k.invert(a,a),k.add(a,k.fromInteger(b[c]),a);return a};k.dump=function(a){k.create();return"rat\t"+k.str(a)+"\n~\t"+k.toDecimal(a)+"\nCF:\t["+k.toContinuedFraction(a)+"]\n"};k.ZERO=k.fromInteger(0);k.ONE=k.fromInteger(1);k.NEGONE=k.fromInteger(-1);k.INFINITY=k.fromValues(1,0);k.INFINULL=k.fromValues(0,0);k.INFINITESIMAL=
k.clone([1,n]);k.PI=k.fromValues(1320192667429,420230377710);"undefined"!==typeof c&&(c.rat=k);if(!b)var b=new BigInteger("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");if(!g)var g=1073741824;var a={EPSILON:2E-16};a.MAX_LOOPS=g;a.create=function(){var a=[];a[0]=BigInteger.ZERO;a[1]=BigInteger.ONE;return a};a.clone=function(a){var b=[];b[0]=a[0];b[1]=a[1];return b};a.fromValues=function(b,c){var e=[];e[0]=new BigInteger(b);e[1]=new BigInteger(c);return a.normalize(e,e)};a.copy=function(a,b){a[0]=b[0];a[1]=
b[1];return a};a.set=function(b,c,e){b[0]=c;b[1]=e;return a.normalize(b,b)};a.toRat=function(a,b){return k.set(a,b[0].toJSValue(),b[1].toJSValue())};a.fromRat=function(b,c){return a.set(b,BigInteger(c[0]),BigInteger(c[1]))};a.abs=function(a,b){a[0]=b[0].abs();a[1]=b[1];return a};a.invert=function(a,b){var c=b[0];a[0]=b[1];a[1]=c;return a};a.reciprocal=a.invert;a.add=function(b,c,e){0===c[1].compare(e[1])?(b[0]=c[0].add(e[0]),b[1]=c[1]):(b[0]=c[0].multiply(e[1]).add(e[0].multiply(c[1])),b[1]=c[1].multiply(e[1]));
return a.normalize(b,b)};a.subtract=function(b,c,e){0===c[1].compare(e[1])?(b[0]=c[0].subtract(e[0]),b[1]=c[1]):(b[0]=c[0].multiply(e[1]).subtract(e[0].multiply(c[1])),b[1]=c[1].multiply(e[1]));return a.normalize(b,b)};a.sub=a.subtract;a.multiply=function(b,c,e){b[0]=c[0].multiply(e[0]);b[1]=c[1].multiply(e[1]);return a.normalize(b,b)};a.mul=a.multiply;a.mediant=function(b,c,e){b[0]=c[0].add(e[0]);b[1]=c[1].add(e[1]);return a.normalize(b,b)};a.divide=function(b,c,e){b[0]=c[0].multiply(e[1]);b[1]=
c[1].multiply(e[0]);return a.normalize(b,b)};a.div=a.divide;a.equals=function(a,b){return a[0].isZero()&&b[0].isZero()||a[1].isZero()&&b[1].isZero()?!0:0===a[0].compare(b[0])&&0===a[1].compare(b[1])};a.approximates=function(b,c){if(a.equals(b,c))return!0;var e=a.create();a.sub(e,b,c);a.abs(e,e);return a.isLessThan(e,a.INFINITESIMAL)};a.isGreaterThan=function(b,c){return a.equals(b,c)?!1:0<b[0].multiply(c[1]).compare(c[0].multiply(b[1]))};a.isLessThan=function(b,c){return a.equals(b,c)?!1:0>b[0].multiply(c[1]).compare(c[0].multiply(b[1]))};
a.isNegative=function(a){return a[0].isNegative()};a.min=function(b,c,e){a.isLessThan(c,e)?(b[0]=c[0],b[1]=c[1]):(b[0]=e[0],b[1]=e[1]);return b};a.max=function(b,c,e){a.isGreaterThan(c,e)?(b[0]=c[0],b[1]=c[1]):(b[0]=e[0],b[1]=e[1]);return b};a.scalar_multiply=function(b,c,e){b[0]=c[0].multiply(e);b[1]=c[1];return a.normalize(b,b)};a.scalar_divide=function(b,c,e){b[0]=c[0];b[1]=c[1].multiply(e);return a.normalize(b,b)};a.normalize=function(b,c){if(c[0].isZero()||c[1].isZero())return c;if(0===c[0].compare(c[1]))return a.clone(a.ONE);
if(c[1].isNegative())b[0]=c[0].negate(),b[1]=c[1].negate();else if(b[0]=c[0],b[1]=c[1],b[1].isZero())return b;var e=q.greatest_common_divisor(b[0].abs(),b[1]);0<e.compare(BigInteger.ONE)&&(b[0]=b[0].quotient(e),b[1]=b[1].quotient(e));return b};a.opposite=function(a,b){a[0]=b[0].negate();a[1]=b[1];return a};a.negative=a.opposite;a.neg=a.opposite;a.power=function(b,c,e){2===e?(b[0]=c[0].square(),b[1]=c[1].square()):0<e?(b[0]=c[0].pow(e),b[1]=c[1].pow(e)):0>e?(e=Math.abs(e),b[0]=c[1].pow(e),b[1]=c[0].pow(e)):
a.copy(b,a.ONE);return b};a.pow=a.power;a.sqrt=function(b,c){return a.nthRoot(b,c,2)};a.nthRoot=function(b,c,e){if(a.equals(c,a.ZERO))return a.copy(b,a.ZERO);if(a.equals(c,a.ONE))return a.copy(b,a.ONE);if(a.equals(c,a.INFINITY))return a.copy(b,a.INFINITY);if(a.equals(c,a.INFINULL))return a.copy(b,a.INFINULL);var d=a.isNegative(c);d&&(c[0]=c[0].negate());a.copy(b,a.ONE);for(var f=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],k=a.clone(a.ONE),m=g;!a.approximates(c,k)&&m--;)a.isLessThan(c,
k)?(f[0]=f[0].add(f[1]),f[2]=f[2].add(f[3])):(f[1]=f[1].add(f[0]),f[3]=f[3].add(f[2])),b[0]=f[0].add(f[1]),b[1]=f[2].add(f[3]),a.pow(k,b,e);d&&(c[0]=c[0].negate(),1===e%2&&a.neg(b,b));return b};a.dot=function(a,b){return a[0].multiply(b[0]).add(a[1].multiply(b[1]))};a.str=function(a){return 0===a[1].compare(BigInteger.ONE)?a[0].toString():a[0].toString()+"/"+a[1].toString()};a.toDecimal=function(a){return a[0].toJSValue()/a[1].toJSValue()};a.dec=a.toDecimal;a.toInteger=function(a){return a[0].quotient(a[1]).toJSValue()};
a.round=a.toInteger;a.toBigInteger=function(a){return a[0].quotient(a[1])};a.floor=function(b){return Math.floor(a.toDecimal(b))};a.ceil=function(b){return Math.ceil(a.toDecimal(b))};a.fromInteger_copy=function(a,b){a[0]=BigInteger(b);a[1]=BigInteger.ONE;return a};a.fromInteger=function(b){return a.fromInteger_copy(a.create(),b)};a.fromIntegerInverse_copy=function(a,b){a[0]=BigInteger.ONE;a[1]=BigInteger(b);a[1].isNegative()&&(a[0]=a[0].negate(),a[1]=a[1].negate());return a};a.fromIntegerInverse=
function(b){return a.fromIntegerInverse_copy(a.create(),b)};a.fromDecimal=function(b){return a.fromDecimal_copy(a.create(),b)};a.fromDecimal_copy=function(b,c){c=parseFloat(c);if(isNaN(c))return a.copy(b,a.INFINULL);if(Infinity===c)return a.copy(b,a.INFINITY);if(Math.abs(c)<a.EPSILON)return a.copy(b,a.ZERO);if(Math.abs(c-1)<a.EPSILON)return a.copy(b,a.ONE);if(Math.abs(c%1)<a.EPSILON)return a.fromInteger_copy(b,c);if(Math.abs(1/c%1)<a.EPSILON)return a.fromIntegerInverse_copy(b,Math.round(1/c));a.copy(b,
a.ONE);for(var e=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],g=c,d=1,f=a.MAX_LOOPS;f--&&Math.abs(c-a.toDecimal(b))>a.EPSILON;)d=Math.floor(g),b[0]=BigInteger(d*e[0]+e[2]),b[1]=BigInteger(d*e[1]+e[3]),g=1/(g-d),e[2]=e[0],e[3]=e[1],e[0]=b[0],e[1]=b[1];return b};a.fromRandom=function(b){b[0]=BigInteger(0xfffffffffffff*Math.random()<<0);b[1]=BigInteger(Math.abs(0xfffffffffffff*Math.random()<<0));return a.normalize(b,b)};a.sin=function(b,c){if(c[1].isZero())return a.copy(b,a.ZERO);a.scalar_multiply(b,
c,2);var e=a.create();a.pow(e,c,2);a.add(e,e,a.ONE);a.divide(b,b,e);return b};a.cos=function(b,c){if(c[1].isZero())return a.neg(b,a.ONE);var e=a.create();a.pow(e,c,2);a.sub(b,a.ONE,e);var g=a.create();a.add(g,a.ONE,e);a.divide(b,b,g);return b};a.tan=function(b,c){a.scalar_multiply(b,c,2);var e=a.create();a.pow(e,c,2);a.scalar_multiply(e,e,2);a.add(b,b,e);a.pow(e,c,4);a.sub(e,a.ONE,e);a.divide(b,b,e);return b};a.toEgyptian=function(b){b=a.clone(b);a.abs(b,b);var c=a.floor(b);c&&a.sub(b,b,a.fromInteger(c));
if(!b[0])return c.toString();c||(c="");for(var e=1,g=a.create();1!==b[0];)e++,g=a.fromValues(1,e),a.isGreaterThan(b,g)&&(c&&(c+=" + "),c+=a.str(g),a.sub(b,b,g));return b?c?c+" + "+a.str(b):a.str(b):c?c:"0"};a.toBabylonian=function(b){var c="",e=a.toDecimal(b);b=parseInt(e);for(var e=e-b,g=0,d=0;0<b;)(g=b%60)&&(c=g+" * 60^"+d+(c?" + ":"")+c),b=(b-g)/60,d++;for(d=-1;0<e;)e*=60,g=parseInt(e+1E-13),e-=g,-1E-13>e||(g&&(c+=(c?" + ":"")+g+" * 60^"+d),d--);return c?c:"0"};a.traceSternBrocot=function(b){var c=
"";if(a.equals(b,a.ZERO)||a.equals(b,a.ONE)||a.equals(b,a.INFINITY)||a.equals(b,a.INFINULL))return c;b=a.clone(b);a.isNegative(b)&&(b[0]=b[0].negate());for(var e=a.clone(a.ONE),g=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],d=0,f=0,k=65536;!a.equals(b,e)&&k--;)a.isLessThan(b,e)?(g[0]=g[0].add(g[1]),g[2]=g[2].add(g[3]),f++,d&&(c+="R",1!==d&&(c+=d),d=0,c+=" ")):(g[1]=g[1].add(g[0]),g[3]=g[3].add(g[2]),d++,f&&(c+="L",1!==f&&(c+=f),f=0,c+=" ")),e[0]=g[0].add(g[1]),e[1]=g[2].add(g[3]);f?(c+=
"L",1!==f&&(c+=f)):d&&(c+="R",1!==d&&(c+=d));0>k&&(c+="...");return c};a.toContinuedFraction=function(b,c){c="undefined"===typeof c?65536:parseInt(c);if(a.equals(b,a.ZERO))return[0];if(a.equals(b,a.ONE))return[1];if(a.equals(b,a.NEGONE))return[-1];if(a.equals(b,a.INFINITY))return[1,0];if(a.equals(b,a.INFINULL))return[0,0];var e=a.clone(b),g=a.isNegative(e);g&&(e[0]=e[0].negate());for(var d=a.clone(a.ONE),f=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],k=1,m=[0],n=m.length-1;!a.equals(e,
d)&&c--;)a.isLessThan(e,d)?(-1===k?m[n]++:(k=-1,m.push(1),n++),f[0]=f[0].add(f[1]),f[2]=f[2].add(f[3])):(1===k?m[n]++:(k=1,m.push(1),n++),f[1]=f[1].add(f[0]),f[3]=f[3].add(f[2])),d[0]=f[0].add(f[1]),d[1]=f[2].add(f[3]);0>c?m.push(0):m[n]++;if(g)for(var q in m)m[q]=-m[q];return m};a.fromContinuedFraction=function(b,c){a.fromInteger_copy(b,c[c.length-1]);for(var e=c.length-2;-1<e;e--)a.invert(b,b),a.add(b,a.fromInteger(c[e]),b);return b};a.fromFactorial=function(b,c){if("undefined"!==typeof factorial.PREPARED[c])return a.fromInteger_copy(b,
factorial.PREPARED[c]);var e=factorial.PREPARED.length-1;for(a.fromInteger_copy(b,factorial.PREPARED[e]);e<c;)a.scalar_multiply(b,b,++e);return b};a.dump=function(b){return"bigrat\t"+a.str(b)+"\n~\t"+a.toDecimal(b)+"\nCF:\t["+a.toContinuedFraction(b)+"]\n"};a.ZERO=a.fromInteger(0);a.ONE=a.fromInteger(1);a.NEGONE=a.fromInteger(-1);a.INFINITY=a.fromValues(1,0);a.INFINULL=a.fromValues(0,0);a.INFINITESIMAL=a.clone([new BigInteger(1),b]);a.PI=a.fromValues("3141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481117450284102701938521105559644622948954930381964428810975665933446128475648233786783165271201909145648566923460348610454326648213393607260249141273724587",
"1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");"undefined"!==typeof c&&(c.bigrat=a);var e=function(a,b){this.a=k.fromValues(parseInt(a),parseInt(b))};e.prototype.toString=function(){return k.str(this.a)};e.prototype.toContinuedFraction=function(a){return k.toContinuedFraction(this.a,
a)};e.prototype.invert=function(){return k.invert(this.a)};e.prototype.reciprocal=e.prototype.invert;e.prototype.add=function(a){var b=k.create();k.add(b,this.a,a.a);return new e(b[0],b[1])};e.prototype.plus=e.prototype.add;e.prototype.subtract=function(a){var b=k.create();k.sub(b,this.a,a.a);return new e(b[0],b[1])};e.prototype.sub=e.prototype.subtract;e.prototype.minus=e.prototype.subtract;e.prototype.multiply=function(a){var b=k.create();k.mul(b,this.a,a.a);return new e(b[0],b[1])};e.prototype.mul=
e.prototype.multiply;e.prototype.times=e.prototype.multiply;e.prototype.mediant=function(a){var b=k.create();k.mediant(b,this.a,a.a);return new e(b[0],b[1])};e.prototype.divide=function(a){var b=k.create();k.div(b,this.a,a.a);return new e(b[0],b[1])};e.prototype.div=e.prototype.divide;e.prototype.divided_by=e.prototype.divide;e.prototype.power=function(a){var b=k.create();k.pow(b,this.a,a);return new e(b[0],b[1])};e.prototype.pow=e.prototype.power;e.prototype.dump=function(){return k.dump(this.a)};
e.prototype.toRat=function(){return k.clone(this.a)};e.prototype.toDecimal=function(){return k.toDecimal(this.a)};e.fromRat=function(a){var b=new e;b.a[0]=a[0];b.a[1]=a[1];return b};e.fromInteger=function(a){return e.fromRat(k.fromInteger(a))};e.fromIntegerInverse=function(a){return e.fromRat(k.fromIntegerInverse(a))};e.fromDecimal=function(a){return e.fromRat(k.fromDecimal(a))};e.fromContinuedFraction=function(a){return e.fromRat(k.fromContinuedFraction(k.create(),a))};"undefined"!==typeof c&&(c.rational=
e)})(l)})(this);(function(c,l){"object"===typeof module&&"object"===typeof module.exports?module.exports=c.document?l(c,!0):function(c){if(!c.document)throw Error("jQuery requires a window with a document");return l(c)}:l(c)})("undefined"!==typeof window?window:this,function(c,l){function f(a){var b=a.length,c=p.type(a);return"function"===c||p.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"===typeof b&&0<b&&b-1 in a}function d(a,b,c){if(p.isFunction(b))return p.grep(a,function(a,e){return!!b.call(a,
e,a)!==c});if(b.nodeType)return p.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(Ab.test(b))return p.filter(b,a,c);b=p.filter(b,a)}return p.grep(a,function(a){return 0<=pa.call(b,a)!==c})}function q(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function m(a){var b=lb[a]={};p.each(a.match(qa)||[],function(a,c){b[c]=!0});return b}function n(){J.removeEventListener("DOMContentLoaded",n,!1);c.removeEventListener("load",n,!1);p.ready()}function r(){Object.defineProperty(this.cache={},
0,{get:function(){return{}}});this.expando=p.expando+Math.random()}function k(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(Qa,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Bb.test(c)?p.parseJSON(c):c}catch(e){}S.set(a,b,c)}else c=void 0;return c}function b(){return!0}function g(){return!1}function a(){try{return J.activeElement}catch(a){}}function e(a,b){return p.nodeName(a,"table")&&p.nodeName(11!==b.nodeType?
b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function h(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function u(a){var b=bb.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function w(a,b){for(var c=0,e=a.length;c<e;c++)M.set(a[c],"globalEval",!b||M.get(b[c],"globalEval"))}function y(a,b){var c,e,h,g;if(1===b.nodeType){if(M.hasData(a)&&(g=M.access(a),c=M.set(b,g),g=g.events))for(h in delete c.handle,
c.events={},g)for(c=0,e=g[h].length;c<e;c++)p.event.add(b,h,g[h][c]);S.hasData(a)&&(h=S.access(a),h=p.extend({},h),S.set(b,h))}}function v(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&p.nodeName(a,b)?p.merge([a],c):c}function x(a,b){var e,h=p(b.createElement(a)).appendTo(b.body),g=c.getDefaultComputedStyle&&(e=c.getDefaultComputedStyle(h[0]))?e.display:p.css(h[0],"display");h.detach();return g}function z(a){var b=
J,c=Ra[a];c||(c=x(a,b),"none"!==c&&c||(Sa=(Sa||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Sa[0].contentDocument,b.write(),b.close(),c=x(a,b),Sa.detach()),Ra[a]=c);return c}function B(a,b,c){var e,h,g=a.style;(c=c||Ta(a))&&(h=c.getPropertyValue(b)||c[b]);c&&(""!==h||p.contains(a.ownerDocument,a)||(h=p.style(a,b)),ma.test(h)&&Ga.test(b)&&(a=g.width,b=g.minWidth,e=g.maxWidth,g.minWidth=g.maxWidth=g.width=h,h=c.width,g.width=a,g.minWidth=b,g.maxWidth=e));return void 0!==
h?h+"":h}function I(a,b){return{get:function(){if(a())delete this.get;else return(this.get=b).apply(this,arguments)}}}function D(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),e=b,h=ia.length;h--;)if(b=ia[h]+c,b in a)return b;return e}function G(a,b,c){return(a=ja.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function V(a,b,c,e,h){b=c===(e?"border":"content")?4:"width"===b?1:0;for(var g=0;4>b;b+=2)"margin"===c&&(g+=p.css(a,c+wa[b],!0,h)),e?("content"===c&&(g-=p.css(a,"padding"+
wa[b],!0,h)),"margin"!==c&&(g-=p.css(a,"border"+wa[b]+"Width",!0,h))):(g+=p.css(a,"padding"+wa[b],!0,h),"padding"!==c&&(g+=p.css(a,"border"+wa[b]+"Width",!0,h)));return g}function K(a,b,c){var e=!0,h="width"===b?a.offsetWidth:a.offsetHeight,g=Ta(a),d="border-box"===p.css(a,"boxSizing",!1,g);if(0>=h||null==h){h=B(a,b,g);if(0>h||null==h)h=a.style[b];if(ma.test(h))return h;e=d&&(W.boxSizingReliable()||h===a.style[b]);h=parseFloat(h)||0}return h+V(a,b,c||(d?"border":"content"),e,g)+"px"}function P(a,
b){for(var c,e,h,g=[],d=0,f=a.length;d<f;d++)e=a[d],e.style&&(g[d]=M.get(e,"olddisplay"),c=e.style.display,b?(g[d]||"none"!==c||(e.style.display=""),""===e.style.display&&Aa(e)&&(g[d]=M.access(e,"olddisplay",z(e.nodeName)))):(h=Aa(e),"none"===c&&h||M.set(e,"olddisplay",h?c:p.css(e,"display"))));for(d=0;d<f;d++)e=a[d],!e.style||b&&"none"!==e.style.display&&""!==e.style.display||(e.style.display=b?g[d]||"":"none");return a}function N(a,b,c,e,h){return new N.prototype.init(a,b,c,e,h)}function L(){setTimeout(function(){Ba=
void 0});return Ba=p.now()}function X(a,b){var c,e=0,h={height:a};for(b=b?1:0;4>e;e+=2-b)c=wa[e],h["margin"+c]=h["padding"+c]=a;b&&(h.opacity=h.width=a);return h}function ca(a,b,c){for(var e,h=(E[b]||[]).concat(E["*"]),g=0,d=h.length;g<d;g++)if(e=h[g].call(c,b,a))return e}function U(a,b){var c,e,h,g,d;for(c in a)if(e=p.camelCase(c),h=b[e],g=a[c],p.isArray(g)&&(h=g[1],g=a[c]=g[0]),c!==e&&(a[e]=g,delete a[c]),(d=p.cssHooks[e])&&"expand"in d)for(c in g=d.expand(g),delete a[e],g)c in a||(a[c]=g[c],b[c]=
h);else b[e]=h}function ka(a,b,c){var e,h=0,g=O.length,d=p.Deferred().always(function(){delete f.elem}),f=function(){if(e)return!1;for(var b=Ba||L(),b=Math.max(0,k.startTime+k.duration-b),c=1-(b/k.duration||0),h=0,g=k.tweens.length;h<g;h++)k.tweens[h].run(c);d.notifyWith(a,[k,c,b]);if(1>c&&g)return b;d.resolveWith(a,[k]);return!1},k=d.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Ba||L(),duration:c.duration,tweens:[],createTween:function(b,
c){var e=p.Tween(a,k.opts,b,c,k.opts.specialEasing[b]||k.opts.easing);k.tweens.push(e);return e},stop:function(b){var c=0,h=b?k.tweens.length:0;if(e)return this;for(e=!0;c<h;c++)k.tweens[c].run(1);b?d.resolveWith(a,[k,b]):d.rejectWith(a,[k,b]);return this}});c=k.props;for(U(c,k.opts.specialEasing);h<g;h++)if(b=O[h].call(k,a,c,k.opts))return b;p.map(c,ca,k);p.isFunction(k.opts.start)&&k.opts.start.call(a,k);p.fx.timer(p.extend(f,{elem:a,anim:k,queue:k.opts.queue}));return k.progress(k.opts.progress).done(k.opts.done,
k.opts.complete).fail(k.opts.fail).always(k.opts.always)}function oa(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var e,h=0,g=b.toLowerCase().match(qa)||[];if(p.isFunction(c))for(;e=g[h++];)"+"===e[0]?(e=e.slice(1)||"*",(a[e]=a[e]||[]).unshift(c)):(a[e]=a[e]||[]).push(c)}}function za(a,b,c,e){function h(f){var k;g[f]=!0;p.each(a[f]||[],function(a,t){var F=t(b,c,e);if("string"===typeof F&&!d&&!g[F])return b.dataTypes.unshift(F),h(F),!1;if(d)return!(k=F)});return k}var g={},d=a===cb;return h(b.dataTypes[0])||
!g["*"]&&h("*")}function ha(a,b){var c,e,h=p.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((h[c]?a:e||(e={}))[c]=b[c]);e&&p.extend(!0,a,e);return a}function ra(a,b,c,e){var h;if(p.isArray(b))p.each(b,function(b,h){c||Ma.test(a)?e(a,h):ra(a+"["+("object"===typeof h?b:"")+"]",h,c,e)});else if(c||"object"!==p.type(b))e(a,b);else for(h in b)ra(a+"["+h+"]",b[h],c,e)}function sa(a){return p.isWindow(a)?a:9===a.nodeType&&a.defaultView}var ta=[],da=ta.slice,Ha=ta.concat,Ca=ta.push,pa=ta.indexOf,
xa={},Db=xa.toString,Da=xa.hasOwnProperty,W={},J=c.document,p=function(a,b){return new p.fn.init(a,b)},Eb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Fb=/^-ms-/,mb=/-([\da-z])/gi,db=function(a,b){return b.toUpperCase()};p.fn=p.prototype={jquery:"2.1.1",constructor:p,selector:"",length:0,toArray:function(){return da.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:da.call(this)},pushStack:function(a){a=p.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},
each:function(a,b){return p.each(this,a,b)},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(da.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Ca,sort:ta.sort,splice:ta.splice};p.extend=p.fn.extend=function(){var a,
b,c,e,h,g=arguments[0]||{},d=1,f=arguments.length,k=!1;"boolean"===typeof g&&(k=g,g=arguments[d]||{},d++);"object"===typeof g||p.isFunction(g)||(g={});d===f&&(g=this,d--);for(;d<f;d++)if(null!=(a=arguments[d]))for(b in a)c=g[b],e=a[b],g!==e&&(k&&e&&(p.isPlainObject(e)||(h=p.isArray(e)))?(h?(h=!1,c=c&&p.isArray(c)?c:[]):c=c&&p.isPlainObject(c)?c:{},g[b]=p.extend(k,c,e)):void 0!==e&&(g[b]=e));return g};p.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);
},noop:function(){},isFunction:function(a){return"function"===p.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!p.isArray(a)&&0<=a-parseFloat(a)},isPlainObject:function(a){return"object"!==p.type(a)||a.nodeType||p.isWindow(a)||a.constructor&&!Da.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){for(var b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?
xa[Db.call(a)]||"object":typeof a},globalEval:function(a){var b;b=eval;if(a=p.trim(a))1===a.indexOf("use strict")?(b=J.createElement("script"),b.text=a,J.head.appendChild(b).parentNode.removeChild(b)):b(a)},camelCase:function(a){return a.replace(Fb,"ms-").replace(mb,db)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var e,h=0,g=a.length;e=f(a);if(c)if(e)for(;h<g&&(e=b.apply(a[h],c),!1!==e);h++);else for(h in a){if(e=b.apply(a[h],c),!1===
e)break}else if(e)for(;h<g&&(e=b.call(a[h],h,a[h]),!1!==e);h++);else for(h in a)if(e=b.call(a[h],h,a[h]),!1===e)break;return a},trim:function(a){return null==a?"":(a+"").replace(Eb,"")},makeArray:function(a,b){var c=b||[];null!=a&&(f(Object(a))?p.merge(c,"string"===typeof a?[a]:a):Ca.call(c,a));return c},inArray:function(a,b,c){return null==b?-1:pa.call(b,a,c)},merge:function(a,b){for(var c=+b.length,e=0,h=a.length;e<c;e++)a[h++]=b[e];a.length=h;return a},grep:function(a,b,c){for(var e=[],h=0,g=a.length,
d=!c;h<g;h++)c=!b(a[h],h),c!==d&&e.push(a[h]);return e},map:function(a,b,c){var e,h=0,g=a.length,d=[];if(f(a))for(;h<g;h++)e=b(a[h],h,c),null!=e&&d.push(e);else for(h in a)e=b(a[h],h,c),null!=e&&d.push(e);return Ha.apply([],d)},guid:1,proxy:function(a,b){var c,e;"string"===typeof b&&(c=a[b],b=a,a=c);if(p.isFunction(a))return e=da.call(arguments,2),c=function(){return a.apply(b||this,e.concat(da.call(arguments)))},c.guid=a.guid=a.guid||p.guid++,c},now:Date.now,support:W});p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){xa["[object "+b+"]"]=b.toLowerCase()});var Ia=function(a){function b(a,c,e,h){var g,d,s,f,F;(c?c.ownerDocument||c:X)!==L&&I(c);c=c||L;e=e||[];if(!a||"string"!==typeof a)return e;if(1!==(f=c.nodeType)&&9!==f)return[];if(A&&!h){if(g=qa.exec(a))if(s=g[1])if(9===f)if((d=c.getElementById(s))&&d.parentNode){if(d.id===s)return e.push(d),e}else return e;else{if(c.ownerDocument&&(d=c.ownerDocument.getElementById(s))&&ca(c,d)&&d.id===s)return e.push(d),e}else{if(g[2])return T.apply(e,c.getElementsByTagName(a)),
e;if((s=g[3])&&y.getElementsByClassName&&c.getElementsByClassName)return T.apply(e,c.getElementsByClassName(s)),e}if(y.qsa&&(!E||!E.test(a))){d=g=J;s=c;F=9===f&&a;if(1===f&&"object"!==c.nodeName.toLowerCase()){f=z(a);(g=c.getAttribute("id"))?d=g.replace(Da,"\\$&"):c.setAttribute("id",d);d="[id='"+d+"'] ";for(s=f.length;s--;)f[s]=d+H(f[s]);s=la.test(a)&&t(c.parentNode)||c;F=f.join(",")}if(F)try{return T.apply(e,s.querySelectorAll(F)),e}catch(k){}finally{g||c.removeAttribute("id")}}}return K(a.replace(da,
"$1"),c,e,h)}function c(){function a(c,e){b.push(c+" ")>v.cacheLength&&delete a[b.shift()];return a[c+" "]=e}var b=[];return a}function e(a){a[J]=!0;return a}function h(a){var b=L.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function g(a,b){for(var c=a.split("|"),e=a.length;e--;)v.attrHandle[c[e]]=b}function d(a,b){var c=b&&a,e=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(e)return e;
if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function f(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function k(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function m(a){return e(function(b){b=+b;return e(function(c,e){for(var t,h=a([],c.length,b),g=h.length;g--;)c[t=h[g]]&&(c[t]=!(e[t]=c[t]))})})}function t(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function s(){}function H(a){for(var b=
0,c=a.length,e="";b<c;b++)e+=a[b].value;return e}function n(a,b,c){var e=b.dir,t=c&&"parentNode"===e,h=Q++;return b.first?function(b,c,h){for(;b=b[e];)if(1===b.nodeType||t)return a(b,c,h)}:function(b,c,g){var d,s,f=[O,h];if(g)for(;b=b[e];){if((1===b.nodeType||t)&&a(b,c,g))return!0}else for(;b=b[e];)if(1===b.nodeType||t){s=b[J]||(b[J]={});if((d=s[e])&&d[0]===O&&d[1]===h)return f[2]=d[2];s[e]=f;if(f[2]=a(b,c,g))return!0}}}function u(a){return 1<a.length?function(b,c,e){for(var t=a.length;t--;)if(!a[t](b,
c,e))return!1;return!0}:a[0]}function q(a,b,c,e,t){for(var h,g=[],d=0,s=a.length,f=null!=b;d<s;d++)if(h=a[d])if(!c||c(h,e,t))g.push(h),f&&b.push(d);return g}function p(a,c,t,h,g,d){h&&!h[J]&&(h=p(h));g&&!g[J]&&(g=p(g,d));return e(function(e,d,s,f){var F,H,k=[],m=[],n=d.length,u;if(!(u=e)){u=c||"*";for(var Y=s.nodeType?[s]:s,p=[],Fa=0,w=Y.length;Fa<w;Fa++)b(u,Y[Fa],p);u=p}u=!a||!e&&c?u:q(u,k,a,s,f);Y=t?g||(e?a:n||h)?[]:d:u;t&&t(u,Y,s,f);if(h)for(F=q(Y,m),h(F,[],s,f),s=F.length;s--;)if(H=F[s])Y[m[s]]=
!(u[m[s]]=H);if(e){if(g||a){if(g){F=[];for(s=Y.length;s--;)(H=Y[s])&&F.push(u[s]=H);g(null,Y=[],F,f)}for(s=Y.length;s--;)(H=Y[s])&&-1<(F=g?ha.call(e,H):k[s])&&(e[F]=!(d[F]=H))}}else Y=q(Y===d?Y.splice(n,Y.length):Y),g?g(null,d,Y,f):T.apply(d,Y)})}function w(a){var b,c,e,t=a.length,h=v.relative[a[0].type];c=h||v.relative[" "];for(var g=h?1:0,d=n(function(a){return a===b},c,!0),s=n(function(a){return-1<ha.call(b,a)},c,!0),f=[function(a,c,e){return!h&&(e||c!==B)||((b=c).nodeType?d(a,c,e):s(a,c,e))}];g<
t;g++)if(c=v.relative[a[g].type])f=[n(u(f),c)];else{c=v.filter[a[g].type].apply(null,a[g].matches);if(c[J]){for(e=++g;e<t&&!v.relative[a[e].type];e++);return p(1<g&&u(f),1<g&&H(a.slice(0,g-1).concat({value:" "===a[g-2].type?"*":""})).replace(da,"$1"),c,g<e&&w(a.slice(g,e)),e<t&&w(a=a.slice(e)),e<t&&H(a))}f.push(c)}return u(f)}function l(a,c){var t=0<c.length,h=0<a.length,g=function(e,g,d,s,f){var F,H,k,m=0,n="0",u=e&&[],Y=[],p=B,Fa=e||h&&v.find.TAG("*",f),w=O+=null==p?1:Math.random()||.1,l=Fa.length;
for(f&&(B=g!==L&&g);n!==l&&null!=(F=Fa[n]);n++){if(h&&F){for(H=0;k=a[H++];)if(k(F,g,d)){s.push(F);break}f&&(O=w)}t&&((F=!k&&F)&&m--,e&&u.push(F))}m+=n;if(t&&n!==m){for(H=0;k=c[H++];)k(u,Y,g,d);if(e){if(0<m)for(;n--;)u[n]||Y[n]||(Y[n]=Ha.call(s));Y=q(Y)}T.apply(s,Y);f&&!e&&0<Y.length&&1<m+c.length&&b.uniqueSort(s)}f&&(O=w,B=p);return u};return t?e(g):g}var r,y,v,x,D,z,G,K,B,V,N,I,L,P,A,E,U,M,ca,J="sizzle"+-new Date,X=a.document,O=0,Q=0,W=c(),za=c(),S=c(),xa=function(a,b){a===b&&(N=!0);return 0},ka=
{}.hasOwnProperty,R=[],Ha=R.pop,ra=R.push,T=R.push,Z=R.slice,ha=R.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},aa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),sa="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+aa+"))|)[\\x20\\t\\r\\n\\f]*\\]",ta=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
sa+")*)|.*)\\)|)",da=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,oa=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Ca=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ga=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,ia=new RegExp(ta),ja=new RegExp("^"+aa+"$"),ba={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+sa),PSEUDO:new RegExp("^"+ta),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ma=/^(?:input|select|textarea|button)$/i,na=/^h\d$/i,fa=/^[^{]+\{\s*\[native \w/,qa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,la=/[+~]/,Da=/'|\\/g,ea=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,pa=function(a,b,c){a="0x"+b-65536;
return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{T.apply(R=Z.call(X.childNodes),X.childNodes),R[X.childNodes.length].nodeType}catch(wa){T={apply:R.length?function(a,b){ra.apply(a,Z.call(b))}:function(a,b){for(var c=a.length,e=0;a[c++]=b[e++];);a.length=c-1}}}y=b.support={};D=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};I=b.setDocument=function(a){var b=a?a.ownerDocument||a:X;a=b.defaultView;if(b===
L||9!==b.nodeType||!b.documentElement)return L;L=b;P=b.documentElement;A=!D(b);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){I()},!1):a.attachEvent&&a.attachEvent("onunload",function(){I()}));y.attributes=h(function(a){a.className="i";return!a.getAttribute("className")});y.getElementsByTagName=h(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});y.getElementsByClassName=fa.test(b.getElementsByClassName)&&h(function(a){a.innerHTML=
"<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});y.getById=h(function(a){P.appendChild(a).id=J;return!b.getElementsByName||!b.getElementsByName(J).length});y.getById?(v.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&A){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},v.filter.ID=function(a){var b=a.replace(ea,pa);return function(a){return a.getAttribute("id")===b}}):(delete v.find.ID,v.filter.ID=function(a){var b=
a.replace(ea,pa);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});v.find.TAG=y.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var c,e=[],t=0,h=b.getElementsByTagName(a);if("*"===a){for(;c=h[t++];)1===c.nodeType&&e.push(c);return e}return h};v.find.CLASS=y.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&A)return b.getElementsByClassName(a)};
U=[];E=[];if(y.qsa=fa.test(b.querySelectorAll))h(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";a.querySelectorAll("[msallowclip^='']").length&&E.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||E.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||E.push(":checked")}),h(function(a){var c=
b.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&E.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||E.push(":enabled",":disabled");a.querySelectorAll("*,:x");E.push(",.*:")});(y.matchesSelector=fa.test(M=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&h(function(a){y.disconnectedMatch=M.call(a,"div");M.call(a,"[s!='']:x");U.push("!=",
ta)});E=E.length&&new RegExp(E.join("|"));U=U.length&&new RegExp(U.join("|"));ca=(a=fa.test(P.compareDocumentPosition))||fa.test(P.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,e=b&&b.parentNode;return a===e||!!(e&&1===e.nodeType&&(c.contains?c.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};xa=a?function(a,c){if(a===c)return N=!0,0;var e=!a.compareDocumentPosition-!c.compareDocumentPosition;
if(e)return e;e=(a.ownerDocument||a)===(c.ownerDocument||c)?a.compareDocumentPosition(c):1;return e&1||!y.sortDetached&&c.compareDocumentPosition(a)===e?a===b||a.ownerDocument===X&&ca(X,a)?-1:c===b||c.ownerDocument===X&&ca(X,c)?1:V?ha.call(V,a)-ha.call(V,c):0:e&4?-1:1}:function(a,c){if(a===c)return N=!0,0;var e,t=0;e=a.parentNode;var h=c.parentNode,g=[a],s=[c];if(!e||!h)return a===b?-1:c===b?1:e?-1:h?1:V?ha.call(V,a)-ha.call(V,c):0;if(e===h)return d(a,c);for(e=a;e=e.parentNode;)g.unshift(e);for(e=
c;e=e.parentNode;)s.unshift(e);for(;g[t]===s[t];)t++;return t?d(g[t],s[t]):g[t]===X?-1:s[t]===X?1:0};return b};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){(a.ownerDocument||a)!==L&&I(a);c=c.replace(ga,"='$1']");if(!(!y.matchesSelector||!A||U&&U.test(c)||E&&E.test(c)))try{var e=M.call(a,c);if(e||y.disconnectedMatch||a.document&&11!==a.document.nodeType)return e}catch(t){}return 0<b(c,L,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==L&&I(a);return ca(a,
b)};b.attr=function(a,b){(a.ownerDocument||a)!==L&&I(a);var c=v.attrHandle[b.toLowerCase()],c=c&&ka.call(v.attrHandle,b.toLowerCase())?c(a,b,!A):void 0;return void 0!==c?c:y.attributes||!A?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,c=[],e=0,t=0;N=!y.detectDuplicates;V=!y.sortStable&&a.slice(0);a.sort(xa);if(N){for(;b=a[t++];)b===a[t]&&(e=c.push(t));for(;e--;)a.splice(c[e],
1)}V=null;return a};x=b.getText=function(a){var b,c="",e=0;b=a.nodeType;if(!b)for(;b=a[e++];)c+=x(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===b||4===b)return a.nodeValue;return c};v=b.selectors={cacheLength:50,createPseudo:e,match:ba,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=
a[1].replace(ea,pa);a[3]=(a[3]||a[4]||a[5]||"").replace(ea,pa);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[6]&&a[2];if(ba.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":c&&ia.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,
b),a[2]=c.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(ea,pa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=W[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&W(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,e){return function(t){t=
b.attr(t,a);if(null==t)return"!="===c;if(!c)return!0;t+="";return"="===c?t===e:"!="===c?t!==e:"^="===c?e&&0===t.indexOf(e):"*="===c?e&&-1<t.indexOf(e):"$="===c?e&&t.slice(-e.length)===e:"~="===c?-1<(" "+t+" ").indexOf(e):"|="===c?t===e||t.slice(0,e.length+1)===e+"-":!1}},CHILD:function(a,b,c,e,t){var h="nth"!==a.slice(0,3),g="last"!==a.slice(-4),d="of-type"===b;return 1===e&&0===t?function(a){return!!a.parentNode}:function(b,c,s){var f,F,H,k,m;c=h!==g?"nextSibling":"previousSibling";var n=b.parentNode,
u=d&&b.nodeName.toLowerCase();s=!s&&!d;if(n){if(h){for(;c;){for(F=b;F=F[c];)if(d?F.nodeName.toLowerCase()===u:1===F.nodeType)return!1;m=c="only"===a&&!m&&"nextSibling"}return!0}m=[g?n.firstChild:n.lastChild];if(g&&s)for(s=n[J]||(n[J]={}),f=s[a]||[],k=f[0]===O&&f[1],H=f[0]===O&&f[2],F=k&&n.childNodes[k];F=++k&&F&&F[c]||(H=k=0)||m.pop();){if(1===F.nodeType&&++H&&F===b){s[a]=[O,k,H];break}}else if(s&&(f=(b[J]||(b[J]={}))[a])&&f[0]===O)H=f[1];else for(;(F=++k&&F&&F[c]||(H=k=0)||m.pop())&&((d?F.nodeName.toLowerCase()!==
u:1!==F.nodeType)||!++H||(s&&((F[J]||(F[J]={}))[a]=[O,H]),F!==b)););H-=t;return H===e||0===H%e&&0<=H/e}}},PSEUDO:function(a,c){var t,h=v.pseudos[a]||v.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return h[J]?h(c):1<h.length?(t=[a,a,"",c],v.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,b){for(var e,t=h(a,c),g=t.length;g--;)e=ha.call(a,t[g]),a[e]=!(b[e]=t[g])}):function(a){return h(a,0,t)}):h}},pseudos:{not:e(function(a){var b=[],c=[],t=G(a.replace(da,"$1"));return t[J]?
e(function(a,b,c,e){e=t(a,null,e,[]);for(var h=a.length;h--;)if(c=e[h])a[h]=!(b[h]=c)}):function(a,e,h){b[0]=a;t(b,null,h,c);return!c.pop()}}),has:e(function(a){return function(c){return 0<b(a,c).length}}),contains:e(function(a){return function(b){return-1<(b.textContent||b.innerText||x(b)).indexOf(a)}}),lang:e(function(a){ja.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(ea,pa).toLowerCase();return function(b){var c;do if(c=A?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=
c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===P},focus:function(a){return a===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&
!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!v.pseudos.empty(a)},header:function(a){return na.test(a.nodeName)},input:function(a){return ma.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===
a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:m(function(){return[0]}),last:m(function(a,b){return[b-1]}),eq:m(function(a,b,c){return[0>c?c+b:c]}),even:m(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:m(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:m(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:m(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};v.pseudos.nth=v.pseudos.eq;for(r in{radio:!0,checkbox:!0,file:!0,password:!0,
image:!0})v.pseudos[r]=f(r);for(r in{submit:!0,reset:!0})v.pseudos[r]=k(r);s.prototype=v.filters=v.pseudos;v.setFilters=new s;z=b.tokenize=function(a,c){var e,t,h,g,d,s,f;if(d=za[a+" "])return c?0:d.slice(0);d=a;s=[];for(f=v.preFilter;d;){if(!e||(t=oa.exec(d)))t&&(d=d.slice(t[0].length)||d),s.push(h=[]);e=!1;if(t=Ca.exec(d))e=t.shift(),h.push({value:e,type:t[0].replace(da," ")}),d=d.slice(e.length);for(g in v.filter)!(t=ba[g].exec(d))||f[g]&&!(t=f[g](t))||(e=t.shift(),h.push({value:e,type:g,matches:t}),
d=d.slice(e.length));if(!e)break}return c?d.length:d?b.error(a):za(a,s).slice(0)};G=b.compile=function(a,b){var c,e=[],t=[],h=S[a+" "];if(!h){b||(b=z(a));for(c=b.length;c--;)h=w(b[c]),h[J]?e.push(h):t.push(h);h=S(a,l(t,e));h.selector=a}return h};K=b.select=function(a,b,c,e){var h,g,d,s,f="function"===typeof a&&a,F=!e&&z(a=f.selector||a);c=c||[];if(1===F.length){g=F[0]=F[0].slice(0);if(2<g.length&&"ID"===(d=g[0]).type&&y.getById&&9===b.nodeType&&A&&v.relative[g[1].type]){b=(v.find.ID(d.matches[0].replace(ea,
pa),b)||[])[0];if(!b)return c;f&&(b=b.parentNode);a=a.slice(g.shift().value.length)}for(h=ba.needsContext.test(a)?0:g.length;h--;){d=g[h];if(v.relative[s=d.type])break;if(s=v.find[s])if(e=s(d.matches[0].replace(ea,pa),la.test(g[0].type)&&t(b.parentNode)||b)){g.splice(h,1);a=e.length&&H(g);if(!a)return T.apply(c,e),c;break}}}(f||G(a,F))(e,b,!A,c,la.test(a)&&t(b.parentNode)||b);return c};y.sortStable=J.split("").sort(xa).join("")===J;y.detectDuplicates=!!N;I();y.sortDetached=h(function(a){return a.compareDocumentPosition(L.createElement("div"))&
1});h(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||g("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});y.attributes&&h(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||g("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});h(function(a){return null==a.getAttribute("disabled")})||g("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
function(a,b,c){var e;if(!c)return!0===a[b]?b.toLowerCase():(e=a.getAttributeNode(b))&&e.specified?e.value:null});return b}(c);p.find=Ia;p.expr=Ia.selectors;p.expr[":"]=p.expr.pseudos;p.unique=Ia.uniqueSort;p.text=Ia.getText;p.isXMLDoc=Ia.isXML;p.contains=Ia.contains;var nb=p.expr.match.needsContext,ob=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ab=/^.[^:#\[\.,]*$/;p.filter=function(a,b,c){var e=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===e.nodeType?p.find.matchesSelector(e,a)?[e]:[]:p.find.matches(a,p.grep(b,
function(a){return 1===a.nodeType}))};p.fn.extend({find:function(a){var b,c=this.length,e=[],h=this;if("string"!==typeof a)return this.pushStack(p(a).filter(function(){for(b=0;b<c;b++)if(p.contains(h[b],this))return!0}));for(b=0;b<c;b++)p.find(a,h[b],e);e=this.pushStack(1<c?p.unique(e):e);e.selector=this.selector?this.selector+" "+a:a;return e},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"===
typeof a&&nb.test(a)?p(a):a||[],!1).length}});var Ua,Gb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(p.fn.init=function(a,b){var c;if(!a)return this;if("string"===typeof a){c="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:Gb.exec(a);if(!c||!c[1]&&b)return!b||b.jquery?(b||Ua).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof p?b[0]:b,p.merge(this,p.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:J,!0)),ob.test(c[1])&&p.isPlainObject(b))for(c in b)if(p.isFunction(this[c]))this[c](b[c]);
else this.attr(c,b[c])}else(c=J.getElementById(c[2]))&&c.parentNode&&(this.length=1,this[0]=c),this.context=J,this.selector=a;return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(p.isFunction(a))return"undefined"!==typeof Ua.ready?Ua.ready(a):a(p);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return p.makeArray(a,this)}).prototype=p.fn;Ua=p(J);var Va=/^(?:parents|prev(?:Until|All))/,eb={children:!0,contents:!0,next:!0,prev:!0};p.extend({dir:function(a,
b,c){for(var e=[],h=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(h&&p(a).is(c))break;e.push(a)}return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});p.fn.extend({has:function(a){var b=p(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(p.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,e=0,h=this.length,g=[],d=nb.test(a)||"string"!==typeof a?p(a,b||this.context):0;e<h;e++)for(c=this[e];c&&c!==
b;c=c.parentNode)if(11>c.nodeType&&(d?-1<d.index(c):1===c.nodeType&&p.find.matchesSelector(c,a))){g.push(c);break}return this.pushStack(1<g.length?p.unique(g):g)},index:function(a){return a?"string"===typeof a?pa.call(p(a),this[0]):pa.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(p.unique(p.merge(this.get(),p(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});p.each({parent:function(a){return(a=
a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return q(a,"nextSibling")},prev:function(a){return q(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||
{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return a.contentDocument||p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,e){var h=p.map(this,b,c);"Until"!==a.slice(-5)&&(e=c);e&&"string"===typeof e&&(h=p.filter(e,h));1<this.length&&(eb[a]||p.unique(h),Va.test(a)&&h.reverse());return this.pushStack(h)}});var qa=/\S+/g,lb={};p.Callbacks=function(a){a="string"===typeof a?lb[a]||m(a):p.extend({},a);var b,c,e,h,g,d,f=[],k=!a.once&&[],n=function(s){b=
a.memory&&s;c=!0;d=h||0;h=0;g=f.length;for(e=!0;f&&d<g;d++)if(!1===f[d].apply(s[0],s[1])&&a.stopOnFalse){b=!1;break}e=!1;f&&(k?k.length&&n(k.shift()):b?f=[]:t.disable())},t={add:function(){if(f){var c=f.length;(function Y(b){p.each(b,function(b,c){var e=p.type(c);"function"===e?a.unique&&t.has(c)||f.push(c):c&&c.length&&"string"!==e&&Y(c)})})(arguments);e?g=f.length:b&&(h=c,n(b))}return this},remove:function(){f&&p.each(arguments,function(a,b){for(var c;-1<(c=p.inArray(b,f,c));)f.splice(c,1),e&&(c<=
g&&g--,c<=d&&d--)});return this},has:function(a){return a?-1<p.inArray(a,f):!(!f||!f.length)},empty:function(){f=[];g=0;return this},disable:function(){f=k=b=void 0;return this},disabled:function(){return!f},lock:function(){k=void 0;b||t.disable();return this},locked:function(){return!k},fireWith:function(a,b){!f||c&&!k||(b=b||[],b=[a,b.slice?b.slice():b],e?k.push(b):n(b));return this},fire:function(){t.fireWith(this,arguments);return this},fired:function(){return!!c}};return t};p.extend({Deferred:function(a){var b=
[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",e={state:function(){return c},always:function(){h.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,g){var d=p.isFunction(a[b])&&a[b];h[g[1]](function(){var a=d&&d.apply(this,arguments);if(a&&p.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);
else c[g[0]+"With"](this===e?c.promise():this,d?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?p.extend(a,e):e}},h={};e.pipe=e.then;p.each(b,function(a,g){var d=g[2],f=g[3];e[g[1]]=d.add;f&&d.add(function(){c=f},b[a^1][2].disable,b[2][2].lock);h[g[0]]=function(){h[g[0]+"With"](this===h?e:this,arguments);return this};h[g[0]+"With"]=d.fireWith});e.promise(h);a&&a.call(h,h);return h},when:function(a){var b=0,c=da.call(arguments),e=c.length,h=1!==e||a&&p.isFunction(a.promise)?
e:0,g=1===h?a:p.Deferred(),d=function(a,b,c){return function(e){b[a]=this;c[a]=1<arguments.length?da.call(arguments):e;c===f?g.notifyWith(b,c):--h||g.resolveWith(b,c)}},f,k,m;if(1<e)for(f=Array(e),k=Array(e),m=Array(e);b<e;b++)c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(d(b,m,c)).fail(g.reject).progress(d(b,k,f)):--h;h||g.resolveWith(m,c);return g.promise()}});var Wa;p.fn.ready=function(a){p.ready.promise().done(a);return this};p.extend({isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:
p.ready(!0)},ready:function(a){(!0===a?--p.readyWait:p.isReady)||(p.isReady=!0,!0!==a&&0<--p.readyWait||(Wa.resolveWith(J,[p]),p.fn.triggerHandler&&(p(J).triggerHandler("ready"),p(J).off("ready"))))}});p.ready.promise=function(a){Wa||(Wa=p.Deferred(),"complete"===J.readyState?setTimeout(p.ready):(J.addEventListener("DOMContentLoaded",n,!1),c.addEventListener("load",n,!1)));return Wa.promise(a)};p.ready.promise();var ea=p.access=function(a,b,c,e,h,g,d){var f=0,k=a.length,m=null==c;if("object"===p.type(c))for(f in h=
!0,c)p.access(a,b,f,c[f],!0,g,d);else if(void 0!==e&&(h=!0,p.isFunction(e)||(d=!0),m&&(d?(b.call(a,e),b=null):(m=b,b=function(a,b,c){return m.call(p(a),c)})),b))for(;f<k;f++)b(a[f],c,d?e:e.call(a[f],f,b(a[f],c)));return h?a:m?b.call(a):k?b(a[0],c):g};p.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};r.uid=1;r.accepts=p.acceptData;r.prototype={key:function(a){if(!r.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=r.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,
b)}catch(e){b[this.expando]=c,p.extend(a,b)}}this.cache[c]||(this.cache[c]={});return c},set:function(a,b,c){var e;a=this.key(a);var h=this.cache[a];if("string"===typeof b)h[b]=c;else if(p.isEmptyObject(h))p.extend(this.cache[a],b);else for(e in b)h[e]=b[e];return h},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){if(void 0===b||b&&"string"===typeof b&&void 0===c)return c=this.get(a,b),void 0!==c?c:this.get(a,p.camelCase(b));this.set(a,b,c);return void 0!==
c?c:b},remove:function(a,b){var c,e;c=this.key(a);var h=this.cache[c];if(void 0===b)this.cache[c]={};else for(p.isArray(b)?e=b.concat(b.map(p.camelCase)):(c=p.camelCase(b),b in h?e=[b,c]:(e=c,e=e in h?[e]:e.match(qa)||[])),c=e.length;c--;)delete h[e[c]]},hasData:function(a){return!p.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var M=new r,S=new r,Bb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Qa=/([A-Z])/g;p.extend({hasData:function(a){return S.hasData(a)||
M.hasData(a)},data:function(a,b,c){return S.access(a,b,c)},removeData:function(a,b){S.remove(a,b)},_data:function(a,b,c){return M.access(a,b,c)},_removeData:function(a,b){M.remove(a,b)}});p.fn.extend({data:function(a,b){var c,e,h,g=this[0],d=g&&g.attributes;if(void 0===a){if(this.length&&(h=S.get(g),1===g.nodeType&&!M.get(g,"hasDataAttrs"))){for(c=d.length;c--;)d[c]&&(e=d[c].name,0===e.indexOf("data-")&&(e=p.camelCase(e.slice(5)),k(g,e,h[e])));M.set(g,"hasDataAttrs",!0)}return h}return"object"===
typeof a?this.each(function(){S.set(this,a)}):ea(this,function(b){var c,e=p.camelCase(a);if(g&&void 0===b){c=S.get(g,a);if(void 0!==c)return c;c=S.get(g,e);if(void 0!==c)return c;c=k(g,e,void 0);if(void 0!==c)return c}else this.each(function(){var c=S.get(this,e);S.set(this,e,b);-1!==a.indexOf("-")&&void 0!==c&&S.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){S.remove(this,a)})}});p.extend({queue:function(a,b,c){var e;if(a)return b=(b||"fx")+
"queue",e=M.get(a,b),c&&(!e||p.isArray(c)?e=M.access(a,b,p.makeArray(c)):e.push(c)),e||[]},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),e=c.length,h=c.shift(),g=p._queueHooks(a,b),d=function(){p.dequeue(a,b)};"inprogress"===h&&(h=c.shift(),e--);h&&("fx"===b&&c.unshift("inprogress"),delete g.stop,h.call(a,d,g));!e&&g&&g.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return M.get(a,c)||M.access(a,c,{empty:p.Callbacks("once memory").add(function(){M.remove(a,[b+"queue",c])})})}});
p.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?p.queue(this[0],a):void 0===b?this:this.each(function(){var c=p.queue(this,a,b);p._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,e=1,h=p.Deferred(),g=this,d=this.length,f=function(){--e||h.resolveWith(g,[g])};"string"!==
typeof a&&(b=a,a=void 0);for(a=a||"fx";d--;)(c=M.get(g[d],a+"queueHooks"))&&c.empty&&(e++,c.empty.add(f));f();return h.promise(b)}});var na=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wa=["Top","Right","Bottom","Left"],Aa=function(a,b){a=b||a;return"none"===p.css(a,"display")||!p.contains(a.ownerDocument,a)},pb=/^(?:checkbox|radio)$/i;(function(){var a=J.createDocumentFragment().appendChild(J.createElement("div")),b=J.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked",
"checked");b.setAttribute("name","t");a.appendChild(b);W.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";W.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue})();W.focusinBubbles="onfocusin"in c;var Hb=/^key/,Ib=/^(?:mouse|pointer|contextmenu)|click/,qb=/^(?:focusinfocus|focusoutblur)$/,Q=/^([^.]*)(?:\.(.+)|)$/;p.event={global:{},add:function(a,b,c,e,h){var g,d,f,k,m,t,s,H,n;if(m=M.get(a))for(c.handler&&(g=c,c=g.handler,h=g.selector),c.guid||(c.guid=
p.guid++),(k=m.events)||(k=m.events={}),(d=m.handle)||(d=m.handle=function(b){return"undefined"!==typeof p&&p.event.triggered!==b.type?p.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(qa)||[""],m=b.length;m--;)f=Q.exec(b[m])||[],H=t=f[1],n=(f[2]||"").split(".").sort(),H&&(f=p.event.special[H]||{},H=(h?f.delegateType:f.bindType)||H,f=p.event.special[H]||{},t=p.extend({type:H,origType:t,data:e,handler:c,guid:c.guid,selector:h,needsContext:h&&p.expr.match.needsContext.test(h),namespace:n.join(".")},
g),(s=k[H])||(s=k[H]=[],s.delegateCount=0,f.setup&&!1!==f.setup.call(a,e,n,d)||a.addEventListener&&a.addEventListener(H,d,!1)),f.add&&(f.add.call(a,t),t.handler.guid||(t.handler.guid=c.guid)),h?s.splice(s.delegateCount++,0,t):s.push(t),p.event.global[H]=!0)},remove:function(a,b,c,e,h){var g,d,f,k,m,t,s,H,n,u,q,w=M.hasData(a)&&M.get(a);if(w&&(k=w.events)){b=(b||"").match(qa)||[""];for(m=b.length;m--;)if(f=Q.exec(b[m])||[],n=q=f[1],u=(f[2]||"").split(".").sort(),n){s=p.event.special[n]||{};n=(e?s.delegateType:
s.bindType)||n;H=k[n]||[];f=f[2]&&new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)");for(d=g=H.length;g--;)t=H[g],!h&&q!==t.origType||c&&c.guid!==t.guid||f&&!f.test(t.namespace)||e&&e!==t.selector&&("**"!==e||!t.selector)||(H.splice(g,1),t.selector&&H.delegateCount--,s.remove&&s.remove.call(a,t));d&&!H.length&&(s.teardown&&!1!==s.teardown.call(a,u,w.handle)||p.removeEvent(a,n,w.handle),delete k[n])}else for(n in k)p.event.remove(a,n+b[m],c,e,!0);p.isEmptyObject(k)&&(delete w.handle,M.remove(a,
"events"))}},trigger:function(a,b,e,h){var g,d,f,k,m,n,t=[e||J],s=Da.call(a,"type")?a.type:a;n=Da.call(a,"namespace")?a.namespace.split("."):[];d=g=e=e||J;if(3!==e.nodeType&&8!==e.nodeType&&!qb.test(s+p.event.triggered)&&(0<=s.indexOf(".")&&(n=s.split("."),s=n.shift(),n.sort()),k=0>s.indexOf(":")&&"on"+s,a=a[p.expando]?a:new p.Event(s,"object"===typeof a&&a),a.isTrigger=h?2:3,a.namespace=n.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+n.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,
a.target||(a.target=e),b=null==b?[a]:p.makeArray(b,[a]),n=p.event.special[s]||{},h||!n.trigger||!1!==n.trigger.apply(e,b))){if(!h&&!n.noBubble&&!p.isWindow(e)){f=n.delegateType||s;qb.test(f+s)||(d=d.parentNode);for(;d;d=d.parentNode)t.push(d),g=d;g===(e.ownerDocument||J)&&t.push(g.defaultView||g.parentWindow||c)}for(g=0;(d=t[g++])&&!a.isPropagationStopped();)a.type=1<g?f:n.bindType||s,(m=(M.get(d,"events")||{})[a.type]&&M.get(d,"handle"))&&m.apply(d,b),(m=k&&d[k])&&m.apply&&p.acceptData(d)&&(a.result=
m.apply(d,b),!1===a.result&&a.preventDefault());a.type=s;h||a.isDefaultPrevented()||n._default&&!1!==n._default.apply(t.pop(),b)||!p.acceptData(e)||!k||!p.isFunction(e[s])||p.isWindow(e)||((g=e[k])&&(e[k]=null),p.event.triggered=s,e[s](),p.event.triggered=void 0,g&&(e[k]=g));return a.result}},dispatch:function(a){a=p.event.fix(a);var b,c,e,h,g=[],d=da.call(arguments);b=(M.get(this,"events")||{})[a.type]||[];var f=p.event.special[a.type]||{};d[0]=a;a.delegateTarget=this;if(!f.preDispatch||!1!==f.preDispatch.call(this,
a)){g=p.event.handlers.call(this,a,b);for(b=0;(h=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=h.elem,c=0;(e=h.handlers[c++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(e.namespace))a.handleObj=e,a.data=e.data,e=((p.event.special[e.origType]||{}).handle||e.handler).apply(h.elem,d),void 0!==e&&!1===(a.result=e)&&(a.preventDefault(),a.stopPropagation());f.postDispatch&&f.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var c,e,h,g,d=[],f=
b.delegateCount,k=a.target;if(f&&k.nodeType&&(!a.button||"click"!==a.type))for(;k!==this;k=k.parentNode||this)if(!0!==k.disabled||"click"!==a.type){e=[];for(c=0;c<f;c++)g=b[c],h=g.selector+" ",void 0===e[h]&&(e[h]=g.needsContext?0<=p(h,this).index(k):p.find(h,this,null,[k]).length),e[h]&&e.push(g);e.length&&d.push({elem:k,handlers:e})}f<b.length&&d.push({elem:this,handlers:b.slice(f)});return d},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,h=b.button;null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||J,e=c.documentElement,c=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=
b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0));a.which||void 0===h||(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[p.expando])return a;var b,c,e;b=a.type;var h=a,g=this.fixHooks[b];g||(this.fixHooks[b]=g=Ib.test(b)?this.mouseHooks:Hb.test(b)?this.keyHooks:{});e=g.props?this.props.concat(g.props):this.props;a=new p.Event(h);for(b=e.length;b--;)c=e[b],a[c]=h[c];a.target||(a.target=J);3===a.target.nodeType&&(a.target=a.target.parentNode);return g.filter?
g.filter(a,h):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==a()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===a()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&p.nodeName(this,"input"))return this.click(),!1},_default:function(a){return p.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=
a.result)}}},simulate:function(a,b,c,e){a=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});e?p.event.trigger(a,null,b):p.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};p.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)};p.Event=function(a,c){if(!(this instanceof p.Event))return new p.Event(a,c);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?
b:g):this.type=a;c&&p.extend(this,c);this.timeStamp=a&&a.timeStamp||p.now();this[p.expando]=!0};p.Event.prototype={isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=b;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=b;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=
b;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,e=a.relatedTarget,h=a.handleObj;if(!e||e!==this&&!p.contains(this,e))a.type=h.origType,c=h.handler.apply(this,arguments),a.type=b;return c}}});W.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=
function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){var e=this.ownerDocument||this,h=M.access(e,b);h||e.addEventListener(a,c,!0);M.access(e,b,(h||0)+1)},teardown:function(){var e=this.ownerDocument||this,h=M.access(e,b)-1;h?M.access(e,b,h):(e.removeEventListener(a,c,!0),M.remove(e,b))}}});p.fn.extend({on:function(a,b,c,e,h){var d,f;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],h);return this}null==c&&null==
e?(e=b,c=b=void 0):null==e&&("string"===typeof b?(e=c,c=void 0):(e=c,c=b,b=void 0));if(!1===e)e=g;else if(!e)return this;1===h&&(d=e,e=function(a){p().off(a);return d.apply(this,arguments)},e.guid=d.guid||(d.guid=p.guid++));return this.each(function(){p.event.add(this,a,e,c,b)})},one:function(a,b,c,e){return this.on(a,b,c,e,1)},off:function(a,b,c){var e;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),
this;if("object"===typeof a){for(e in a)this.off(e,b,a[e]);return this}if(!1===b||"function"===typeof b)c=b,b=void 0;!1===c&&(c=g);return this.each(function(){p.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return p.event.trigger(a,b,c,!0)}});var rb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ja=/<([\w:]+)/,Jb=/<|&#?\w+;/,Kb=/<(?:script|style|link)/i,sb=/checked\s*(?:[^=]|=\s*.checked.)/i,
fb=/^$|\/(?:java|ecma)script/i,bb=/^true\/(.*)/,Lb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ba={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ba.optgroup=ba.option;ba.tbody=ba.tfoot=ba.colgroup=ba.caption=ba.thead;ba.th=ba.td;p.extend({clone:function(a,b,c){var e,h,g,d,f=a.cloneNode(!0),k=p.contains(a.ownerDocument,
a);if(!(W.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||p.isXMLDoc(a)))for(d=v(f),g=v(a),e=0,h=g.length;e<h;e++){var m=g[e],t=d[e],s=t.nodeName.toLowerCase();if("input"===s&&pb.test(m.type))t.checked=m.checked;else if("input"===s||"textarea"===s)t.defaultValue=m.defaultValue}if(b)if(c)for(g=g||v(a),d=d||v(f),e=0,h=g.length;e<h;e++)y(g[e],d[e]);else y(a,f);d=v(f,"script");0<d.length&&w(d,!k&&v(a,"script"));return f},buildFragment:function(a,b,c,e){for(var h,g,d,f=b.createDocumentFragment(),k=[],
m=0,t=a.length;m<t;m++)if((h=a[m])||0===h)if("object"===p.type(h))p.merge(k,h.nodeType?[h]:h);else if(Jb.test(h)){g=g||f.appendChild(b.createElement("div"));d=(Ja.exec(h)||["",""])[1].toLowerCase();d=ba[d]||ba._default;g.innerHTML=d[1]+h.replace(rb,"<$1></$2>")+d[2];for(d=d[0];d--;)g=g.lastChild;p.merge(k,g.childNodes);g=f.firstChild;g.textContent=""}else k.push(b.createTextNode(h));f.textContent="";for(m=0;h=k[m++];)if(!e||-1===p.inArray(h,e))if(a=p.contains(h.ownerDocument,h),g=v(f.appendChild(h),
"script"),a&&w(g),c)for(d=0;h=g[d++];)fb.test(h.type||"")&&c.push(h);return f},cleanData:function(a){for(var b,c,e,h,g=p.event.special,d=0;void 0!==(c=a[d]);d++){if(p.acceptData(c)&&(h=c[M.expando])&&(b=M.cache[h])){if(b.events)for(e in b.events)g[e]?p.event.remove(c,e):p.removeEvent(c,e,b.handle);M.cache[h]&&delete M.cache[h]}delete S.cache[c[S.expando]]}}});p.fn.extend({text:function(a){return ea(this,function(a){return void 0===a?p.text(this):this.empty().each(function(){if(1===this.nodeType||
11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||e(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=e(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,
this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,e=a?p.filter(a,this):this,h=0;null!=(c=e[h]);h++)b||1!==c.nodeType||p.cleanData(v(c)),c.parentNode&&(b&&p.contains(c.ownerDocument,c)&&w(v(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(p.cleanData(v(a,!1)),a.textContent="");return this},clone:function(a,
b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return p.clone(this,a,b)})},html:function(a){return ea(this,function(a){var b=this[0]||{},c=0,e=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"===typeof a&&!Kb.test(a)&&!ba[(Ja.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(rb,"<$1></$2>");try{for(;c<e;c++)b=this[c]||{},1===b.nodeType&&(p.cleanData(v(b,!1)),b.innerHTML=a);b=0}catch(h){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=
arguments[0];this.domManip(arguments,function(b){a=this.parentNode;p.cleanData(v(this));a&&a.replaceChild(b,this)});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=Ha.apply([],a);var c,e,g,d,f=0,k=this.length,m=this,n=k-1,t=a[0],s=p.isFunction(t);if(s||1<k&&"string"===typeof t&&!W.checkClone&&sb.test(t))return this.each(function(c){var e=m.eq(c);s&&(a[0]=t.call(this,c,e.html()));e.domManip(a,b)});if(k&&(c=p.buildFragment(a,
this[0].ownerDocument,!1,this),e=c.firstChild,1===c.childNodes.length&&(c=e),e)){e=p.map(v(c,"script"),h);for(g=e.length;f<k;f++)d=c,f!==n&&(d=p.clone(d,!0,!0),g&&p.merge(e,v(d,"script"))),b.call(this[f],d,f);if(g)for(c=e[e.length-1].ownerDocument,p.map(e,u),f=0;f<g;f++)d=e[f],fb.test(d.type||"")&&!M.access(d,"globalEval")&&p.contains(c,d)&&(d.src?p._evalUrl&&p._evalUrl(d.src):p.globalEval(d.textContent.replace(Lb,"")))}return this}});p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",
insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(a){for(var c=[],e=p(a),h=e.length-1,g=0;g<=h;g++)a=g===h?this:this.clone(!0),p(e[g])[b](a),Ca.apply(c,a.get());return this.pushStack(c)}});var Sa,Ra={},Ga=/^margin/,ma=new RegExp("^("+na+")(?!px)[a-z%]+$","i"),Ta=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};(function(){function a(){d.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";
d.innerHTML="";h.appendChild(g);var f=c.getComputedStyle(d,null);b="1%"!==f.top;e="4px"===f.width;h.removeChild(g)}var b,e,h=J.documentElement,g=J.createElement("div"),d=J.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",W.clearCloneStyle="content-box"===d.style.backgroundClip,g.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",g.appendChild(d),c.getComputedStyle&&p.extend(W,{pixelPosition:function(){a();
return b},boxSizingReliable:function(){null==e&&a();return e},reliableMarginRight:function(){var a;a=d.appendChild(J.createElement("div"));a.style.cssText=d.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";a.style.marginRight=a.style.width="0";d.style.width="1px";h.appendChild(g);a=!parseFloat(c.getComputedStyle(a,null).marginRight);h.removeChild(g);return a}}))})();p.swap=function(a,b,c,e){var h,g={};for(h in b)g[h]=
a.style[h],a.style[h]=b[h];c=c.apply(a,e||[]);for(h in b)a.style[h]=g[h];return c};var tb=/^(none|table(?!-c[ea]).+)/,ja=new RegExp("^("+na+")(.*)$","i"),T=new RegExp("^([+-])=("+na+")","i"),ub={position:"absolute",visibility:"hidden",display:"block"},gb={letterSpacing:"0",fontWeight:"400"},ia=["Webkit","O","Moz","ms"];p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=B(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,
opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var h,g,d,f=p.camelCase(b),k=a.style;b=p.cssProps[f]||(p.cssProps[f]=D(k,f));d=p.cssHooks[b]||p.cssHooks[f];if(void 0!==c)g=typeof c,"string"===g&&(h=T.exec(c))&&(c=(h[1]+1)*h[2]+parseFloat(p.css(a,b)),g="number"),null!=c&&c===c&&("number"!==g||p.cssNumber[f]||(c+="px"),W.clearCloneStyle||""!==c||0!==b.indexOf("background")||(k[b]="inherit"),
d&&"set"in d&&void 0===(c=d.set(a,c,e))||(k[b]=c));else return d&&"get"in d&&void 0!==(h=d.get(a,!1,e))?h:k[b]}},css:function(a,b,c,e){var h,g;g=p.camelCase(b);b=p.cssProps[g]||(p.cssProps[g]=D(a.style,g));(g=p.cssHooks[b]||p.cssHooks[g])&&"get"in g&&(h=g.get(a,!0,c));void 0===h&&(h=B(a,b,e));"normal"===h&&b in gb&&(h=gb[b]);return""===c||c?(a=parseFloat(h),!0===c||p.isNumeric(a)?a||0:h):h}});p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,e){if(c)return tb.test(p.css(a,"display"))&&
0===a.offsetWidth?p.swap(a,ub,function(){return K(a,b,e)}):K(a,b,e)},set:function(a,c,e){var h=e&&Ta(a);return G(a,c,e?V(a,b,e,"border-box"===p.css(a,"boxSizing",!1,h),h):0)}}});p.cssHooks.marginRight=I(W.reliableMarginRight,function(a,b){if(b)return p.swap(a,{display:"inline-block"},B,[a,"marginRight"])});p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var e=0,h={};for(c="string"===typeof c?c.split(" "):[c];4>e;e++)h[a+wa[e]+b]=c[e]||c[e-2]||c[0];return h}};
Ga.test(a)||(p.cssHooks[a+b].set=G)});p.fn.extend({css:function(a,b){return ea(this,function(a,b,c){var e,h={},g=0;if(p.isArray(b)){c=Ta(a);for(e=b.length;g<e;g++)h[b[g]]=p.css(a,b[g],!1,c);return h}return void 0!==c?p.style(a,b,c):p.css(a,b)},a,b,1<arguments.length)},show:function(){return P(this,!0)},hide:function(){return P(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){Aa(this)?p(this).show():p(this).hide()})}});p.Tween=N;N.prototype={constructor:N,
init:function(a,b,c,e,h,g){this.elem=a;this.prop=c;this.easing=h||"swing";this.options=b;this.start=this.now=this.cur();this.end=e;this.unit=g||(p.cssNumber[c]?"":"px")},cur:function(){var a=N.propHooks[this.prop];return a&&a.get?a.get(this):N.propHooks._default.get(this)},run:function(a){var b,c=N.propHooks[this.prop];this.pos=this.options.duration?b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,
this.now,this);c&&c.set?c.set(this):N.propHooks._default.set(this);return this}};N.prototype.init.prototype=N.prototype;N.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=p.css(a.elem,a.prop,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(p.fx.step[a.prop])p.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[p.cssProps[a.prop]]||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};N.propHooks.scrollTop=
N.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};p.fx=N.prototype.init;p.fx.step={};var Ba,Xa,Mb=/^(?:toggle|show|hide)$/,A=new RegExp("^(?:([+-])=|)("+na+")([a-z%]*)$","i"),aa=/queueHooks$/,O=[function(a,b,c){var e,h,g,d,f,k,m=this,t={},s=a.style,H=a.nodeType&&Aa(a),n=M.get(a,"fxshow");c.queue||(d=p._queueHooks(a,"fx"),null==d.unqueued&&(d.unqueued=0,f=d.empty.fire,
d.empty.fire=function(){d.unqueued||f()}),d.unqueued++,m.always(function(){m.always(function(){d.unqueued--;p.queue(a,"fx").length||d.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[s.overflow,s.overflowX,s.overflowY],k=p.css(a,"display"),h="none"===k?M.get(a,"olddisplay")||z(a.nodeName):k,"inline"===h&&"none"===p.css(a,"float")&&(s.display="inline-block"));c.overflow&&(s.overflow="hidden",m.always(function(){s.overflow=c.overflow[0];s.overflowX=c.overflow[1];s.overflowY=
c.overflow[2]}));for(e in b)if(h=b[e],Mb.exec(h)){delete b[e];g=g||"toggle"===h;if(h===(H?"hide":"show"))if("show"===h&&n&&void 0!==n[e])H=!0;else continue;t[e]=n&&n[e]||p.style(a,e)}else k=void 0;if(p.isEmptyObject(t))"inline"===("none"===k?z(a.nodeName):k)&&(s.display=k);else for(e in n?"hidden"in n&&(H=n.hidden):n=M.access(a,"fxshow",{}),g&&(n.hidden=!H),H?p(a).show():m.done(function(){p(a).hide()}),m.done(function(){var b;M.remove(a,"fxshow");for(b in t)p.style(a,b,t[b])}),t)b=ca(H?n[e]:0,e,m),
e in n||(n[e]=b.start,H&&(b.end=b.start,b.start="width"===e||"height"===e?1:0))}],E={"*":[function(a,b){var c=this.createTween(a,b),e=c.cur(),h=A.exec(b),g=h&&h[3]||(p.cssNumber[a]?"":"px"),d=(p.cssNumber[a]||"px"!==g&&+e)&&A.exec(p.css(c.elem,a)),f=1,k=20;if(d&&d[3]!==g){g=g||d[3];h=h||[];d=+e||1;do f=f||".5",d/=f,p.style(c.elem,a,d+g);while(f!==(f=c.cur()/e)&&1!==f&&--k)}h&&(d=c.start=+d||+e||0,c.unit=g,c.end=h[1]?d+(h[1]+1)*h[2]:+h[2]);return c}]};p.Animation=p.extend(ka,{tweener:function(a,b){p.isFunction(a)?
(b=a,a=["*"]):a=a.split(" ");for(var c,e=0,h=a.length;e<h;e++)c=a[e],E[c]=E[c]||[],E[c].unshift(b)},prefilter:function(a,b){b?O.unshift(a):O.push(a)}});p.speed=function(a,b,c){var e=a&&"object"===typeof a?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};e.duration=p.fx.off?0:"number"===typeof e.duration?e.duration:e.duration in p.fx.speeds?p.fx.speeds[e.duration]:p.fx.speeds._default;if(null==e.queue||!0===e.queue)e.queue="fx";e.old=e.complete;
e.complete=function(){p.isFunction(e.old)&&e.old.call(this);e.queue&&p.dequeue(this,e.queue)};return e};p.fn.extend({fadeTo:function(a,b,c,e){return this.filter(Aa).css("opacity",0).show().end().animate({opacity:b},a,c,e)},animate:function(a,b,c,e){var h=p.isEmptyObject(a),g=p.speed(b,c,e);b=function(){var b=ka(this,p.extend({},a),g);(h||M.get(this,"finish"))&&b.stop(!0)};b.finish=b;return h||!1===g.queue?this.each(b):this.queue(g.queue,b)},stop:function(a,b,c){var e=function(a){var b=a.stop;delete a.stop;
b(c)};"string"!==typeof a&&(c=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,h=null!=a&&a+"queueHooks",g=p.timers,d=M.get(this);if(h)d[h]&&d[h].stop&&e(d[h]);else for(h in d)d[h]&&d[h].stop&&aa.test(h)&&e(d[h]);for(h=g.length;h--;)g[h].elem!==this||null!=a&&g[h].queue!==a||(g[h].anim.stop(c),b=!1,g.splice(h,1));!b&&c||p.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,c=M.get(this),e=c[a+"queue"];b=c[a+"queueHooks"];
var h=p.timers,g=e?e.length:0;c.finish=!0;p.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=h.length;b--;)h[b].elem===this&&h[b].queue===a&&(h[b].anim.stop(!0),h.splice(b,1));for(b=0;b<g;b++)e[b]&&e[b].finish&&e[b].finish.call(this);delete c.finish})}});p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(a,e,h){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(X(b,!0),a,e,h)}});p.each({slideDown:X("show"),slideUp:X("hide"),slideToggle:X("toggle"),
fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,e){return this.animate(b,a,c,e)}});p.timers=[];p.fx.tick=function(){var a,b=0,c=p.timers;for(Ba=p.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||p.fx.stop();Ba=void 0};p.fx.timer=function(a){p.timers.push(a);a()?p.fx.start():p.timers.pop()};p.fx.interval=13;p.fx.start=function(){Xa||(Xa=setInterval(p.fx.tick,p.fx.interval))};p.fx.stop=function(){clearInterval(Xa);
Xa=null};p.fx.speeds={slow:600,fast:200,_default:400};p.fn.delay=function(a,b){a=p.fx?p.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var e=setTimeout(b,a);c.stop=function(){clearTimeout(e)}})};(function(){var a=J.createElement("input"),b=J.createElement("select"),c=b.appendChild(J.createElement("option"));a.type="checkbox";W.checkOn=""!==a.value;W.optSelected=c.selected;b.disabled=!0;W.optDisabled=!c.disabled;a=J.createElement("input");a.value="t";a.type="radio";W.radioValue="t"===a.value})();
var R,Ka=p.expr.attrHandle;p.fn.extend({attr:function(a,b){return ea(this,p.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})}});p.extend({attr:function(a,b,c){var e,h,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if("undefined"===typeof a.getAttribute)return p.prop(a,b,c);1===g&&p.isXMLDoc(a)||(b=b.toLowerCase(),e=p.attrHooks[b]||(p.expr.match.bool.test(b)?R:void 0));if(void 0!==c)if(null===c)p.removeAttr(a,b);else{if(e&&"set"in e&&void 0!==(h=e.set(a,
c,b)))return h;a.setAttribute(b,c+"");return c}else{if(e&&"get"in e&&null!==(h=e.get(a,b)))return h;h=p.find.attr(a,b);return null==h?void 0:h}}},removeAttr:function(a,b){var c,e,h=0,g=b&&b.match(qa);if(g&&1===a.nodeType)for(;c=g[h++];)e=p.propFix[c]||c,p.expr.match.bool.test(c)&&(a[e]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!W.radioValue&&"radio"===b&&p.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}}});R={set:function(a,b,c){!1===b?
p.removeAttr(a,c):a.setAttribute(c,c);return c}};p.each(p.expr.match.bool.source.match(/\w+/g),function(a,b){var c=Ka[b]||p.find.attr;Ka[b]=function(a,b,e){var h,g;e||(g=Ka[b],Ka[b]=h,h=null!=c(a,b,e)?b.toLowerCase():null,Ka[b]=g);return h}});var Nb=/^(?:input|select|textarea|button)$/i;p.fn.extend({prop:function(a,b){return ea(this,p.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[p.propFix[a]||a]})}});p.extend({propFix:{"for":"htmlFor","class":"className"},
prop:function(a,b,c){var e,h,g;g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(g=1!==g||!p.isXMLDoc(a))b=p.propFix[b]||b,h=p.propHooks[b];return void 0!==c?h&&"set"in h&&void 0!==(e=h.set(a,c,b))?e:a[b]=c:h&&"get"in h&&null!==(e=h.get(a,b))?e:a[b]}},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||Nb.test(a.nodeName)||a.href?a.tabIndex:-1}}}});W.optSelected||(p.propHooks.selected={get:function(a){(a=a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null}});p.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){p.propFix[this.toLowerCase()]=this});var Oa=/[\t\r\n\f]/g;p.fn.extend({addClass:function(a){var b,c,e,h,g;b="string"===typeof a&&a;var d=0,f=this.length;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(qa)||[];d<f;d++)if(c=this[d],e=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Oa," "):" ")){for(g=0;h=b[g++];)0>e.indexOf(" "+h+" ")&&(e+=h+" ");e=p.trim(e);c.className!==e&&(c.className=e)}return this},
removeClass:function(a){var b,c,e,h,g;b=0===arguments.length||"string"===typeof a&&a;var d=0,f=this.length;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(qa)||[];d<f;d++)if(c=this[d],e=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Oa," "):"")){for(g=0;h=b[g++];)for(;0<=e.indexOf(" "+h+" ");)e=e.replace(" "+h+" "," ");e=a?p.trim(e):"";c.className!==e&&(c.className=e)}return this},toggleClass:function(a,b){var c=
typeof a;return"boolean"===typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,e=0,h=p(this),g=a.match(qa)||[];b=g[e++];)h.hasClass(b)?h.removeClass(b):h.addClass(b);else if("undefined"===c||"boolean"===c)this.className&&M.set(this,"__className__",this.className),this.className=this.className||!1===a?"":M.get(this,"__className__")||""})},hasClass:function(a){a=
" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Oa," ").indexOf(a))return!0;return!1}});var Sb=/\r/g;p.fn.extend({val:function(a){var b,c,e,h=this[0];if(arguments.length)return e=p.isFunction(a),this.each(function(c){1===this.nodeType&&(c=e?a.call(this,c,p(this).val()):a,null==c?c="":"number"===typeof c?c+="":p.isArray(c)&&(c=p.map(c,function(a){return null==a?"":a+""})),b=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],b&&
"set"in b&&void 0!==b.set(this,c,"value")||(this.value=c))});if(h){if((b=p.valHooks[h.type]||p.valHooks[h.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(h,"value")))return c;c=h.value;return"string"===typeof c?c.replace(Sb,""):null==c?"":c}}});p.extend({valHooks:{option:{get:function(a){var b=p.find.attr(a,"value");return null!=b?b:p.trim(p.text(a))}},select:{get:function(a){for(var b,c=a.options,e=a.selectedIndex,h=(a="select-one"===a.type||0>e)?null:[],g=a?e+1:c.length,d=0>e?g:a?e:0;d<g;d++)if(b=
c[d],!(!b.selected&&d!==e||(W.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&p.nodeName(b.parentNode,"optgroup"))){b=p(b).val();if(a)return b;h.push(b)}return h},set:function(a,b){for(var c,e,h=a.options,g=p.makeArray(b),d=h.length;d--;)if(e=h[d],e.selected=0<=p.inArray(e.value,g))c=!0;c||(a.selectedIndex=-1);return g}}}});p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(a,b){if(p.isArray(b))return a.checked=0<=p.inArray(p(a).val(),b)}};W.checkOn||
(p.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});p.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,
b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,e){return this.on(b,a,c,e)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vb=p.now(),wb=/\?/;p.parseJSON=function(a){return JSON.parse(a+"")};p.parseXML=function(a){var b,c;if(!a||"string"!==typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(e){b=void 0}b&&!b.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+
a);return b};var ya,ga,Ob=/#.*$/,xb=/([?&])_=[^&]*/,yb=/^(.*?):[ \t]*([^\r\n]*)$/mg,Pb=/^(?:GET|HEAD)$/,la=/^\/\//,Pa=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,La={},cb={},hb="*/".concat("*");try{ga=location.href}catch(fa){ga=J.createElement("a"),ga.href="",ga=ga.href}ya=Pa.exec(ga.toLowerCase())||[];p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ga,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ya[1]),global:!0,processData:!0,async:!0,
contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":hb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?ha(ha(a,p.ajaxSettings),b):ha(p.ajaxSettings,
a)},ajaxPrefilter:oa(La),ajaxTransport:oa(cb),ajax:function(a,b){function c(a,b,t,d){var k,l,y,v;v=b;if(2!==r){r=2;f&&clearTimeout(f);e=void 0;g=d||"";x.readyState=0<a?4:0;d=200<=a&&300>a||304===a;if(t){y=s;for(var Ea=x,ua,va,F,D,Na=y.contents,z=y.dataTypes;"*"===z[0];)z.shift(),void 0===ua&&(ua=y.mimeType||Ea.getResponseHeader("Content-Type"));if(ua)for(va in Na)if(Na[va]&&Na[va].test(ua)){z.unshift(va);break}if(z[0]in t)F=z[0];else{for(va in t){if(!z[0]||y.converters[va+" "+z[0]]){F=va;break}D||
(D=va)}F=F||D}F?(F!==z[0]&&z.unshift(F),y=t[F]):y=void 0}a:{t=s;ua=y;va=x;F=d;var G,K,B,Ea={},Na=t.dataTypes.slice();if(Na[1])for(K in t.converters)Ea[K.toLowerCase()]=t.converters[K];for(D=Na.shift();D;)if(t.responseFields[D]&&(va[t.responseFields[D]]=ua),!B&&F&&t.dataFilter&&(ua=t.dataFilter(ua,t.dataType)),B=D,D=Na.shift())if("*"===D)D=B;else if("*"!==B&&B!==D){K=Ea[B+" "+D]||Ea["* "+D];if(!K)for(G in Ea)if(y=G.split(" "),y[1]===D&&(K=Ea[B+" "+y[0]]||Ea["* "+y[0]])){!0===K?K=Ea[G]:!0!==Ea[G]&&
(D=y[0],Na.unshift(y[1]));break}if(!0!==K)if(K&&t["throws"])ua=K(ua);else try{ua=K(ua)}catch(V){y={state:"parsererror",error:K?V:"No conversion from "+B+" to "+D};break a}}y={state:"success",data:ua}}if(d)s.ifModified&&((v=x.getResponseHeader("Last-Modified"))&&(p.lastModified[h]=v),(v=x.getResponseHeader("etag"))&&(p.etag[h]=v)),204===a||"HEAD"===s.type?v="nocontent":304===a?v="notmodified":(v=y.state,k=y.data,l=y.error,d=!l);else if(l=v,a||!v)v="error",0>a&&(a=0);x.status=a;x.statusText=(b||v)+
"";d?u.resolveWith(H,[k,v,x]):u.rejectWith(H,[x,v,l]);x.statusCode(w);w=void 0;m&&n.trigger(d?"ajaxSuccess":"ajaxError",[x,s,d?k:l]);q.fireWith(H,[x,v]);m&&(n.trigger("ajaxComplete",[x,s]),--p.active||p.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);b=b||{};var e,h,g,d,f,k,m,t,s=p.ajaxSetup({},b),H=s.context||s,n=s.context&&(H.nodeType||H.jquery)?p(H):p.event,u=p.Deferred(),q=p.Callbacks("once memory"),w=s.statusCode||{},l={},y={},r=0,v="canceled",x={readyState:0,getResponseHeader:function(a){var b;
if(2===r){if(!d)for(d={};b=yb.exec(g);)d[b[1].toLowerCase()]=b[2];b=d[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===r?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();r||(a=y[c]=y[c]||a,l[a]=b);return this},overrideMimeType:function(a){r||(s.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>r)for(b in a)w[b]=[w[b],a[b]];else x.always(a[x.status]);return this},abort:function(a){a=a||v;e&&e.abort(a);c(0,a);return this}};u.promise(x).complete=
q.add;x.success=x.done;x.error=x.fail;s.url=((a||s.url||ga)+"").replace(Ob,"").replace(la,ya[1]+"//");s.type=b.method||b.type||s.method||s.type;s.dataTypes=p.trim(s.dataType||"*").toLowerCase().match(qa)||[""];null==s.crossDomain&&(k=Pa.exec(s.url.toLowerCase()),s.crossDomain=!(!k||k[1]===ya[1]&&k[2]===ya[2]&&(k[3]||("http:"===k[1]?"80":"443"))===(ya[3]||("http:"===ya[1]?"80":"443"))));s.data&&s.processData&&"string"!==typeof s.data&&(s.data=p.param(s.data,s.traditional));za(La,s,b,x);if(2===r)return x;
(m=s.global)&&0===p.active++&&p.event.trigger("ajaxStart");s.type=s.type.toUpperCase();s.hasContent=!Pb.test(s.type);h=s.url;s.hasContent||(s.data&&(h=s.url+=(wb.test(h)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=xb.test(h)?h.replace(xb,"$1_="+vb++):h+(wb.test(h)?"&":"?")+"_="+vb++));s.ifModified&&(p.lastModified[h]&&x.setRequestHeader("If-Modified-Since",p.lastModified[h]),p.etag[h]&&x.setRequestHeader("If-None-Match",p.etag[h]));(s.data&&s.hasContent&&!1!==s.contentType||b.contentType)&&
x.setRequestHeader("Content-Type",s.contentType);x.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+hb+"; q=0.01":""):s.accepts["*"]);for(t in s.headers)x.setRequestHeader(t,s.headers[t]);if(s.beforeSend&&(!1===s.beforeSend.call(H,x,s)||2===r))return x.abort();v="abort";for(t in{success:1,error:1,complete:1})x[t](s[t]);if(e=za(cb,s,b,x)){x.readyState=1;m&&n.trigger("ajaxSend",[x,s]);s.async&&0<s.timeout&&(f=setTimeout(function(){x.abort("timeout")},
s.timeout));try{r=1,e.send(l,c)}catch(va){if(2>r)c(-1,va);else throw va;}}else c(-1,"No Transport");return x},getJSON:function(a,b,c){return p.get(a,b,c,"json")},getScript:function(a,b){return p.get(a,void 0,b,"script")}});p.each(["get","post"],function(a,b){p[b]=function(a,c,e,h){p.isFunction(c)&&(h=h||e,e=c,c=void 0);return p.ajax({url:a,type:b,dataType:h,data:c,success:e})}});p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,
a)}});p._evalUrl=function(a){return p.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};p.fn.extend({wrapAll:function(a){var b;if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});this[0]&&(b=p(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this));return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,
b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}});p.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight};p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)};var Ya=/%20/g,Ma=/\[\]$/,Za=
/\r?\n/g,Tb=/^(?:submit|button|image|reset|file)$/i,Ub=/^(?:input|select|textarea|keygen)/i;p.param=function(a,b){var c,e=[],h=function(a,b){b=p.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){h(this.name,this.value)});else for(c in a)ra(c,a[c],b,h);return e.join("&").replace(Ya,"+")};p.fn.extend({serialize:function(){return p.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){var a=p.prop(this,"elements");return a?p.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!p(this).is(":disabled")&&Ub.test(this.nodeName)&&!Tb.test(a)&&(this.checked||!pb.test(a))}).map(function(a,b){var c=p(this).val();return null==c?null:p.isArray(c)?p.map(c,function(a){return{name:b.name,value:a.replace(Za,"\r\n")}}):{name:b.name,value:c.replace(Za,"\r\n")}}).get()}});p.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};
var Qb=0,Z={},Vb={0:200,1223:204},$a=p.ajaxSettings.xhr();if(c.ActiveXObject)p(c).on("unload",function(){for(var a in Z)Z[a]()});W.cors=!!$a&&"withCredentials"in $a;W.ajax=$a=!!$a;p.ajaxTransport(function(a){var b;if(W.cors||$a&&!a.crossDomain)return{send:function(c,e){var h,g=a.xhr(),d=++Qb;g.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(h in a.xhrFields)g[h]=a.xhrFields[h];a.mimeType&&g.overrideMimeType&&g.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||
(c["X-Requested-With"]="XMLHttpRequest");for(h in c)g.setRequestHeader(h,c[h]);b=function(a){return function(){b&&(delete Z[d],b=g.onload=g.onerror=null,"abort"===a?g.abort():"error"===a?e(g.status,g.statusText):e(Vb[g.status]||g.status,g.statusText,"string"===typeof g.responseText?{text:g.responseText}:void 0,g.getAllResponseHeaders()))}};g.onload=b();g.onerror=b("error");b=Z[d]=b("abort");try{g.send(a.hasContent&&a.data||null)}catch(f){if(b)throw f;}},abort:function(){b&&b()}}});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){p.globalEval(a);return a}}});p.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});p.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,h){b=p("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&h("error"===a.type?404:200,a.type)});J.head.appendChild(b[0])},abort:function(){c&&c()}}}});
var zb=[],ab=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=zb.pop()||p.expando+"_"+vb++;this[a]=!0;return a}});p.ajaxPrefilter("json jsonp",function(a,b,e){var h,g,d,f=!1!==a.jsonp&&(ab.test(a.url)?"url":"string"===typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&ab.test(a.data)&&"data");if(f||"jsonp"===a.dataTypes[0])return h=a.jsonpCallback=p.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,f?a[f]=a[f].replace(ab,"$1"+
h):!1!==a.jsonp&&(a.url+=(wb.test(a.url)?"&":"?")+a.jsonp+"="+h),a.converters["script json"]=function(){d||p.error(h+" was not called");return d[0]},a.dataTypes[0]="json",g=c[h],c[h]=function(){d=arguments},e.always(function(){c[h]=g;a[h]&&(a.jsonpCallback=b.jsonpCallback,zb.push(h));d&&p.isFunction(g)&&g(d[0]);d=g=void 0}),"script"});p.parseHTML=function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||J;var e=ob.exec(a);c=!c&&[];if(e)return[b.createElement(e[1])];
e=p.buildFragment([a],b,c);c&&c.length&&p(c).remove();return p.merge([],e.childNodes)};var ib=p.fn.load;p.fn.load=function(a,b,c){if("string"!==typeof a&&ib)return ib.apply(this,arguments);var e,h,g,d=this,f=a.indexOf(" ");0<=f&&(e=p.trim(a.slice(f)),a=a.slice(0,f));p.isFunction(b)?(c=b,b=void 0):b&&"object"===typeof b&&(h="POST");0<d.length&&p.ajax({url:a,type:h,dataType:"html",data:b}).done(function(a){g=arguments;d.html(e?p("<div>").append(p.parseHTML(a)).find(e):a)}).complete(c&&function(a,b){d.each(c,
g||[a.responseText,b,a])});return this};p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length};var jb=c.document.documentElement;p.offset={setOffset:function(a,b,c){var e,h,g,d=p.css(a,"position"),f=p(a),k={};"static"===d&&(a.style.position="relative");g=f.offset();h=p.css(a,"top");e=p.css(a,"left");("absolute"===d||"fixed"===d)&&-1<(h+e).indexOf("auto")?(e=f.position(),h=e.top,e=e.left):(h=parseFloat(h)||0,e=parseFloat(e)||0);p.isFunction(b)&&(b=b.call(a,
c,g));null!=b.top&&(k.top=b.top-g.top+h);null!=b.left&&(k.left=b.left-g.left+e);"using"in b?b.using.call(a,k):f.css(k)}};p.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){p.offset.setOffset(this,a,b)});var b,c;c=this[0];var e={top:0,left:0},h=c&&c.ownerDocument;if(h){b=h.documentElement;if(!p.contains(b,c))return e;"undefined"!==typeof c.getBoundingClientRect&&(e=c.getBoundingClientRect());c=sa(h);return{top:e.top+c.pageYOffset-b.clientTop,left:e.left+
c.pageXOffset-b.clientLeft}}},position:function(){if(this[0]){var a,b,c=this[0],e={top:0,left:0};"fixed"===p.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),p.nodeName(a[0],"html")||(e=a.offset()),e.top+=p.css(a[0],"borderTopWidth",!0),e.left+=p.css(a[0],"borderLeftWidth",!0));return{top:b.top-e.top-p.css(c,"marginTop",!0),left:b.left-e.left-p.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||jb;a&&!p.nodeName(a,
"html")&&"static"===p.css(a,"position");)a=a.offsetParent;return a||jb})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var e="pageYOffset"===b;p.fn[a]=function(h){return ea(this,function(a,h,g){var d=sa(a);if(void 0===g)return d?d[b]:a[h];d?d.scrollTo(e?c.pageXOffset:g,e?g:c.pageYOffset):a[h]=g},a,h,arguments.length,null)}});p.each(["top","left"],function(a,b){p.cssHooks[b]=I(W.pixelPosition,function(a,c){if(c)return c=B(a,b),ma.test(c)?p(a).position()[b]+"px":c})});p.each({Height:"height",
Width:"width"},function(a,b){p.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,e){p.fn[e]=function(e,h){var g=arguments.length&&(c||"boolean"!==typeof e),d=c||(!0===e||!0===h?"margin":"border");return ea(this,function(b,c,e){return p.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===e?p.css(b,c,d):p.style(b,c,e,d)},b,g?e:void 0,g,null)}})});p.fn.size=
function(){return this.length};p.fn.andSelf=p.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return p});var kb=c.jQuery,Wb=c.$;p.noConflict=function(a){c.$===p&&(c.$=Wb);a&&c.jQuery===p&&(c.jQuery=kb);return p};"undefined"===typeof l&&(c.jQuery=c.$=p);return p});(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(jQuery)})(function(c){function l(b,g){var a,e;a=b.nodeName.toLowerCase();if("area"===a){a=b.parentNode;e=a.name;if(!b.href||!e||"map"!==a.nodeName.toLowerCase())return!1;a=c("img[usemap='#"+e+"']")[0];return!!a&&f(a)}return(/input|select|textarea|button|object/.test(a)?!b.disabled:"a"===a?b.href||g:g)&&f(b)}function f(b){return c.expr.filters.visible(b)&&!c(b).parents().addBack().filter(function(){return"hidden"===c.css(this,
"visibility")}).length}c.ui=c.ui||{};c.extend(c.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});c.fn.extend({scrollParent:function(b){var g=this.css("position"),a="absolute"===g,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/;b=this.parents().filter(function(){var b=c(this);return a&&"static"===b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);
return"fixed"!==g&&b.length?b:c(this[0].ownerDocument||document)},uniqueId:function(){var b=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++b)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&c(this).removeAttr("id")})}});c.extend(c.expr[":"],{data:c.expr.createPseudo?c.expr.createPseudo(function(b){return function(g){return!!c.data(g,b)}}):function(b,g,a){return!!c.data(b,a[3])},focusable:function(b){return l(b,!isNaN(c.attr(b,
"tabindex")))},tabbable:function(b){var g=c.attr(b,"tabindex"),a=isNaN(g);return(a||0<=g)&&l(b,!a)}});c("<a>").outerWidth(1).jquery||c.each(["Width","Height"],function(b,g){function a(a,b,h,g){c.each(e,function(){b-=parseFloat(c.css(a,"padding"+this))||0;h&&(b-=parseFloat(c.css(a,"border"+this+"Width"))||0);g&&(b-=parseFloat(c.css(a,"margin"+this))||0)});return b}var e="Width"===g?["Left","Right"]:["Top","Bottom"],h=g.toLowerCase(),d={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,
outerHeight:c.fn.outerHeight};c.fn["inner"+g]=function(b){return void 0===b?d["inner"+g].call(this):this.each(function(){c(this).css(h,a(this,b)+"px")})};c.fn["outer"+g]=function(b,e){return"number"!==typeof b?d["outer"+g].call(this,b):this.each(function(){c(this).css(h,a(this,b,!0,e)+"px")})}});c.fn.addBack||(c.fn.addBack=function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))});c("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(c.fn.removeData=function(b){return function(g){return arguments.length?
b.call(this,c.camelCase(g)):b.call(this)}}(c.fn.removeData));c.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());c.fn.extend({focus:function(b){return function(g,a){return"number"===typeof g?this.each(function(){var b=this;setTimeout(function(){c(b).focus();a&&a.call(b)},g)}):b.apply(this,arguments)}}(c.fn.focus),disableSelection:function(){var b="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(b+".ui-disableSelection",function(b){b.preventDefault()})}}(),
enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length){b=c(this[0]);for(var g;b.length&&b[0]!==document;){g=b.css("position");if("absolute"===g||"relative"===g||"fixed"===g)if(g=parseInt(b.css("zIndex"),10),!isNaN(g)&&0!==g)return g;b=b.parent()}}return 0}});c.ui.plugin={add:function(b,g,a){var e;b=c.ui[b].prototype;for(e in a)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([g,a[e]])},call:function(b,c,a,
e){if((c=b.plugins[c])&&(e||b.element[0].parentNode&&11!==b.element[0].parentNode.nodeType))for(e=0;e<c.length;e++)b.options[c[e][0]]&&c[e][1].apply(b.element,a)}};var d=0,q=Array.prototype.slice;c.cleanData=function(b){return function(g){var a,e,h;for(h=0;null!=(e=g[h]);h++)try{(a=c._data(e,"events"))&&a.remove&&c(e).triggerHandler("remove")}catch(d){}b(g)}}(c.cleanData);c.widget=function(b,g,a){var e,h,d,f,k={},m=b.split(".")[0];b=b.split(".")[1];e=m+"-"+b;a||(a=g,g=c.Widget);c.expr[":"][e.toLowerCase()]=
function(a){return!!c.data(a,e)};c[m]=c[m]||{};h=c[m][b];d=c[m][b]=function(a,b){if(!this._createWidget)return new d(a,b);arguments.length&&this._createWidget(a,b)};c.extend(d,h,{version:a.version,_proto:c.extend({},a),_childConstructors:[]});f=new g;f.options=c.widget.extend({},f.options);c.each(a,function(a,b){c.isFunction(b)?k[a]=function(){var c=function(){return g.prototype[a].apply(this,arguments)},e=function(b){return g.prototype[a].apply(this,b)};return function(){var a=this._super,h=this._superApply,
g;this._super=c;this._superApply=e;g=b.apply(this,arguments);this._super=a;this._superApply=h;return g}}():k[a]=b});d.prototype=c.widget.extend(f,{widgetEventPrefix:h?f.widgetEventPrefix||b:b},k,{constructor:d,namespace:m,widgetName:b,widgetFullName:e});h?(c.each(h._childConstructors,function(a,b){var e=b.prototype;c.widget(e.namespace+"."+e.widgetName,d,b._proto)}),delete h._childConstructors):g._childConstructors.push(d);c.widget.bridge(b,d);return d};c.widget.extend=function(b){for(var g=q.call(arguments,
1),a=0,e=g.length,h,d;a<e;a++)for(h in g[a])d=g[a][h],g[a].hasOwnProperty(h)&&void 0!==d&&(c.isPlainObject(d)?b[h]=c.isPlainObject(b[h])?c.widget.extend({},b[h],d):c.widget.extend({},d):b[h]=d);return b};c.widget.bridge=function(b,g){var a=g.prototype.widgetFullName||b;c.fn[b]=function(e){var h="string"===typeof e,d=q.call(arguments,1),f=this;e=!h&&d.length?c.widget.extend.apply(null,[e].concat(d)):e;h?this.each(function(){var h,g=c.data(this,a);if("instance"===e)return f=g,!1;if(!g)return c.error("cannot call methods on "+
b+" prior to initialization; attempted to call method '"+e+"'");if(!c.isFunction(g[e])||"_"===e.charAt(0))return c.error("no such method '"+e+"' for "+b+" widget instance");h=g[e].apply(g,d);if(h!==g&&void 0!==h)return f=h&&h.jquery?f.pushStack(h.get()):h,!1}):this.each(function(){var b=c.data(this,a);b?(b.option(e||{}),b._init&&b._init()):c.data(this,a,new g(e,this))});return f}};c.Widget=function(){};c.Widget._childConstructors=[];c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",
options:{disabled:!1,create:null},_createWidget:function(b,g){g=c(g||this.defaultElement||this)[0];this.element=c(g);this.uuid=d++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=c();this.hoverable=c();this.focusable=c();g!==this&&(c.data(g,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===g&&this.destroy()}}),this.document=c(g.style?g.ownerDocument:g.document||g),this.window=c(this.document[0].defaultView||this.document[0].parentWindow));this.options=
c.widget.extend({},this.options,this._getCreateOptions(),b);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:c.noop,_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(c.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");
this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:c.noop,widget:function(){return this.element},option:function(b,g){var a=b,e,h,d;if(0===arguments.length)return c.widget.extend({},this.options);if("string"===typeof b)if(a={},e=b.split("."),b=e.shift(),e.length){h=a[b]=c.widget.extend({},this.options[b]);for(d=0;d<e.length-1;d++)h[e[d]]=h[e[d]]||{},h=h[e[d]];b=e.pop();if(1===arguments.length)return void 0===
h[b]?null:h[b];h[b]=g}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];a[b]=g}this._setOptions(a);return this},_setOptions:function(b){for(var c in b)this._setOption(c,b[c]);return this},_setOption:function(b,c){this.options[b]=c;"disabled"===b&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!c),c&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")));return this},enable:function(){return this._setOptions({disabled:!1})},
disable:function(){return this._setOptions({disabled:!0})},_on:function(b,g,a){var e,h=this;"boolean"!==typeof b&&(a=g,g=b,b=!1);a?(g=e=c(g),this.bindings=this.bindings.add(g)):(a=g,g=this.element,e=this.widget());c.each(a,function(a,d){function f(){if(b||!0!==h.options.disabled&&!c(this).hasClass("ui-state-disabled"))return("string"===typeof d?h[d]:d).apply(h,arguments)}"string"!==typeof d&&(f.guid=d.guid=d.guid||f.guid||c.guid++);var k=a.match(/^([\w:-]*)\s*(.*)$/),m=k[1]+h.eventNamespace;(k=k[2])?
e.delegate(k,m,f):g.bind(m,f)})},_off:function(b,g){g=(g||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;b.unbind(g).undelegate(g);this.bindings=c(this.bindings.not(b).get());this.focusable=c(this.focusable.not(b).get());this.hoverable=c(this.hoverable.not(b).get())},_delay:function(b,c){var a=this;return setTimeout(function(){return("string"===typeof b?a[b]:b).apply(a,arguments)},c||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){c(b.currentTarget).addClass("ui-state-hover")},
mouseleave:function(b){c(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){c(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){c(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,g,a){var e,h=this.options[b];a=a||{};g=c.Event(g);g.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();g.target=this.element[0];if(b=g.originalEvent)for(e in b)e in g||
(g[e]=b[e]);this.element.trigger(g,a);return!(c.isFunction(h)&&!1===h.apply(this.element[0],[g].concat(a))||g.isDefaultPrevented())}};c.each({show:"fadeIn",hide:"fadeOut"},function(b,g){c.Widget.prototype["_"+b]=function(a,e,h){"string"===typeof e&&(e={effect:e});var d,f=e?!0===e||"number"===typeof e?g:e.effect||g:b;e=e||{};"number"===typeof e&&(e={duration:e});d=!c.isEmptyObject(e);e.complete=h;e.delay&&a.delay(e.delay);if(d&&c.effects&&c.effects.effect[f])a[b](e);else if(f!==b&&a[f])a[f](e.duration,
e.easing,h);else a.queue(function(e){c(this)[b]();h&&h.call(a[0]);e()})}});var m=!1;c(document).mouseup(function(){m=!1});c.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c)}).bind("click."+this.widgetName,function(g){if(!0===c.data(g.target,b.widgetName+".preventClickEvent"))return c.removeData(g.target,b.widgetName+".preventClickEvent"),
g.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!m){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var g=this,a=1===b.which,e="string"===typeof this.options.cancel&&b.target.nodeName?c(b.target).closest(this.options.cancel).length:
!1;if(!a||e||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){g.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===c.data(b.target,this.widgetName+".preventClickEvent")&&c.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return g._mouseMove(a)};
this._mouseUpDelegate=function(a){return g._mouseUp(a)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);b.preventDefault();return m=!0}},_mouseMove:function(b){if(this._mouseMoved&&(c.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button||!b.which))return this._mouseUp(b);if(b.which||b.button)this._mouseMoved=!0;if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&
this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&c.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return m=!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-
b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});(function(){function b(a,b,c){return[parseFloat(a[0])*(l.test(a[0])?b/100:1),parseFloat(a[1])*(l.test(a[1])?c/100:1)]}function g(a){var b=a[0];return 9===b.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:c.isWindow(b)?{width:a.width(),height:a.height(),
offset:{top:a.scrollTop(),left:a.scrollLeft()}}:b.preventDefault?{width:0,height:0,offset:{top:b.pageY,left:b.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}c.ui=c.ui||{};var a,e,h=Math.max,d=Math.abs,f=Math.round,k=/left|center|right/,m=/top|center|bottom/,n=/[\+\-]\d+(\.[\d]+)?%?/,q=/^\w+/,l=/%$/,r=c.fn.position;c.position={scrollbarWidth:function(){if(void 0!==a)return a;var b,e,h=c("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");
e=h.children()[0];c("body").append(h);b=e.offsetWidth;h.css("overflow","scroll");e=e.offsetWidth;b===e&&(e=h[0].clientWidth);h.remove();return a=b-e},getScrollInfo:function(a){var b=a.isWindow||a.isDocument?"":a.element.css("overflow-x"),e=a.isWindow||a.isDocument?"":a.element.css("overflow-y"),b="scroll"===b||"auto"===b&&a.width<a.element[0].scrollWidth;return{width:"scroll"===e||"auto"===e&&a.height<a.element[0].scrollHeight?c.position.scrollbarWidth():0,height:b?c.position.scrollbarWidth():0}},
getWithinInfo:function(a){a=c(a||window);var b=c.isWindow(a[0]),e=!!a[0]&&9===a[0].nodeType;return{element:a,isWindow:b,isDocument:e,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:b||e?a.width():a.outerWidth(),height:b||e?a.height():a.outerHeight()}}};c.fn.position=function(a){if(!a||!a.of)return r.apply(this,arguments);a=c.extend({},a);var l,B,K,P,N,L,X=c(a.of),ca=c.position.getWithinInfo(a.within),U=c.position.getScrollInfo(ca),ka=(a.collision||"flip").split(" "),
oa={};L=g(X);X[0].preventDefault&&(a.at="left top");B=L.width;K=L.height;P=L.offset;N=c.extend({},P);c.each(["my","at"],function(){var b=(a[this]||"").split(" "),c,e;1===b.length&&(b=k.test(b[0])?b.concat(["center"]):m.test(b[0])?["center"].concat(b):["center","center"]);b[0]=k.test(b[0])?b[0]:"center";b[1]=m.test(b[1])?b[1]:"center";c=n.exec(b[0]);e=n.exec(b[1]);oa[this]=[c?c[0]:0,e?e[0]:0];a[this]=[q.exec(b[0])[0],q.exec(b[1])[0]]});1===ka.length&&(ka[1]=ka[0]);"right"===a.at[0]?N.left+=B:"center"===
a.at[0]&&(N.left+=B/2);"bottom"===a.at[1]?N.top+=K:"center"===a.at[1]&&(N.top+=K/2);l=b(oa.at,B,K);N.left+=l[0];N.top+=l[1];return this.each(function(){var g,k,m=c(this),n=m.outerWidth(),q=m.outerHeight(),r=parseInt(c.css(this,"marginLeft"),10)||0,y=parseInt(c.css(this,"marginTop"),10)||0,v=n+r+(parseInt(c.css(this,"marginRight"),10)||0)+U.width,x=q+y+(parseInt(c.css(this,"marginBottom"),10)||0)+U.height,z=c.extend({},N),L=b(oa.my,m.outerWidth(),m.outerHeight());"right"===a.my[0]?z.left-=n:"center"===
a.my[0]&&(z.left-=n/2);"bottom"===a.my[1]?z.top-=q:"center"===a.my[1]&&(z.top-=q/2);z.left+=L[0];z.top+=L[1];e||(z.left=f(z.left),z.top=f(z.top));g={marginLeft:r,marginTop:y};c.each(["left","top"],function(b,e){if(c.ui.position[ka[b]])c.ui.position[ka[b]][e](z,{targetWidth:B,targetHeight:K,elemWidth:n,elemHeight:q,collisionPosition:g,collisionWidth:v,collisionHeight:x,offset:[l[0]+L[0],l[1]+L[1]],my:a.my,at:a.at,within:ca,elem:m})});a.using&&(k=function(b){var c=P.left-z.left,e=c+B-n,g=P.top-z.top,
f=g+K-q,k={target:{element:X,left:P.left,top:P.top,width:B,height:K},element:{element:m,left:z.left,top:z.top,width:n,height:q},horizontal:0>e?"left":0<c?"right":"center",vertical:0>f?"top":0<g?"bottom":"middle"};B<n&&d(c+e)<B&&(k.horizontal="center");K<q&&d(g+f)<K&&(k.vertical="middle");h(d(c),d(e))>h(d(g),d(f))?k.important="horizontal":k.important="vertical";a.using.call(this,b,k)});m.offset(c.extend(z,{using:k}))})};c.ui.position={fit:{left:function(a,b){var c=b.within,e=c.isWindow?c.scrollLeft:
c.offset.left,g=c.width,d=a.left-b.collisionPosition.marginLeft,c=e-d,f=d+b.collisionWidth-g-e;b.collisionWidth>g?0<c&&0>=f?(e=a.left+c+b.collisionWidth-g-e,a.left+=c-e):a.left=0<f&&0>=c?e:c>f?e+g-b.collisionWidth:e:a.left=0<c?a.left+c:0<f?a.left-f:h(a.left-d,a.left)},top:function(a,b){var c=b.within,e=c.isWindow?c.scrollTop:c.offset.top,g=b.within.height,d=a.top-b.collisionPosition.marginTop,c=e-d,f=d+b.collisionHeight-g-e;b.collisionHeight>g?0<c&&0>=f?(e=a.top+c+b.collisionHeight-g-e,a.top+=c-e):
a.top=0<f&&0>=c?e:c>f?e+g-b.collisionHeight:e:a.top=0<c?a.top+c:0<f?a.top-f:h(a.top-d,a.top)}},flip:{left:function(a,b){var c=b.within,e=c.offset.left+c.scrollLeft,h=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,f=a.left-b.collisionPosition.marginLeft,c=f-g,k=f+b.collisionWidth-h-g,f="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,m="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,n=-2*b.offset[0];if(0>c){if(e=a.left+f+m+n+b.collisionWidth-h-e,0>e||e<d(c))a.left+=
f+m+n}else 0<k&&(e=a.left-b.collisionPosition.marginLeft+f+m+n-g,0<e||d(e)<k)&&(a.left+=f+m+n)},top:function(a,b){var c=b.within,e=c.offset.top+c.scrollTop,h=c.height,g=c.isWindow?c.scrollTop:c.offset.top,f=a.top-b.collisionPosition.marginTop,c=f-g,k=f+b.collisionHeight-h-g,f="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,n=-2*b.offset[1];0>c?(e=a.top+f+m+n+b.collisionHeight-h-e,a.top+f+m+n>c&&(0>e||e<d(c))&&(a.top+=
f+m+n)):0<k&&(e=a.top-b.collisionPosition.marginTop+f+m+n-g,a.top+f+m+n>k&&(0<e||d(e)<k)&&(a.top+=f+m+n))}},flipfit:{left:function(){c.ui.position.flip.left.apply(this,arguments);c.ui.position.fit.left.apply(this,arguments)},top:function(){c.ui.position.flip.top.apply(this,arguments);c.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,b,h,g,d=document.getElementsByTagName("body")[0];h=document.createElement("div");a=document.createElement(d?"div":"body");b={visibility:"hidden",width:0,
height:0,border:0,margin:0,background:"none"};d&&c.extend(b,{position:"absolute",left:"-1000px",top:"-1000px"});for(g in b)a.style[g]=b[g];a.appendChild(h);b=d||document.documentElement;b.insertBefore(a,b.firstChild);h.style.cssText="position: absolute; left: 10.7432222px;";h=c(h).offset().left;e=10<h&&11>h;a.innerHTML="";b.removeChild(a)})()})();c.widget("ui.resizable",c.ui.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",
aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(b){return parseInt(b,10)||0},_isNumber:function(b){return!isNaN(parseInt(b,10))},_hasScroll:function(b,g){if("hidden"===c(b).css("overflow"))return!1;var a=g&&"left"===g?"scrollLeft":"scrollTop",e=!1;if(0<b[a])return!0;b[a]=1;e=0<b[a];b[a]=0;return e},_create:function(){var b,g,a,e,h,d=this,f=this.options;
this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!f.aspectRatio,aspectRatio:f.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:f.helper||f.ghost||f.animate?f.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(c("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=
this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=f.handles||(c(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},g=0;g<b.length;g++)a=c.trim(b[g]),h="ui-resizable-"+a,e=c("<div class='ui-resizable-handle "+h+"'></div>"),e.css({zIndex:f.zIndex}),"se"===a&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[a]=".ui-resizable-"+a,this.element.append(e);this._renderAxis=function(a){var b,e,h;a=a||this.element;for(b in this.handles)this.handles[b].constructor===
String&&(this.handles[b]=this.element.children(this.handles[b]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(e=c(this.handles[b],this.element),h=/sw|ne|nw|se|n|s/.test(b)?e.outerHeight():e.outerWidth(),e=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join(""),a.css(e,h),this._proportionallyResize()),c(this.handles[b])};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",
this.element).disableSelection();this._handles.mouseover(function(){d.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),d.axis=e&&e[1]?e[1]:"se")});f.autoHide&&(this._handles.hide(),c(this.element).addClass("ui-resizable-autohide").mouseenter(function(){f.disabled||(c(this).removeClass("ui-resizable-autohide"),d._handles.show())}).mouseleave(function(){f.disabled||d.resizing||(c(this).addClass("ui-resizable-autohide"),d._handles.hide())}));this._mouseInit()},
_destroy:function(){this._mouseDestroy();var b,g=function(a){c(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};this.elementIsWrapper&&(g(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove());this.originalElement.css("resize",this.originalResizeStyle);
g(this.originalElement);return this},_mouseCapture:function(b){var g,a,e=!1;for(g in this.handles)if(a=c(this.handles[g])[0],a===b.target||c.contains(a,b.target))e=!0;return!this.options.disabled&&e},_mouseStart:function(b){var g,a,e=this.options,h=this.element;this.resizing=!0;this._renderProxy();g=this._num(this.helper.css("left"));a=this._num(this.helper.css("top"));e.containment&&(g+=c(e.containment).scrollLeft()||0,a+=c(e.containment).scrollTop()||0);this.offset=this.helper.offset();this.position=
{left:g,top:a};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:h.width(),height:h.height()};this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()};this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()};this.originalPosition={left:g,top:a};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio="number"===typeof e.aspectRatio?e.aspectRatio:this.originalSize.width/
this.originalSize.height||1;g=c(".ui-resizable-"+this.axis).css("cursor");c("body").css("cursor","auto"===g?this.axis+"-resize":g);h.addClass("ui-resizable-resizing");this._propagate("start",b);return!0},_mouseDrag:function(b){var g,a=this.originalMousePosition;g=b.pageX-a.left||0;var a=b.pageY-a.top||0,e=this._change[this.axis];this._updatePrevProperties();if(!e)return!1;g=e.apply(this,[b,g,a]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)g=this._updateRatio(g,b);g=
this._respectSize(g,b);this._updateCache(g);this._propagate("resize",b);g=this._applyChanges();!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();c.isEmptyObject(g)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges());return!1},_mouseStop:function(b){this.resizing=!1;var g,a,e,h=this.options;this._helper&&(g=this._proportionallyResizeElements,g=(a=g.length&&/textarea/i.test(g[0].nodeName))&&this._hasScroll(g[0],"left")?0:this.sizeDiff.height,
a=a?0:this.sizeDiff.width,a={width:this.helper.width()-a,height:this.helper.height()-g},g=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,e=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,h.animate||this.element.css(c.extend(a,{top:e,left:g})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!h.animate&&this._proportionallyResize());c("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");
this._propagate("stop",b);this._helper&&this.helper.remove();return!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var b={};this.position.top!==this.prevPosition.top&&(b.top=this.position.top+"px");this.position.left!==this.prevPosition.left&&(b.left=this.position.left+"px");this.size.width!==this.prevSize.width&&(b.width=this.size.width+"px");this.size.height!==
this.prevSize.height&&(b.height=this.size.height+"px");this.helper.css(b);return b},_updateVirtualBoundaries:function(b){var c,a,e,h;h=this.options;h={minWidth:this._isNumber(h.minWidth)?h.minWidth:0,maxWidth:this._isNumber(h.maxWidth)?h.maxWidth:Infinity,minHeight:this._isNumber(h.minHeight)?h.minHeight:0,maxHeight:this._isNumber(h.maxHeight)?h.maxHeight:Infinity};if(this._aspectRatio||b)b=h.minHeight*this.aspectRatio,a=h.minWidth/this.aspectRatio,c=h.maxHeight*this.aspectRatio,e=h.maxWidth/this.aspectRatio,
b>h.minWidth&&(h.minWidth=b),a>h.minHeight&&(h.minHeight=a),c<h.maxWidth&&(h.maxWidth=c),e<h.maxHeight&&(h.maxHeight=e);this._vBoundaries=h},_updateCache:function(b){this.offset=this.helper.offset();this._isNumber(b.left)&&(this.position.left=b.left);this._isNumber(b.top)&&(this.position.top=b.top);this._isNumber(b.height)&&(this.size.height=b.height);this._isNumber(b.width)&&(this.size.width=b.width)},_updateRatio:function(b){var c=this.position,a=this.size,e=this.axis;this._isNumber(b.height)?b.width=
b.height*this.aspectRatio:this._isNumber(b.width)&&(b.height=b.width/this.aspectRatio);"sw"===e&&(b.left=c.left+(a.width-b.width),b.top=null);"nw"===e&&(b.top=c.top+(a.height-b.height),b.left=c.left+(a.width-b.width));return b},_respectSize:function(b){var c=this._vBoundaries,a=this.axis,e=this._isNumber(b.width)&&c.maxWidth&&c.maxWidth<b.width,h=this._isNumber(b.height)&&c.maxHeight&&c.maxHeight<b.height,d=this._isNumber(b.width)&&c.minWidth&&c.minWidth>b.width,f=this._isNumber(b.height)&&c.minHeight&&
c.minHeight>b.height,k=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,n=/sw|nw|w/.test(a),a=/nw|ne|n/.test(a);d&&(b.width=c.minWidth);f&&(b.height=c.minHeight);e&&(b.width=c.maxWidth);h&&(b.height=c.maxHeight);d&&n&&(b.left=k-c.minWidth);e&&n&&(b.left=k-c.maxWidth);f&&a&&(b.top=m-c.minHeight);h&&a&&(b.top=m-c.maxHeight);b.width||b.height||b.left||!b.top?b.width||b.height||b.top||!b.left||(b.left=null):b.top=null;return b},_getPaddingPlusBorderDimensions:function(b){var c=
0,a=[],e=[b.css("borderTopWidth"),b.css("borderRightWidth"),b.css("borderBottomWidth"),b.css("borderLeftWidth")];for(b=[b.css("paddingTop"),b.css("paddingRight"),b.css("paddingBottom"),b.css("paddingLeft")];4>c;c++)a[c]=parseInt(e[c],10)||0,a[c]+=parseInt(b[c],10)||0;return{height:a[0]+a[2],width:a[1]+a[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b,c=0,a=this.helper||this.element;c<this._proportionallyResizeElements.length;c++)b=this._proportionallyResizeElements[c],
this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(b)),b.css({height:a.height()-this.outerDimensions.height||0,width:a.width()-this.outerDimensions.width||0})},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||c("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+
"px",top:this.elementOffset.top+"px",zIndex:++b.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(b,c){return{width:this.originalSize.width+c}},w:function(b,c){return{left:this.originalPosition.left+c,width:this.originalSize.width-c}},n:function(b,c,a){return{top:this.originalPosition.top+a,height:this.originalSize.height-a}},s:function(b,c,a){return{height:this.originalSize.height+a}},se:function(b,g,a){return c.extend(this._change.s.apply(this,
arguments),this._change.e.apply(this,[b,g,a]))},sw:function(b,g,a){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,g,a]))},ne:function(b,g,a){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,g,a]))},nw:function(b,g,a){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,g,a]))}},_propagate:function(b,g){c.ui.plugin.call(this,b,[g,this.ui()]);"resize"!==b&&this._trigger(b,g,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,
element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.ui.plugin.add("resizable","animate",{stop:function(b){var g=c(this).resizable("instance"),a=g.options,e=g._proportionallyResizeElements,h=e.length&&/textarea/i.test(e[0].nodeName),d=h&&g._hasScroll(e[0],"left")?0:g.sizeDiff.height,h={width:g.size.width-(h?0:g.sizeDiff.width),height:g.size.height-d},d=parseInt(g.element.css("left"),10)+(g.position.left-
g.originalPosition.left)||null,f=parseInt(g.element.css("top"),10)+(g.position.top-g.originalPosition.top)||null;g.element.animate(c.extend(h,f&&d?{top:f,left:d}:{}),{duration:a.animateDuration,easing:a.animateEasing,step:function(){var a={width:parseInt(g.element.css("width"),10),height:parseInt(g.element.css("height"),10),top:parseInt(g.element.css("top"),10),left:parseInt(g.element.css("left"),10)};e&&e.length&&c(e[0]).css({width:a.width,height:a.height});g._updateCache(a);g._propagate("resize",
b)}})}});c.ui.plugin.add("resizable","containment",{start:function(){var b,g,a,e,h,d=c(this).resizable("instance"),f=d.element;a=d.options.containment;if(f=a instanceof c?a.get(0):/parent/.test(a)?f.parent().get(0):a)d.containerElement=c(f),/document/.test(a)||a===document?(d.containerOffset={left:0,top:0},d.containerPosition={left:0,top:0},d.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}):(b=c(f),g=[],c(["Top",
"Right","Left","Bottom"]).each(function(a,c){g[a]=d._num(b.css("padding"+c))}),d.containerOffset=b.offset(),d.containerPosition=b.position(),d.containerSize={height:b.innerHeight()-g[3],width:b.innerWidth()-g[1]},a=d.containerOffset,e=d.containerSize.height,h=d.containerSize.width,h=d._hasScroll(f,"left")?f.scrollWidth:h,e=d._hasScroll(f)?f.scrollHeight:e,d.parentData={element:f,left:a.left,top:a.top,width:h,height:e})},resize:function(b){var g,a,e,h=c(this).resizable("instance");g=h.options;a=h.containerOffset;
e=h.position;b=h._aspectRatio||b.shiftKey;var d={top:0,left:0},f=h.containerElement,k=!0;f[0]!==document&&/static/.test(f.css("position"))&&(d=a);e.left<(h._helper?a.left:0)&&(h.size.width+=h._helper?h.position.left-a.left:h.position.left-d.left,b&&(h.size.height=h.size.width/h.aspectRatio,k=!1),h.position.left=g.helper?a.left:0);e.top<(h._helper?a.top:0)&&(h.size.height+=h._helper?h.position.top-a.top:h.position.top,b&&(h.size.width=h.size.height*h.aspectRatio,k=!1),h.position.top=h._helper?a.top:
0);g=h.containerElement.get(0)===h.element.parent().get(0);e=/relative|absolute/.test(h.containerElement.css("position"));g&&e?(h.offset.left=h.parentData.left+h.position.left,h.offset.top=h.parentData.top+h.position.top):(h.offset.left=h.element.offset().left,h.offset.top=h.element.offset().top);g=Math.abs(h.sizeDiff.width+(h._helper?h.offset.left-d.left:h.offset.left-a.left));a=Math.abs(h.sizeDiff.height+(h._helper?h.offset.top-d.top:h.offset.top-a.top));g+h.size.width>=h.parentData.width&&(h.size.width=
h.parentData.width-g,b&&(h.size.height=h.size.width/h.aspectRatio,k=!1));a+h.size.height>=h.parentData.height&&(h.size.height=h.parentData.height-a,b&&(h.size.width=h.size.height*h.aspectRatio,k=!1));k||(h.position.left=h.prevPosition.left,h.position.top=h.prevPosition.top,h.size.width=h.prevSize.width,h.size.height=h.prevSize.height)},stop:function(){var b=c(this).resizable("instance"),g=b.options,a=b.containerOffset,e=b.containerPosition,h=b.containerElement,d=c(b.helper),f=d.offset(),k=d.outerWidth()-
b.sizeDiff.width,d=d.outerHeight()-b.sizeDiff.height;b._helper&&!g.animate&&/relative/.test(h.css("position"))&&c(this).css({left:f.left-e.left-a.left,width:k,height:d});b._helper&&!g.animate&&/static/.test(h.css("position"))&&c(this).css({left:f.left-e.left-a.left,width:k,height:d})}});c.ui.plugin.add("resizable","alsoResize",{start:function(){var b=c(this).resizable("instance").options,g=function(a){c(a).each(function(){var a=c(this);a.data("ui-resizable-alsoresize",{width:parseInt(a.width(),10),
height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"!==typeof b.alsoResize||b.alsoResize.parentNode?g(b.alsoResize):b.alsoResize.length?(b.alsoResize=b.alsoResize[0],g(b.alsoResize)):c.each(b.alsoResize,function(a){g(a)})},resize:function(b,g){var a=c(this).resizable("instance"),e=a.options,h=a.originalSize,d=a.originalPosition,f={height:a.size.height-h.height||0,width:a.size.width-h.width||0,top:a.position.top-d.top||0,left:a.position.left-d.left||
0},k=function(a,b){c(a).each(function(){var a=c(this),e=c(this).data("ui-resizable-alsoresize"),h={},d=b&&b.length?b:a.parents(g.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(d,function(a,b){var c=(e[b]||0)+(f[b]||0);c&&0<=c&&(h[b]=c||null)});a.css(h)})};"object"!==typeof e.alsoResize||e.alsoResize.nodeType?k(e.alsoResize):c.each(e.alsoResize,function(a,b){k(a,b)})},stop:function(){c(this).removeData("resizable-alsoresize")}});c.ui.plugin.add("resizable","ghost",
{start:function(){var b=c(this).resizable("instance"),g=b.options,a=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:.25,display:"block",position:"relative",height:a.height,width:a.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"===typeof g.ghost?g.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=c(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=c(this).resizable("instance");
b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});c.ui.plugin.add("resizable","grid",{resize:function(){var b,g=c(this).resizable("instance"),a=g.options,e=g.size,h=g.originalSize,d=g.originalPosition,f=g.axis,k="number"===typeof a.grid?[a.grid,a.grid]:a.grid,m=k[0]||1,n=k[1]||1,q=Math.round((e.width-h.width)/m)*m,e=Math.round((e.height-h.height)/n)*n,l=h.width+q,r=h.height+e,D=a.maxWidth&&a.maxWidth<l,G=a.maxHeight&&a.maxHeight<r,V=a.minWidth&&a.minWidth>l,K=a.minHeight&&a.minHeight>
r;a.grid=k;V&&(l+=m);K&&(r+=n);D&&(l-=m);G&&(r-=n);if(/^(se|s|e)$/.test(f))g.size.width=l,g.size.height=r;else if(/^(ne)$/.test(f))g.size.width=l,g.size.height=r,g.position.top=d.top-e;else if(/^(sw)$/.test(f))g.size.width=l,g.size.height=r,g.position.left=d.left-q;else{if(0>=r-n||0>=l-m)b=g._getPaddingPlusBorderDimensions(this);0<r-n?(g.size.height=r,g.position.top=d.top-e):(r=n-b.height,g.size.height=r,g.position.top=d.top+h.height-r);0<l-m?(g.size.width=l,g.position.left=d.left-q):(l=n-b.height,
g.size.width=l,g.position.left=d.left+h.width-l)}}});c.widget("ui.selectable",c.ui.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,d=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){b=c(d.options.filter,d.element[0]);b.addClass("ui-selectee");b.each(function(){var a=c(this),b=a.offset();c.data(this,"selectable-item",
{element:this,$element:a,left:b.left,top:b.top,right:b.left+a.outerWidth(),bottom:b.top+a.outerHeight(),startselected:!1,selected:a.hasClass("ui-selected"),selecting:a.hasClass("ui-selecting"),unselecting:a.hasClass("ui-unselecting")})})};this.refresh();this.selectees=b.addClass("ui-selectee");this._mouseInit();this.helper=c("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");
this._mouseDestroy()},_mouseStart:function(b){var d=this,a=this.options;this.opos=[b.pageX,b.pageY];this.options.disabled||(this.selectees=c(a.filter,this.element[0]),this._trigger("start",b),c(a.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),a.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var a=c.data(this,"selectable-item");a.startselected=!0;b.metaKey||b.ctrlKey||(a.$element.removeClass("ui-selected"),a.selected=!1,
a.$element.addClass("ui-unselecting"),a.unselecting=!0,d._trigger("unselecting",b,{unselecting:a.element}))}),c(b.target).parents().addBack().each(function(){var a,h=c.data(this,"selectable-item");if(h)return a=!b.metaKey&&!b.ctrlKey||!h.$element.hasClass("ui-selected"),h.$element.removeClass(a?"ui-unselecting":"ui-selected").addClass(a?"ui-selecting":"ui-unselecting"),h.unselecting=!a,h.selecting=a,(h.selected=a)?d._trigger("selecting",b,{selecting:h.element}):d._trigger("unselecting",b,{unselecting:h.element}),
!1}))},_mouseDrag:function(b){this.dragged=!0;if(!this.options.disabled){var d,a=this,e=this.options,h=this.opos[0],f=this.opos[1],k=b.pageX,m=b.pageY;h>k&&(d=k,k=h,h=d);f>m&&(d=m,m=f,f=d);this.helper.css({left:h,top:f,width:k-h,height:m-f});this.selectees.each(function(){var d=c.data(this,"selectable-item"),g=!1;d&&d.element!==a.element[0]&&("touch"===e.tolerance?g=!(d.left>k||d.right<h||d.top>m||d.bottom<f):"fit"===e.tolerance&&(g=d.left>h&&d.right<k&&d.top>f&&d.bottom<m),g?(d.selected&&(d.$element.removeClass("ui-selected"),
d.selected=!1),d.unselecting&&(d.$element.removeClass("ui-unselecting"),d.unselecting=!1),d.selecting||(d.$element.addClass("ui-selecting"),d.selecting=!0,a._trigger("selecting",b,{selecting:d.element}))):(d.selecting&&((b.metaKey||b.ctrlKey)&&d.startselected?(d.$element.removeClass("ui-selecting"),d.selecting=!1,d.$element.addClass("ui-selected"),d.selected=!0):(d.$element.removeClass("ui-selecting"),d.selecting=!1,d.startselected&&(d.$element.addClass("ui-unselecting"),d.unselecting=!0),a._trigger("unselecting",
b,{unselecting:d.element}))),!d.selected||b.metaKey||b.ctrlKey||d.startselected||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,a._trigger("unselecting",b,{unselecting:d.element}))))});return!1}},_mouseStop:function(b){var d=this;this.dragged=!1;c(".ui-unselecting",this.element[0]).each(function(){var a=c.data(this,"selectable-item");a.$element.removeClass("ui-unselecting");a.unselecting=!1;a.startselected=!1;d._trigger("unselected",b,{unselected:a.element})});
c(".ui-selecting",this.element[0]).each(function(){var a=c.data(this,"selectable-item");a.$element.removeClass("ui-selecting").addClass("ui-selected");a.selecting=!1;a.selected=!0;a.startselected=!0;d._trigger("selected",b,{selected:a.element})});this._trigger("stop",b);this.helper.remove();return!1}});c.widget("ui.accordion",{version:"1.11.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",
header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=c();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");b.collapsible||!1!==b.active&&null!=b.active||(b.active=
0);this._processPanels();0>b.active&&(b.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():c()}},_createIcons:function(){var b=this.options.icons;b&&(c("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},
_destroy:function(){var b;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId();this._destroyIcons();b=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display",
"").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId();"content"!==this.options.heightStyle&&b.css("height","")},_setOption:function(b,c){"active"===b?this._activate(c):("event"===b&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(c)),this._super(b,c),"collapsible"!==b||c||!1!==this.options.active||this._activate(0),"icons"===b&&(this._destroyIcons(),c&&this._createIcons()),"disabled"===b&&(this.element.toggleClass("ui-state-disabled",
!!c).attr("aria-disabled",c),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!c)))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var d=c.ui.keyCode,a=this.headers.length,e=this.headers.index(b.target),h=!1;switch(b.keyCode){case d.RIGHT:case d.DOWN:h=this.headers[(e+1)%a];break;case d.LEFT:case d.UP:h=this.headers[(e-1+a)%a];break;case d.SPACE:case d.ENTER:this._eventHandler(b);break;case d.HOME:h=this.headers[0];break;case d.END:h=this.headers[a-1]}h&&(c(b.target).attr("tabIndex",
-1),c(h).attr("tabIndex",0),h.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===c.ui.keyCode.UP&&b.ctrlKey&&c(b.currentTarget).prev().focus()},refresh:function(){var b=this.options;this._processPanels();!1===b.active&&!0===b.collapsible||!this.headers.length?(b.active=!1,this.active=c()):!1===b.active?this._activate(0):this.active.length&&!c.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=c()):
this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){var b=this.headers,c=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all");this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();c&&(this._off(b.not(this.headers)),this._off(c.not(this.panels)))},
_refresh:function(){var b,d=this.options,a=d.heightStyle,e=this.element.parent();this.active=this._findActive(d.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(){var a=c(this),b=a.uniqueId().attr("id"),e=a.next(),d=e.uniqueId().attr("id");a.attr("aria-controls",d);e.attr("aria-labelledby",b)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",
"aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(d.event);"fill"===a?(b=e.height(),this.element.siblings(":visible").each(function(){var a=c(this),e=a.css("position");"absolute"!==e&&"fixed"!==e&&(b-=a.outerHeight(!0))}),this.headers.each(function(){b-=c(this).outerHeight(!0)}),
this.headers.next().each(function(){c(this).height(Math.max(0,b-c(this).innerHeight()+c(this).height()))}).css("overflow","auto")):"auto"===a&&(b=0,this.headers.next().each(function(){b=Math.max(b,c(this).css("height","").height())}).height(b))},_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,currentTarget:b,preventDefault:c.noop}))},_findActive:function(b){return"number"===typeof b?this.headers.eq(b):c()},_setupEvents:function(b){var d=
{keydown:"_keydown"};b&&c.each(b.split(" "),function(a,b){d[b]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,d);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(b){var d=this.options,a=this.active,e=c(b.currentTarget),h=e[0]===a[0],f=h&&d.collapsible,k=f?c():e.next(),m=a.next(),k={oldHeader:a,oldPanel:m,newHeader:f?c():e,newPanel:k};b.preventDefault();h&&!d.collapsible||
!1===this._trigger("beforeActivate",b,k)||(d.active=f?!1:this.headers.index(e),this.active=h?c():e,this._toggle(k),a.removeClass("ui-accordion-header-active ui-state-active"),d.icons&&a.children(".ui-accordion-header-icon").removeClass(d.icons.activeHeader).addClass(d.icons.header),h||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),d.icons&&e.children(".ui-accordion-header-icon").removeClass(d.icons.header).addClass(d.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},
_toggle:function(b){var d=b.newPanel,a=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=d;this.prevHide=a;this.options.animate?this._animate(d,a,b):(a.hide(),d.show(),this._toggleComplete(b));a.attr({"aria-hidden":"true"});a.prev().attr("aria-selected","false");d.length&&a.length?a.prev().attr({tabIndex:-1,"aria-expanded":"false"}):d.length&&this.headers.filter(function(){return 0===c(this).attr("tabIndex")}).attr("tabIndex",-1);d.attr("aria-hidden",
"false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(b,c,a){var e,h,d,f=this,k=0,m=b.length&&(!c.length||b.index()<c.index()),n=this.options.animate||{},m=m&&n.down||n,q=function(){f._toggleComplete(a)};"number"===typeof m&&(d=m);"string"===typeof m&&(h=m);h=h||m.easing||n.easing;d=d||m.duration||n.duration;if(!c.length)return b.animate(this.showProps,d,h,q);if(!b.length)return c.animate(this.hideProps,d,h,q);e=b.show().outerHeight();c.animate(this.hideProps,
{duration:d,easing:h,step:function(a,b){b.now=Math.round(a)}});b.hide().animate(this.showProps,{duration:d,easing:h,complete:q,step:function(a,b){b.now=Math.round(a);"height"!==b.prop?k+=b.now:"content"!==f.options.heightStyle&&(b.now=Math.round(e-c.outerHeight()-k),k=0)}})},_toggleComplete:function(b){var c=b.oldPanel;c.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");c.length&&(c.parent()[0].className=c.parent()[0].className);this._trigger("activate",
null,b)}});var n,r=function(){var b=c(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},k=function(b){var d=b.name,a=b.form,e=c([]);d&&(d=d.replace(/'/g,"\\'"),e=a?c(a).find("[name='"+d+"'][type=radio]"):c("[name='"+d+"'][type=radio]",b.ownerDocument).filter(function(){return!this.form}));return e};c.widget("ui.button",{version:"1.11.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+
this.eventNamespace).bind("reset"+this.eventNamespace,r);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var b=this,d=this.options,a="checkbox"===this.type||"radio"===this.type,e=a?"":"ui-state-active";null===d.label&&(d.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);
this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){d.disabled||this===n&&c(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){d.disabled||c(this).removeClass(e)}).bind("click"+this.eventNamespace,function(a){d.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}});
a&&this.element.bind("change"+this.eventNamespace,function(){b.refresh()});"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(d.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(d.disabled)return!1;c(this).addClass("ui-state-active");b.buttonElement.attr("aria-pressed","true");var a=b.element[0];k(a).not(a).map(function(){return c(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",
"false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(d.disabled)return!1;c(this).addClass("ui-state-active");n=this;b.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(d.disabled)return!1;c(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(a){if(d.disabled)return!1;a.keyCode!==c.ui.keyCode.SPACE&&a.keyCode!==c.ui.keyCode.ENTER||c(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+
" blur"+this.eventNamespace,function(){c(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===c.ui.keyCode.SPACE&&c(this).click()}));this._setOption("disabled",d.disabled);this._resetButton()},_determineButtonType:function(){var b,c;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?
(b=this.element.parents().last(),c="label[for='"+this.element.attr("id")+"']",this.buttonElement=b.find(c),this.buttonElement.length||(b=b.length?b.siblings():this.element.siblings(),this.buttonElement=b.filter(c),this.buttonElement.length||(this.buttonElement=b.find(c))),this.element.addClass("ui-helper-hidden-accessible"),(b=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",b)):this.buttonElement=this.element},widget:function(){return this.buttonElement},
_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-active ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(b,c){this._super(b,
c);"disabled"===b?(this.widget().toggleClass("ui-state-disabled",!!c),this.element.prop("disabled",!!c),c&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active"))):this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b);"radio"===this.type?k(this.element[0]).each(function(){c(this).is(":checked")?
c(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):c(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
d=c("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),a=this.options.icons,e=a.primary&&a.secondary,h=[];a.primary||a.secondary?(this.options.text&&h.push("ui-button-text-icon"+(e?"s":a.primary?"-primary":"-secondary")),a.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+a.primary+"'></span>"),a.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+a.secondary+"'></span>"),this.options.text||(h.push(e?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||b.attr("title",c.trim(d)))):h.push("ui-button-text-only");b.addClass(h.join(" "))}}});c.widget("ui.buttonset",{version:"1.11.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){"disabled"===b&&this.buttons.button("option",b,c);this._super(b,c)},refresh:function(){var b=
"rtl"===this.element.css("direction"),d=this.element.find(this.options.items),a=d.filter(":ui-button");d.not(":ui-button").button();a.button("refresh");this.buttons=d.map(function(){return c(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return c(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});
c.widget("ui.menu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0});this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled",
"true");this._on({"mousedown .ui-menu-item":function(b){b.preventDefault()},"click .ui-menu-item":function(b){var d=c(b.target);!this.mouseHandled&&d.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),d.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&c(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){if(!this.previousFilter){var d=
c(b.currentTarget);d.siblings(".ui-state-active").removeClass("ui-state-active");this.focus(b,d)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(b,c){var a=this.active||this.element.find(this.options.items).eq(0);c||this.focus(b,a)},blur:function(b){this._delay(function(){c.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(b){this._closeOnDocumentClick(b)&&this.collapseAll(b);
this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=
c(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){var d,a,e,h=!0;switch(b.keyCode){case c.ui.keyCode.PAGE_UP:this.previousPage(b);break;case c.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case c.ui.keyCode.HOME:this._move("first","first",b);break;case c.ui.keyCode.END:this._move("last","last",b);break;case c.ui.keyCode.UP:this.previous(b);break;case c.ui.keyCode.DOWN:this.next(b);break;
case c.ui.keyCode.LEFT:this.collapse(b);break;case c.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case c.ui.keyCode.ENTER:case c.ui.keyCode.SPACE:this._activate(b);break;case c.ui.keyCode.ESCAPE:this.collapse(b);break;default:h=!1,d=this.previousFilter||"",a=String.fromCharCode(b.keyCode),e=!1,clearTimeout(this.filterTimer),a===d?e=!0:a=d+a,d=this._filterMenuItems(a),d=e&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d,d.length||
(a=String.fromCharCode(b.keyCode),d=this._filterMenuItems(a)),d.length?(this.focus(b,d),this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter}h&&b.preventDefault()},_activate:function(b){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(b):this.select(b))},refresh:function(){var b,d=this,a=this.options.icons.submenu;b=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",
!!this.element.find(".ui-icon").length);b.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=c(this),h=b.parent(),d=c("<span>").addClass("ui-menu-icon ui-icon "+a).data("ui-menu-submenu-carat",!0);h.attr("aria-haspopup","true").prepend(d);b.attr("aria-labelledby",h.attr("id"))});b=b.add(this.element).find(this.options.items);b.not(".ui-menu-item").each(function(){var a=
c(this);d._isDivider(a)&&a.addClass("ui-widget-content ui-menu-divider")});b.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});b.filter(".ui-state-disabled").attr("aria-disabled","true");this.active&&!c.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(b,c){"icons"===b&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(c.submenu);
"disabled"===b&&this.element.toggleClass("ui-state-disabled",!!c).attr("aria-disabled",c);this._super(b,c)},focus:function(b,c){var a;this.blur(b,b&&"focus"===b.type);this._scrollIntoView(c);this.active=c.first();a=this.active.addClass("ui-state-focus").removeClass("ui-state-active");this.options.role&&this.element.attr("aria-activedescendant",a.attr("id"));this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");b&&"keydown"===b.type?this._close():this.timer=this._delay(function(){this._close()},
this.delay);a=c.children(".ui-menu");a.length&&b&&/^mouse/.test(b.type)&&this._startOpening(a);this.activeMenu=c.parent();this._trigger("focus",b,{item:c})},_scrollIntoView:function(b){var d,a,e;this._hasScroll()&&(d=parseFloat(c.css(this.activeMenu[0],"borderTopWidth"))||0,a=parseFloat(c.css(this.activeMenu[0],"paddingTop"))||0,d=b.offset().top-this.activeMenu.offset().top-d-a,a=this.activeMenu.scrollTop(),e=this.activeMenu.height(),b=b.outerHeight(),0>d?this.activeMenu.scrollTop(a+d):d+b>e&&this.activeMenu.scrollTop(a+
d-e+b))},blur:function(b,c){c||clearTimeout(this.timer);this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",b,{item:this.active}))},_startOpening:function(b){clearTimeout(this.timer);"true"===b.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(b)},this.delay))},_open:function(b){var d=c.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden",
"true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(d)},collapseAll:function(b,d){clearTimeout(this.timer);this.timer=this._delay(function(){var a=d?this.element:c(b&&b.target).closest(this.element.find(".ui-menu"));a.length||(a=this.element);this._close(a);this.blur(b);this.activeMenu=a},this.delay)},_close:function(b){b||(b=this.active?this.active.parent():this.element);b.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},
_closeOnDocumentClick:function(b){return!c(b.target).closest(".ui-menu").length},_isDivider:function(b){return!/[^\-\u2014\u2013\s]/.test(b.text())},collapse:function(b){var c=this.active&&this.active.parent().closest(".ui-menu-item",this.element);c&&c.length&&(this._close(),this.focus(b,c))},expand:function(b){var c=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();c&&c.length&&(this._open(c.parent()),this._delay(function(){this.focus(b,c)}))},next:function(b){this._move("next",
"first",b)},previous:function(b){this._move("prev","last",b)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(b,c,a){var e;this.active&&(e="first"===b||"last"===b?this.active["first"===b?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[b+"All"](".ui-menu-item").eq(0));e&&e.length&&this.active||(e=this.activeMenu.find(this.options.items)[c]());this.focus(a,
e)},nextPage:function(b){var d,a,e;this.active?this.isLastItem()||(this._hasScroll()?(a=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){d=c(this);return 0>d.offset().top-a-e}),this.focus(b,d)):this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(b)},previousPage:function(b){var d,a,e;this.active?this.isFirstItem()||(this._hasScroll()?(a=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){d=
c(this);return 0<d.offset().top-a+e}),this.focus(b,d)):this.focus(b,this.activeMenu.find(this.options.items).first())):this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||c(b.target).closest(".ui-menu-item");var d={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0);this._trigger("select",b,d)},_filterMenuItems:function(b){b=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var d=
new RegExp("^"+b,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return d.test(c.trim(c(this).text()))})}});c.widget("ui.tabs",{version:"1.11.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var b=/#.*$/;return function(c){var a,e;c=c.cloneNode(!1);a=c.href.replace(b,"");e=location.href.replace(b,"");try{a=decodeURIComponent(a)}catch(d){}try{e=
decodeURIComponent(e)}catch(f){}return 1<c.hash.length&&a===e}}(),_create:function(){var b=this,d=this.options;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",d.collapsible);this._processTabs();d.active=this._initialActive();c.isArray(d.disabled)&&(d.disabled=c.unique(d.disabled.concat(c.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?
this._findActive(d.active):c();this._refresh();this.active.length&&this.load(d.active)},_initialActive:function(){var b=this.options.active,d=this.options.collapsible,a=location.hash.substring(1);null===b&&(a&&this.tabs.each(function(e,d){if(c(d).attr("aria-controls")===a)return b=e,!1}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===b||-1===b)&&(b=this.tabs.length?0:!1);!1!==b&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=d?!1:0));!d&&!1===b&&this.anchors.length&&(b=
0);return b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):c()}},_tabKeydown:function(b){var d=c(this.document[0].activeElement).closest("li"),a=this.tabs.index(d),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case c.ui.keyCode.RIGHT:case c.ui.keyCode.DOWN:a++;break;case c.ui.keyCode.UP:case c.ui.keyCode.LEFT:e=!1;a--;break;case c.ui.keyCode.END:a=this.anchors.length-1;break;case c.ui.keyCode.HOME:a=0;break;case c.ui.keyCode.SPACE:b.preventDefault();
clearTimeout(this.activating);this._activate(a);return;case c.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(a===this.options.active?!1:a);return;default:return}b.preventDefault();clearTimeout(this.activating);a=this._focusNextTab(a,e);b.ctrlKey||(d.attr("aria-selected","false"),this.tabs.eq(a).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",a)},this.delay))}},_panelKeydown:function(b){!this._handlePageNav(b)&&b.ctrlKey&&b.keyCode===
c.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){if(b.altKey&&b.keyCode===c.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(b.altKey&&b.keyCode===c.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(b,d){function a(){b>e&&(b=0);0>b&&(b=e);return b}for(var e=this.tabs.length-1;-1!==c.inArray(a(),this.options.disabled);)b=d?b+1:b-1;return b},_focusNextTab:function(b,
c){b=this._findNextTab(b,c);this.tabs.eq(b).focus();return b},_setOption:function(b,c){"active"===b?this._activate(c):"disabled"===b?this._setupDisabled(c):(this._super(b,c),"collapsible"===b&&(this.element.toggleClass("ui-tabs-collapsible",c),c||!1!==this.options.active||this._activate(0)),"event"===b&&this._setupEvents(c),"heightStyle"===b&&this._setupHeightStyle(c))},_sanitizeSelector:function(b){return b?b.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,
d=this.tablist.children(":has(a[href])");b.disabled=c.map(d.filter(".ui-state-disabled"),function(a){return d.index(a)});this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!c.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=c()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=c());this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);
this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",
0)},_processTabs:function(){var b=this,d=this.tabs,a=this.anchors,e=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(a){c(this).is(".ui-state-disabled")&&a.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){c(this).closest("li").is(".ui-state-disabled")&&this.blur()});this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",
tabIndex:-1});this.anchors=this.tabs.map(function(){return c("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=c();this.anchors.each(function(a,e){var d,g,f=c(e).uniqueId().attr("id"),k=c(e).closest("li"),m=k.attr("aria-controls");b._isLocal(e)?(d=e.hash,g=d.substring(1),d=b.element.find(b._sanitizeSelector(d))):(g=k.attr("aria-controls")||c({}).uniqueId()[0].id,d=b.element.find("#"+g),d.length||(d=b._createPanel(g),d.insertAfter(b.panels[a-1]||b.tablist)),
d.attr("aria-live","polite"));d.length&&(b.panels=b.panels.add(d));m&&k.data("ui-tabs-aria-controls",m);k.attr({"aria-controls":g,"aria-labelledby":f});d.attr("aria-labelledby",f)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel");d&&(this._off(d.not(this.tabs)),this._off(a.not(this.anchors)),this._off(e.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(b){return c("<div>").attr("id",
b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){c.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var d=0,a;a=this.tabs[d];d++)!0===b||-1!==c.inArray(d,b)?c(a).addClass("ui-state-disabled").attr("aria-disabled","true"):c(a).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var d={};b&&c.each(b.split(" "),function(a,b){d[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));
this._on(!0,this.anchors,{click:function(a){a.preventDefault()}});this._on(this.anchors,d);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var d,a=this.element.parent();"fill"===b?(d=a.height(),d-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var a=c(this),b=a.css("position");"absolute"!==b&&"fixed"!==b&&(d-=a.outerHeight(!0))}),
this.element.children().not(this.panels).each(function(){d-=c(this).outerHeight(!0)}),this.panels.each(function(){c(this).height(Math.max(0,d-c(this).innerHeight()+c(this).height()))}).css("overflow","auto")):"auto"===b&&(d=0,this.panels.each(function(){d=Math.max(d,c(this).height("").height())}).height(d))},_eventHandler:function(b){var d=this.options,a=this.active,e=c(b.currentTarget).closest("li"),h=e[0]===a[0],f=h&&d.collapsible,k=f?c():this._getPanelForTab(e),m=a.length?this._getPanelForTab(a):
c(),a={oldTab:a,oldPanel:m,newTab:f?c():e,newPanel:k};b.preventDefault();e.hasClass("ui-state-disabled")||e.hasClass("ui-tabs-loading")||this.running||h&&!d.collapsible||!1===this._trigger("beforeActivate",b,a)||(d.active=f?!1:this.tabs.index(e),this.active=h?c():e,this.xhr&&this.xhr.abort(),m.length||k.length||c.error("jQuery UI Tabs: Mismatching fragment identifier."),k.length&&this.load(this.tabs.index(e),b),this._toggle(b,a))},_toggle:function(b,d){function a(){h.running=!1;h._trigger("activate",
b,d)}function e(){d.newTab.closest("li").addClass("ui-tabs-active ui-state-active");f.length&&h.options.show?h._show(f,h.options.show,a):(f.show(),a())}var h=this,f=d.newPanel,k=d.oldPanel;this.running=!0;k.length&&this.options.hide?this._hide(k,this.options.hide,function(){d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");e()}):(d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),k.hide(),e());k.attr("aria-hidden","true");d.oldTab.attr({"aria-selected":"false",
"aria-expanded":"false"});f.length&&k.length?d.oldTab.attr("tabIndex",-1):f.length&&this.tabs.filter(function(){return 0===c(this).attr("tabIndex")}).attr("tabIndex",-1);f.attr("aria-hidden","false");d.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),b=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:b,currentTarget:b,preventDefault:c.noop}))},_findActive:function(b){return!1===
b?c():this.tabs.eq(b)},_getIndex:function(b){"string"===typeof b&&(b=this.anchors.index(this.anchors.filter("[href$='"+b+"']")));return b},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();
this.tablist.unbind(this.eventNamespace);this.tabs.add(this.panels).each(function(){c.data(this,"ui-tabs-destroy")?c(this).remove():c(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var b=
c(this),d=b.data("ui-tabs-aria-controls");d?b.attr("aria-controls",d).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var d=this.options.disabled;!1!==d&&(void 0===b?d=!1:(b=this._getIndex(b),d=c.isArray(d)?c.map(d,function(a){return a!==b?a:null}):c.map(this.tabs,function(a,c){return c!==b?c:null})),this._setupDisabled(d))},disable:function(b){var d=this.options.disabled;
if(!0!==d){if(void 0===b)d=!0;else{b=this._getIndex(b);if(-1!==c.inArray(b,d))return;d=c.isArray(d)?c.merge([b],d).sort():[b]}this._setupDisabled(d)}},load:function(b,d){b=this._getIndex(b);var a=this,e=this.tabs.eq(b),h=e.find(".ui-tabs-anchor"),f=this._getPanelForTab(e),k={tab:e,panel:f};this._isLocal(h[0])||(this.xhr=c.ajax(this._ajaxSettings(h,d,k)))&&"canceled"!==this.xhr.statusText&&(e.addClass("ui-tabs-loading"),f.attr("aria-busy","true"),this.xhr.success(function(b){setTimeout(function(){f.html(b);
a._trigger("load",d,k)},1)}).complete(function(b,c){setTimeout(function(){"abort"===c&&a.panels.stop(!1,!0);e.removeClass("ui-tabs-loading");f.removeAttr("aria-busy");b===a.xhr&&delete a.xhr},1)}))},_ajaxSettings:function(b,d,a){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",d,c.extend({jqXHR:b,ajaxSettings:f},a))}}},_getPanelForTab:function(b){b=c(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+b))}});c.widget("ui.tooltip",
{version:"1.11.2",options:{content:function(){var b=c(this).attr("title")||"";return c("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(b,d){var a=(b.attr("aria-describedby")||"").split(/\s+/);a.push(d);b.data("ui-tooltip-id",d).attr("aria-describedby",c.trim(a.join(" ")))},_removeDescribedBy:function(b){var d=b.data("ui-tooltip-id"),
a=(b.attr("aria-describedby")||"").split(/\s+/),d=c.inArray(d,a);-1!==d&&a.splice(d,1);b.removeData("ui-tooltip-id");(a=c.trim(a.join(" ")))?b.attr("aria-describedby",a):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable();this.liveRegion=c("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},
_setOption:function(b,d){var a=this;"disabled"===b?(this[d?"_disable":"_enable"](),this.options[b]=d):(this._super(b,d),"content"===b&&c.each(this.tooltips,function(b,c){a._updateContent(c.element)}))},_disable:function(){var b=this;c.each(this.tooltips,function(d,a){var e=c.Event("blur");e.target=e.currentTarget=a.element[0];b.close(e,!0)});this.element.find(this.options.items).addBack().each(function(){var b=c(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).removeAttr("title")})},
_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=c(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var d=this,a=c(b?b.target:this.element).closest(this.options.items);a.length&&!a.data("ui-tooltip-id")&&(a.attr("title")&&a.data("ui-tooltip-title",a.attr("title")),a.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&a.parents().each(function(){var a=c(this),b;a.data("ui-tooltip-open")&&(b=c.Event("blur"),b.target=
b.currentTarget=this,d.close(b,!0));a.attr("title")&&(a.uniqueId(),d.parents[this.id]={element:this,title:a.attr("title")},a.attr("title",""))}),this._updateContent(a,b))},_updateContent:function(b,c){var a;a=this.options.content;var e=this,d=c?c.type:null;if("string"===typeof a)return this._open(c,b,a);(a=a.call(b[0],function(a){b.data("ui-tooltip-open")&&e._delay(function(){c&&(c.type=d);this._open(c,b,a)})}))&&this._open(c,b,a)},_open:function(b,d,a){function e(a){m.of=a;f.is(":hidden")||f.position(m)}
var h,f,k,m=c.extend({},this.options.position);a&&((h=this._find(d))?h.tooltip.find(".ui-tooltip-content").html(a):(d.is("[title]")&&(b&&"mouseover"===b.type?d.attr("title",""):d.removeAttr("title")),h=this._tooltip(d),f=h.tooltip,this._addDescribedBy(d,f.attr("id")),f.find(".ui-tooltip-content").html(a),this.liveRegion.children().hide(),a.clone&&(a=a.clone(),a.removeAttr("id").find("[id]").removeAttr("id")),c("<div>").html(a).appendTo(this.liveRegion),this.options.track&&b&&/^mouse/.test(b.type)?
(this._on(this.document,{mousemove:e}),e(b)):f.position(c.extend({of:d},this.options.position)),f.hide(),this._show(f,this.options.show),this.options.show&&this.options.show.delay&&(k=this.delayedShow=setInterval(function(){f.is(":visible")&&(e(m.of),clearInterval(k))},c.fx.interval)),this._trigger("open",b,{tooltip:f}),a={keyup:function(a){a.keyCode===c.ui.keyCode.ESCAPE&&(a=c.Event(a),a.currentTarget=d[0],this.close(a,!0))}},d[0]!==this.element[0]&&(a.remove=function(){this._removeTooltip(f)}),
b&&"mouseover"!==b.type||(a.mouseleave="close"),b&&"focusin"!==b.type||(a.focusout="close"),this._on(!0,d,a)))},close:function(b){var d,a=this,e=c(b?b.currentTarget:this.element),h=this._find(e);h&&(d=h.tooltip,h.closing||(clearInterval(this.delayedShow),e.data("ui-tooltip-title")&&!e.attr("title")&&e.attr("title",e.data("ui-tooltip-title")),this._removeDescribedBy(e),h.hiding=!0,d.stop(!0),this._hide(d,this.options.hide,function(){a._removeTooltip(c(this))}),e.removeData("ui-tooltip-open"),this._off(e,
"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&c.each(this.parents,function(b,e){c(e.element).attr("title",e.title);delete a.parents[b]}),h.closing=!0,this._trigger("close",b,{tooltip:d}),h.hiding||(h.closing=!1)))},_tooltip:function(b){var d=c("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),a=d.uniqueId().attr("id");c("<div>").addClass("ui-tooltip-content").appendTo(d);
d.appendTo(this.document[0].body);return this.tooltips[a]={element:b,tooltip:d}},_find:function(b){return(b=b.data("ui-tooltip-id"))?this.tooltips[b]:null},_removeTooltip:function(b){b.remove();delete this.tooltips[b.attr("id")]},_destroy:function(){var b=this;c.each(this.tooltips,function(d,a){var e=c.Event("blur"),h=a.element;e.target=e.currentTarget=h[0];b.close(e,!0);c("#"+d).remove();h.data("ui-tooltip-title")&&(h.attr("title")||h.attr("title",h.data("ui-tooltip-title")),h.removeData("ui-tooltip-title"))});
this.liveRegion.remove()}})});/*
   Copyright 2008-2014 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net
*/
(function(c,l,f){(function(c){"function"===typeof define&&define.amd?define("datatables",["jquery"],c):"object"===typeof exports?c(require("jquery")):jQuery&&!jQuery.fn.dataTable&&c(jQuery)})(function(d){function q(a){var b,c,e={};d.each(a,function(d,h){(b=d.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" ")&&(c=d.replace(b[0],b[2].toLowerCase()),e[c]=d,"o"===b[1]&&q(a[d]))});a._hungarianMap=e}function m(a,b,c){a._hungarianMap||q(a);var e;d.each(b,function(h,g){e=a._hungarianMap[h];
e===f||!c&&b[e]!==f||("o"===e.charAt(0)?(b[e]||(b[e]={}),d.extend(!0,b[e],b[h]),m(a[e],b[e],c)):b[e]=b[h])})}function n(a){var b=A.defaults.oLanguage,c=a.sZeroRecords;!a.sEmptyTable&&c&&"No data available in table"===b.sEmptyTable&&ma(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&c&&"Loading..."===b.sLoadingRecords&&ma(a,a,"sZeroRecords","sLoadingRecords");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&Xa(a)}function r(a){fa(a,"ordering","bSort");fa(a,"orderMulti","bSortMulti");
fa(a,"orderClasses","bSortClasses");fa(a,"orderCellsTop","bSortCellsTop");fa(a,"order","aaSorting");fa(a,"orderFixed","aaSortingFixed");fa(a,"paging","bPaginate");fa(a,"pagingType","sPaginationType");fa(a,"pageLength","iDisplayLength");fa(a,"searching","bFilter");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&m(A.models.oSearch,a[b])}function k(a){fa(a,"orderable","bSortable");fa(a,"orderData","aDataSort");fa(a,"orderSequence","asSorting");fa(a,"orderDataType","sortDataType")}function b(a){a=
a.oBrowser;var b=d("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(d("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(d('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),c=b.find(".test");a.bScrollOversize=100===c[0].offsetWidth;a.bScrollbarLeft=1!==c.offset().left;b.remove()}function g(a,b,c,e,d,h){var g,k=!1;c!==f&&(g=c,k=!0);for(;e!==d;)a.hasOwnProperty(e)&&(g=k?b(g,a[e],e,a):a[e],k=!0,e+=h);return g}
function a(a,b){var c=A.defaults.column,h=a.aoColumns.length,c=d.extend({},A.models.oColumn,c,{nTh:b?b:l.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[h],mData:c.mData?c.mData:h,idx:h});a.aoColumns.push(c);c=a.aoPreSearchCols;c[h]=d.extend({},A.models.oSearch,c[h]);e(a,h,null)}function e(a,b,c){b=a.aoColumns[b];var e=a.oClasses,h=d(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=h.attr("width")||null;var g=(h.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);
g&&(b.sWidthOrig=g[1])}c!==f&&null!==c&&(k(c),m(A.defaults.column,c),c.mDataProp===f||c.mData||(c.mData=c.mDataProp),c.sType&&(b._sManualType=c.sType),c.className&&!c.sClass&&(c.sClass=c.className),d.extend(b,c),ma(b,c,"sWidth","sWidthOrig"),"number"===typeof c.iDataSort&&(b.aDataSort=[c.iDataSort]),ma(b,c,"aDataSort"));var n=b.mData,q=K(n),p=b.mRender?K(b.mRender):null;c=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};b._bAttrSrc=d.isPlainObject(n)&&(c(n.sort)||c(n.type)||c(n.filter));
b.fnGetData=function(a,b,c){var e=q(a,b,f,c);return p&&b?p(e,b,a,c):e};b.fnSetData=function(a,b,c){return P(n)(a,b,c)};"number"!==typeof n&&(a._rowReadObject=!0);a.oFeatures.bSort||(b.bSortable=!1,h.addClass(e.sSortableNone));a=-1!==d.inArray("asc",b.asSorting);c=-1!==d.inArray("desc",b.asSorting);b.bSortable&&(a||c)?a&&!c?(b.sSortingClass=e.sSortableAsc,b.sSortingClassJUI=e.sSortJUIAscAllowed):!a&&c?(b.sSortingClass=e.sSortableDesc,b.sSortingClassJUI=e.sSortJUIDescAllowed):(b.sSortingClass=e.sSortable,
b.sSortingClassJUI=e.sSortJUI):(b.sSortingClass=e.sSortableNone,b.sSortingClassJUI="")}function h(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;wa(a);for(var c=0,e=b.length;c<e;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;""===b.sY&&""===b.sX||Qa(a);T(a,null,"column-sizing",[a])}function u(a,b){var c=v(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function w(a,b){var c=v(a,"bVisible"),c=d.inArray(b,c);return-1!==c?c:null}function y(a){return v(a,"bVisible").length}function v(a,b){var c=
[];d.map(a.aoColumns,function(a,e){a[b]&&c.push(e)});return c}function x(a){var b=a.aoColumns,c=a.aoData,e=A.ext.type.detect,d,h,g,k,m,n,q,p,l;d=0;for(h=b.length;d<h;d++)if(q=b[d],l=[],!q.sType&&q._sManualType)q.sType=q._sManualType;else if(!q.sType){g=0;for(k=e.length;g<k;g++){m=0;for(n=c.length;m<n;m++){l[m]===f&&(l[m]=D(a,m,d,"type"));p=e[g](l[m],a);if(!p&&g!==e.length-1)break;if("html"===p)break}if(p){q.sType=p;break}}q.sType||(q.sType="string")}}function z(b,c,e,h){var g,k,m,n,q,p,l=b.aoColumns;
if(c)for(g=c.length-1;0<=g;g--){p=c[g];var u=p.targets!==f?p.targets:p.aTargets;d.isArray(u)||(u=[u]);k=0;for(m=u.length;k<m;k++)if("number"===typeof u[k]&&0<=u[k]){for(;l.length<=u[k];)a(b);h(u[k],p)}else if("number"===typeof u[k]&&0>u[k])h(l.length+u[k],p);else if("string"===typeof u[k])for(n=0,q=l.length;n<q;n++)("_all"==u[k]||d(l[n].nTh).hasClass(u[k]))&&h(n,p)}if(e)for(g=0,b=e.length;g<b;g++)h(g,e[g])}function B(a,b,c,e){var h=a.aoData.length,f=d.extend(!0,{},A.models.oRow,{src:c?"dom":"data"});
f._aData=b;a.aoData.push(f);b=a.aoColumns;for(var f=0,g=b.length;f<g;f++)c&&G(a,h,f,D(a,h,f)),b[f].sType=null;a.aiDisplayMaster.push(h);!c&&a.oFeatures.bDeferRender||ka(a,h,c,e);return h}function I(a,b){var c;b instanceof d||(b=d(b));return b.map(function(b,e){c=U(a,e);return B(a,c.data,e,c.cells)})}function D(a,b,c,e){var d=a.iDraw,h=a.aoColumns[c],g=a.aoData[b]._aData,k=h.sDefaultContent;c=h.fnGetData(g,e,{settings:a,row:b,col:c});if(c===f)return a.iDrawError!=d&&null===k&&(Ga(a,0,"Requested unknown parameter "+
("function"==typeof h.mData?"{function}":"'"+h.mData+"'")+" for row "+b,4),a.iDrawError=d),k;if((c===g||null===c)&&null!==k)c=k;else if("function"===typeof c)return c.call(g);return null===c&&"display"==e?"":c}function G(a,b,c,e){a.aoColumns[c].fnSetData(a.aoData[b]._aData,e,{settings:a,row:b,col:c})}function V(a){return d.map(a.match(/(\\.|[^\.])+/g),function(a){return a.replace(/\\./g,".")})}function K(a){if(d.isPlainObject(a)){var b={};d.each(a,function(a,c){c&&(b[a]=K(c))});return function(a,
c,e,d){var h=b[c]||b._;return h!==f?h(a,c,e,d):a}}if(null===a)return function(a){return a};if("function"===typeof a)return function(b,c,e,d){return a(b,c,e,d)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b,c){return b[a]};var c=function(a,b,e){var d,h;if(""!==e){h=V(e);for(var t=0,g=h.length;t<g;t++){e=h[t].match(Ya);d=h[t].match(Ma);if(e){h[t]=h[t].replace(Ya,"");""!==h[t]&&(a=a[h[t]]);d=[];h.splice(0,t+1);h=h.join(".");t=0;for(g=a.length;t<
g;t++)d.push(c(a[t],b,h));a=e[0].substring(1,e[0].length-1);a=""===a?d:d.join(a);break}else if(d){h[t]=h[t].replace(Ma,"");a=a[h[t]]();continue}if(null===a||a[h[t]]===f)return f;a=a[h[t]]}}return a};return function(b,e){return c(b,e,a)}}function P(a){if(d.isPlainObject(a))return P(a._);if(null===a)return function(){};if("function"===typeof a)return function(b,c,e){a(b,"set",c,e)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b,c){b[a]=c};var b=
function(a,c,e){e=V(e);var d;d=e[e.length-1];for(var h,t,g=0,k=e.length-1;g<k;g++){h=e[g].match(Ya);t=e[g].match(Ma);if(h){e[g]=e[g].replace(Ya,"");a[e[g]]=[];d=e.slice();d.splice(0,g+1);h=d.join(".");t=0;for(k=c.length;t<k;t++)d={},b(d,c[t],h),a[e[g]].push(d);return}t&&(e[g]=e[g].replace(Ma,""),a=a[e[g]](c));if(null===a[e[g]]||a[e[g]]===f)a[e[g]]={};a=a[e[g]]}if(d.match(Ma))a[d.replace(Ma,"")](c);else a[d.replace(Ya,"")]=c};return function(c,e){return b(c,e,a)}}function N(a){return la(a.aoData,"_aData")}
function L(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0}function X(a,b,c){for(var e=-1,d=0,h=a.length;d<h;d++)a[d]==b?e=d:a[d]>b&&a[d]--; -1!=e&&c===f&&a.splice(e,1)}function ca(a,b,c,e){var d=a.aoData[b],h,g=function(c,e){for(;c.childNodes.length;)c.removeChild(c.firstChild);c.innerHTML=D(a,b,e,"display")};if("dom"!==c&&(c&&"auto"!==c||"dom"!==d.src)){var k=d.anCells;if(k)if(e!==f)g(k[e],e);else for(c=0,h=k.length;c<h;c++)g(k[c],c)}else d._aData=U(a,d,e,e===f?f:d._aData).data;
d._aSortData=null;d._aFilterData=null;g=a.aoColumns;if(e!==f)g[e].sType=null;else{c=0;for(h=g.length;c<h;c++)g[c].sType=null;oa(d)}}function U(a,b,c,e){var h=[],g=b.firstChild,k,m=0,n,q=a.aoColumns,p=a._rowReadObject;e=e||p?{}:[];var l=function(a,b){if("string"===typeof a){var c=a.indexOf("@");-1!==c&&(c=a.substring(c+1),P(a)(e,b.getAttribute(c)))}};a=function(a){if(c===f||c===m)k=q[m],n=d.trim(a.innerHTML),k&&k._bAttrSrc?(P(k.mData._)(e,n),l(k.mData.sort,a),l(k.mData.type,a),l(k.mData.filter,a)):
p?(k._setter||(k._setter=P(k.mData)),k._setter(e,n)):e[m]=n;m++};if(g)for(;g;){b=g.nodeName.toUpperCase();if("TD"==b||"TH"==b)a(g),h.push(g);g=g.nextSibling}else for(h=b.anCells,g=0,b=h.length;g<b;g++)a(h[g]);return{data:e,cells:h}}function ka(a,b,c,e){var d=a.aoData[b],h=d._aData,f=[],g,k,m,n,q;if(null===d.nTr){g=c||l.createElement("tr");d.nTr=g;d.anCells=f;g._DT_RowIndex=b;oa(d);n=0;for(q=a.aoColumns.length;n<q;n++){m=a.aoColumns[n];k=c?e[n]:l.createElement(m.sCellType);f.push(k);if(!c||m.mRender||
m.mData!==n)k.innerHTML=D(a,b,n,"display");m.sClass&&(k.className+=" "+m.sClass);m.bVisible&&!c?g.appendChild(k):!m.bVisible&&c&&k.parentNode.removeChild(k);m.fnCreatedCell&&m.fnCreatedCell.call(a.oInstance,k,D(a,b,n),h,b,n)}T(a,"aoRowCreatedCallback",null,[g,h,b])}d.nTr.setAttribute("role","row")}function oa(a){var b=a.nTr,c=a._aData;if(b){c.DT_RowId&&(b.id=c.DT_RowId);if(c.DT_RowClass){var e=c.DT_RowClass.split(" ");a.__rowc=a.__rowc?hb(a.__rowc.concat(e)):e;d(b).removeClass(a.__rowc.join(" ")).addClass(c.DT_RowClass)}c.DT_RowData&&
d(b).data(c.DT_RowData)}}function za(a){var b,c,e,h,f,g=a.nTHead,k=a.nTFoot,m=0===d("th, td",g).length,n=a.oClasses,q=a.aoColumns;m&&(h=d("<tr/>").appendTo(g));b=0;for(c=q.length;b<c;b++)f=q[b],e=d(f.nTh).addClass(f.sClass),m&&e.appendTo(h),a.oFeatures.bSort&&(e.addClass(f.sSortingClass),!1!==f.bSortable&&(e.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),fb(a,f.nTh,b))),f.sTitle!=e.html()&&e.html(f.sTitle),gb(a,"header")(a,e,f,n);m&&da(a.aoHeader,g);d(g).find(">tr").attr("role","row");
d(g).find(">tr>th, >tr>td").addClass(n.sHeaderTH);d(k).find(">tr>th, >tr>td").addClass(n.sFooterTH);if(null!==k)for(a=a.aoFooter[0],b=0,c=a.length;b<c;b++)f=q[b],f.nTf=a[b].cell,f.sClass&&d(f.nTf).addClass(f.sClass)}function ha(a,b,c){var e,h,g,k=[],m=[],n=a.aoColumns.length,q;if(b){c===f&&(c=!1);e=0;for(h=b.length;e<h;e++){k[e]=b[e].slice();k[e].nTr=b[e].nTr;for(g=n-1;0<=g;g--)a.aoColumns[g].bVisible||c||k[e].splice(g,1);m.push([])}e=0;for(h=k.length;e<h;e++){if(a=k[e].nTr)for(;g=a.firstChild;)a.removeChild(g);
g=0;for(b=k[e].length;g<b;g++)if(q=n=1,m[e][g]===f){a.appendChild(k[e][g].cell);for(m[e][g]=1;k[e+n]!==f&&k[e][g].cell==k[e+n][g].cell;)m[e+n][g]=1,n++;for(;k[e][g+q]!==f&&k[e][g].cell==k[e][g+q].cell;){for(c=0;c<n;c++)m[e+c][g+q]=1;q++}d(k[e][g].cell).attr("rowspan",n).attr("colspan",q)}}}}function ra(a){var b=T(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==d.inArray(!1,b))S(a,!1);else{var b=[],c=0,e=a.asStripeClasses,h=e.length,g=a.oLanguage,k=a.iInitDisplayStart,m="ssp"==ia(a),n=a.aiDisplay;a.bDrawing=
!0;k!==f&&-1!==k&&(a._iDisplayStart=m?k:k>=a.fnRecordsDisplay()?0:k,a.iInitDisplayStart=-1);var k=a._iDisplayStart,q=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,S(a,!1);else if(!m)a.iDraw++;else if(!a.bDestroying&&!pa(a))return;if(0!==n.length)for(g=m?a.aoData.length:q,m=m?0:k;m<g;m++){var p=n[m],l=a.aoData[p];null===l.nTr&&ka(a,p);p=l.nTr;if(0!==h){var u=e[c%h];l._sRowStripe!=u&&(d(p).removeClass(l._sRowStripe).addClass(u),l._sRowStripe=u)}T(a,"aoRowCallback",null,[p,l._aData,
c,m]);b.push(p);c++}else c=g.sZeroRecords,1==a.iDraw&&"ajax"==ia(a)?c=g.sLoadingRecords:g.sEmptyTable&&0===a.fnRecordsTotal()&&(c=g.sEmptyTable),b[0]=d("<tr/>",{"class":h?e[0]:""}).append(d("<td />",{valign:"top",colSpan:y(a),"class":a.oClasses.sRowEmpty}).html(c))[0];T(a,"aoHeaderCallback","header",[d(a.nTHead).children("tr")[0],N(a),k,q,n]);T(a,"aoFooterCallback","footer",[d(a.nTFoot).children("tr")[0],N(a),k,q,n]);e=d(a.nTBody);e.children().detach();e.append(d(b));T(a,"aoDrawCallback","draw",[a]);
a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function sa(a,b){var c=a.oFeatures,e=c.bFilter;c.bSort&&Jb(a);e?J(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;ra(a);a._drawHold=!1}function ta(a){var b=a.oClasses,c=d(a.nTable),c=d("<div/>").insertBefore(c),e=a.oFeatures,h=d("<div/>",{id:a.sTableId+"_wrapper","class":b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});a.nHolding=c[0];a.nTableWrapper=h[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var f=
a.sDom.split(""),g,k,m,n,q,p,l=0;l<f.length;l++){g=null;k=f[l];if("<"==k){m=d("<div/>")[0];n=f[l+1];if("'"==n||'"'==n){q="";for(p=2;f[l+p]!=n;)q+=f[l+p],p++;"H"==q?q=b.sJUIHeader:"F"==q&&(q=b.sJUIFooter);-1!=q.indexOf(".")?(n=q.split("."),m.id=n[0].substr(1,n[0].length-1),m.className=n[1]):"#"==q.charAt(0)?m.id=q.substr(1,q.length-1):m.className=q;l+=p}h.append(m);h=d(m)}else if(">"==k)h=h.parent();else if("l"==k&&e.bPaginate&&e.bLengthChange)g=lb(a);else if("f"==k&&e.bFilter)g=W(a);else if("r"==
k&&e.bProcessing)g=M(a);else if("t"==k)g=Bb(a);else if("i"==k&&e.bInfo)g=Ab(a);else if("p"==k&&e.bPaginate)g=Wa(a);else if(0!==A.ext.feature.length)for(m=A.ext.feature,p=0,n=m.length;p<n;p++)if(k==m[p].cFeature){g=m[p].fnInit(a);break}g&&(m=a.aanFeatures,m[k]||(m[k]=[]),m[k].push(g),h.append(g))}c.replaceWith(h)}function da(a,b){var c=d(b).children("tr"),e,h,f,g,k,m,n,q,p,l;a.splice(0,a.length);f=0;for(m=c.length;f<m;f++)a.push([]);f=0;for(m=c.length;f<m;f++)for(e=c[f],h=e.firstChild;h;){if("TD"==
h.nodeName.toUpperCase()||"TH"==h.nodeName.toUpperCase()){q=1*h.getAttribute("colspan");p=1*h.getAttribute("rowspan");q=q&&0!==q&&1!==q?q:1;p=p&&0!==p&&1!==p?p:1;g=0;for(k=a[f];k[g];)g++;n=g;l=1===q?!0:!1;for(k=0;k<q;k++)for(g=0;g<p;g++)a[f+g][n+k]={cell:h,unique:l},a[f+g].nTr=e}h=h.nextSibling}}function Ha(a,b,c){var e=[];c||(c=a.aoHeader,b&&(c=[],da(c,b)));b=0;for(var d=c.length;b<d;b++)for(var h=0,f=c[b].length;h<f;h++)!c[b][h].unique||e[h]&&a.bSortCellsTop||(e[h]=c[b][h].cell);return e}function Ca(a,
b,c){T(a,"aoServerParams","serverParams",[b]);if(b&&d.isArray(b)){var e={},h=/(.*?)\[\]$/;d.each(b,function(a,b){var c=b.name.match(h);c?(c=c[0],e[c]||(e[c]=[]),e[c].push(b.value)):e[b.name]=b.value});b=e}var f,g=a.ajax,k=a.oInstance;if(d.isPlainObject(g)&&g.data){f=g.data;var m=d.isFunction(f)?f(b):f;b=d.isFunction(f)&&m?m:d.extend(!0,b,m);delete g.data}m={data:b,success:function(b){var e=b.error||b.sError;e&&a.oApi._fnLog(a,0,e);a.json=b;T(a,null,"xhr",[a,b]);c(b)},dataType:"json",cache:!1,type:a.sServerMethod,
error:function(b,c,e){e=a.oApi._fnLog;"parsererror"==c?e(a,0,"Invalid JSON response",1):4===b.readyState&&e(a,0,"Ajax error",7);S(a,!1)}};a.oAjaxData=b;T(a,null,"preXhr",[a,b]);a.fnServerData?a.fnServerData.call(k,a.sAjaxSource,d.map(b,function(a,b){return{name:b,value:a}}),c,a):a.sAjaxSource||"string"===typeof g?a.jqXHR=d.ajax(d.extend(m,{url:g||a.sAjaxSource})):d.isFunction(g)?a.jqXHR=g.call(k,b,c,a):(a.jqXHR=d.ajax(d.extend(m,g)),g.data=f)}function pa(a){return a.bAjaxDataGet?(a.iDraw++,S(a,!0),
Ca(a,xa(a),function(b){Db(a,b)}),!1):!0}function xa(a){var b=a.aoColumns,c=b.length,e=a.oFeatures,h=a.oPreviousSearch,f=a.aoPreSearchCols,g,k=[],m,n,q,p=Ja(a);g=a._iDisplayStart;m=!1!==e.bPaginate?a._iDisplayLength:-1;var l=function(a,b){k.push({name:a,value:b})};l("sEcho",a.iDraw);l("iColumns",c);l("sColumns",la(b,"sName").join(","));l("iDisplayStart",g);l("iDisplayLength",m);var u={draw:a.iDraw,columns:[],order:[],start:g,length:m,search:{value:h.sSearch,regex:h.bRegex}};for(g=0;g<c;g++)n=b[g],
q=f[g],m="function"==typeof n.mData?"function":n.mData,u.columns.push({data:m,name:n.sName,searchable:n.bSearchable,orderable:n.bSortable,search:{value:q.sSearch,regex:q.bRegex}}),l("mDataProp_"+g,m),e.bFilter&&(l("sSearch_"+g,q.sSearch),l("bRegex_"+g,q.bRegex),l("bSearchable_"+g,n.bSearchable)),e.bSort&&l("bSortable_"+g,n.bSortable);e.bFilter&&(l("sSearch",h.sSearch),l("bRegex",h.bRegex));e.bSort&&(d.each(p,function(a,b){u.order.push({column:b.col,dir:b.dir});l("iSortCol_"+a,b.col);l("sSortDir_"+
a,b.dir)}),l("iSortingCols",p.length));b=A.ext.legacy.ajax;return null===b?a.sAjaxSource?k:u:b?k:u}function Db(a,b){var c=function(a,c){return b[a]!==f?b[a]:b[c]},e=c("sEcho","draw"),d=c("iTotalRecords","recordsTotal"),c=c("iTotalDisplayRecords","recordsFiltered");if(e){if(1*e<a.iDraw)return;a.iDraw=1*e}L(a);a._iRecordsTotal=parseInt(d,10);a._iRecordsDisplay=parseInt(c,10);e=Da(a,b);d=0;for(c=e.length;d<c;d++)B(a,e[d]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;ra(a);a._bInitComplete||
eb(a,b);a.bAjaxDataGet=!0;S(a,!1)}function Da(a,b){var c=d.isPlainObject(a.ajax)&&a.ajax.dataSrc!==f?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===c?b.aaData||b[c]:""!==c?K(c)(b):b}function W(a){var b=a.oClasses,c=a.sTableId,e=a.oLanguage,h=a.oPreviousSearch,f=a.aanFeatures,g='<input type="search" class="'+b.sFilterInput+'"/>',k=e.sSearch,k=k.match(/_INPUT_/)?k.replace("_INPUT_",g):k+g,b=d("<div/>",{id:f.f?null:c+"_filter","class":b.sFilter}).append(d("<label/>").append(k)),f=function(){var b=this.value?
this.value:"";b!=h.sSearch&&(J(a,{sSearch:b,bRegex:h.bRegex,bSmart:h.bSmart,bCaseInsensitive:h.bCaseInsensitive}),a._iDisplayStart=0,ra(a))},g=null!==a.searchDelay?a.searchDelay:"ssp"===ia(a)?400:0,m=d("input",b).val(h.sSearch).attr("placeholder",e.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",g?Aa(f,g):f).bind("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",c);d(a.nTable).on("search.dt.DT",function(b,c){if(a===c)try{m[0]!==l.activeElement&&m.val(h.sSearch)}catch(e){}});
return b[0]}function J(a,b,c){var e=a.oPreviousSearch,d=a.aoPreSearchCols,h=function(a){e.sSearch=a.sSearch;e.bRegex=a.bRegex;e.bSmart=a.bSmart;e.bCaseInsensitive=a.bCaseInsensitive},g=function(a){return a.bEscapeRegex!==f?!a.bEscapeRegex:a.bRegex};x(a);if("ssp"!=ia(a)){Fb(a,b.sSearch,c,g(b),b.bSmart,b.bCaseInsensitive);h(b);for(b=0;b<d.length;b++)Eb(a,d[b].sSearch,b,g(d[b]),d[b].bSmart,d[b].bCaseInsensitive);p(a)}else h(b);a.bFiltered=!0;T(a,null,"search",[a])}function p(a){for(var b=A.ext.search,
c=a.aiDisplay,e,d,h=0,f=b.length;h<f;h++){for(var g=[],k=0,m=c.length;k<m;k++)d=c[k],e=a.aoData[d],b[h](a,e._aFilterData,d,e._aData,k)&&g.push(d);c.length=0;c.push.apply(c,g)}}function Eb(a,b,c,e,d,h){if(""!==b){var f=a.aiDisplay;e=mb(b,e,d,h);for(d=f.length-1;0<=d;d--)b=a.aoData[f[d]]._aFilterData[c],e.test(b)||f.splice(d,1)}}function Fb(a,b,c,e,d,h){e=mb(b,e,d,h);d=a.oPreviousSearch.sSearch;h=a.aiDisplayMaster;var f;0!==A.ext.search.length&&(c=!0);f=Ia(a);if(0>=b.length)a.aiDisplay=h.slice();else{if(f||
c||d.length>b.length||0!==b.indexOf(d)||a.bSorted)a.aiDisplay=h.slice();b=a.aiDisplay;for(c=b.length-1;0<=c;c--)e.test(a.aoData[b[c]]._sFilterRow)||b.splice(c,1)}}function mb(a,b,c,e){a=b?a:db(a);c&&(a="^(?=.*?"+d.map(a.match(/"[^"]+"|[^ ]+/g)||"",function(a){if('"'===a.charAt(0)){var b=a.match(/^"(.*)"$/);a=b?b[1]:a}return a.replace('"',"")}).join(")(?=.*?")+").*$");return new RegExp(a,e?"i":"")}function db(a){return a.replace(wb,"\\$1")}function Ia(a){var b=a.aoColumns,c,e,d,h,f,g,k,m,n=A.ext.type.search;
c=!1;e=0;for(h=a.aoData.length;e<h;e++)if(m=a.aoData[e],!m._aFilterData){g=[];d=0;for(f=b.length;d<f;d++)c=b[d],c.bSearchable?(k=D(a,e,d,"filter"),n[c.sType]&&(k=n[c.sType](k)),null===k&&(k=""),"string"!==typeof k&&k.toString&&(k=k.toString())):k="",k.indexOf&&-1!==k.indexOf("&")&&(Za.innerHTML=k,k=Tb?Za.textContent:Za.innerText),k.replace&&(k=k.replace(/[\r\n]/g,"")),g.push(k);m._aFilterData=g;m._sFilterRow=g.join("  ");c=!0}return c}function nb(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,
caseInsensitive:a.bCaseInsensitive}}function ob(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function Ab(a){var b=a.sTableId,c=a.aanFeatures.i,e=d("<div/>",{"class":a.oClasses.sInfo,id:c?null:b+"_info"});c||(a.aoDrawCallback.push({fn:Ua,sName:"information"}),e.attr("role","status").attr("aria-live","polite"),d(a.nTable).attr("aria-describedby",b+"_info"));return e[0]}function Ua(a){var b=a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,e=a._iDisplayStart+
1,h=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),k=g?c.sInfo:c.sInfoEmpty;g!==f&&(k+=" "+c.sInfoFiltered);k+=c.sInfoPostFix;k=Gb(a,k);c=c.fnInfoCallback;null!==c&&(k=c.call(a.oInstance,a,e,h,f,g,k));d(b).html(k)}}function Gb(a,b){var c=a.fnFormatNumber,e=a._iDisplayStart+1,d=a._iDisplayLength,h=a.fnRecordsDisplay(),f=-1===d;return b.replace(/_START_/g,c.call(a,e)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,
h)).replace(/_PAGE_/g,c.call(a,f?1:Math.ceil(e/d))).replace(/_PAGES_/g,c.call(a,f?1:Math.ceil(h/d)))}function Va(a){var b,c,e=a.iInitDisplayStart,d=a.aoColumns,h;c=a.oFeatures;if(a.bInitialised){ta(a);za(a);ha(a,a.aoHeader);ha(a,a.aoFooter);S(a,!0);c.bAutoWidth&&wa(a);b=0;for(c=d.length;b<c;b++)h=d[b],h.sWidth&&(h.nTh.style.width=Q(h.sWidth));sa(a);d=ia(a);"ssp"!=d&&("ajax"==d?Ca(a,[],function(c){var d=Da(a,c);for(b=0;b<d.length;b++)B(a,d[b]);a.iInitDisplayStart=e;sa(a);S(a,!1);eb(a,c)},a):(S(a,!1),
eb(a)))}else setTimeout(function(){Va(a)},200)}function eb(a,b){a._bInitComplete=!0;b&&h(a);T(a,"aoInitComplete","init",[a,b])}function qa(a,b){var c=parseInt(b,10);a._iDisplayLength=c;ub(a);T(a,null,"length",[a,c])}function lb(a){for(var b=a.oClasses,c=a.sTableId,e=a.aLengthMenu,h=d.isArray(e[0]),f=h?e[0]:e,e=h?e[1]:e,h=d("<select/>",{name:c+"_length","aria-controls":c,"class":b.sLengthSelect}),g=0,k=f.length;g<k;g++)h[0][g]=new Option(e[g],f[g]);var m=d("<div><label/></div>").addClass(b.sLength);
a.aanFeatures.l||(m[0].id=c+"_length");m.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",h[0].outerHTML));d("select",m).val(a._iDisplayLength).bind("change.DT",function(b){qa(a,d(this).val());ra(a)});d(a.nTable).bind("length.dt.DT",function(b,c,e){a===c&&d("select",m).val(e)});return m[0]}function Wa(a){var b=a.sPaginationType,c=A.ext.pager[b],e="function"===typeof c,h=function(a){ra(a)},b=d("<div/>").addClass(a.oClasses.sPaging+b)[0],f=a.aanFeatures;e||c.fnInit(a,b,h);f.p||(b.id=a.sTableId+
"_paginate",a.aoDrawCallback.push({fn:function(a){if(e){var b=a._iDisplayStart,d=a._iDisplayLength,g=a.fnRecordsDisplay(),k=-1===d,b=k?0:Math.ceil(b/d),d=k?1:Math.ceil(g/d),g=c(b,d),m,k=0;for(m=f.p.length;k<m;k++)gb(a,"pageButton")(a,f.p[k],k,g,b,d)}else c.fnUpdate(a,h)},sName:"pagination"}));return b}function ea(a,b,c){var e=a._iDisplayStart,d=a._iDisplayLength,h=a.fnRecordsDisplay();0===h||-1===d?e=0:"number"===typeof b?(e=b*d,e>h&&(e=0)):"first"==b?e=0:"previous"==b?(e=0<=d?e-d:0,0>e&&(e=0)):"next"==
b?e+d<h&&(e+=d):"last"==b?e=Math.floor((h-1)/d)*d:Ga(a,0,"Unknown paging action: "+b,5);b=a._iDisplayStart!==e;a._iDisplayStart=e;b&&(T(a,null,"page",[a]),c&&ra(a));return b}function M(a){return d("<div/>",{id:a.aanFeatures.r?null:a.sTableId+"_processing","class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function S(a,b){a.oFeatures.bProcessing&&d(a.aanFeatures.r).css("display",b?"block":"none");T(a,null,"processing",[a,b])}function Bb(a){var b=d(a.nTable);b.attr("role",
"grid");var c=a.oScroll;if(""===c.sX&&""===c.sY)return a.nTable;var e=c.sX,h=c.sY,f=a.oClasses,g=b.children("caption"),k=g.length?g[0]._captionSide:null,m=d(b[0].cloneNode(!1)),n=d(b[0].cloneNode(!1)),q=b.children("tfoot");c.sX&&"100%"===b.attr("width")&&b.removeAttr("width");q.length||(q=null);c=d("<div/>",{"class":f.sScrollWrapper}).append(d("<div/>",{"class":f.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:e?e?Q(e):null:"100%"}).append(d("<div/>",{"class":f.sScrollHeadInner}).css({"box-sizing":"content-box",
width:c.sXInner||"100%"}).append(m.removeAttr("id").css("margin-left",0).append("top"===k?g:null).append(b.children("thead"))))).append(d("<div/>",{"class":f.sScrollBody}).css({overflow:"auto",height:h?Q(h):null,width:e?Q(e):null}).append(b));q&&c.append(d("<div/>",{"class":f.sScrollFoot}).css({overflow:"hidden",border:0,width:e?e?Q(e):null:"100%"}).append(d("<div/>",{"class":f.sScrollFootInner}).append(n.removeAttr("id").css("margin-left",0).append("bottom"===k?g:null).append(b.children("tfoot")))));
var b=c.children(),p=b[0],f=b[1],l=q?b[2]:null;e&&d(f).scroll(function(a){a=this.scrollLeft;p.scrollLeft=a;q&&(l.scrollLeft=a)});a.nScrollHead=p;a.nScrollBody=f;a.nScrollFoot=l;a.aoDrawCallback.push({fn:Qa,sName:"scrolling"});return c[0]}function Qa(a){var b=a.oScroll,c=b.sX,e=b.sXInner,h=b.sY,f=b.iBarWidth,g=d(a.nScrollHead),k=g[0].style,m=g.children("div"),n=m[0].style,q=m.children("table"),m=a.nScrollBody,p=d(m),l=m.style,r=d(a.nScrollFoot).children("div"),w=r.children("table"),y=d(a.nTHead),v=
d(a.nTable),x=v[0],z=x.style,B=a.nTFoot?d(a.nTFoot):null,K=a.oBrowser,N=K.bScrollOversize,A,L,D,I,P,G=[],E=[],F=[],J,M=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};v.children("thead, tfoot").remove();P=y.clone().prependTo(v);A=y.find("tr");D=P.find("tr");P.find("th, td").removeAttr("tabindex");B&&(I=B.clone().prependTo(v),L=B.find("tr"),I=I.find("tr"));c||(l.width="100%",g[0].style.width="100%");d.each(Ha(a,P),function(b,c){J=
u(a,b);c.style.width=a.aoColumns[J].sWidth});B&&na(function(a){a.style.width=""},I);b.bCollapse&&""!==h&&(l.height=p[0].offsetHeight+y[0].offsetHeight+"px");g=v.outerWidth();""===c?(z.width="100%",N&&(v.find("tbody").height()>m.offsetHeight||"scroll"==p.css("overflow-y"))&&(z.width=Q(v.outerWidth()-f))):""!==e?z.width=Q(e):g==p.width()&&p.height()<v.height()?(z.width=Q(g-f),v.outerWidth()>g-f&&(z.width=Q(g))):z.width=Q(g);g=v.outerWidth();na(M,D);na(function(a){F.push(a.innerHTML);G.push(Q(d(a).css("width")))},
D);na(function(a,b){a.style.width=G[b]},A);d(D).height(0);B&&(na(M,I),na(function(a){E.push(Q(d(a).css("width")))},I),na(function(a,b){a.style.width=E[b]},L),d(I).height(0));na(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+F[b]+"</div>";a.style.width=G[b]},D);B&&na(function(a,b){a.innerHTML="";a.style.width=E[b]},I);v.outerWidth()<g?(L=m.scrollHeight>m.offsetHeight||"scroll"==p.css("overflow-y")?g+f:g,N&&(m.scrollHeight>m.offsetHeight||"scroll"==p.css("overflow-y"))&&
(z.width=Q(L-f)),""!==c&&""===e||Ga(a,1,"Possible column misalignment",6)):L="100%";l.width=Q(L);k.width=Q(L);B&&(a.nScrollFoot.style.width=Q(L));!h&&N&&(l.height=Q(x.offsetHeight+f));h&&b.bCollapse&&(l.height=Q(h),b=c&&x.offsetWidth>m.offsetWidth?f:0,x.offsetHeight<m.offsetHeight&&(l.height=Q(x.offsetHeight+b)));b=v.outerWidth();q[0].style.width=Q(b);n.width=Q(b);q=v.height()>m.clientHeight||"scroll"==p.css("overflow-y");K="padding"+(K.bScrollbarLeft?"Left":"Right");n[K]=q?f+"px":"0px";B&&(w[0].style.width=
Q(b),r[0].style.width=Q(b),r[0].style[K]=q?f+"px":"0px");p.scroll();!a.bSorted&&!a.bFiltered||a._drawHold||(m.scrollTop=0)}function na(a,b,c){for(var e=0,d=0,h=b.length,f,g;d<h;){f=b[d].firstChild;for(g=c?c[d].firstChild:null;f;)1===f.nodeType&&(c?a(f,g,e):a(f,e),e++),f=f.nextSibling,g=c?g.nextSibling:null;d++}}function wa(a){var b=a.nTable,e=a.aoColumns,f=a.oScroll,g=f.sY,k=f.sX,m=f.sXInner,n=e.length,f=v(a,"bVisible"),q=d("th",a.nTHead),p=b.getAttribute("width"),l=b.parentNode,u=!1,r,w;for(r=0;r<
f.length;r++)w=e[f[r]],null!==w.sWidth&&(w.sWidth=pb(w.sWidthOrig,l),u=!0);if(u||k||g||n!=y(a)||n!=q.length){n=d(b).clone().empty().css("visibility","hidden").removeAttr("id").append(d(a.nTHead).clone(!1)).append(d(a.nTFoot).clone(!1)).append(d("<tbody><tr/></tbody>"));n.find("tfoot th, tfoot td").css("width","");var x=n.find("tbody tr"),q=Ha(a,n.find("thead")[0]);for(r=0;r<f.length;r++)w=e[f[r]],q[r].style.width=null!==w.sWidthOrig&&""!==w.sWidthOrig?Q(w.sWidthOrig):"";if(a.aoData.length)for(r=0;r<
f.length;r++)u=f[r],w=e[u],d(Ib(a,u)).clone(!1).append(w.sContentPadding).appendTo(x);n.appendTo(l);k&&m?n.width(m):k?(n.css("width","auto"),n.width()<l.offsetWidth&&n.width(l.offsetWidth)):g?n.width(l.offsetWidth):p&&n.width(p);Hb(a,n[0]);if(k){for(r=m=0;r<f.length;r++)w=e[f[r]],g=d(q[r]).outerWidth(),m+=null===w.sWidthOrig?g:parseInt(w.sWidth,10)+g-d(q[r]).width();n.width(Q(m));b.style.width=Q(m)}for(r=0;r<f.length;r++)if(w=e[f[r]],g=d(q[r]).width())w.sWidth=Q(g);b.style.width=Q(n.css("width"));
n.remove()}else for(r=0;r<n;r++)e[r].sWidth=Q(q.eq(r).width());p&&(b.style.width=Q(p));!p&&!k||a._reszEvt||(d(c).bind("resize.DT-"+a.sInstance,Aa(function(){h(a)})),a._reszEvt=!0)}function Aa(a,b){var c=b!==f?b:200,e,d;return function(){var b=this,h=+new Date,g=arguments;e&&h<e+c?(clearTimeout(d),d=setTimeout(function(){e=f;a.apply(b,g)},c)):e?(e=h,a.apply(b,g)):e=h}}function pb(a,b){if(!a)return 0;var c=d("<div/>").css("width",Q(a)).appendTo(b||l.body),e=c[0].offsetWidth;c.remove();return e}function Hb(a,
b){var c=a.oScroll;if(c.sX||c.sY)c=c.sX?0:c.iBarWidth,b.style.width=Q(d(b).outerWidth()-c)}function Ib(a,b){var c=qb(a,b);if(0>c)return null;var e=a.aoData[c];return e.nTr?e.anCells[b]:d("<td/>").html(D(a,c,b,"display"))[0]}function qb(a,b){for(var c,e=-1,d=-1,h=0,f=a.aoData.length;h<f;h++)c=D(a,h,b,"display")+"",c=c.replace(Ub,""),c.length>e&&(e=c.length,d=h);return d}function Q(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function rb(){if(!A.__scrollbarWidth){var a=
d("<p/>").css({width:"100%",height:200,padding:0})[0],b=d("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(a).appendTo("body"),c=a.offsetWidth;b.css("overflow","scroll");a=a.offsetWidth;c===a&&(a=b[0].clientWidth);b.remove();A.__scrollbarWidth=c-a}return A.__scrollbarWidth}function Ja(a){var b,c,e=[],h=a.aoColumns,g,k,m,n;b=a.aaSortingFixed;c=d.isPlainObject(b);var q=[];g=function(a){a.length&&!d.isArray(a[0])?q.push(a):
q.push.apply(q,a)};d.isArray(b)&&g(b);c&&b.pre&&g(b.pre);g(a.aaSorting);c&&b.post&&g(b.post);for(a=0;a<q.length;a++)for(n=q[a][0],g=h[n].aDataSort,b=0,c=g.length;b<c;b++)k=g[b],m=h[k].sType||"string",q[a]._idx===f&&(q[a]._idx=d.inArray(q[a][1],h[k].asSorting)),e.push({src:n,col:k,dir:q[a][1],index:q[a]._idx,type:m,formatter:A.ext.type.order[m+"-pre"]});return e}function Jb(a){var b,c,e=[],d=A.ext.type.order,h=a.aoData,f=0,g,k=a.aiDisplayMaster,m;x(a);m=Ja(a);b=0;for(c=m.length;b<c;b++)g=m[b],g.formatter&&
f++,Lb(a,g.col);if("ssp"!=ia(a)&&0!==m.length){b=0;for(c=k.length;b<c;b++)e[k[b]]=b;f===m.length?k.sort(function(a,b){var c,d,f,g,k=m.length,n=h[a]._aSortData,t=h[b]._aSortData;for(f=0;f<k;f++)if(g=m[f],c=n[g.col],d=t[g.col],c=c<d?-1:c>d?1:0,0!==c)return"asc"===g.dir?c:-c;c=e[a];d=e[b];return c<d?-1:c>d?1:0}):k.sort(function(a,b){var c,f,g,k,n=m.length,t=h[a]._aSortData,q=h[b]._aSortData;for(g=0;g<n;g++)if(k=m[g],c=t[k.col],f=q[k.col],k=d[k.type+"-"+k.dir]||d["string-"+k.dir],c=k(c,f),0!==c)return c;
c=e[a];f=e[b];return c<f?-1:c>f?1:0})}a.bSorted=!0}function Kb(a){var b,c,e=a.aoColumns,d=Ja(a);a=a.oLanguage.oAria;for(var h=0,f=e.length;h<f;h++){c=e[h];var g=c.asSorting;b=c.sTitle.replace(/<.*?>/g,"");var k=c.nTh;k.removeAttribute("aria-sort");c.bSortable&&(0<d.length&&d[0].col==h?(k.setAttribute("aria-sort","asc"==d[0].dir?"ascending":"descending"),c=g[d[0].index+1]||g[0]):c=g[0],b+="asc"===c?a.sSortAscending:a.sSortDescending);k.setAttribute("aria-label",b)}}function sb(a,b,c,e){var h=a.aaSorting,
g=a.aoColumns[b].asSorting,k=function(a,b){var c=a._idx;c===f&&(c=d.inArray(a[1],g));return c+1<g.length?c+1:b?null:0};"number"===typeof h[0]&&(h=a.aaSorting=[h]);c&&a.oFeatures.bSortMulti?(c=d.inArray(b,la(h,"0")),-1!==c?(b=k(h[c],!0),null===b?h.splice(c,1):(h[c][1]=g[b],h[c]._idx=b)):(h.push([b,g[0],0]),h[h.length-1]._idx=0)):h.length&&h[0][0]==b?(b=k(h[0]),h.length=1,h[0][1]=g[b],h[0]._idx=b):(h.length=0,h.push([b,g[0]]),h[0]._idx=0);sa(a);"function"==typeof e&&e(a)}function fb(a,b,c,e){var d=
a.aoColumns[c];tb(b,{},function(b){!1!==d.bSortable&&(a.oFeatures.bProcessing?(S(a,!0),setTimeout(function(){sb(a,c,b.shiftKey,e);"ssp"!==ia(a)&&S(a,!1)},0)):sb(a,c,b.shiftKey,e))})}function bb(a){var b=a.aLastSort,c=a.oClasses.sSortColumn,e=Ja(a),h=a.oFeatures,f,g;if(h.bSort&&h.bSortClasses){h=0;for(f=b.length;h<f;h++)g=b[h].src,d(la(a.aoData,"anCells",g)).removeClass(c+(2>h?h+1:3));h=0;for(f=e.length;h<f;h++)g=e[h].src,d(la(a.aoData,"anCells",g)).addClass(c+(2>h?h+1:3))}a.aLastSort=e}function Lb(a,
b){var c=a.aoColumns[b],e=A.ext.order[c.sSortDataType],d;e&&(d=e.call(a.oInstance,a,b,w(a,b)));for(var h,f=A.ext.type.order[c.sType+"-pre"],g=0,k=a.aoData.length;g<k;g++)if(c=a.aoData[g],c._aSortData||(c._aSortData=[]),!c._aSortData[b]||e)h=e?d[g]:D(a,g,b,"sort"),c._aSortData[b]=f?f(h):h}function ba(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:d.extend(!0,[],a.aaSorting),search:nb(a.oPreviousSearch),columns:d.map(a.aoColumns,
function(b,c){return{visible:b.bVisible,search:nb(a.aoPreSearchCols[c])}})};T(a,"aoStateSaveParams","stateSaveParams",[a,b]);a.oSavedState=b;a.fnStateSaveCallback.call(a.oInstance,a,b)}}function Sa(a,b){var c,e,h=a.aoColumns;if(a.oFeatures.bStateSave){var f=a.fnStateLoadCallback.call(a.oInstance,a);if(f&&f.time&&(c=T(a,"aoStateLoadParams","stateLoadParams",[a,f]),-1===d.inArray(!1,c)&&(c=a.iStateDuration,!(0<c&&f.time<+new Date-1E3*c)&&h.length===f.columns.length))){a.oLoadedState=d.extend(!0,{},
f);a._iDisplayStart=f.start;a.iInitDisplayStart=f.start;a._iDisplayLength=f.length;a.aaSorting=[];d.each(f.order,function(b,c){a.aaSorting.push(c[0]>=h.length?[0,c[1]]:c)});d.extend(a.oPreviousSearch,ob(f.search));c=0;for(e=f.columns.length;c<e;c++){var g=f.columns[c];h[c].bVisible=g.visible;d.extend(a.aoPreSearchCols[c],ob(g.search))}T(a,"aoStateLoaded","stateLoaded",[a,f])}}}function Ra(a){var b=A.settings;a=d.inArray(a,la(b,"nTable"));return-1!==a?b[a]:null}function Ga(a,b,e,d){e="DataTables warning: "+
(null!==a?"table id="+a.sTableId+" - ":"")+e;d&&(e+=". For more information about this error, please see http://datatables.net/tn/"+d);if(b)c.console&&console.log&&console.log(e);else if(a=A.ext,"alert"==(a.sErrMode||a.errMode))alert(e);else throw Error(e);}function ma(a,b,c,e){d.isArray(c)?d.each(c,function(c,e){d.isArray(e)?ma(a,b,e[0],e[1]):ma(a,b,e)}):(e===f&&(e=c),b[c]!==f&&(a[e]=b[c]))}function Ta(a,b,c){var e,h;for(h in b)b.hasOwnProperty(h)&&(e=b[h],d.isPlainObject(e)?(d.isPlainObject(a[h])||
(a[h]={}),d.extend(!0,a[h],e)):c&&"data"!==h&&"aaData"!==h&&d.isArray(e)?a[h]=e.slice():a[h]=e);return a}function tb(a,b,c){d(a).bind("click.DT",b,function(b){a.blur();c(b)}).bind("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).bind("selectstart.DT",function(){return!1})}function ja(a,b,c,e){c&&a[b].push({fn:c,sName:e})}function T(a,b,c,e){var h=[];b&&(h=d.map(a[b].slice().reverse(),function(b,c){return b.fn.apply(a.oInstance,e)}));null!==c&&d(a.nTable).trigger(c+".dt",e);return h}
function ub(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),e=a._iDisplayLength;b>=c&&(b=c-e);b-=b%e;if(-1===e||0>b)b=0;a._iDisplayStart=b}function gb(a,b){var c=a.renderer,e=A.ext.renderer[b];return d.isPlainObject(c)&&c[b]?e[c[b]]||e._:"string"===typeof c?e[c]||e._:e._}function ia(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function Ba(a,b){var c=[],c=Yb.numbers_length,e=Math.floor(c/2);b<=c?c=La(0,b):a<=e?(c=La(0,c-2),c.push("ellipsis"),c.push(b-1)):(a>=b-1-e?c=La(b-
(c-2),b):(c=La(a-1,a+2),c.push("ellipsis"),c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0));c.DT_el="span";return c}function Xa(a){d.each({num:function(b){return Cb(b,a)},"num-fmt":function(b){return Cb(b,a,ya)},"html-num":function(b){return Cb(b,a,Oa)},"html-num-fmt":function(b){return Cb(b,a,Oa,ya)}},function(b,c){aa.type.order[b+a+"-pre"]=c;b.match(/^html\-/)&&(aa.type.search[b+a]=aa.type.search.html)})}function Mb(a){return function(){var b=[Ra(this[A.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));
return A.ext.internal[a].apply(this,b)}}var A,aa,O,E,R,Ka={},Nb=/[\r\n]/g,Oa=/<.*?>/g,Sb=/^[\w\+\-]/,vb=/[\w\+\-]$/,wb=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\|\$|\^|\-)/g,ya=/[',$\u00a3\u20ac\u00a5%\u2009\u202F]/g,ga=function(a){return a&&!0!==a&&"-"!==a?!1:!0},Ob=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},xb=function(a,b){Ka[b]||(Ka[b]=new RegExp(db(b),"g"));return"string"===typeof a&&"."!==b?a.replace(/\./g,"").replace(Ka[b],"."):a},yb=function(a,b,c){var e="string"===
typeof a;b&&e&&(a=xb(a,b));c&&e&&(a=a.replace(ya,""));return ga(a)||!isNaN(parseFloat(a))&&isFinite(a)},Pb=function(a,b,c){return ga(a)?!0:ga(a)||"string"===typeof a?yb(a.replace(Oa,""),b,c)?!0:null:null},la=function(a,b,c){var e=[],d=0,h=a.length;if(c!==f)for(;d<h;d++)a[d]&&a[d][b]&&e.push(a[d][b][c]);else for(;d<h;d++)a[d]&&e.push(a[d][b]);return e},Pa=function(a,b,c,e){var d=[],h=0,g=b.length;if(e!==f)for(;h<g;h++)a[b[h]][c]&&d.push(a[b[h]][c][e]);else for(;h<g;h++)d.push(a[b[h]][c]);return d},
La=function(a,b){var c=[],e;b===f?(b=0,e=a):(e=b,b=a);for(var d=b;d<e;d++)c.push(d);return c},cb=function(a){for(var b=[],c=0,e=a.length;c<e;c++)a[c]&&b.push(a[c]);return b},hb=function(a){var b=[],c,e,d=a.length,h,f=0;e=0;a:for(;e<d;e++){c=a[e];for(h=0;h<f;h++)if(b[h]===c)continue a;b.push(c);f++}return b},fa=function(a,b,c){a[b]!==f&&(a[c]=a[b])},Ya=/\[.*?\]$/,Ma=/\(\)$/,Za=d("<div>")[0],Tb=Za.textContent!==f,Ub=/<.*?>/g;A=function(c){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,
b){return this.api(!0).rows(a,b).data()};this.api=function(a){return a?new O(Ra(this[aa.iApiIndex])):new O(this)};this.fnAddData=function(a,b){var c=this.api(!0),e=d.isArray(a)&&(d.isArray(a[0])||d.isPlainObject(a[0]))?c.rows.add(a):c.row.add(a);(b===f||b)&&c.draw();return e.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],e=c.oScroll;a===f||a?b.draw(!1):""===e.sX&&""===e.sY||Qa(c)};this.fnClearTable=function(a){var b=this.api(!0).clear();
(a===f||a)&&b.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,b,c){var e=this.api(!0);a=e.rows(a);var d=a.settings()[0],h=d.aoData[a[0][0]];a.remove();b&&b.call(this,d,h);(c===f||c)&&e.draw();return h};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(!a)};this.fnFilter=function(a,b,c,e,d,h){d=this.api(!0);null===b||b===f?d.search(a,c,e,h):d.column(b).search(a,c,e,h);d.draw()};this.fnGetData=function(a,b){var c=
this.api(!0);if(a!==f){var e=a.nodeName?a.nodeName.toLowerCase():"";return b!==f||"td"==e||"th"==e?c.cell(a,b).data():c.row(a).data()||null}return c.data().toArray()};this.fnGetNodes=function(a){var b=this.api(!0);return a!==f?b.row(a).node():b.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(a=b.cell(a).index(),[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};
this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};this.fnPageChange=function(a,b){var c=this.api(!0).page(a);(b===f||b)&&c.draw(!1)};this.fnSetColumnVis=function(a,b,c){a=this.api(!0).column(a).visible(b);(c===f||c)&&a.columns.adjust().draw()};this.fnSettings=function(){return Ra(this[aa.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,b,c,e,d){var h=
this.api(!0);c===f||null===c?h.row(b).data(a):h.cell(b,c).data(a);(d===f||d)&&h.columns.adjust();(e===f||e)&&h.draw();return 0};this.fnVersionCheck=aa.fnVersionCheck;var h=this,g=c===f,q=this.length;g&&(c={});this.oApi=this.internal=aa.internal;for(var p in A.ext.internal)p&&(this[p]=Mb(p));this.each(function(){var p={},p=1<q?Ta(p,c,!0):c,l=0,u,w=this.getAttribute("id"),y=!1,v=A.defaults;if("table"!=this.nodeName.toLowerCase())Ga(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{r(v);
k(v.column);m(v,v,!0);m(v.column,v.column,!0);m(v,p);var x=A.settings,l=0;for(u=x.length;l<u;l++){if(x[l].nTable==this){u=p.bRetrieve!==f?p.bRetrieve:v.bRetrieve;if(g||u)return x[l].oInstance;if(p.bDestroy!==f?p.bDestroy:v.bDestroy){x[l].oInstance.fnDestroy();break}else{Ga(x[l],0,"Cannot reinitialise DataTable",3);return}}if(x[l].sTableId==this.id){x.splice(l,1);break}}if(null===w||""===w)this.id=w="DataTables_Table_"+A.ext._unique++;var C=d.extend(!0,{},A.models.oSettings,{nTable:this,oApi:h.internal,
oInit:p,sDestroyWidth:d(this)[0].style.width,sInstance:w,sTableId:w});x.push(C);C.oInstance=1===h.length?h:d(this).dataTable();r(p);p.oLanguage&&n(p.oLanguage);p.aLengthMenu&&!p.iDisplayLength&&(p.iDisplayLength=d.isArray(p.aLengthMenu[0])?p.aLengthMenu[0][0]:p.aLengthMenu[0]);p=Ta(d.extend(!0,{},v),p);ma(C.oFeatures,p,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));ma(C,p,["asStripeClasses","ajax","fnServerData","fnFormatNumber",
"sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);ma(C.oScroll,p,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);
ma(C.oLanguage,p,"fnInfoCallback");ja(C,"aoDrawCallback",p.fnDrawCallback,"user");ja(C,"aoServerParams",p.fnServerParams,"user");ja(C,"aoStateSaveParams",p.fnStateSaveParams,"user");ja(C,"aoStateLoadParams",p.fnStateLoadParams,"user");ja(C,"aoStateLoaded",p.fnStateLoaded,"user");ja(C,"aoRowCallback",p.fnRowCallback,"user");ja(C,"aoRowCreatedCallback",p.fnCreatedRow,"user");ja(C,"aoHeaderCallback",p.fnHeaderCallback,"user");ja(C,"aoFooterCallback",p.fnFooterCallback,"user");ja(C,"aoInitComplete",p.fnInitComplete,
"user");ja(C,"aoPreDrawCallback",p.fnPreDrawCallback,"user");w=C.oClasses;p.bJQueryUI?(d.extend(w,A.ext.oJUIClasses,p.oClasses),p.sDom===v.sDom&&"lfrtip"===v.sDom&&(C.sDom='<"H"lfr>t<"F"ip>'),C.renderer)?d.isPlainObject(C.renderer)&&!C.renderer.header&&(C.renderer.header="jqueryui"):C.renderer="jqueryui":d.extend(w,A.ext.classes,p.oClasses);d(this).addClass(w.sTable);if(""!==C.oScroll.sX||""!==C.oScroll.sY)C.oScroll.iBarWidth=rb();!0===C.oScroll.sX&&(C.oScroll.sX="100%");C.iInitDisplayStart===f&&
(C.iInitDisplayStart=p.iDisplayStart,C._iDisplayStart=p.iDisplayStart);null!==p.iDeferLoading&&(C.bDeferLoading=!0,l=d.isArray(p.iDeferLoading),C._iRecordsDisplay=l?p.iDeferLoading[0]:p.iDeferLoading,C._iRecordsTotal=l?p.iDeferLoading[1]:p.iDeferLoading);var K=C.oLanguage;d.extend(!0,K,p.oLanguage);""!==K.sUrl&&(d.ajax({dataType:"json",url:K.sUrl,success:function(a){n(a);m(v.oLanguage,a);d.extend(!0,K,a);Va(C)},error:function(){Va(C)}}),y=!0);null===p.asStripeClasses&&(C.asStripeClasses=[w.sStripeOdd,
w.sStripeEven]);var l=C.asStripeClasses,N=d("tbody tr:eq(0)",this);-1!==d.inArray(!0,d.map(l,function(a,b){return N.hasClass(a)}))&&(d("tbody tr",this).removeClass(l.join(" ")),C.asDestroyStripes=l.slice());var x=[],L,l=this.getElementsByTagName("thead");0!==l.length&&(da(C.aoHeader,l[0]),x=Ha(C));if(null===p.aoColumns)for(L=[],l=0,u=x.length;l<u;l++)L.push(null);else L=p.aoColumns;l=0;for(u=L.length;l<u;l++)a(C,x?x[l]:null);z(C,p.aoColumnDefs,L,function(a,b){e(C,a,b)});if(N.length){var D=function(a,
b){return a.getAttribute("data-"+b)?b:null};d.each(U(C,N[0]).cells,function(a,b){var c=C.aoColumns[a];if(c.mData===a){var d=D(b,"sort")||D(b,"order"),h=D(b,"filter")||D(b,"search");if(null!==d||null!==h)c.mData={_:a+".display",sort:null!==d?a+".@data-"+d:f,type:null!==d?a+".@data-"+d:f,filter:null!==h?a+".@data-"+h:f},e(C,a)}})}var P=C.oFeatures;p.bStateSave&&(P.bStateSave=!0,Sa(C,p),ja(C,"aoDrawCallback",ba,"state_save"));if(p.aaSorting===f)for(x=C.aaSorting,l=0,u=x.length;l<u;l++)x[l][1]=C.aoColumns[l].asSorting[0];
bb(C);P.bSort&&ja(C,"aoDrawCallback",function(){if(C.bSorted){var a=Ja(C),b={};d.each(a,function(a,c){b[c.src]=c.dir});T(C,null,"order",[C,a,b]);Kb(C)}});ja(C,"aoDrawCallback",function(){(C.bSorted||"ssp"===ia(C)||P.bDeferRender)&&bb(C)},"sc");b(C);l=d(this).children("caption").each(function(){this._captionSide=d(this).css("caption-side")});u=d(this).children("thead");0===u.length&&(u=d("<thead/>").appendTo(this));C.nTHead=u[0];u=d(this).children("tbody");0===u.length&&(u=d("<tbody/>").appendTo(this));
C.nTBody=u[0];u=d(this).children("tfoot");0===u.length&&0<l.length&&(""!==C.oScroll.sX||""!==C.oScroll.sY)&&(u=d("<tfoot/>").appendTo(this));0===u.length||0===u.children().length?d(this).addClass(w.sNoFooter):0<u.length&&(C.nTFoot=u[0],da(C.aoFooter,C.nTFoot));if(p.aaData)for(l=0;l<p.aaData.length;l++)B(C,p.aaData[l]);else(C.bDeferLoading||"dom"==ia(C))&&I(C,d(C.nTBody).children("tr"));C.aiDisplay=C.aiDisplayMaster.slice();C.bInitialised=!0;!1===y&&Va(C)}});h=null;return this};var Qb=[],Z=Array.prototype,
Vb=function(a){var b,c,e=A.settings,h=d.map(e,function(a,b){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&"table"===a.nodeName.toLowerCase())return b=d.inArray(a,h),-1!==b?[e[b]]:null;if(a&&"function"===typeof a.settings)return a.settings().toArray();"string"===typeof a?c=d(a):a instanceof d&&(c=a)}else return[];if(c)return c.map(function(a){b=d.inArray(this,h);return-1!==b?e[b]:null}).toArray()};O=function(a,b){if(!this instanceof O)throw"DT API must be constructed as a new object";
var c=[],e=function(a){(a=Vb(a))&&c.push.apply(c,a)};if(d.isArray(a))for(var h=0,f=a.length;h<f;h++)e(a[h]);else e(a);this.context=hb(c);b&&this.push.apply(this,b.toArray?b.toArray():b);this.selector={rows:null,cols:null,opts:null};O.extend(this,this,Qb)};A.Api=O;O.prototype={concat:Z.concat,context:[],each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new O(b[a],this[a]):null},filter:function(a){var b=[];
if(Z.filter)b=Z.filter.call(this,a,this);else for(var c=0,e=this.length;c<e;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new O(this.context,b)},flatten:function(){var a=[];return new O(this.context,a.concat.apply(a,this.toArray()))},join:Z.join,indexOf:Z.indexOf||function(a,b){for(var c=b||0,e=this.length;c<e;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,c,e){var d=[],h,g,k,m,n,q=this.context,p,l,u=this.selector;"string"===typeof a&&(e=c,c=b,b=a,a=!1);g=0;for(k=q.length;g<
k;g++){var r=new O(q[g]);if("table"===b)h=c.call(r,q[g],g),h!==f&&d.push(h);else if("columns"===b||"rows"===b)h=c.call(r,q[g],this[g],g),h!==f&&d.push(h);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b)for(l=this[g],"column-rows"===b&&(p=kb(q[g],u.opts)),m=0,n=l.length;m<n;m++)h=l[m],h="cell"===b?c.call(r,q[g],h.row,h.column,g,m):c.call(r,q[g],h,g,m,p),h!==f&&d.push(h)}return d.length||e?(a=new O(q,a?d.concat.apply([],d):d),b=a.selector,b.rows=u.rows,b.cols=u.cols,b.opts=u.opts,a):
this},lastIndexOf:Z.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(Z.map)b=Z.map.call(this,a,this);else for(var c=0,e=this.length;c<e;c++)b.push(a.call(this,this[c],c));return new O(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:Z.pop,push:Z.push,reduce:Z.reduce||function(a,b){return g(this,a,b,0,this.length,1)},reduceRight:Z.reduceRight||function(a,b){return g(this,a,b,this.length-1,-1,
-1)},reverse:Z.reverse,selector:null,shift:Z.shift,sort:Z.sort,splice:Z.splice,toArray:function(){return Z.slice.call(this)},to$:function(){return d(this)},toJQuery:function(){return d(this)},unique:function(){return new O(this.context,hb(this))},unshift:Z.unshift};O.extend=function(a,b,c){if(b&&(b instanceof O||b.__dt_wrapper)){var e,h,f,g=function(a,b,c){return function(){var e=b.apply(a,arguments);O.extend(e,e,c.methodExt);return e}};e=0;for(h=c.length;e<h;e++)f=c[e],b[f.name]="function"===typeof f.val?
g(a,f.val,f):d.isPlainObject(f.val)?{}:f.val,b[f.name].__dt_wrapper=!0,O.extend(a,b[f.name],f.propExt)}};O.register=E=function(a,b){if(d.isArray(a))for(var c=0,e=a.length;c<e;c++)O.register(a[c],b);else for(var h=a.split("."),f=Qb,g,k,c=0,e=h.length;c<e;c++){g=(k=-1!==h[c].indexOf("()"))?h[c].replace("()",""):h[c];var m;a:{m=0;for(var n=f.length;m<n;m++)if(f[m].name===g){m=f[m];break a}m=null}m||(m={name:g,val:{},methodExt:[],propExt:[]},f.push(m));c===e-1?m.val=b:f=k?m.methodExt:m.propExt}};O.registerPlural=
R=function(a,b,c){O.register(a,c);O.register(b,function(){var a=c.apply(this,arguments);return a===this?this:a instanceof O?a.length?d.isArray(a[0])?new O(a.context,a[0]):a[0]:f:a})};var $a=function(a,b){if("number"===typeof a)return[b[a]];var c=d.map(b,function(a,b){return a.nTable});return d(c).filter(a).map(function(a){a=d.inArray(this,c);return b[a]}).toArray()};E("tables()",function(a){return a?new O($a(a,this.context)):this});E("table()",function(a){a=this.tables(a);var b=a.context;return b.length?
new O(b[0]):a});R("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});R("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody},1)});R("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});R("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});R("tables().containers()","table().container()",
function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});E("draw()",function(a){return this.iterator("table",function(b){sa(b,!1===a)})});E("page()",function(a){return a===f?this.page.info().page:this.iterator("table",function(b){ea(b,a)})});E("page.info()",function(a){if(0===this.context.length)return f;a=this.context[0];var b=a._iDisplayStart,c=a._iDisplayLength,e=a.fnRecordsDisplay(),d=-1===c;return{page:d?0:Math.floor(b/c),pages:d?1:Math.ceil(e/c),start:b,end:a.fnDisplayEnd(),
length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:e}});E("page.len()",function(a){return a===f?0!==this.context.length?this.context[0]._iDisplayLength:f:this.iterator("table",function(b){qa(b,a)})});var zb=function(a,b,c){"ssp"==ia(a)?sa(a,b):(S(a,!0),Ca(a,[],function(c){L(a);c=Da(a,c);for(var e=0,d=c.length;e<d;e++)B(a,c[e]);sa(a,b);S(a,!1)}));if(c){var e=new O(a);e.one("draw",function(){c(e.ajax.json())})}};E("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});E("ajax.params()",
function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});E("ajax.reload()",function(a,b){return this.iterator("table",function(c){zb(c,!1===b,a)})});E("ajax.url()",function(a){var b=this.context;if(a===f){if(0===b.length)return f;b=b[0];return b.ajax?d.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource}return this.iterator("table",function(b){d.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})});E("ajax.url().load()",function(a,b){return this.iterator("table",function(c){zb(c,!1===b,a)})});
var ab=function(a,b){var c=[],e,h,g,k,m,n;e=typeof a;a&&"string"!==e&&"function"!==e&&a.length!==f||(a=[a]);g=0;for(k=a.length;g<k;g++)for(h=a[g]&&a[g].split?a[g].split(","):[a[g]],m=0,n=h.length;m<n;m++)(e=b("string"===typeof h[m]?d.trim(h[m]):h[m]))&&e.length&&c.push.apply(c,e);return c},ib=function(a){a||(a={});a.filter&&!a.search&&(a.search=a.filter);return{search:a.search||"none",order:a.order||"current",page:a.page||"all"}},jb=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=
a[b],a.length=1,a.context=[a.context[b]],a;a.length=0;return a},kb=function(a,b){var c,e,h,f=[],g=a.aiDisplay;c=a.aiDisplayMaster;var k=b.search;e=b.order;h=b.page;if("ssp"==ia(a))return"removed"===k?[]:La(0,c.length);if("current"==h)for(c=a._iDisplayStart,e=a.fnDisplayEnd();c<e;c++)f.push(g[c]);else if("current"==e||"applied"==e)f="none"==k?c.slice():"applied"==k?g.slice():d.map(c,function(a,b){return-1===d.inArray(a,g)?a:null});else if("index"==e||"original"==e)for(c=0,e=a.aoData.length;c<e;c++)"none"==
k?f.push(c):(h=d.inArray(c,g),(-1===h&&"removed"==k||0<=h&&"applied"==k)&&f.push(c));return f},Wb=function(a,b,c){return ab(b,function(b){var e=Ob(b);if(null!==e&&!c)return[e];var h=kb(a,c);if(null!==e&&-1!==d.inArray(e,h))return[e];if(!b)return h;if("function"===typeof b)return d.map(h,function(c){var e=a.aoData[c];return b(c,e._aData,e.nTr)?c:null});e=cb(Pa(a.aoData,h,"nTr"));return b.nodeName&&-1!==d.inArray(b,e)?[b._DT_RowIndex]:d(e).filter(b).map(function(){return this._DT_RowIndex}).toArray()})};
E("rows()",function(a,b){a===f?a="":d.isPlainObject(a)&&(b=a,a="");b=ib(b);var c=this.iterator("table",function(c){return Wb(c,a,b)},1);c.selector.rows=a;c.selector.opts=b;return c});E("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||f},1)});E("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return Pa(a.aoData,b,"_aData")},1)});R("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var e=b.aoData[c];
return"search"===a?e._aFilterData:e._aSortData},1)});R("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){ca(b,c,a)})});R("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b},1)});R("rows().remove()","row().remove()",function(){var a=this;return this.iterator("row",function(b,c,e){var h=b.aoData;h.splice(c,1);for(var f=0,g=h.length;f<g;f++)null!==h[f].nTr&&(h[f].nTr._DT_RowIndex=f);d.inArray(c,b.aiDisplay);X(b.aiDisplayMaster,
c);X(b.aiDisplay,c);X(a[e],c,!1);ub(b)})});E("rows.add()",function(a){var b=this.iterator("table",function(b){var c,e,d,h=[];e=0;for(d=a.length;e<d;e++)c=a[e],c.nodeName&&"TR"===c.nodeName.toUpperCase()?h.push(I(b,c)[0]):h.push(B(b,c));return h},1),c=this.rows(-1);c.pop();c.push.apply(c,b.toArray());return c});E("row()",function(a,b){return jb(this.rows(a,b))});E("row().data()",function(a){var b=this.context;if(a===f)return b.length&&this.length?b[0].aoData[this[0]]._aData:f;b[0].aoData[this[0]]._aData=
a;ca(b[0],this[0],"data");return this});E("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});E("row.add()",function(a){a instanceof d&&a.length&&(a=a[0]);var b=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?I(b,a)[0]:B(b,a)});return this.row(b[0])});var F=function(a,b,c,e){var h=[],f=function(b,c){if(b.nodeName&&"tr"===b.nodeName.toLowerCase())h.push(b);else{var e=d("<tr><td/></tr>").addClass(c);d("td",
e).addClass(c).html(b)[0].colSpan=y(a);h.push(e[0])}};if(d.isArray(c)||c instanceof d)for(var g=0,k=c.length;g<k;g++)f(c[g],e);else f(c,e);b._details&&b._details.remove();b._details=d(h);b._detailsShow&&b._details.insertAfter(b.nTr)},Rb=function(a,b){var c=a.context;c.length&&(c=c[0].aoData[b!==f?b:a[0]],c._details&&(c._details.remove(),c._detailsShow=f,c._details=f))},Fa=function(a,b){var c=a.context;if(c.length&&a.length){var e=c[0].aoData[a[0]];e._details&&((e._detailsShow=b)?e._details.insertAfter(e.nTr):
e._details.detach(),Zb(c[0]))}},Zb=function(a){var b=new O(a),c=a.aoData;b.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<la(c,"_details").length&&(b.on("draw.dt.DT_details",function(e,d){a===d&&b.rows({page:"current"}).eq(0).each(function(a){a=c[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),b.on("column-visibility.dt.DT_details",function(b,e,d,h){if(a===e)for(e=y(e),d=0,h=c.length;d<h;d++)b=c[d],b._details&&b._details.children("td[colspan]").attr("colspan",
e)}),b.on("destroy.dt.DT_details",function(e,d){if(a===d)for(var h=0,f=c.length;h<f;h++)c[h]._details&&Rb(b,h)}))};E("row().child()",function(a,b){var c=this.context;if(a===f)return c.length&&this.length?c[0].aoData[this[0]]._details:f;!0===a?this.child.show():!1===a?Rb(this):c.length&&this.length&&F(c[0],c[0].aoData[this[0]],a,b);return this});E(["row().child.show()","row().child().show()"],function(a){Fa(this,!0);return this});E(["row().child.hide()","row().child().hide()"],function(){Fa(this,!1);
return this});E(["row().child.remove()","row().child().remove()"],function(){Rb(this);return this});E("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var $b=/^(.+):(name|visIdx|visible)$/,Xb=function(a,b,c,e,d){c=[];e=0;for(var h=d.length;e<h;e++)c.push(D(a,d[e],b));return c},ac=function(a,b,c){var e=a.aoColumns,h=la(e,"sName"),f=la(e,"nTh");return ab(b,function(b){var g=Ob(b);if(""===b)return La(e.length);if(null!==g)return[0<=
g?g:e.length+g];if("function"===typeof b){var k=kb(a,c);return d.map(e,function(c,e){return b(e,Xb(a,e,0,0,k),f[e])?e:null})}var m="string"===typeof b?b.match($b):"";if(m)switch(m[2]){case "visIdx":case "visible":g=parseInt(m[1],10);if(0>g){var n=d.map(e,function(a,b){return a.bVisible?b:null});return[n[n.length+g]]}return[u(a,g)];case "name":return d.map(h,function(a,b){return a===m[1]?b:null})}else return d(f).filter(b).map(function(){return d.inArray(this,f)}).toArray()})};E("columns()",function(a,
b){a===f?a="":d.isPlainObject(a)&&(b=a,a="");b=ib(b);var c=this.iterator("table",function(c){return ac(c,a,b)},1);c.selector.cols=a;c.selector.opts=b;return c});R("columns().header()","column().header()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)});R("columns().footer()","column().footer()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf},1)});R("columns().data()","column().data()",function(){return this.iterator("column-rows",
Xb,1)});R("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)});R("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,e,d,h){return Pa(b.aoData,h,"search"===a?"_aFilterData":"_aSortData",c)},1)});R("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,e,d){return Pa(a.aoData,d,"anCells",b)},1)});R("columns().visible()","column().visible()",
function(a,b){return this.iterator("column",function(c,e){if(a===f)return c.aoColumns[e].bVisible;var g=c.aoColumns,k=g[e],m=c.aoData,n,q,p;if(a!==f&&k.bVisible!==a){if(a){var l=d.inArray(!0,la(g,"bVisible"),e+1);n=0;for(q=m.length;n<q;n++)p=m[n].nTr,g=m[n].anCells,p&&p.insertBefore(g[e],g[l]||null)}else d(la(c.aoData,"anCells",e)).detach();k.bVisible=a;ha(c,c.aoHeader);ha(c,c.aoFooter);if(b===f||b)h(c),(c.oScroll.sX||c.oScroll.sY)&&Qa(c);T(c,null,"column-visibility",[c,e,a]);ba(c)}})});R("columns().indexes()",
"column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?w(b,c):c},1)});E("columns.adjust()",function(){return this.iterator("table",function(a){h(a)},1)});E("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return u(c,b);if("fromData"===a||"toVisible"===a)return w(c,b)}});E("column()",function(a,b){return jb(this.columns(a,b))});var bc=function(a,b,c){var e=a.aoData,h=kb(a,c);c=cb(Pa(e,h,"anCells"));
var g=d([].concat.apply([],c)),k,m=a.aoColumns.length,n,q,p,l,u,r;return ab(b,function(b){var c="function"===typeof b;if(null===b||b===f||c){n=[];q=0;for(p=h.length;q<p;q++)for(k=h[q],l=0;l<m;l++)u={row:k,column:l},c?(r=a.aoData[k],b(u,D(a,k,l),r.anCells[l])&&n.push(u)):n.push(u);return n}return d.isPlainObject(b)?[b]:g.filter(b).map(function(a,b){k=b.parentNode._DT_RowIndex;return{row:k,column:d.inArray(b,e[k].anCells)}}).toArray()})};E("cells()",function(a,b,c){d.isPlainObject(a)&&(typeof a.row!==
f?(c=b,b=null):(c=a,a=null));d.isPlainObject(b)&&(c=b,b=null);if(null===b||b===f)return this.iterator("table",function(b){return bc(b,a,ib(c))});var e=this.columns(b,c),h=this.rows(a,c),g,k,m,n,q,p=this.iterator("table",function(a,b){g=[];k=0;for(m=h[b].length;k<m;k++)for(n=0,q=e[b].length;n<q;n++)g.push({row:h[b][k],column:e[b][n]});return g},1);d.extend(p.selector,{cols:b,rows:a,opts:c});return p});R("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,c){return(a=
a.aoData[b].anCells)?a[c]:f},1)});E("cells().data()",function(){return this.iterator("cell",function(a,b,c){return D(a,b,c)},1)});R("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,c,e){return b.aoData[c][a][e]},1)});R("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,c,e){return D(b,c,e,a)},1)});R("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,
b,c){return{row:b,column:c,columnVisible:w(a,c)}},1)});R("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,e){ca(b,c,a,e)})});E("cell()",function(a,b,c){return jb(this.cells(a,b,c))});E("cell().data()",function(a){var b=this.context,c=this[0];if(a===f)return b.length&&c.length?D(b[0],c[0].row,c[0].column):f;G(b[0],c[0].row,c[0].column,a);ca(b[0],c[0].row,"data",c[0].column);return this});E("order()",function(a,b){var c=this.context;if(a===f)return 0!==
c.length?c[0].aaSorting:f;"number"===typeof a?a=[[a,b]]:d.isArray(a[0])||(a=Array.prototype.slice.call(arguments));return this.iterator("table",function(b){b.aaSorting=a.slice()})});E("order.listener()",function(a,b,c){return this.iterator("table",function(e){fb(e,a,b,c)})});E(["columns().order()","column().order()"],function(a){var b=this;return this.iterator("table",function(c,e){var h=[];d.each(b[e],function(b,c){h.push([c,a])});c.aaSorting=h})});E("search()",function(a,b,c,e){var h=this.context;
return a===f?0!==h.length?h[0].oPreviousSearch.sSearch:f:this.iterator("table",function(h){h.oFeatures.bFilter&&J(h,d.extend({},h.oPreviousSearch,{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===e?!0:e}),1)})});R("columns().search()","column().search()",function(a,b,c,e){return this.iterator("column",function(h,g){var k=h.aoPreSearchCols;if(a===f)return k[g].sSearch;h.oFeatures.bFilter&&(d.extend(k[g],{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===
e?!0:e}),J(h,h.oPreviousSearch,1))})});E("state()",function(){return this.context.length?this.context[0].oSavedState:null});E("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});E("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});E("state.save()",function(){return this.iterator("table",function(a){ba(a)})});A.versionCheck=A.fnVersionCheck=function(a){var b=A.version.split(".");a=a.split(".");
for(var c,e,h=0,d=a.length;h<d;h++)if(c=parseInt(b[h],10)||0,e=parseInt(a[h],10)||0,c!==e)return c>e;return!0};A.isDataTable=A.fnIsDataTable=function(a){var b=d(a).get(0),c=!1;d.each(A.settings,function(a,e){if(e.nTable===b||e.nScrollHead===b||e.nScrollFoot===b)c=!0});return c};A.tables=A.fnTables=function(a){return d.map(A.settings,function(b){if(!a||a&&d(b.nTable).is(":visible"))return b.nTable})};A.util={throttle:Aa,escapeRegex:db};A.camelToHungarian=m;E("$()",function(a,b){var c=this.rows(b).nodes(),
c=d(c);return d([].concat(c.filter(a).toArray(),c.find(a).toArray()))});d.each(["on","one","off"],function(a,b){E(b+"()",function(){var a=Array.prototype.slice.call(arguments);a[0].match(/\.dt\b/)||(a[0]+=".dt");var c=d(this.tables().nodes());c[b].apply(c,a);return this})});E("clear()",function(){return this.iterator("table",function(a){L(a)})});E("settings()",function(){return new O(this.context,this.context)});E("data()",function(){return this.iterator("table",function(a){return la(a.aoData,"_aData")}).flatten()});
E("destroy()",function(a){a=a||!1;return this.iterator("table",function(b){var e=b.nTableWrapper.parentNode,h=b.oClasses,g=b.nTable,f=b.nTBody,k=b.nTHead,m=b.nTFoot,n=d(g),f=d(f),q=d(b.nTableWrapper),p=d.map(b.aoData,function(a){return a.nTr}),l;b.bDestroying=!0;T(b,"aoDestroyCallback","destroy",[b]);a||(new O(b)).columns().visible(!0);q.unbind(".DT").find(":not(tbody *)").unbind(".DT");d(c).unbind(".DT-"+b.sInstance);g!=k.parentNode&&(n.children("thead").detach(),n.append(k));m&&g!=m.parentNode&&
(n.children("tfoot").detach(),n.append(m));n.detach();q.detach();b.aaSorting=[];b.aaSortingFixed=[];bb(b);d(p).removeClass(b.asStripeClasses.join(" "));d("th, td",k).removeClass(h.sSortable+" "+h.sSortableAsc+" "+h.sSortableDesc+" "+h.sSortableNone);b.bJUI&&(d("th span."+h.sSortIcon+", td span."+h.sSortIcon,k).detach(),d("th, td",k).each(function(){var a=d("div."+h.sSortJUIWrapper,this);d(this).append(a.contents());a.detach()}));!a&&e&&e.insertBefore(g,b.nTableReinsertBefore);f.children().detach();
f.append(p);n.css("width",b.sDestroyWidth).removeClass(h.sTable);(l=b.asDestroyStripes.length)&&f.children().each(function(a){d(this).addClass(b.asDestroyStripes[a%l])});e=d.inArray(b,A.settings);-1!==e&&A.settings.splice(e,1)})});A.version="1.10.4";A.settings=[];A.models={};A.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};A.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null};A.models.oColumn={idx:null,aDataSort:null,
asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};A.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],
asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,
fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,
iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",
sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:d.extend({},A.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null};q(A.defaults);A.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,
mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};q(A.defaults.column);A.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,
bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,
nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:f,oAjaxData:f,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},
bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==ia(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==ia(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,e=this.aiDisplay.length,h=this.oFeatures,d=h.bPaginate;return h.bServerSide?!1===d||-1===a?b+e:Math.min(b+a,this._iRecordsDisplay):!d||c>e||-1===a?e:c},
oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}};A.ext=aa={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:A.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:A.version};d.extend(aa,{afnFiltering:aa.search,aTypes:aa.type.detect,ofnSearch:aa.type.search,oSort:aa.type.order,afnSortData:aa.order,aoFeatures:aa.feature,
oApi:aa.internal,oStdClasses:aa.classes,oPagination:aa.pager});d.extend(A.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",
sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",
sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});(function(){var a="",a="",b=a+"ui-state-default",c=a+"css_right ui-icon ui-icon-",a=a+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";d.extend(A.ext.oJUIClasses,A.ext.classes,{sPageButton:"fg-button ui-button "+b,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:b+
" sorting_asc",sSortDesc:b+" sorting_desc",sSortable:b+" sorting",sSortableAsc:b+" sorting_asc_disabled",sSortableDesc:b+" sorting_desc_disabled",sSortableNone:b+" sorting_disabled",sSortJUIAsc:c+"triangle-1-n",sSortJUIDesc:c+"triangle-1-s",sSortJUI:c+"carat-2-n-s",sSortJUIAscAllowed:c+"carat-1-n",sSortJUIDescAllowed:c+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+b,sScrollFoot:"dataTables_scrollFoot "+b,sHeaderTH:b,sFooterTH:b,
sJUIHeader:a+" ui-corner-tl ui-corner-tr",sJUIFooter:a+" ui-corner-bl ui-corner-br"})})();var Yb=A.ext.pager;d.extend(Yb,{simple:function(a,b){return["previous","next"]},full:function(a,b){return["first","previous","next","last"]},simple_numbers:function(a,b){return["previous",Ba(a,b),"next"]},full_numbers:function(a,b){return["first","previous",Ba(a,b),"next","last"]},_numbers:Ba,numbers_length:7});d.extend(!0,A.ext.renderer,{pageButton:{_:function(a,b,c,e,h,g){var f=a.oClasses,k=a.oLanguage.oPaginate,
m,n,q=0,p=function(b,e){var l,u,r,w,y=function(b){ea(a,b.data.action,!0)};l=0;for(u=e.length;l<u;l++)if(w=e[l],d.isArray(w))r=d("<"+(w.DT_el||"div")+"/>").appendTo(b),p(r,w);else{n=m="";switch(w){case "ellipsis":b.append("<span>&hellip;</span>");break;case "first":m=k.sFirst;n=w+(0<h?"":" "+f.sPageButtonDisabled);break;case "previous":m=k.sPrevious;n=w+(0<h?"":" "+f.sPageButtonDisabled);break;case "next":m=k.sNext;n=w+(h<g-1?"":" "+f.sPageButtonDisabled);break;case "last":m=k.sLast;n=w+(h<g-1?"":
" "+f.sPageButtonDisabled);break;default:m=w+1,n=h===w?f.sPageButtonActive:""}m&&(r=d("<a>",{"class":f.sPageButton+" "+n,"aria-controls":a.sTableId,"data-dt-idx":q,tabindex:a.iTabIndex,id:0===c&&"string"===typeof w?a.sTableId+"_"+w:null}).html(m).appendTo(b),tb(r,{action:w},y),q++)}};try{var u=d(l.activeElement).data("dt-idx");p(d(b).empty(),e);null!==u&&d(b).find("[data-dt-idx="+u+"]").focus()}catch(r){}}}});d.extend(A.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return yb(a,c)?"num"+
c:null},function(a,b){if(!(!a||a instanceof Date||Sb.test(a)&&vb.test(a)))return null;var c=Date.parse(a);return null!==c&&!isNaN(c)||ga(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return yb(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c,!0)?"html-num-fmt"+c:null},function(a,b){return ga(a)||"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);d.extend(A.ext.type.search,{html:function(a){return ga(a)?
a:"string"===typeof a?a.replace(Nb," ").replace(Oa,""):""},string:function(a){return ga(a)?a:"string"===typeof a?a.replace(Nb," "):a}});var Cb=function(a,b,c,e){if(0!==a&&(!a||"-"===a))return-Infinity;b&&(a=xb(a,b));a.replace&&(c&&(a=a.replace(c,"")),e&&(a=a.replace(e,"")));return 1*a};d.extend(aa.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return ga(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return ga(a)?"":"string"===
typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0}});Xa("");d.extend(!0,A.ext.renderer,{header:{_:function(a,b,c,e){d(a.nTable).on("order.dt.DT",function(h,d,g,f){a===d&&(h=c.idx,b.removeClass(c.sSortingClass+" "+e.sSortAsc+" "+e.sSortDesc).addClass("asc"==f[h]?e.sSortAsc:"desc"==f[h]?e.sSortDesc:c.sSortingClass))})},jqueryui:function(a,b,c,e){d("<div/>").addClass(e.sSortJUIWrapper).append(b.contents()).append(d("<span/>").addClass(e.sSortIcon+
" "+c.sSortingClassJUI)).appendTo(b);d(a.nTable).on("order.dt.DT",function(h,d,f,g){a===d&&(h=c.idx,b.removeClass(e.sSortAsc+" "+e.sSortDesc).addClass("asc"==g[h]?e.sSortAsc:"desc"==g[h]?e.sSortDesc:c.sSortingClass),b.find("span."+e.sSortIcon).removeClass(e.sSortJUIAsc+" "+e.sSortJUIDesc+" "+e.sSortJUI+" "+e.sSortJUIAscAllowed+" "+e.sSortJUIDescAllowed).addClass("asc"==g[h]?e.sSortJUIAsc:"desc"==g[h]?e.sSortJUIDesc:c.sSortingClassJUI))})}}});A.render={number:function(a,b,c,e){return{display:function(h){var d=
0>h?"-":"";h=Math.abs(parseFloat(h));var g=parseInt(h,10);h=c?b+(h-g).toFixed(c).substring(2):"";return d+(e||"")+g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+h}}}};d.extend(A.ext.internal,{_fnExternApiFunc:Mb,_fnBuildAjax:Ca,_fnAjaxUpdate:pa,_fnAjaxParameters:xa,_fnAjaxUpdateDraw:Db,_fnAjaxDataSrc:Da,_fnAddColumn:a,_fnColumnOptions:e,_fnAdjustColumnSizing:h,_fnVisibleToColumnIndex:u,_fnColumnIndexToVisible:w,_fnVisbleColumns:y,_fnGetColumns:v,_fnColumnTypes:x,_fnApplyColumnDefs:z,_fnHungarianMap:q,
_fnCamelToHungarian:m,_fnLanguageCompat:n,_fnBrowserDetect:b,_fnAddData:B,_fnAddTr:I,_fnNodeToDataIndex:function(a,b){return b._DT_RowIndex!==f?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return d.inArray(c,a.aoData[b].anCells)},_fnGetCellData:D,_fnSetCellData:G,_fnSplitObjNotation:V,_fnGetObjectDataFn:K,_fnSetObjectDataFn:P,_fnGetDataMaster:N,_fnClearTable:L,_fnDeleteIndex:X,_fnInvalidate:ca,_fnGetRowElements:U,_fnCreateTr:ka,_fnBuildHead:za,_fnDrawHead:ha,_fnDraw:ra,_fnReDraw:sa,_fnAddOptionsHtml:ta,
_fnDetectHeader:da,_fnGetUniqueThs:Ha,_fnFeatureHtmlFilter:W,_fnFilterComplete:J,_fnFilterCustom:p,_fnFilterColumn:Eb,_fnFilter:Fb,_fnFilterCreateSearch:mb,_fnEscapeRegex:db,_fnFilterData:Ia,_fnFeatureHtmlInfo:Ab,_fnUpdateInfo:Ua,_fnInfoMacros:Gb,_fnInitialise:Va,_fnInitComplete:eb,_fnLengthChange:qa,_fnFeatureHtmlLength:lb,_fnFeatureHtmlPaginate:Wa,_fnPageChange:ea,_fnFeatureHtmlProcessing:M,_fnProcessingDisplay:S,_fnFeatureHtmlTable:Bb,_fnScrollDraw:Qa,_fnApplyToChildren:na,_fnCalculateColumnWidths:wa,
_fnThrottle:Aa,_fnConvertToWidth:pb,_fnScrollingWidthAdjust:Hb,_fnGetWidestNode:Ib,_fnGetMaxLenString:qb,_fnStringToCss:Q,_fnScrollBarWidth:rb,_fnSortFlatten:Ja,_fnSort:Jb,_fnSortAria:Kb,_fnSortListener:sb,_fnSortAttachListener:fb,_fnSortingClasses:bb,_fnSortData:Lb,_fnSaveState:ba,_fnLoadState:Sa,_fnSettingsFromNode:Ra,_fnLog:Ga,_fnMap:ma,_fnBindAction:tb,_fnCallbackReg:ja,_fnCallbackFire:T,_fnLengthOverflow:ub,_fnRenderer:gb,_fnDataSource:ia,_fnRowAttributes:oa,_fnCalculateEnd:function(){}});d.fn.dataTable=
A;d.fn.dataTableSettings=A.settings;d.fn.dataTableExt=A.ext;d.fn.DataTable=function(a){return d(this).dataTable(a).api()};d.each(A,function(a,b){d.fn.DataTable[a]=b});return d.fn.dataTable})})(window,document);window.TOONTALK={};window.TOONTALK.creators_from_json={};window.TOONTALK.widget=function(c){var l=function(c){var d=this.get_frontside&&this.get_frontside(!0);if(d)return c&&this.rerender(),d.get_element()};c.creators_from_json.top_level=function(f){f=c.widget.create_top_level_widget(f.settings);$(f.get_backside(!0).get_element()).addClass("toontalk-top-level-backside");return f};return{add_standard_widget_functionality:function(c){this.add_sides_functionality(c);this.runnable(c);this.stackable(c);this.animatable(c);this.has_title(c);this.has_parent(c);
this.has_description(c);this.has_listeners(c);this.erasable(c);c.is_of_type||(c.is_of_type=function(c){return this.get_type_name()===c});return c},erasable:function(c){var d;c.get_erased||(c.get_erased=function(){return d});c.set_erased||(c.set_erased=function(c,f){d=c;f&&this.rerender()});return c},add_sides_functionality:function(f){var d,q;f.get_frontside||(f.get_frontside=function(m){m&&!d&&(d=c.frontside.create(f));return d},f.save_dimensions=function(){var c;this.get_size_attributes?(c=this.get_size_attributes(),
this.saved_width=c.width,this.saved_height=c.height):(c=this.get_frontside_element(),this.saved_width=$(c).width(),this.saved_height=$(c).height())},f.restore_dimensions=function(){var c;0<this.saved_width&&(this.set_size_attributes?this.set_size_attributes(this.saved_width,this.saved_height):(c=this.get_frontside_element(),$(c).css({width:this.saved_width,height:this.saved_height}),this.saved_height=this.saved_width=void 0))});f.get_backside||(f.get_backside=function(c){c&&!q&&(q=f.create_backside());
return q});f.set_backside||(f.set_backside=function(c){q=c});f.forget_backside||(f.forget_backside=function(){q=void 0});f.create_backside||(f.create_backside=function(){return c.backside.create(f)});return f},runnable:function(c){var d=!1;c.get_running||(c.get_running=function(){return d});c.set_running||(c.set_running=function(q,m){var n=this.get_backside_widgets(),l;d=q;this.get_backside()&&this.get_backside().run_status_changed(d);n.forEach(function(k){l=k.get_widget();k.is_backside()&&0<=this.backside_widgets.indexOf(l)||
(l.is_of_type("robot")?k.is_backside()||d&&l.get_running()||(d?(l.set_stopped(!1),l.run(c,m)):l.set_stopped(!0),l.rerender()):l.set_running&&(!m&&k.is_backside()&&"top-level"!==c.get_type_name()?l.set_running(q,c):l.set_running(q)))}.bind(this));this.rerender()});return c},stackable:function(c){var d=!1;c.get_infinite_stack||(c.get_infinite_stack=function(){return d});c.set_infinite_stack||(c.set_infinite_stack=function(q){var m=c.get_backside_element(),n=c.get_frontside_element();d=q;m&&$(m).find(".toontalk-infinite-stack-check-box").prop("checked",
q);n&&(q?$(n).addClass("toontalk-infinite-stack"):$(n).removeClass("toontalk-infinite-stack"))});return c},animatable:function(f){var d;f.animate_to_widget||(d=function(d){var f=d.get_element();f&&$(f).is(":visible")||(f=c.UTILITIES.find_resource_equal_to_widget(d));return f},f.animate_to_widget=function(c,f,n,l,k){this.animate_to_element(d(c),f,n,l,k)});f.animate_to_element||(f.animate_to_element=function(d,f,n,l,k){var b=$(d).offset(),g=$(this.get_frontside_element());d&&$(d).is(":visible")?(l||
(l=($(d).width()-g.width())*Math.random()),k||(k=($(d).height()-g.height())*Math.random()),b?(b.left+=l,b.top+=k,c.debugging&&(0>b.left||0>b.top)&&console.log("Should this include negative values? "+b)):b={left:0,top:0},this.animate_to_absolute_position(b,f,n)):f()});f.animate_to_absolute_position||(f.animate_to_absolute_position=function(d,f,n){var l;l=this.get_frontside_element();c.UTILITIES.animate_to_absolute_position(l,d,f,n)});return f},has_title:function(f){f.get_title||(f.get_title=function(){var d=
this.get_type_name(),f=this.get_backside(),m=this.get_frontside_element(),n=this.get_description(),l;if($(m).is(".toontalk-top-level-resource"))l="Drag this "+d+" to a work area.";else if(!f||!f.get_element())l="Click to see the back side of this "+d;else if(!n)return c.UTILITIES.add_a_or_an(d,!0);n&&(n="This "+d+" "+n,l=l?n+"\n"+l:n);return l});return f},has_parent:function(c){var d,q;c.get_parent_of_frontside=function(){return d};c.get_parent_of_backside=function(){return q};c.set_parent_of_frontside=
function(c,f,q){d&&!q&&d.is_backside()&&d.get_widget().remove_backside_widget(this,!1,!0);d=c&&f?c.get_backside(!0):c};c.set_parent_of_backside=function(c,d,f){q&&!f&&q.is_backside()&&q.get_widget().remove_backside_widget(this,!0,!0);q=c&&d?c.get_backside(!0):c};c.closest_visible_ancestor=function(){for(var c=this;c&&!c.visible();)c=c.is_backside()?c.get_parent_of_backside():c.get_parent_of_frontside();return c||this};c.ancestor_of_type=function(c){for(var d=this;d&&!d.is_of_type(c);)d=d.is_backside()?
d.get_widget().get_parent_of_backside():d.get_parent_of_frontside();return d};c.has_ancestor=function(c){for(var d=this;d;){if(c===d)return!0;d=d.is_backside()?d.get_widget().get_parent_of_backside():d.get_parent_of_frontside()}return!1};c.remove_from_parent_of_frontside=function(c){d&&(d.is_backside()?d.remove_backside_widget(this,!1):d.removed_from_container&&d.removed_from_container(this,!1,c))};return c},has_description:function(c){var d;c.get_description||(c.get_description=function(){return d});
c.set_description||(c.set_description=function(c,f){if(d===c||!d&&""===c)return!1;d=c;f&&this.rerender();return!0})},has_listeners:function(f){var d={};f.add_listener||(f.add_listener=function(c,f){var n=d[c];n?0>n.indexOf(f)&&n.push(f):d[c]=[f]});f.remove_listener||(f.remove_listener=function(f,m,n){if(f=d[f])if(m=f.indexOf(m),0<=m){f.splice(m,1);return}!n&&c.debugging&&console.log("Listener of type "+type_name+" could not be removed.")});f.get_listeners||(f.get_listeners=function(c){return d[c]})},
get_full_description:function(){var c,d;if(this.get_erased&&this.get_erased())return"erased "+this.get_type_name();c=this.get_description();d=this.toString();return c?d+" ("+c+")":d},remove:function(c){var d=this.get_backside(),q=this.get_frontside(),m=this.get_parent_of_frontside(),n=this.get_parent_of_backside();d&&(d.remove_element(),n&&(d=n.is_backside()?n:n.get_backside(),d.get_widget().removed_from_container&&d.get_widget().removed_from_container(this,!0,c)));q&&(q.remove(),m&&this.remove_from_parent_of_frontside(c));
this.set_running(!1)},get_frontside_element:l,get_element:l,get_backside_element:function(c){if(c=this.get_backside&&this.get_backside(c))return c.get_element()},add_to_json:function(c,d){var q,m,n,l,k;if(c){c.view?(m=c,q=c.view,c=c.semantic):(q={},m={semantic:c,view:q});m.version=1;this.get_erased&&this.get_erased()&&(c.erased=!0);this.get_infinite_stack&&this.get_infinite_stack()&&(c.infinite_stack=!0);this.get_running&&this.get_running()&&(c.running=!0);if(!this.get_parent_of_frontside()||this.get_parent_of_frontside().is_backside())if(l=
this.get_frontside_element&&this.get_frontside_element())$(l).is(".toontalk-plain-text-element")||(k=$(l).width(),0!==k&&(q.frontside_width=$(l).width(),q.frontside_height=$(l).height())),$(l).is(":visible")&&(n=$(l).position()),n&&(q.frontside_left=n.left,q.frontside_top=n.top);if(l=this.get_backside()){if(k=l.get_element())q.backside_width=$(k).width(),q.backside_height=$(k).height(),q.backside_left||(n=$(k).position(),q.backside_left=n.left,q.backside_top=n.top,"&lt;"===$(k).find(".toontalk-settings-backside-button").html()&&
(q.advanced_settings_open=!0));l.get_backside_dimensions()&&(q.backside_geometry=l.get_backside_dimensions())}!q.backside_geometry&&this.backside_geometry&&(q.backside_geometry=this.backside_geometry);q.saved_width=this.saved_width;q.saved_height=this.saved_height;c.description=this.get_description&&this.get_description();return m}console.log("get_json not defined");return{}},add_backside_widgets_to_json:function(f,d){var q=this.get_backside_widgets(),m;0<q.length&&(f.semantic.backside_widgets=c.UTILITIES.get_json_of_array(q,
d),(q=this.get_backside_widgets_json_views())&&q.forEach(function(c,q){var k;m=f.semantic.backside_widgets[q];0<=m.widget.shared_widget_index?(k=d.widgets_encountered.indexOf(d.shared_widgets[m.widget.shared_widget_index]),k=d.json_of_widgets_encountered[k].view):k=m.widget.view;m.is_backside?c.backside_left&&(k.backside_left=c.backside_left,k.backside_top=c.backside_top):c.frontside_left&&(k.frontside_left=c.frontside_left,k.frontside_top=c.frontside_top)}))},get_backside_widgets:function(){return this.backside_widgets||
[]},add_backside_widget:function(f,d){var q=this.get_backside(),m=d?f.get_backside():f;c.debugging&&f===this?c.UTILITIES.report_internal_error("Adding a widget to a list of its backside widgets!"):(this.backside_widgets?0>this.backside_widgets.indexOf(m)&&this.backside_widgets.push(m):this.backside_widgets=[m],d?f.set_parent_of_backside(this,!0):f.set_parent_of_frontside(this,!0),m.set_visible(q.visible()),f.render())},remove_all_backside_widgets:function(){if(this.backside_widgets)for(;0<this.backside_widgets.length;)this.backside_widgets[0].remove()},
remove_backside_widget:function(f,d,q){this.get_backside();var m=d?f.get_backside(!0):f,n;c.debugging&&!this.backside_widgets?q?console.log("remove_backside_widget called and there are no backside_widgets"):c.UTILITIES.report_internal_error("Couldn't remove a widget from backside widgets."):(n=this.backside_widgets.indexOf(m),0>n?q?c.debugging&&console.log("Warning: Probable redundant call to remove_backside_widget"):c.UTILITIES.report_internal_error("Couldn't find a widget to remove it from backside widgets. "+
m.get_widget()+" ("+m.get_widget().debug_id+")"):(this.backside_widgets.splice(n,1),this.backside_widgets_json_views&&this.backside_widgets_json_views.splice(n,1),d?(d=f.get_parent_of_backside())&&d.get_widget()===this&&f.set_parent_of_backside(void 0,!0,!0):(d=f.get_parent_of_frontside())&&d.get_widget()===this&&f.set_parent_of_frontside(void 0,void 0,!0),m.set_visible(!1)))},set_backside_widget_sides:function(c,d){var q=this.get_backside(),m=q&&q.visible();this.backside_widgets=c;0<c.length&&(this.get_backside()?
this.get_backside().add_backside_widgets(c,d):this.backside_widgets_json_views=d,c.forEach(function(c){c.is_backside()?c.get_widget().set_parent_of_backside(this,!0):c.get_widget().set_parent_of_frontside(this,!0);c.set_visible(m)}.bind(this)))},get_backside_widgets_json_views:function(c){!this.backside_widgets_json_views&&c&&(this.backside_widgets_json_views=[]);return this.backside_widgets_json_views},can_run:function(){var c=!1,d;this.get_backside_widgets().some(function(q){d=q.get_widget();if(d.get_body&&
!d.get_body().is_empty()||d.can_run())return c=!0});return c},add_to_copy:function(f,d){var q;this.get_erased&&this.get_erased()&&(f.set_erased||c.widget.erasable(f),f.set_erased(this.get_erased()));d||(q=this.get_backside_widgets(),0<q.length&&f.set_backside_widget_sides(c.UTILITIES.copy_widget_sides(q),this.get_backside_widgets_json_views()));return f},get_type_name:function(){return""},copy:function(){console.assert(!1,"copy not implemented")},add_copy_to_container:function(f){f||(f=this.copy());
var d=this.get_frontside_element(),q=f.get_frontside_element(),m=$(d).closest(".toontalk-backside"),n=c.UTILITIES.relative_position(d,m.get(0)),l=c.UTILITIES.widget_from_jquery(m);$(q).css({width:$(d).width(),height:$(d).height(),left:n.left+30,top:n.top+30});m.append(q);l&&l.add_backside_widget(f);c.robot.in_training&&c.robot.in_training.copied(this,f,!1);return f},visible:function(){var c=this.get_frontside();return c?c.visible():!1},set_visible:function(c){var d=this.get_frontside(c);d&&d.set_visible(c)},
is_backside:function(){return!1},get_parent:function(){return this.get_parent_of_frontside()},drag_started:function(f,d){c.robot.in_training&&c.robot.in_training.picked_up(this,f,d)},match:function(c){console.assert(!1,"match not implemented for "+c.toString())},removed:function(f){c.UTILITIES.report_internal_error("removed not implemented")},equals_box:function(){return!1},equals_number:function(){return!1},match_box:function(){return"not matched"},match_number:function(){return"not matched"},open_backside:function(f){var d=
this.get_backside(),q=!0,m=function(b,e){c.UTILITIES.set_timeout(function(){$(b).addClass("toontalk-side-appearing");c.UTILITIES.add_one_shot_event_handler(b,"transitionend",2500,function(){$(b).removeClass("toontalk-side-appearing");f&&f()});$(b).css({left:g,top:a,opacity:e});this.apply_backside_geometry()}.bind(this))}.bind(this),n,l,k,b,g,a,e,h;if(d){n=d.get_element();if($(n).is(":visible"))return c.UTILITIES.highlight_element(n,1E3),d;if((l=this.get_parent_of_backside())&&l.is_backside())return l.get_widget().open_backside()}l=
this.get_frontside_element();k=$(l).parent();d=$(l);if(!d.is(".toontalk-top-level-resource")){for(;0<k.length&&!k.is(".toontalk-backside");)d=k,k=k.parent(),q=!1;b=d.get(0);d=this.get_backside(!0);n=d.get_element();n.toontalk_widget=this;e=$(l).offset();(h=k.offset())||(h={left:0,top:0});$(n).css({left:e.left-h.left,top:e.top-h.top,opacity:.01});k.append(n);(k=c.UTILITIES.widget_from_jquery(k))&&k.add_backside_widget(this,!0);q?(g=b.offsetLeft+b.offsetWidth,a=b.offsetTop):(g=e.left-h.left,a=e.top-
h.top+l.offsetHeight);m(n,"inherit");d.render();this.backside_widgets&&this.backside_widgets.forEach(function(a){a.render();a.set_visible(!0)});return d}},apply_backside_geometry:function(){var f=this.get_backside(!0),d=f.get_element();this.backside_geometry&&d&&(c.backside.scale_backside($(d),this.backside_geometry.x_scale,this.backside_geometry.y_scale,this.backside_geometry.original_width,this.backside_geometry.original_height),f.set_dimensions(this.backside_geometry))},top_level_widget:function(){var f;
return this.is_of_type("top-level")?this:(f=c.UTILITIES.widget_from_jquery($(this.get_frontside_element()).closest(".toontalk-top-level-backside")))?f:(f=this.get_parent_of_frontside()||this.get_parent_of_backside())?f.get_widget().top_level_widget():this.create_top_level_widget()},backup_all:function(c){var d=this.top_level_widget();d&&d.save(c)},render:function(){c.DISPLAY_UPDATES.pending_update(this)},rerender:function(){this.visible()&&c.DISPLAY_UPDATES.pending_update(this)},hide:function(){$(this.get_frontside_element()).hide()},
close_button_ok:function(c){return"top-level"!==this.get_type_name()&&!$(c).is(".toontalk-top-level-resource")&&!$(c).closest(".toontalk-conditions-panel").is("*")},get_widget:function(){return this},add_to_top_level_backside:function(f,d){var q=this.top_level_widget(),m=f.get_frontside_element(!0);q.add_backside_widget(f);q.get_backside_element().appendChild(m);f.render();d&&c.robot.in_training&&c.robot.in_training.dropped_on(f,q);return m},create_top_level_widget:function(f){var d=Object.create(c.widget);
f||(f={});d.get_json=function(c){c=this.get_backside(!0).get_element();c=document.defaultView.getComputedStyle(c,null).getPropertyValue("background-color");return{semantic:{type:"top_level",settings:f},view:{background_color:c}}};d.get_type_name=function(){return"top-level"};d.is_of_type=function(c){return"top-level"===c};d.toString=function(){return"top level widget"};d.get_description=function(){};d.match=function(){return"matched"};d.update_display=function(){this.backside_widgets&&this.backside_widgets.forEach(function(c){c.visible()&&
c.update_display()})};d.copy=function(){return this};d.visible=function(){return!0};d.get_parent_of_frontside=function(){};d.get_parent_of_backside=function(){};d.closest_visible_ancestor=function(){return this};d.get_infinite_stack=function(){return!1};d.top_level_widget=function(){return this};d=d.add_sides_functionality(d);d=d.runnable(d);d=d.has_parent(d);d.get_setting=function(d){"undefined"===typeof f[d]&&(f[d]=c.DEFAULT_SETTINGS&&c.DEFAULT_SETTINGS[d]);return f[d]};d.set_setting=function(c,
d){f[c]=d};d.open_settings=function(){c.SETTINGS.open(d)};d.save=function(d,f,n){var l;f||(f={google_drive:c.google_drive&&this.get_setting("auto_save_to_google_drive"),local_storage:this.get_setting("auto_save_to_local_storage")});d?(f.google_drive&&(l=c.UTILITIES.get_json_top_level(this),d=c.google_drive.get_status(),"Ready"===d?(c.google_drive.upload_file(this.get_setting("program_name"),"json",JSON.stringify(l),n),n=void 0):c.google_drive.connection_to_google_drive_possible()&&console.log("Unable to save to Google Drive because: "+
d)),f.local_storage&&(l||(l=c.UTILITIES.get_json_top_level(this)),this.save_to_local_storage(l)),n&&n()):setTimeout(function(){this.save(!0,f,n)}.bind(this),100)};d.publish=function(d){c.publish.publish_widget(this.get_setting("program_name"),this,d)};d.save_to_local_storage=function(d,f){var n=this.get_setting("program_name"),l=c.UTILITIES.local_storage_program_key(n),k=c.UTILITIES.local_storage_program_meta_data_key(n),b,g,a;f||(f=Date.now());try{g=(g=window.localStorage.getItem(k))?JSON.parse(g):
{created:f},g.last_modified=f,a=JSON.stringify(d),g.file_size=a.length,window.localStorage.setItem(k,JSON.stringify(g)),window.localStorage.setItem(l,a),window.localStorage.setItem("toontalk-last-key",l),b=c.UTILITIES.get_all_locally_stored_program_names(),0>b.indexOf(n)&&(b.push(n),c.UTILITIES.set_all_locally_stored_program_names(b))}catch(e){n="Failed to save state to local storage since it requires "+JSON.stringify(d).length+" bytes. Error message is "+e,c.UTILITIES.is_internet_explorer()?console.error(n):
c.UTILITIES.display_message(n),this.last_local_storage_error=n}};d.load=function(f,m){var n=this.get_setting("program_name"),l=n+".json",k=c.UTILITIES.local_storage_program_key(n),b=function(b){b&&(b=JSON.parse(b),d.remove_all_backside_widgets(),c.UTILITIES.add_backside_widgets_from_json(d,b.semantic.backside_widgets),m&&m())},n=function(d){d?c.google_drive.download_file(d,b):b(window.localStorage.getItem(k))};f&&c.google_drive&&"Ready"===c.google_drive.get_status()?c.google_drive.get_toontalk_program_file(l,
n):b(window.localStorage.getItem(k))};d.get_backside(!0).set_visible(!0);c.debugging&&(d.debug_id=c.UTILITIES.generate_unique_id(),d.debug_string="Top-level widget");return d}}}(window.TOONTALK);window.TOONTALK.backside=function(c){return{create:function(l){var f=Object.create(this),d=document.createElement("div"),q=$(d),m=1,n=1,r=document.createElement("div"),k=document.createElement("div"),b=l.get_help_URL&&l.get_help_URL(),g,a,e,h,u,w,y,v,x,z,B,I=function(a){a?($(r).addClass("toontalk-green-flag-active").removeClass("toontalk-green-flag-inactive"),$(k).addClass("toontalk-stop-sign-inactive").removeClass("toontalk-stop-sign-active")):($(r).addClass("toontalk-green-flag-inactive").removeClass("toontalk-green-flag-active"),
$(k).addClass("toontalk-stop-sign-active").removeClass("toontalk-stop-sign-inactive"))},D=function(){var a=q.width();q.height();var b,c,e;0===a?setTimeout(D,100):(a=$(k).width(),b=(b=$(y).width())?b+14:0,$(k).css({right:b}),$(r).css({right:b+a+6}),c=$(r).width(),x&&$(x).css({right:b+a+c+12}),g&&(e=$(x).width()||0,$(g).css({right:b+a+c+e+12})))};v=this.create_description_label(f,l);var G,V;l.close_button_ok(d)&&(V=function(a){f.hide_backside(a);a.stopPropagation()},G=(G=l.get_description())?"the "+
l.get_type_name()+" who "+G:"the "+l.get_type_name(),y=c.UTILITIES.create_close_button(V,"Click to hide this back side of "+G+"."),d.appendChild(y));$(r).addClass("toontalk-green-flag toontalk-green-flag-inactive").click(function(a){l.can_run()?(I(!0),l.set_running(!0)):l.is_of_type("top-level")?c.UTILITIES.display_message("There is nothing to run."):c.UTILITIES.display_message("This "+l+" has nothing to run. Add some robots on the back.")}).on("mouseenter",function(a){a=l.get_running()?"Click to stop this from running.":
l.can_run()?"This has stopped. Click on the flag to start running it.":"There is nothing to run here.";k.title=a});$(k).addClass("toontalk-stop-sign toontalk-stop-sign-active").click(function(a){I(!1);l.set_running(!1)}).on("mouseenter",function(a){a=l.get_running()?"To stop this click on the stop sign.":l.can_run()?"Click this to start this running.":"There is nothing to run on this.";r.title=a});d.appendChild(r);d.appendChild(k);b&&(x=document.createElement("div"),$(x).addClass("toontalk-help-button toontalk-widget-help-button").click(function(a){z=
document.createElement("iframe");$(z).addClass("toontalk-help-frame");z.src=b;document.body.appendChild(B);document.body.appendChild(z)}),x.innerHTML="i",x.title="Click to learn more about "+l.get_type_name()+".",B=document.createElement("div"),$(B).addClass("toontalk-close-help-frame-button").button().click(function(a){$(z).remove();$(B).remove()}),B.innerHTML="Return to ToonTalk",d.appendChild(x));v&&d.appendChild(v);l.is_of_type("top-level")&&(g=document.createElement("div"),$(g).addClass("toontalk-settings-button").click(function(a){l.open_settings()}),
g.title="Click to change settings or open a different program.",d.appendChild(g));c.UTILITIES.set_timeout(D);q.addClass("toontalk-backside toontalk-side toontalk-backside-of-"+l.get_type_name());q.css({"z-index":c.UTILITIES.next_z_index()});f.get_element=function(){return d};f.get_widget=function(){return l};f.visible=function(){return a};f.set_visible=function(b){var c=this.get_widget().get_backside_widgets();a=b;c.forEach(function(a){a.set_visible(b)})};l.get_backside||(l.get_backside=function(){return f});
l.removed_from_container||(l.removed_from_container=function(a,b,e,d){c.robot.in_training||this.remove_backside_widget(a,b,d)});f.widget_dropped_on_me=function(a,b,e,h,g){var f=this.get_widget(),k,m;b?(k=a.get_backside(!0),m=k.get_element(),k.rerender()):(k=a.get_frontside(!0),m=k.get_element(),a.rerender());k=$(m);q.append(k);this.is_of_type("top-level")?h&&!h.visible()&&k.addClass("toontalk-widget-added-to-backside-by-unwatched-robot"):e||a.animate_to_element(d);c.UTILITIES.set_position_is_absolute(m,
!0,e);c.robot.in_training&&!g&&c.robot.in_training.dropped_on(a,this.get_widget());b&&"top-level"!=this.get_widget().get_type_name()&&(h=a.get_backside(),a.forget_backside(),a.remove(e),a.set_backside(h));f.add_backside_widget(a,b);a.dropped_on_other&&a.dropped_on_other(this.get_widget(),!0,e);a.get_body&&a.get_body().is_empty()&&!a.being_trained&&(h=a.open_backside())&&$(h.get_element()).find(".toontalk-train-backside-button").click();e&&a.get_widget().backup_all();return!0};f.add_backside_widgets=
function(a,b){0!==a.length&&c.UTILITIES.set_timeout(function(){var c,e,d=this.visible();a.forEach(function(a,h){var g=a.get_widget().get_backside();c=a.get_element(!0);c.toontalk_widget=a.get_widget();b&&(e=b[h])&&(a.is_backside()?($(c).css({left:e.backside_left,top:e.backside_top,width:e.backside_width,height:e.backside_height}),a.get_widget().apply_backside_geometry(),e.advanced_settings_open&&g.set_advanced_settings_showing(!0,g.get_element())):(0===e.frontside_width&&(e.frontside_width=""),0===
e.frontside_height&&(e.frontside_height=""),$(c).css({left:e.frontside_left,top:e.frontside_top,width:e.frontside_width,height:e.frontside_height})));q.append(c);a.set_visible(d);a.get_widget().rerender()})}.bind(this))};f.get_backside_dimensions=function(){if(m)return{x_scale:m,y_scale:n,original_width:e,original_height:h}};f.set_dimensions=function(a){m=a.x_scale;n=a.y_scale;e=a.original_width;h=a.original_height};f.scale_to_fit=function(a,b){var d;!e&&this.get_widget().backside_geometry&&(e=this.get_widget().backside_geometry.original_width,
h=this.get_widget().backside_geometry.original_height);d=c.UTILITIES.scale_to_fit(a,b,e,h);m=d.x_scale;n=d.y_scale};f.run_status_changed=function(a){I(a)};d.toontalk_widget=l;c.UTILITIES.drag_and_drop(d);q.resizable({start:function(){u=q.width();w=q.height();e||(e=u);h||(h=w)},resize:function(a,b){var d=b.size.width,g=b.size.height;q.is(".toontalk-top-level-backside")||(m*=d/u,n*=g/w,u=d,w=g,c.backside.scale_backside(q,m,n,e,h))},handles:"e,s,se"});d.addEventListener("mouseenter",function(a){var b=
l.get_frontside(),e=l.get_parent_of_backside();!b||e&&!e.get_widget().is_of_type("top-level")||c.UTILITIES.highlight_element(b.get_element(),a)});d.addEventListener("mouseout",function(a){l.get_frontside()&&c.UTILITIES.remove_highlight()});f.update_display=function(){f.display_updated()};f.display_updated=function(){var a=$(this.get_element());e||(e=a.width());h||(h=a.height())};l.get_backside_widgets&&(v=l.get_backside_widgets(),f.add_backside_widgets(v,l.get_backside_widgets_json_views()));c.debugging&&
(d.id=l.debug_id);return f},toString:function(){return"backside of "+this.get_widget()},remove_element:function(){$(this.get_element()).remove()},create_infinite_stack_check_box:function(l,f){var d=c.UTILITIES.create_check_box(f.get_infinite_stack(),"toontalk-infinite-stack-check-box","Copy when dragged.","Check this if you want the "+f.get_type_name()+" to be copied instead of moved.");$(d.button).click(function(l){var m=d.button.checked;f.set_infinite_stack(m);c.robot.in_training&&c.robot.in_training.edited(f,
{setter_name:"set_infinite_stack",argument_1:m,toString:m?"change dragging to make a copy of ":"change dragging back to moving for ",button_selector:".toontalk-infinite-stack-check-box"});l.stopPropagation()});return d},create_description_label:function(l,f){var d=f.get_description();if(d)return c.UTILITIES.create_text_element("Back side of a "+f.get_type_name()+" that "+d)},add_advanced_settings:function(l){var f=this.get_widget(),d=this.create_infinite_stack_check_box(this,f),q=f.get_type_name(),
m=c.UTILITIES.create_text_area(f.get_description(),"toontalk-description-input","This&nbsp;"+q+"&nbsp;","Type here to provide additional information about this "+q+"."),n=$("<button>Make a sensor</button>").button(),r=function(){var b=m.button.value.trim();f.set_description(b,!0)&&c.robot.in_training&&c.robot.in_training.edited(f,{setter_name:"set_description",argument_1:b,toString:"change the description to '"+b+"'' of the "+q,button_selector:".toontalk-description-input"})},k=document.createElement("table"),
b=this.get_element();$(k).addClass("toontalk-advanced-setting");$(m.button).val(f.get_description());m.button.addEventListener("change",r);m.button.addEventListener("mouseout",r);n.click(function(b){b=c.sensor.create("click","which",void 0,void 0,!0,f);var a=b.get_frontside_element(!0),e=n.offset();f.add_to_top_level_backside(b,!0);e.left-=120;c.UTILITIES.set_absolute_position($(a),e)});n.attr("title","Click to create a nest which receives messages when events happen to this "+f.get_type_name()+".");
k.appendChild(c.UTILITIES.create_row(m.container));k.appendChild(c.UTILITIES.create_row(n.get(0),d.container));b.appendChild(k);l?$(b).find(".toontalk-settings-backside-button").remove():$(b).find(".toontalk-advanced-setting").hide()},get_type_name:function(){return"the backside of "+c.UTILITIES.add_a_or_an(this.get_widget().get_type_name())},hide_backside:function(l){var f=this.get_widget(),d=f.get_frontside_element(),q=$(f.get_backside_element()),m=q.position(),n=q.parent().closest(".toontalk-backside"),
r=f.get_parent_of_backside();c.UTILITIES.remove_highlight();r&&(r.is_backside()?f.set_parent_of_backside(void 0,!0):r.removed_from_container(f,!0,l,!0),f.forget_backside&&f.forget_backside());(function(){var c=f.get_backside_widgets(),b=f.get_backside_widgets_json_views(!0),d;c.forEach(function(a,c){a.get_widget();var h;if(d=a.get_element())b[c]||(b[c]={}),a.start_position?(h=a.start_position,a.start_position=void 0):h=$(d).position(),a.is_backside()?(b[c].backside_left=h.left,b[c].backside_top=h.top):
(b[c].frontside_left=h.left,b[c].frontside_top=h.top)})})();f.backside_geometry=this.get_backside_dimensions();(function(f){var b=$(d).offset(),g=n.position(),a=function(){f.remove()};f.is(":visible")&&(f.addClass("toontalk-side-appearing"),c.UTILITIES.add_one_shot_event_handler(f.get(0),"transitionend",2500,a),g||(g={left:0,top:0}),f.css({left:b.left-g.left,top:b.top-g.top,opacity:.1}))})(q);$(d).is(":visible")||(m&&$(d).css({left:m.left,top:m.top}),c.UTILITIES.widget_from_jquery(n).add_backside_widget(f),
n.append(d),f.render());f.backside_widgets&&f.backside_widgets.forEach(function(c){c.set_visible(!1)})},create_advanced_settings_button:function(l,f){var d=document.createElement("div"),q=$(d),m=!1;d.innerHTML="&gt;";q.addClass("toontalk-settings-backside-button");q.css({"z-index":c.UTILITIES.next_z_index()});q.click(function(c){m=!m;this.set_advanced_settings_showing(m,l.get_element(),q);c.stopPropagation()}.bind(this));q.attr("title","Click to see the advanced settings of this "+f.get_type_name()+
".");return q.get(0)},set_advanced_settings_showing:function(c,f,d){d||(d=$(f).find(".toontalk-settings-backside-button"));c?($(f).find(".toontalk-advanced-setting").show(),d.html("<"),d.attr("title","Click to hide the advanced settings.")):($(f).find(".toontalk-advanced-setting").hide(),d.html(">"),d.attr("title","Click to show the advanced settings."))},get_widgets:function(){var c=[];$(this.get_element()).children().each(function(f,d){var q=d.toontalk_widget;q&&0>c.indexOf(q)&&c.push(q)});return c},
scale_backside:function(c,f,d,q,m){var n=Math.min(1,f,d);1===f&&1===d?c.css({width:"",height:""}):c.css({transform:"scale("+n+", "+n+")","transform-origin":"top left",width:q*f/n,height:m*d/n})},render:function(){c.DISPLAY_UPDATES.pending_update(this)},rerender:function(){this.visible()&&c.DISPLAY_UPDATES.pending_update(this)},remove_backside_widget:function(c,f,d){return this.get_widget().remove_backside_widget(c,f,d)},remove:function(){this.get_widget().remove()},is_backside:function(){return!0},
get_parent:function(){return this.get_parent_of_backside()},is_of_type:function(c){return this.get_widget().is_of_type(c)}}}(window.TOONTALK);window.TOONTALK.frontside=function(c){return{create:function(l){var f=Object.create(this),d=document.createElement("div"),q=$(d),m;$(d).addClass("toontalk-frontside toontalk-side");d.toontalk_widget=l;c.UTILITIES.drag_and_drop(d);f.get_element=function(){return d};f.get_widget=function(){return l};f.visible=function(){return m};f.set_visible=function(c){var d=this.get_widget();m=c;d.walk_children&&d.walk_children(function(d){d.set_visible(c);return!0})};d.addEventListener("click",function(d){$(d.target).is(".ui-resizable-handle")||
1!==d.which||(q.is(".toontalk-top-level-resource")?l.set_running(!l.get_running()):l.get_running()?c.debugging&&console.log("Ignoring click on running widget."):l.open_backside(),d.stopPropagation())});d.addEventListener("mouseenter",function(d){(d=l.get_backside())&&c.UTILITIES.highlight_element(d.get_element())});d.addEventListener("mouseout",function(d){l.get_backside()&&c.UTILITIES.remove_highlight()});c.debugging&&(d.id=l.debug_id);return f},update_display:function(){return this.get_widget().update_display()},
remove:function(){$(this.get_element()).remove()}}}(window.TOONTALK);window.TOONTALK.number=function(c){var l=Object.create(c.widget),f=function(a,b,c,d){var g="",f=100;c=50/c;b/=1+b;if(d)for(d=0;f>=c&&d<a.length;)g=g+"<span class='toontalk-digit' style='font-size:"+f+"%'>"+a[d]+"</span>",d+=1,"-"!==a[d]&&(f*=b);else for(d=a.length-1;f>=c&&0<d;)g="<span class='toontalk-digit' style='font-size:"+f+"%'>"+a[d]+"</span>"+g,d-=1,"-"!==a[d]&&(f*=b);return g},d=function(a,b){var c=a/(1+a);return Math.ceil(Math.log(.5/b)/Math.log(c))},q=function(a,b,c){if(a.length<=Math.round(b))return'<span class="toontalk-digit" style="font-size:100%">'+
a+"</span>";if(1>b)return"";if(5>b)return"<span style='font-size: 80%'>"+q(a,1.25*b,.8*c)+"</span>";b=b/2-1;return f(a,b,c,!0)+f(a,b,c,!1)},m=function(a,b,c){var d="",g=new BigInteger(10),f=a.isNegative();for(f&&(a=a.abs());c>d.length;)if(a=a.multiply(g),0>a.compare(b))d+="0";else if(d+=a.divide(b).toString(),a=a.remainder(b).multiply(g),a.isZero())return f&&(d="-"+d),d=n(d);f&&(d="-"+d);return d},n=function(a){return 0<a.length&&"0"===a.charAt(a.length-1)?n(a.substring(0,a.length-1)):a},r=function(a,
b){var c=Math.min(b,a/2);return a-(c+1)},k=function(a,b){b||(b=1);if(!("number"!==typeof a&&"string"!==typeof a||"number"!==typeof b&&"string"!==typeof b))return bigrat.fromValues(a,b);var c=bigrat.create();1===b?bigrat.set(c,bigrat.toBigInteger(a.get_value()),BigInteger.ONE):a.get_value&&b.get_value?bigrat.set(c,bigrat.toBigInteger(a.get_value()),bigrat.toBigInteger(b.get_value())):bigrat.set(c,a,b);return c},b=function(a){switch(a){case "+":return"";case "-":return"&minus;";case "*":return"&times;";
case "/":return"&divide;";case "^":return"^";default:return c.UTILITIES.report_internal_error("Number has an unsupported operator: "+a),""}},g=bigrat.fromInteger(10);l.create=function(a,b,d,g,f){var m=Object.create(l),n=k(a,b);g||(g="improper_fraction");d||(d="+");m.set_value=function(a){if(!bigrat.equals(n,a))return this.fire_value_change_listeners(n,a),n=a,this.rerender(),c.debugging&&(this.debug_string=this.toString()),this};m.set_value_from_sub_classes=m.set_value;m.fire_value_change_listeners=
function(a,b){var c=this.get_listeners("value_changed"),e;c&&(e={type:"value_changed",old_value:a,new_value:b},c.forEach(function(a){a(e)}))};m.get_value=function(){return n};m.set_value_from_decimal=function(a){"number"===typeof a?this.set_value(bigrat.fromInteger(a)):this.set_value(bigrat.fromDecimal(a))};m.get_format=function(){return g};m.set_format=function(a,b){g=a;b&&this.rerender();return this};m.get_operator=function(){return d};m.set_operator=function(a,b){d=a;b&&this.rerender();return this};
m=l.add_standard_widget_functionality(m);m.set_description(f);c.debugging&&(m.debug_string=m.toString(),m.debug_id=c.UTILITIES.generate_unique_id(),n.debug_id_new=m.debug_id);return m};l.create_backside=function(){return c.number_backside.create(this)};l.set_from_values=function(a,b){return this.set_value(k(a,b))};l.ONE=function(){return this.create(1)};l.ZERO=function(){return this.create(0)};l.copy=function(a){return this.add_to_copy(l.create(this.get_value()[0],this.get_value()[1],this.get_operator(),
this.get_format(),this.get_description()),a)};l.is_number=function(){return!0};l.equals=function(a){return a.equals_number&&a.equals_number(this)};l.equals_number=function(a){return bigrat.equals(this.get_value(),a.get_value())};l.compare_with=function(a){if(a.compare_with_number)return-1*a.compare_with_number(this)};l.compare_with_number=function(a){return bigrat.equals(this.get_value(),a.get_value())?0:bigrat.isGreaterThan(this.get_value(),a.get_value())?1:-1};l.update_display=function(){var a,
b,d,g,f;a=this.get_frontside(!0).get_element();$(a).is(".toontalk-conditions-contents")?b=$(a):$(a).parent().is(".toontalk-backside, .toontalk-json")?(b=$(a),f=!0):b=$(a).parent().is(".toontalk-scale-half")?$(a):$(a).parent();if($(a).is(".toontalk-carried-by-bird"))d=100,g=40;else if($(a).is(".toontalk-element-attribute"))d=200,g=32;else{if(!b.is(":visible"))return;d=b.width();g=b.height();if(0===d||0===g)return;b.is(".toontalk-nest")&&(d*=.8,g*=.8)}$(a).removeClass("toontalk-number-eighth-size-border toontalk-number-quarter-size-border toontalk-number-half-size-border toontalk-number-full-size-border");
32>=d||32>=g?($(a).addClass("toontalk-number-eighth-size-border"),a.toontalk_border_size=4):64>=d||64>=g?($(a).addClass("toontalk-number-quarter-size-border"),a.toontalk_border_size=8):128>=d||128>=g?($(a).addClass("toontalk-number-half-size-border"),a.toontalk_border_size=16):($(a).addClass("toontalk-number-full-size-border"),a.toontalk_border_size=32);b=g-2*a.toontalk_border_size;f=this.to_HTML(d/(.64*b),b,this.get_format(),!0,this.get_operator(),f);c.UTILITIES.on_a_nest_in_a_box(a)&&(d="width:"+
d+"px;",b=f.indexOf('style="'),f=0<=b?f.substring(0,b+7)+d+f.substring(b+7):f);d=$(a).children(".toontalk-widget");d.is("*")?d=d.get(0):(d=document.createElement("div"),a.appendChild(d));d.innerHTML=f;$(d).addClass("toontalk-widget");a.title=this.get_title();(a=this.get_backside())&&a.rerender()};l.to_HTML=function(a,c,h,k,n,l){var v,x,z,B,I,D,G=!1!==k?" toontalk-top-level-number":"";l&&(G+=" toontalk-number-size-unconstrained-by-container");x=n?b(n):"";a||(a=4);c||(c=16);if(this.get_erased&&this.get_erased())return'<div class="toontalk-number toontalk-integer'+
G+'" style="font-size: '+c+'px;"></div>';0<x.length&&(a-=1,2>a&&(c*=Math.max(1,a)/2,a=2));if(this.is_integer()&&"scientific_notation"!==h)return v=bigrat.toBigInteger(this.get_value()).toString(),z=v.length,0<x.length&&z++,4>a&&z>a&&(z=Math.min(4,z),c*=a/z,a=z),'<div class="toontalk-number toontalk-integer'+G+'" style="font-size: '+c+'px;">'+x+q(v,a,c)+"</div>";v=' style="font-size:'+.4*c+'px;"';if("improper_fraction"===h||!h)return c='<table class="toontalk-number toontalk-improper-fraction'+G+'"'+
v+'><tr class="toontalk-numerator"><td align="center" class="toontalk-number">'+q(this.numerator_string(),2*a,c)+'</td></tr><tr class="toontalk-fraction-line-as-row"><td  class="toontalk-fraction-line-as-table-entry"><div class="toontalk-fraction-line"></div></tr><tr class="toontalk-denominator"><td align="center" class="toontalk-number">'+q(this.denominator_string(),2*a,c)+"</td></tr></table>",""===x?c:"<table class='toontalk-operator-and-fraction'"+v+"><tr><td>"+x+"</td><td>"+c+"</td></tr></table>";
if("mixed_number"===h||"proper_fraction"===h){x=this.integer_part();if(x.is_zero())return this.to_HTML(a,c,"improper_fraction",k,n);z=this.copy().subtract(x).absolute_value();return'<table class="toontalk-number toontalk-mixed-number'+G+'"'+v+'><tr><td class="toontalk-number toontalk-integer-part-of-mixed-number">'+x.to_HTML(a/2,c,"",!1,this.get_operator())+'</td><td class="toontalk-number toontalk-fraction-part-of-mixed-number">'+z.to_HTML(a/2,c,"improper_fraction",!1)+"</td></tr></table>"}if("decimal"===
h)return 4>a&&(c*=Math.max(1,a)/4,a=4),'<div class="toontalk-number toontalk-decimal'+G+'" style="font-size: '+c+'px;">'+x+this.decimal_string(a,c)+"</div>";if("scientific_notation"===h){z=bigrat.isNegative(this.get_value());B=this.get_value();I=bigrat.abs(bigrat.create(),B);B=bigrat.isLessThan(I,bigrat.ONE);I=(B?bigrat.toBigInteger(bigrat.divide(bigrat.create(),bigrat.ONE,I)):bigrat.toBigInteger(I)).toString();B=B?-I.length:I.length-1;I=bigrat.power(bigrat.create(),g,B);D=bigrat.divide(bigrat.create(),
this.get_value(),I);I=6+(0===B?1:Math.ceil(Math.log10(Math.abs(B)))/2);z&&I++;if(a<I+1)return this.to_HTML(I+1,c*a/(I+1),h,k,n,l);k=d(r(a,I),c);k=m(D[0],D[1],k);z?(z=k.substring(0,2),k=k.substring(2)):(z=k.substring(0,1),k=k.substring(1));a=f(k,a*(1-I/a),c,!0);0<a.length&&(a="<span class='toontalk-decimal-point'>.</span>"+a);return'<table class="toontalk-number toontalk-scientific_notation'+G+'"'+v+'><tr><td class="toontalk-number toontalk-significand-of-scientific-notation"><div class="toontalk-number toontalk-decimal'+
G+'" style="font-size: '+c+'px;">'+x+z+a+'</td><td class="toontalk-number toontalk-exponent-of-scientific-notation"><div style="font-size: '+c+'px;"> &times;10<sup style="font-size: '+c/2+'px;">'+B+"</sup></div></td></tr></table>"}};l.drop_on=function(a,b,c,d){if(a.number_dropped_on_me)return a.number_dropped_on_me(this,b,c,d),!0;if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,b,c,d);console.log("No handler for drop of '"+this+"' on '"+a+"'")};l.number_dropped_on_me=function(a,b,d,g){var f,
k,m,n;return a.visible()&&(d||g&&g.visible())?(g&&(a.robot_waiting_before_next_step=g),f=document.createElement("div"),$(f).addClass("toontalk-bammer-down"),k=$(this.get_frontside_element()).closest(".toontalk-top-level-backside"),f.style.left="-10px",f.style.top=k.height()+"px",k.append(f),b=this.get_frontside_element(),m=$(b).offset(),m.left-=.75*$(f).width(),m.left+=.5*$(b).width()+.1*$(f).width(),m.top-=.5*$(b).height()+.4*$(f).height(),b=function(){this.number_dropped_on_me_semantics(a,d,g)&&
g&&g.run_next_step();d&&this.backup_all();$(f).removeClass("toontalk-bammer-down");c.UTILITIES.set_timeout(function(){var a=k.offset();a||(a={left:0,top:0});$(f).addClass("toontalk-bammer-away");m.left=a.left+k.width()-100;m.top=a.top+k.height()+100;n=function(){$(f).remove()};c.UTILITIES.animate_to_absolute_position(f,m,n);$(f).css({opacity:.01})})}.bind(this),c.UTILITIES.animate_to_absolute_position(f,m,b),$(f).css({opacity:1,"z-index":c.UTILITIES.next_z_index()+100}),this):this.number_dropped_on_me_semantics(a,
d,g)};l.number_dropped_on_me_semantics=function(a,b,d){c.robot.in_training&&c.robot.in_training.dropped_on(a,this);a.remove();switch(a.get_operator()){case "+":return this.add(a);case "-":return this.subtract(a);case "*":return this.multiply(a);case "/":return this.divide(a);case "^":return this.power(a);default:c.UTILITIES.report_internal_error("Number received a number with unsupported operator: "+a.get_operator())}};l.widget_dropped_on_me=function(a,b,c,d){return a.number_dropped_on_me?this.number_dropped_on_me(a,
b,c,d):!1};l.add=function(a){this.set_value(bigrat.add(bigrat.create(),this.get_value(),a.get_value()));return this};l.subtract=function(a){this.set_value(bigrat.subtract(bigrat.create(),this.get_value(),a.get_value()));return this};l.multiply=function(a){this.set_value(bigrat.multiply(bigrat.create(),this.get_value(),a.get_value()));return this};l.divide=function(a){this.set_value(bigrat.divide(bigrat.create(),this.get_value(),a.get_value()));return this};l.power=function(a){this.set_value(bigrat.power(bigrat.create(),
this.get_value(),bigrat.toInteger(a.get_value())));return this};l.absolute_value=function(){this.set_value(bigrat.abs(bigrat.create(),this.get_value()));return this};l.is_zero=function(){return bigrat.equals(this.get_value(),bigrat.ZERO)};l.is_negative=function(){return bigrat.isNegative(this.get_value())};l.toString=function(){return("+"===this.get_operator()?"":this.get_operator())+bigrat.str(this.get_value())};l.to_float=function(){return bigrat.toDecimal(this.get_value())};l.get_type_name=function(){return"number"};
l.get_help_URL=function(){return"docs/manual/numbers.html"};l.get_json=function(){return{type:"number",operator:this.get_operator(),numerator:this.numerator_string(),denominator:this.denominator_string(),format:this.get_format()}};c.creators_from_json.number=function(a){return l.create(a.numerator,a.denominator,a.operator,a.format,a.description)};l.is_integer=function(){return 0===this.get_value()[1].compare(BigInteger.ONE)||0===this.get_value()[0].compare(BigInteger.ZERO)};l.numerator=function(){var a=
bigrat.create();return bigrat.set(a,this.get_value()[0],BigInteger.ONE)};l.denominator=function(){var a=bigrat.create();return bigrat.set(a,this.get_value()[1],BigInteger.ONE)};l.numerator_string=function(){return this.get_value()[0].toString()};l.denominator_string=function(){return this.get_value()[1].toString()};l.integer_part=function(){return this.create(this)};l.decimal_string=function(a,b){if(this.is_integer())return this.numerator_string();var c=l.copy.call(this),g=c.integer_part(),k=g.toString();
"0"===k&&this.is_negative()&&(k="-"+k);var n=c.subtract(g),g=r(a,k.length),v=d(g,b),c=Math.min(k.length,a/2),n=n.absolute_value(),v=m(n.get_value()[0],n.get_value()[1],v),g=v.length<a?v:f(v,g,b,!0);return q(k,c,b)+"<span class='toontalk-decimal-point'>.</span>"+g};l.match=function(a){return this.get_erased&&this.get_erased()?a.match_with_any_number?a.match_with_any_number():"not matched":a.match_with_this_number?a.match_with_this_number(this):"not matched"};l.match_with_any_number=function(){return"matched"};
l.match_with_this_number=function(a){return a.equals(this)?"matched":"not matched"};return l}(window.TOONTALK);
window.TOONTALK.number_backside=function(c){return{create:function(l){var f=c.backside.create(l),d=f.get_element(),q=document.createElement("div"),m=l.numerator_string(),n=l.denominator_string(),r=c.UTILITIES.create_text_area(m,"toontalk-numerator-input","","Type here to edit the numerator"),k=c.UTILITIES.create_text_area(n,"toontalk-denominator-input","","Type here to edit the denominator"),b=c.UTILITIES.create_radio_button("number_format","decimal","toontalk-decimal-radio-button","Decimal number",
"Display number as a decimal."),g=c.UTILITIES.create_radio_button("number_format","proper_fraction","toontalk-proper-fraction-radio-button","Mixed number","Display number as an integer part and a proper fraction."),a=c.UTILITIES.create_radio_button("number_format","improper_fraction","toontalk-improper-fraction-radio-button","Improper fraction","Display number as a simple fraction."),e=c.UTILITIES.create_radio_button("number_format","scientific_notation","toontalk-scientific-notation-radio-button",
"Scientific notation","Display number as a decimal between 1 and 10 multiplied by ten to some power."),h=c.UTILITIES.create_radio_button("operator","+","toontalk-plus-radio-button","+","Add me to what I'm dropped on."),u=c.UTILITIES.create_radio_button("operator","-","toontalk-minus-radio-button","&minus;","Subtract me from what I'm dropped on."),w=c.UTILITIES.create_radio_button("operator","*","toontalk-times-radio-button","&times;","Multiply me with what I'm dropped on."),y=c.UTILITIES.create_radio_button("operator",
"/","toontalk-dividie-radio-button","&divide;","Divide me into what I'm dropped on."),v=c.UTILITIES.create_radio_button("operator","^","toontalk-power-radio-button","Integer power","Use me as the number of times to multiply together what I'm dropped on."),x=function(a){var b=r.button.value.trim(),e=k.button.value.trim();if(b!==m||e!==n)l.set_from_values(b,e),m=b,n=e,c.robot.in_training&&(a=a.srcElement.className.split(" ",1)[0],c.robot.in_training.edited(l,{setter_name:"set_from_values",argument_1:b,
argument_2:e,toString:"toontalk-denominator-input"===a?"change value of the denominator to "+e+" of the number":"change value of the numerator to "+b+" of the number",button_selector:"."+a}))},z=function(){var d=c.UTILITIES.selected_radio_button(b.button,g.button,a.button,e.button),h=d.value;l.set_format(h,!0);c.robot.in_training&&c.robot.in_training.edited(l,{setter_name:"set_format",argument_1:h,toString:"change the format to "+h+" of the number",button_selector:"."+d.className.split(" ",1)[0]})},
B=function(){var a=c.UTILITIES.selected_radio_button(h.button,u.button,w.button,y.button,v.button),b=a.value;l.set_operator(b,!0);c.robot.in_training&&c.robot.in_training.edited(l,{setter_name:"set_operator",argument_1:b,toString:"change the operator to "+b+" of the number",button_selector:"."+a.className.split(" ",1)[0]})},I=c.UTILITIES.create_horizontal_table(r.container,q,k.container),D=$(c.UTILITIES.create_horizontal_table(b.container,g.container,a.container,e.container)).buttonset().get(0),G=
$(c.UTILITIES.create_horizontal_table(h.container,u.container,w.container,y.container,v.container)).buttonset().get(0),V=c.backside.create_advanced_settings_button(f,l),K=f.update_display;q.innerHTML="/";$(q).addClass("ui-widget");d.appendChild(I);d.appendChild(V);r.button.addEventListener("change",x);r.button.addEventListener("mouseout",x);r.button.addEventListener("mouseenter",function(){m=r.button.value.trim();n=k.button.value.trim()});k.button.addEventListener("change",x);k.button.addEventListener("mouseout",
x);b.button.addEventListener("change",z);g.button.addEventListener("change",z);a.button.addEventListener("change",z);e.button.addEventListener("change",z);switch(l.get_format()){case "decimal":c.UTILITIES.check_radio_button(b);break;case "improper_fraction":c.UTILITIES.check_radio_button(a);break;case "mixed_number":case "proper_fraction":c.UTILITIES.check_radio_button(g);break;case "scientific_format":c.UTILITIES.check_radio_button(e)}switch(l.get_operator()){case "+":c.UTILITIES.check_radio_button(h);
break;case "-":c.UTILITIES.check_radio_button(u);break;case "*":c.UTILITIES.check_radio_button(w);break;case "/":c.UTILITIES.check_radio_button(y);break;case "^":c.UTILITIES.check_radio_button(v)}h.button.addEventListener("change",B);u.button.addEventListener("change",B);w.button.addEventListener("change",B);y.button.addEventListener("change",B);v.button.addEventListener("change",B);f.update_display=function(){$(r.button).val(l.numerator_string());$(k.button).val(l.denominator_string());K()};$(D).addClass("toontalk-advanced-setting");
$(G).addClass("toontalk-advanced-setting");d.appendChild(D);d.appendChild(G);f.add_advanced_settings();return f}}}(window.TOONTALK);window.TOONTALK.box=function(c){var l=Object.create(c.widget);l.create=function(f,d,q,m){var n=Object.create(l),r=[],k;"undefined"===typeof d&&(d=!0);n.get_horizontal=function(){return d};n.set_horizontal=function(b,c){d=b;c&&($(this.get_frontside_element()).children(".toontalk-side").remove(),this.rerender());return this};n.get_hole=function(b){return r[b]};n.get_hole_contents=function(b){return r[b].get_contents()};n.set_hole=function(b,d,a){r[b].set_contents(d);a&&(d&&d.save_dimensions(),this.update_hole_display(b,
d));this.rerender();c.debugging&&(this.debug_string=this.toString())};n.get_holes=function(){return r};n.temporarily_remove_contents=function(b,c){var a=this.get_index_of(b);this.temporarily_removed_contents||(this.temporarily_removed_contents=[]);this.temporarily_removed_contents[a]=b;this.set_hole(a,void 0,c);return function(){this.set_hole(a,b,c);this.temporarily_removed_contents[a]=void 0}.bind(this)};n.get_contents_temporarily_removed=function(b){if(this.temporarily_removed_contents)return this.temporarily_removed_contents[b]};
n.set_contents=function(b){b.forEach(function(b,a){r[a].set_contents(b)})};n.get_size=function(){return f};n.set_size=function(b,d){var a;if(f===b)return!1;r.length=b;if(b>f)for(a=f;a<b;a++)r[a]=c.box_hole.create(a),r[a].set_parent_of_frontside(n);f=b;d&&this.rerender();c.debugging&&(this.debug_string=this.toString());return!0};n.copy=function(b){var c=r.map(function(a){if(a=a.get_contents())return a.copy(b)}),c=l.create(f,d,c,this.get_description());return this.add_to_copy(c,b)};n=n.add_standard_widget_functionality(n);
for(k=0;k<f;k++)r[k]=c.box_hole.create(k),r[k].set_parent_of_frontside(n);n.set_description(m);n.set_contents(q);c.debugging&&(n.debug_string=n.toString(),n.debug_id=c.UTILITIES.generate_unique_id());return n};l.create_backside=function(){return c.box_backside.create(this)};l.equals=function(c){return c.equals_box&&c.equals_box(this)};l.equals_box=function(c){var d=this.get_size(),l,m,n;if(d!==c.get_size())return!1;for(l=0;l<d;l++)if(m=this.get_hole_contents(l),n=c.get_hole_contents(l),!m&&n||m&&
!n||m&&n&&(!m.equals||!m.equals(n)))return!1;return!0};l.compare_with=function(c){if(c.compare_with_box)return-1*c.compare_with_box(this)};l.compare_with_box=function(c){var d=this.get_size(),l=c.get_size(),m,n;if(d>l)return 1;if(d<l)return-1;for(l=0;l<d;l++){m=this.get_hole_contents(l);n=c.get_hole_contents(l);if(m&&!n)return 1;if(!m&&n)return-1;if(m&&n)if(m.compare_with){if(m=m.compare_with(n),1===m||-1===m)return m}else return}return 0};l.match=function(c){return this.get_erased&&this.get_erased()?
c.match_with_any_box?c.match_with_any_box():"not matched":c.match_with_this_box?c.match_with_this_box(this):"not matched"};l.match_with_any_box=function(){return"matched"};l.match_with_this_box=function(f){var d=this.get_size(),l=[],m,n,r;if(d!==f.get_size())return"not matched";for(m=0;m<d;m++)if(r=f.get_hole_contents(m)){n=this.get_hole_contents(m);if(!n)return"not matched";n=c.UTILITIES.match(r,n);if("not matched"===n)return"not matched";"matched"!==n&&(l=0===l.length?n:l.concat(n))}return 0<l.length?
l:"matched"};l.toString=function(){var c="",d=this.get_size(),l,m,n=this.get_type_name()+" that looks like ";for(l=0;l<d;l++)m=this.get_hole(l),c+=m.get_full_description(),l<d-1&&(c+=" | ");return n+"["+c.replace(n,"")+"]"};l.get_type_name=function(){return"box"};l.get_help_URL=function(){return"docs/manual/boxes.html"};l.get_json=function(f){var d=[],l=this.get_size(),m;for(m=0;m<l;m++)this.get_hole_contents(m)?d[m]=c.UTILITIES.get_json(this.get_hole_contents(m),f):d[m]=null;return{type:"box",size:l,
contents:d,horizontal:this.get_horizontal()}};l.walk_children=function(c){var d=this.get_size(),l;for(l=0;l<d&&c(this.get_hole(l));l++);};c.creators_from_json.box=function(f,d){return l.create(f.size,f.horizontal,c.UTILITIES.create_array_from_json(f.contents,d),f.description)};l.update_display=function(){var f=this.get_frontside(!0).get_element(),d=this.get_size(),l=function(d,g,f){var k=g.get_frontside_element(!0),n,l;m?(n=b*f,1<f&&(n+=h*(f-1)),l=0):(n=0,l=a*f,1<f&&(l+=h*(f-1)));$(d).css({left:n,
top:l,width:b,height:a});d!==k&&($(k).css({left:0,top:0,width:"",height:""}),d.appendChild(k));c.UTILITIES.has_animating_image(k)||(0<f&&($(d).removeClass("toontalk-box-eighth-size-border-left toontalk-box-quarter-size-border-left toontalk-box-half-size-border-left toontalk-box-full-size-border-left"),$(d).removeClass("toontalk-box-eighth-size-border-top toontalk-box-quarter-size-border-top toontalk-box-half-size-border-top toontalk-box-full-size-border-top"),m?$(d).addClass(e+"-left"):$(d).addClass(e+
"-top")),d.toontalk_border_size=h);g.render()},m=this.get_horizontal();$(f).is(".toontalk-box");var n=function(){var a=$(f).children(".toontalk-box-hole");a.length===d?a.each(function(a,b){l(b,this.get_hole(a),a)}.bind(this)):(a.remove(),this.get_holes().forEach(function(a,b){r=a.get_element();$(r).addClass("toontalk-hole-number-"+b);l(r,a,b);f.appendChild(r)}))}.bind(this),r,k,b,g,a,e,h;$(f).addClass("toontalk-box");$(f).removeClass("toontalk-box-eighth-size-border toontalk-box-quarter-size-border toontalk-box-half-size-border toontalk-box-full-size-border");
f.title=this.get_title();c.debugging&&(this.debug_string=this.toString());this.get_erased()?($(f).addClass("toontalk-box-erased"),$(f).children(".toontalk-side").remove()):($(f).removeClass("toontalk-box-erased"),k=$(f).width(),g=$(f).height(),m?(b=k/d,a=g):(b=k,a=g/d),32>=b||32>=a?(e="toontalk-box-eighth-size-border",h=4):64>=b||64>=a?(e="toontalk-box-quarter-size-border",h=8):128>=b||128>=a?(e="toontalk-box-half-size-border",h=16):(e="toontalk-box-full-size-border",h=32),m?b-=(d-1)*h/d:a-=(d-1)*
h/d,$(f).addClass(e),f.toontalk_border_size=h,c.UTILITIES.set_timeout(n))};l.update_hole_display=function(c,d){var l=this.get_frontside_element(),l=$(l).children(".toontalk-hole-number-"+c),m;l.empty();d&&(m=d.get_frontside_element(!0),l.append(m),$(m).css({left:0,top:0}),d.rerender())};l.drop_on=function(c,d,l){if(c.box_dropped_on_me)return d=c.box_dropped_on_me(this,l),l&&c.rerender(),this.remove(),d;if(c.widget_dropped_on_me)return c.widget_dropped_on_me(this,d,l);console.log("No handler for drop of "+
this+" on "+c)};l.box_dropped_on_me=function(c,d){console.log("box on box not yet implemented");return!1};l.widget_dropped_on_me=function(f,d,l,m){var n=this.get_horizontal(),r=this.get_frontside_element(),k=this.get_size(),b,g,a;if(0!==k){g=$(r).offset();r=n?$(r).width()/k:$(r).height()/k;a=n?g.left:g.top;if(l)for(b=0;b<k;b++)if(g=this.get_hole(b),a+=r,(n?l.pageX<=a:l.pageY<=a)||b+1===k)return(n=g.get_contents())?f.drop_on(n,d,l,m):g.widget_dropped_on_me(f,d,l,m);c.UTILITIES.report_internal_error(f+
" dropped on "+this+" but no event was provided.")}};l.get_index_of=function(c){return c.get_parent_of_frontside().get_index()};l.removed_from_container=function(f,d,l,m){d=!!l;"undefined"===typeof m&&(m=this.get_index_of(f));0<=m?(this.set_hole(m,void 0,d),d&&(this.rerender(),f.restore_dimensions())):c.UTILITIES.report_internal_error("Attempted to remove "+f+" from "+this+" but not found.")};l.get_path_to=function(f,d){var l=this.get_size(),m,n;if("empty hole"===f.get_type_name())return c.box.path.create(f.get_index());
for(m=0;m<l;m++)if(n=this.get_hole_contents(m)||this.get_contents_temporarily_removed(m)){if(f===n||n.top_contents_is&&n.top_contents_is(f))return c.box.path.create(m);if(n.get_path_to&&(n=n.get_path_to(f,d)))return l=c.box.path.create(m),l.next=n,l}};l.dereference=function(f,d,l){var m,n;if(f){m=f.get_index&&f.get_index();if(!c.debugging||"number"===typeof m){if(n=this.get_hole_contents(m)){if(n.dereference_contents&&!f.not_to_be_dereferenced)return n.dereference_contents(f,d,l);if(f.next){if(n.dereference)return n.dereference(f.next,
d,l);c.UTILITIES.report_internal_error("Expected to refer to a part of "+n+" but it lacks a method to obtain "+c.path.toString(f.next))}f.removing_widget&&("empty hole"===n.get_type_name()?c.UTILITIES.report_internal_error("Robot is trying to remove something from an empty hole. "):n.get_infinite_stack()||l.remove_from_container(n,this));return n}return this.get_hole(m)}c.UTILITIES.report_internal_error(this+" unable to dereference the path: "+c.path.toString(f))}else return this};l.path={create:function(f){return{get_index:function(){return f},
toString:function(){return"scale"===this.true_type?0===f?"the left side of the scale ":"the right side of the scale ":"the "+c.UTILITIES.cardinal(f)+" hole "},get_json:function(c){return{type:"box_path",index:f,true_type:this.true_type,next:this.next&&this.next.get_json(c)}}}}};c.creators_from_json.box_path=function(f,d){var q=l.path.create(f.index);f.next&&(q.next=c.UTILITIES.create_from_json(f.next,d));f.true_type&&(q.true_type=f.true_type);return q};return l}(window.TOONTALK);
window.TOONTALK.box_backside=function(c){return{create:function(l){var f=c.backside.create(l),d=c.UTILITIES.create_text_input(l.get_size().toString(),"toontalk-box-size-input","Number of holes","Type here to edit the number of holes."),q=c.UTILITIES.create_radio_button("box_orientation","horizontal","toontalk-horizontal-radio-button","Left to right","Show box horizontally."),m=c.UTILITIES.create_radio_button("box_orientation","vertical","toontalk-vertical-radio-button","Top to bottom","Show box vertically."),
n=function(){var a=parseInt(d.button.value.trim(),10);l.set_size(a,!0)&&c.robot.in_training&&c.robot.in_training.edited(l,{setter_name:"set_size",argument_1:a,toString:"change the number of holes to "+a+" of the box",button_selector:".toontalk-box-size-input"})},r=function(){var a=c.UTILITIES.selected_radio_button(q.button,m.button),b=a.value,d="horizontal"===b;l.set_horizontal(d,!0);c.robot.in_training&&c.robot.in_training.edited(l,{setter_name:"set_horizontal",argument_1:d,toString:"change the orientation to "+
b+" of the box",button_selector:"."+a.className.split(" ",1)[0]})},k=f.get_element(),b=c.backside.create_advanced_settings_button(f,l),g=f.update_display;d.button.addEventListener("change",n);d.button.addEventListener("mouseout",n);q.button.addEventListener("change",r);m.button.addEventListener("change",r);f.update_display=function(){d.button.value=l.get_size().toString();l.get_horizontal()?c.UTILITIES.check_radio_button(q):c.UTILITIES.check_radio_button(m);g()};k.appendChild(d.container);k.appendChild($(c.UTILITIES.create_horizontal_table(q.container,
m.container)).buttonset().get(0));k.appendChild(b);f.add_advanced_settings();f.render();return f}}}(window.TOONTALK);
window.TOONTALK.box_hole=function(c){return{create:function(l){var f=Object.create(this),d,q,m;f.get_element=function(){m||(m=document.createElement("div"),m.className="toontalk-box-hole toontalk-frontside toontalk-side",m.toontalk_widget=f);return m};f.get_frontside=function(c){return d?d.get_frontside(c):this.get_element()};f.get_side_element=function(){return this.get_element()};f.get_frontside_element=function(c){return d?d.get_frontside_element(c):this.get_element()};f.get_frontside=function(){return this};
f.widget_dropped_on_me=function(d,f,k,b){f=this.get_parent_of_frontside();var g;c.robot.in_training&&c.robot.in_training.dropped_on(d,this);k&&d.save_dimensions&&(d.save_dimensions(),d.set_size_attributes&&(g=$(this.get_element()),d.set_size_attributes(g.width(),g.height())));this.set_contents(d);d.dropped_on_other&&d.dropped_on_other(this,!1,k,b);f.render();return!0};f.get_json=function(){return null};f.add_to_json=function(c){return c};f.copy=function(d){return c.box_hole.create(l)};f.match=function(){return"matched"};
f.get_type_name=function(){return"empty hole"};f.is_of_type=function(c){return"empty hole"===c};f.get_index=function(){return l};f.get_contents=function(){return d};f.set_contents=function(m){var l=this.get_listeners("value_changed");l&&(d!==m&&l.forEach(function(c){c({type:"value_changed",old_value:d,new_value:m})}),d&&l.forEach(function(c){d.remove_listener("value_changed",c,!0)}),m&&l.forEach(function(c){m.add_listener("value_changed",c)}));d&&d.set_parent_of_frontside(void 0);(d=m)?(d.set_parent_of_frontside(this),
c.debugging&&(f.debug_string="A hole containing "+d),d.set_visible(q)):c.debugging&&(f.debug_string="An empty hole")};f.visible=function(){return this.get_parent_of_frontside().visible()};f.set_visible=function(c){q=c;d&&d.set_visible(c)};f.render=function(){if(d)return d.render()};f.rerender=function(){if(d)return d.rerender()};f.removed_from_container=function(f,m,k){d?(k&&d.restore_dimensions(),this.set_contents(void 0),k&&this.get_parent_of_frontside().render()):c.UTILITIES.report_internal_error("Holes can't be removed from containers.")};
f.temporarily_remove_contents=function(c,f){if(d)return this.get_parent_of_frontside().temporarily_remove_contents(c,f)};f.toString=function(){return d?d.toString():"_"};f.get_description=function(){return d?d.get_description():"_"};f.get_full_description=function(){return d?d.get_full_description():"_"};f.is_backside=function(){return!1};f.get_widget=function(){return this};c.debugging&&(f.debug_string="An empty hole");c.widget.has_parent(f);c.widget.has_listeners(f);return f}}}(window.TOONTALK);window.TOONTALK.bird=function(c){var l=Object.create(c.widget);l.create=function(f,d){var q=Object.create(l);q.widget_dropped_on_me=function(d,n,l,k){n=n?d.get_backside():d;if(f){if(f.has_ancestor(d))return c.UTILITIES.display_message("Bird can't take its nest to its nest!"),!1;this.visible()||f.visible()||f.any_nest_copies_visible()?(d.save_dimensions(),l=this.get_frontside_element(),$(l).removeClass("toontalk-bird-gimme"),k&&(d.robot_waiting_before_next_step=k,d.remove_from_parent_of_frontside()),
f.animate_bird_delivery(n,this,k&&k.run_next_step,k)):(f.add_to_contents(n),k&&k.run_next_step())}else console.log("to do: handle drop on a nestless bird -- just removes other?");c.robot.in_training&&c.robot.in_training.dropped_on(d,this);return!0};q.animate_delivery_to=function(d,n,l,k,b,g,a){var e=!!l,h=this.get_parent_of_frontside(),q=this.get_frontside_element(),w=$(q).offset(),y=function(){var a=$(I).offset(),b;e?this.remove():(b=function(){$(q).removeClass("toontalk-bird-morph-to-static");$(q).addClass("toontalk-bird-static");
h&&h.get_widget().rerender()},q.style.position=D,a&&(w.left-=a.left,w.top-=a.top),$(q).css(w),I&&I.appendChild(q),h&&(h.get_widget().is_of_type("top-level")?this.rerender():h.get_widget().rerender()),P&&(ca.remove_backside_widget(this,!1,!0),P()),c.UTILITIES.add_animation_class(q,"toontalk-bird-morph-to-static"),c.UTILITIES.add_one_shot_event_handler(q,"animationend",1E3,b),g&&(g(),d.robot_waiting_before_next_step=void 0))}.bind(this),v=function(){z();l.add_to_contents(d,this,!0);c.UTILITIES.set_timeout(function(){this.fly_to(w,
y)}.bind(this))}.bind(this),x=function(a,b){this.element_to_display_when_flying=a;b&&(this.update_display(),b.update_display());a.width_before_carry=a.clientWidth;a.height_before_carry=a.clientHeight;c.UTILITIES.set_timeout(function(){$(this.element_to_display_when_flying).addClass("toontalk-carried-by-bird").css({left:"",top:"",width:"",height:"",position:""});this.update_display()}.bind(this))}.bind(this),z=function(a){if(this.element_to_display_when_flying){var b=this.element_to_display_when_flying.width_before_carry,
e=this.element_to_display_when_flying.height_before_carry;$(this.element_to_display_when_flying).removeClass("toontalk-carried-by-bird");a?($(this.element_to_display_when_flying).css({width:b,height:e}),$(q).closest(".toontalk-top-level-backside").append(this.element_to_display_when_flying),c.UTILITIES.set_absolute_position($(this.element_to_display_when_flying),a)):$(this.element_to_display_when_flying).remove();this.element_to_display_when_flying=void 0;this.update_display()}}.bind(this),B,I,D,
G,V,K,P,N,L,X,ca,U;l||(l=f);X=d.get_element();x(X,d);B=n.get_widget().closest_visible_ancestor().get_widget().get_frontside_element();if(n.visible()||this.visible())if(n=$(B).offset(),K=$(l.get_frontside_element()).closest(".toontalk-top-level-backside"),K.is("*")||(K=$(this.get_frontside_element()).closest(".toontalk-top-level-backside")),(U=K.offset())||(U={left:0,top:0}),w=k?{left:k+U.left,top:b+U.top}:$(q).offset(),I=q.parentElement,G=$(q).width(),V=$(q).height(),D=q.style.position,q.style.position=
"absolute",ca=this.top_level_widget(),h&&h.get_widget().temporarily_remove_contents&&(P=h.get_widget().temporarily_remove_contents(this,!0))&&ca.add_to_top_level_backside(this),K.append(q),$(q).css({left:k||w.left-U.left,top:b||w.top-U.top,width:G,height:V}),(N=l.get_contents_frontside_element())&&l.visible()&&(!a||a.visible())){k=$(B).width();b=$(B).height();L=$(B).offset();U.max_left=U.left+K.width();U.max_top=U.top+K.height();n.left+=k;n.top+=b;var ka={left:Math.min(L.left+k,U.max_left-k),top:Math.min(L.top+
b,U.max_top-b)},oa={left:Math.max(L.left-k,U.left),top:Math.max(L.top-b,U.top)};B=function(){var a=function(){l.set_locked(!0);this.fly_to(L,za,300)}.bind(this);z(ka);l.get_locked()?l.run_when_unlocked(a):a()}.bind(this);var za=function(){x(N);this.fly_to(oa,ha,300)}.bind(this),ha=function(){z(oa);this.fly_to(ka,ra,300)}.bind(this),ra=function(){x(X,d);this.fly_to(L,sa,300)}.bind(this),sa=function(){z(L);this.fly_to(oa,ta,300)}.bind(this),ta=function(){x(N);this.fly_to(L,da,300)}.bind(this),da=function(){l.set_locked(!1);
z();l.update_display();v()}.bind(this);this.fly_to(ka,B,300)}else this.fly_to(n,v,300);else l.add_to_contents(d,this,!0)};q.get_json=function(d){return{type:"bird",nest:f&&c.UTILITIES.get_json(f,d)}};q.copy=function(c){var d;d=c?this.create(void 0,this.get_description()):this.create(f,this.get_description());return this.add_to_copy(d,c)};q=q.add_standard_widget_functionality(q);q.set_description(d);c.debugging&&(q.debug_id=c.UTILITIES.generate_unique_id(),q.debug_string=f?"a bird with "+f.debug_string:
"a bird without a nest");return q};l.create_backside=function(){return c.bird_backside.create(this)};l.match=function(c){return c.match_with_any_bird?c.match_with_any_bird(this):"not matched"};l.match_with_any_bird=function(){return"matched"};l.update_display=function(){var f=this.get_frontside(!0),d=this.get_backside(),l;l=f.get_element();l.title=this.get_title();$(l).is(".toontalk-bird, .toontalk-side-animating")||($(l).addClass("toontalk-bird toontalk-bird-static"),l.addEventListener("dragover",
function(d){$(l).is(".toontalk-bird-static")&&($(l).removeClass("toontalk-bird-static"),c.UTILITIES.add_animation_class(l,"toontalk-bird-gimme"))}),l.addEventListener("dragleave",function(c){$(l).is(".toontalk-bird-gimme")&&$(l).addClass("toontalk-bird-static").removeClass("toontalk-bird-gimme")}));this.element_to_display_when_flying?l.appendChild(this.element_to_display_when_flying):$(l).children(".toontalk-side").remove();d&&d.rerender()};l.fly_to=function(f,d,l){var m=this.get_frontside_element(),
n=$(m).offset(),n=Math.atan2(f.top-n.top,f.left-n.left),r="toontalk-fly-west toontalk-fly-northwest toontalk-fly-north toontalk-fly-northeast toontalk-fly-east toontalk-fly-southeast toontalk-fly-south toontalk-fly-southwest".split(" ")[Math.round(4*(n/Math.PI+1))%8];$(m).position();c.UTILITIES.add_animation_class(m,r);this.animate_to_absolute_position(f,function(){$(m).removeClass(r);l?($(m).addClass("toontalk-bird-static"),setTimeout(d,l)):d()})};l.toString=function(){return"a bird"};l.get_type_name=
function(){return"bird"};l.get_help_URL=function(){return"docs/manual/birds-nests.html"};l.matching_resource=function(c){return c.get_type_name&&c.get_type_name()===this.get_type_name()};c.creators_from_json.bird=function(f,d){return c.bird.create(c.UTILITIES.create_from_json(f.nest,d),f.description)};l.drop_on=function(c,d,l,m){if(c.widget_dropped_on_me)return c.widget_dropped_on_me(this,!1,l,m)};return l}(window.TOONTALK);
window.TOONTALK.bird_backside=function(c){return{create:function(l){l=c.backside.create(l);l.add_advanced_settings(!0);return l}}}(window.TOONTALK);
window.TOONTALK.nest=function(c){var l=Object.create(c.widget),f={},d={};l.create=function(d,m,n,r,k){var b=Object.create(l),g;m||(m=[]);n||(n=[]);b.matched_by=function(a){return 0<m.length?c.UTILITIES.match(a,m[0].get_widget()):[this]};b.run_when_non_empty=function(a){n.push(a)};b.add_to_contents=function(a,b,d){var f;1===m.push(a)?0<n.length&&(f=n,n=[],f.forEach(function(a){$(a.robot.get_frontside_element()).removeClass("toontalk-robot-waiting");a.robot.run(a.context,a.top_level_context,a.queue)})):
a.get_widget().hide();a.is_backside()?a.get_widget().set_parent_of_backside(this):a.get_widget().set_parent_of_frontside(this);g&&!d&&(b?g.forEach(function(d){d.has_ancestor(a.get_widget())||d.animate_bird_delivery(c.UTILITIES.copy_side(a),b)}):g.forEach(function(b){b.has_ancestor(a.get_widget())||b.add_to_contents(c.UTILITIES.copy_side(a,!1,!0))}));this.rerender()};b.animate_bird_delivery=function(a,b,d,f){var k,m,n;b.animate_delivery_to(a,this,void 0,void 0,void 0,d,f);g&&(k=$(b.closest_visible_ancestor().get_widget().get_frontside_element()).closest(":visible").position(),
m=b.get_parent_of_frontside().get_element(),n=this.visible(),g.forEach(function(d){var h=c.UTILITIES.copy_side(a,!1,n),g,l;d.has_ancestor(a.get_widget())||(d.visible()||n?(g=b.copy(!0),l=g.get_frontside_element(!0),$(m).append(l),g.animate_delivery_to(h,d,d,k.left,k.top,void 0,f)):d.add_to_contents(h))}))};b.get_contents_frontside_element=function(){if(0<m.length)return m[0].get_widget().get_frontside_element()};b.get_locked=function(){return this.locked_for_animating_deliveries};b.set_locked=function(a){this.locked_for_animating_deliveries=
a;!a&&this.to_run_when_unlocked&&0<this.to_run_when_unlocked.length&&this.to_run_when_unlocked.shift()()};b.run_when_unlocked=function(a){this.to_run_when_unlocked?this.to_run_when_unlocked.push(a):this.to_run_when_unlocked=[a]};b.removed_from_container=function(a,b,d){a=m.shift();this.visible()&&(a?(a.get_widget().restore_dimensions(),a.is_backside()?a.get_widget().set_parent_of_backside(void 0):a.get_widget().set_parent_of_frontside(void 0)):c.UTILITIES.report_internal_error("Nothing removed from nest!"),
0<m.length&&(m[0].set_visible(!0),$(m[0].get_element()).show()),this.render());return a};b.dereference_contents=function(a,b,c){var d,g,f,k;return 0===m.length?this:a.removing_widget?(a=m[0],c.remove_from_container(a,this),this.visible()&&(f=this.get_frontside_element(),c=$(f).offset(),b=$(f).closest(".toontalk-backside-of-top-level"),(d=b.offset())||(d={left:0,top:0}),g=a.get_frontside_element(),k=$(f).width(),f=$(f).height(),$(g).css({left:.1*k+c.left-d.left,top:.1*f+c.top-d.top,width:.8*k,height:.8*
f}),b.append(g)),a):a.next?m[0].get_widget().dereference(a.next,b,c):m[0].get_widget()};b.get_json=function(a){var b=n&&n.map(function(b){return{robot:c.UTILITIES.get_json(b.robot,a),context:b.context&&c.UTILITIES.get_json(b.context,a),top_level_context:b.top_level_context&&c.UTILITIES.get_json(b.top_level_context,a)}});return{type:"nest",contents:c.UTILITIES.get_json_of_array(m,a),guid:r,original_nest:k&&c.UTILITIES.get_json(k,a),waiting_robots:b}};b.copy=function(a,b){var d,g;if(a)return 0<m.length?
m[0].get_widget().copy(a):c.nest.create(this.get_description(),[],[],"in a robot's condition");d=c.UTILITIES.copy_widget_sides(m);b||(g=k||this);d=c.nest.create(this.get_description(),d,[],r,g);return this.add_to_copy(d,a)};b.has_contents=function(){return 0<m.length};b.dropped_on_other=function(a,e,d,g){var f,k,m,n,l,q,I;r||(r=c.UTILITIES.generate_unique_id(),c.debugging&&(b.debug_string="A nest with "+r),f=c.bird.create(this),g&&(g.add_newly_created_widget(f),this.robot_waiting_before_next_step=
g),this.rerender(),k=this.get_frontside_element(!0),c.UTILITIES.add_animation_class(k,"toontalk-hatch-egg"),l=function(){var b,l,r;if(e)b=a.get_backside();else if((r=c.UTILITIES.widget_from_jquery($(k).closest(".toontalk-top-level-backside")))||(r=c.UTILITIES.widget_from_jquery($(a.get_widget().get_frontside_element(!0)).closest(".toontalk-top-level-backside"))),r)b=r.get_backside();else{c.UTILITIES.report_internal_error("Unable to find the top-level backside for bird to go to.");return}l=b.get_element();
r=$(l).offset();m=f.get_frontside_element(!0);$(m).removeClass("toontalk-bird-static");c.UTILITIES.add_animation_class(m,"toontalk-fly-southwest");n=c.UTILITIES.relative_position(k,l);$(m).css({left:n.left,top:n.top});c.robot.in_training?(c.robot.in_training.add_newly_created_widget(f),b.widget_dropped_on_me(f,!1,d,void 0,!0)):b.widget_dropped_on_me(f,!1,d);$(k).removeClass("toontalk-hatch-egg").addClass("toontalk-empty-nest").css({width:"",height:""});"top-level"===this.get_parent_of_frontside().get_widget().get_type_name()&&
$(k).css({left:n.left-5,top:n.top+45});I=function(){$(m).removeClass("toontalk-fly-southwest");c.UTILITIES.set_timeout(function(){c.UTILITIES.add_animation_class(m,"toontalk-fly-down");q=function(){$(m).removeClass("toontalk-fly-down");c.UTILITIES.add_animation_class(m,"toontalk-bird-morph-to-static");c.UTILITIES.add_one_shot_event_handler(m,"animationend",1E3,function(){$(m).removeClass("toontalk-bird-morph-to-static toontalk-side-animating").addClass("toontalk-bird-static")});g&&g.run_next_step();
f.update_display()};c.UTILITIES.add_one_shot_event_handler(k,"animationend",1E3,q)}.bind(this))}.bind(this);$(m).removeClass("toontalk-bird-static");b=Math.max(10,n.left-70);l=Math.max(10,n.top+70);f.animate_to_absolute_position({left:b+r.left,top:l+r.top},I);this.rerender()}.bind(this),c.UTILITIES.add_one_shot_event_handler(k,"animationend",2E3,l));return!0};b.widget_dropped_on_me=function(a,b,d,g){d&&a.save_dimensions&&a.save_dimensions();0===m.length?(this.add_to_contents(b?a.get_backside():a),
a.dropped_on_other?a.dropped_on_other(this,b,d,g):c.robot.in_training&&c.robot.in_training.dropped_on(a,this)):a.drop_on(m[0].get_widget(),b,d,g);return!0};b.drop_on=function(a,b,c,d){return a.widget_dropped_on_me?(a.widget_dropped_on_me(this,!1,c,d),!0):!1};b.element_to_highlight=function(a){return 0===m.length?this.get_frontside_element():m[0].get_frontside_element()};b.update_display=function(){var a=this.get_frontside(!0),b=this.get_backside(),d,g,f,k,n,a=a.get_element();0<m.length?(d=m[0].get_widget(),
m[0].is_backside()?(k=d.get_backside(!0),n=k.get_element(),k.update_display(),k.scale_to_fit(n,a)):(d.render(),n=m[0].get_element()),g=$(a).width(),f=$(a).height(),0<g&&0<f&&c.UTILITIES.set_timeout(function(){for(var a=2*n.toontalk_border_size||0,b=.8*g,c=.8*f;2*a>=b||2*a>=c;)a/=2;b-=a;c-=a;$(n).css({width:b,height:c,left:.1*g,top:.1*f});d.set_size_attributes&&d.set_size_attributes(b,c)},2),a.appendChild(n),$(a).addClass("toontalk-empty-nest"),m[0].is_backside()?d.set_parent_of_backside(this):d.set_parent_of_frontside(this)):
(a.title=this.get_title(),r?($(a).removeClass("toontalk-nest-with-egg"),$(a).addClass("toontalk-empty-nest")):c.UTILITIES.add_animation_class(a,"toontalk-nest-with-egg"));$(a).addClass("toontalk-nest");b&&b.rerender()};b[f]=function(a){g||(g=[]);g.push(a)};b.get_path_to=function(a,b){if(0<m.length&&m[0].get_widget().get_path_to)return m[0].get_widget().get_path_to(a,b)};b.walk_children=function(a){if(0<m.length)return a(m[0])};b.top_contents_is=function(a){return 0<m.length&&m[0].get_widget()===a};
b.any_nest_copies_visible=function(){var a=!1;if(!g)return!1;g.some(function(b){b.visible()&&(a=!0)});return a};b.compare_with=function(a){if(0<m.length)return m[0].compare_with(a);if(a.compare_with_nest)return-1*a.compare_with_nest(this)};b.compare_with_nest=function(a){return 0===m.length?0:1};b.compare_with_number=function(a){return 0<m.length?m[0].compare_with(a):-1};b.compare_with_box=b.compare_with_number;b.compare_with_scale=b.compare_with_number;b=b.add_standard_widget_functionality(b);b.set_description(d);
c.debugging&&(b.debug_id=c.UTILITIES.generate_unique_id(),b.debug_string=r?"A nest with id "+r:"A nest with an egg");if(k&&r)k[f](b);return b};l.create_backside=function(){return c.nest_backside.create(this)};l.match=function(c){return c.match_nest_with_nest?c.match_nest_with_nest(this):"not matched"};l.match_nest_with_nest=function(c){return"matched"};l.toString=function(){return"a nest"};l.get_help_URL=function(){return"docs/manual/birds-nests.html"};l.get_type_name=function(){return"nest"};l.matching_resource=
function(c){return c.get_type_name&&c.get_type_name()===this.get_type_name()};c.creators_from_json.nest=function(f,m){var n=!f.original_nest&&f.guid&&d[f.guid];n||(n=c.nest.create(f.description,c.UTILITIES.create_array_from_json(f.contents,m),void 0,f.guid,f.original_nest&&c.UTILITIES.create_from_json(f.original_nest,m)),d[f.guid]=n);return n};return l}(window.TOONTALK);window.TOONTALK.nest_backside=function(c){return{create:function(l){l=c.backside.create(l);l.add_advanced_settings(!0);return l}}}(window.TOONTALK);window.TOONTALK.scale=function(c){var l=Object.create(c.widget);l.create=function(f,d,l,m){var n=function(){l.rerender()},r=function(a){var b=$(l.get_frontside_element()),b=b.offset().left+b.width()/2;return a.clientX<b?0:1},k,b,g;l||(l=c.box.create(2,void 0,f,d));k=l.get_json;b=l.copy;g=l.get_path_to;l.copy=function(a){var e=b.call(this,a),e=c.scale.create(void 0,void 0,e,a&&this.get_state());return l.add_to_copy(e,a)};l.get_json=function(a){a=k.call(this,a);a.type="scale";a.inactive_state=this.get_inactive_state();
return a};l.get_path_to=function(a,b){var c=g.call(this,a,b);c&&(c.true_type="scale");return c};l.element_to_highlight=function(a){a=r(a);a=this.get_hole(a);var b=a.get_contents();return b?b.get_frontside_element():a.get_frontside_element()};l.drop_on=function(a,b,c,d){if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,b,c,d)};l.widget_dropped_on_me=function(a,b,c,d){var g=this.get_hole_contents(0),f=this.get_hole_contents(1),k;if(g&&!f)return this.set_hole(1,a),!0;if(!g&&f)return this.set_hole(0,
a),!0;k=r(c);if(0===k){if(g){if(g.drop_on)return a.drop_on(g,b,c,d);return}}else if(f){if(f.drop_on)return a.drop_on(f,b,c,d);return}this.set_hole(k,a,c);return!0};l.get_inactive_state=function(){return m};l.update_display=function(){var a=this.get_frontside_element(),b=$(a),d=$(a).children(".toontalk-scale-half"),g=$(a).parent(),g=g.is(".toontalk-backside")?a:g.get(0),f=$(g).width(),k=$(g).height(),m=function(a,b,c){var e=b.get_frontside_element(!0),d=c*f*.5,h=.5*f,g=k;b=b.get_contents();$(a).css({left:d,
top:0,width:h,height:g});a!==e&&(d=0===c?-.05*f:.15*f,c="toontalk-scale-balanced"===n?.1*k:0===c&&"toontalk-scale-left_heavier"===n||1===c&&"toontalk-scale-right_heavier"===n?.25*k:1===c&&"toontalk-scale-left_heavier"===n||0===c&&"toontalk-scale-right_heavier"===n?-.1*k:.2*k,h=.4*f,g=.4*k,$(e).css({left:d,top:c,width:h,height:g}),b&&(b.set_location_attributes&&b.set_location_attributes(d,c),b.set_size_attributes&&b.set_size_attributes(h,g)),a.appendChild(e))},n,g=c.UTILITIES.scale_to_fit(a,g,123,
91);0===f&&(f=1);0===k&&(k=1);f/=g.x_scale;k/=g.y_scale;b.is(".toontalk-top-level-resource")?n="toontalk-scale-balanced":(g=this.get_state(),n="undefined"===typeof g?"toontalk-scale-unbalanced":["toontalk-scale-right_heavier","toontalk-scale-balanced","toontalk-scale-left_heavier"][g+1]);b.removeClass("toontalk-scale-balanced toontalk-scale-left_heavier toontalk-scale-right_heavier toontalk-scale-unbalanced");b.addClass(n);b.addClass("toontalk-scale");2===d.length?d.each(function(a,b){c.UTILITIES.set_timeout(function(){m(b,
this.get_hole(a),a)}.bind(this))}.bind(this)):this.get_holes().forEach(function(b,c){var e=b.get_element();0===c?$(e).addClass("toontalk-left_scale  toontalk-scale-half"):$(e).addClass("toontalk-right_scale toontalk-scale-half");m(e,b,c);a.appendChild(e)});a.title=this.get_title();c.debugging&&(this.debug_string=this.toString())};l.get_type_name=function(){return"scale"};l.get_help_URL=function(){return"docs/manual/scales.html"};l.toString=function(){var a=this.get_hole(0),b=this.get_hole(1),d;switch(this.get_state()){case -1:d=
"scale leaning to the right";break;case 1:d="scale leaning to the left";break;case 0:d="balanced scale";break;default:d="unbalanced scale"}a=a?"contains "+c.UTILITIES.add_a_or_an(a.get_full_description()):"is empty";b=b?"contains "+c.UTILITIES.add_a_or_an(b.get_full_description()):"is empty";return d+" and the left pan "+a+" and the right pan "+b};l.create_backside=function(){return c.scale_backside.create(this)};l.get_state=function(){var a=this.get_inactive_state(),b;if(a)return a;a=this.get_hole_contents(0);
b=this.get_hole_contents(1);if(a||b)if(a){if(!b)return 1;if(a.compare_with)return a.compare_with(b)}else return-1};l.match=function(a){return a.match_with_scale?a.match_with_scale(this):"not matched"};l.match_with_scale=function(a){return this.get_state()===a.get_state()?"matched":"not matched"};l.compare_with=function(a){if(a.compare_with_scale)return-1*a.compare_with_scale(this)};l.compare_with_scale=function(a){var b=this.get_state();a=a.get_state();return b&&!a?1:!b&&a?-1:b>a?1:b<a?-1:0};l.get_hole(0).add_listener("value_changed",
n);l.get_hole(1).add_listener("value_changed",n);l.get_hole_contents(0)&&l.get_hole_contents(0).add_listener("value_changed",n);l.get_hole_contents(1)&&l.get_hole_contents(1).add_listener("value_changed",n);return l};c.creators_from_json.scale=function(f,d){return l.create(c.UTILITIES.create_array_from_json(f.contents,d),f.description,void 0,f.inactive_state)};return l}(window.TOONTALK);
window.TOONTALK.scale_backside=function(c){return{create:function(l){l=c.backside.create(l);l.add_advanced_settings(!0);return l}}}(window.TOONTALK);window.TOONTALK.robot=function(c){var l=Object.create(c.widget);l.create=function(f,d,q,m,n,r,k){var b=Object.create(l),g,a=!1;q||(q=c.actions.create());g||(g=b);b.get_frontside_conditions=function(){return f};b.set_frontside_conditions=function(a){f=a};b.get_backside_conditions=function(){return d};b.set_backside_conditions=function(a){(d=a)&&c.UTILITIES.available_types.forEach(function(a){d[a]&&c.widget.erasable(d[a])})};b.add_to_backside_conditions=function(a){var b=a.copy(!0);d||(d={});d[a.get_type_name()]=
b;c.widget.erasable(b)};b.get_body=function(){return q};b.get_animating=function(){return a};b.set_animating=function(b,d){var g=this.get_frontside_element();(a=b)?(d||(d=$(g).offset()),$(g).addClass("toontalk-robot-animating toontalk-side-animating"),$(g).css({width:"",height:"","z-index":c.UTILITIES.next_z_index()}),c.UTILITIES.set_position_relative_to_top_level_backside($(g),d),$(g).closest(".toontalk-top-level-backside").append(g)):$(g).removeClass("toontalk-robot-animating toontalk-side-animating")};
b.get_thing_in_hand=function(){return n};b.set_thing_in_hand=function(a){c.debugging&&a&&"empty hole"===a.get_type_name()?c.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):n=a};b.get_next_robot=function(){return k};b.set_next_robot=function(a){var b=this.get_backside_element();a&&a.set_first_in_team(this.get_first_in_team());!a&&k&&k.set_first_in_team(k);k=a;b&&(a=a?"When the robot can't run then this one will try: ":window.TOONTALK.robot.empty_drop_area_instructions,$(b).find(".toontalk-drop-area-instructions").get(0).innerHTML=
a)};b.get_first_in_team=function(){return g};b.set_first_in_team=function(a){g=a;k&&k.set_first_in_team(a)};b.walk_children=function(a){(!k||a(k))&&this.get_frontside_conditions()&&a(this.get_frontside_conditions())};b.get_run_once=function(){return r};b.set_run_once=function(a){r=a};k&&b.set_next_robot(k);b=b.add_standard_widget_functionality(b);b.set_description(m);c.debugging&&(this.debug_id=c.UTILITIES.generate_unique_id());return b};l.create_backside=function(){return c.robot_backside.create(this)};
l.copy=function(f){var d=this.get_frontside_conditions(),l=this.get_backside_conditions(),d=d?d.copy(!0):void 0,m=this.get_next_robot(),m=m?m.copy(f):void 0,n;l&&(n={},c.UTILITIES.available_types.forEach(function(c){n[c]&&(n[c]=n[c].copy(!0))}));l=this.create(d,n,this.get_body().copy(),this.get_description(),this.get_thing_in_hand(),this.get_run_once(),m);return this.add_to_copy(l,f)};l.match=function(){console.log("Robot-to-robot matching could be more sophisticated.");return"matched"};l.run=function(f,
d,l){var m=this.get_frontside_conditions(),n,r,k;if(this.being_trained||!m||this.get_animating())return"not matched";this.match_status=c.UTILITIES.match(m,f);(r=m.get_frontside_element())&&("matched"===this.match_status?$(r).removeClass("toontalk-conditions-not-matched"):$(r).addClass("toontalk-conditions-not-matched"));"matched"===this.match_status?(n=this.get_backside_conditions())&&(m=f.get_backside_widgets())&&m.some(function(b){var d=!b.is_backside()&&n[b.get_widget().get_type_name()];if(d&&
(b=c.UTILITIES.match(d,b.get_widget()),(r=d.get_frontside_element())&&("matched"===b?$(r).removeClass("toontalk-conditions-not-matched"):$(r).addClass("toontalk-conditions-not-matched")),"matched"!==b))return this.match_status=b,!0}.bind(this)):this.match_status||(this.match_status="not matched");switch(this.match_status){case "matched":return l||(l=c.QUEUE),this.get_body().reset_newly_created_widgets(),l.enqueue({robot:this,context:f,top_level_context:d,queue:l}),this.match_status;case "not matched":return this.get_next_robot()?
this.get_next_robot().run(f,d,l):this.match_status;default:if(this.get_next_robot()){m=this.get_next_robot().run(f,d,l);if("matched"===m)return m;"not matched"!=m&&m.forEach(function(b){0>this.match_status.indexOf(b)&&this.match_status.push(b)})}this.get_first_in_team()===this&&(k={robot:this,context:f,top_level_context:d,queue:l},this.match_status.forEach(function(b){b.run_when_non_empty(k)}),c.UTILITIES.add_animation_class(this.get_frontside_element(),"toontalk-robot-waiting"));return this.match_status}};
l.set_stopped=function(c){(this.stopped=c)&&this.visible()&&$(this.get_frontside_element()).removeClass("toontalk-robot-waiting");this.get_next_robot()&&this.get_next_robot().set_stopped(c)};l.run_actions=function(c,d,l){return this.stopped?!1:this.visible()?this.get_body().run_watched(c,d,l,this):this.get_body().run_unwatched(c,d,l,this)};l.picked_up=function(f,d,l){var m;this!==f&&(f.get_infinite_stack&&f.get_infinite_stack()?this.current_action_name="pick up a copy of":this.current_action_name=
"pick up",l?(m=f,d=f.copy(),d=c.path.get_path_to_resource(d)):d=c.path.get_path_to(f,this),d&&this.add_step(c.robot_action.create(d,this.current_action_name),m),f.last_action=this.current_action_name,this.current_action_name=void 0,this.set_thing_in_hand(f))};l.dropped_on=function(f,d){var l;this!==f&&(this.current_action_name="drop it on",(l=c.path.get_path_to(d,this))&&this.add_step(c.robot_action.create(l,this.current_action_name)),f.last_action=this.current_action_name+" "+d.get_type_name(),this.current_action_name=
void 0,this.set_thing_in_hand(void 0))};l.copied=function(f,d,l){this.current_action_name=l?"pick up a copy of":"copy";(f=c.path.get_path_to(f,this))&&this.add_step(c.robot_action.create(f,this.current_action_name),d);d.last_action=this.current_action_name;this.current_action_name=void 0};l.removed=function(f){var d;this.current_action_name="remove";(d=c.path.get_path_to(f,this))&&this.add_step(c.robot_action.create(d,this.current_action_name));f.last_action=this.current_action_name;this.current_action_name=
void 0};l.edited=function(f,d){var l;this.current_action_name="edit";(l=c.path.get_path_to(f,this))&&this.add_step(c.robot_action.create(l,this.current_action_name,d));this.current_action_name=void 0};l.erased_widget=function(f,d){var l;this.current_action_name="erased_widget";(l=c.path.get_path_to(f,this))&&this.add_step(c.robot_action.create(l,this.current_action_name,{erased:d,toString:d?"erase":"un-erase"}));this.current_action_name=void 0};l.remove_from_container=function(f,d){var l=d.get_index_of&&
d.get_index_of(f),m=function(){f.get_parent_of_frontside()&&d.removed_from_container(f,!1,!0,l)};this.get_animating()?c.UTILITIES.add_one_shot_event_handler(this.get_frontside_element(),"transitionend",2500,m):m();this.add_newly_created_widget(f)};l.add_step=function(c,d){this.get_body().add_step(c,d);this.get_frontside_element().title=this.get_title()};l.get_context=function(){var f=this.get_frontside_element(),d=$(f).parent(),f=c.UTILITIES.widget_from_jquery(d);return!f&&(d=c.UTILITIES.widget_from_jquery(d.closest(".toontalk-backside-of-robot")))?
d.get_context():f};l.training_started=function(){var f=this.get_context();f?(this.being_trained=!0,this.set_frontside_conditions(f.copy(!0)),$("*").css({cursor:"url("+c.UTILITIES.absolute_file_path("images/RB19.32x32.PNG")+"), default"}),this.get_frontside_element().title=this.get_title(),f=this.get_backside_element(),$(f).find(".toontalk-conditions-panel").remove()):c.UTILITIES.report_internal_error("Robot started training but can't find its 'context'.")};l.training_finished=function(){var f=this.get_body().get_newly_created_widgets(),
d,l;$("*").css({cursor:""});for(d=0;d<f.length;d++)l=f[d],"drop it on top-level"!==l.last_action&&"copy"!==l.last_action||this.add_step(c.robot_action.create(c.newly_created_widgets_path.create(d),"add to the top-level backside"));this.rerender();this.being_trained=!1;this.get_frontside_element().title=this.get_title();this.backup_all()};l.update_display=function(){var f=this.get_frontside(!0),d=this.get_backside(),l=this.get_thing_in_hand(),m,n;c.debugging&&(this.debug_string=this.toString());m=
f.get_element();l&&(n=l.get_frontside_element());!n&&this.carrying_tool&&(n=document.createElement("div"),$(n).addClass(this.carrying_tool));m.title=this.get_title();$(m).addClass("toontalk-robot");$(m).children(".toontalk-side, .toontalk-held-by-robot").remove();n&&m.appendChild(n);"not matched"===this.match_status?$(m).addClass("toontalk-side-animating toontalk-robot-not-matched"):$(m).removeClass("toontalk-robot-not-matched");c.UTILITIES.set_timeout(function(){var c,d,b,g,a;n&&(a={position:"absolute"},
$(n).addClass("toontalk-held-by-robot"),c=$(n).width(),d=$(n).height(),b=$(m).width(),g=$(m).height(),0===c&&(c=2*b,d=g/2,a.width=c,a.height=d),a.left=(b-c)/2,a.top=(g-d)/2,$(n).css(a),l&&l.render())});d&&d.rerender()};l.add_newly_created_widget=function(c){return this.get_body().add_newly_created_widget(c)};l.add_newly_created_widget_if_new=function(c){if(c!==this.get_context())return this.get_body().add_newly_created_widget_if_new(c)};l.get_recently_created_widget=function(){var c=this.get_body().get_newly_created_widgets();
return c[c.length-1]};l.get_title=function(){var c=this.get_description();if(c)return c="This robot "+c,0>c.lastIndexOf(".")&&(c+="."),c+"\n"+this.toString();c=this.get_frontside_element();return $(c).is(".toontalk-top-level-resource")?"Drag this robot to a work area.":this.toString()};l.toString=function(){var f=this.get_frontside_conditions(),d=this.get_body(),l="",m="",n=this.get_next_robot();if(!f)return"has yet to be trained.";f=f.get_full_description();this.being_trained&&(l="is being trained.\n",
m="\n...");f=c.UTILITIES.add_a_or_an(f);d=l+"When working on something that matches "+f+" he will \n"+d.toString()+m;"not matched"===this.match_status&&(d="He isn't running because his conditions don't match. Click to edit his conditions.\n"+d);n&&(d+="\nIf it doesn't match then the next robot will try to run.\n"+n.toString());return d};l.get_type_name=function(){return"robot"};l.get_help_URL=function(){return"docs/manual/robots.html"};l.get_json=function(f){var d=this.get_frontside_conditions(),
l=this.get_backside_conditions(),m,n,r;d&&(m=d.is_of_type("top-level")?{type:"top_level"}:c.UTILITIES.get_json(d,f));l&&c.UTILITIES.available_types.forEach(function(d){l[d]&&(n||(n={}),n[d]=c.UTILITIES.get_json(l[d],f))});this.get_next_robot()&&(r=c.UTILITIES.get_json(this.get_next_robot(),f));return{type:"robot",frontside_conditions:m,backside_conditions:n,body:this.get_body().get_json(f),run_once:this.get_run_once(),next_robot:r}};c.creators_from_json.robot=function(f,d){var l,m,n;f.thing_in_hand&&
(m=c.UTILITIES.create_from_json(f.thing_in_hand,d));f.next_robot&&(l=c.UTILITIES.create_from_json(f.next_robot,d));f.backside_conditions&&(n={},c.UTILITIES.available_types.forEach(function(m){n[m]=c.UTILITIES.create_from_json(f.backside_conditions[m],d)}));return c.robot.create(c.UTILITIES.create_from_json(f.frontside_conditions||f.bubble,d),n,c.UTILITIES.create_from_json(f.body,d),f.description,m,f.run_once,l)};return l}(window.TOONTALK);
window.TOONTALK.robot_backside=function(c){var l=function(d,f,m,l){d=c.UTILITIES.create_text_element(d);var r=f.get_frontside_element(!0),k=document.createElement("div");$(r).addClass("toontalk-conditions-contents "+l);c.UTILITIES.set_timeout(function(){$(r).parent().addClass("toontalk-conditions-contents-container");$(r).css({left:"inherit",width:"inherit",height:"inherit"});f.render()});"not matched"===m.match_status?$(r).addClass("toontalk-conditions-not-matched"):$(r).removeClass("toontalk-conditions-not-matched");
k.appendChild(r);m=c.UTILITIES.create_horizontal_table(d,k);$(m).addClass("toontalk-conditions-panel");return m},f=function(d,f){var m=f.get_frontside_conditions(),n=f.get_backside_conditions(),r,k;m&&0===$(d).find(".toontalk-frontside-conditions-area").length&&(d.insertBefore(l("Runs only if the widget matches: ",m,f,"toontalk-frontside-conditions-area"),d.firstChild),m.set_visible(!0),m.render());n&&Object.keys(n).forEach(function(b){if(r=n[b])k="toontalk-backside-"+b+"-conditions-area",0===$(d).find("."+
k).length&&(b="bird"===b?c.UTILITIES.create_text_element("And there is a bird on the back."):l("Runs only if the "+b+" on the backside matches: ",r,f,k),d.insertBefore(b,d.firstChild.nextSibling),r.set_visible(!0),r.render())})};return{create:function(d){var l=c.backside.create(d),m=l.get_element(),n=c.UTILITIES.create_check_box(!d.get_run_once(),"toontalk-run-once-check-box","When finished start again","Check this if you want the robot to start over again after finishing what he was trained to do."),
r=c.UTILITIES.create_drop_area(window.TOONTALK.robot.empty_drop_area_instructions),k=d.get_next_robot(),b=c.backside.create_advanced_settings_button(l,d),g=l.update_display;r.data("drop_area_owner",d);$(n.button).click(function(a){var b=n.button.checked;d.set_run_once(!b);c.robot.in_training&&c.robot.in_training.edited(d,{setter_name:"set_run_once",argument_1:!b,toString:"change to "+(b?"run again":"run once")+" of the robot",button_selector:".toontalk-run-once-check-box"});a.stopPropagation()});
k&&r.append(k.get_frontside_element(!0));r.get(0).addEventListener("drop",function(a){a=c.UTILITIES.get_dragee();(a=c.UTILITIES.widget_from_jquery(a))&&a.is_of_type("robot")&&(a=a.open_backside(),$(a.get_element()).find(".toontalk-train-backside-button").click())});l.update_display=function(){var a=d.get_frontside_element();a&&(a.title=d.get_title());g()};m.appendChild(this.create_train_button(l,d));m.appendChild(b);$(n.container).addClass("toontalk-advanced-setting");r.addClass("toontalk-advanced-setting");
m.appendChild(n.container);m.appendChild(r.get(0));f(m,d);l.add_advanced_settings();return l},create_train_button:function(d,l){var m=d.get_element();$(m);var n=$("<button>Train</button>").button();n.addClass("toontalk-train-backside-button");var r=!1,k=function(){r?(n.button("option","label","Stop training"),n.attr("title","Click to stop training this robot.")):l.get_body().is_empty()?(n.button("option","label","Train"),n.attr("title","Click to start training this robot.")):(n.button("option","label",
"Re-train"),n.attr("title","Click to start training this robot all over again."));$(m).is(":visible")&&f(m,l)};k();n.click(function(b){r=!r;k();r?(l.get_body().reset_steps(),c.robot.in_training=l,l.training_started()):(l.training_finished(),c.robot.in_training=null);b.stopPropagation()});return n.get(0)}}}(window.TOONTALK);window.TOONTALK.robot.empty_drop_area_instructions="Drop a robot here who will try to run when this robot can't run.";(function(){var c=function(c){return"rotate"===c||"skewX"===c||"skewY"===c||"transform-origin-x"===c||"transform-origin-y"===c};window.TOONTALK.element=function(l){var f=["left","top","width","height"],d=Object.create(l.widget),q=function(c,d){var f,k;"number"===typeof c&&(k=c);0===c.length&&(k=0);if("undefined"===typeof k&&(f=c.substring(c.length-1),0<="0123456789x".indexOf(f)&&(k=parseFloat(c),isNaN(k))))return;f=k;0<=["rotate","skewX","skewY"].indexOf(d)&&(f%=360,0>f&&(f+=360));return f};d.create=
function(f,n,q,k){var b=Object.create(d),g=b.drag_started,a={},e={},h,u,w,y;n||(n=[]);b.get_HTML=function(){return f};b.get_text=function(){return this.get_frontside_element().innerText};b.set_HTML=function(a){var b=this.get_frontside_element();if(!b||f===a)return!1;f=a;$(b).children(":not(.ui-resizable-handle)").remove();this.rerender();return!0};b.set_text=function(a){var b=this.get_frontside_element(),c=function(b){$(b).contents().each(function(){this.nodeType==Node.TEXT_NODE?(this.textContent=
a,a=""):c(this,a)})};if(!b||a===b.textContent)return!1;c(b);return this.set_HTML(b.innerHTML)};b.get_style_attributes=function(){return n};b.set_style_attributes=function(a){n=a};b.get_attribute_widgets=function(){return a};b.get_original_copies=function(){return e};b.get_pending_css=function(){return h};b.get_transform_css=function(){return u};b.add_to_css=function(a,b){c(a)?(u||(u={}),u[a]=b):(h||(h={}),h[a]=b)};b.apply_css=function(){var a,b,c;if(h||u)if(a=this.get_frontside_element())if($(a).is(":visible")){if(u){u.rotate&&
(c="rotate("+u.rotate+"deg)");u.skewX&&(c||(c=""),c+="skewX("+u.skewX+"deg)");u.skewY&&(c||(c=""),c+="skewY("+u.skewY+"deg)");if(u["transform-origin-x"]||u["transform-origin-y"])h||(h={}),h["transform-origin"]=(u["transform-origin-x"]||0)+" "+(u["transform-origin-y"]||0);c&&(h||(h={}),h["-webkit-transform"]=c,h["-moz-transform"]=c,h["-ms-transform"]=c,h["o-transform"]=c,h.transform=c)}l.UTILITIES.set_timeout(function(){h&&(h.width&&"undefined"===typeof h.height?h.height=a.clientHeight:h.height&&"undefined"===
typeof h.width&&(h.width=a.clientWidth),$(a).css(h),y&&(h.width||h.height)&&(b={},b.width=h.width,b.height=h.height,y.css(b)),h=void 0)})}else l.UTILITIES.set_timeout(function(){this.apply_css()}.bind(this),100)};b.on_update_display=function(a){w?w.push(a):w=[a]};b.fire_on_update_display_handlers=function(){w&&l.UTILITIES.set_timeout(function(){w.forEach(function(a,b){a()||w.splice(b,1)})})};b.get_image_element=function(){return y};b.set_image_element=function(a,b){y=$(a).find("img");0===y.length?
y=void 0:($(b).width(y.width()),$(b).height(y.height()))};b.get_additional_classes=function(){return k};b.set_additional_classes=function(a){k=a};b=b.add_standard_widget_functionality(b);b.drag_started=function(a,b){this.drag_x_offset=a.view.drag_x_offset;this.drag_y_offset=a.view.drag_y_offset;g.call(this,a,b)};b.set_description(q);l.debugging&&(b.debug_string=b.toString(),b.debug_id=l.UTILITIES.generate_unique_id());return b};d.copy=function(c){var f=d.create(this.get_HTML(),this.get_style_attributes().slice(),
this.get_description());return this.add_to_copy(f,c)};d.match=function(c){return this.get_erased&&this.get_erased()?c.match_with_any_element?c.match_with_any_element():"not matched":c.match_with_another_element_widget?c.match_with_another_element_widget(this):"not matched"};d.match_with_any_element=function(){return"matched"};d.match_with_another_element_widget=function(c){return this.get_HTML()===c.get_HTML()?"matched":"not matched"};d.compare_with=function(c){if(c.compare_with_other_element)return c.compare_with_other_element(this)};
d.compare_with_other_element=function(c){c=c.get_HTML().localeCompare(this.get_HTML());return 0>c?-1:0<c?1:c};d.create_backside=function(){return l.element_backside.create(this)};d.get_attribute=function(c){var d=this.get_pending_css(),f;if(d&&d[c]||(d=this.get_transform_css())&&d[c])return d[c];d=this.get_frontside_element();f=d.style[c];""===f&&(f=$(d).css(c));return f?"number"===typeof f?f:f.replace("px",""):0};d.set_attribute=function(c,d,f,k){var b,g;if(!this.get_frontside(!0).get_element())return!1;
b=this.get_attribute(c);if(b===d)return!1;g=q(d,c);if("number"===typeof g){if(b==g)return;d=g}f&&l.robot.in_training&&l.robot.in_training.edited(this,{setter_name:"set_attribute",argument_1:c,argument_2:d,toString:"change the '"+c+"' style to "+d+" of",button_selector:".toontalk-element-"+c+"-attribute-input"});this.add_to_css(c,d);k&&(d=this.get_style_attributes(),0>d.indexOf(c)&&d.push(c));this.rerender();return!0};d.dropped_on_style_attribute=function(c,d,f,k){var b,g,a;if(c){b=c.toString();if(c.is_of_type("number")){g=
this.get_attribute(d);if("number"===typeof g)a=g;else if("auto"===g)switch(d){case "left":a=$(this.get_frontside_element()).offset().left;break;case "top":a=$(this.get_frontside_element()).offset().top;break;default:a=0}else a=parseFloat(g);g=c.to_float();switch(b.substring(0,1)){case "-":b=a-g;break;case "*":b=a*g;break;case "/":b=a/g;break;case "^":b=Math.pow(a,g);break;default:b=a+g}this.set_attribute(d,b,!1);(f||k&&k.visible())&&this.get_backside().render()}c.get_infinite_stack()||c.remove();
l.robot.in_training&&l.robot.in_training.dropped_on(c,this.create_attribute_widget(d))}};d.get_attribute_widget=function(c){var d=this.get_attribute_widgets()[c];d||(d=this.create_attribute_widget(c),this.get_attribute_widgets()[c]=d);return d};d.create_attribute_widget=function(c){var d=".toontalk-element-"+c+"-attribute-input",q=this.get_backside_element(),k=this.get_attribute(c),b=this,g=function(b){var e=a.get_attribute_owner(),d;b.currentTarget.toontalk_widget===e&&(d=$(e.get_frontside_element()).closest(".toontalk-top-level-backside").offset(),
d||(console.log("Unable to find top-level backside of an element for its position. Perhaps is 'visible' but not attached."),d={left:0,top:0}),b="left"===c?b.pageX-d.left-e.drag_x_offset:b.pageY-d.top-e.drag_y_offset,a.set_value_from_decimal(b),h.call(a))}.bind(this),a,e,h,u;q&&(d=$(q).find(d),0<d.length&&(d.get(0).toontalk_widget=this));a=l.number.create(0,1);a.element_widget=this;a.set_value_from_decimal(k);a.set_format("decimal");a.attribute=c;a.get_type_name=function(){return"element attribute"};
u=a.toString;a.toString=function(){return u.call(this)+" ("+this.attribute+")"};e=a.equals;a.equals=function(a){return c===a.attribute?this.equals(a.element_widget):e.call(this,a)};(k=this.get_original_copies()[c])?k.push(a):this.get_original_copies()[c]=[a];a.set_value=function(a){var e=b.get_original_copies()[c],d;this.get_attribute_owner().set_attribute(this.attribute,bigrat.toDecimal(a))&&e.forEach(function(b,c){d=b.set_value_from_sub_classes(a)});return d};h=a.update_display;a.update_display=
function(){var b;this.get_erased()||(b=this.get_attribute_owner().get_attribute(this.attribute),a.set_value_from_decimal(b));h.call(this)};0<=f.indexOf(c)&&(this.on_update_display(function(){a.update_display();return!0}),"left"===c||"top"===c)&&(k=this.get_frontside_element(),k.addEventListener("drag",g));a.copy=function(a){return a?l.number.copy.call(this,a):this.add_to_copy(b.create_attribute_widget(c),a)};a.get_json=function(a){return{type:"attribute_number",attribute_name:c,element:l.UTILITIES.get_json(b,
a)}};a.get_original_attribute_widget=function(){return b.get_original_copies()[c][0]};a.get_attribute_owner=function(){var a=function(b){if(b=b.get_parent_of_frontside())return b.is_backside()?b:a(b.get_widget())},c=this.get_original_attribute_widget();if(c!==this)return c.get_attribute_owner();var e,c=a(this);if(!c||!c.is_of_type("element"))return b;c=c.get_widget();for(e=c.get_parent_of_backside();e&&e.is_of_type("element");)c=e.get_widget(),e=c.get_parent_of_backside();return c};return a};l.creators_from_json.attribute_number=
function(c,d){return l.UTILITIES.create_from_json(c.element,d).create_attribute_widget(c.attribute_name)};d.update_display=function(){var c=this.get_frontside_element();this.get_backside();var d,f;this.being_dragged||(this.get_erased&&this.get_erased()?$(c).css({opacity:0}):(this.get_erased&&"0"===$(c).css("opacity")&&$(c).css({opacity:1}),c.children.length===$(c).children(".ui-resizable-handle").length&&(d=document.createElement("div"),d.innerHTML=this.get_HTML(),c.appendChild(d),this.set_image_element(d,
c),$(c).addClass("toontalk-element-frontside"),"<"!==d.innerHTML.substring(0,1)&&((f=this.get_additional_classes())&&$(d).addClass(f),$(c).addClass("ui-widget toontalk-plain-text-element"))),l.UTILITIES.on_a_nest_in_a_box(c)&&(this.set_attribute("width",$(c).closest(".toontalk-box-hole").width(),!1),this.set_attribute("height",$(c).closest(".toontalk-box-hole").height(),!1)),this.apply_css(),this.fire_on_update_display_handlers()))};d.toString=function(){var c="element whose HTML is '"+l.UTILITIES.maximum_string_length(this.get_HTML(),
40)+"'";l.debugging&&(c+=" ("+this.debug_id+")");return c};d.get_type_name=function(){return"element"};d.get_help_URL=function(){return"docs/manual/elements.html"};d.get_json=function(c){var d=this.get_style_attributes(),f=[],k=l.UTILITIES.remove_z_index(this.get_HTML()),b=encodeURIComponent(k);0===k.indexOf("<img src='data:image/")?(c.shared_html||(c.shared_html=[]),k=c.shared_html.indexOf(b),0>k&&(k=c.shared_html.push(b)-1),c={shared_html_index:k}):c=b;d.forEach(function(b){f.push(b)});return{type:"element",
html:c,attributes:f,attribute_values:f.map(this.get_attribute.bind(this)),additional_classes:this.get_additional_classes()}};l.creators_from_json.element=function(c,f){var l=decodeURIComponent("string"===typeof c.html?c.html:f.shared_html[c.html.shared_html_index]),k=d.create(l,c.attributes,c.description),b;b=f&&f.event?["left","top"]:[];c.attribute_values.forEach(function(d,a){var e=c.attributes[a];0>b.indexOf(e)&&k.add_to_css(e,q(d)||d)});c.additional_classes&&k.set_additional_classes(c.additional_classes);
return k};d.create_attribute_path=function(c,d){var f=l.path.get_path_to(c.element_widget,d);return this.extend_attribute_path(f,c.attribute)};d.extend_attribute_path=function(c,d){return{dereference:function(f,k,b){return c.dereference(k||f,void 0,b).get_attribute_widget(d)},toString:function(){return"the '"+d+"' property of "+c},get_json:function(){return{type:"path_to_style_attribute",attribute:d,element_widget_path:c.get_json()}}}};l.creators_from_json.path_to_style_attribute=function(c){var f=
l.UTILITIES.create_from_json(c.element_widget_path);return d.extend_attribute_path(f,c.attribute)};d.get_size_attributes=function(){return{width:this.get_attribute("width"),height:this.get_attribute("height")}};d.set_size_attributes=function(c,d){this.set_attribute("width",c);this.set_attribute("height",d)};d.set_location_attributes=function(c,d){this.set_attribute("left",c);this.set_attribute("top",d)};return d}(window.TOONTALK);window.TOONTALK.element_backside=function(l){var f=function(m,n,q){var k=
function(a){var b=n.get_style_attributes();0>b.indexOf(a)&&(b.push(a),"left"===a?(a=n.get_frontside_element(),$(a).on("drag",function(a){var b=n.get_backside_element(),c=n.get_frontside_element();b&&c&&$(b).find(".toontalk-element-left-attribute-input").val(a.originalEvent.clientX)})):"top"===a&&(a=n.get_frontside_element(),$(a).on("drag",function(a){var b=n.get_backside_element(),c=n.get_frontside_element();b&&c&&$(b).find(".toontalk-element-top-attribute-input").val(a.originalEvent.clientY)})))},
b=function(a,b){var h=0<=n.get_style_attributes().indexOf(a),g=l.UTILITIES.create_check_box(h,"toontalk-style-attribute-check-box",a+"&nbsp;","Click to add or remove the '"+a+"' style attribute from the backside of this element."),h=l.UTILITIES.create_anchor_element("i",("transform-origin-x"===a||"transform-origin-y"===a?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin#":c(a)?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform#":"http://www.w3.org/community/webed/wiki/CSS/Properties/")+
a),w=document.createElement("li");$(h).addClass("toontalk-help-button toontalk-attribute-help-button");$(h).css({color:"white"});g.container.appendChild(h);g.button.addEventListener("click",function(b){if(g.button.checked)k(a);else{b=n.get_style_attributes();var c=b.indexOf(a);0<=c&&(b.splice(c,1),f(m,n,q))}d(q,n,n.get_backside())});w.appendChild(g.container);b.appendChild(w)},g=function(a,c){var d,f;"string"===typeof a?b(a,c):a.label?(d=document.createElement("h3"),d.textContent=a.label,f=document.createElement("ul"),
c.appendChild(d),c.appendChild(f),g(a.sub_menus,f)):a.forEach(function(a){g(a,c)})};$(m).is(".ui-accordion")&&$(m).accordion("destroy");$(m).empty();g([{label:"Geometry attributes",sub_menus:"left top width height z-index background-position".split(" ")},{label:"Color attributes",sub_menus:["background-color","color","opacity"]},{label:"Font attributes",sub_menus:["font-size","font-weight"]},{label:"Visibility",sub_menus:["display","visibility"]},{label:"Transformations",sub_menus:["rotate","skewX",
"skewY","transform-origin-x","transform-origin-y"]}],m);$(m).accordion({active:0,heightStyle:"content"});return m},d=function(c,d,f){var k=d.get_style_attributes();d.get_frontside_element();$(c).empty();k.forEach(function(b){d.get_attribute(b);var g=document.createElement("tr"),a=document.createElement("td"),e=d.get_attribute_widget(b),h=e.get_frontside_element();e.set_parent_of_frontside(f,!1,!0);e.set_infinite_stack(!0);c.appendChild(g);g.appendChild(a);a.appendChild(l.UTILITIES.create_text_element(b));
a=document.createElement("td");g.appendChild(a);e.set_visible(!0);$(h).addClass("toontalk-element-attribute");a.appendChild(h);e.render()})},q=function(c){var d=$("<button>Add or remove style attributes</button>").button();d.addClass("toontalk-show-attributes-chooser-button");d.click(function(f){$(c).is(":visible")?($(c).hide(),d.button("option","label","Add or remove style attributes"),d.attr("title","Click to add widgets for reading and writing style attributes of this element.")):($(c).show(),
d.button("option","label","Hide style attributes list"),d.attr("title","Click to hide the list of attributes that can be added or removed."))});d.attr("title","Click to add widgets for reading and writing style attributes of this element.");return d.get(0)};return{create:function(c){var n=l.backside.create(c),r=n.get_element();c.get_HTML();var k=document.createElement("table"),b=document.createElement("div"),g=q(b),a=l.backside.create_advanced_settings_button(n,c),e=l.UTILITIES.get_current_url_boolean_parameter("elementHTML",
!1),h=e?"get_HTML":"get_text",u=n.update_display,w,y;c.update_display();w=c[h]().trim();0<w.length&&(y=l.UTILITIES.create_text_area(w,"toontalk-html-input","","Type here to edit the text."),w=function(a){a=y.button.value.trim();c.get_frontside_element();var b=e?"set_HTML":"set_text";c[b](a)&&l.robot.in_training&&l.robot.in_training.edited(c,{setter_name:b,argument_1:a,toString:"change the text to "+a+" of",button_selector:".toontalk-html-input"})},$(y.container).resizable(),$(y.container).css({width:"100%"}),
$(y.button).css({width:"100%"}),y.button.addEventListener("change",w),y.button.addEventListener("mouseout",w),r.appendChild(y.container));n.get_attributes_chooser=function(){return b};f(b,c,k);d(k,c,n);r.appendChild(b);r.appendChild(g);r.appendChild(k);r.appendChild(a);$(b).hide();$(b).addClass("toontalk-attributes-chooser");n.update_display=function(){y&&$(y.button).val(c[h]());d(k,c,n);$(b).is(":visible")&&f(b,c,k);u()};$(r).find(".toontalk-hide-backside-button").click(function(a){$(b).hide()});
n.add_advanced_settings();return n}}}(window.TOONTALK)})();window.TOONTALK.sensor=function(c){var l=Object.create(c.widget),f=function(c,f){"element"===c.get_type_name()&&(c.set_attribute("font-size",.5*$(f.get_frontside_element(!0)).height(),!1,!0),c.set_additional_classes("toontalk-string-value-from-sensor"),f.visible()&&c.rerender())};l.create=function(d,q,m,n,r,k){var b=c.nest.create(m,n,void 0,"sensor"),g=b.get_json,a=b.update_display,e=b.copy,h=function(a){var e=a[q],d=b.visible(),h=$(b.get_frontside_element()).closest(".toontalk-top-level-backside"),
g;if("keyCode"===q){if(16===e)return;e=String.fromCharCode(e);a.shiftKey||(e=e.toLowerCase())}switch(typeof e){case "number":g=c.number.create(Math.round(e),1);break;case "string":g=c.element.create(e,void 0,void 0,"toontalk-string-value-from-sensor");f(g,b);break;case "boolean":g=c.element.create(e.toString(),void 0,void 0,"toontalk-string-value-from-sensor");f(g,b);break;case "undefined":c.UTILITIES.report_internal_error("No "+q+" in sensor "+l);return}d?(a=c.bird.create(),b.add_to_top_level_backside(a),
a.animate_delivery_to(g,b,b,h.width()/2,h.height())):b.add_to_contents(g)}.bind(this);b.copy=function(a){var h;if(a&&this.has_contents())return e.call(this,!0);h=c.sensor.create(d,q,m,void 0,r,a?void 0:k);return b.add_to_copy(h,a)};b.get_json=function(a){var b=g.call(this,a);b.type="sensor";b.event_name=d;b.attribute=q;b.active=r;b.sensor_of=k&&c.UTILITIES.get_json(k,a);return b};b.update_display=function(){var b=$(this.get_frontside_element());a.call(this);r||b.is(".toontalk-top-level-resource")?
(b.addClass("toontalk-sensor-nest"),b.removeClass("toontalk-sensor-inactive-nest")):(b.addClass("toontalk-sensor-inactive-nest"),b.removeClass("toontalk-sensor-nest"));b.removeClass("toontalk-empty-nest")};b.get_type_name=function(){return"sensor"};b.get_help_URL=function(){return"docs/manual/sensors.html"};b.toString=function(){return"a sensor of "+q+" for "+d+" sensors"};b.get_active=function(){return r};b.set_active=function(a,b){if(r!==a||b)a?k?k.get_frontside_element().addEventListener(d,h):
window.addEventListener(d,h):k?k.get_frontside_element().removeEventListener(d,h):window.removeEventListener(d,h),r=a};b.set_active(r,!0);b.create_backside=function(){return c.sensor_backside.create(this)};b.get_event_name=function(){return d};b.set_event_name=function(a){var b=r;d&&r&&this.set_active(!1);d=a;b&&this.set_active(!0)};b.get_attribute=function(){return q};b.set_attribute=function(a){q=a};b.match=function(a){return"not matched"};b.set_sensor_of=function(a){k=a};return b};c.creators_from_json.sensor=
function(d,l){var m=c.UTILITIES.create_array_from_json(d.contents,l),n=c.sensor.create(d.event_name,d.attribute,d.description,m,!1);d.sensor_of?c.UTILITIES.set_timeout(function(){n.set_sensor_of(c.UTILITIES.create_from_json(d.sensor_of,l));n.set_active(d.active)}):n.set_active(d.active);0<m.length&&setTimeout(function(){m.forEach(function(c){f(c.get_widget(),n)})},500);return n};return l}(window.TOONTALK);
window.TOONTALK.sensor_backside=function(c){return{create:function(l){var f=c.UTILITIES.create_text_input(l.get_event_name(),"toontalk-sensor-event-name-input","Event name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;","Type here the event name.","https://developer.mozilla.org/en-US/docs/Web/Events/"+l.get_event_name()),d=c.UTILITIES.create_text_input(l.get_attribute(),"toontalk-sensor-event-attribute-input","Event attribute","Type here the event attribute name.","https://developer.mozilla.org/en/docs/Web/API/Event"),
q=c.UTILITIES.create_check_box(l.get_active(),"toontalk-sensor-active-check-box","Listening to events","Check the box if you want to make this sensor active."),m=c.nest_backside.create(l),n=m.get_element(),r=$(n).find(".toontalk-settings-backside-button").get(0);f.button.addEventListener("change",function(){l.set_event_name(f.button.value.trim())});d.button.addEventListener("change",function(){l.set_attribute(d.button.value.trim())});$(q.button).click(function(d){var b=q.button.checked;l.set_active(b);
c.robot.in_training&&c.robot.in_training.edited(robot,{setter_name:"set_active",argument_1:b,toString:"change to "+(b?"active":"inactive")+" of the "+l,button_selector:".toontalk-sensor-active-check-box"});l.render();d.stopPropagation()});n.insertBefore(f.container,r);n.insertBefore(d.container,r);n.insertBefore(q.container,r);return m}}}(window.TOONTALK);window.TOONTALK.tool=function(c){return{add_listeners:function(l,f){var d,q,m,n,r,k=function(a){var b=g(a),d;a.preventDefault();var f=0,k=0;20>a.clientX?f=-20:a.clientX+20>window.innerWidth&&(f=20);20>a.clientY?k=-20:a.clientY+20>window.innerHeight&&(k=20);window.scrollBy(f,k);l.style.left=a.pageX-f-q+"px";l.style.top=a.pageY-k-m+"px";if(b&&b.is_of_type("top-level"))r&&(c.UTILITIES.remove_highlight(),r=void 0);else{if(b&&(d=b.get_frontside_element(),d===r))return;r=d;c.UTILITIES.highlight_element(r)}},
b=function(a){var e=g(a),h;a.preventDefault();r&&c.UTILITIES.remove_highlight();e&&e.add_copy_to_container&&(h=e.top_level_widget(),f.apply_tool(e,a),h.backup_all());!e&&f.nothing_under_tool&&f.nothing_under_tool();$(l).removeClass("toontalk-tool-held");$(l).addClass("toontalk-tool-returning");c.UTILITIES.add_one_shot_event_handler(l,"transitionend",1E3,function(){$(l).removeClass("toontalk-tool-returning")});c.UTILITIES.set_timeout(function(){l.style.left=d.left+"px";l.style.top=d.top+"px"});document.removeEventListener("mousemove",
k);document.removeEventListener("mouseup",b)},g=function(a){var b;$(l).hide();a=document.elementFromPoint(a.pageX-(window.pageXOffset+q),a.pageY-(window.pageYOffset+m)+n/2);for($(l).show();a&&!a.toontalk_widget&&(!$(a).is(".toontalk-backside")||$(a).is(".toontalk-top-level-backside"));)a=a.parentNode;a&&(b=a.toontalk_widget);if(b)return a=b.get_type_name(),b&&"empty hole"===a?b.get_parent_of_frontside():b};l.addEventListener("mousedown",function(a){var c=l.getBoundingClientRect();q=a.clientX-c.left;
m=a.clientY-c.top;n=c.height;a.preventDefault();$(l).addClass("toontalk-tool-held");d=$(l).offset();document.addEventListener("mousemove",k);document.addEventListener("mouseup",b)})}}}(window.TOONTALK);window.TOONTALK.vacuum=function(c){var l=Object.create(null),f={suck:"Drag this vacuum over the thing you want to remove. Click or type 'e' to switch to erasing. Type 'r' to restore previously removed or erased things.",erase:"Drag this vacuum over the thing you want to erase (or un-erase). Type 's' to switch to sucking. Click or type 'r' to restore contents.",restore:"Drag this over the work area. Each time you release it a widget is restored. Click or type 's' to switch to sucking. Type 'e' to switch to erasing."},
d={suck:"toontalk-vacuum-s",erase:"toontalk-vacuum-e",restore:"toontalk-vacuum-r"},q={suck:"erase",erase:"restore",restore:"suck"};l.create=function(){var l,n,r,k=[],b=function(a){n!==a&&(n=a,$(l).removeClass(r),r=d[n],$(l).addClass(r),g())},g=function(){l.title="restore"===n&&0===k.length?"The vacuum is empty. Type 'r' to switch to removing. Type 'e' to switch to erasing.":f[n]};return{apply_tool:function(a,b){var d,g;"suck"===n?a.remove&&"top-level"!==a.get_type_name()&&(c.robot.in_training&&c.robot.in_training.removed(a),
a.remove(b),k.push(a)):"erase"===n?"top-level"!==a.get_type_name()&&(a.get_frontside_element(),d=!a.get_erased(),a.set_erased(d,!0),c.robot.in_training&&c.robot.in_training.set_erased(a,d)):"restore"===n&&0<k.length&&(d=k.pop(),g=a.add_to_top_level_backside(d,!0),d=$(l).offset(),d.left-=$(g).width(),c.UTILITIES.set_absolute_position($(g),d))},nothing_under_tool:function(){b(q[n])},get_element:function(){l||(l=document.createElement("div"),$(l).addClass("toontalk-vacuum"),c.tool.add_listeners(l,this),
b("suck"),document.addEventListener("keyup",function(a){a=String.fromCharCode(a.keyCode);"s"===a||"S"===a?b("suck"):"e"===a||"E"===a?b("erase"):"r"!==a&&"R"!==a||b("restore")}),g());return l}}};c.creators_from_json.vacuum=function(d,f){var l=c.vacuum.create();d.mode&&c.UTILITIES.set_timeout(function(){l.set_mode(d.mode)});return l};return l}(window.TOONTALK);window.TOONTALK.wand=function(c){var l=Object.create(null);l.create=function(){var f;return{apply_tool:function(c){"top-level"!==c.get_type_name()&&c.add_copy_to_container()},get_element:function(){f||(f=document.createElement("div"),$(f).addClass("toontalk-wand"),f.title="Drag this magic wand over the thing you want to copy.",c.tool.add_listeners(f,this));return f}}};c.creators_from_json.wand=function(){return c.wand.create()};return l}(window.TOONTALK);window.TOONTALK.SETTINGS=function(c){var l=function(l,m,n){var r=[],k=[],b=m?1:0,g=c.UTILITIES.create_local_files_table(l);r[b]="Programs stored in browser";d(l,g,!1,n);k[b]=g;m?(f("program",l,n,function(a){r[0]="Programs in cloud";k[0]=a||c.UTILITIES.create_text_element("Error connecting");k[2]&&n.appendChild(c.UTILITIES.create_tabs(r,k))}),f("page",l,n,function(a){r[2]="Published pages";k[2]=a||c.UTILITIES.create_text_element("Error connecting");k[0]&&n.appendChild(c.UTILITIES.create_tabs(r,k))})):
n.appendChild(c.UTILITIES.create_tabs(r,k))},f=function(f,l,n,r){c.google_drive.get_toontalk_files(!1,f,function(k){var b;"string"===typeof k?b=k:k.error&&(b=k.error.message);b?"Need to authorize"===b||"Login Required"===b?c.google_drive.authorize(r):(console.log(b),console.log("Google drive status: "+c.google_drive.get_status()),r(null)):(b="program"===f?"toontalk-file-load-button":"toontalk-published-page-button",k=c.UTILITIES.create_file_data_table(k.items,!0,b),d(l,k,!0,n),r(k))})},d=function(d,
f,l,r){$(f).find(".toontalk-file-load-button").click(function(c){var b=function(){$(r).remove()},g=function(){d.set_setting("program_name",c.target.innerText);d.load(l,b)}.bind(this);d.save(!0,void 0,g)});$(f).find(".toontalk-published-page-button").click(function(d){c.UTILITIES.open_url_and_enable_editor(this.title,this.id)})};return{open:function(d){var f=document.createElement("div"),n=d.get_backside_element(),r=d.get_setting("program_name"),k=c.UTILITIES.create_text_input(r,"toontalk-program-name-input",
"Current program name:","Edit this to change the name of your program","docs/manual/settings.html"),b=c.UTILITIES.create_close_button(function(){$(f).remove()},"Click to close the settings panel."),g=c.UTILITIES.create_text_element("How should your program be saved?"),a=c.UTILITIES.create_check_box(d.get_setting("auto_save_to_google_drive"),"toontalk-save-setting","Save automatically to my Google Drive","Check this if you want your programs automatically saved to a 'ToonTalk Programs' folder in your Google Drive."),
e=c.UTILITIES.create_check_box(d.get_setting("auto_save_to_local_storage"),"toontalk-save-setting","Save automatically to this browser's local storage","Check this if you want your programs automatically saved in this browser's local storage."),h=c.UTILITIES.create_button("Save to Google Drive now","toontalk-save-button","Click to save your program now to your Google Drive account.",function(){d.save(!0,{google_drive:!0})}),u=c.UTILITIES.create_button("Save to browser's storage now","toontalk-save-button",
"Click to save your program now to this browser's local storage.",function(){d.save(!0,{local_storage:!0})}),w=c.UTILITIES.create_button("Login to Google","toontalk-google-login-button","Click to log in to Google to authorize use of your Google Drive.",function(){c.google_drive.authorize(function(){$(w).remove()})}),y=c.UTILITIES.create_button("Publish","toontalk-publish-button","Click to publish your program by generating a Google Drive URL.",function(){d.publish(v)}),v=function(a,b){var e=x(a,"Published: ",
b);$(k.container).find("tr").append(c.UTILITIES.create_table_entry(e))},x=function(a,b,e){var h=document.createElement("span"),g=c.google_drive.google_drive_url(a.id);h.innerHTML=b+"<div class='toontalk-published-page-button'>"+d.get_setting("program_name")+"</div>";h.addEventListener("click",function(b){c.UTILITIES.open_url_and_enable_editor(g,a.id,e)});return h},z=document.createElement("div"),B=c.google_drive?c.google_drive.get_status():"Google Drive code not loaded",I=!0;$(f).addClass("toontalk-settings-panel").css({width:$(n).width()+
29,height:$(n).height()+50,left:-2,top:-25,"z-index":c.UTILITIES.next_z_index()});f.appendChild(b);k.button.addEventListener("change",function(){var a=k.button.value.trim();r!==a&&d.save(!0,void 0,function(){r=a;d.set_setting("program_name",a);d.load(!0,function(){setTimeout(function(){$(f).css({"z-index":c.UTILITIES.next_z_index()})},500)})})});a.button.addEventListener("click",function(b){d.set_setting("auto_save_to_google_drive",a.button.checked);a.button.checked?$(h).hide():$(h).show()});e.button.addEventListener("click",
function(a){d.set_setting("auto_save_to_local_storage",e.button.checked);e.button.checked?$(u).hide():$(u).show()});f.appendChild(z);$(g).css({"font-weight":"bold","font-size":24,color:"navy"});z.appendChild(g);z.appendChild(k.container);z.appendChild(a.container);z.appendChild(e.container);a.container.appendChild(c.UTILITIES.create_space());a.container.appendChild(h);d.get_setting("auto_save_to_google_drive")&&$(h).hide();e.container.appendChild(c.UTILITIES.create_space());e.container.appendChild(u);
d.get_setting("auto_save_to_local_storage")&&$(u).hide();"Need to authorize"===B?(a.container.appendChild(c.UTILITIES.create_space()),a.container.appendChild(w)):"Authorized"!==B&&"Ready"!==B&&"Authorized but not yet ready"!==B&&(I=!1,setTimeout(function(){a.button.disabled=!0;$(y).button("option","disabled",!0);$(h).button("option","disabled",!0);a.container.title="Inactived because attempt to connect to Google Drive returned: "+B;y.title=a.container.title;h.title=a.container.title},1));$(k.container).find("tr").append(c.UTILITIES.create_table_entry(y));
l(d,I,f);n.appendChild(f)}}}(window.TOONTALK);window.TOONTALK.DEFAULT_SETTINGS={program_name:"My first program",auto_save_to_google_drive:!0,auto_save_to_local_storage:!0};window.TOONTALK.DISPLAY_UPDATES=function(c){var l=[],f=0;return{pending_update:function(c){c.update_display&&(0<=l.indexOf(c)||l.push(c))},update_display:function(){var d=l,f=function(c,d){$(c).children().each(function(c,k){$(k).css({"z-index":d+1});f(k,d+1)})};l=[];0!==d.length&&d.forEach(function(d){var l=d.get_frontside_element&&d.get_frontside_element(),r,k,b;d.update_display();r=$(l).parent().closest(".toontalk-side");r.is("*")&&(k=c.UTILITIES.get_style_numeric_property(l,"z-index"),b=c.UTILITIES.get_style_numeric_property(r.get(0),
"z-index"),b||(b=c.UTILITIES.next_z_index(),r.css({"z-index":b})),!k||r.is(".toontalk-top-level-backside")?(k=c.UTILITIES.next_z_index(),$(l).css({"z-index":k})):k>=b&&(k=b+1,$(l).css({"z-index":k})),f(l,k));l&&!$(l).is(".toontalk-top-level-resource, .toontalk-bird, .toontalk-nest, .toontalk-box-hole, .toontalk-plain-text-element, .toontalk-conditions-contents, .toontalk-robot, .toontalk-widget, .toontalk-held-by-robot")&&c.UTILITIES.set_timeout(function(){r.is(".toontalk-box-hole")?$(l).is(".ui-resizable")&&
$(l).resizable("destroy"):$(l).is(".ui-resizable")||c.UTILITIES.make_resizable($(l),d)})})},run_cycle_is_over:function(){var c=Date.now();20<=c-f&&(this.update_display(),f=c)}}}(window.TOONTALK);window.TOONTALK.actions=function(c){c.creators_from_json.body=function(l,f){var d=c.actions.create();f.body=d;d.initialise_steps(c.UTILITIES.create_array_from_json(l.steps,f));return d};return{create:function(l){var f=Object.create(this),d=[];l||(l=[]);f.copy=function(){return c.actions.create(c.UTILITIES.copy_array(l))};f.get_steps=function(){return l};f.initialise_steps=function(c){l=c};f.is_empty=function(){return 0===l.length};f.reset_steps=function(){l=[];this.reset_newly_created_widgets()};
f.reset_newly_created_widgets=function(){d=[]};f.add_step=function(c,d){l.push(c);d&&this.add_newly_created_widget(d)};f.add_newly_created_widget_if_new=function(c){0<=d.indexOf(c)||this.add_newly_created_widget(c)};f.add_newly_created_widget=function(f){c.debugging&&0<=d.indexOf(f)?console.log("add_newly_created_widget called with not new widget."):d.push(f)};f.get_newly_created_widgets=function(){return d};f.get_path_to=function(f,l){var n,r;d.some(function(d,b){if(d===f)return n=c.newly_created_widgets_path.create(b),
!0;if(d.get_path_to&&(r=d.get_path_to(f,l)))return n=c.newly_created_widgets_path.create(b),n.next=r,!0});return n};f.dereference=function(f){c.debugging&&!d[f]&&c.UTILITIES.report_internal_error("Expected to find the "+(f+1)+"th newly created widget.");return d[f]};return f},run_unwatched:function(c,f,d,q,m){var n=this.get_steps();m||(m=0);q.run_next_step=function(){if(m<n.length){var r=n[m];m++;r.run_unwatched(c,f,q)}else q.get_run_once()||q.get_first_in_team().run(c,f,d)};q.run_next_step()},run_watched:function(l,
f,d,q){var m=this.get_steps(),n=q.get_frontside_element(),r=n.parentElement,k=function(){$(n).addClass("toontalk-side-animating");c.UTILITIES.set_position_relative_to_top_level_backside($(n),g);setTimeout(function(){r.appendChild(n);c.UTILITIES.set_absolute_position($(n),g);q.set_animating(!1);q.get_run_once()||q.get_first_in_team().run(l,f,d);q.render()},1E3)},b=0,g=$(n).offset(),a=$(n).position(),e=$(n).width(),h=$(n).height(),u=$(n).closest(".toontalk-backside"),w=u.get(0).getBoundingClientRect(),
y=$(n).closest(".toontalk-top-level-backside").offset(),v=l.get_backside();0===e&&($(n).css({width:"",height:""}),e=$(n).width(),h=$(n).height());y||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),y={left:0,top:0});if(g.left<w.left-y.left||g.top<w.top-y.top||g.left+e>w.right+y.left||g.top+h>w.bottom+y.top)g=u.offset(),g.left+=u.width()/2,g.top+=u.height()-h;q.start_position=a;q.run_next_step=function(){v&&v.visible()?setTimeout(function(){if(b<m.length){var a=
m[b];b++;a.run_watched(l,f,q);q.get_thing_in_hand()&&(q.get_thing_in_hand().save_dimensions(),q.render())}else k()},500):(q.set_animating(!1),$(n).css({width:"",height:""}),n.style.left=a.left+"px",n.style.top=a.top+"px",r.appendChild(n),this.run_unwatched(l,f,d,q,b))}.bind(this);q.set_animating(!0,g);q.run_next_step();return!0},toString:function(){var c="",f=this.get_steps();f.forEach(function(d,q){c+=d.toString();c=q===f.length-2?c+" and \n":q<f.length-2?c+", \n":c+"."});return c},get_json:function(l){return{type:"body",
steps:c.UTILITIES.get_json_of_array(this.get_steps(),l)}}}}(window.TOONTALK);
window.TOONTALK.newly_created_widgets_path=function(c){c.creators_from_json.newly_created_widgets_path=function(l){return c.newly_created_widgets_path.create(l.index)};return{create:function(l){return{dereference:function(f,d,q){f=q.get_body().dereference(l);return this.next?c.path.dereference_path(this.next,f,d,q):f},toString:function(){var c;switch(l){case 0:c="first";break;case 1:c="second";break;case 2:c="third";break;default:c=l+1+"th"}return"the "+c+" widget he created"},get_json:function(){return{type:"newly_created_widgets_path",
index:l}}}}}}(window.TOONTALK);window.TOONTALK.robot_action=function(c){var l={copy:function(c,b,d,a){a.add_newly_created_widget(c.copy());return!0},"pick up":function(c,b,d,a){a.set_thing_in_hand(c);return!0},"pick up a copy of":function(c,b,d,a){c=c.copy();a.add_newly_created_widget(c);a.set_thing_in_hand(c);return!0},"drop it on":function(d,b,g,a,e){if(d)if(b=a.get_thing_in_hand()){if(b.drop_on)return b.drop_on(d,!1,void 0,a),a.set_thing_in_hand(void 0),d.visible&&d.visible()&&d.render(),b.robot_waiting_before_next_step===a?
(e&&e.running_watched||(b.robot_waiting_before_next_step=void 0),!1):!0;c.UTILITIES.report_internal_error("Thing in robot's hand ("+b+") doesn't handle 'drop_on'. Robot that "+a)}else c.UTILITIES.report_internal_error("The robot that '"+a.toString()+"' is executing drop_on but has nothing in its hand.");else c.UTILITIES.report_internal_error("The robot that '"+a.toString()+"' is executing drop_on but doesn't know where to drop what its holding")},remove:function(c,b,d,a){c.remove();return!0},erased_widget:function(c,
b,d,a,e){c.set_erased(e.erased);return!0},edit:function(d,b,g,a,e){if(d[e.setter_name])return e.argument_2?d[e.setter_name].call(d,e.argument_1,e.argument_2,d.visible()):d[e.setter_name].call(d,e.argument_1,d.visible()),!0;c.UTILITIES.report_internal_error(d+" cannot be edited.")},"add to the top-level backside":function(c,b,d,a,e){a.visible()||(a=c.get_frontside_element(!0),d=$(b.get_frontside_element()).position(),b=$(b.get_frontside_element()).closest(".toontalk-top-level-backside").get(0),$(a).css({left:d.left,
top:d.top}),b.appendChild(a),b.toontalk_widget.add_backside_widget(c),c.animate_to_element(b));return!0}},f=function(c,b,d,a,e){b=a.get_thing_in_hand();a.get_frontside_element();var h=c.get_element();d=$(h).width()/2;h=$(h).height()/2;a.animate_to_widget(c,e,.25,d,h);b&&a.render()},d=function(c,b){var d=c.get_backside_element(!0);return $(d).find(b).get(0)},q=function(c,b,f,a,e,h){var l=d(c,h),m=a.get_frontside_element(),n=l&&$(l).is(":visible"),q=function(){e();$(l).addClass("ui-state-active");setTimeout(function(){$(l).removeClass("ui-state-active");
!n&&c.get_backside()&&c.get_backside().hide_backside();a.run_next_step()},500)};b=function(){a.animate_to_element(l,q,.25,0,-$(m).height())};!n&&c.open_backside?c.open_backside(b):b()},m=function(c,b,d,a,e,h){a.get_frontside_element();a.carrying_tool=h;a.update_display();a.animate_to_element(c.get_frontside_element(),function(){e();a.carrying_tool=void 0;a.update_display();a.run_next_step()},.25,0,0)},n=function(c,b,d,a,e){var h=c.get_parent_of_frontside();m(c,b,d,a,function(){e();h&&"top-level"!==
h.get_widget().get_type_name()&&h.update_display&&h.update_display();c.render()},"toontalk-vacuum-ready-small")},r={copy:function(c,b,d,a,e){m(c,b,d,a,function(){e();c.add_copy_to_container(a.get_recently_created_widget())},"toontalk-wand-small")},"pick up":function(d,b,g,a,e){var h=d.get_frontside_element(),l=function(){e();a.run_next_step()};"empty hole"===d.get_type_name()?c.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):(d.save_dimensions(),$(h).css({width:h.offsetWidth+
"px",height:h.offsetHeight+"px"}),f(d,b,g,a,l))},"pick up a copy of":function(c,b,d,a,e){f(c,b,d,a,function(){e();a.get_recently_created_widget().set_visible(!0);a.update_display();a.run_next_step()})},"drop it on":function(d,b,g,a,e){var h=a.get_thing_in_hand(),l;h?(l=$(h.get_frontside_element()),f(d,b,g,a,function(){var b=l.offset();l.removeClass("toontalk-held-by-robot");e();h.drop_on&&($(a.get_frontside_element()).closest(".toontalk-top-level-backside").append(l.get(0)),c.UTILITIES.set_absolute_position(l,
b),h.restore_dimensions(),h.robot_waiting_before_next_step===a?h.robot_waiting_before_next_step=void 0:(a.set_thing_in_hand(void 0),a.run_next_step()),a.rerender())})):(c.UTILITIES.report_internal_error("Expected the robot to be holding something."),console.log("The robot is "+a),f(d,b,g,a,e))},remove:n,erased_widget:n,edit:function(c,b,d,a,e,h){q(c,b,d,a,function(){c.get_backside()&&c.get_backside().update_display();e()},h.button_selector)},"add to the top-level backside":function(c,b,d,a,e){e();
a.run_next_step()}};c.creators_from_json.robot_action=function(d,b){return d.additional_info?c.robot_action.create(c.path.create_from_json(d.path,b),d.action_name,d.additional_info):c.robot_action.create(c.path.create_from_json(d.path,b),d.action_name)};return{create:function(d,b,f){var a=Object.create(this),e=l[b],h=r[b];h||(h=function(a,b,c,e,d){setTimeout(function(){continuation(a)},3E3)});d||c.UTILITIES.report_internal_error("path undefined in "+b+" action");e||c.UTILITIES.report_internal_error("no run_function for "+
b);a.run_unwatched=function(a,b,h){var l=c.path.dereference_path(d,a,b,h);if(!l)return c.UTILITIES.report_internal_error("Unable to dereference path: "+c.path.toString(d)+" in context: "+a.toString()),!1;e(l,a,b,h,f)&&h.run_next_step()};a.run_watched=function(a,b,l){var m=c.path.dereference_path(d,a,b,l),n=function(){f||(f={});f.running_watched=!0;e(m,a,b,l,f)};m?(m.set_visible(!0),h(m,a,b,l,n,f)):c.UTILITIES.report_internal_error("Unable to dereference the path: "+c.path.toString(d)+" in context: "+
a.toString())};a.toString=function(){return b+" "+c.path.toString(d)};a.get_json=function(a){return{type:"robot_action",action_name:b,path:c.path.get_json(d,a),additional_info:f}};return a}}}(window.TOONTALK);window.TOONTALK.queue=function(c){return{create:function(){var l=Object.create(this);l.to_run=c.UTILITIES.create_queue();return l},enqueue:function(l){if(c.debugging&&this.to_run.does_any_item_satisfy(function(c){return c.robot===l.robot}))console.log("The same robot is being queued twice."),console.log("Robot is "+l.robot);else return this.to_run.enqueue(l)},maximum_run:50,paused:!1,run:function(){for(var l,f=Date.now()+this.maximum_run;!(this.to_run.isEmpty()||this.paused||Date.now()>=f);)l=this.to_run.dequeue(),
l.robot.run_actions(l.context,l.top_level_context,l.queue);c.DISPLAY_UPDATES.run_cycle_is_over();c.UTILITIES.set_timeout(function(){this.run()}.bind(this),this.to_run.isEmpty()?this.maximum_run:0)}}}(window.TOONTALK);window.TOONTALK.path=function(c){c.creators_from_json["path.to_entire_context"]=function(){return c.path.to_entire_context()};c.creators_from_json["path.top_level_backside"]=function(){return c.path.top_level_backside};c.creators_from_json["path.to_backside_widget_of_context"]=function(l){return c.path.get_path_to_backside_widget_of_context(l.type_name)};c.creators_from_json["path.to_resource"]=function(l,f){return c.path.get_path_to_resource(c.UTILITIES.create_from_json(l.resource,f))};return{get_path_to:function(l,
f){var d=function(d,f){var l=f.get_context(),r=f.get_body(),k,b;if(l===d)return c.path.to_entire_context();b=d.get_type_name();if("top-level"===b)return c.path.top_level_backside;if(k=r.get_path_to(d,f))return k;if("element attribute"===b&&d.get_original_attribute_widget()===d)return c.element.create_attribute_path(d,f);if(l.get_path_to&&(r=l.get_path_to(d,f)))return k=c.path.to_entire_context(),k.next=r,k;l.backside_widgets.some(function(b){b=b.get_widget();var a;if(b===d||b.top_contents_is&&b.top_contents_is(d))return k=
c.path.get_path_to_backside_widget_of_context(b.get_type_name()),f.add_to_backside_conditions(b),!0;if(b.get_path_to&&(a=b.get_path_to(d,f)))return k=c.path.get_path_to_backside_widget_of_context(b.get_type_name()),k.next=a,f.add_to_backside_conditions(b),!0});return k?k:c.path.get_path_to_resource(d.copy())}(l,f);d&&l.dereference_contents&&(c.path.path_end(d).not_to_be_dereferenced=!0);!d||"pick up"!==f.current_action_name&&"remove"!==f.current_action_name||(c.path.path_end(d).removing_widget=!0);
return d},path_end:function(c){for(;c.next;)c=c.next;return c},dereference_path:function(c,f,d,q){return c?c.dereference?c.dereference(f,d,q):f.dereference(c,d,q):f},continue_dereferencing_path:function(c,f,d,q){return c.next?f.dereference_contents&&!c.next.not_to_be_dereferenced?f.dereference_contents(c.next,d,q):f.dereference(c.next,d,q):f.dereference_contents&&!c.not_to_be_dereferenced?f.dereference_contents(c,d,q):f},toString:function(l){return l.next?(c.path.toString(l.next),c.path.toString(l.next)+
"of "+l.toString()):l.toString()},get_json:function(l,f){var d;if(!l.get_json)return l;d=l.get_json(f);l.next&&(d.next_path=c.path.get_json(l.next,f));l.removing_widget&&(d.removing_widget=!0);l.not_to_be_dereferenced&&(d.not_to_be_dereferenced=!0);return d},to_entire_context:function(){return{dereference:function(l,f,d){return c.path.continue_dereferencing_path(this,l,f,d)},toString:function(){return"what he's working on"},get_json:function(){return{type:"path.to_entire_context"}}}},get_path_to_resource:function(l,
f){l=l.get_widget();return{dereference:function(d,f,m){d=l.copy();var n,r,k;m.add_newly_created_widget(d);m.visible()&&!l.visible()&&(n=c.UTILITIES.find_resource_equal_to_widget(l))&&(k=d.get_frontside_element(),r=$(n).position(),c.UTILITIES.set_timeout(function(){$(k).css({left:r.left,top:r.top,width:n.offsetWidth,height:n.offsetHeight})}));return d},toString:function(){return c.UTILITIES.add_a_or_an(l.toString())},get_json:function(){return{type:"path.to_resource",resource:c.path.get_json(l,c.UTILITIES.fresh_json_history())}}}},
get_path_to_backside_widget_of_context:function(l){return{dereference:function(f,d,q){var m;f.backside_widgets.some(function(c){if(c.get_widget().is_of_type(l))return m=c.get_widget(),!0});if(m)return c.path.continue_dereferencing_path(this,m,d,q)},toString:function(){return"the "+l+" on the back of what he's working on"},get_json:function(){return{type:"path.to_backside_widget_of_context",type_name:l}}}},create_from_json:function(l,f){var d=c.UTILITIES.create_from_json(l,f),q;l.next_path&&(q=c.UTILITIES.create_from_json(l.next_path,
f),l.next_path.removing_widget&&(q.removing_widget=!0),l.next_path.not_to_be_dereferenced&&(q.not_to_be_dereferenced=!0),d.next=q);l.removing_widget&&(d.removing_widget=!0);l.not_to_be_dereferenced&&(d.not_to_be_dereferenced=!0);return d},top_level_backside:{dereference:function(c,f,d){return c.ancestor_of_type("top-level")},toString:function(){return"the top-level backside"},get_json:function(){return{type:"path.top_level_backside"}}}}}(window.TOONTALK);window.TOONTALK.publish=function(c){var l=['<!DOCTYPE html>\n<html>\n<head>\n<link rel="stylesheet" media="all" href="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/toontalk.css">\n<link href="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/css/font-awesome.min.css" rel="stylesheet" type="text/css" />\n<link href="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/css/froala_editor.min.css" rel="stylesheet" type="text/css" />\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/compile/toontalk.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/froala_editor.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/block_styles.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/colors.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/font_family.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/font_size.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/lists.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/tables.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/video.min.js">\x3c/script>\n<title>',
'</title>\n<link rel="shortcut icon" href="favicon.ico" />\n</head>\n<body>\n<form>\n<div class="toontalk-edit" name="content">',"</div>\n</form>\n",'\n<form>\n<div class="toontalk-edit" name="content">','</div>\n</form>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/support/published_support.js">\x3c/script>\n</body>\n</html>'],f=function(c,f,m){var n="";l.forEach(function(l,k){var b;n+=l;(b=0===k?c:1===k%2?f[(k-1)/2]:m[(k-2)/2])&&(n+=b)});return n};return{publish_widget:function(d,
l,m){var n=c.google_drive.get_status(),r=["Edit this. Select text for formatting.","And edit this."],k=function(a){(a=a&&a.items&&0<a.items.length&&a.items[0])?m(a,g):(contents=f(d,r,g),c.google_drive.upload_file(b,"html",contents,m))},b,g;"Ready"===n?(n=c.UTILITIES.get_json_top_level(l),b=l.get_setting("program_name"),l.set_setting("program_name",b+" (published version)"),g=[c.UTILITIES.toontalk_json_div(n,l)],l.set_setting("program_name",b),c.google_drive.get_toontalk_files(c.google_drive.full_file_name(b,
"page"),"page",k)):(console.log("Unable to publish to Google Drive because: "+n),m(null))},republish:function(d){c.google_drive.insert_or_update_file(void 0,d.file_id,"page",f(d.title,d.editable_contents,d.widgets_json),function(){console.log("Published page '"+d.title+"' updated.")})}}}(window.TOONTALK);function handle_client_load(){window.TOONTALK.google_drive.handle_client_load()}
window.TOONTALK.google_drive=function(c){var l=c.GOOGLE_DRIVE_CLIENT_ID||"1014278465319-fcagdv7f8232nvqevdkh87r4pmu6mvh8.apps.googleusercontent.com",f=c.ORIGIN_FOR_GOOGLE_DRIVE||"https://dl.dropboxusercontent.com",d="Need to authorize",q,m;return{handle_client_load:function(){0!==window.location.href.indexOf(f)?d="Connections to Google Drive are configured for the following domain only: "+f+". If you are hosting ToonTalk elsewhere you need to set window.TOONTALK.GOOGLE_DRIVE_CLIENT_ID and window.TOONTALK.ORIGIN_FOR_GOOGLE_DRIVE":setTimeout(window.TOONTALK.google_drive.check_authorization,
1)},check_authorization:function(){d="Awaiting authorization";gapi.auth.authorize({client_id:l,scope:"https://www.googleapis.com/auth/drive",immediate:!0},c.google_drive.handle_authorization_result)},handle_authorization_result:function(f,l){f&&!f.error?(d="Authorized but not yet ready",l&&l(),gapi.client.load("drive","v2",function(){c.google_drive.get_folder_ids(function(){d="Ready"})})):d="Need to authorize"},authorize:function(d){gapi.auth.authorize({client_id:l,scope:"https://www.googleapis.com/auth/drive",
immediate:!1},function(f){c.google_drive.handle_authorization_result(f,d)})},get_folder_ids:function(d){c.google_drive.get_folder_id(!0,function(f){q=f;c.google_drive.get_folder_id(!1,function(c){m=c;d()})})},get_folder_id:function(d,f){var k=d?"ToonTalk Programs":"ToonTalk Pages",b=function(b){var a=function(a){a&&a.id?f(a.id):console.error("Failure to create folder '"+k+"'. Response was "+a)};(b=b&&b.items&&0<b.items.length&&b.items[0].id)?f(b):d?c.google_drive.create_folder("ToonTalk Programs",
!1,a):c.google_drive.create_folder("ToonTalk Pages",!0,a)};d&&q?f(q):!d&&m?f(m):c.google_drive.fetch_folder_id(k,b)},get_status:function(){return d},connection_to_google_drive_possible:function(){return 0!==d.indexOf("Connections to Google Drive are configured for the following domain only: ")},list_files:function(c,d){gapi.client.request({path:"/drive/v2/files",method:"GET",params:c}).execute(d)},fetch_folder_id:function(d,f){c.google_drive.list_files({q:"mimeType = 'application/vnd.google-apps.folder' and title ='"+
d+"' and trashed = false"},f)},get_toontalk_files:function(d,f,k){f="properties has {key='ToonTalkType' and value='"+f+"' and visibility='PUBLIC'} and trashed = false";d&&(f+=" and title='"+d+"'");c.google_drive.list_files({q:f},k)},get_toontalk_program_file:function(d,f){c.google_drive.list_files({q:"'"+q+"' in parents and trashed = false and title='"+d+"'"},function(c){c&&c.items&&0<c.items.length?f(c.items[0]):f(null)})},upload_file:function(d,f,k,b){var g="json"===f?"program":"page",a=d+"."+f;
c.google_drive.get_toontalk_files(a,g,function(e){gapi.client.load("drive","v2",function(){var d=e&&e.items&&0<e.items.length&&e.items[0].id;b||(b=function(a){a.error&&(console.log("Google drive status: "+c.google_drive.get_status()),"Login Required"!==a.error.message&&console.log(a.error.message));console.log("File "+a.title+" ("+a.id+") "+(d?"updated":"created"))});d?c.google_drive.insert_or_update_file(void 0,d,g,k,b):c.google_drive.insert_or_update_file(a,void 0,g,k,b)})})},full_file_name:function(c,
d){return c+"."+("program"===d?"json":"html")},insert_or_update_file:function(d,f,k,b,g){var a={title:d,mimeType:"text/html"};a.parents=[{kind:"drive#fileLink",id:"program"===k?q:m}];b="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify(a)+"\r\n---------314159265358979323846\r\nContent-Type: text/html\r\n\r\n"+b+"\r\n---------314159265358979323846--";d?(d="/upload/drive/v2/files",a="POST"):(d="/upload/drive/v2/files/"+f,a="PUT");gapi.client.request({path:d,
method:a,params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="-------314159265358979323846"'},body:b}).execute(function(a){f||c.google_drive.insert_property(a.id,"ToonTalkType",k,"PUBLIC");g&&g(a)})},create_folder:function(c,d,f){gapi.client.drive.files.insert({resource:{title:c,mimeType:"application/vnd.google-apps.folder"}}).execute(d?function(b){gapi.client.drive.permissions.insert({fileId:b.id,resource:{value:"",type:"anyone",role:"reader"}}).execute(function(c){f(b)})}:
f)},download_file:function(c,d){if(c.downloadUrl){var f=gapi.auth.getToken().access_token,b=new XMLHttpRequest;b.open("GET",c.downloadUrl);b.setRequestHeader("Authorization","Bearer "+f);b.onload=function(){d(b.responseText)};b.onerror=function(){d(null)};b.send()}else d(null)},google_drive_url:function(c){return"https://googledrive.com/host/"+c+"/"},insert_property:function(c,d,f,b){gapi.client.drive.properties.insert({fileId:c,resource:{key:d,value:f,visibility:b}}).execute(function(b){})}}}(window.TOONTALK);window.TOONTALK.UTILITIES=function(c){var l,f=100,d=(new Date).getTime(),q,m=function(a){var b=a.indexOf("{"),c=a.lastIndexOf("}");if(!(0>b||0>c))return a.substring(b,c+1)},n=function(a,b,d,f,g,k,l,m,n,q){var r,D,G,V,K;d.set_visible(!0);if(a.is(".toontalk-backside")){if(d.is_of_type("top-level")){r=l.semantic.backside_widgets;D=l.shared_widgets;G=a.get(0);k=d.get_backside_widgets().slice();k.forEach(function(a,b){var c=a.get_widget(),e,g,k,l,m,n,q;d.remove_backside_widget(c,a.is_backside());e=0<=
r[b].widget.shared_widget_index?D[r[b].widget.shared_widget_index].view:r[b].widget.view;a.is_backside()?(g=c.get_backside_element(!0),k=e.backside_left,l=e.backside_top,m=e.backside_width,n=e.backside_height):(g=c.get_frontside_element(!0),k=e.frontside_left,l=e.frontside_top,m=e.frontside_width,n=e.frontside_height);f.add_backside_widget(c,a.is_backside());G.appendChild(g);q=$(g).position();$(g).css({left:q.left+k,top:q.top+l,width:m,height:n});a.is_backside()&&(c.backside_geometry=e.backside_geometry,
c.apply_backside_geometry())}.bind(this));return}d?f.get_backside().widget_dropped_on_me(d,q,k):c.UTILITIES.report_internal_error("No source_widget");m||(n=m=0,setTimeout(function(){var a=d.get_HTML(),c=b.width(),f=b.height();0<=a.indexOf("data:image")?(a=Math.min(80,c)/2,c=90,90>f&&(c-=(90-f)/2)):(a=Math.min(60,c/2),c=Math.min(30,f/2));b.css({left:V-a,top:K-c})},50));V=k.pageX-(g.left+m);K=k.pageY-(g.top+n);b.css({left:V,top:K});l&&l.semantic.running&&d.set_running(!0)}else if(a.is(".toontalk-drop-area"))b.addClass("toontalk-widget-in-drop_area"),
a.append(b.get(0)),b.is(".toontalk-robot")&&a.data("drop_area_owner").set_next_robot(c.UTILITIES.widget_from_jquery(b));else{if(b.is(".toontalk-backside-of-top-level"))return;if(f)G=a.closest(".toontalk-top-level-backside").get(0),G.appendChild(b.get(0)),g=$(G).offset(),b.css({left:k.pageX-(g.left+m),top:k.pageY-(g.top+n)}),d.drop_on&&d.drop_on(f,q,k)||f.widget_dropped_on_me&&f.widget_dropped_on_me(d,q,k)||(a=a.closest(".toontalk-top-level-backside"),0<a.length&&(f=c.UTILITIES.widget_from_jquery(a))&&
f.get_backside().widget_dropped_on_me(d,q,k));else{c.UTILITIES.report_internal_error("target element has no 'owner'");return}}c.UTILITIES.remove_highlight()},r=function(a,b,d,f,g){var k=new FileReader,l=0===a.type.indexOf("image"),q,r;k.onloadend=function(){if(l)q=c.element.create("<img src='"+k.result+"' alt='"+a.name+"'/>");else{if(r=m(k.result))try{q=c.UTILITIES.create_from_json(JSON.parse(r))}catch(B){}q||(q=c.element.create(k.result))}n(b,$(q.get_frontside_element(!0)),q,d,f,g)};l?k.readAsDataURL(a):
k.readAsText(a)},k=function(){l&&(l.removeClass("toontalk-being-dragged"),l.find("*").removeClass("toontalk-ignore-events"),c.UTILITIES.set_timeout(function(){l=void 0}))},b=function(a,c){if(a===c)return!0;if(a.parentNode)return b(a.parentNode,c)},g=[];window.addEventListener("message",function(a){a.source===window&&"zero-timeout-message"===a.data?(a.stopPropagation(),0<g.length&&g.shift()()):a.data.editable_contents&&c.publish.republish(a.data)},!1);$(document).ready(function(){c.debugging=c.UTILITIES.get_current_url_boolean_parameter("debugging",
!1);c.UTILITIES.process_json_elements()||$(document).click(function(){$(".toontalk-frontside").each(function(a,b){var c=b.toontalk_widget;c&&c.set_running&&c.set_running(!1)})});c.QUEUE=window.TOONTALK.queue.create();c.QUEUE.run();window.addEventListener("beforeunload",function(a){c.UTILITIES.backup_all_top_level_widgets(!0)});c.UTILITIES.add_test_all_button()});return{create_from_json:function(a,b,d){var f=function(a,b,c){b.shared_widgets[c]=a;a.finish_create_from_json_continuation&&(a.finish_create_from_json_continuation(),
a.finish_create_from_json_continuation=void 0);return a},g,k,l,m;if(a){b||(b={});a.shared_widgets&&(b.json_of_shared_widgets=a.shared_widgets,b.shared_widgets=[]);a.shared_html&&(b.shared_html=a.shared_html);if(a.widget)return g=c.UTILITIES.create_from_json(a.widget,b),a.is_backside?g.get_backside(!0):g;if(b&&b.shared_widgets&&0<=a.shared_widget_index){if(d=b.shared_widgets[a.shared_widget_index])return d;d=b.json_of_shared_widgets[a.shared_widget_index];g=c.UTILITIES.create_from_json(d,b,!0);return f(g,
b,a.shared_widget_index)}(l=a.semantic)||(l=a);a=a.view;if(0<=l.shared_widget_index)return g=c.UTILITIES.create_from_json(b.json_of_shared_widgets[l.shared_widget_index],b,!0),f(g,b,l.shared_widget_index);if(c.creators_from_json[l.type]){b||(b={});a?b.json_view=a:a=b.json_view;if((g=c.creators_from_json[l.type](l,b))&&g.get_backside){l.erased&&(c.widget.erasable(g),g.set_erased(l.erased));l.infinite_stack&&g.set_infinite_stack(l.infinite_stack);if(a&&a.frontside_width)if(k=a.backside?g.get_backside(!0).get_element():
g.get_frontside_element(),m={width:a.frontside_width,height:a.frontside_height},"element"===l.type)g.on_update_display(function(){$(k).css(m)});else $(k).css(m);a&&a.saved_width&&(g.saved_width=a.saved_width,g.saved_height=a.saved_height);a&&a.backside_geometry&&(g.backside_geometry=a.backside_geometry);l.backside_widgets&&(d?g.finish_create_from_json_continuation=function(){this.add_backside_widgets_from_json(g,l.backside_widgets,b)}.bind(this):this.add_backside_widgets_from_json(g,l.backside_widgets,
b))}return g}c.UTILITIES.report_internal_error("JSON type '"+l.type+"' not supported. Perhaps a JavaScript file implementing it is missing.")}},add_backside_widgets_from_json:function(a,b,c){var d;b&&(d=this.create_array_from_json(b,c),a.set_backside_widget_sides(d,b.map(function(a){return 0<=a.widget.shared_widget_index?c.json_of_shared_widgets[a.widget.shared_widget_index].view:a.widget.view})))},create_array_from_json:function(a,b){var d=[];a.forEach(function(a,f){d[f]=a?c.UTILITIES.create_from_json(a,
b):a});return d},get_json_of_array:function(a,b){var d=[];a.forEach(function(a,f){a.is_backside&&a.is_backside()?d[f]={widget:c.UTILITIES.get_json(a.get_widget(),b),is_backside:!0}:d[f]=a.get_type_name?{widget:c.UTILITIES.get_json(a,b)}:a.get_json(b)});return d},fresh_json_history:function(){return{widgets_encountered:[],shared_widgets:[],json_of_widgets_encountered:[]}},get_json_top_level:function(a){var b=this.fresh_json_history(),d=c.UTILITIES.get_json(a,b);0<b.shared_widgets.length&&(d.shared_widgets=
b.shared_widgets.map(function(f,g){var k=function(a){a=b.widgets_encountered.indexOf(a);return b.json_of_widgets_encountered[a]},l=function(a){return k(b.shared_widgets[a])},m=k(f);a===f?(m={semantic:m.semantic,view:m.view,version:m.version},d.semantic={shared_widget_index:g}):c.UTILITIES.tree_replace_once(d.semantic,m,{shared_widget_index:g},l);return m}));d.shared_html=b.shared_html;return d},get_json:function(a,b){var d,f;c.debugging&&!b&&c.UTILITIES.report_internal_error("no json_history");d=
b.shared_widgets.indexOf(a);if(0<=d)return{shared_widget_index:d};d=b.widgets_encountered.indexOf(a);if(0<=d)return d=c.UTILITIES.insert_ancestors_last(a,b.shared_widgets),{shared_widget_index:d};d=b.widgets_encountered.push(a)-1;f=a.get_json(b);f=a.add_to_json(f,b);b.json_of_widgets_encountered[d]=f;a.add_backside_widgets_to_json&&a.add_backside_widgets_to_json(f,b);return f},tree_replace_once:function(a,b,c,d){var f,g;for(g in a)if(a.hasOwnProperty(g)&&(f=a[g])){if(f===b)return a[g]=c,!0;if("shared_widget_index"===
g){if(this.tree_replace_once(d(f),b,c,d))return!0}else if(!(0<=["string","number","function","undefined"].indexOf(typeof f))&&this.tree_replace_once(f,b,c,d))return!0}return!1},insert_ancestors_last:function(a,b){var c=-1;b.some(function(b,d){if(a.has_ancestor(b))return c=d,!0});0>c&&(c=b.length);b.splice(c,0,a);return c},toontalk_json_div:function(a,b){var d=a.view.backside,f=b.get_backside_widgets(),g=b.get_type_name();"top-level"===g?d?(g="a work area containing ",0===f.length?g="an empty work area":
(g=1===f.length?g+"one thing: ":g+(f.length+" things: "),q=f.length,f.forEach(function(a){q--;g+=c.UTILITIES.add_a_or_an(a.get_type_name());1===q?g+=", and ":1<q&&(g+=", ")}))):g="a top-level widget":(g=c.UTILITIES.add_a_or_an(g),d&&(g="the back of "+g));return"<div class='toontalk-json'>\nThis will be replaced by "+g+".\n<div style='display:none;'>"+JSON.stringify(a,null,"  ")+"</div></div>"},copy_widgets:function(a,b){var c=[],d;for(d=0;d<a.length;d++)c[d]=a[d]&&a[d].copy(b);return c},copy_widget_sides:function(a,
b){return a.map(function(a){var c=a.get_widget().copy(b);a.is_backside()&&c.get_backside();return c})},copy_array:function(a){return a.slice()},generate_unique_id:function(){d+=1;return"toontalk_id_"+d},get_style_property:function(a,b){if(a.currentStyle)return a.currentStyle[b];if(window.getComputedStyle)return document.defaultView.getComputedStyle(a,null).getPropertyValue(b)},get_style_numeric_property:function(a,b){var c=this.get_style_property(a,b),d;return"string"===typeof c?(d=c.indexOf("px"),
0<=d&&(c=c.substring(0,d)),parseInt(c,10)):c},data_transfer_json_object:function(a){var b;if(a.dataTransfer){try{b=a.dataTransfer.getData("text/html")}catch(d){b=a.dataTransfer.getData("text")}if(!b||b.match(/[\u3400-\u9FBF]/))b=a.dataTransfer.getData("text");if(b){a=m(b);if(!a)return c.UTILITIES.get_json_top_level(c.element.create(b));try{return JSON.parse(a)}catch(f){c.UTILITIES.report_internal_error("Exception parsing "+a+"\n"+f.toString())}}}},drag_and_drop:function(a){c.UTILITIES.draggable(a);
c.UTILITIES.can_receive_drops(a)},draggable:function(a){$(a).attr("draggable",!0);a.addEventListener("dragstart",function(b){var d=$(b.target).closest(".toontalk-side"),f,g,k;b.dataTransfer.getData("text")&&0<b.dataTransfer.getData("text").length||(l=d||$(a),g=c.UTILITIES.widget_from_jquery(l),g||(g=c.UTILITIES.widget_from_jquery($element),c.UTILITIES.report_internal_error("Possible bug that "+l+" doesn't have a known owner."),l=$(a)),g.being_dragged=!0,f=l.get(0).getBoundingClientRect(),k=l.is(".toontalk-top-level-resource"),
b.dataTransfer&&g.get_json&&(b.dataTransfer.effectAllowed=k?"copy":"move",d=c.UTILITIES.get_json_top_level(g),d.view.drag_x_offset=b.clientX-f.left,d.view.drag_y_offset=b.clientY-f.top,!d.view.frontside_width&&l.parent().is(".toontalk-backside")&&(d.view.frontside_width=l.width(),d.view.frontside_height=l.height()),l.is(".toontalk-backside")&&(d.view.backside=!0),l.data("json",d),f=c.UTILITIES.toontalk_json_div(d,g),b.dataTransfer.setData("text",f),c.UTILITIES.is_internet_explorer()||b.dataTransfer.setData("text/html",
f),g.drag_started(d,k)),l.addClass("toontalk-being-dragged"),b.stopPropagation())});a.addEventListener("dragend",function(a){l||(l=$(a.target).closest(".toontalk-side"));c.UTILITIES.widget_from_jquery(l).being_dragged=void 0;if(l.is(".toontalk-frontside"))if(l.parent().is(".toontalk-backside")){var b=l.data("json");b&&(l.data("json",""),l.css({width:b.view.frontside_width,height:b.view.frontside_height}))}else l.parent().is(".toontalk-top-level-resource, .toontalk-drop-area")||l.is(".toontalk-carried-by-bird, .toontalk-element-attribute")||
c.UTILITIES.has_animating_image(l.get(0))||l.css({width:"100%",height:"100%"});k();a.stopPropagation()})},can_receive_drops:function(a){a.addEventListener("dragover",function(a){a.preventDefault();return!1});a.addEventListener("drop",function(b){var d,f,g,m,q,x,z,B,I,D,G=c.UTILITIES.data_transfer_json_object(b);b.preventDefault();$(a).find("*").removeClass("toontalk-ignore-events");d=l;k();if(d||G||b.dataTransfer.files){if($(b.target).is(".toontalk-drop-area-instructions"))g=$(b.target).parent();
else if($(b.target).is(".toontalk-element-attribute-input")){if(g=$(b.target).closest(".toontalk-side"),m=c.UTILITIES.widget_from_jquery(g)){f=d?c.UTILITIES.widget_from_jquery(d):c.UTILITIES.create_from_json(G);c.UTILITIES.restore_resource(d,f);m.dropped_on_style_attribute(f,b.target.name,b);b.stopPropagation();return}}else g=$(b.target).is(".toontalk-drop-area")?$(b.target):$(b.target).closest(".toontalk-side");if(0!==g.length&&!g.is(".toontalk-top-level-resource")){z=g.offset();c.UTILITIES.remove_highlight();
m=c.UTILITIES.widget_from_jquery(g);if(d&&0<d.length&&!(m&&m.get_infinite_stack&&m.get_infinite_stack())&&(d.get(0)===g.get(0)||jQuery.contains(d.get(0),g.get(0)))){if(d.is(".toontalk-top-level-backside"))return;g.hide();f=document.elementFromPoint(b.pageX-window.pageXOffset,b.pageY-window.pageYOffset);g.show();f&&(g=$(f).closest(".toontalk-side"),z=g.offset(),m=c.UTILITIES.widget_from_jquery(g))}G&&G.view&&G.view.drag_x_offset?(q=G.view.drag_x_offset,x=G.view.drag_y_offset):x=q=0;if(d&&0<d.length){if(!(m&&
m.get_infinite_stack&&m.get_infinite_stack()||d.get(0)!==g.get(0)&&!jQuery.contains(d.get(0),g.get(0)))){d.css({left:d.get(0).offsetLeft+(b.layerX-q),top:d.get(0).offsetTop+(b.layerY-x)});b.stopPropagation();return}B=d.is(".toontalk-backside");f=c.UTILITIES.widget_from_jquery(d);d.parent().is(".toontalk-drop-area")?(d.removeClass("toontalk-widget-in-drop_area"),d.parent().data("drop_area_owner").set_next_robot(void 0)):(I=d.parents(".toontalk-side:first"),(D=c.UTILITIES.widget_from_jquery(I))?!B&&
f.get_infinite_stack&&f.get_infinite_stack()?(f=f.copy(),I=d.width(),D=d.height(),d=$(f.get_frontside_element(!0)),g.is(".toontalk-backside")&&d.css({width:G.view.frontside_width||I,height:G.view.frontside_height||D})):D.removed_from_container&&(I.is(".toontalk-backside")?D.remove_backside_widget(f,B,!0):(D.removed_from_container(f,B,b),f.restore_dimensions&&f.restore_dimensions())):c.UTILITIES.restore_resource(d,f),c.robot.in_training&&c.robot.in_training.add_newly_created_widget_if_new(f))}else{if(0<
b.dataTransfer.files.length){for(d=0;d<b.dataTransfer.files.length;d++)r(b.dataTransfer.files[d],g,m,z,b);b.stopPropagation();return}f=c.UTILITIES.create_from_json(G,{event:b});if(!f){G?c.UTILITIES.report_internal_error("Unable to construct a ToonTalk widget from the JSON."):c.debugging&&console.log("No data transfer in drop.");b.stopPropagation();return}(B=G.view.backside)?(d=$(f.get_backside_element()),d.css({width:G.view.backside_width,height:G.view.backside_height,"background-color":G.view.background_color,
"border-width":G.view.border_width}),f.apply_backside_geometry()):d=$(f.get_frontside_element())}f!==m&&n(g,d,f,m,z,b,G,q,x,B);b.stopPropagation()}}else b.dataTransfer?c.UTILITIES.report_internal_error("Drop failed since unable to parse as JSON."):c.UTILITIES.report_internal_error("Drop failed since there is no event.dataTransfer"),b.stopPropagation()});a.addEventListener("dragenter",function(d){var h=$(d.target).closest(".toontalk-side"),f=c.UTILITIES.get_dragee();h.is(".toontalk-top-level-backside")||
h.closest(".toontalk-top-level-resource").is("*")||h.is(".toontalk-being-dragged")||f&&b(h.get(0),f.get(0))||(c.UTILITIES.highlight_element(h),h.is(".toontalk-backside, .toontalk-drop-area")||"box"===c.UTILITIES.widget_from_jquery($(a)).get_type_name()||h.find(".toontalk-side").addClass("toontalk-ignore-events"));d.stopPropagation()});a.addEventListener("dragleave",function(a){a.stopPropagation()})},create_drop_area:function(a){var b=document.createElement("div"),d=$(b),f=document.createElement("div");
f.innerHTML=a;$(f).addClass("toontalk-drop-area-instructions ui-widget");d.addClass("toontalk-drop-area");d.append(f);c.UTILITIES.can_receive_drops(b);return d},process_json_elements:function(){var a=!1;$(".toontalk-json").each(function(b,d){var f=d.textContent,g,k,l,m;if(f)if(f=f.substring(f.indexOf("{"),f.lastIndexOf("}")+1),g=JSON.parse(f),k=c.UTILITIES.create_from_json(g)){d.textContent="";if(k.get_type_name)if(k.is_of_type("top-level")){if(!c.no_local_storage&&!c.UTILITIES.get_current_url_boolean_parameter("reset",
!1)){if(g.load_most_recent_program)try{(m=window.localStorage.getItem("toontalk-last-key"))&&(l=window.localStorage.getItem(m))}catch(n){f="Error reading previous state. Error message is "+n,c.UTILITIES.is_internet_explorer()?console.error(f):c.UTILITIES.display_message()}l&&(g=JSON.parse(l),k=c.UTILITIES.create_from_json(g))}l=k.get_backside(!0);l=l.get_element();$(d).replaceWith(l);$(l).css({width:g.view.backside_width,height:g.view.backside_height,"background-color":g.view.background_color,"border-width":g.view.border_width});
a=!0}else $(d).addClass("toontalk-top-level-resource"),l=k.get_frontside_element(),$(l).addClass("toontalk-top-level-resource").css({position:"relative"}),d.appendChild(l);else d.appendChild(k.get_element());k.set_active&&k.set_active(!1);setTimeout(function(){k.update_display&&k.update_display();g.semantic.running&&k.set_running(!0)},1)}else c.UTILITIES.report_internal_error("Could not recreate a widget from this JSON: "+f)});return a},set_absolute_position:function(a,b){for(var c=a.parent(),d=b.left,
f=b.top,g;c.is("*")&&!c.is("html");)g=c.position(),d-=g.left,f-=g.top,c=c.parent();a.css({left:d,top:f,position:"absolute"});a.is(".toontalk-side-animating")&&(a.get(0).style.left=d+"px",a.get(0).style.top=f+"px")},set_position_relative_to_top_level_backside:function(a,b){var c=a.closest(".toontalk-top-level-backside").offset();c||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),c={left:0,top:0});var d=b.left-c.left,c=b.top-c.top;a.css({left:d,top:c,position:"absolute"});
a.is(".toontalk-side-animating")&&(a.get(0).style.left=d+"px",a.get(0).style.top=c+"px")},restore_resource:function(a,b){var d,f;a.is(".toontalk-top-level-resource")&&(d=b.copy(!1,!0),f=d.get_frontside_element(),$(f).css({width:a.width(),height:a.height()}),a.removeClass("toontalk-top-level-resource"),$(f).addClass("toontalk-top-level-resource").css({position:"relative"}),a.get(0).parentElement.appendChild(f),c.DISPLAY_UPDATES.pending_update(d),b.set_active&&(b.set_active(!0),d.set_active(!1)))},
find_resource_equal_to_widget:function(a){var b;$(".toontalk-top-level-resource").each(function(d,f){var g=$(f).children(":first"),k=c.UTILITIES.widget_from_jquery(g);if(k&&(a.equals&&a.equals(k)||a.matching_resource&&a.matching_resource(k)))return b=g.get(0),!1});return b},set_position_is_absolute:function(a,b,c){b?(c=$(a).position(),b=c.left,c=c.top,$(a).css({left:b,top:c,position:"absolute"})):a.style.position="static"},cardinal:function(a){switch(a){case 0:return"first";case 1:return"second";
case 2:return"third";default:return a+"th"}},on_a_nest_in_a_box:function(a){return $(a).closest(".toontalk-nest").is("*")&&$(a).closest(".toontalk-box").is("*")},add_one_shot_event_handler:function(a,b,c,d){var f=!1,g=function(c){f=!0;d&&d();a.removeEventListener(b,g)};a.addEventListener(b,g);setTimeout(function(){f||g()},c)},animate_to_absolute_position:function(a,b,d,f,g){var k=$(a).offset(),l=$(a).position(),m=c.UTILITIES.distance(b,k);f||(f=.5);f=Math.round(m/f);$(a).addClass("toontalk-side-animating");
a.style.transitionDuration=f+"ms";a.style.left=l.left+(b.left-k.left)+"px";a.style.top=l.top+(b.top-k.top)+"px";g||c.UTILITIES.add_one_shot_event_handler(a,"transitionend",f+500,function(){$(a).removeClass("toontalk-side-animating");a.style.transitionDuration=""});c.UTILITIES.add_one_shot_event_handler(a,"transitionend",f+500,d)},distance:function(a,b){var c=a.left-b.left,d=a.top-b.top;return Math.sqrt(c*c+d*d)},highlight_element:function(a,b){var d;if(!$(a).is(".toontalk-highlight")&&(c.UTILITIES.remove_highlight(),
d=c.UTILITIES.widget_from_jquery($(a)))){if(d.element_to_highlight&&(a=d.element_to_highlight(event),!a))return;$(a).addClass("toontalk-highlight");b&&setTimeout(function(){c.UTILITIES.remove_highlight()},b)}},remove_highlight:function(){$(".toontalk-highlight").removeClass("toontalk-highlight")},cursor_of_image:function(a){var b=a.lastIndexOf(".");return 0<=b?a.substring(0,b)+".32x32"+a.substring(b):a},next_z_index:function(){f++;return f},create_button:function(a,b,c,d){a=$("<button>"+a+"</button>").button();
a.addClass(b).click(d).attr("title",c);return a.get(0)},create_close_button:function(a,b){var c=document.createElement("div"),d=document.createElement("div");$(c).addClass("toontalk-close-button");$(c).click(a);$(c).attr("title",b);d.innerHTML="&times;";c.appendChild(d);return c},check_radio_button:function(a){$(a.button).prop("checked",!0);$(a.label).addClass("ui-state-active")},create_button_set:function(){var a=document.createElement("div"),b,c;for(b=0;b<arguments.length;b++)if(0<=arguments[b].length)for(c=
0;c<arguments[b].length;c++)a.appendChild(arguments[b][c]);else a.appendChild(arguments[b]);$(a).buttonset();return a},create_text_element:function(a){var b=document.createElement("div");b.textContent=a;$(b).addClass("ui-widget");return b},create_space:function(){var a=document.createElement("span");a.innerHTML="&nbsp;";$(a).addClass("ui-widget");return a},create_anchor_element:function(a,b){var c=document.createElement("a");c.innerHTML=a;c.href=b;c.target="_blank";return c},create_text_input:function(a,
b,d,f,g){var k=document.createElement("input"),l;k.type="text";k.className=b;k.value=a;k.title=f;d?(a=document.createElement("label"),a.innerHTML=d,k.id=c.UTILITIES.generate_unique_id(),a.htmlFor=k.id,g&&(l=c.UTILITIES.create_anchor_element("i",g),$(l).addClass("toontalk-help-button")),d=c.UTILITIES.create_horizontal_table(a,k,l),$(a).addClass("ui-widget")):d=k;$(k).button().addClass("toontalk-text-input");$(k).css({"background-color":"white"});return{container:d,button:k}},create_text_area:function(a,
b,d,f){var g=document.createElement("textarea");g.className=b;g.value=a;g.title=f;a=document.createElement("label");a.innerHTML=d;g.id=c.UTILITIES.generate_unique_id();a.htmlFor=g.id;d=c.UTILITIES.create_horizontal_table(a,g);$(g).button().addClass("toontalk-text-text_area");$(g).css({background:"white"});$(a).addClass("ui-widget");return{container:d,button:g}},create_radio_button:function(a,b,d,f,g){var k=document.createElement("div"),l=document.createElement("input"),m=document.createElement("label");
l.type="radio";l.className=d;l.name=a;l.value=b;m.innerHTML=f;l.id=c.UTILITIES.generate_unique_id();m.htmlFor=l.id;k.appendChild(l);k.appendChild(m);k.title=g;$(l).button();return{container:k,button:l,label:m}},create_check_box:function(a,b,d,f){var g=document.createElement("div"),k=document.createElement("input"),l=document.createElement("label");k.type="checkbox";k.className=b;k.checked=a;l.innerHTML=d;k.id=c.UTILITIES.generate_unique_id();l.htmlFor=k.id;$(l).addClass("ui-widget");g.appendChild(k);
g.appendChild(l);g.title=f;return{container:g,button:k,label:l}},create_horizontal_table:function(){var a=document.createElement("table"),b,c,d;c=document.createElement("tr");a.appendChild(c);for(b=0;b<arguments.length;b++)arguments[b]&&(d=document.createElement("td"),c.appendChild(d),d.appendChild(arguments[b]));return a},create_vertical_table:function(){var a=document.createElement("table"),b,d;for(b=0;b<arguments.length;b++)arguments[b]&&(d=c.UTILITIES.create_row(arguments[b]),a.appendChild(d));
return a},create_row:function(){var a=document.createElement("tr"),b=document.createElement("td"),c;for(c=0;c<arguments.length;c++)a.appendChild(arguments[c]);b.appendChild(a);return a},create_table_entry:function(a){var b=document.createElement("td");b.appendChild(a);return b},selected_radio_button:function(){var a;for(a=0;a<arguments.length;a++)if(arguments[a].checked)return arguments[a]},create_image:function(a,b){var c=document.createElement("img"),d;c.src=a;b&&$(c).addClass(b);0===a.indexOf("images/")&&
(d=function(b){c.removeEventListener("error",d);c.src="http://toontalk.github.io/ToonTalk/"+a},c.addEventListener("error",d));return c},create_tabs:function(a,b){var c=document.createElement("div"),d=document.createElement("ul"),f;if(a.length!==b.length)return console.error("UTILITIES.create_tabs called with different length lists."),c;a.forEach(function(a,c){var h=document.createElement("li"),g=document.createElement("a"),k;"string"===typeof a?(k=document.createElement("span"),k.innerHTML=a):k=a;
f="tab-"+c;g.href="#"+f;g.appendChild(k);h.appendChild(g);d.appendChild(h);b[c].id=f});c.appendChild(d);b.forEach(function(a){c.appendChild(a)});$(c).tabs();return c},create_file_data_table:function(a,b,d){var f=document.createElement("table");$(f).DataTable({data:a,columns:[{data:"title",title:"Name",render:function(a,f,g,k){a=b?a.substring(0,a.length-5):a;f=b?c.google_drive.google_drive_url(g.id):"Click to load this program.";return"<div class='"+d+"' title='"+f+"'id='"+g.id+"'>"+a+"</div>"}},{data:"modifiedDate",
title:"Modified",render:function(a,b,c,d){return(new Date(a)).toUTCString()}},{data:"createdDate",title:"Created",render:function(a,b,c,d){return(new Date(a)).toUTCString()}},{data:"fileSize",title:"Size"}]});$(f).addClass("toontalk-file-table");return f},create_local_files_table:function(a){a=c.UTILITIES.get_all_locally_stored_program_names().map(function(a){var b=c.UTILITIES.get_local_storage_meta_data(a);if(b)return{title:a,modifiedDate:b.last_modified,createdDate:b.created,fileSize:b.file_size}});
return c.UTILITIES.create_file_data_table(a,!1,"toontalk-file-load-button")},get_dragee:function(){return l},add_a_or_an:function(a,b){var c=a.charAt(0);return 0===a.indexOf("the ")?a:0>"aeiou".indexOf(c)?b?"A "+a:"a "+a:b?"An "+a:"an "+a},maximum_string_length:function(a,b){var c;if(a.length<=b)return a;c=a.substring(0,Math.round(.75*b));return c+" ... "+a.substring(a.length-(b-c.length))},backup_all_top_level_widgets:function(a){$(".toontalk-top-level-backside").each(function(b,d){c.UTILITIES.widget_from_jquery($(d)).save(a)})},
make_resizable:function(a,b){a.resizable({resize:function(c,d){a.find("img").css({width:d.size.width,height:d.size.height});b.render()},handles:"n,e,s,w"})},match:function(a,b){var c=a.match(b);return"not matched"===c&&b.matched_by?b.matched_by(a):c},current_URL:function(){return window.location.pathname},absolute_file_path:function(a){var b=window.location.pathname,c=b.lastIndexOf("ToonTalk/");return 0>c?a:b.substring(0,c+9)+a},copy_side:function(a,b,c){b=a.get_widget().copy(b);var d;c&&(c=a.get_widget().get_frontside_element())&&
(d=b.get_frontside_element(!0),$(d).css({width:$(c).width(),height:$(c).height()}));return a.is_backside()?b.get_backside():b},scale_to_fit:function(a,b,c,d,f){var g=function(){$(a).css({transform:"scale("+l+", "+m+")","transform-origin":"top left",width:c,height:d})},k,l,m;c||(c=$(a).width());d||(d=$(a).height());$(b).is(".toontalk-backside")?m=l=1:(k=$(b).width(),b=$(b).height(),l=k/c,m=b/d,0===l&&(l=1),0===m&&(m=1));f?setTimeout(g,f):g();return{x_scale:l,y_scale:m}},relative_position:function(a,
b){var c=$(a).offset(),d;b&&(d=$(b).offset(),c.left-=d.left,c.top-=d.top);return c},add_animation_class:function(a,b){$(a).css({width:"",height:""}).addClass(b)},widget_from_jquery:function(a){if(0<a.length)return a.get(0).toontalk_widget},has_animating_image:function(a){a=$(a);return(a=a.css("animation")||a.css("webkit-animation")||a.css("moz-animation")||a.css("ms-animation")||a.css("o-animation"))&&0!==a.indexOf("none")},display_message:function(a){alert(a)},report_internal_error:function(a){console.log(a);
c.debugging&&c.UTILITIES.display_message(a)},get_current_url_boolean_parameter:function(a,b){return 0>window.location.href.indexOf(a+"=")?b:0<=window.location.href.indexOf(a+"=1")?!0:!1},is_browser_of_type:function(a){return 0<=window.navigator.userAgent.indexOf(a)},is_internet_explorer:function(){return c.UTILITIES.is_browser_of_type("MSIE")||c.UTILITIES.is_browser_of_type("Trident")},remove_z_index:function(a){if(0===a.length||"<"!==a.charAt(0)||0>a.indexOf("z-index"))return a;a=$(a);a.attr("z-index",
"");return a.html()},add_test_all_button:function(){var a=$("#toontalk-test-all-button"),b;if(0!==a.length){a.button();b=a.get(0);b.innerHTML="Run all tests";var c=!1;a.click(function(a){c?($(".toontalk-stop-sign").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&$(this).click()}),b.innerHTML="Run all tests"):($(".toontalk-green-flag").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&$(this).click()}),b.innerHTML="Stop all tests");c=!c})}},set_timeout:function(a,
b){b?setTimeout(a,b):(g.push(a),window.postMessage("zero-timeout-message","*"))},get_all_locally_stored_program_names:function(){var a=window.localStorage.getItem("toontalk-all-program-names");return a?JSON.parse(a):[]},set_all_locally_stored_program_names:function(a){window.localStorage.setItem("toontalk-all-program-names",JSON.stringify(a))},get_local_storage_meta_data:function(a){a=c.UTILITIES.local_storage_program_meta_data_key(a);var b;try{if(b=window.localStorage.getItem(a))return JSON.parse(b)}catch(d){}},
local_storage_program_key:function(a){return"toontalk-json: "+a},local_storage_program_meta_data_key:function(a){return"toontalk-meta-data: "+a},open_url_and_enable_editor:function(a,b,c){var d=window.open(a,"published page editor");(function(a,b){var c=function(a){a.data.editor_enabled_for&&a.data.editor_enabled_for===b&&(e=!0,window.removeEventListener("message",c))},d=function(a,b){e||setTimeout(function(){a();d(a,b)},500)},e=!1;window.addEventListener("message",c);d(a,b)})(function(){d.postMessage({save_edits_to:window.location.href,
file_id:b,widgets_json:c},"*")},b)},create_queue:function(){var a=[],b=0;return{getLength:function(){return a.length-b},isEmpty:function(){return 0==a.length},enqueue:function(b){a.push(b)},dequeue:function(){var c;if(0!=a.length)return c=a[b],2*++b>=a.length&&(a=a.slice(b),b=0),c},peek:function(){return 0<a.length?a[b]:void 0},does_any_item_satisfy:function(c){var d;for(d=b;d<a.length;d++)if(c(a[d]))return!0;return!1}}}}}(window.TOONTALK);window.TOONTALK.UTILITIES.available_types="number box element robot nest sensor top-level".split(" ");
