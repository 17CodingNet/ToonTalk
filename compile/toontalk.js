'use strict';(function(f){var k;"undefined"===typeof exports?"function"===typeof define&&"object"===typeof define.amd&&define.amd?(k={},define(function(){return k})):k="undefined"!==typeof window?window:f:k=exports;(function(c){var b={greatest_common_divisor:function(a,d){if(1===d||1===a)return 1;for(var b;0!==d;){b=d;d=a%d;if(!isFinite(d))return 0;a=b}return a}};b.gcd=b.greatest_common_divisor;b.fromRandom=function(a){return Math.random()*(1<<a)>>>0};b.fromMillitime=function(){return+new Date};b.fromUnixtime=
function(){return.001*b.fromMillitime()|0};"undefined"!==typeof c&&(c.integer=b);(function(a){function d(a,n,g){if(g!==b)return a instanceof d?a:"undefined"===typeof a?c:d.parse(a);for(a=a||[];a.length&&!a[a.length-1];)--a.length;this._d=a;this._s=a.length?n||1:0}var b={};d._construct=function(a,n){return new d(a,n,b)};d.base=1E7;d.base_log10=7;var c=new d([],0,b);d.ZERO=c;var g=new d([1],1,b);d.ONE=g;var e=new d(g._d,-1,b);d.M_ONE=e;d._0=c;d._1=g;d.small=[c,g,new d([2],1,b),new d([3],1,b),new d([4],
1,b),new d([5],1,b),new d([6],1,b),new d([7],1,b),new d([8],1,b),new d([9],1,b),new d([10],1,b),new d([11],1,b),new d([12],1,b),new d([13],1,b),new d([14],1,b),new d([15],1,b),new d([16],1,b),new d([17],1,b),new d([18],1,b),new d([19],1,b),new d([20],1,b),new d([21],1,b),new d([22],1,b),new d([23],1,b),new d([24],1,b),new d([25],1,b),new d([26],1,b),new d([27],1,b),new d([28],1,b),new d([29],1,b),new d([30],1,b),new d([31],1,b),new d([32],1,b),new d([33],1,b),new d([34],1,b),new d([35],1,b),new d([36],
1,b)];d.digits="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");d.prototype.toString=function(a){a=+a||10;if(2>a||36<a)throw Error("illegal radix "+a+".");if(0===this._s)return"0";if(10===a){a=0>this._s?"-":"";a+=this._d[this._d.length-1].toString();for(var n=this._d.length-2;0<=n;n--){for(var b=this._d[n].toString();7>b.length;)b="0"+b;a+=b}return a}n=d.digits;a=d.small[a];for(var b=this._s,c=this.abs(),g=[],e;0!==c._s;)e=c.divRem(a),c=e[0],e=e[1],g.push(n[e.valueOf()]);return(0>b?"-":"")+g.reverse().join("")};
d.radixRegex=[/^$/,/^$/,/^[01]*$/,/^[012]*$/,/^[0-3]*$/,/^[0-4]*$/,/^[0-5]*$/,/^[0-6]*$/,/^[0-7]*$/,/^[0-8]*$/,/^[0-9]*$/,/^[0-9aA]*$/,/^[0-9abAB]*$/,/^[0-9abcABC]*$/,/^[0-9a-dA-D]*$/,/^[0-9a-eA-E]*$/,/^[0-9a-fA-F]*$/,/^[0-9a-gA-G]*$/,/^[0-9a-hA-H]*$/,/^[0-9a-iA-I]*$/,/^[0-9a-jA-J]*$/,/^[0-9a-kA-K]*$/,/^[0-9a-lA-L]*$/,/^[0-9a-mA-M]*$/,/^[0-9a-nA-N]*$/,/^[0-9a-oA-O]*$/,/^[0-9a-pA-P]*$/,/^[0-9a-qA-Q]*$/,/^[0-9a-rA-R]*$/,/^[0-9a-sA-S]*$/,/^[0-9a-tA-T]*$/,/^[0-9a-uA-U]*$/,/^[0-9a-vA-V]*$/,/^[0-9a-wA-W]*$/,
/^[0-9a-xA-X]*$/,/^[0-9a-yA-Y]*$/,/^[0-9a-zA-Z]*$/];d.parse=function(a,n){function g(a){a=a.replace(/\s*[*xX]\s*10\s*(\^|\*\*)\s*/,"e");return a.replace(/^([+\-])?(\d+)\.?(\d*)[eE]([+\-]?\d+)$/,function(a,n,d,b,c){c=+c;var g=0>c,e=d.length+c;a=(g?d:b).length;c=(c=Math.abs(c))>=a?c-a+g:0;a=Array(c+1).join("0");d+=b;return(n||"")+(g?d=a+d:d+=a).substr(0,e+=g?a.length:0)+(e<d.length?"."+d.substr(e):"")})}a=a.toString();if("undefined"===typeof n||10===+n)a=g(a);var e=RegExp("^([+\\-]?)("+("undefined"===
typeof n?"0[xcb]":16==n?"0x":8==n?"0c":2==n?"0b":"")+")?([0-9a-z]*)(?:\\.\\d*)?$","i").exec(a);if(e){var h=e[1]||"+",f=e[2]||"",e=e[3]||"";if("undefined"===typeof n)n="0x"===f||"0X"===f?16:"0c"===f||"0C"===f?8:"0b"===f||"0B"===f?2:10;else if(2>n||36<n)throw Error("Illegal radix "+n+".");n=+n;if(!d.radixRegex[n].test(e))throw Error("Bad digit for radix "+n);e=e.replace(/^0+/,"").split("");if(0===e.length)return c;h="-"===h?-1:1;if(10==n){for(f=[];7<=e.length;)f.push(parseInt(e.splice(e.length-d.base_log10,
d.base_log10).join(""),10));f.push(parseInt(e.join(""),10));return new d(f,h,b)}f=c;n=d.small[n];for(var l=d.small,p=0;p<e.length;p++)f=f.multiply(n).add(l[parseInt(e[p],36)]);return new d(f._d,h,b)}throw Error("Invalid BigInteger format: "+a);};d.prototype.add=function(a){if(0===this._s)return d(a);a=d(a);if(0===a._s)return this;if(this._s!==a._s)return a=a.negate(),this.subtract(a);var n=this._d;a=a._d;for(var c=n.length,g=a.length,e=Array(Math.max(c,g)+1),h=Math.min(c,g),f=0,l=0;l<h;l++)f=n[l]+
a[l]+f,e[l]=f%1E7,f=f/1E7|0;g>c&&(n=a,c=g);for(l=h;f&&l<c;l++)f=n[l]+f,e[l]=f%1E7,f=f/1E7|0;for(f&&(e[l]=f);l<c;l++)e[l]=n[l];return new d(e,this._s,b)};d.prototype.negate=function(){return new d(this._d,-this._s|0,b)};d.prototype.abs=function(){return 0>this._s?this.negate():this};d.prototype.subtract=function(a){if(0===this._s)return d(a).negate();a=d(a);if(0===a._s)return this;if(this._s!==a._s)return a=a.negate(),this.add(a);var n=this;0>this._s&&(n=new d(a._d,1,b),a=new d(this._d,1,b));var g=
n.compareAbs(a);if(0===g)return c;if(0>g){var e=a;a=n;n=e}n=n._d;a=a._d;var e=n.length,h=a.length,f=Array(e),l=0,p,k;for(p=0;p<h;p++)k=n[p]-l-a[p],0>k?(k+=1E7,l=1):l=0,f[p]=k;for(p=h;p<e;p++){k=n[p]-l;if(0>k)k+=1E7;else{f[p++]=k;break}f[p]=k}for(;p<e;p++)f[p]=n[p];return new d(f,g,b)};(function(){function a(n,c){for(var g=n._d,e=g.slice(),h=0;;){var f=(g[h]||0)+1;e[h]=f%1E7;if(9999999>=f)break;++h}return new d(e,c,b)}function n(a,c){for(var g=a._d,e=g.slice(),h=0;;){var f=(g[h]||0)-1;if(0>f)e[h]=
f+1E7;else{e[h]=f;break}++h}return new d(e,c,b)}d.prototype.next=function(){switch(this._s){case 0:return g;case -1:return n(this,-1);default:return a(this,1)}};d.prototype.prev=function(){switch(this._s){case 0:return e;case -1:return a(this,-1);default:return n(this,1)}}})();d.prototype.compareAbs=function(a){if(this===a)return 0;if(!(a instanceof d)){if(!isFinite(a))return isNaN(a)?a:-1;a=d(a)}if(0===this._s)return 0!==a._s?-1:0;if(0===a._s)return 1;var n=this._d.length,b=a._d.length;if(n<b)return-1;
if(n>b)return 1;b=this._d;a=a._d;for(--n;0<=n;n--)if(b[n]!==a[n])return b[n]<a[n]?-1:1;return 0};d.prototype.compare=function(a){if(this===a)return 0;a=d(a);return 0===this._s?-a._s:this._s===a._s?this.compareAbs(a)*this._s:this._s};d.prototype.isUnit=function(){return this===g||this===e||1===this._d.length&&1===this._d[0]};d.prototype.multiply=function(a){if(0===this._s)return c;a=d(a);if(0===a._s)return c;if(this.isUnit())return 0>this._s?a.negate():a;if(a.isUnit())return 0>a._s?this.negate():this;
if(this===a)return this.square();var n=this._d.length>=a._d.length,g=(n?this:a)._d,n=(n?a:this)._d,e=g.length,h=n.length,f=e+h,l=Array(f),p;for(p=0;p<f;p++)l[p]=0;for(p=0;p<h;p++){for(var f=0,k=n[p],A=e+p,u,q=p;q<A;q++)u=l[q]+k*g[q-p]+f,f=u/1E7|0,l[q]=u%1E7|0;f&&(u=l[q]+f,l[q]=u%1E7)}return new d(l,this._s*a._s,b)};d.prototype.multiplySingleDigit=function(a){if(0===a||0===this._s)return c;if(1===a)return this;var n;if(1===this._d.length)return n=this._d[0]*a,1E7<=n?new d([n%1E7|0,n/1E7|0],1,b):new d([n],
1,b);if(2===a)return this.add(this);if(this.isUnit())return new d([a],1,b);var g=this._d,e=g.length;n=e+1;for(var h=Array(n),f=0;f<n;f++)h[f]=0;for(var l=f=0;l<e;l++)n=a*g[l]+f,f=n/1E7|0,h[l]=n%1E7|0;f&&(h[l]=f);return new d(h,1,b)};d.prototype.square=function(){if(0===this._s)return c;if(this.isUnit())return g;var a=this._d,n=a.length,e=Array(n+n+1),h,f,l,p;for(p=0;p<n;p++)l=2*p,h=a[p]*a[p],f=h/1E7|0,e[l]=h%1E7,e[l+1]=f;for(p=0;p<n;p++){f=0;l=2*p+1;for(var k=p+1;k<n;k++,l++)h=a[k]*a[p]*2+e[l]+f,
f=h/1E7|0,e[l]=h%1E7;l=n+p;h=f+e[l];f=h/1E7|0;e[l]=h%1E7;e[l+1]+=f}return new d(e,1,b)};d.prototype.quotient=function(a){return this.divRem(a)[0]};d.prototype.divide=d.prototype.quotient;d.prototype.remainder=function(a){return this.divRem(a)[1]};d.prototype.divRem=function(a){a=d(a);if(0===a._s)throw Error("Divide by zero");if(0===this._s)return[c,c];if(1===a._d.length)return this.divRemSmall(a._s*a._d[0]);switch(this.compareAbs(a)){case 0:return[this._s===a._s?g:e,c];case -1:return[c,this]}var n=
this._s*a._s,h=a.abs(),f=this._d,l=f.length,p=[],k,q=new d([],0,b);for(q._s=1;l;)if(q._d.unshift(f[--l]),0>q.compareAbs(a))p.push(0);else{if(0===q._s)k=0;else{var u=q._d.length;k=h._d.length;u=1E7*q._d[u-1]+q._d[u-2];k=1E7*h._d[k-1]+h._d[k-2];q._d.length>h._d.length&&(u=1E7*(u+1));k=Math.ceil(u/k)}do{u=h.multiplySingleDigit(k);if(0>=u.compareAbs(q))break;k--}while(k);p.push(k);k&&(k=q.subtract(u),q._d=k._d.slice(),0===q._d.length&&(q._s=0))}return[new d(p.reverse(),n,b),new d(q._d,this._s,b)]};d.prototype.divRemSmall=
function(a){a=+a;if(0===a)throw Error("Divide by zero");var n=this._s*(0>a?-1:1);a=Math.abs(a);if(1>a||1E7<=a)throw Error("Argument out of range");if(0===this._s)return[c,c];if(1===a||-1===a)return[1===n?this.abs():new d(this._d,n,b),c];if(1===this._d.length){var g=new d([this._d[0]/a|0],1,b);a=new d([this._d[0]%a|0],1,b);0>n&&(g=g.negate());0>this._s&&(a=a.negate());return[g,a]}for(var e=this._d.slice(),g=Array(e.length),h=0,f=0,l=0,p;e.length;)h=1E7*h+e[e.length-1],h<a?(g[l++]=0,e.pop(),f=1E7*f+
h):(p=0===h?0:h/a|0,f=h-a*p,(g[l++]=p)?(e.pop(),h=f):e.pop());a=new d([f],1,b);0>this._s&&(a=a.negate());return[new d(g.reverse(),n,b),a]};d.prototype.isEven=function(){var a=this._d;return 0===this._s||0===a.length||0===a[0]%2};d.prototype.isOdd=function(){return!this.isEven()};d.prototype.sign=function(){return this._s};d.prototype.isPositive=function(){return 0<this._s};d.prototype.isNegative=function(){return 0>this._s};d.prototype.isZero=function(){return 0===this._s};d.prototype.exp10=function(a){a=
+a;if(0===a)return this;if(Math.abs(a)>Number(h))throw Error("exponent too large in BigInteger.exp10");if(0<a){for(var n=new d(this._d.slice(),this._s,b);7<=a;a-=7)n._d.unshift(0);if(0==a)return n;n._s=1;n=n.multiplySingleDigit(Math.pow(10,a));return 0>this._s?n.negate():n}if(-a>=7*this._d.length)return c;n=new d(this._d.slice(),this._s,b);for(a=-a;7<=a;a-=7)n._d.shift();return 0==a?n:n.divRemSmall(Math.pow(10,a))[0]};d.prototype.pow=function(a){if(this.isUnit())return 0<this._s?this:d(a).isOdd()?
this:this.negate();a=d(a);if(0===a._s)return g;if(0>a._s){if(0===this._s)throw Error("Divide by zero");return c}if(0===this._s)return c;if(a.isUnit())return this;if(0<a.compareAbs(h))throw Error("exponent too large in BigInteger.pow");for(var n=this,b=g,e=d.small[2];a.isPositive()&&(!a.isOdd()||(b=b.multiply(n),!a.isUnit()));)n=n.square(),a=a.quotient(e);return b};d.prototype.modPow=function(a,n){for(var b=g,c=this;a.isPositive();)a.isOdd()&&(b=b.multiply(c).remainder(n)),a=a.quotient(d.small[2]),
a.isPositive()&&(c=c.square().remainder(n));return b};d.prototype.log=function(){switch(this._s){case 0:return-Infinity;case -1:return NaN}var a=this._d.length;if(30>7*a)return Math.log(this.valueOf());var n=Math.ceil(30/7),c=this._d.slice(a-n);return Math.log((new d(c,1,b)).valueOf())+(a-n)*Math.log(1E7)};d.prototype.valueOf=function(){return parseInt(this.toString(),10)};d.prototype.toJSValue=function(){return parseInt(this.toString(),10)};var h=d(2147483647);d.MAX_EXP=h;(function(){function a(n){return function(a){return n.call(d(a))}}
function n(a){return function(n,b){return a.call(d(n),d(b))}}function b(a){return function(n,b,c){return a.call(d(n),d(b),d(c))}}(function(){var c,g,e="toJSValue isEven isOdd sign isZero isNegative abs isUnit square negate isPositive toString next prev log".split(" "),h="compare remainder divRem subtract add quotient divide multiply pow compareAbs".split(" "),f=["modPow"];for(c=0;c<e.length;c++)g=e[c],d[g]=a(d.prototype[g]);for(c=0;c<h.length;c++)g=h[c],d[g]=n(d.prototype[g]);for(c=0;c<f.length;c++)g=
f[c],d[g]=b(d.prototype[g]);d.exp10=function(a,n){return d(a).exp10(n)}})()})();a.BigInteger=d})("undefined"!==typeof c?c:this);var f={greatest_common_divisor:function(a,d){if(d.isUnit()||a.isUnit())return BigInteger.ONE;for(var b;!d.isZero();)b=d,d=a.remainder(d),a=b;return a},create:function(){return[0]},clone:function(a){for(var d=[],b=0,c=a.length;b<c;b++)d[b]=a[b];return d},copy:function(a,d){a=[];for(var b=0,c=d.length;b<c;b++)a[b]=d[b];return a},abs:function(a,d){a[0]=Math.abs(d[0]);return a},
str:function(a){return a[0].toString()},toInteger:function(a){return out[0]},fromInteger:function(a){return[parseInt(a)]}};f.ZERO=f.fromInteger(0);f.ONE=f.fromInteger(1);"undefined"!==typeof c&&(c.bigint=f);if(!l)var l=Array;if(!h)var h=Math.pow(2,56);if(!k)var k=16777216;var e={EPSILON:2E-16};e.MAX_LOOPS=k;e.create=function(){var a=new l(2);a[0]=0;a[1]=1;return a};e.clone=function(a){var d=new l(2);d[0]=a[0];d[1]=a[1];return d};e.fromValues=function(a,d){var b=new l(2);b[0]=a;b[1]=d;return e.normalize(b,
b)};e.copy=function(a,d){a[0]=d[0];a[1]=d[1];return a};e.set=function(a,d,b){a[0]=d;a[1]=b;return e.normalize(a,a)};e.abs=function(a,d){a[0]=Math.abs(d[0]);a[1]=d[1];return a};e.invert=function(a,d){var b=d[0];a[0]=d[1];a[1]=b;return a};e.reciprocal=e.invert;e.add=function(a,d,b){d[1]===b[1]?(a[0]=d[0]+b[0],a[1]=d[1]):(a[0]=d[0]*b[1]+b[0]*d[1],a[1]=d[1]*b[1]);return e.normalize(a,a)};e.subtract=function(a,d,b){d[1]===b[1]?(a[0]=d[0]-b[0],a[1]=d[1]):(a[0]=d[0]*b[1]-b[0]*d[1],a[1]=d[1]*b[1]);return e.normalize(a,
a)};e.sub=e.subtract;e.multiply=function(a,d,b){a[0]=d[0]*b[0];a[1]=d[1]*b[1];return e.normalize(a,a)};e.mul=e.multiply;e.mediant=function(a,d,b){a[0]=d[0]+b[0];a[1]=d[1]+b[1];return e.normalize(a,a)};e.divide=function(a,d,b){a[0]=d[0]*b[1];a[1]=d[1]*b[0];return e.normalize(a,a)};e.div=e.divide;e.equals=function(a,d){return 0===a[0]&&0===d[0]||0===a[1]&&0===d[1]?!0:a[0]===d[0]&&a[1]===d[1]};e.approximates=function(a,d){if(e.equals(a,d))return!0;var b=e.create();e.sub(b,a,d);e.abs(b,b);return e.isLessThan(b,
e.INFINITESIMAL)};e.isGreaterThan=function(a,d){return e.equals(a,d)?!1:a[0]*d[1]>d[0]*a[1]};e.isLessThan=function(a,d){return e.equals(a,d)?!1:a[0]*d[1]<d[0]*a[1]};e.isNegative=function(a){return 0>a[0]};e.min=function(a,d,b){e.isLessThan(d,b)?(a[0]=d[0],a[1]=d[1]):(a[0]=b[0],a[1]=b[1]);return a};e.max=function(a,d,b){e.isGreaterThan(d,b)?(a[0]=d[0],a[1]=d[1]):(a[0]=b[0],a[1]=b[1]);return a};e.scalar_multiply=function(a,d,b){a[0]=d[0]*b;a[1]=d[1];return e.normalize(a,a)};e.scalar_divide=function(a,
d,b){a[0]=d[0];a[1]=d[1]*b;return e.normalize(a,a)};e.normalize=function(a,d){if(isNaN(d[0])||isNaN(d[1])||0===d[0]&&0===d[1])return a[0]=0,a[1]=0,a;if(0===d[0])return a[0]=0,a[1]=1,a;if(0===d[1])return a[0]=1,a[1]=0,a;if(d[0]===d[1])return a[0]=1,a[1]=1,a;0<d[1]?(a[0]=d[0],a[1]=d[1]):(a[0]=-d[0],a[1]=-d[1]);var c=b.greatest_common_divisor(Math.abs(a[0]),a[1]);1<c&&(a[0]/=c,a[1]/=c);return a};e.opposite=function(a,d){a[0]=-d[0];a[1]=d[1];return a};e.negative=e.opposite;e.neg=e.opposite;e.power=function(a,
d,b){2===b?(a[0]=d[0]*d[0],a[1]=d[1]*d[1]):0<b?(a[0]=Math.pow(d[0],b),a[1]=Math.pow(d[1],b)):0>b?(b=Math.abs(b),a[0]=Math.pow(d[1],b),a[1]=Math.pow(d[0],b)):e.copy(a,e.ONE);return e.normalize(a,a)};e.pow=e.power;e.sqrt=function(a,d){return e.nthRoot(a,d,2)};e.nthRoot=function(a,d,b){if(e.equals(d,e.ZERO))return e.copy(a,e.ZERO);if(e.equals(d,e.ONE))return e.copy(a,e.ONE);if(e.equals(d,e.INFINITY))return e.copy(a,e.INFINITY);if(e.equals(d,e.INFINULL))return e.copy(a,e.INFINULL);var c=e.isNegative(d);
c&&(d[0]=-d[0]);a=e.copy(a,e.ONE);for(var g=[1,0,0,1],h=e.clone(e.ONE),f=e.MAX_LOOPS;!e.approximates(d,h)&&f--;)e.isLessThan(d,h)?(g[0]+=g[1],g[2]+=g[3]):(g[1]+=g[0],g[3]+=g[2]),a[0]=g[0]+g[1],a[1]=g[2]+g[3],e.pow(h,a,b);c&&(d[0]=-d[0],1===b%2&&e.neg(a,a));return a};e.dot=function(a,d){return a[0]*d[0]+a[1]*d[1]};e.str=function(a){return 1===a[1]?a[0].toString():a[0]+"/"+a[1]};e.toDecimal=function(a){return a[0]/a[1]};e.dec=e.toDecimal;e.toInteger=function(a){return Math.round(e.toDecimal(a))};e.round=
e.toInteger;e.floor=function(a){return Math.floor(e.toDecimal(a))};e.ceil=function(a){return Math.ceil(e.toDecimal(a))};e.fromInteger_copy=function(a,d){a[0]=parseInt(d);a[1]=1;return a};e.fromInteger=function(a){return e.fromInteger_copy(e.create(),a)};e.fromIntegerInverse_copy=function(a,d){a[0]=1;a[1]=parseInt(d);0>a[1]&&(a[0]=-a[0],a[1]=-a[1]);return a};e.fromIntegerInverse=function(a){return e.fromIntegerInverse_copy(e.create(),a)};e.fromDecimal=function(a){return e.fromDecimal_copy(e.create(),
a)};e.fromDecimal_copy=function(a,d){d=parseFloat(d);if(isNaN(d))return e.copy(a,e.INFINULL);if(Infinity===d)return e.copy(a,e.INFINITY);if(Math.abs(d)<e.EPSILON)return e.copy(a,e.ZERO);if(Math.abs(d-1)<e.EPSILON)return e.copy(a,e.ONE);if(Math.abs(d%1)<e.EPSILON)return e.fromInteger_copy(a,d);if(Math.abs(1/d%1)<e.EPSILON)return e.fromIntegerInverse_copy(a,Math.round(1/d));e.copy(a,e.ONE);for(var b=[1,0,0,1],c=d,g=1,h=e.MAX_LOOPS;h--&&Math.abs(d-e.toDecimal(a))>e.EPSILON;)g=Math.floor(c),a[0]=g*b[0]+
b[2],a[1]=g*b[1]+b[3],c=1/(c-g),b[2]=b[0],b[3]=b[1],b[0]=a[0],b[1]=a[1];return a};e.fromRandom=function(a){a[0]=0xfffffffffffff*Math.random()<<0;a[1]=Math.abs(0xfffffffffffff*Math.random()<<0);return e.normalize(a,a)};e.sin=function(a,d){if(0===d[1])return e.copy(a,e.ZERO);e.scalar_multiply(a,d,2);var b=e.create();e.pow(b,d,2);e.add(b,b,e.ONE);e.divide(a,a,b);return a};e.cos=function(a,d){if(0===d[1])return e.neg(a,e.ONE);var b=e.create();e.pow(b,d,2);e.sub(a,e.ONE,b);var c=e.create();e.add(c,e.ONE,
b);e.divide(a,a,c);return a};e.tan=function(a,d){e.scalar_multiply(a,d,2);var b=e.create();e.pow(b,d,2);e.scalar_multiply(b,b,2);e.add(a,a,b);e.pow(b,d,4);e.sub(b,e.ONE,b);e.divide(a,a,b);return a};e.toEgyptian=function(a){a=e.clone(a);e.abs(a,a);var d=e.floor(a);d&&e.sub(a,a,e.fromInteger(d));if(!a[0])return d.toString();d||(d="");for(var b=1,c=e.create();1!==a[0];)b++,c=e.fromValues(1,b),e.isGreaterThan(a,c)&&(d&&(d+=" + "),d+=e.str(c),e.sub(a,a,c));return a?d?d+" + "+e.str(a):e.str(a):d?d:"0"};
e.toBabylonian=function(a){var d="",b=e.toDecimal(a);a=parseInt(b);for(var b=b-a,c=0,g=0;0<a;)(c=a%60)&&(d=c+" * 60^"+g+(d?" + ":"")+d),a=(a-c)/60,g++;for(g=-1;0<b;)b*=60,c=parseInt(b+1E-13),b-=c,-1E-13>b||(c&&(d+=(d?" + ":"")+c+" * 60^"+g),g--);return d?d:"0"};e.traceSternBrocot=function(a){var b="";if(e.equals(a,e.ZERO)||e.equals(a,e.ONE)||e.equals(a,e.INFINITY)||e.equals(a,e.INFINULL))return b;if(e.equals(a,e.ZERO))return e.copy(out,e.ZERO);if(e.equals(a,e.ONE))return e.copy(out,e.ONE);if(e.equals(a,
e.INFINITY))return e.copy(out,e.INFINITY);if(e.equals(a,e.INFINULL))return e.copy(out,e.INFINULL);a=e.clone(a);e.isNegative(a)&&(a[0]=-a[0]);for(var c=e.clone(e.ONE),g=[1,0,0,1],h=0,f=0,l=e.MAX_LOOPS;!e.approximates(a,c)&&l--;)e.isLessThan(a,c)?(g[0]+=g[1],g[2]+=g[3],f++,h&&(b+="R",1!==h&&(b+=h),h=0,b+=" ")):(g[1]+=g[0],g[3]+=g[2],h++,f&&(b+="L",1!==f&&(b+=f),f=0,b+=" ")),c[0]=g[0]+g[1],c[1]=g[2]+g[3];f?(b+="L",1!==f&&(b+=f)):h&&(b+="R",1!==h&&(b+=h));0>l&&(b+="...");return b};e.toContinuedFraction=
function(a,b){b="undefined"===typeof b?65536:parseInt(b);if(e.equals(a,e.ZERO))return[0];if(e.equals(a,e.ONE))return[1];if(e.equals(a,e.NEGONE))return[-1];if(e.equals(a,e.INFINITY))return[1,0];if(e.equals(a,e.INFINULL))return[0,0];var c=e.clone(a),g=e.isNegative(c);g&&(c[0]=-c[0]);for(var h=e.clone(e.ONE),f=[1,0,0,1],l=1,p=[0],k=p.length-1;!e.equals(c,h)&&b--;)e.isLessThan(c,h)?(-1===l?p[k]++:(l=-1,p.push(1),k++),f[0]+=f[1],f[2]+=f[3]):(1===l?p[k]++:(l=1,p.push(1),k++),f[1]+=f[0],f[3]+=f[2]),h[0]=
f[0]+f[1],h[1]=f[2]+f[3];0>b?p.push(0):p[k]++;if(g)for(var q in p)p[q]=-p[q];return p};e.fromContinuedFraction=function(a,b){e.fromInteger_copy(a,b[b.length-1]);for(var c=b.length-2;-1<c;c--)e.invert(a,a),e.add(a,e.fromInteger(b[c]),a);return a};e.dump=function(a){e.create();return"rat\t"+e.str(a)+"\n~\t"+e.toDecimal(a)+"\nCF:\t["+e.toContinuedFraction(a)+"]\n"};e.ZERO=e.fromInteger(0);e.ONE=e.fromInteger(1);e.NEGONE=e.fromInteger(-1);e.INFINITY=e.fromValues(1,0);e.INFINULL=e.fromValues(0,0);e.INFINITESIMAL=
e.clone([1,h]);e.PI=e.fromValues(1320192667429,420230377710);"undefined"!==typeof c&&(c.rat=e);if(!q)var q=new BigInteger("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");if(!t)var t=1073741824;var a={EPSILON:2E-16};a.MAX_LOOPS=t;a.create=function(){var a=[];a[0]=BigInteger.ZERO;a[1]=BigInteger.ONE;return a};a.clone=function(a){var b=[];b[0]=a[0];b[1]=a[1];return b};a.fromValues=function(b,d){var c=[];c[0]=new BigInteger(b);c[1]=new BigInteger(d);return a.normalize(c,c)};a.copy=function(a,b){a[0]=b[0];a[1]=
b[1];return a};a.set=function(b,d,c){b[0]=d;b[1]=c;return a.normalize(b,b)};a.toRat=function(a,b){return e.set(a,b[0].toJSValue(),b[1].toJSValue())};a.fromRat=function(b,d){return a.set(b,BigInteger(d[0]),BigInteger(d[1]))};a.abs=function(a,b){a[0]=b[0].abs();a[1]=b[1];return a};a.invert=function(a,b){var c=b[0];a[0]=b[1];a[1]=c;return a};a.reciprocal=a.invert;a.add=function(b,d,c){0===d[1].compare(c[1])?(b[0]=d[0].add(c[0]),b[1]=d[1]):(b[0]=d[0].multiply(c[1]).add(c[0].multiply(d[1])),b[1]=d[1].multiply(c[1]));
return a.normalize(b,b)};a.subtract=function(b,d,c){0===d[1].compare(c[1])?(b[0]=d[0].subtract(c[0]),b[1]=d[1]):(b[0]=d[0].multiply(c[1]).subtract(c[0].multiply(d[1])),b[1]=d[1].multiply(c[1]));return a.normalize(b,b)};a.sub=a.subtract;a.multiply=function(b,d,c){b[0]=d[0].multiply(c[0]);b[1]=d[1].multiply(c[1]);return a.normalize(b,b)};a.mul=a.multiply;a.mediant=function(b,d,c){b[0]=d[0].add(c[0]);b[1]=d[1].add(c[1]);return a.normalize(b,b)};a.divide=function(b,d,c){b[0]=d[0].multiply(c[1]);b[1]=
d[1].multiply(c[0]);return a.normalize(b,b)};a.div=a.divide;a.equals=function(a,b){return a[0].isZero()&&b[0].isZero()||a[1].isZero()&&b[1].isZero()?!0:0===a[0].compare(b[0])&&0===a[1].compare(b[1])};a.approximates=function(b,d){if(a.equals(b,d))return!0;var c=a.create();a.sub(c,b,d);a.abs(c,c);return a.isLessThan(c,a.INFINITESIMAL)};a.isGreaterThan=function(b,d){return a.equals(b,d)?!1:0<b[0].multiply(d[1]).compare(d[0].multiply(b[1]))};a.isLessThan=function(b,d){return a.equals(b,d)?!1:0>b[0].multiply(d[1]).compare(d[0].multiply(b[1]))};
a.isNegative=function(a){return a[0].isNegative()};a.min=function(b,d,c){a.isLessThan(d,c)?(b[0]=d[0],b[1]=d[1]):(b[0]=c[0],b[1]=c[1]);return b};a.max=function(b,d,c){a.isGreaterThan(d,c)?(b[0]=d[0],b[1]=d[1]):(b[0]=c[0],b[1]=c[1]);return b};a.scalar_multiply=function(b,d,c){b[0]=d[0].multiply(c);b[1]=d[1];return a.normalize(b,b)};a.scalar_divide=function(b,d,c){b[0]=d[0];b[1]=d[1].multiply(c);return a.normalize(b,b)};a.normalize=function(b,d){if(d[0].isZero()||d[1].isZero())return d;if(0===d[0].compare(d[1]))return a.clone(a.ONE);
if(d[1].isNegative())b[0]=d[0].negate(),b[1]=d[1].negate();else if(b[0]=d[0],b[1]=d[1],b[1].isZero())return b;var c=f.greatest_common_divisor(b[0].abs(),b[1]);0<c.compare(BigInteger.ONE)&&(b[0]=b[0].quotient(c),b[1]=b[1].quotient(c));return b};a.opposite=function(a,b){a[0]=b[0].negate();a[1]=b[1];return a};a.negative=a.opposite;a.neg=a.opposite;a.power=function(b,d,c){2===c?(b[0]=d[0].square(),b[1]=d[1].square()):0<c?(b[0]=d[0].pow(c),b[1]=d[1].pow(c)):0>c?(c=Math.abs(c),b[0]=d[1].pow(c),b[1]=d[0].pow(c)):
a.copy(b,a.ONE);return b};a.pow=a.power;a.sqrt=function(b,d){return a.nthRoot(b,d,2)};a.nthRoot=function(b,d,c){if(a.equals(d,a.ZERO))return a.copy(b,a.ZERO);if(a.equals(d,a.ONE))return a.copy(b,a.ONE);if(a.equals(d,a.INFINITY))return a.copy(b,a.INFINITY);if(a.equals(d,a.INFINULL))return a.copy(b,a.INFINULL);var g=a.isNegative(d);g&&(d[0]=d[0].negate());a.copy(b,a.ONE);for(var e=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],h=a.clone(a.ONE),f=t;!a.approximates(d,h)&&f--;)a.isLessThan(d,
h)?(e[0]=e[0].add(e[1]),e[2]=e[2].add(e[3])):(e[1]=e[1].add(e[0]),e[3]=e[3].add(e[2])),b[0]=e[0].add(e[1]),b[1]=e[2].add(e[3]),a.pow(h,b,c);g&&(d[0]=d[0].negate(),1===c%2&&a.neg(b,b));return b};a.dot=function(a,b){return a[0].multiply(b[0]).add(a[1].multiply(b[1]))};a.str=function(a){return 0===a[1].compare(BigInteger.ONE)?a[0].toString():a[0].toString()+"/"+a[1].toString()};a.toDecimal=function(a){return a[0].toJSValue()/a[1].toJSValue()};a.dec=a.toDecimal;a.toInteger=function(a){return a[0].quotient(a[1]).toJSValue()};
a.round=a.toInteger;a.toBigInteger=function(a){return a[0].quotient(a[1])};a.floor=function(b){return Math.floor(a.toDecimal(b))};a.ceil=function(b){return Math.ceil(a.toDecimal(b))};a.fromInteger_copy=function(a,b){a[0]=BigInteger(b);a[1]=BigInteger.ONE;return a};a.fromInteger=function(b){return a.fromInteger_copy(a.create(),b)};a.fromIntegerInverse_copy=function(a,b){a[0]=BigInteger.ONE;a[1]=BigInteger(b);a[1].isNegative()&&(a[0]=a[0].negate(),a[1]=a[1].negate());return a};a.fromIntegerInverse=
function(b){return a.fromIntegerInverse_copy(a.create(),b)};a.fromDecimal=function(b){return a.fromDecimal_copy(a.create(),b)};a.fromDecimal_copy=function(b,d){d=parseFloat(d);if(isNaN(d))return a.copy(b,a.INFINULL);if(Infinity===d)return a.copy(b,a.INFINITY);if(Math.abs(d)<a.EPSILON)return a.copy(b,a.ZERO);if(Math.abs(d-1)<a.EPSILON)return a.copy(b,a.ONE);if(Math.abs(d%1)<a.EPSILON)return a.fromInteger_copy(b,d);if(Math.abs(1/d%1)<a.EPSILON)return a.fromIntegerInverse_copy(b,Math.round(1/d));a.copy(b,
a.ONE);for(var c=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],g=d,e=1,h=a.MAX_LOOPS;h--&&Math.abs(d-a.toDecimal(b))>a.EPSILON;)e=Math.floor(g),b[0]=BigInteger(e*c[0]+c[2]),b[1]=BigInteger(e*c[1]+c[3]),g=1/(g-e),c[2]=c[0],c[3]=c[1],c[0]=b[0],c[1]=b[1];return b};a.fromRandom=function(b){b[0]=BigInteger(0xfffffffffffff*Math.random()<<0);b[1]=BigInteger(Math.abs(0xfffffffffffff*Math.random()<<0));return a.normalize(b,b)};a.sin=function(b,d){if(d[1].isZero())return a.copy(b,a.ZERO);a.scalar_multiply(b,
d,2);var c=a.create();a.pow(c,d,2);a.add(c,c,a.ONE);a.divide(b,b,c);return b};a.cos=function(b,d){if(d[1].isZero())return a.neg(b,a.ONE);var c=a.create();a.pow(c,d,2);a.sub(b,a.ONE,c);var g=a.create();a.add(g,a.ONE,c);a.divide(b,b,g);return b};a.tan=function(b,d){a.scalar_multiply(b,d,2);var c=a.create();a.pow(c,d,2);a.scalar_multiply(c,c,2);a.add(b,b,c);a.pow(c,d,4);a.sub(c,a.ONE,c);a.divide(b,b,c);return b};a.toEgyptian=function(b){b=a.clone(b);a.abs(b,b);var d=a.floor(b);d&&a.sub(b,b,a.fromInteger(d));
if(!b[0])return d.toString();d||(d="");for(var c=1,g=a.create();1!==b[0];)c++,g=a.fromValues(1,c),a.isGreaterThan(b,g)&&(d&&(d+=" + "),d+=a.str(g),a.sub(b,b,g));return b?d?d+" + "+a.str(b):a.str(b):d?d:"0"};a.toBabylonian=function(b){var d="",c=a.toDecimal(b);b=parseInt(c);for(var c=c-b,g=0,e=0;0<b;)(g=b%60)&&(d=g+" * 60^"+e+(d?" + ":"")+d),b=(b-g)/60,e++;for(e=-1;0<c;)c*=60,g=parseInt(c+1E-13),c-=g,-1E-13>c||(g&&(d+=(d?" + ":"")+g+" * 60^"+e),e--);return d?d:"0"};a.traceSternBrocot=function(b){var d=
"";if(a.equals(b,a.ZERO)||a.equals(b,a.ONE)||a.equals(b,a.INFINITY)||a.equals(b,a.INFINULL))return d;b=a.clone(b);a.isNegative(b)&&(b[0]=b[0].negate());for(var c=a.clone(a.ONE),g=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],e=0,h=0,f=65536;!a.equals(b,c)&&f--;)a.isLessThan(b,c)?(g[0]=g[0].add(g[1]),g[2]=g[2].add(g[3]),h++,e&&(d+="R",1!==e&&(d+=e),e=0,d+=" ")):(g[1]=g[1].add(g[0]),g[3]=g[3].add(g[2]),e++,h&&(d+="L",1!==h&&(d+=h),h=0,d+=" ")),c[0]=g[0].add(g[1]),c[1]=g[2].add(g[3]);h?(d+=
"L",1!==h&&(d+=h)):e&&(d+="R",1!==e&&(d+=e));0>f&&(d+="...");return d};a.toContinuedFraction=function(b,d){d="undefined"===typeof d?65536:parseInt(d);if(a.equals(b,a.ZERO))return[0];if(a.equals(b,a.ONE))return[1];if(a.equals(b,a.NEGONE))return[-1];if(a.equals(b,a.INFINITY))return[1,0];if(a.equals(b,a.INFINULL))return[0,0];var c=a.clone(b),g=a.isNegative(c);g&&(c[0]=c[0].negate());for(var e=a.clone(a.ONE),h=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],f=1,l=[0],p=l.length-1;!a.equals(c,
e)&&d--;)a.isLessThan(c,e)?(-1===f?l[p]++:(f=-1,l.push(1),p++),h[0]=h[0].add(h[1]),h[2]=h[2].add(h[3])):(1===f?l[p]++:(f=1,l.push(1),p++),h[1]=h[1].add(h[0]),h[3]=h[3].add(h[2])),e[0]=h[0].add(h[1]),e[1]=h[2].add(h[3]);0>d?l.push(0):l[p]++;if(g)for(var k in l)l[k]=-l[k];return l};a.fromContinuedFraction=function(b,d){a.fromInteger_copy(b,d[d.length-1]);for(var c=d.length-2;-1<c;c--)a.invert(b,b),a.add(b,a.fromInteger(d[c]),b);return b};a.fromFactorial=function(b,d){if("undefined"!==typeof factorial.PREPARED[d])return a.fromInteger_copy(b,
factorial.PREPARED[d]);var c=factorial.PREPARED.length-1;for(a.fromInteger_copy(b,factorial.PREPARED[c]);c<d;)a.scalar_multiply(b,b,++c);return b};a.dump=function(b){return"bigrat\t"+a.str(b)+"\n~\t"+a.toDecimal(b)+"\nCF:\t["+a.toContinuedFraction(b)+"]\n"};a.ZERO=a.fromInteger(0);a.ONE=a.fromInteger(1);a.NEGONE=a.fromInteger(-1);a.INFINITY=a.fromValues(1,0);a.INFINULL=a.fromValues(0,0);a.INFINITESIMAL=a.clone([new BigInteger(1),q]);a.PI=a.fromValues("3141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481117450284102701938521105559644622948954930381964428810975665933446128475648233786783165271201909145648566923460348610454326648213393607260249141273724587",
"1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");"undefined"!==typeof c&&(c.bigrat=a);var g=function(a,b){this.a=e.fromValues(parseInt(a),parseInt(b))};g.prototype.toString=function(){return e.str(this.a)};g.prototype.toContinuedFraction=function(a){return e.toContinuedFraction(this.a,
a)};g.prototype.invert=function(){return e.invert(this.a)};g.prototype.reciprocal=g.prototype.invert;g.prototype.add=function(a){var b=e.create();e.add(b,this.a,a.a);return new g(b[0],b[1])};g.prototype.plus=g.prototype.add;g.prototype.subtract=function(a){var b=e.create();e.sub(b,this.a,a.a);return new g(b[0],b[1])};g.prototype.sub=g.prototype.subtract;g.prototype.minus=g.prototype.subtract;g.prototype.multiply=function(a){var b=e.create();e.mul(b,this.a,a.a);return new g(b[0],b[1])};g.prototype.mul=
g.prototype.multiply;g.prototype.times=g.prototype.multiply;g.prototype.mediant=function(a){var b=e.create();e.mediant(b,this.a,a.a);return new g(b[0],b[1])};g.prototype.divide=function(a){var b=e.create();e.div(b,this.a,a.a);return new g(b[0],b[1])};g.prototype.div=g.prototype.divide;g.prototype.divided_by=g.prototype.divide;g.prototype.power=function(a){var b=e.create();e.pow(b,this.a,a);return new g(b[0],b[1])};g.prototype.pow=g.prototype.power;g.prototype.dump=function(){return e.dump(this.a)};
g.prototype.toRat=function(){return e.clone(this.a)};g.prototype.toDecimal=function(){return e.toDecimal(this.a)};g.fromRat=function(a){var b=new g;b.a[0]=a[0];b.a[1]=a[1];return b};g.fromInteger=function(a){return g.fromRat(e.fromInteger(a))};g.fromIntegerInverse=function(a){return g.fromRat(e.fromIntegerInverse(a))};g.fromDecimal=function(a){return g.fromRat(e.fromDecimal(a))};g.fromContinuedFraction=function(a){return g.fromRat(e.fromContinuedFraction(e.create(),a))};"undefined"!==typeof c&&(c.rational=
g)})(k)})(this);(function(f,k){"object"===typeof module&&"object"===typeof module.exports?module.exports=f.document?k(f,!0):function(c){if(!c.document)throw Error("jQuery requires a window with a document");return k(c)}:k(f)})("undefined"!==typeof window?window:this,function(f,k){function c(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"===typeof b&&0<b&&b-1 in a}function b(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,y){return!!b.call(a,
y,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(Eb.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return 0<=Fa.call(b,a)!==c})}function p(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function l(a){var b=ob[a]={};m.each(a.match(ua)||[],function(a,y){b[y]=!0});return b}function h(){M.removeEventListener("DOMContentLoaded",h,!1);f.removeEventListener("load",h,!1);m.ready()}function u(){Object.defineProperty(this.cache={},
0,{get:function(){return{}}});this.expando=m.expando+Math.random()}function e(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(Sa,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Fb.test(c)?m.parseJSON(c):c}catch(d){}V.set(a,b,c)}else c=void 0;return c}function q(){return!0}function t(){return!1}function a(){try{return M.activeElement}catch(a){}}function g(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?
b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function n(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function d(a){var b=db.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function w(a,b){for(var c=0,d=a.length;c<d;c++)K.set(a[c],"globalEval",!b||K.get(b[c],"globalEval"))}function x(a,b){var c,d,g,e;if(1===b.nodeType){if(K.hasData(a)&&(e=K.access(a),c=K.set(b,e),e=e.events))for(g in delete c.handle,
c.events={},e)for(c=0,d=e[g].length;c<d;c++)m.event.add(b,g,e[g][c]);V.hasData(a)&&(g=V.access(a),g=m.extend({},g),V.set(b,g))}}function A(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&m.nodeName(a,b)?m.merge([a],c):c}function E(a,b){var c,d=m(b.createElement(a)).appendTo(b.body),g=f.getDefaultComputedStyle&&(c=f.getDefaultComputedStyle(d[0]))?c.display:m.css(d[0],"display");d.detach();return g}function I(a){var b=
M,c=Ta[a];c||(c=E(a,b),"none"!==c&&c||(Ua=(Ua||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Ua[0].contentDocument,b.write(),b.close(),c=E(a,b),Ua.detach()),Ta[a]=c);return c}function D(a,b,c){var d,g,e=a.style;(c=c||Va(a))&&(g=c.getPropertyValue(b)||c[b]);c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),qa.test(g)&&Ga.test(b)&&(a=e.width,b=e.minWidth,d=e.maxWidth,e.minWidth=e.maxWidth=e.width=g,g=c.width,e.width=a,e.minWidth=b,e.maxWidth=d));return void 0!==
g?g+"":g}function J(a,b){return{get:function(){if(a())delete this.get;else return(this.get=b).apply(this,arguments)}}}function F(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,g=ea.length;g--;)if(b=ea[g]+c,b in a)return b;return d}function G(a,b,c){return(a=ia.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function N(a,b,c,d,g){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var e=0;4>b;b+=2)"margin"===c&&(e+=m.css(a,c+wa[b],!0,g)),d?("content"===c&&(e-=m.css(a,"padding"+
wa[b],!0,g)),"margin"!==c&&(e-=m.css(a,"border"+wa[b]+"Width",!0,g))):(e+=m.css(a,"padding"+wa[b],!0,g),"padding"!==c&&(e+=m.css(a,"border"+wa[b]+"Width",!0,g)));return e}function T(a,b,c){var d=!0,g="width"===b?a.offsetWidth:a.offsetHeight,e=Va(a),h="border-box"===m.css(a,"boxSizing",!1,e);if(0>=g||null==g){g=D(a,b,e);if(0>g||null==g)g=a.style[b];if(qa.test(g))return g;d=h&&(P.boxSizingReliable()||g===a.style[b]);g=parseFloat(g)||0}return g+N(a,b,c||(h?"border":"content"),d,e)+"px"}function S(a,
b){for(var c,d,g,e=[],h=0,n=a.length;h<n;h++)d=a[h],d.style&&(e[h]=K.get(d,"olddisplay"),c=d.style.display,b?(e[h]||"none"!==c||(d.style.display=""),""===d.style.display&&ja(d)&&(e[h]=K.access(d,"olddisplay",I(d.nodeName)))):(g=ja(d),"none"===c&&g||K.set(d,"olddisplay",g?c:m.css(d,"display"))));for(h=0;h<n;h++)d=a[h],!d.style||b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?e[h]||"":"none");return a}function L(a,b,c,d,g){return new L.prototype.init(a,b,c,d,g)}function U(){setTimeout(function(){ka=
void 0});return ka=m.now()}function ba(a,b){var c,d=0,g={height:a};for(b=b?1:0;4>d;d+=2-b)c=wa[d],g["margin"+c]=g["padding"+c]=a;b&&(g.opacity=g.width=a);return g}function da(a,b,c){for(var d,g=(H[b]||[]).concat(H["*"]),e=0,h=g.length;e<h;e++)if(d=g[e].call(c,b,a))return d}function oa(a,b){var c,d,g,e,h;for(c in a)if(d=m.camelCase(c),g=b[d],e=a[c],m.isArray(e)&&(g=e[1],e=a[c]=e[0]),c!==d&&(a[d]=e,delete a[c]),(h=m.cssHooks[d])&&"expand"in h)for(c in e=h.expand(e),delete a[d],e)c in a||(a[c]=e[c],
b[c]=g);else b[d]=g}function za(a,b,c){var d,g=0,e=R.length,h=m.Deferred().always(function(){delete n.elem}),n=function(){if(d)return!1;for(var b=ka||U(),b=Math.max(0,f.startTime+f.duration-b),r=1-(b/f.duration||0),c=0,g=f.tweens.length;c<g;c++)f.tweens[c].run(r);h.notifyWith(a,[f,r,b]);if(1>r&&g)return b;h.resolveWith(a,[f]);return!1},f=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:ka||U(),duration:c.duration,tweens:[],
createTween:function(b,r){var c=m.Tween(a,f.opts,b,r,f.opts.specialEasing[b]||f.opts.easing);f.tweens.push(c);return c},stop:function(b){var r=0,c=b?f.tweens.length:0;if(d)return this;for(d=!0;r<c;r++)f.tweens[r].run(1);b?h.resolveWith(a,[f,b]):h.rejectWith(a,[f,b]);return this}});c=f.props;for(oa(c,f.opts.specialEasing);g<e;g++)if(b=R[g].call(f,a,c,f.opts))return b;m.map(c,da,f);m.isFunction(f.opts.start)&&f.opts.start.call(a,f);m.fx.timer(m.extend(n,{elem:a,anim:f,queue:f.opts.queue}));return f.progress(f.opts.progress).done(f.opts.done,
f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Aa(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,g=0,e=b.toLowerCase().match(ua)||[];if(m.isFunction(c))for(;d=e[g++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function na(a,b,c,d){function g(f){var n;e[f]=!0;m.each(a[f]||[],function(a,r){var y=r(b,c,d);if("string"===typeof y&&!h&&!e[y])return b.dataTypes.unshift(y),g(y),!1;if(h)return!(n=y)});return n}var e={},h=a===eb;return g(b.dataTypes[0])||
!e["*"]&&g("*")}function pa(a,b){var c,d,g=m.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((g[c]?a:d||(d={}))[c]=b[c]);d&&m.extend(!0,a,d);return a}function ra(a,b,c,d){var g;if(m.isArray(b))m.each(b,function(b,g){c||Pa.test(a)?d(a,g):ra(a+"["+("object"===typeof g?b:"")+"]",g,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(g in b)ra(a+"["+g+"]",b[g],c,d)}function W(a){return m.isWindow(a)?a:9===a.nodeType&&a.defaultView}var la=[],fa=la.slice,Ha=la.concat,Ba=la.push,Fa=la.indexOf,
Ia={},fb=Ia.toString,Ca=Ia.hasOwnProperty,P={},M=f.document,m=function(a,b){return new m.fn.init(a,b)},Hb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Ib=/^-ms-/,pb=/-([\da-z])/gi,gb=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:"2.1.1",constructor:m,selector:"",length:0,toArray:function(){return fa.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:fa.call(this)},pushStack:function(a){a=m.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},
each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(fa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Ba,sort:la.sort,splice:la.splice};m.extend=m.fn.extend=function(){var a,
b,c,d,g,e=arguments[0]||{},h=1,f=arguments.length,n=!1;"boolean"===typeof e&&(n=e,e=arguments[h]||{},h++);"object"===typeof e||m.isFunction(e)||(e={});h===f&&(e=this,h--);for(;h<f;h++)if(null!=(a=arguments[h]))for(b in a)c=e[b],d=a[b],e!==d&&(n&&d&&(m.isPlainObject(d)||(g=m.isArray(d)))?(g?(g=!1,c=c&&m.isArray(c)?c:[]):c=c&&m.isPlainObject(c)?c:{},e[b]=m.extend(n,c,d)):void 0!==d&&(e[b]=d));return e};m.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);
},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!m.isArray(a)&&0<=a-parseFloat(a)},isPlainObject:function(a){return"object"!==m.type(a)||a.nodeType||m.isWindow(a)||a.constructor&&!Ca.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){for(var b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?
Ia[fb.call(a)]||"object":typeof a},globalEval:function(a){var b;b=eval;if(a=m.trim(a))1===a.indexOf("use strict")?(b=M.createElement("script"),b.text=a,M.head.appendChild(b).parentNode.removeChild(b)):b(a)},camelCase:function(a){return a.replace(Ib,"ms-").replace(pb,gb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var g,e=0,h=a.length;g=c(a);if(d)if(g)for(;e<h&&(g=b.apply(a[e],d),!1!==g);e++);else for(e in a){if(g=b.apply(a[e],d),!1===
g)break}else if(g)for(;e<h&&(g=b.call(a[e],e,a[e]),!1!==g);e++);else for(e in a)if(g=b.call(a[e],e,a[e]),!1===g)break;return a},trim:function(a){return null==a?"":(a+"").replace(Hb,"")},makeArray:function(a,b){var d=b||[];null!=a&&(c(Object(a))?m.merge(d,"string"===typeof a?[a]:a):Ba.call(d,a));return d},inArray:function(a,b,c){return null==b?-1:Fa.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,g=a.length;d<c;d++)a[g++]=b[d];a.length=g;return a},grep:function(a,b,c){for(var d=[],g=0,e=a.length,
h=!c;g<e;g++)c=!b(a[g],g),c!==h&&d.push(a[g]);return d},map:function(a,b,d){var g,e=0,h=a.length,f=[];if(c(a))for(;e<h;e++)g=b(a[e],e,d),null!=g&&f.push(g);else for(e in a)g=b(a[e],e,d),null!=g&&f.push(g);return Ha.apply([],f)},guid:1,proxy:function(a,b){var c,d;"string"===typeof b&&(c=a[b],b=a,a=c);if(m.isFunction(a))return d=fa.call(arguments,2),c=function(){return a.apply(b||this,d.concat(fa.call(arguments)))},c.guid=a.guid=a.guid||m.guid++,c},now:Date.now,support:P});m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){Ia["[object "+b+"]"]=b.toLowerCase()});var La=function(a){function b(a,c,d,g){var v,e,y,h,f;(c?c.ownerDocument||c:T)!==U&&z(c);c=c||U;d=d||[];if(!a||"string"!==typeof a)return d;if(1!==(h=c.nodeType)&&9!==h)return[];if(da&&!g){if(v=xa.exec(a))if(y=v[1])if(9===h)if((e=c.getElementById(y))&&e.parentNode){if(e.id===y)return d.push(e),d}else return d;else{if(c.ownerDocument&&(e=c.ownerDocument.getElementById(y))&&M(c,e)&&e.id===y)return d.push(e),d}else{if(v[2])return X.apply(d,c.getElementsByTagName(a)),
d;if((y=v[3])&&A.getElementsByClassName&&c.getElementsByClassName)return X.apply(d,c.getElementsByClassName(y)),d}if(A.qsa&&(!S||!S.test(a))){e=v=N;y=c;f=9===h&&a;if(1===h&&"object"!==c.nodeName.toLowerCase()){h=I(a);(v=c.getAttribute("id"))?e=v.replace(ya,"\\$&"):c.setAttribute("id",e);e="[id='"+e+"'] ";for(y=h.length;y--;)h[y]=e+C(h[y]);y=wa.test(a)&&r(c.parentNode)||c;f=h.join(",")}if(f)try{return X.apply(d,y.querySelectorAll(f)),d}catch(n){}finally{v||c.removeAttribute("id")}}}return L(a.replace(ea,
"$1"),c,d,g)}function c(){function a(r,c){b.push(r+" ")>t.cacheLength&&delete a[b.shift()];return a[r+" "]=c}var b=[];return a}function d(a){a[N]=!0;return a}function g(a){var b=U.createElement("div");try{return!!a(b)}catch(r){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function e(a,b){for(var r=a.split("|"),c=a.length;c--;)t.attrHandle[r[c]]=b}function h(a,b){var r=b&&a,c=r&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(c)return c;
if(r)for(;r=r.nextSibling;)if(r===b)return-1;return a?1:-1}function f(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function n(a){return function(b){var r=b.nodeName.toLowerCase();return("input"===r||"button"===r)&&b.type===a}}function l(a){return d(function(b){b=+b;return d(function(r,c){for(var d,g=a([],r.length,b),v=g.length;v--;)r[d=g[v]]&&(r[d]=!(c[d]=r[d]))})})}function r(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function v(){}function C(a){for(var b=
0,r=a.length,c="";b<r;b++)c+=a[b].value;return c}function O(a,b,r){var c=b.dir,d=r&&"parentNode"===c,g=R++;return b.first?function(b,r,g){for(;b=b[c];)if(1===b.nodeType||d)return a(b,r,g)}:function(b,r,v){var e,y,h=[P,g];if(v)for(;b=b[c];){if((1===b.nodeType||d)&&a(b,r,v))return!0}else for(;b=b[c];)if(1===b.nodeType||d){y=b[N]||(b[N]={});if((e=y[c])&&e[0]===P&&e[1]===g)return h[2]=e[2];y[c]=h;if(h[2]=a(b,r,v))return!0}}}function p(a){return 1<a.length?function(b,r,c){for(var d=a.length;d--;)if(!a[d](b,
r,c))return!1;return!0}:a[0]}function m(a,b,r,c,d){for(var g,v=[],e=0,y=a.length,h=null!=b;e<y;e++)if(g=a[e])if(!r||r(g,c,d))v.push(g),h&&b.push(e);return v}function k(a,r,c,g,v,e){g&&!g[N]&&(g=k(g));v&&!v[N]&&(v=k(v,e));return d(function(d,e,y,h){var C,f,n=[],l=[],O=e.length,p;if(!(p=d)){p=r||"*";for(var Z=y.nodeType?[y]:y,k=[],B=0,Ka=Z.length;B<Ka;B++)b(p,Z[B],k);p=k}p=!a||!d&&r?p:m(p,n,a,y,h);Z=c?v||(d?a:O||g)?[]:e:p;c&&c(p,Z,y,h);if(g)for(C=m(Z,l),g(C,[],y,h),y=C.length;y--;)if(f=C[y])Z[l[y]]=
!(p[l[y]]=f);if(d){if(v||a){if(v){C=[];for(y=Z.length;y--;)(f=Z[y])&&C.push(p[y]=f);v(null,Z=[],C,h)}for(y=Z.length;y--;)(f=Z[y])&&-1<(C=v?aa.call(d,f):n[y])&&(d[C]=!(e[C]=f))}}else Z=m(Z===e?Z.splice(O,Z.length):Z),v?v(null,e,Z,h):X.apply(e,Z)})}function q(a){var b,r,c,d=a.length,g=t.relative[a[0].type];r=g||t.relative[" "];for(var v=g?1:0,e=O(function(a){return a===b},r,!0),y=O(function(a){return-1<aa.call(b,a)},r,!0),h=[function(a,r,c){return!g&&(c||r!==J)||((b=r).nodeType?e(a,r,c):y(a,r,c))}];v<
d;v++)if(r=t.relative[a[v].type])h=[O(p(h),r)];else{r=t.filter[a[v].type].apply(null,a[v].matches);if(r[N]){for(c=++v;c<d&&!t.relative[a[c].type];c++);return k(1<v&&p(h),1<v&&C(a.slice(0,v-1).concat({value:" "===a[v-2].type?"*":""})).replace(ea,"$1"),r,v<c&&q(a.slice(v,c)),c<d&&q(a=a.slice(c)),c<d&&C(a))}h.push(r)}return p(h)}function u(a,r){var c=0<r.length,g=0<a.length,v=function(d,v,e,y,h){var C,f,n,l=0,O="0",p=d&&[],Z=[],k=J,B=d||g&&t.find.TAG("*",h),Ka=P+=null==k?1:Math.random()||.1,q=B.length;
for(h&&(J=v!==U&&v);O!==q&&null!=(C=B[O]);O++){if(g&&C){for(f=0;n=a[f++];)if(n(C,v,e)){y.push(C);break}h&&(P=Ka)}c&&((C=!n&&C)&&l--,d&&p.push(C))}l+=O;if(c&&O!==l){for(f=0;n=r[f++];)n(p,Z,v,e);if(d){if(0<l)for(;O--;)p[O]||Z[O]||(Z[O]=za.call(y));Z=m(Z)}X.apply(y,Z);h&&!d&&0<Z.length&&1<l+r.length&&b.uniqueSort(y)}h&&(P=Ka,J=k);return p};return c?d(v):v}var w,A,t,x,E,I,D,L,J,G,F,z,U,ba,da,S,H,K,M,N="sizzle"+-new Date,T=a.document,P=0,R=0,Q=c(),V=c(),na=c(),Y=function(a,b){a===b&&(F=!0);return 0},Aa=
{}.hasOwnProperty,W=[],za=W.pop,ca=W.push,X=W.push,oa=W.slice,aa=W.indexOf||function(a){for(var b=0,r=this.length;b<r;b++)if(this[b]===a)return b;return-1},fa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),ga="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+fa+"))|)[\\x20\\t\\r\\n\\f]*\\]",pa=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
ga+")*)|.*)\\)|)",ea=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,ia=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ma=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,qa=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,ra=new RegExp(pa),ta=new RegExp("^"+fa+"$"),ha={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+ga),PSEUDO:new RegExp("^"+pa),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ua=/^(?:input|select|textarea|button)$/i,va=/^h\d$/i,la=/^[^{]+\{\s*\[native \w/,xa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,wa=/[+~]/,ya=/'|\\/g,ja=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ka=function(a,b,r){a="0x"+b-65536;
return a!==a||r?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{X.apply(W=oa.call(T.childNodes),T.childNodes),W[T.childNodes.length].nodeType}catch(Ba){X={apply:W.length?function(a,b){ca.apply(a,oa.call(b))}:function(a,b){for(var r=a.length,c=0;a[r++]=b[c++];);a.length=r-1}}}A=b.support={};E=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};z=b.setDocument=function(a){var b=a?a.ownerDocument||a:T;a=b.defaultView;if(b===
U||9!==b.nodeType||!b.documentElement)return U;U=b;ba=b.documentElement;da=!E(b);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){z()},!1):a.attachEvent&&a.attachEvent("onunload",function(){z()}));A.attributes=g(function(a){a.className="i";return!a.getAttribute("className")});A.getElementsByTagName=g(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});A.getElementsByClassName=la.test(b.getElementsByClassName)&&g(function(a){a.innerHTML=
"<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});A.getById=g(function(a){ba.appendChild(a).id=N;return!b.getElementsByName||!b.getElementsByName(N).length});A.getById?(t.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&da){var r=b.getElementById(a);return r&&r.parentNode?[r]:[]}},t.filter.ID=function(a){var b=a.replace(ja,ka);return function(a){return a.getAttribute("id")===b}}):(delete t.find.ID,t.filter.ID=
function(a){var b=a.replace(ja,ka);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});t.find.TAG=A.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var r,c=[],d=0,g=b.getElementsByTagName(a);if("*"===a){for(;r=g[d++];)1===r.nodeType&&c.push(r);return c}return g};t.find.CLASS=A.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&
da)return b.getElementsByClassName(a)};H=[];S=[];if(A.qsa=la.test(b.querySelectorAll))g(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";a.querySelectorAll("[msallowclip^='']").length&&S.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||S.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||
S.push(":checked")}),g(function(a){var r=b.createElement("input");r.setAttribute("type","hidden");a.appendChild(r).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&S.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||S.push(":enabled",":disabled");a.querySelectorAll("*,:x");S.push(",.*:")});(A.matchesSelector=la.test(K=ba.matches||ba.webkitMatchesSelector||ba.mozMatchesSelector||ba.oMatchesSelector||ba.msMatchesSelector))&&g(function(a){A.disconnectedMatch=
K.call(a,"div");K.call(a,"[s!='']:x");H.push("!=",pa)});S=S.length&&new RegExp(S.join("|"));H=H.length&&new RegExp(H.join("|"));M=(a=la.test(ba.compareDocumentPosition))||la.test(ba.contains)?function(a,b){var r=9===a.nodeType?a.documentElement:a,c=b&&b.parentNode;return a===c||!!(c&&1===c.nodeType&&(r.contains?r.contains(c):a.compareDocumentPosition&&a.compareDocumentPosition(c)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};Y=a?function(a,r){if(a===r)return F=!0,0;var c=
!a.compareDocumentPosition-!r.compareDocumentPosition;if(c)return c;c=(a.ownerDocument||a)===(r.ownerDocument||r)?a.compareDocumentPosition(r):1;return c&1||!A.sortDetached&&r.compareDocumentPosition(a)===c?a===b||a.ownerDocument===T&&M(T,a)?-1:r===b||r.ownerDocument===T&&M(T,r)?1:G?aa.call(G,a)-aa.call(G,r):0:c&4?-1:1}:function(a,r){if(a===r)return F=!0,0;var c,d=0;c=a.parentNode;var g=r.parentNode,v=[a],e=[r];if(!c||!g)return a===b?-1:r===b?1:c?-1:g?1:G?aa.call(G,a)-aa.call(G,r):0;if(c===g)return h(a,
r);for(c=a;c=c.parentNode;)v.unshift(c);for(c=r;c=c.parentNode;)e.unshift(c);for(;v[d]===e[d];)d++;return d?h(v[d],e[d]):v[d]===T?-1:e[d]===T?1:0};return b};b.matches=function(a,r){return b(a,null,null,r)};b.matchesSelector=function(a,r){(a.ownerDocument||a)!==U&&z(a);r=r.replace(qa,"='$1']");if(!(!A.matchesSelector||!da||H&&H.test(r)||S&&S.test(r)))try{var c=K.call(a,r);if(c||A.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return 0<b(r,U,null,[a]).length};b.contains=
function(a,b){(a.ownerDocument||a)!==U&&z(a);return M(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==U&&z(a);var r=t.attrHandle[b.toLowerCase()],r=r&&Aa.call(t.attrHandle,b.toLowerCase())?r(a,b,!da):void 0;return void 0!==r?r:A.attributes||!da?a.getAttribute(b):(r=a.getAttributeNode(b))&&r.specified?r.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,r=[],c=0,d=0;F=!A.detectDuplicates;G=!A.sortStable&&a.slice(0);a.sort(Y);
if(F){for(;b=a[d++];)b===a[d]&&(c=r.push(d));for(;c--;)a.splice(r[c],1)}G=null;return a};x=b.getText=function(a){var b,r="",c=0;b=a.nodeType;if(!b)for(;b=a[c++];)r+=x(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)r+=x(a)}else if(3===b||4===b)return a.nodeValue;return r};t=b.selectors={cacheLength:50,createPseudo:d,match:ha,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",
first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ja,ka);a[3]=(a[3]||a[4]||a[5]||"").replace(ja,ka);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,r=!a[6]&&a[2];if(ha.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":r&&
ra.test(r)&&(b=I(r,!0))&&(b=r.indexOf(")",r.length-b)-r.length)&&(a[0]=a[0].slice(0,b),a[2]=r.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(ja,ka).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=Q[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&Q(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&
a.getAttribute("class")||"")})},ATTR:function(a,r,c){return function(d){d=b.attr(d,a);if(null==d)return"!="===r;if(!r)return!0;d+="";return"="===r?d===c:"!="===r?d!==c:"^="===r?c&&0===d.indexOf(c):"*="===r?c&&-1<d.indexOf(c):"$="===r?c&&d.slice(-c.length)===c:"~="===r?-1<(" "+d+" ").indexOf(c):"|="===r?d===c||d.slice(0,c.length+1)===c+"-":!1}},CHILD:function(a,b,r,c,d){var g="nth"!==a.slice(0,3),v="last"!==a.slice(-4),e="of-type"===b;return 1===c&&0===d?function(a){return!!a.parentNode}:function(b,
r,y){var h,C,f,n,l;r=g!==v?"nextSibling":"previousSibling";var O=b.parentNode,p=e&&b.nodeName.toLowerCase();y=!y&&!e;if(O){if(g){for(;r;){for(C=b;C=C[r];)if(e?C.nodeName.toLowerCase()===p:1===C.nodeType)return!1;l=r="only"===a&&!l&&"nextSibling"}return!0}l=[v?O.firstChild:O.lastChild];if(v&&y)for(y=O[N]||(O[N]={}),h=y[a]||[],n=h[0]===P&&h[1],f=h[0]===P&&h[2],C=n&&O.childNodes[n];C=++n&&C&&C[r]||(f=n=0)||l.pop();){if(1===C.nodeType&&++f&&C===b){y[a]=[P,n,f];break}}else if(y&&(h=(b[N]||(b[N]={}))[a])&&
h[0]===P)f=h[1];else for(;(C=++n&&C&&C[r]||(f=n=0)||l.pop())&&((e?C.nodeName.toLowerCase()!==p:1!==C.nodeType)||!++f||(y&&((C[N]||(C[N]={}))[a]=[P,f]),C!==b)););f-=d;return f===c||0===f%c&&0<=f/c}}},PSEUDO:function(a,r){var c,g=t.pseudos[a]||t.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return g[N]?g(r):1<g.length?(c=[a,a,"",r],t.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var c,d=g(a,r),v=d.length;v--;)c=aa.call(a,d[v]),a[c]=!(b[c]=d[v])}):function(a){return g(a,
0,c)}):g}},pseudos:{not:d(function(a){var b=[],r=[],c=D(a.replace(ea,"$1"));return c[N]?d(function(a,b,r,d){d=c(a,null,d,[]);for(var g=a.length;g--;)if(r=d[g])a[g]=!(b[g]=r)}):function(a,d,g){b[0]=a;c(b,null,g,r);return!r.pop()}}),has:d(function(a){return function(r){return 0<b(a,r).length}}),contains:d(function(a){return function(b){return-1<(b.textContent||b.innerText||x(b)).indexOf(a)}}),lang:d(function(a){ta.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(ja,ka).toLowerCase();return function(b){var r;
do if(r=da?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return r=r.toLowerCase(),r===a||0===r.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var r=a.location&&a.location.hash;return r&&r.slice(1)===b.id},root:function(a){return a===ba},focus:function(a){return a===U.activeElement&&(!U.hasFocus||U.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=
a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!t.pseudos.empty(a)},header:function(a){return va.test(a.nodeName)},input:function(a){return ua.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},
text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,r){return[0>r?r+b:r]}),even:l(function(a,b){for(var r=0;r<b;r+=2)a.push(r);return a}),odd:l(function(a,b){for(var r=1;r<b;r+=2)a.push(r);return a}),lt:l(function(a,b,r){for(b=0>r?r+b:r;0<=--b;)a.push(b);return a}),gt:l(function(a,b,r){for(r=0>r?r+b:r;++r<b;)a.push(r);return a})}};
t.pseudos.nth=t.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[w]=f(w);for(w in{submit:!0,reset:!0})t.pseudos[w]=n(w);v.prototype=t.filters=t.pseudos;t.setFilters=new v;I=b.tokenize=function(a,r){var c,d,g,v,e,y,C;if(e=V[a+" "])return r?0:e.slice(0);e=a;y=[];for(C=t.preFilter;e;){if(!c||(d=ia.exec(e)))d&&(e=e.slice(d[0].length)||e),y.push(g=[]);c=!1;if(d=ma.exec(e))c=d.shift(),g.push({value:c,type:d[0].replace(ea," ")}),e=e.slice(c.length);for(v in t.filter)!(d=ha[v].exec(e))||
C[v]&&!(d=C[v](d))||(c=d.shift(),g.push({value:c,type:v,matches:d}),e=e.slice(c.length));if(!c)break}return r?e.length:e?b.error(a):V(a,y).slice(0)};D=b.compile=function(a,b){var r,c=[],d=[],g=na[a+" "];if(!g){b||(b=I(a));for(r=b.length;r--;)g=q(b[r]),g[N]?c.push(g):d.push(g);g=na(a,u(d,c));g.selector=a}return g};L=b.select=function(a,b,c,d){var g,v,e,y,h="function"===typeof a&&a,f=!d&&I(a=h.selector||a);c=c||[];if(1===f.length){v=f[0]=f[0].slice(0);if(2<v.length&&"ID"===(e=v[0]).type&&A.getById&&
9===b.nodeType&&da&&t.relative[v[1].type]){b=(t.find.ID(e.matches[0].replace(ja,ka),b)||[])[0];if(!b)return c;h&&(b=b.parentNode);a=a.slice(v.shift().value.length)}for(g=ha.needsContext.test(a)?0:v.length;g--;){e=v[g];if(t.relative[y=e.type])break;if(y=t.find[y])if(d=y(e.matches[0].replace(ja,ka),wa.test(v[0].type)&&r(b.parentNode)||b)){v.splice(g,1);a=d.length&&C(v);if(!a)return X.apply(c,d),c;break}}}(h||D(a,f))(d,b,!da,c,wa.test(a)&&r(b.parentNode)||b);return c};A.sortStable=N.split("").sort(Y).join("")===
N;A.detectDuplicates=!!F;z();A.sortDetached=g(function(a){return a.compareDocumentPosition(U.createElement("div"))&1});g(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||e("type|href|height|width",function(a,b,r){if(!r)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});A.attributes&&g(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||e("value",function(a,b,r){if(!r&&"input"===a.nodeName.toLowerCase())return a.defaultValue});
g(function(a){return null==a.getAttribute("disabled")})||e("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,r){var c;if(!r)return!0===a[b]?b.toLowerCase():(c=a.getAttributeNode(b))&&c.specified?c.value:null});return b}(f);m.find=La;m.expr=La.selectors;m.expr[":"]=m.expr.pseudos;m.unique=La.uniqueSort;m.text=La.getText;m.isXMLDoc=La.isXML;m.contains=La.contains;var rb=m.expr.match.needsContext,sb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,
Eb=/^.[^:#\[\.,]*$/;m.filter=function(a,b,c){var d=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))};m.fn.extend({find:function(a){var b,c=this.length,d=[],g=this;if("string"!==typeof a)return this.pushStack(m(a).filter(function(){for(b=0;b<c;b++)if(m.contains(g[b],this))return!0}));for(b=0;b<c;b++)m.find(a,g[b],d);d=this.pushStack(1<c?m.unique(d):d);d.selector=this.selector?this.selector+
" "+a:a;return d},filter:function(a){return this.pushStack(b(this,a||[],!1))},not:function(a){return this.pushStack(b(this,a||[],!0))},is:function(a){return!!b(this,"string"===typeof a&&rb.test(a)?m(a):a||[],!1).length}});var Wa,Jb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(a,b){var c;if(!a)return this;if("string"===typeof a){c="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:Jb.exec(a);if(!c||!c[1]&&b)return!b||b.jquery?(b||Wa).find(a):this.constructor(b).find(a);if(c[1]){if(b=
b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:M,!0)),sb.test(c[1])&&m.isPlainObject(b))for(c in b)if(m.isFunction(this[c]))this[c](b[c]);else this.attr(c,b[c])}else(c=M.getElementById(c[2]))&&c.parentNode&&(this.length=1,this[0]=c),this.context=M,this.selector=a;return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(m.isFunction(a))return"undefined"!==typeof Wa.ready?Wa.ready(a):a(m);void 0!==a.selector&&(this.selector=a.selector,this.context=
a.context);return m.makeArray(a,this)}).prototype=m.fn;Wa=m(M);var Xa=/^(?:parents|prev(?:Until|All))/,hb={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){for(var d=[],g=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(g&&m(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});m.fn.extend({has:function(a){var b=m(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(m.contains(this,
b[a]))return!0})},closest:function(a,b){for(var c,d=0,g=this.length,e=[],h=rb.test(a)||"string"!==typeof a?m(a,b||this.context):0;d<g;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(h?-1<h.index(c):1===c.nodeType&&m.find.matchesSelector(c,a))){e.push(c);break}return this.pushStack(1<e.length?m.unique(e):e)},index:function(a){return a?"string"===typeof a?Fa.call(m(a),this[0]):Fa.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),
m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});m.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return p(a,"nextSibling")},prev:function(a){return p(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,
b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return a.contentDocument||m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var g=m.map(this,b,c);"Until"!==a.slice(-5)&&(d=c);d&&"string"===typeof d&&(g=m.filter(d,g));1<this.length&&(hb[a]||m.unique(g),Xa.test(a)&&g.reverse());return this.pushStack(g)}});
var ua=/\S+/g,ob={};m.Callbacks=function(a){a="string"===typeof a?ob[a]||l(a):m.extend({},a);var b,c,d,g,e,h,f=[],n=!a.once&&[],p=function(v){b=a.memory&&v;c=!0;h=g||0;g=0;e=f.length;for(d=!0;f&&h<e;h++)if(!1===f[h].apply(v[0],v[1])&&a.stopOnFalse){b=!1;break}d=!1;f&&(n?n.length&&p(n.shift()):b?f=[]:r.disable())},r={add:function(){if(f){var c=f.length;(function O(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&r.has(c)||f.push(c):c&&c.length&&"string"!==d&&O(c)})})(arguments);d?
e=f.length:b&&(g=c,p(b))}return this},remove:function(){f&&m.each(arguments,function(a,b){for(var r;-1<(r=m.inArray(b,f,r));)f.splice(r,1),d&&(r<=e&&e--,r<=h&&h--)});return this},has:function(a){return a?-1<m.inArray(a,f):!(!f||!f.length)},empty:function(){f=[];e=0;return this},disable:function(){f=n=b=void 0;return this},disabled:function(){return!f},lock:function(){n=void 0;b||r.disable();return this},locked:function(){return!n},fireWith:function(a,b){!f||c&&!n||(b=b||[],b=[a,b.slice?b.slice():
b],d?n.push(b):p(b));return this},fire:function(){r.fireWith(this,arguments);return this},fired:function(){return!!c}};return r};m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){g.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,
function(b,e){var h=m.isFunction(a[b])&&a[b];g[e[1]](function(){var a=h&&h.apply(this,arguments);if(a&&m.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[e[0]+"With"](this===d?c.promise():this,h?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},g={};d.pipe=d.then;m.each(b,function(a,e){var h=e[2],y=e[3];d[e[1]]=h.add;y&&h.add(function(){c=y},b[a^1][2].disable,b[2][2].lock);g[e[0]]=function(){g[e[0]+"With"](this===
g?d:this,arguments);return this};g[e[0]+"With"]=h.fireWith});d.promise(g);a&&a.call(g,g);return g},when:function(a){var b=0,c=fa.call(arguments),d=c.length,g=1!==d||a&&m.isFunction(a.promise)?d:0,e=1===g?a:m.Deferred(),h=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?fa.call(arguments):d;c===f?e.notifyWith(b,c):--g||e.resolveWith(b,c)}},f,n,l;if(1<d)for(f=Array(d),n=Array(d),l=Array(d);b<d;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,l,c)).fail(e.reject).progress(h(b,
n,f)):--g;g||e.resolveWith(l,c);return e.promise()}});var Ya;m.fn.ready=function(a){m.ready.promise().done(a);return this};m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){(!0===a?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==a&&0<--m.readyWait||(Ya.resolveWith(M,[m]),m.fn.triggerHandler&&(m(M).triggerHandler("ready"),m(M).off("ready"))))}});m.ready.promise=function(a){Ya||(Ya=m.Deferred(),"complete"===M.readyState?setTimeout(m.ready):(M.addEventListener("DOMContentLoaded",
h,!1),f.addEventListener("load",h,!1)));return Ya.promise(a)};m.ready.promise();var xa=m.access=function(a,b,c,d,g,e,h){var f=0,n=a.length,l=null==c;if("object"===m.type(c))for(f in g=!0,c)m.access(a,b,f,c[f],!0,e,h);else if(void 0!==d&&(g=!0,m.isFunction(d)||(h=!0),l&&(h?(b.call(a,d),b=null):(l=b,b=function(a,b,c){return l.call(m(a),c)})),b))for(;f<n;f++)b(a[f],c,h?d:d.call(a[f],f,b(a[f],c)));return g?a:l?b.call(a):n?b(a[0],c):e};m.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};
u.uid=1;u.accepts=m.acceptData;u.prototype={key:function(a){if(!u.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=u.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,m.extend(a,b)}}this.cache[c]||(this.cache[c]={});return c},set:function(a,b,c){var d;a=this.key(a);var g=this.cache[a];if("string"===typeof b)g[b]=c;else if(m.isEmptyObject(g))m.extend(this.cache[a],b);else for(d in b)g[d]=b[d];return g},get:function(a,b){var c=this.cache[this.key(a)];
return void 0===b?c:c[b]},access:function(a,b,c){if(void 0===b||b&&"string"===typeof b&&void 0===c)return c=this.get(a,b),void 0!==c?c:this.get(a,m.camelCase(b));this.set(a,b,c);return void 0!==c?c:b},remove:function(a,b){var c,d;c=this.key(a);var g=this.cache[c];if(void 0===b)this.cache[c]={};else for(m.isArray(b)?d=b.concat(b.map(m.camelCase)):(c=m.camelCase(b),b in g?d=[b,c]:(d=c,d=d in g?[d]:d.match(ua)||[])),c=d.length;c--;)delete g[d[c]]},hasData:function(a){return!m.isEmptyObject(this.cache[a[this.expando]]||
{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var K=new u,V=new u,Fb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Sa=/([A-Z])/g;m.extend({hasData:function(a){return V.hasData(a)||K.hasData(a)},data:function(a,b,c){return V.access(a,b,c)},removeData:function(a,b){V.remove(a,b)},_data:function(a,b,c){return K.access(a,b,c)},_removeData:function(a,b){K.remove(a,b)}});m.fn.extend({data:function(a,b){var c,d,g,h=this[0],f=h&&h.attributes;if(void 0===a){if(this.length&&(g=V.get(h),1===
h.nodeType&&!K.get(h,"hasDataAttrs"))){for(c=f.length;c--;)f[c]&&(d=f[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),e(h,d,g[d])));K.set(h,"hasDataAttrs",!0)}return g}return"object"===typeof a?this.each(function(){V.set(this,a)}):xa(this,function(b){var c,d=m.camelCase(a);if(h&&void 0===b){c=V.get(h,a);if(void 0!==c)return c;c=V.get(h,d);if(void 0!==c)return c;c=e(h,d,void 0);if(void 0!==c)return c}else this.each(function(){var r=V.get(this,d);V.set(this,d,b);-1!==a.indexOf("-")&&void 0!==
r&&V.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){V.remove(this,a)})}});m.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=K.get(a,b),c&&(!d||m.isArray(c)?d=K.access(a,b,m.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,g=c.shift(),e=m._queueHooks(a,b),h=function(){m.dequeue(a,b)};"inprogress"===g&&(g=c.shift(),d--);g&&("fx"===b&&c.unshift("inprogress"),delete e.stop,g.call(a,
h,e));!d&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return K.get(a,c)||K.access(a,c,{empty:m.Callbacks("once memory").add(function(){K.remove(a,[b+"queue",c])})})}});m.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,
a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,g=m.Deferred(),e=this,h=this.length,f=function(){--d||g.resolveWith(e,[e])};"string"!==typeof a&&(b=a,a=void 0);for(a=a||"fx";h--;)(c=K.get(e[h],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(f));f();return g.promise(b)}});var ta=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wa=["Top","Right","Bottom","Left"],ja=function(a,b){a=b||a;return"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},tb=/^(?:checkbox|radio)$/i;
(function(){var a=M.createDocumentFragment().appendChild(M.createElement("div")),b=M.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked","checked");b.setAttribute("name","t");a.appendChild(b);P.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";P.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue})();P.focusinBubbles="onfocusin"in f;var Kb=/^key/,Lb=/^(?:mouse|pointer|contextmenu)|click/,ub=/^(?:focusinfocus|focusoutblur)$/,
Q=/^([^.]*)(?:\.(.+)|)$/;m.event={global:{},add:function(a,b,c,d,g){var e,h,f,n,l,r,v,C,O;if(l=K.get(a))for(c.handler&&(e=c,c=e.handler,g=e.selector),c.guid||(c.guid=m.guid++),(n=l.events)||(n=l.events={}),(h=l.handle)||(h=l.handle=function(b){return"undefined"!==typeof m&&m.event.triggered!==b.type?m.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(ua)||[""],l=b.length;l--;)f=Q.exec(b[l])||[],C=r=f[1],O=(f[2]||"").split(".").sort(),C&&(f=m.event.special[C]||{},C=(g?f.delegateType:f.bindType)||
C,f=m.event.special[C]||{},r=m.extend({type:C,origType:r,data:d,handler:c,guid:c.guid,selector:g,needsContext:g&&m.expr.match.needsContext.test(g),namespace:O.join(".")},e),(v=n[C])||(v=n[C]=[],v.delegateCount=0,f.setup&&!1!==f.setup.call(a,d,O,h)||a.addEventListener&&a.addEventListener(C,h,!1)),f.add&&(f.add.call(a,r),r.handler.guid||(r.handler.guid=c.guid)),g?v.splice(v.delegateCount++,0,r):v.push(r),m.event.global[C]=!0)},remove:function(a,b,c,d,g){var e,h,f,n,l,r,v,C,O,p,qb,k=K.hasData(a)&&K.get(a);
if(k&&(n=k.events)){b=(b||"").match(ua)||[""];for(l=b.length;l--;)if(f=Q.exec(b[l])||[],O=qb=f[1],p=(f[2]||"").split(".").sort(),O){v=m.event.special[O]||{};O=(d?v.delegateType:v.bindType)||O;C=n[O]||[];f=f[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");for(h=e=C.length;e--;)r=C[e],!g&&qb!==r.origType||c&&c.guid!==r.guid||f&&!f.test(r.namespace)||d&&d!==r.selector&&("**"!==d||!r.selector)||(C.splice(e,1),r.selector&&C.delegateCount--,v.remove&&v.remove.call(a,r));h&&!C.length&&(v.teardown&&
!1!==v.teardown.call(a,p,k.handle)||m.removeEvent(a,O,k.handle),delete n[O])}else for(O in n)m.event.remove(a,O+b[l],c,d,!0);m.isEmptyObject(n)&&(delete k.handle,K.remove(a,"events"))}},trigger:function(a,b,c,d){var g,e,h,n,l,p,r=[c||M],v=Ca.call(a,"type")?a.type:a;p=Ca.call(a,"namespace")?a.namespace.split("."):[];e=g=c=c||M;if(3!==c.nodeType&&8!==c.nodeType&&!ub.test(v+m.event.triggered)&&(0<=v.indexOf(".")&&(p=v.split("."),v=p.shift(),p.sort()),n=0>v.indexOf(":")&&"on"+v,a=a[m.expando]?a:new m.Event(v,
"object"===typeof a&&a),a.isTrigger=d?2:3,a.namespace=p.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=c),b=null==b?[a]:m.makeArray(b,[a]),p=m.event.special[v]||{},d||!p.trigger||!1!==p.trigger.apply(c,b))){if(!d&&!p.noBubble&&!m.isWindow(c)){h=p.delegateType||v;ub.test(h+v)||(e=e.parentNode);for(;e;e=e.parentNode)r.push(e),g=e;g===(c.ownerDocument||M)&&r.push(g.defaultView||g.parentWindow||f)}for(g=0;(e=r[g++])&&
!a.isPropagationStopped();)a.type=1<g?h:p.bindType||v,(l=(K.get(e,"events")||{})[a.type]&&K.get(e,"handle"))&&l.apply(e,b),(l=n&&e[n])&&l.apply&&m.acceptData(e)&&(a.result=l.apply(e,b),!1===a.result&&a.preventDefault());a.type=v;d||a.isDefaultPrevented()||p._default&&!1!==p._default.apply(r.pop(),b)||!m.acceptData(c)||!n||!m.isFunction(c[v])||m.isWindow(c)||((g=c[n])&&(c[n]=null),m.event.triggered=v,c[v](),m.event.triggered=void 0,g&&(c[n]=g));return a.result}},dispatch:function(a){a=m.event.fix(a);
var b,c,d,g,e=[],h=fa.call(arguments);b=(K.get(this,"events")||{})[a.type]||[];var f=m.event.special[a.type]||{};h[0]=a;a.delegateTarget=this;if(!f.preDispatch||!1!==f.preDispatch.call(this,a)){e=m.event.handlers.call(this,a,b);for(b=0;(g=e[b++])&&!a.isPropagationStopped();)for(a.currentTarget=g.elem,c=0;(d=g.handlers[c++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(d.namespace))a.handleObj=d,a.data=d.data,d=((m.event.special[d.origType]||{}).handle||d.handler).apply(g.elem,
h),void 0!==d&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation());f.postDispatch&&f.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var c,d,g,e,h=[],f=b.delegateCount,n=a.target;if(f&&n.nodeType&&(!a.button||"click"!==a.type))for(;n!==this;n=n.parentNode||this)if(!0!==n.disabled||"click"!==a.type){d=[];for(c=0;c<f;c++)e=b[c],g=e.selector+" ",void 0===d[g]&&(d[g]=e.needsContext?0<=m(g,this).index(n):m.find(g,this,null,[n]).length),d[g]&&d.push(e);d.length&&h.push({elem:n,
handlers:d})}f<b.length&&h.push({elem:this,handlers:b.slice(f)});return h},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,
b){var c,d,g=b.button;null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||M,d=c.documentElement,c=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||c&&c.clientTop||0));a.which||void 0===g||(a.which=g&1?1:g&2?3:g&4?2:0);return a}},fix:function(a){if(a[m.expando])return a;var b,c,d;b=a.type;var g=a,e=this.fixHooks[b];e||(this.fixHooks[b]=e=Lb.test(b)?this.mouseHooks:Kb.test(b)?
this.keyHooks:{});d=e.props?this.props.concat(e.props):this.props;a=new m.Event(g);for(b=d.length;b--;)c=d[b],a[c]=g[c];a.target||(a.target=M);3===a.target.nodeType&&(a.target=a.target.parentNode);return e.filter?e.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==a()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===a()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&
this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(a,null,b):m.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};m.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,
c,!1)};m.Event=function(a,b){if(!(this instanceof m.Event))return new m.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?q:t):this.type=a;b&&m.extend(this,b);this.timeStamp=a&&a.timeStamp||m.now();this[m.expando]=!0};m.Event.prototype={isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=q;a&&a.preventDefault&&
a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=q;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=q;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,
d=a.relatedTarget,g=a.handleObj;if(!d||d!==this&&!m.contains(this,d))a.type=g.origType,c=g.handler.apply(this,arguments),a.type=b;return c}}});P.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,g=K.access(d,b);g||d.addEventListener(a,c,!0);K.access(d,b,(g||0)+1)},teardown:function(){var d=this.ownerDocument||this,g=K.access(d,b)-1;g?K.access(d,
b,g):(d.removeEventListener(a,c,!0),K.remove(d,b))}}});m.fn.extend({on:function(a,b,c,d,g){var e,h;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=void 0);for(h in a)this.on(h,b,c,a[h],g);return this}null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"===typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0));if(!1===d)d=t;else if(!d)return this;1===g&&(e=d,d=function(a){m().off(a);return e.apply(this,arguments)},d.guid=e.guid||(e.guid=m.guid++));return this.each(function(){m.event.add(this,a,d,c,b)})},
one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"===typeof a){for(d in a)this.off(d,b,a[d]);return this}if(!1===b||"function"===typeof b)c=b,b=void 0;!1===c&&(c=t);return this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,
b){var c=this[0];if(c)return m.event.trigger(a,b,c,!0)}});var vb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ma=/<([\w:]+)/,Mb=/<|&#?\w+;/,Nb=/<(?:script|style|link)/i,wb=/checked\s*(?:[^=]|=\s*.checked.)/i,ib=/^$|\/(?:java|ecma)script/i,db=/^true\/(.*)/,Ob=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ma.optgroup=ma.option;ma.tbody=ma.tfoot=ma.colgroup=ma.caption=ma.thead;ma.th=ma.td;m.extend({clone:function(a,b,c){var d,g,e,h,f=a.cloneNode(!0),n=m.contains(a.ownerDocument,a);if(!(P.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(h=A(f),e=A(a),d=0,g=e.length;d<g;d++){var l=e[d],r=h[d],v=r.nodeName.toLowerCase();if("input"===v&&tb.test(l.type))r.checked=l.checked;else if("input"===v||"textarea"===v)r.defaultValue=
l.defaultValue}if(b)if(c)for(e=e||A(a),h=h||A(f),d=0,g=e.length;d<g;d++)x(e[d],h[d]);else x(a,f);h=A(f,"script");0<h.length&&w(h,!n&&A(a,"script"));return f},buildFragment:function(a,b,c,d){for(var g,e,h,f=b.createDocumentFragment(),n=[],l=0,r=a.length;l<r;l++)if((g=a[l])||0===g)if("object"===m.type(g))m.merge(n,g.nodeType?[g]:g);else if(Mb.test(g)){e=e||f.appendChild(b.createElement("div"));h=(Ma.exec(g)||["",""])[1].toLowerCase();h=ma[h]||ma._default;e.innerHTML=h[1]+g.replace(vb,"<$1></$2>")+h[2];
for(h=h[0];h--;)e=e.lastChild;m.merge(n,e.childNodes);e=f.firstChild;e.textContent=""}else n.push(b.createTextNode(g));f.textContent="";for(l=0;g=n[l++];)if(!d||-1===m.inArray(g,d))if(a=m.contains(g.ownerDocument,g),e=A(f.appendChild(g),"script"),a&&w(e),c)for(h=0;g=e[h++];)ib.test(g.type||"")&&c.push(g);return f},cleanData:function(a){for(var b,c,d,g,e=m.event.special,h=0;void 0!==(c=a[h]);h++){if(m.acceptData(c)&&(g=c[K.expando])&&(b=K.cache[g])){if(b.events)for(d in b.events)e[d]?m.event.remove(c,
d):m.removeEvent(c,d,b.handle);K.cache[g]&&delete K.cache[g]}delete V.cache[c[V.expando]]}}});m.fn.extend({text:function(a){return xa(this,function(a){return void 0===a?m.text(this):this.empty().each(function(){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||g(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,
function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=g(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,g=0;null!=(c=d[g]);g++)b||1!==c.nodeType||m.cleanData(A(c)),c.parentNode&&
(b&&m.contains(c.ownerDocument,c)&&w(A(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(m.cleanData(A(a,!1)),a.textContent="");return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return m.clone(this,a,b)})},html:function(a){return xa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"===typeof a&&!Nb.test(a)&&!ma[(Ma.exec(a)||
["",""])[1].toLowerCase()]){a=a.replace(vb,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(A(b,!1)),b.innerHTML=a);b=0}catch(g){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];this.domManip(arguments,function(b){a=this.parentNode;m.cleanData(A(this));a&&a.replaceChild(b,this)});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=Ha.apply([],a);var c,g,e,
h,f=0,l=this.length,p=this,k=l-1,r=a[0],v=m.isFunction(r);if(v||1<l&&"string"===typeof r&&!P.checkClone&&wb.test(r))return this.each(function(c){var d=p.eq(c);v&&(a[0]=r.call(this,c,d.html()));d.domManip(a,b)});if(l&&(c=m.buildFragment(a,this[0].ownerDocument,!1,this),g=c.firstChild,1===c.childNodes.length&&(c=g),g)){g=m.map(A(c,"script"),n);for(e=g.length;f<l;f++)h=c,f!==k&&(h=m.clone(h,!0,!0),e&&m.merge(g,A(h,"script"))),b.call(this[f],h,f);if(e)for(c=g[g.length-1].ownerDocument,m.map(g,d),f=0;f<
e;f++)h=g[f],ib.test(h.type||"")&&!K.access(h,"globalEval")&&m.contains(c,h)&&(h.src?m._evalUrl&&m._evalUrl(h.src):m.globalEval(h.textContent.replace(Ob,"")))}return this}});m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c=[],d=m(a),g=d.length-1,e=0;e<=g;e++)a=e===g?this:this.clone(!0),m(d[e])[b](a),Ba.apply(c,a.get());return this.pushStack(c)}});var Ua,Ta={},Ga=/^margin/,qa=new RegExp("^("+
ta+")(?!px)[a-z%]+$","i"),Va=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};(function(){function a(){e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";e.innerHTML="";d.appendChild(g);var h=f.getComputedStyle(e,null);b="1%"!==h.top;c="4px"===h.width;d.removeChild(g)}var b,c,d=M.documentElement,g=M.createElement("div"),e=M.createElement("div");
e.style&&(e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",P.clearCloneStyle="content-box"===e.style.backgroundClip,g.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",g.appendChild(e),f.getComputedStyle&&m.extend(P,{pixelPosition:function(){a();return b},boxSizingReliable:function(){null==c&&a();return c},reliableMarginRight:function(){var a;a=e.appendChild(M.createElement("div"));a.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";
a.style.marginRight=a.style.width="0";e.style.width="1px";d.appendChild(g);a=!parseFloat(f.getComputedStyle(a,null).marginRight);d.removeChild(g);return a}}))})();m.swap=function(a,b,c,d){var g,e={};for(g in b)e[g]=a.style[g],a.style[g]=b[g];c=c.apply(a,d||[]);for(g in b)a.style[g]=e[g];return c};var xb=/^(none|table(?!-c[ea]).+)/,ia=new RegExp("^("+ta+")(.*)$","i"),ca=new RegExp("^([+-])=("+ta+")","i"),yb={position:"absolute",visibility:"hidden",display:"block"},jb={letterSpacing:"0",fontWeight:"400"},
ea=["Webkit","O","Moz","ms"];m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=D(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var g,e,h,f=m.camelCase(b),n=a.style;b=m.cssProps[f]||(m.cssProps[f]=F(n,f));h=m.cssHooks[b]||m.cssHooks[f];if(void 0!==
c)e=typeof c,"string"===e&&(g=ca.exec(c))&&(c=(g[1]+1)*g[2]+parseFloat(m.css(a,b)),e="number"),null!=c&&c===c&&("number"!==e||m.cssNumber[f]||(c+="px"),P.clearCloneStyle||""!==c||0!==b.indexOf("background")||(n[b]="inherit"),h&&"set"in h&&void 0===(c=h.set(a,c,d))||(n[b]=c));else return h&&"get"in h&&void 0!==(g=h.get(a,!1,d))?g:n[b]}},css:function(a,b,c,d){var g,e;e=m.camelCase(b);b=m.cssProps[e]||(m.cssProps[e]=F(a.style,e));(e=m.cssHooks[b]||m.cssHooks[e])&&"get"in e&&(g=e.get(a,!0,c));void 0===
g&&(g=D(a,b,d));"normal"===g&&b in jb&&(g=jb[b]);return""===c||c?(a=parseFloat(g),!0===c||m.isNumeric(a)?a||0:g):g}});m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){if(c)return xb.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,yb,function(){return T(a,b,d)}):T(a,b,d)},set:function(a,c,d){var g=d&&Va(a);return G(a,c,d?N(a,b,d,"border-box"===m.css(a,"boxSizing",!1,g),g):0)}}});m.cssHooks.marginRight=J(P.reliableMarginRight,function(a,b){if(b)return m.swap(a,{display:"inline-block"},
D,[a,"marginRight"])});m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){var d=0,g={};for(c="string"===typeof c?c.split(" "):[c];4>d;d++)g[a+wa[d]+b]=c[d]||c[d-2]||c[0];return g}};Ga.test(a)||(m.cssHooks[a+b].set=G)});m.fn.extend({css:function(a,b){return xa(this,function(a,b,c){var d,g={},e=0;if(m.isArray(b)){c=Va(a);for(d=b.length;e<d;e++)g[b[e]]=m.css(a,b[e],!1,c);return g}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,1<arguments.length)},show:function(){return S(this,
!0)},hide:function(){return S(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){ja(this)?m(this).show():m(this).hide()})}});m.Tween=L;L.prototype={constructor:L,init:function(a,b,c,d,g,e){this.elem=a;this.prop=c;this.easing=g||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=e||(m.cssNumber[c]?"":"px")},cur:function(){var a=L.propHooks[this.prop];return a&&a.get?a.get(this):L.propHooks._default.get(this)},run:function(a){var b,
c=L.propHooks[this.prop];this.pos=this.options.duration?b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):L.propHooks._default.set(this);return this}};L.prototype.init.prototype=L.prototype;L.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=m.css(a.elem,a.prop,""))&&"auto"!==a?
a:0:a.elem[a.prop]},set:function(a){if(m.fx.step[a.prop])m.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};m.fx=L.prototype.init;m.fx.step={};var ka,Za,Pb=/^(?:toggle|show|hide)$/,
z=new RegExp("^(?:([+-])=|)("+ta+")([a-z%]*)$","i"),aa=/queueHooks$/,R=[function(a,b,c){var d,g,e,h,f,n,l=this,r={},v=a.style,C=a.nodeType&&ja(a),p=K.get(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,f=h.empty.fire,h.empty.fire=function(){h.unqueued||f()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--;m.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[v.overflow,v.overflowX,v.overflowY],n=m.css(a,
"display"),g="none"===n?K.get(a,"olddisplay")||I(a.nodeName):n,"inline"===g&&"none"===m.css(a,"float")&&(v.display="inline-block"));c.overflow&&(v.overflow="hidden",l.always(function(){v.overflow=c.overflow[0];v.overflowX=c.overflow[1];v.overflowY=c.overflow[2]}));for(d in b)if(g=b[d],Pb.exec(g)){delete b[d];e=e||"toggle"===g;if(g===(C?"hide":"show"))if("show"===g&&p&&void 0!==p[d])C=!0;else continue;r[d]=p&&p[d]||m.style(a,d)}else n=void 0;if(m.isEmptyObject(r))"inline"===("none"===n?I(a.nodeName):
n)&&(v.display=n);else for(d in p?"hidden"in p&&(C=p.hidden):p=K.access(a,"fxshow",{}),e&&(p.hidden=!C),C?m(a).show():l.done(function(){m(a).hide()}),l.done(function(){var b;K.remove(a,"fxshow");for(b in r)m.style(a,b,r[b])}),r)b=da(C?p[d]:0,d,l),d in p||(p[d]=b.start,C&&(b.end=b.start,b.start="width"===d||"height"===d?1:0))}],H={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),g=z.exec(b),e=g&&g[3]||(m.cssNumber[a]?"":"px"),h=(m.cssNumber[a]||"px"!==e&&+d)&&z.exec(m.css(c.elem,a)),f=1,n=
20;if(h&&h[3]!==e){e=e||h[3];g=g||[];h=+d||1;do f=f||".5",h/=f,m.style(c.elem,a,h+e);while(f!==(f=c.cur()/d)&&1!==f&&--n)}g&&(h=c.start=+h||+d||0,c.unit=e,c.end=g[1]?h+(g[1]+1)*g[2]:+g[2]);return c}]};m.Animation=m.extend(za,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,g=a.length;d<g;d++)c=a[d],H[c]=H[c]||[],H[c].unshift(b)},prefilter:function(a,b){b?R.unshift(a):R.push(a)}});m.speed=function(a,b,c){var d=a&&"object"===typeof a?m.extend({},a):{complete:c||!c&&
b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};d.duration=m.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){m.isFunction(d.old)&&d.old.call(this);d.queue&&m.dequeue(this,d.queue)};return d};m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ja).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,
b,c,d){var g=m.isEmptyObject(a),e=m.speed(b,c,d);b=function(){var b=za(this,m.extend({},a),e);(g||K.get(this,"finish"))&&b.stop(!0)};b.finish=b;return g||!1===e.queue?this.each(b):this.queue(e.queue,b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};"string"!==typeof a&&(c=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,g=null!=a&&a+"queueHooks",e=m.timers,h=K.get(this);if(g)h[g]&&h[g].stop&&d(h[g]);else for(g in h)h[g]&&h[g].stop&&aa.test(g)&&
d(h[g]);for(g=e.length;g--;)e[g].elem!==this||null!=a&&e[g].queue!==a||(e[g].anim.stop(c),b=!1,e.splice(g,1));!b&&c||m.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,c=K.get(this),d=c[a+"queue"];b=c[a+"queueHooks"];var g=m.timers,e=d?d.length:0;c.finish=!0;m.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=g.length;b--;)g[b].elem===this&&g[b].queue===a&&(g[b].anim.stop(!0),g.splice(b,1));for(b=0;b<e;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}});
m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,g){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(ba(b,!0),a,d,g)}});m.each({slideDown:ba("show"),slideUp:ba("hide"),slideToggle:ba("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});m.timers=[];m.fx.tick=function(){var a,b=0,c=m.timers;for(ka=m.now();b<c.length;b++)a=c[b],a()||c[b]!==
a||c.splice(b--,1);c.length||m.fx.stop();ka=void 0};m.fx.timer=function(a){m.timers.push(a);a()?m.fx.start():m.timers.pop()};m.fx.interval=13;m.fx.start=function(){Za||(Za=setInterval(m.fx.tick,m.fx.interval))};m.fx.stop=function(){clearInterval(Za);Za=null};m.fx.speeds={slow:600,fast:200,_default:400};m.fn.delay=function(a,b){a=m.fx?m.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})};(function(){var a=M.createElement("input"),b=
M.createElement("select"),c=b.appendChild(M.createElement("option"));a.type="checkbox";P.checkOn=""!==a.value;P.optSelected=c.selected;b.disabled=!0;P.optDisabled=!c.disabled;a=M.createElement("input");a.value="t";a.type="radio";P.radioValue="t"===a.value})();var Y,Na=m.expr.attrHandle;m.fn.extend({attr:function(a,b){return xa(this,m.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}});m.extend({attr:function(a,b,c){var d,g,e=a.nodeType;if(a&&
3!==e&&8!==e&&2!==e){if("undefined"===typeof a.getAttribute)return m.prop(a,b,c);1===e&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?Y:void 0));if(void 0!==c)if(null===c)m.removeAttr(a,b);else{if(d&&"set"in d&&void 0!==(g=d.set(a,c,b)))return g;a.setAttribute(b,c+"");return c}else{if(d&&"get"in d&&null!==(g=d.get(a,b)))return g;g=m.find.attr(a,b);return null==g?void 0:g}}},removeAttr:function(a,b){var c,d,g=0,e=b&&b.match(ua);if(e&&1===a.nodeType)for(;c=e[g++];)d=
m.propFix[c]||c,m.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!P.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}}});Y={set:function(a,b,c){!1===b?m.removeAttr(a,c):a.setAttribute(c,c);return c}};m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=Na[b]||m.find.attr;Na[b]=function(a,b,d){var g,e;d||(e=Na[b],Na[b]=g,g=null!=c(a,b,d)?b.toLowerCase():null,Na[b]=e);return g}});
var Qb=/^(?:input|select|textarea|button)$/i;m.fn.extend({prop:function(a,b){return xa(this,m.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[m.propFix[a]||a]})}});m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,g,e;e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if(e=1!==e||!m.isXMLDoc(a))b=m.propFix[b]||b,g=m.propHooks[b];return void 0!==c?g&&"set"in g&&void 0!==(d=g.set(a,c,b))?d:a[b]=c:g&&"get"in g&&null!==(d=g.get(a,b))?
d:a[b]}},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||Qb.test(a.nodeName)||a.href?a.tabIndex:-1}}}});P.optSelected||(m.propHooks.selected={get:function(a){(a=a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null}});m.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){m.propFix[this.toLowerCase()]=this});var Qa=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,g,e;b="string"===
typeof a&&a;var h=0,f=this.length;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ua)||[];h<f;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Qa," "):" ")){for(e=0;g=b[e++];)0>d.indexOf(" "+g+" ")&&(d+=g+" ");d=m.trim(d);c.className!==d&&(c.className=d)}return this},removeClass:function(a){var b,c,d,g,e;b=0===arguments.length||"string"===typeof a&&a;var h=0,f=this.length;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,
b,this.className))});if(b)for(b=(a||"").match(ua)||[];h<f;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Qa," "):"")){for(e=0;g=b[e++];)for(;0<=d.indexOf(" "+g+" ");)d=d.replace(" "+g+" "," ");d=a?m.trim(d):"";c.className!==d&&(c.className=d)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"===typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):m.isFunction(a)?this.each(function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}):
this.each(function(){if("string"===c)for(var b,d=0,g=m(this),e=a.match(ua)||[];b=e[d++];)g.hasClass(b)?g.removeClass(b):g.addClass(b);else if("undefined"===c||"boolean"===c)this.className&&K.set(this,"__className__",this.className),this.className=this.className||!1===a?"":K.get(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Qa," ").indexOf(a))return!0;return!1}});var Vb=/\r/g;m.fn.extend({val:function(a){var b,
c,d,g=this[0];if(arguments.length)return d=m.isFunction(a),this.each(function(c){1===this.nodeType&&(c=d?a.call(this,c,m(this).val()):a,null==c?c="":"number"===typeof c?c+="":m.isArray(c)&&(c=m.map(c,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,c,"value")||(this.value=c))});if(g){if((b=m.valHooks[g.type]||m.valHooks[g.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(g,"value")))return c;c=g.value;return"string"===
typeof c?c.replace(Vb,""):null==c?"":c}}});m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,g=(a="select-one"===a.type||0>d)?null:[],e=a?d+1:c.length,h=0>d?e:a?d:0;h<e;h++)if(b=c[h],!(!b.selected&&h!==d||(P.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&m.nodeName(b.parentNode,"optgroup"))){b=m(b).val();if(a)return b;g.push(b)}return g},set:function(a,
b){for(var c,d,g=a.options,e=m.makeArray(b),h=g.length;h--;)if(d=g[h],d.selected=0<=m.inArray(d.value,e))c=!0;c||(a.selectedIndex=-1);return e}}}});m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){if(m.isArray(b))return a.checked=0<=m.inArray(m(a).val(),b)}};P.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){m.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var zb=m.now(),Ab=/\?/;m.parseJSON=function(a){return JSON.parse(a+"")};m.parseXML=
function(a){var b,c;if(!a||"string"!==typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}b&&!b.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+a);return b};var ya,ga,Rb=/#.*$/,Bb=/([?&])_=[^&]*/,Cb=/^(.*?):[ \t]*([^\r\n]*)$/mg,Sb=/^(?:GET|HEAD)$/,va=/^\/\//,Ra=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Oa={},eb={},kb="*/".concat("*");try{ga=location.href}catch(ha){ga=M.createElement("a"),ga.href="",ga=ga.href}ya=Ra.exec(ga.toLowerCase())||
[];m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ga,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ya[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,
"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?pa(pa(a,m.ajaxSettings),b):pa(m.ajaxSettings,a)},ajaxPrefilter:Aa(Oa),ajaxTransport:Aa(eb),ajax:function(a,b){function c(a,b,r,h){var n,q,u,A;A=b;if(2!==w){w=2;f&&clearTimeout(f);d=void 0;e=h||"";t.readyState=0<a?4:0;h=200<=a&&300>a||304===a;if(r){u=v;for(var Da=t,x,Ea,y,sa,E=u.contents,Ja=u.dataTypes;"*"===Ja[0];)Ja.shift(),void 0===x&&(x=u.mimeType||Da.getResponseHeader("Content-Type"));
if(x)for(Ea in E)if(E[Ea]&&E[Ea].test(x)){Ja.unshift(Ea);break}if(Ja[0]in r)y=Ja[0];else{for(Ea in r){if(!Ja[0]||u.converters[Ea+" "+Ja[0]]){y=Ea;break}sa||(sa=Ea)}y=y||sa}y?(y!==Ja[0]&&Ja.unshift(y),u=r[y]):u=void 0}a:{r=v;x=u;Ea=t;y=h;var I,D,L,Da={},E=r.dataTypes.slice();if(E[1])for(D in r.converters)Da[D.toLowerCase()]=r.converters[D];for(sa=E.shift();sa;)if(r.responseFields[sa]&&(Ea[r.responseFields[sa]]=x),!L&&y&&r.dataFilter&&(x=r.dataFilter(x,r.dataType)),L=sa,sa=E.shift())if("*"===sa)sa=
L;else if("*"!==L&&L!==sa){D=Da[L+" "+sa]||Da["* "+sa];if(!D)for(I in Da)if(u=I.split(" "),u[1]===sa&&(D=Da[L+" "+u[0]]||Da["* "+u[0]])){!0===D?D=Da[I]:!0!==Da[I]&&(sa=u[0],E.unshift(u[1]));break}if(!0!==D)if(D&&r["throws"])x=D(x);else try{x=D(x)}catch(J){u={state:"parsererror",error:D?J:"No conversion from "+L+" to "+sa};break a}}u={state:"success",data:x}}if(h)v.ifModified&&((A=t.getResponseHeader("Last-Modified"))&&(m.lastModified[g]=A),(A=t.getResponseHeader("etag"))&&(m.etag[g]=A)),204===a||
"HEAD"===v.type?A="nocontent":304===a?A="notmodified":(A=u.state,n=u.data,q=u.error,h=!q);else if(q=A,a||!A)A="error",0>a&&(a=0);t.status=a;t.statusText=(b||A)+"";h?k.resolveWith(C,[n,A,t]):k.rejectWith(C,[t,A,q]);t.statusCode(Ka);Ka=void 0;l&&p.trigger(h?"ajaxSuccess":"ajaxError",[t,v,h?n:q]);qb.fireWith(C,[t,A]);l&&(p.trigger("ajaxComplete",[t,v]),--m.active||m.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);b=b||{};var d,g,e,h,f,n,l,r,v=m.ajaxSetup({},b),C=v.context||v,p=v.context&&
(C.nodeType||C.jquery)?m(C):m.event,k=m.Deferred(),qb=m.Callbacks("once memory"),Ka=v.statusCode||{},q={},u={},w=0,A="canceled",t={readyState:0,getResponseHeader:function(a){var b;if(2===w){if(!h)for(h={};b=Cb.exec(e);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===w?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();w||(a=u[c]=u[c]||a,q[a]=b);return this},overrideMimeType:function(a){w||(v.mimeType=a);return this},statusCode:function(a){var b;
if(a)if(2>w)for(b in a)Ka[b]=[Ka[b],a[b]];else t.always(a[t.status]);return this},abort:function(a){a=a||A;d&&d.abort(a);c(0,a);return this}};k.promise(t).complete=qb.add;t.success=t.done;t.error=t.fail;v.url=((a||v.url||ga)+"").replace(Rb,"").replace(va,ya[1]+"//");v.type=b.method||b.type||v.method||v.type;v.dataTypes=m.trim(v.dataType||"*").toLowerCase().match(ua)||[""];null==v.crossDomain&&(n=Ra.exec(v.url.toLowerCase()),v.crossDomain=!(!n||n[1]===ya[1]&&n[2]===ya[2]&&(n[3]||("http:"===n[1]?"80":
"443"))===(ya[3]||("http:"===ya[1]?"80":"443"))));v.data&&v.processData&&"string"!==typeof v.data&&(v.data=m.param(v.data,v.traditional));na(Oa,v,b,t);if(2===w)return t;(l=v.global)&&0===m.active++&&m.event.trigger("ajaxStart");v.type=v.type.toUpperCase();v.hasContent=!Sb.test(v.type);g=v.url;v.hasContent||(v.data&&(g=v.url+=(Ab.test(g)?"&":"?")+v.data,delete v.data),!1===v.cache&&(v.url=Bb.test(g)?g.replace(Bb,"$1_="+zb++):g+(Ab.test(g)?"&":"?")+"_="+zb++));v.ifModified&&(m.lastModified[g]&&t.setRequestHeader("If-Modified-Since",
m.lastModified[g]),m.etag[g]&&t.setRequestHeader("If-None-Match",m.etag[g]));(v.data&&v.hasContent&&!1!==v.contentType||b.contentType)&&t.setRequestHeader("Content-Type",v.contentType);t.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+kb+"; q=0.01":""):v.accepts["*"]);for(r in v.headers)t.setRequestHeader(r,v.headers[r]);if(v.beforeSend&&(!1===v.beforeSend.call(C,t,v)||2===w))return t.abort();A="abort";for(r in{success:1,error:1,
complete:1})t[r](v[r]);if(d=na(eb,v,b,t)){t.readyState=1;l&&p.trigger("ajaxSend",[t,v]);v.async&&0<v.timeout&&(f=setTimeout(function(){t.abort("timeout")},v.timeout));try{w=1,d.send(q,c)}catch(x){if(2>w)c(-1,x);else throw x;}}else c(-1,"No Transport");return t},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}});m.each(["get","post"],function(a,b){m[b]=function(a,c,d,g){m.isFunction(c)&&(g=g||d,d=c,c=void 0);return m.ajax({url:a,type:b,
dataType:g,data:c,success:d})}});m.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){m.fn[b]=function(a){return this.on(b,a)}});m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};m.fn.extend({wrapAll:function(a){var b;if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});this[0]&&(b=m(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=
this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this));return this},wrapInner:function(a){return m.isFunction(a)?this.each(function(b){m(this).wrapInner(a.call(this,b))}):this.each(function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}});
m.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight};m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var $a=/%20/g,Pa=/\[\]$/,ab=/\r?\n/g,Wb=/^(?:submit|button|image|reset|file)$/i,Xb=/^(?:input|select|textarea|keygen)/i;m.param=function(a,b){var c,d=[],g=function(a,b){b=m.isFunction(b)?b():null==b?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional);if(m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,
function(){g(this.name,this.value)});else for(c in a)ra(c,a[c],b,g);return d.join("&").replace($a,"+")};m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Xb.test(this.nodeName)&&!Wb.test(a)&&(this.checked||!tb.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?
m.map(c,function(a){return{name:b.name,value:a.replace(ab,"\r\n")}}):{name:b.name,value:c.replace(ab,"\r\n")}}).get()}});m.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Tb=0,X={},Yb={0:200,1223:204},bb=m.ajaxSettings.xhr();if(f.ActiveXObject)m(f).on("unload",function(){for(var a in X)X[a]()});P.cors=!!bb&&"withCredentials"in bb;P.ajax=bb=!!bb;m.ajaxTransport(function(a){var b;if(P.cors||bb&&!a.crossDomain)return{send:function(c,d){var g,e=a.xhr(),h=++Tb;e.open(a.type,a.url,
a.async,a.username,a.password);if(a.xhrFields)for(g in a.xhrFields)e[g]=a.xhrFields[g];a.mimeType&&e.overrideMimeType&&e.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(g in c)e.setRequestHeader(g,c[g]);b=function(a){return function(){b&&(delete X[h],b=e.onload=e.onerror=null,"abort"===a?e.abort():"error"===a?d(e.status,e.statusText):d(Yb[e.status]||e.status,e.statusText,"string"===typeof e.responseText?{text:e.responseText}:void 0,e.getAllResponseHeaders()))}};
e.onload=b();e.onerror=b("error");b=X[h]=b("abort");try{e.send(a.hasContent&&a.data||null)}catch(f){if(b)throw f;}},abort:function(){b&&b()}}});m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){m.globalEval(a);return a}}});m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});m.ajaxTransport("script",function(a){if(a.crossDomain){var b,
c;return{send:function(d,g){b=m("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&g("error"===a.type?404:200,a.type)});M.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Db=[],cb=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Db.pop()||m.expando+"_"+zb++;this[a]=!0;return a}});m.ajaxPrefilter("json jsonp",function(a,b,c){var d,g,e,h=!1!==a.jsonp&&(cb.test(a.url)?"url":"string"===typeof a.data&&
!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&cb.test(a.data)&&"data");if(h||"jsonp"===a.dataTypes[0])return d=a.jsonpCallback=m.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,h?a[h]=a[h].replace(cb,"$1"+d):!1!==a.jsonp&&(a.url+=(Ab.test(a.url)?"&":"?")+a.jsonp+"="+d),a.converters["script json"]=function(){e||m.error(d+" was not called");return e[0]},a.dataTypes[0]="json",g=f[d],f[d]=function(){e=arguments},c.always(function(){f[d]=g;a[d]&&(a.jsonpCallback=b.jsonpCallback,
Db.push(d));e&&m.isFunction(g)&&g(e[0]);e=g=void 0}),"script"});m.parseHTML=function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||M;var d=sb.exec(a);c=!c&&[];if(d)return[b.createElement(d[1])];d=m.buildFragment([a],b,c);c&&c.length&&m(c).remove();return m.merge([],d.childNodes)};var lb=m.fn.load;m.fn.load=function(a,b,c){if("string"!==typeof a&&lb)return lb.apply(this,arguments);var d,g,e,h=this,f=a.indexOf(" ");0<=f&&(d=m.trim(a.slice(f)),a=a.slice(0,f));m.isFunction(b)?
(c=b,b=void 0):b&&"object"===typeof b&&(g="POST");0<h.length&&m.ajax({url:a,type:g,dataType:"html",data:b}).done(function(a){e=arguments;h.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){h.each(c,e||[a.responseText,b,a])});return this};m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var mb=f.document.documentElement;m.offset={setOffset:function(a,b,c){var d,g,e,h=m.css(a,"position"),f=m(a),n={};"static"===h&&(a.style.position=
"relative");e=f.offset();g=m.css(a,"top");d=m.css(a,"left");("absolute"===h||"fixed"===h)&&-1<(g+d).indexOf("auto")?(d=f.position(),g=d.top,d=d.left):(g=parseFloat(g)||0,d=parseFloat(d)||0);m.isFunction(b)&&(b=b.call(a,c,e));null!=b.top&&(n.top=b.top-e.top+g);null!=b.left&&(n.left=b.left-e.left+d);"using"in b?b.using.call(a,n):f.css(n)}};m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c;c=this[0];var d={top:0,left:0},
g=c&&c.ownerDocument;if(g){b=g.documentElement;if(!m.contains(b,c))return d;"undefined"!==typeof c.getBoundingClientRect&&(d=c.getBoundingClientRect());c=W(g);return{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};"fixed"===m.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(d=a.offset()),d.top+=m.css(a[0],"borderTopWidth",!0),d.left+=m.css(a[0],
"borderLeftWidth",!0));return{top:b.top-d.top-m.css(c,"marginTop",!0),left:b.left-d.left-m.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||mb;a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position");)a=a.offsetParent;return a||mb})}});m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;m.fn[a]=function(d){return xa(this,function(a,d,g){var e=W(a);if(void 0===g)return e?e[b]:a[d];e?e.scrollTo(c?f.pageXOffset:
g,c?g:f.pageYOffset):a[d]=g},a,d,arguments.length,null)}});m.each(["top","left"],function(a,b){m.cssHooks[b]=J(P.pixelPosition,function(a,c){if(c)return c=D(a,b),qa.test(c)?m(a).position()[b]+"px":c})});m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,g){var e=arguments.length&&(c||"boolean"!==typeof d),h=c||(!0===d||!0===g?"margin":"border");return xa(this,function(b,c,d){return m.isWindow(b)?b.document.documentElement["client"+
a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===d?m.css(b,c,h):m.style(b,c,d,h)},b,e?d:void 0,e,null)}})});m.fn.size=function(){return this.length};m.fn.andSelf=m.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return m});var nb=f.jQuery,Zb=f.$;m.noConflict=function(a){f.$===m&&(f.$=Zb);a&&f.jQuery===m&&(f.jQuery=nb);return m};"undefined"===typeof k&&(f.jQuery=f.$=m);return m});/*
   Copyright 2008-2014 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net
*/
(function(f,k,c){(function(b){"function"===typeof define&&define.amd?define("datatables",["jquery"],b):"object"===typeof exports?b(require("jquery")):jQuery&&!jQuery.fn.dataTable&&b(jQuery)})(function(b){function p(a){var c,d,g={};b.each(a,function(b,e){(c=b.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(c[1]+" ")&&(d=b.replace(c[0],c[2].toLowerCase()),g[d]=b,"o"===c[1]&&p(a[b]))});a._hungarianMap=g}function l(a,d,g){a._hungarianMap||p(a);var e;b.each(d,function(h,f){e=a._hungarianMap[h];
e===c||!g&&d[e]!==c||("o"===e.charAt(0)?(d[e]||(d[e]={}),b.extend(!0,d[e],d[h]),l(a[e],d[e],g)):d[e]=d[h])})}function h(a){var b=z.defaults.oLanguage,c=a.sZeroRecords;!a.sEmptyTable&&c&&"No data available in table"===b.sEmptyTable&&qa(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&c&&"Loading..."===b.sLoadingRecords&&qa(a,a,"sZeroRecords","sLoadingRecords");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&Za(a)}function u(a){ha(a,"ordering","bSort");ha(a,"orderMulti","bSortMulti");
ha(a,"orderClasses","bSortClasses");ha(a,"orderCellsTop","bSortCellsTop");ha(a,"order","aaSorting");ha(a,"orderFixed","aaSortingFixed");ha(a,"paging","bPaginate");ha(a,"pagingType","sPaginationType");ha(a,"pageLength","iDisplayLength");ha(a,"searching","bFilter");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&l(z.models.oSearch,a[b])}function e(a){ha(a,"orderable","bSortable");ha(a,"orderData","aDataSort");ha(a,"orderSequence","asSorting");ha(a,"orderDataType","sortDataType")}function q(a){a=
a.oBrowser;var c=b("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(b("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(b('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),d=c.find(".test");a.bScrollOversize=100===d[0].offsetWidth;a.bScrollbarLeft=1!==d.offset().left;c.remove()}function t(a,b,d,g,e,h){var f,n=!1;d!==c&&(f=d,n=!0);for(;g!==e;)a.hasOwnProperty(g)&&(f=n?b(f,a[g],g,a):a[g],n=!0,g+=h);return f}
function a(a,c){var d=z.defaults.column,e=a.aoColumns.length,d=b.extend({},z.models.oColumn,d,{nTh:c?c:k.createElement("th"),sTitle:d.sTitle?d.sTitle:c?c.innerHTML:"",aDataSort:d.aDataSort?d.aDataSort:[e],mData:d.mData?d.mData:e,idx:e});a.aoColumns.push(d);d=a.aoPreSearchCols;d[e]=b.extend({},z.models.oSearch,d[e]);g(a,e,null)}function g(a,d,g){d=a.aoColumns[d];var h=a.oClasses,f=b(d.nTh);if(!d.sWidthOrig){d.sWidthOrig=f.attr("width")||null;var n=(f.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);
n&&(d.sWidthOrig=n[1])}g!==c&&null!==g&&(e(g),l(z.defaults.column,g),g.mDataProp===c||g.mData||(g.mData=g.mDataProp),g.sType&&(d._sManualType=g.sType),g.className&&!g.sClass&&(g.sClass=g.className),b.extend(d,g),qa(d,g,"sWidth","sWidthOrig"),"number"===typeof g.iDataSort&&(d.aDataSort=[g.iDataSort]),qa(d,g,"aDataSort"));var p=d.mData,m=T(p),k=d.mRender?T(d.mRender):null;g=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};d._bAttrSrc=b.isPlainObject(p)&&(g(p.sort)||g(p.type)||g(p.filter));
d.fnGetData=function(a,b,d){var g=m(a,b,c,d);return k&&b?k(g,b,a,d):g};d.fnSetData=function(a,b,c){return S(p)(a,b,c)};"number"!==typeof p&&(a._rowReadObject=!0);a.oFeatures.bSort||(d.bSortable=!1,f.addClass(h.sSortableNone));a=-1!==b.inArray("asc",d.asSorting);g=-1!==b.inArray("desc",d.asSorting);d.bSortable&&(a||g)?a&&!g?(d.sSortingClass=h.sSortableAsc,d.sSortingClassJUI=h.sSortJUIAscAllowed):!a&&g?(d.sSortingClass=h.sSortableDesc,d.sSortingClassJUI=h.sSortJUIDescAllowed):(d.sSortingClass=h.sSortable,
d.sSortingClassJUI=h.sSortJUI):(d.sSortingClass=h.sSortableNone,d.sSortingClassJUI="")}function n(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;wa(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;""===b.sY&&""===b.sX||Sa(a);ca(a,null,"column-sizing",[a])}function d(a,b){var c=A(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function w(a,c){var d=A(a,"bVisible"),d=b.inArray(c,d);return-1!==d?d:null}function x(a){return A(a,"bVisible").length}function A(a,
c){var d=[];b.map(a.aoColumns,function(a,b){a[c]&&d.push(b)});return d}function E(a){var b=a.aoColumns,d=a.aoData,g=z.ext.type.detect,e,h,f,n,l,p,m,k,u;e=0;for(h=b.length;e<h;e++)if(m=b[e],u=[],!m.sType&&m._sManualType)m.sType=m._sManualType;else if(!m.sType){f=0;for(n=g.length;f<n;f++){l=0;for(p=d.length;l<p;l++){u[l]===c&&(u[l]=F(a,l,e,"type"));k=g[f](u[l],a);if(!k&&f!==g.length-1)break;if("html"===k)break}if(k){m.sType=k;break}}m.sType||(m.sType="string")}}function I(d,g,e,h){var f,n,l,p,m,k,u=
d.aoColumns;if(g)for(f=g.length-1;0<=f;f--){k=g[f];var q=k.targets!==c?k.targets:k.aTargets;b.isArray(q)||(q=[q]);n=0;for(l=q.length;n<l;n++)if("number"===typeof q[n]&&0<=q[n]){for(;u.length<=q[n];)a(d);h(q[n],k)}else if("number"===typeof q[n]&&0>q[n])h(u.length+q[n],k);else if("string"===typeof q[n])for(p=0,m=u.length;p<m;p++)("_all"==q[n]||b(u[p].nTh).hasClass(q[n]))&&h(p,k)}if(e)for(f=0,d=e.length;f<d;f++)h(f,e[f])}function D(a,c,d,g){var e=a.aoData.length,h=b.extend(!0,{},z.models.oRow,{src:d?
"dom":"data"});h._aData=c;a.aoData.push(h);c=a.aoColumns;for(var h=0,f=c.length;h<f;h++)d&&G(a,e,h,F(a,e,h)),c[h].sType=null;a.aiDisplayMaster.push(e);!d&&a.oFeatures.bDeferRender||za(a,e,d,g);return e}function J(a,c){var d;c instanceof b||(c=b(c));return c.map(function(b,c){d=oa(a,c);return D(a,d.data,c,d.cells)})}function F(a,b,d,g){var e=a.iDraw,h=a.aoColumns[d],f=a.aoData[b]._aData,n=h.sDefaultContent;d=h.fnGetData(f,g,{settings:a,row:b,col:d});if(d===c)return a.iDrawError!=e&&null===n&&(Ga(a,
0,"Requested unknown parameter "+("function"==typeof h.mData?"{function}":"'"+h.mData+"'")+" for row "+b,4),a.iDrawError=e),n;if((d===f||null===d)&&null!==n)d=n;else if("function"===typeof d)return d.call(f);return null===d&&"display"==g?"":d}function G(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}function N(a){return b.map(a.match(/(\\.|[^\.])+/g),function(a){return a.replace(/\\./g,".")})}function T(a){if(b.isPlainObject(a)){var d={};b.each(a,function(a,b){b&&
(d[a]=T(b))});return function(a,b,g,r){var e=d[b]||d._;return e!==c?e(a,b,g,r):a}}if(null===a)return function(a){return a};if("function"===typeof a)return function(b,c,d,g){return a(b,c,d,g)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b,c){return b[a]};var g=function(a,b,d){var r,e;if(""!==d){e=N(d);for(var h=0,f=e.length;h<f;h++){d=e[h].match($a);r=e[h].match(Pa);if(d){e[h]=e[h].replace($a,"");""!==e[h]&&(a=a[e[h]]);r=[];e.splice(0,h+1);
e=e.join(".");h=0;for(f=a.length;h<f;h++)r.push(g(a[h],b,e));a=d[0].substring(1,d[0].length-1);a=""===a?r:r.join(a);break}else if(r){e[h]=e[h].replace(Pa,"");a=a[e[h]]();continue}if(null===a||a[e[h]]===c)return c;a=a[e[h]]}}return a};return function(b,c){return g(b,c,a)}}function S(a){if(b.isPlainObject(a))return S(a._);if(null===a)return function(){};if("function"===typeof a)return function(b,c,d){a(b,"set",c,d)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b,
c){b[a]=c};var d=function(a,b,g){g=N(g);var r;r=g[g.length-1];for(var e,h,f=0,n=g.length-1;f<n;f++){e=g[f].match($a);h=g[f].match(Pa);if(e){g[f]=g[f].replace($a,"");a[g[f]]=[];r=g.slice();r.splice(0,f+1);e=r.join(".");h=0;for(n=b.length;h<n;h++)r={},d(r,b[h],e),a[g[f]].push(r);return}h&&(g[f]=g[f].replace(Pa,""),a=a[g[f]](b));if(null===a[g[f]]||a[g[f]]===c)a[g[f]]={};a=a[g[f]]}if(r.match(Pa))a[r.replace(Pa,"")](b);else a[r.replace($a,"")]=b};return function(b,c){return d(b,c,a)}}function L(a){return va(a.aoData,
"_aData")}function U(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0}function ba(a,b,d){for(var g=-1,e=0,h=a.length;e<h;e++)a[e]==b?g=e:a[e]>b&&a[e]--; -1!=g&&d===c&&a.splice(g,1)}function da(a,b,d,g){var e=a.aoData[b],h,f=function(c,d){for(;c.childNodes.length;)c.removeChild(c.firstChild);c.innerHTML=F(a,b,d,"display")};if("dom"!==d&&(d&&"auto"!==d||"dom"!==e.src)){var n=e.anCells;if(n)if(g!==c)f(n[g],g);else for(d=0,h=n.length;d<h;d++)f(n[d],d)}else e._aData=oa(a,e,g,g===c?
c:e._aData).data;e._aSortData=null;e._aFilterData=null;f=a.aoColumns;if(g!==c)f[g].sType=null;else{d=0;for(h=f.length;d<h;d++)f[d].sType=null;Aa(e)}}function oa(a,d,g,e){var h=[],f=d.firstChild,n,l=0,p,m=a.aoColumns,k=a._rowReadObject;e=e||k?{}:[];var q=function(a,b){if("string"===typeof a){var c=a.indexOf("@");-1!==c&&(c=a.substring(c+1),S(a)(e,b.getAttribute(c)))}};a=function(a){if(g===c||g===l)n=m[l],p=b.trim(a.innerHTML),n&&n._bAttrSrc?(S(n.mData._)(e,p),q(n.mData.sort,a),q(n.mData.type,a),q(n.mData.filter,
a)):k?(n._setter||(n._setter=S(n.mData)),n._setter(e,p)):e[l]=p;l++};if(f)for(;f;){d=f.nodeName.toUpperCase();if("TD"==d||"TH"==d)a(f),h.push(f);f=f.nextSibling}else for(h=d.anCells,f=0,d=h.length;f<d;f++)a(h[f]);return{data:e,cells:h}}function za(a,b,c,d){var g=a.aoData[b],e=g._aData,h=[],f,n,l,p,m;if(null===g.nTr){f=c||k.createElement("tr");g.nTr=f;g.anCells=h;f._DT_RowIndex=b;Aa(g);p=0;for(m=a.aoColumns.length;p<m;p++){l=a.aoColumns[p];n=c?d[p]:k.createElement(l.sCellType);h.push(n);if(!c||l.mRender||
l.mData!==p)n.innerHTML=F(a,b,p,"display");l.sClass&&(n.className+=" "+l.sClass);l.bVisible&&!c?f.appendChild(n):!l.bVisible&&c&&n.parentNode.removeChild(n);l.fnCreatedCell&&l.fnCreatedCell.call(a.oInstance,n,F(a,b,p),e,b,p)}ca(a,"aoRowCreatedCallback",null,[f,e,b])}g.nTr.setAttribute("role","row")}function Aa(a){var c=a.nTr,d=a._aData;if(c){d.DT_RowId&&(c.id=d.DT_RowId);if(d.DT_RowClass){var g=d.DT_RowClass.split(" ");a.__rowc=a.__rowc?kb(a.__rowc.concat(g)):g;b(c).removeClass(a.__rowc.join(" ")).addClass(d.DT_RowClass)}d.DT_RowData&&
b(c).data(d.DT_RowData)}}function na(a){var c,d,g,e,h,f=a.nTHead,n=a.nTFoot,l=0===b("th, td",f).length,p=a.oClasses,m=a.aoColumns;l&&(e=b("<tr/>").appendTo(f));c=0;for(d=m.length;c<d;c++)h=m[c],g=b(h.nTh).addClass(h.sClass),l&&g.appendTo(e),a.oFeatures.bSort&&(g.addClass(h.sSortingClass),!1!==h.bSortable&&(g.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),ib(a,h.nTh,c))),h.sTitle!=g.html()&&g.html(h.sTitle),jb(a,"header")(a,g,h,p);l&&fa(a.aoHeader,f);b(f).find(">tr").attr("role","row");
b(f).find(">tr>th, >tr>td").addClass(p.sHeaderTH);b(n).find(">tr>th, >tr>td").addClass(p.sFooterTH);if(null!==n)for(a=a.aoFooter[0],c=0,d=a.length;c<d;c++)h=m[c],h.nTf=a[c].cell,h.sClass&&b(h.nTf).addClass(h.sClass)}function pa(a,d,g){var e,h,f,n=[],l=[],p=a.aoColumns.length,m;if(d){g===c&&(g=!1);e=0;for(h=d.length;e<h;e++){n[e]=d[e].slice();n[e].nTr=d[e].nTr;for(f=p-1;0<=f;f--)a.aoColumns[f].bVisible||g||n[e].splice(f,1);l.push([])}e=0;for(h=n.length;e<h;e++){if(a=n[e].nTr)for(;f=a.firstChild;)a.removeChild(f);
f=0;for(d=n[e].length;f<d;f++)if(m=p=1,l[e][f]===c){a.appendChild(n[e][f].cell);for(l[e][f]=1;n[e+p]!==c&&n[e][f].cell==n[e+p][f].cell;)l[e+p][f]=1,p++;for(;n[e][f+m]!==c&&n[e][f].cell==n[e][f+m].cell;){for(g=0;g<p;g++)l[e+g][f+m]=1;m++}b(n[e][f].cell).attr("rowspan",p).attr("colspan",m)}}}}function ra(a){var d=ca(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==b.inArray(!1,d))V(a,!1);else{var d=[],g=0,e=a.asStripeClasses,h=e.length,f=a.oLanguage,n=a.iInitDisplayStart,l="ssp"==ea(a),p=a.aiDisplay;a.bDrawing=
!0;n!==c&&-1!==n&&(a._iDisplayStart=l?n:n>=a.fnRecordsDisplay()?0:n,a.iInitDisplayStart=-1);var n=a._iDisplayStart,m=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,V(a,!1);else if(!l)a.iDraw++;else if(!a.bDestroying&&!Fa(a))return;if(0!==p.length)for(f=l?a.aoData.length:m,l=l?0:n;l<f;l++){var k=p[l],q=a.aoData[k];null===q.nTr&&za(a,k);k=q.nTr;if(0!==h){var u=e[g%h];q._sRowStripe!=u&&(b(k).removeClass(q._sRowStripe).addClass(u),q._sRowStripe=u)}ca(a,"aoRowCallback",null,[k,q._aData,
g,l]);d.push(k);g++}else g=f.sZeroRecords,1==a.iDraw&&"ajax"==ea(a)?g=f.sLoadingRecords:f.sEmptyTable&&0===a.fnRecordsTotal()&&(g=f.sEmptyTable),d[0]=b("<tr/>",{"class":h?e[0]:""}).append(b("<td />",{valign:"top",colSpan:x(a),"class":a.oClasses.sRowEmpty}).html(g))[0];ca(a,"aoHeaderCallback","header",[b(a.nTHead).children("tr")[0],L(a),n,m,p]);ca(a,"aoFooterCallback","footer",[b(a.nTFoot).children("tr")[0],L(a),n,m,p]);e=b(a.nTBody);e.children().detach();e.append(b(d));ca(a,"aoDrawCallback","draw",
[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function W(a,b){var c=a.oFeatures,d=c.bFilter;c.bSort&&Mb(a);d?M(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;ra(a);a._drawHold=!1}function la(a){var c=a.oClasses,d=b(a.nTable),d=b("<div/>").insertBefore(d),g=a.oFeatures,e=b("<div/>",{id:a.sTableId+"_wrapper","class":c.sWrapper+(a.nTFoot?"":" "+c.sNoFooter)});a.nHolding=d[0];a.nTableWrapper=e[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var h=
a.sDom.split(""),f,n,l,p,m,k,q=0;q<h.length;q++){f=null;n=h[q];if("<"==n){l=b("<div/>")[0];p=h[q+1];if("'"==p||'"'==p){m="";for(k=2;h[q+k]!=p;)m+=h[q+k],k++;"H"==m?m=c.sJUIHeader:"F"==m&&(m=c.sJUIFooter);-1!=m.indexOf(".")?(p=m.split("."),l.id=p[0].substr(1,p[0].length-1),l.className=p[1]):"#"==m.charAt(0)?l.id=m.substr(1,m.length-1):l.className=m;q+=k}e.append(l);e=b(l)}else if(">"==n)e=e.parent();else if("l"==n&&g.bPaginate&&g.bLengthChange)f=ob(a);else if("f"==n&&g.bFilter)f=P(a);else if("r"==
n&&g.bProcessing)f=K(a);else if("t"==n)f=Fb(a);else if("i"==n&&g.bInfo)f=Eb(a);else if("p"==n&&g.bPaginate)f=Ya(a);else if(0!==z.ext.feature.length)for(l=z.ext.feature,k=0,p=l.length;k<p;k++)if(n==l[k].cFeature){f=l[k].fnInit(a);break}f&&(l=a.aanFeatures,l[n]||(l[n]=[]),l[n].push(f),e.append(f))}d.replaceWith(e)}function fa(a,c){var d=b(c).children("tr"),g,e,h,f,n,l,p,m,k,q;a.splice(0,a.length);h=0;for(l=d.length;h<l;h++)a.push([]);h=0;for(l=d.length;h<l;h++)for(g=d[h],e=g.firstChild;e;){if("TD"==
e.nodeName.toUpperCase()||"TH"==e.nodeName.toUpperCase()){m=1*e.getAttribute("colspan");k=1*e.getAttribute("rowspan");m=m&&0!==m&&1!==m?m:1;k=k&&0!==k&&1!==k?k:1;f=0;for(n=a[h];n[f];)f++;p=f;q=1===m?!0:!1;for(n=0;n<m;n++)for(f=0;f<k;f++)a[h+f][p+n]={cell:e,unique:q},a[h+f].nTr=g}e=e.nextSibling}}function Ha(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],fa(c,b)));b=0;for(var g=c.length;b<g;b++)for(var e=0,h=c[b].length;e<h;e++)!c[b][e].unique||d[e]&&a.bSortCellsTop||(d[e]=c[b][e].cell);return d}function Ba(a,
c,d){ca(a,"aoServerParams","serverParams",[c]);if(c&&b.isArray(c)){var g={},e=/(.*?)\[\]$/;b.each(c,function(a,b){var c=b.name.match(e);c?(c=c[0],g[c]||(g[c]=[]),g[c].push(b.value)):g[b.name]=b.value});c=g}var h,f=a.ajax,n=a.oInstance;if(b.isPlainObject(f)&&f.data){h=f.data;var l=b.isFunction(h)?h(c):h;c=b.isFunction(h)&&l?l:b.extend(!0,c,l);delete f.data}l={data:c,success:function(b){var c=b.error||b.sError;c&&a.oApi._fnLog(a,0,c);a.json=b;ca(a,null,"xhr",[a,b]);d(b)},dataType:"json",cache:!1,type:a.sServerMethod,
error:function(b,c,d){d=a.oApi._fnLog;"parsererror"==c?d(a,0,"Invalid JSON response",1):4===b.readyState&&d(a,0,"Ajax error",7);V(a,!1)}};a.oAjaxData=c;ca(a,null,"preXhr",[a,c]);a.fnServerData?a.fnServerData.call(n,a.sAjaxSource,b.map(c,function(a,b){return{name:b,value:a}}),d,a):a.sAjaxSource||"string"===typeof f?a.jqXHR=b.ajax(b.extend(l,{url:f||a.sAjaxSource})):b.isFunction(f)?a.jqXHR=f.call(n,c,d,a):(a.jqXHR=b.ajax(b.extend(l,f)),f.data=h)}function Fa(a){return a.bAjaxDataGet?(a.iDraw++,V(a,!0),
Ba(a,Ia(a),function(b){fb(a,b)}),!1):!0}function Ia(a){var c=a.aoColumns,d=c.length,g=a.oFeatures,e=a.oPreviousSearch,h=a.aoPreSearchCols,f,n=[],l,p,m,k=Ma(a);f=a._iDisplayStart;l=!1!==g.bPaginate?a._iDisplayLength:-1;var q=function(a,b){n.push({name:a,value:b})};q("sEcho",a.iDraw);q("iColumns",d);q("sColumns",va(c,"sName").join(","));q("iDisplayStart",f);q("iDisplayLength",l);var u={draw:a.iDraw,columns:[],order:[],start:f,length:l,search:{value:e.sSearch,regex:e.bRegex}};for(f=0;f<d;f++)p=c[f],
m=h[f],l="function"==typeof p.mData?"function":p.mData,u.columns.push({data:l,name:p.sName,searchable:p.bSearchable,orderable:p.bSortable,search:{value:m.sSearch,regex:m.bRegex}}),q("mDataProp_"+f,l),g.bFilter&&(q("sSearch_"+f,m.sSearch),q("bRegex_"+f,m.bRegex),q("bSearchable_"+f,p.bSearchable)),g.bSort&&q("bSortable_"+f,p.bSortable);g.bFilter&&(q("sSearch",e.sSearch),q("bRegex",e.bRegex));g.bSort&&(b.each(k,function(a,b){u.order.push({column:b.col,dir:b.dir});q("iSortCol_"+a,b.col);q("sSortDir_"+
a,b.dir)}),q("iSortingCols",k.length));c=z.ext.legacy.ajax;return null===c?a.sAjaxSource?n:u:c?n:u}function fb(a,b){var d=function(a,d){return b[a]!==c?b[a]:b[d]},g=d("sEcho","draw"),e=d("iTotalRecords","recordsTotal"),d=d("iTotalDisplayRecords","recordsFiltered");if(g){if(1*g<a.iDraw)return;a.iDraw=1*g}U(a);a._iRecordsTotal=parseInt(e,10);a._iRecordsDisplay=parseInt(d,10);g=Ca(a,b);e=0;for(d=g.length;e<d;e++)D(a,g[e]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;ra(a);a._bInitComplete||
hb(a,b);a.bAjaxDataGet=!0;V(a,!1)}function Ca(a,d){var g=b.isPlainObject(a.ajax)&&a.ajax.dataSrc!==c?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===g?d.aaData||d[g]:""!==g?T(g)(d):d}function P(a){var c=a.oClasses,d=a.sTableId,g=a.oLanguage,e=a.oPreviousSearch,h=a.aanFeatures,f='<input type="search" class="'+c.sFilterInput+'"/>',n=g.sSearch,n=n.match(/_INPUT_/)?n.replace("_INPUT_",f):n+f,c=b("<div/>",{id:h.f?null:d+"_filter","class":c.sFilter}).append(b("<label/>").append(n)),h=function(){var b=this.value?
this.value:"";b!=e.sSearch&&(M(a,{sSearch:b,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),a._iDisplayStart=0,ra(a))},f=null!==a.searchDelay?a.searchDelay:"ssp"===ea(a)?400:0,l=b("input",c).val(e.sSearch).attr("placeholder",g.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",f?ja(h,f):h).bind("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",d);b(a.nTable).on("search.dt.DT",function(b,c){if(a===c)try{l[0]!==k.activeElement&&l.val(e.sSearch)}catch(d){}});
return c[0]}function M(a,b,d){var g=a.oPreviousSearch,e=a.aoPreSearchCols,h=function(a){g.sSearch=a.sSearch;g.bRegex=a.bRegex;g.bSmart=a.bSmart;g.bCaseInsensitive=a.bCaseInsensitive},f=function(a){return a.bEscapeRegex!==c?!a.bEscapeRegex:a.bRegex};E(a);if("ssp"!=ea(a)){Ib(a,b.sSearch,d,f(b),b.bSmart,b.bCaseInsensitive);h(b);for(b=0;b<e.length;b++)Hb(a,e[b].sSearch,b,f(e[b]),e[b].bSmart,e[b].bCaseInsensitive);m(a)}else h(b);a.bFiltered=!0;ca(a,null,"search",[a])}function m(a){for(var b=z.ext.search,
c=a.aiDisplay,d,g,e=0,h=b.length;e<h;e++){for(var f=[],n=0,l=c.length;n<l;n++)g=c[n],d=a.aoData[g],b[e](a,d._aFilterData,g,d._aData,n)&&f.push(g);c.length=0;c.push.apply(c,f)}}function Hb(a,b,c,d,g,e){if(""!==b){var h=a.aiDisplay;d=pb(b,d,g,e);for(g=h.length-1;0<=g;g--)b=a.aoData[h[g]]._aFilterData[c],d.test(b)||h.splice(g,1)}}function Ib(a,b,c,d,g,e){d=pb(b,d,g,e);g=a.oPreviousSearch.sSearch;e=a.aiDisplayMaster;var h;0!==z.ext.search.length&&(c=!0);h=La(a);if(0>=b.length)a.aiDisplay=e.slice();else{if(h||
c||g.length>b.length||0!==b.indexOf(g)||a.bSorted)a.aiDisplay=e.slice();b=a.aiDisplay;for(c=b.length-1;0<=c;c--)d.test(a.aoData[b[c]]._sFilterRow)||b.splice(c,1)}}function pb(a,c,d,g){a=c?a:gb(a);d&&(a="^(?=.*?"+b.map(a.match(/"[^"]+"|[^ ]+/g)||"",function(a){if('"'===a.charAt(0)){var b=a.match(/^"(.*)"$/);a=b?b[1]:a}return a.replace('"',"")}).join(")(?=.*?")+").*$");return new RegExp(a,g?"i":"")}function gb(a){return a.replace(Ab,"\\$1")}function La(a){var b=a.aoColumns,c,d,g,e,h,f,n,l,p=z.ext.type.search;
c=!1;d=0;for(e=a.aoData.length;d<e;d++)if(l=a.aoData[d],!l._aFilterData){f=[];g=0;for(h=b.length;g<h;g++)c=b[g],c.bSearchable?(n=F(a,d,g,"filter"),p[c.sType]&&(n=p[c.sType](n)),null===n&&(n=""),"string"!==typeof n&&n.toString&&(n=n.toString())):n="",n.indexOf&&-1!==n.indexOf("&")&&(ab.innerHTML=n,n=Wb?ab.textContent:ab.innerText),n.replace&&(n=n.replace(/[\r\n]/g,"")),f.push(n);l._aFilterData=f;l._sFilterRow=f.join("  ");c=!0}return c}function rb(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,
caseInsensitive:a.bCaseInsensitive}}function sb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function Eb(a){var c=a.sTableId,d=a.aanFeatures.i,g=b("<div/>",{"class":a.oClasses.sInfo,id:d?null:c+"_info"});d||(a.aoDrawCallback.push({fn:Wa,sName:"information"}),g.attr("role","status").attr("aria-live","polite"),b(a.nTable).attr("aria-describedby",c+"_info"));return g[0]}function Wa(a){var c=a.aanFeatures.i;if(0!==c.length){var d=a.oLanguage,g=a._iDisplayStart+
1,e=a.fnDisplayEnd(),h=a.fnRecordsTotal(),f=a.fnRecordsDisplay(),n=f?d.sInfo:d.sInfoEmpty;f!==h&&(n+=" "+d.sInfoFiltered);n+=d.sInfoPostFix;n=Jb(a,n);d=d.fnInfoCallback;null!==d&&(n=d.call(a.oInstance,a,g,e,h,f,n));b(c).html(n)}}function Jb(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,g=a._iDisplayLength,e=a.fnRecordsDisplay(),h=-1===g;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,
e)).replace(/_PAGE_/g,c.call(a,h?1:Math.ceil(d/g))).replace(/_PAGES_/g,c.call(a,h?1:Math.ceil(e/g)))}function Xa(a){var b,c,d=a.iInitDisplayStart,g=a.aoColumns,e;c=a.oFeatures;if(a.bInitialised){la(a);na(a);pa(a,a.aoHeader);pa(a,a.aoFooter);V(a,!0);c.bAutoWidth&&wa(a);b=0;for(c=g.length;b<c;b++)e=g[b],e.sWidth&&(e.nTh.style.width=Q(e.sWidth));W(a);g=ea(a);"ssp"!=g&&("ajax"==g?Ba(a,[],function(c){var g=Ca(a,c);for(b=0;b<g.length;b++)D(a,g[b]);a.iInitDisplayStart=d;W(a);V(a,!1);hb(a,c)},a):(V(a,!1),
hb(a)))}else setTimeout(function(){Xa(a)},200)}function hb(a,b){a._bInitComplete=!0;b&&n(a);ca(a,"aoInitComplete","init",[a,b])}function ua(a,b){var c=parseInt(b,10);a._iDisplayLength=c;yb(a);ca(a,null,"length",[a,c])}function ob(a){for(var c=a.oClasses,d=a.sTableId,g=a.aLengthMenu,e=b.isArray(g[0]),h=e?g[0]:g,g=e?g[1]:g,e=b("<select/>",{name:d+"_length","aria-controls":d,"class":c.sLengthSelect}),f=0,n=h.length;f<n;f++)e[0][f]=new Option(g[f],h[f]);var l=b("<div><label/></div>").addClass(c.sLength);
a.aanFeatures.l||(l[0].id=d+"_length");l.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",e[0].outerHTML));b("select",l).val(a._iDisplayLength).bind("change.DT",function(c){ua(a,b(this).val());ra(a)});b(a.nTable).bind("length.dt.DT",function(c,d,g){a===d&&b("select",l).val(g)});return l[0]}function Ya(a){var c=a.sPaginationType,d=z.ext.pager[c],g="function"===typeof d,e=function(a){ra(a)},c=b("<div/>").addClass(a.oClasses.sPaging+c)[0],h=a.aanFeatures;g||d.fnInit(a,c,e);h.p||(c.id=a.sTableId+
"_paginate",a.aoDrawCallback.push({fn:function(a){if(g){var b=a._iDisplayStart,c=a._iDisplayLength,f=a.fnRecordsDisplay(),r=-1===c,b=r?0:Math.ceil(b/c),c=r?1:Math.ceil(f/c),f=d(b,c),n,r=0;for(n=h.p.length;r<n;r++)jb(a,"pageButton")(a,h.p[r],r,f,b,c)}else d.fnUpdate(a,e)},sName:"pagination"}));return c}function xa(a,b,c){var d=a._iDisplayStart,g=a._iDisplayLength,e=a.fnRecordsDisplay();0===e||-1===g?d=0:"number"===typeof b?(d=b*g,d>e&&(d=0)):"first"==b?d=0:"previous"==b?(d=0<=g?d-g:0,0>d&&(d=0)):"next"==
b?d+g<e&&(d+=g):"last"==b?d=Math.floor((e-1)/g)*g:Ga(a,0,"Unknown paging action: "+b,5);b=a._iDisplayStart!==d;a._iDisplayStart=d;b&&(ca(a,null,"page",[a]),c&&ra(a));return b}function K(a){return b("<div/>",{id:a.aanFeatures.r?null:a.sTableId+"_processing","class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function V(a,c){a.oFeatures.bProcessing&&b(a.aanFeatures.r).css("display",c?"block":"none");ca(a,null,"processing",[a,c])}function Fb(a){var c=b(a.nTable);
c.attr("role","grid");var d=a.oScroll;if(""===d.sX&&""===d.sY)return a.nTable;var g=d.sX,e=d.sY,h=a.oClasses,f=c.children("caption"),n=f.length?f[0]._captionSide:null,l=b(c[0].cloneNode(!1)),p=b(c[0].cloneNode(!1)),m=c.children("tfoot");d.sX&&"100%"===c.attr("width")&&c.removeAttr("width");m.length||(m=null);d=b("<div/>",{"class":h.sScrollWrapper}).append(b("<div/>",{"class":h.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:g?g?Q(g):null:"100%"}).append(b("<div/>",{"class":h.sScrollHeadInner}).css({"box-sizing":"content-box",
width:d.sXInner||"100%"}).append(l.removeAttr("id").css("margin-left",0).append("top"===n?f:null).append(c.children("thead"))))).append(b("<div/>",{"class":h.sScrollBody}).css({overflow:"auto",height:e?Q(e):null,width:g?Q(g):null}).append(c));m&&d.append(b("<div/>",{"class":h.sScrollFoot}).css({overflow:"hidden",border:0,width:g?g?Q(g):null:"100%"}).append(b("<div/>",{"class":h.sScrollFootInner}).append(p.removeAttr("id").css("margin-left",0).append("bottom"===n?f:null).append(c.children("tfoot")))));
var c=d.children(),k=c[0],h=c[1],q=m?c[2]:null;g&&b(h).scroll(function(a){a=this.scrollLeft;k.scrollLeft=a;m&&(q.scrollLeft=a)});a.nScrollHead=k;a.nScrollBody=h;a.nScrollFoot=q;a.aoDrawCallback.push({fn:Sa,sName:"scrolling"});return d[0]}function Sa(a){var c=a.oScroll,g=c.sX,e=c.sXInner,h=c.sY,f=c.iBarWidth,n=b(a.nScrollHead),l=n[0].style,p=n.children("div"),m=p[0].style,k=p.children("table"),p=a.nScrollBody,q=b(p),u=p.style,w=b(a.nScrollFoot).children("div"),A=w.children("table"),t=b(a.nTHead),x=
b(a.nTable),E=x[0],I=E.style,D=a.nTFoot?b(a.nTFoot):null,L=a.oBrowser,J=L.bScrollOversize,G,y,z,F,U,ba=[],S=[],N=[],da,H=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};x.children("thead, tfoot").remove();U=t.clone().prependTo(x);G=t.find("tr");z=U.find("tr");U.find("th, td").removeAttr("tabindex");D&&(F=D.clone().prependTo(x),y=D.find("tr"),F=F.find("tr"));g||(u.width="100%",n[0].style.width="100%");b.each(Ha(a,U),function(b,c){da=
d(a,b);c.style.width=a.aoColumns[da].sWidth});D&&ta(function(a){a.style.width=""},F);c.bCollapse&&""!==h&&(u.height=q[0].offsetHeight+t[0].offsetHeight+"px");n=x.outerWidth();""===g?(I.width="100%",J&&(x.find("tbody").height()>p.offsetHeight||"scroll"==q.css("overflow-y"))&&(I.width=Q(x.outerWidth()-f))):""!==e?I.width=Q(e):n==q.width()&&q.height()<x.height()?(I.width=Q(n-f),x.outerWidth()>n-f&&(I.width=Q(n))):I.width=Q(n);n=x.outerWidth();ta(H,z);ta(function(a){N.push(a.innerHTML);ba.push(Q(b(a).css("width")))},
z);ta(function(a,b){a.style.width=ba[b]},G);b(z).height(0);D&&(ta(H,F),ta(function(a){S.push(Q(b(a).css("width")))},F),ta(function(a,b){a.style.width=S[b]},y),b(F).height(0));ta(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+N[b]+"</div>";a.style.width=ba[b]},z);D&&ta(function(a,b){a.innerHTML="";a.style.width=S[b]},F);x.outerWidth()<n?(y=p.scrollHeight>p.offsetHeight||"scroll"==q.css("overflow-y")?n+f:n,J&&(p.scrollHeight>p.offsetHeight||"scroll"==q.css("overflow-y"))&&
(I.width=Q(y-f)),""!==g&&""===e||Ga(a,1,"Possible column misalignment",6)):y="100%";u.width=Q(y);l.width=Q(y);D&&(a.nScrollFoot.style.width=Q(y));!h&&J&&(u.height=Q(E.offsetHeight+f));h&&c.bCollapse&&(u.height=Q(h),c=g&&E.offsetWidth>p.offsetWidth?f:0,E.offsetHeight<p.offsetHeight&&(u.height=Q(E.offsetHeight+c)));c=x.outerWidth();k[0].style.width=Q(c);m.width=Q(c);k=x.height()>p.clientHeight||"scroll"==q.css("overflow-y");L="padding"+(L.bScrollbarLeft?"Left":"Right");m[L]=k?f+"px":"0px";D&&(A[0].style.width=
Q(c),w[0].style.width=Q(c),w[0].style[L]=k?f+"px":"0px");q.scroll();!a.bSorted&&!a.bFiltered||a._drawHold||(p.scrollTop=0)}function ta(a,b,c){for(var d=0,g=0,e=b.length,h,f;g<e;){h=b[g].firstChild;for(f=c?c[g].firstChild:null;h;)1===h.nodeType&&(c?a(h,f,d):a(h,d),d++),h=h.nextSibling,f=c?f.nextSibling:null;g++}}function wa(a){var c=a.nTable,d=a.aoColumns,g=a.oScroll,e=g.sY,h=g.sX,l=g.sXInner,p=d.length,g=A(a,"bVisible"),m=b("th",a.nTHead),k=c.getAttribute("width"),q=c.parentNode,u=!1,w,t;for(w=0;w<
g.length;w++)t=d[g[w]],null!==t.sWidth&&(t.sWidth=tb(t.sWidthOrig,q),u=!0);if(u||h||e||p!=x(a)||p!=m.length){p=b(c).clone().empty().css("visibility","hidden").removeAttr("id").append(b(a.nTHead).clone(!1)).append(b(a.nTFoot).clone(!1)).append(b("<tbody><tr/></tbody>"));p.find("tfoot th, tfoot td").css("width","");var E=p.find("tbody tr"),m=Ha(a,p.find("thead")[0]);for(w=0;w<g.length;w++)t=d[g[w]],m[w].style.width=null!==t.sWidthOrig&&""!==t.sWidthOrig?Q(t.sWidthOrig):"";if(a.aoData.length)for(w=0;w<
g.length;w++)u=g[w],t=d[u],b(Lb(a,u)).clone(!1).append(t.sContentPadding).appendTo(E);p.appendTo(q);h&&l?p.width(l):h?(p.css("width","auto"),p.width()<q.offsetWidth&&p.width(q.offsetWidth)):e?p.width(q.offsetWidth):k&&p.width(k);Kb(a,p[0]);if(h){for(w=l=0;w<g.length;w++)t=d[g[w]],e=b(m[w]).outerWidth(),l+=null===t.sWidthOrig?e:parseInt(t.sWidth,10)+e-b(m[w]).width();p.width(Q(l));c.style.width=Q(l)}for(w=0;w<g.length;w++)if(t=d[g[w]],e=b(m[w]).width())t.sWidth=Q(e);c.style.width=Q(p.css("width"));
p.remove()}else for(w=0;w<p;w++)d[w].sWidth=Q(m.eq(w).width());k&&(c.style.width=Q(k));!k&&!h||a._reszEvt||(b(f).bind("resize.DT-"+a.sInstance,ja(function(){n(a)})),a._reszEvt=!0)}function ja(a,b){var d=b!==c?b:200,g,e;return function(){var b=this,h=+new Date,f=arguments;g&&h<g+d?(clearTimeout(e),e=setTimeout(function(){g=c;a.apply(b,f)},d)):g?(g=h,a.apply(b,f)):g=h}}function tb(a,c){if(!a)return 0;var d=b("<div/>").css("width",Q(a)).appendTo(c||k.body),g=d[0].offsetWidth;d.remove();return g}function Kb(a,
c){var d=a.oScroll;if(d.sX||d.sY)d=d.sX?0:d.iBarWidth,c.style.width=Q(b(c).outerWidth()-d)}function Lb(a,c){var d=ub(a,c);if(0>d)return null;var g=a.aoData[d];return g.nTr?g.anCells[c]:b("<td/>").html(F(a,d,c,"display"))[0]}function ub(a,b){for(var c,d=-1,g=-1,e=0,h=a.aoData.length;e<h;e++)c=F(a,e,b,"display")+"",c=c.replace(Xb,""),c.length>d&&(d=c.length,g=e);return g}function Q(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function vb(){if(!z.__scrollbarWidth){var a=
b("<p/>").css({width:"100%",height:200,padding:0})[0],c=b("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(a).appendTo("body"),d=a.offsetWidth;c.css("overflow","scroll");a=a.offsetWidth;d===a&&(a=c[0].clientWidth);c.remove();z.__scrollbarWidth=d-a}return z.__scrollbarWidth}function Ma(a){var d,g,e=[],h=a.aoColumns,f,n,l,p;d=a.aaSortingFixed;g=b.isPlainObject(d);var m=[];f=function(a){a.length&&!b.isArray(a[0])?m.push(a):
m.push.apply(m,a)};b.isArray(d)&&f(d);g&&d.pre&&f(d.pre);f(a.aaSorting);g&&d.post&&f(d.post);for(a=0;a<m.length;a++)for(p=m[a][0],f=h[p].aDataSort,d=0,g=f.length;d<g;d++)n=f[d],l=h[n].sType||"string",m[a]._idx===c&&(m[a]._idx=b.inArray(m[a][1],h[n].asSorting)),e.push({src:p,col:n,dir:m[a][1],index:m[a]._idx,type:l,formatter:z.ext.type.order[l+"-pre"]});return e}function Mb(a){var b,c,d=[],g=z.ext.type.order,e=a.aoData,h=0,f,n=a.aiDisplayMaster,l;E(a);l=Ma(a);b=0;for(c=l.length;b<c;b++)f=l[b],f.formatter&&
h++,Ob(a,f.col);if("ssp"!=ea(a)&&0!==l.length){b=0;for(c=n.length;b<c;b++)d[n[b]]=b;h===l.length?n.sort(function(a,b){var c,g,h,f,n=l.length,r=e[a]._aSortData,p=e[b]._aSortData;for(h=0;h<n;h++)if(f=l[h],c=r[f.col],g=p[f.col],c=c<g?-1:c>g?1:0,0!==c)return"asc"===f.dir?c:-c;c=d[a];g=d[b];return c<g?-1:c>g?1:0}):n.sort(function(a,b){var c,h,f,n,r=l.length,p=e[a]._aSortData,m=e[b]._aSortData;for(f=0;f<r;f++)if(n=l[f],c=p[n.col],h=m[n.col],n=g[n.type+"-"+n.dir]||g["string-"+n.dir],c=n(c,h),0!==c)return c;
c=d[a];h=d[b];return c<h?-1:c>h?1:0})}a.bSorted=!0}function Nb(a){var b,c,d=a.aoColumns,g=Ma(a);a=a.oLanguage.oAria;for(var e=0,h=d.length;e<h;e++){c=d[e];var f=c.asSorting;b=c.sTitle.replace(/<.*?>/g,"");var n=c.nTh;n.removeAttribute("aria-sort");c.bSortable&&(0<g.length&&g[0].col==e?(n.setAttribute("aria-sort","asc"==g[0].dir?"ascending":"descending"),c=f[g[0].index+1]||f[0]):c=f[0],b+="asc"===c?a.sSortAscending:a.sSortDescending);n.setAttribute("aria-label",b)}}function wb(a,d,g,e){var h=a.aaSorting,
f=a.aoColumns[d].asSorting,n=function(a,d){var g=a._idx;g===c&&(g=b.inArray(a[1],f));return g+1<f.length?g+1:d?null:0};"number"===typeof h[0]&&(h=a.aaSorting=[h]);g&&a.oFeatures.bSortMulti?(g=b.inArray(d,va(h,"0")),-1!==g?(d=n(h[g],!0),null===d?h.splice(g,1):(h[g][1]=f[d],h[g]._idx=d)):(h.push([d,f[0],0]),h[h.length-1]._idx=0)):h.length&&h[0][0]==d?(d=n(h[0]),h.length=1,h[0][1]=f[d],h[0]._idx=d):(h.length=0,h.push([d,f[0]]),h[0]._idx=0);W(a);"function"==typeof e&&e(a)}function ib(a,b,c,d){var g=a.aoColumns[c];
xb(b,{},function(b){!1!==g.bSortable&&(a.oFeatures.bProcessing?(V(a,!0),setTimeout(function(){wb(a,c,b.shiftKey,d);"ssp"!==ea(a)&&V(a,!1)},0)):wb(a,c,b.shiftKey,d))})}function db(a){var c=a.aLastSort,d=a.oClasses.sSortColumn,g=Ma(a),e=a.oFeatures,h,f;if(e.bSort&&e.bSortClasses){e=0;for(h=c.length;e<h;e++)f=c[e].src,b(va(a.aoData,"anCells",f)).removeClass(d+(2>e?e+1:3));e=0;for(h=g.length;e<h;e++)f=g[e].src,b(va(a.aoData,"anCells",f)).addClass(d+(2>e?e+1:3))}a.aLastSort=g}function Ob(a,b){var c=a.aoColumns[b],
d=z.ext.order[c.sSortDataType],g;d&&(g=d.call(a.oInstance,a,b,w(a,b)));for(var e,h=z.ext.type.order[c.sType+"-pre"],f=0,n=a.aoData.length;f<n;f++)if(c=a.aoData[f],c._aSortData||(c._aSortData=[]),!c._aSortData[b]||d)e=d?g[f]:F(a,f,b,"sort"),c._aSortData[b]=h?h(e):e}function ma(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var c={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:b.extend(!0,[],a.aaSorting),search:rb(a.oPreviousSearch),columns:b.map(a.aoColumns,function(b,c){return{visible:b.bVisible,
search:rb(a.aoPreSearchCols[c])}})};ca(a,"aoStateSaveParams","stateSaveParams",[a,c]);a.oSavedState=c;a.fnStateSaveCallback.call(a.oInstance,a,c)}}function Ua(a,c){var d,g,e=a.aoColumns;if(a.oFeatures.bStateSave){var h=a.fnStateLoadCallback.call(a.oInstance,a);if(h&&h.time&&(d=ca(a,"aoStateLoadParams","stateLoadParams",[a,h]),-1===b.inArray(!1,d)&&(d=a.iStateDuration,!(0<d&&h.time<+new Date-1E3*d)&&e.length===h.columns.length))){a.oLoadedState=b.extend(!0,{},h);a._iDisplayStart=h.start;a.iInitDisplayStart=
h.start;a._iDisplayLength=h.length;a.aaSorting=[];b.each(h.order,function(b,c){a.aaSorting.push(c[0]>=e.length?[0,c[1]]:c)});b.extend(a.oPreviousSearch,sb(h.search));d=0;for(g=h.columns.length;d<g;d++){var f=h.columns[d];e[d].bVisible=f.visible;b.extend(a.aoPreSearchCols[d],sb(f.search))}ca(a,"aoStateLoaded","stateLoaded",[a,h])}}}function Ta(a){var c=z.settings;a=b.inArray(a,va(c,"nTable"));return-1!==a?c[a]:null}function Ga(a,b,c,d){c="DataTables warning: "+(null!==a?"table id="+a.sTableId+" - ":
"")+c;d&&(c+=". For more information about this error, please see http://datatables.net/tn/"+d);if(b)f.console&&console.log&&console.log(c);else if(a=z.ext,"alert"==(a.sErrMode||a.errMode))alert(c);else throw Error(c);}function qa(a,d,g,e){b.isArray(g)?b.each(g,function(c,g){b.isArray(g)?qa(a,d,g[0],g[1]):qa(a,d,g)}):(e===c&&(e=g),d[g]!==c&&(a[e]=d[g]))}function Va(a,c,d){var g,e;for(e in c)c.hasOwnProperty(e)&&(g=c[e],b.isPlainObject(g)?(b.isPlainObject(a[e])||(a[e]={}),b.extend(!0,a[e],g)):d&&"data"!==
e&&"aaData"!==e&&b.isArray(g)?a[e]=g.slice():a[e]=g);return a}function xb(a,c,d){b(a).bind("click.DT",c,function(b){a.blur();d(b)}).bind("keypress.DT",c,function(a){13===a.which&&(a.preventDefault(),d(a))}).bind("selectstart.DT",function(){return!1})}function ia(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function ca(a,c,d,g){var e=[];c&&(e=b.map(a[c].slice().reverse(),function(b,c){return b.fn.apply(a.oInstance,g)}));null!==d&&b(a.nTable).trigger(d+".dt",g);return e}function yb(a){var b=a._iDisplayStart,
c=a.fnDisplayEnd(),d=a._iDisplayLength;b>=c&&(b=c-d);b-=b%d;if(-1===d||0>b)b=0;a._iDisplayStart=b}function jb(a,c){var d=a.renderer,g=z.ext.renderer[c];return b.isPlainObject(d)&&d[c]?g[d[c]]||g._:"string"===typeof d?g[d]||g._:g._}function ea(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function ka(a,b){var c=[],c=ac.numbers_length,d=Math.floor(c/2);b<=c?c=Oa(0,b):a<=d?(c=Oa(0,c-2),c.push("ellipsis"),c.push(b-1)):(a>=b-1-d?c=Oa(b-(c-2),b):(c=Oa(a-1,a+2),c.push("ellipsis"),
c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0));c.DT_el="span";return c}function Za(a){b.each({num:function(b){return Gb(b,a)},"num-fmt":function(b){return Gb(b,a,ya)},"html-num":function(b){return Gb(b,a,Qa)},"html-num-fmt":function(b){return Gb(b,a,Qa,ya)}},function(b,c){aa.type.order[b+a+"-pre"]=c;b.match(/^html\-/)&&(aa.type.search[b+a]=aa.type.search.html)})}function Pb(a){return function(){var b=[Ta(this[z.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return z.ext.internal[a].apply(this,
b)}}var z,aa,R,H,Y,Na={},Qb=/[\r\n]/g,Qa=/<.*?>/g,Vb=/^[\w\+\-]/,zb=/[\w\+\-]$/,Ab=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\|\$|\^|\-)/g,ya=/[',$\u00a3\u20ac\u00a5%\u2009\u202F]/g,ga=function(a){return a&&!0!==a&&"-"!==a?!1:!0},Rb=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},Bb=function(a,b){Na[b]||(Na[b]=new RegExp(gb(b),"g"));return"string"===typeof a&&"."!==b?a.replace(/\./g,"").replace(Na[b],"."):a},Cb=function(a,b,c){var d="string"===typeof a;b&&d&&(a=Bb(a,b));c&&d&&(a=
a.replace(ya,""));return ga(a)||!isNaN(parseFloat(a))&&isFinite(a)},Sb=function(a,b,c){return ga(a)?!0:ga(a)||"string"===typeof a?Cb(a.replace(Qa,""),b,c)?!0:null:null},va=function(a,b,d){var g=[],e=0,h=a.length;if(d!==c)for(;e<h;e++)a[e]&&a[e][b]&&g.push(a[e][b][d]);else for(;e<h;e++)a[e]&&g.push(a[e][b]);return g},Ra=function(a,b,d,g){var e=[],h=0,f=b.length;if(g!==c)for(;h<f;h++)a[b[h]][d]&&e.push(a[b[h]][d][g]);else for(;h<f;h++)e.push(a[b[h]][d]);return e},Oa=function(a,b){var d=[],g;b===c?(b=
0,g=a):(g=b,b=a);for(var e=b;e<g;e++)d.push(e);return d},eb=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},kb=function(a){var b=[],c,d,g=a.length,e,h=0;d=0;a:for(;d<g;d++){c=a[d];for(e=0;e<h;e++)if(b[e]===c)continue a;b.push(c);h++}return b},ha=function(a,b,d){a[b]!==c&&(a[d]=a[b])},$a=/\[.*?\]$/,Pa=/\(\)$/,ab=b("<div>")[0],Wb=ab.textContent!==c,Xb=/<.*?>/g;z=function(d){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,b){return this.api(!0).rows(a,
b).data()};this.api=function(a){return a?new R(Ta(this[aa.iApiIndex])):new R(this)};this.fnAddData=function(a,d){var g=this.api(!0),e=b.isArray(a)&&(b.isArray(a[0])||b.isPlainObject(a[0]))?g.rows.add(a):g.row.add(a);(d===c||d)&&g.draw();return e.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),d=b.settings()[0],g=d.oScroll;a===c||a?b.draw(!1):""===g.sX&&""===g.sY||Sa(d)};this.fnClearTable=function(a){var b=this.api(!0).clear();(a===c||a)&&b.draw()};this.fnClose=
function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,b,d){var g=this.api(!0);a=g.rows(a);var e=a.settings()[0],h=e.aoData[a[0][0]];a.remove();b&&b.call(this,e,h);(d===c||d)&&g.draw();return h};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(!a)};this.fnFilter=function(a,b,d,g,e,h){e=this.api(!0);null===b||b===c?e.search(a,d,g,h):e.column(b).search(a,d,g,h);e.draw()};this.fnGetData=function(a,b){var d=this.api(!0);if(a!==c){var g=a.nodeName?
a.nodeName.toLowerCase():"";return b!==c||"td"==g||"th"==g?d.cell(a,b).data():d.row(a).data()||null}return d.data().toArray()};this.fnGetNodes=function(a){var b=this.api(!0);return a!==c?b.row(a).node():b.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(a=b.cell(a).index(),[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};this.fnOpen=
function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};this.fnPageChange=function(a,b){var d=this.api(!0).page(a);(b===c||b)&&d.draw(!1)};this.fnSetColumnVis=function(a,b,d){a=this.api(!0).column(a).visible(b);(d===c||d)&&a.columns.adjust().draw()};this.fnSettings=function(){return Ta(this[aa.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,b,d,g,e){var h=this.api(!0);
d===c||null===d?h.row(b).data(a):h.cell(b,d).data(a);(e===c||e)&&h.columns.adjust();(g===c||g)&&h.draw();return 0};this.fnVersionCheck=aa.fnVersionCheck;var f=this,n=d===c,p=this.length;n&&(d={});this.oApi=this.internal=aa.internal;for(var m in z.ext.internal)m&&(this[m]=Pb(m));this.each(function(){var m={},m=1<p?Va(m,d,!0):d,k=0,w,t=this.getAttribute("id"),A=!1,x=z.defaults;if("table"!=this.nodeName.toLowerCase())Ga(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{u(x);e(x.column);
l(x,x,!0);l(x.column,x.column,!0);l(x,m);var E=z.settings,k=0;for(w=E.length;k<w;k++){if(E[k].nTable==this){w=m.bRetrieve!==c?m.bRetrieve:x.bRetrieve;if(n||w)return E[k].oInstance;if(m.bDestroy!==c?m.bDestroy:x.bDestroy){E[k].oInstance.fnDestroy();break}else{Ga(E[k],0,"Cannot reinitialise DataTable",3);return}}if(E[k].sTableId==this.id){E.splice(k,1);break}}if(null===t||""===t)this.id=t="DataTables_Table_"+z.ext._unique++;var B=b.extend(!0,{},z.models.oSettings,{nTable:this,oApi:f.internal,oInit:m,
sDestroyWidth:b(this)[0].style.width,sInstance:t,sTableId:t});E.push(B);B.oInstance=1===f.length?f:b(this).dataTable();u(m);m.oLanguage&&h(m.oLanguage);m.aLengthMenu&&!m.iDisplayLength&&(m.iDisplayLength=b.isArray(m.aLengthMenu[0])?m.aLengthMenu[0][0]:m.aLengthMenu[0]);m=Va(b.extend(!0,{},x),m);qa(B.oFeatures,m,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));qa(B,m,["asStripeClasses","ajax","fnServerData","fnFormatNumber",
"sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);qa(B.oScroll,m,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);
qa(B.oLanguage,m,"fnInfoCallback");ia(B,"aoDrawCallback",m.fnDrawCallback,"user");ia(B,"aoServerParams",m.fnServerParams,"user");ia(B,"aoStateSaveParams",m.fnStateSaveParams,"user");ia(B,"aoStateLoadParams",m.fnStateLoadParams,"user");ia(B,"aoStateLoaded",m.fnStateLoaded,"user");ia(B,"aoRowCallback",m.fnRowCallback,"user");ia(B,"aoRowCreatedCallback",m.fnCreatedRow,"user");ia(B,"aoHeaderCallback",m.fnHeaderCallback,"user");ia(B,"aoFooterCallback",m.fnFooterCallback,"user");ia(B,"aoInitComplete",m.fnInitComplete,
"user");ia(B,"aoPreDrawCallback",m.fnPreDrawCallback,"user");t=B.oClasses;m.bJQueryUI?(b.extend(t,z.ext.oJUIClasses,m.oClasses),m.sDom===x.sDom&&"lfrtip"===x.sDom&&(B.sDom='<"H"lfr>t<"F"ip>'),B.renderer)?b.isPlainObject(B.renderer)&&!B.renderer.header&&(B.renderer.header="jqueryui"):B.renderer="jqueryui":b.extend(t,z.ext.classes,m.oClasses);b(this).addClass(t.sTable);if(""!==B.oScroll.sX||""!==B.oScroll.sY)B.oScroll.iBarWidth=vb();!0===B.oScroll.sX&&(B.oScroll.sX="100%");B.iInitDisplayStart===c&&
(B.iInitDisplayStart=m.iDisplayStart,B._iDisplayStart=m.iDisplayStart);null!==m.iDeferLoading&&(B.bDeferLoading=!0,k=b.isArray(m.iDeferLoading),B._iRecordsDisplay=k?m.iDeferLoading[0]:m.iDeferLoading,B._iRecordsTotal=k?m.iDeferLoading[1]:m.iDeferLoading);var L=B.oLanguage;b.extend(!0,L,m.oLanguage);""!==L.sUrl&&(b.ajax({dataType:"json",url:L.sUrl,success:function(a){h(a);l(x.oLanguage,a);b.extend(!0,L,a);Xa(B)},error:function(){Xa(B)}}),A=!0);null===m.asStripeClasses&&(B.asStripeClasses=[t.sStripeOdd,
t.sStripeEven]);var k=B.asStripeClasses,G=b("tbody tr:eq(0)",this);-1!==b.inArray(!0,b.map(k,function(a,b){return G.hasClass(a)}))&&(b("tbody tr",this).removeClass(k.join(" ")),B.asDestroyStripes=k.slice());var E=[],y,k=this.getElementsByTagName("thead");0!==k.length&&(fa(B.aoHeader,k[0]),E=Ha(B));if(null===m.aoColumns)for(y=[],k=0,w=E.length;k<w;k++)y.push(null);else y=m.aoColumns;k=0;for(w=y.length;k<w;k++)a(B,E?E[k]:null);I(B,m.aoColumnDefs,y,function(a,b){g(B,a,b)});if(G.length){var F=function(a,
b){return a.getAttribute("data-"+b)?b:null};b.each(oa(B,G[0]).cells,function(a,b){var d=B.aoColumns[a];if(d.mData===a){var e=F(b,"sort")||F(b,"order"),h=F(b,"filter")||F(b,"search");if(null!==e||null!==h)d.mData={_:a+".display",sort:null!==e?a+".@data-"+e:c,type:null!==e?a+".@data-"+e:c,filter:null!==h?a+".@data-"+h:c},g(B,a)}})}var U=B.oFeatures;m.bStateSave&&(U.bStateSave=!0,Ua(B,m),ia(B,"aoDrawCallback",ma,"state_save"));if(m.aaSorting===c)for(E=B.aaSorting,k=0,w=E.length;k<w;k++)E[k][1]=B.aoColumns[k].asSorting[0];
db(B);U.bSort&&ia(B,"aoDrawCallback",function(){if(B.bSorted){var a=Ma(B),c={};b.each(a,function(a,b){c[b.src]=b.dir});ca(B,null,"order",[B,a,c]);Nb(B)}});ia(B,"aoDrawCallback",function(){(B.bSorted||"ssp"===ea(B)||U.bDeferRender)&&db(B)},"sc");q(B);k=b(this).children("caption").each(function(){this._captionSide=b(this).css("caption-side")});w=b(this).children("thead");0===w.length&&(w=b("<thead/>").appendTo(this));B.nTHead=w[0];w=b(this).children("tbody");0===w.length&&(w=b("<tbody/>").appendTo(this));
B.nTBody=w[0];w=b(this).children("tfoot");0===w.length&&0<k.length&&(""!==B.oScroll.sX||""!==B.oScroll.sY)&&(w=b("<tfoot/>").appendTo(this));0===w.length||0===w.children().length?b(this).addClass(t.sNoFooter):0<w.length&&(B.nTFoot=w[0],fa(B.aoFooter,B.nTFoot));if(m.aaData)for(k=0;k<m.aaData.length;k++)D(B,m.aaData[k]);else(B.bDeferLoading||"dom"==ea(B))&&J(B,b(B.nTBody).children("tr"));B.aiDisplay=B.aiDisplayMaster.slice();B.bInitialised=!0;!1===A&&Xa(B)}});f=null;return this};var Tb=[],X=Array.prototype,
Yb=function(a){var c,d,g=z.settings,e=b.map(g,function(a,b){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&"table"===a.nodeName.toLowerCase())return c=b.inArray(a,e),-1!==c?[g[c]]:null;if(a&&"function"===typeof a.settings)return a.settings().toArray();"string"===typeof a?d=b(a):a instanceof b&&(d=a)}else return[];if(d)return d.map(function(a){c=b.inArray(this,e);return-1!==c?g[c]:null}).toArray()};R=function(a,c){if(!this instanceof R)throw"DT API must be constructed as a new object";
var d=[],g=function(a){(a=Yb(a))&&d.push.apply(d,a)};if(b.isArray(a))for(var e=0,h=a.length;e<h;e++)g(a[e]);else g(a);this.context=kb(d);c&&this.push.apply(this,c.toArray?c.toArray():c);this.selector={rows:null,cols:null,opts:null};R.extend(this,this,Tb)};z.Api=R;R.prototype={concat:X.concat,context:[],each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new R(b[a],this[a]):null},filter:function(a){var b=[];
if(X.filter)b=X.filter.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new R(this.context,b)},flatten:function(){var a=[];return new R(this.context,a.concat.apply(a,this.toArray()))},join:X.join,indexOf:X.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,d,g){var e=[],h,f,n,l,p,m=this.context,k,q,u=this.selector;"string"===typeof a&&(g=d,d=b,b=a,a=!1);f=0;for(n=m.length;f<
n;f++){var w=new R(m[f]);if("table"===b)h=d.call(w,m[f],f),h!==c&&e.push(h);else if("columns"===b||"rows"===b)h=d.call(w,m[f],this[f],f),h!==c&&e.push(h);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b)for(q=this[f],"column-rows"===b&&(k=nb(m[f],u.opts)),l=0,p=q.length;l<p;l++)h=q[l],h="cell"===b?d.call(w,m[f],h.row,h.column,f,l):d.call(w,m[f],h,f,l,k),h!==c&&e.push(h)}return e.length||g?(a=new R(m,a?e.concat.apply([],e):e),b=a.selector,b.rows=u.rows,b.cols=u.cols,b.opts=u.opts,a):
this},lastIndexOf:X.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(X.map)b=X.map.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new R(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:X.pop,push:X.push,reduce:X.reduce||function(a,b){return t(this,a,b,0,this.length,1)},reduceRight:X.reduceRight||function(a,b){return t(this,a,b,this.length-1,-1,
-1)},reverse:X.reverse,selector:null,shift:X.shift,sort:X.sort,splice:X.splice,toArray:function(){return X.slice.call(this)},to$:function(){return b(this)},toJQuery:function(){return b(this)},unique:function(){return new R(this.context,kb(this))},unshift:X.unshift};R.extend=function(a,c,d){if(c&&(c instanceof R||c.__dt_wrapper)){var g,e,h,f=function(a,b,c){return function(){var d=b.apply(a,arguments);R.extend(d,d,c.methodExt);return d}};g=0;for(e=d.length;g<e;g++)h=d[g],c[h.name]="function"===typeof h.val?
f(a,h.val,h):b.isPlainObject(h.val)?{}:h.val,c[h.name].__dt_wrapper=!0,R.extend(a,c[h.name],h.propExt)}};R.register=H=function(a,c){if(b.isArray(a))for(var d=0,g=a.length;d<g;d++)R.register(a[d],c);else for(var e=a.split("."),h=Tb,f,n,d=0,g=e.length;d<g;d++){f=(n=-1!==e[d].indexOf("()"))?e[d].replace("()",""):e[d];var l;a:{l=0;for(var p=h.length;l<p;l++)if(h[l].name===f){l=h[l];break a}l=null}l||(l={name:f,val:{},methodExt:[],propExt:[]},h.push(l));d===g-1?l.val=c:h=n?l.methodExt:l.propExt}};R.registerPlural=
Y=function(a,d,g){R.register(a,g);R.register(d,function(){var a=g.apply(this,arguments);return a===this?this:a instanceof R?a.length?b.isArray(a[0])?new R(a.context,a[0]):a[0]:c:a})};var bb=function(a,c){if("number"===typeof a)return[c[a]];var d=b.map(c,function(a,b){return a.nTable});return b(d).filter(a).map(function(a){a=b.inArray(this,d);return c[a]}).toArray()};H("tables()",function(a){return a?new R(bb(a,this.context)):this});H("table()",function(a){a=this.tables(a);var b=a.context;return b.length?
new R(b[0]):a});Y("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});Y("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody},1)});Y("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});Y("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});Y("tables().containers()","table().container()",
function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});H("draw()",function(a){return this.iterator("table",function(b){W(b,!1===a)})});H("page()",function(a){return a===c?this.page.info().page:this.iterator("table",function(b){xa(b,a)})});H("page.info()",function(a){if(0===this.context.length)return c;a=this.context[0];var b=a._iDisplayStart,d=a._iDisplayLength,g=a.fnRecordsDisplay(),e=-1===d;return{page:e?0:Math.floor(b/d),pages:e?1:Math.ceil(g/d),start:b,end:a.fnDisplayEnd(),
length:d,recordsTotal:a.fnRecordsTotal(),recordsDisplay:g}});H("page.len()",function(a){return a===c?0!==this.context.length?this.context[0]._iDisplayLength:c:this.iterator("table",function(b){ua(b,a)})});var Db=function(a,b,c){"ssp"==ea(a)?W(a,b):(V(a,!0),Ba(a,[],function(c){U(a);c=Ca(a,c);for(var d=0,g=c.length;d<g;d++)D(a,c[d]);W(a,b);V(a,!1)}));if(c){var d=new R(a);d.one("draw",function(){c(d.ajax.json())})}};H("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});H("ajax.params()",
function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});H("ajax.reload()",function(a,b){return this.iterator("table",function(c){Db(c,!1===b,a)})});H("ajax.url()",function(a){var d=this.context;if(a===c){if(0===d.length)return c;d=d[0];return d.ajax?b.isPlainObject(d.ajax)?d.ajax.url:d.ajax:d.sAjaxSource}return this.iterator("table",function(c){b.isPlainObject(c.ajax)?c.ajax.url=a:c.ajax=a})});H("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Db(c,!1===b,a)})});
var cb=function(a,d){var g=[],e,h,f,n,l,p;e=typeof a;a&&"string"!==e&&"function"!==e&&a.length!==c||(a=[a]);f=0;for(n=a.length;f<n;f++)for(h=a[f]&&a[f].split?a[f].split(","):[a[f]],l=0,p=h.length;l<p;l++)(e=d("string"===typeof h[l]?b.trim(h[l]):h[l]))&&e.length&&g.push.apply(g,e);return g},lb=function(a){a||(a={});a.filter&&!a.search&&(a.search=a.filter);return{search:a.search||"none",order:a.order||"current",page:a.page||"all"}},mb=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=
a[b],a.length=1,a.context=[a.context[b]],a;a.length=0;return a},nb=function(a,c){var d,g,e,h=[],f=a.aiDisplay;d=a.aiDisplayMaster;var n=c.search;g=c.order;e=c.page;if("ssp"==ea(a))return"removed"===n?[]:Oa(0,d.length);if("current"==e)for(d=a._iDisplayStart,g=a.fnDisplayEnd();d<g;d++)h.push(f[d]);else if("current"==g||"applied"==g)h="none"==n?d.slice():"applied"==n?f.slice():b.map(d,function(a,c){return-1===b.inArray(a,f)?a:null});else if("index"==g||"original"==g)for(d=0,g=a.aoData.length;d<g;d++)"none"==
n?h.push(d):(e=b.inArray(d,f),(-1===e&&"removed"==n||0<=e&&"applied"==n)&&h.push(d));return h},Zb=function(a,c,d){return cb(c,function(c){var g=Rb(c);if(null!==g&&!d)return[g];var e=nb(a,d);if(null!==g&&-1!==b.inArray(g,e))return[g];if(!c)return e;if("function"===typeof c)return b.map(e,function(b){var d=a.aoData[b];return c(b,d._aData,d.nTr)?b:null});g=eb(Ra(a.aoData,e,"nTr"));return c.nodeName&&-1!==b.inArray(c,g)?[c._DT_RowIndex]:b(g).filter(c).map(function(){return this._DT_RowIndex}).toArray()})};
H("rows()",function(a,d){a===c?a="":b.isPlainObject(a)&&(d=a,a="");d=lb(d);var g=this.iterator("table",function(b){return Zb(b,a,d)},1);g.selector.rows=a;g.selector.opts=d;return g});H("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||c},1)});H("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return Ra(a.aoData,b,"_aData")},1)});Y("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var d=b.aoData[c];
return"search"===a?d._aFilterData:d._aSortData},1)});Y("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){da(b,c,a)})});Y("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b},1)});Y("rows().remove()","row().remove()",function(){var a=this;return this.iterator("row",function(c,d,g){var e=c.aoData;e.splice(d,1);for(var h=0,f=e.length;h<f;h++)null!==e[h].nTr&&(e[h].nTr._DT_RowIndex=h);b.inArray(d,c.aiDisplay);ba(c.aiDisplayMaster,
d);ba(c.aiDisplay,d);ba(a[g],d,!1);yb(c)})});H("rows.add()",function(a){var b=this.iterator("table",function(b){var c,d,g,e=[];d=0;for(g=a.length;d<g;d++)c=a[d],c.nodeName&&"TR"===c.nodeName.toUpperCase()?e.push(J(b,c)[0]):e.push(D(b,c));return e},1),c=this.rows(-1);c.pop();c.push.apply(c,b.toArray());return c});H("row()",function(a,b){return mb(this.rows(a,b))});H("row().data()",function(a){var b=this.context;if(a===c)return b.length&&this.length?b[0].aoData[this[0]]._aData:c;b[0].aoData[this[0]]._aData=
a;da(b[0],this[0],"data");return this});H("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});H("row.add()",function(a){a instanceof b&&a.length&&(a=a[0]);var c=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?J(b,a)[0]:D(b,a)});return this.row(c[0])});var y=function(a,c,d,g){var e=[],h=function(c,d){if(c.nodeName&&"tr"===c.nodeName.toLowerCase())e.push(c);else{var g=b("<tr><td/></tr>").addClass(d);b("td",
g).addClass(d).html(c)[0].colSpan=x(a);e.push(g[0])}};if(b.isArray(d)||d instanceof b)for(var f=0,n=d.length;f<n;f++)h(d[f],g);else h(d,g);c._details&&c._details.remove();c._details=b(e);c._detailsShow&&c._details.insertAfter(c.nTr)},Ub=function(a,b){var d=a.context;d.length&&(d=d[0].aoData[b!==c?b:a[0]],d._details&&(d._details.remove(),d._detailsShow=c,d._details=c))},Z=function(a,b){var c=a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];d._details&&((d._detailsShow=b)?d._details.insertAfter(d.nTr):
d._details.detach(),bc(c[0]))}},bc=function(a){var b=new R(a),c=a.aoData;b.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<va(c,"_details").length&&(b.on("draw.dt.DT_details",function(d,g){a===g&&b.rows({page:"current"}).eq(0).each(function(a){a=c[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),b.on("column-visibility.dt.DT_details",function(b,d,g,e){if(a===d)for(d=x(d),g=0,e=c.length;g<e;g++)b=c[g],b._details&&b._details.children("td[colspan]").attr("colspan",
d)}),b.on("destroy.dt.DT_details",function(d,g){if(a===g)for(var e=0,h=c.length;e<h;e++)c[e]._details&&Ub(b,e)}))};H("row().child()",function(a,b){var d=this.context;if(a===c)return d.length&&this.length?d[0].aoData[this[0]]._details:c;!0===a?this.child.show():!1===a?Ub(this):d.length&&this.length&&y(d[0],d[0].aoData[this[0]],a,b);return this});H(["row().child.show()","row().child().show()"],function(a){Z(this,!0);return this});H(["row().child.hide()","row().child().hide()"],function(){Z(this,!1);
return this});H(["row().child.remove()","row().child().remove()"],function(){Ub(this);return this});H("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var cc=/^(.+):(name|visIdx|visible)$/,$b=function(a,b,c,d,g){c=[];d=0;for(var e=g.length;d<e;d++)c.push(F(a,g[d],b));return c},dc=function(a,c,g){var e=a.aoColumns,h=va(e,"sName"),f=va(e,"nTh");return cb(c,function(c){var n=Rb(c);if(""===c)return Oa(e.length);if(null!==n)return[0<=
n?n:e.length+n];if("function"===typeof c){var l=nb(a,g);return b.map(e,function(b,d){return c(d,$b(a,d,0,0,l),f[d])?d:null})}var p="string"===typeof c?c.match(cc):"";if(p)switch(p[2]){case "visIdx":case "visible":n=parseInt(p[1],10);if(0>n){var m=b.map(e,function(a,b){return a.bVisible?b:null});return[m[m.length+n]]}return[d(a,n)];case "name":return b.map(h,function(a,b){return a===p[1]?b:null})}else return b(f).filter(c).map(function(){return b.inArray(this,f)}).toArray()})};H("columns()",function(a,
d){a===c?a="":b.isPlainObject(a)&&(d=a,a="");d=lb(d);var g=this.iterator("table",function(b){return dc(b,a,d)},1);g.selector.cols=a;g.selector.opts=d;return g});Y("columns().header()","column().header()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)});Y("columns().footer()","column().footer()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf},1)});Y("columns().data()","column().data()",function(){return this.iterator("column-rows",
$b,1)});Y("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)});Y("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,d,g,e){return Ra(b.aoData,e,"search"===a?"_aFilterData":"_aSortData",c)},1)});Y("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,d,g){return Ra(a.aoData,g,"anCells",b)},1)});Y("columns().visible()","column().visible()",
function(a,d){return this.iterator("column",function(g,e){if(a===c)return g.aoColumns[e].bVisible;var h=g.aoColumns,f=h[e],l=g.aoData,p,m,k;if(a!==c&&f.bVisible!==a){if(a){var q=b.inArray(!0,va(h,"bVisible"),e+1);p=0;for(m=l.length;p<m;p++)k=l[p].nTr,h=l[p].anCells,k&&k.insertBefore(h[e],h[q]||null)}else b(va(g.aoData,"anCells",e)).detach();f.bVisible=a;pa(g,g.aoHeader);pa(g,g.aoFooter);if(d===c||d)n(g),(g.oScroll.sX||g.oScroll.sY)&&Sa(g);ca(g,null,"column-visibility",[g,e,a]);ma(g)}})});Y("columns().indexes()",
"column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?w(b,c):c},1)});H("columns.adjust()",function(){return this.iterator("table",function(a){n(a)},1)});H("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return d(c,b);if("fromData"===a||"toVisible"===a)return w(c,b)}});H("column()",function(a,b){return mb(this.columns(a,b))});var ec=function(a,d,g){var e=a.aoData,h=nb(a,g);g=eb(Ra(e,h,"anCells"));
var f=b([].concat.apply([],g)),n,l=a.aoColumns.length,p,m,k,q,u,w;return cb(d,function(d){var g="function"===typeof d;if(null===d||d===c||g){p=[];m=0;for(k=h.length;m<k;m++)for(n=h[m],q=0;q<l;q++)u={row:n,column:q},g?(w=a.aoData[n],d(u,F(a,n,q),w.anCells[q])&&p.push(u)):p.push(u);return p}return b.isPlainObject(d)?[d]:f.filter(d).map(function(a,c){n=c.parentNode._DT_RowIndex;return{row:n,column:b.inArray(c,e[n].anCells)}}).toArray()})};H("cells()",function(a,d,g){b.isPlainObject(a)&&(typeof a.row!==
c?(g=d,d=null):(g=a,a=null));b.isPlainObject(d)&&(g=d,d=null);if(null===d||d===c)return this.iterator("table",function(b){return ec(b,a,lb(g))});var e=this.columns(d,g),h=this.rows(a,g),f,n,l,p,m,k=this.iterator("table",function(a,b){f=[];n=0;for(l=h[b].length;n<l;n++)for(p=0,m=e[b].length;p<m;p++)f.push({row:h[b][n],column:e[b][p]});return f},1);b.extend(k.selector,{cols:d,rows:a,opts:g});return k});Y("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,d){return(a=
a.aoData[b].anCells)?a[d]:c},1)});H("cells().data()",function(){return this.iterator("cell",function(a,b,c){return F(a,b,c)},1)});Y("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]},1)});Y("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,c,d){return F(b,c,d,a)},1)});Y("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,
b,c){return{row:b,column:c,columnVisible:w(a,c)}},1)});Y("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,d){da(b,c,a,d)})});H("cell()",function(a,b,c){return mb(this.cells(a,b,c))});H("cell().data()",function(a){var b=this.context,d=this[0];if(a===c)return b.length&&d.length?F(b[0],d[0].row,d[0].column):c;G(b[0],d[0].row,d[0].column,a);da(b[0],d[0].row,"data",d[0].column);return this});H("order()",function(a,d){var g=this.context;if(a===c)return 0!==
g.length?g[0].aaSorting:c;"number"===typeof a?a=[[a,d]]:b.isArray(a[0])||(a=Array.prototype.slice.call(arguments));return this.iterator("table",function(b){b.aaSorting=a.slice()})});H("order.listener()",function(a,b,c){return this.iterator("table",function(d){ib(d,a,b,c)})});H(["columns().order()","column().order()"],function(a){var c=this;return this.iterator("table",function(d,g){var e=[];b.each(c[g],function(b,c){e.push([c,a])});d.aaSorting=e})});H("search()",function(a,d,g,e){var h=this.context;
return a===c?0!==h.length?h[0].oPreviousSearch.sSearch:c:this.iterator("table",function(c){c.oFeatures.bFilter&&M(c,b.extend({},c.oPreviousSearch,{sSearch:a+"",bRegex:null===d?!1:d,bSmart:null===g?!0:g,bCaseInsensitive:null===e?!0:e}),1)})});Y("columns().search()","column().search()",function(a,d,g,e){return this.iterator("column",function(h,f){var n=h.aoPreSearchCols;if(a===c)return n[f].sSearch;h.oFeatures.bFilter&&(b.extend(n[f],{sSearch:a+"",bRegex:null===d?!1:d,bSmart:null===g?!0:g,bCaseInsensitive:null===
e?!0:e}),M(h,h.oPreviousSearch,1))})});H("state()",function(){return this.context.length?this.context[0].oSavedState:null});H("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});H("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});H("state.save()",function(){return this.iterator("table",function(a){ma(a)})});z.versionCheck=z.fnVersionCheck=function(a){var b=z.version.split(".");a=a.split(".");
for(var c,d,g=0,e=a.length;g<e;g++)if(c=parseInt(b[g],10)||0,d=parseInt(a[g],10)||0,c!==d)return c>d;return!0};z.isDataTable=z.fnIsDataTable=function(a){var c=b(a).get(0),d=!1;b.each(z.settings,function(a,b){if(b.nTable===c||b.nScrollHead===c||b.nScrollFoot===c)d=!0});return d};z.tables=z.fnTables=function(a){return b.map(z.settings,function(c){if(!a||a&&b(c.nTable).is(":visible"))return c.nTable})};z.util={throttle:ja,escapeRegex:gb};z.camelToHungarian=l;H("$()",function(a,c){var d=this.rows(c).nodes(),
d=b(d);return b([].concat(d.filter(a).toArray(),d.find(a).toArray()))});b.each(["on","one","off"],function(a,c){H(c+"()",function(){var a=Array.prototype.slice.call(arguments);a[0].match(/\.dt\b/)||(a[0]+=".dt");var d=b(this.tables().nodes());d[c].apply(d,a);return this})});H("clear()",function(){return this.iterator("table",function(a){U(a)})});H("settings()",function(){return new R(this.context,this.context)});H("data()",function(){return this.iterator("table",function(a){return va(a.aoData,"_aData")}).flatten()});
H("destroy()",function(a){a=a||!1;return this.iterator("table",function(c){var d=c.nTableWrapper.parentNode,g=c.oClasses,e=c.nTable,h=c.nTBody,n=c.nTHead,l=c.nTFoot,p=b(e),h=b(h),m=b(c.nTableWrapper),k=b.map(c.aoData,function(a){return a.nTr}),q;c.bDestroying=!0;ca(c,"aoDestroyCallback","destroy",[c]);a||(new R(c)).columns().visible(!0);m.unbind(".DT").find(":not(tbody *)").unbind(".DT");b(f).unbind(".DT-"+c.sInstance);e!=n.parentNode&&(p.children("thead").detach(),p.append(n));l&&e!=l.parentNode&&
(p.children("tfoot").detach(),p.append(l));p.detach();m.detach();c.aaSorting=[];c.aaSortingFixed=[];db(c);b(k).removeClass(c.asStripeClasses.join(" "));b("th, td",n).removeClass(g.sSortable+" "+g.sSortableAsc+" "+g.sSortableDesc+" "+g.sSortableNone);c.bJUI&&(b("th span."+g.sSortIcon+", td span."+g.sSortIcon,n).detach(),b("th, td",n).each(function(){var a=b("div."+g.sSortJUIWrapper,this);b(this).append(a.contents());a.detach()}));!a&&d&&d.insertBefore(e,c.nTableReinsertBefore);h.children().detach();
h.append(k);p.css("width",c.sDestroyWidth).removeClass(g.sTable);(q=c.asDestroyStripes.length)&&h.children().each(function(a){b(this).addClass(c.asDestroyStripes[a%q])});d=b.inArray(c,z.settings);-1!==d&&z.settings.splice(d,1)})});z.version="1.10.4";z.settings=[];z.models={};z.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};z.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null};z.models.oColumn={idx:null,aDataSort:null,
asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};z.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],
asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,
fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,
iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",
sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:b.extend({},z.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null};p(z.defaults);z.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,
mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};p(z.defaults.column);z.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,
bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,
nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:c,oAjaxData:c,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},
bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==ea(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==ea(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,g=this.oFeatures,e=g.bPaginate;return g.bServerSide?!1===e||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!e||c>d||-1===a?d:c},
oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}};z.ext=aa={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:z.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:z.version};b.extend(aa,{afnFiltering:aa.search,aTypes:aa.type.detect,ofnSearch:aa.type.search,oSort:aa.type.order,afnSortData:aa.order,aoFeatures:aa.feature,
oApi:aa.internal,oStdClasses:aa.classes,oPagination:aa.pager});b.extend(z.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",
sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",
sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});(function(){var a="",a="",c=a+"ui-state-default",d=a+"css_right ui-icon ui-icon-",a=a+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";b.extend(z.ext.oJUIClasses,z.ext.classes,{sPageButton:"fg-button ui-button "+c,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:c+
" sorting_asc",sSortDesc:c+" sorting_desc",sSortable:c+" sorting",sSortableAsc:c+" sorting_asc_disabled",sSortableDesc:c+" sorting_desc_disabled",sSortableNone:c+" sorting_disabled",sSortJUIAsc:d+"triangle-1-n",sSortJUIDesc:d+"triangle-1-s",sSortJUI:d+"carat-2-n-s",sSortJUIAscAllowed:d+"carat-1-n",sSortJUIDescAllowed:d+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+c,sScrollFoot:"dataTables_scrollFoot "+c,sHeaderTH:c,sFooterTH:c,
sJUIHeader:a+" ui-corner-tl ui-corner-tr",sJUIFooter:a+" ui-corner-bl ui-corner-br"})})();var ac=z.ext.pager;b.extend(ac,{simple:function(a,b){return["previous","next"]},full:function(a,b){return["first","previous","next","last"]},simple_numbers:function(a,b){return["previous",ka(a,b),"next"]},full_numbers:function(a,b){return["first","previous",ka(a,b),"next","last"]},_numbers:ka,numbers_length:7});b.extend(!0,z.ext.renderer,{pageButton:{_:function(a,c,d,g,e,h){var f=a.oClasses,n=a.oLanguage.oPaginate,
l,p,m=0,q=function(c,g){var k,u,w,t,A=function(b){xa(a,b.data.action,!0)};k=0;for(u=g.length;k<u;k++)if(t=g[k],b.isArray(t))w=b("<"+(t.DT_el||"div")+"/>").appendTo(c),q(w,t);else{p=l="";switch(t){case "ellipsis":c.append("<span>&hellip;</span>");break;case "first":l=n.sFirst;p=t+(0<e?"":" "+f.sPageButtonDisabled);break;case "previous":l=n.sPrevious;p=t+(0<e?"":" "+f.sPageButtonDisabled);break;case "next":l=n.sNext;p=t+(e<h-1?"":" "+f.sPageButtonDisabled);break;case "last":l=n.sLast;p=t+(e<h-1?"":
" "+f.sPageButtonDisabled);break;default:l=t+1,p=e===t?f.sPageButtonActive:""}l&&(w=b("<a>",{"class":f.sPageButton+" "+p,"aria-controls":a.sTableId,"data-dt-idx":m,tabindex:a.iTabIndex,id:0===d&&"string"===typeof t?a.sTableId+"_"+t:null}).html(l).appendTo(c),xb(w,{action:t},A),m++)}};try{var u=b(k.activeElement).data("dt-idx");q(b(c).empty(),g);null!==u&&b(c).find("[data-dt-idx="+u+"]").focus()}catch(w){}}}});b.extend(z.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return Cb(a,c)?"num"+
c:null},function(a,b){if(!(!a||a instanceof Date||Vb.test(a)&&zb.test(a)))return null;var c=Date.parse(a);return null!==c&&!isNaN(c)||ga(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return Cb(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Sb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Sb(a,c,!0)?"html-num-fmt"+c:null},function(a,b){return ga(a)||"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);b.extend(z.ext.type.search,{html:function(a){return ga(a)?
a:"string"===typeof a?a.replace(Qb," ").replace(Qa,""):""},string:function(a){return ga(a)?a:"string"===typeof a?a.replace(Qb," "):a}});var Gb=function(a,b,c,d){if(0!==a&&(!a||"-"===a))return-Infinity;b&&(a=Bb(a,b));a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,"")));return 1*a};b.extend(aa.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return ga(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return ga(a)?"":"string"===
typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0}});Za("");b.extend(!0,z.ext.renderer,{header:{_:function(a,c,d,g){b(a.nTable).on("order.dt.DT",function(b,e,h,f){a===e&&(b=d.idx,c.removeClass(d.sSortingClass+" "+g.sSortAsc+" "+g.sSortDesc).addClass("asc"==f[b]?g.sSortAsc:"desc"==f[b]?g.sSortDesc:d.sSortingClass))})},jqueryui:function(a,c,d,g){b("<div/>").addClass(g.sSortJUIWrapper).append(c.contents()).append(b("<span/>").addClass(g.sSortIcon+
" "+d.sSortingClassJUI)).appendTo(c);b(a.nTable).on("order.dt.DT",function(b,e,h,f){a===e&&(b=d.idx,c.removeClass(g.sSortAsc+" "+g.sSortDesc).addClass("asc"==f[b]?g.sSortAsc:"desc"==f[b]?g.sSortDesc:d.sSortingClass),c.find("span."+g.sSortIcon).removeClass(g.sSortJUIAsc+" "+g.sSortJUIDesc+" "+g.sSortJUI+" "+g.sSortJUIAscAllowed+" "+g.sSortJUIDescAllowed).addClass("asc"==f[b]?g.sSortJUIAsc:"desc"==f[b]?g.sSortJUIDesc:d.sSortingClassJUI))})}}});z.render={number:function(a,b,c,d){return{display:function(g){var e=
0>g?"-":"";g=Math.abs(parseFloat(g));var h=parseInt(g,10);g=c?b+(g-h).toFixed(c).substring(2):"";return e+(d||"")+h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+g}}}};b.extend(z.ext.internal,{_fnExternApiFunc:Pb,_fnBuildAjax:Ba,_fnAjaxUpdate:Fa,_fnAjaxParameters:Ia,_fnAjaxUpdateDraw:fb,_fnAjaxDataSrc:Ca,_fnAddColumn:a,_fnColumnOptions:g,_fnAdjustColumnSizing:n,_fnVisibleToColumnIndex:d,_fnColumnIndexToVisible:w,_fnVisbleColumns:x,_fnGetColumns:A,_fnColumnTypes:E,_fnApplyColumnDefs:I,_fnHungarianMap:p,
_fnCamelToHungarian:l,_fnLanguageCompat:h,_fnBrowserDetect:q,_fnAddData:D,_fnAddTr:J,_fnNodeToDataIndex:function(a,b){return b._DT_RowIndex!==c?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,c,d){return b.inArray(d,a.aoData[c].anCells)},_fnGetCellData:F,_fnSetCellData:G,_fnSplitObjNotation:N,_fnGetObjectDataFn:T,_fnSetObjectDataFn:S,_fnGetDataMaster:L,_fnClearTable:U,_fnDeleteIndex:ba,_fnInvalidate:da,_fnGetRowElements:oa,_fnCreateTr:za,_fnBuildHead:na,_fnDrawHead:pa,_fnDraw:ra,_fnReDraw:W,
_fnAddOptionsHtml:la,_fnDetectHeader:fa,_fnGetUniqueThs:Ha,_fnFeatureHtmlFilter:P,_fnFilterComplete:M,_fnFilterCustom:m,_fnFilterColumn:Hb,_fnFilter:Ib,_fnFilterCreateSearch:pb,_fnEscapeRegex:gb,_fnFilterData:La,_fnFeatureHtmlInfo:Eb,_fnUpdateInfo:Wa,_fnInfoMacros:Jb,_fnInitialise:Xa,_fnInitComplete:hb,_fnLengthChange:ua,_fnFeatureHtmlLength:ob,_fnFeatureHtmlPaginate:Ya,_fnPageChange:xa,_fnFeatureHtmlProcessing:K,_fnProcessingDisplay:V,_fnFeatureHtmlTable:Fb,_fnScrollDraw:Sa,_fnApplyToChildren:ta,
_fnCalculateColumnWidths:wa,_fnThrottle:ja,_fnConvertToWidth:tb,_fnScrollingWidthAdjust:Kb,_fnGetWidestNode:Lb,_fnGetMaxLenString:ub,_fnStringToCss:Q,_fnScrollBarWidth:vb,_fnSortFlatten:Ma,_fnSort:Mb,_fnSortAria:Nb,_fnSortListener:wb,_fnSortAttachListener:ib,_fnSortingClasses:db,_fnSortData:Ob,_fnSaveState:ma,_fnLoadState:Ua,_fnSettingsFromNode:Ta,_fnLog:Ga,_fnMap:qa,_fnBindAction:xb,_fnCallbackReg:ia,_fnCallbackFire:ca,_fnLengthOverflow:yb,_fnRenderer:jb,_fnDataSource:ea,_fnRowAttributes:Aa,_fnCalculateEnd:function(){}});
b.fn.dataTable=z;b.fn.dataTableSettings=z.settings;b.fn.dataTableExt=z.ext;b.fn.DataTable=function(a){return b(this).dataTable(a).api()};b.each(z,function(a,c){b.fn.DataTable[a]=c});return b.fn.dataTable})})(window,document);window.TOONTALK||(window.TOONTALK={});window.TOONTALK.creators_from_json={};window.TOONTALK.widget=function(f){var k=function(c){var b=this.get_frontside&&this.get_frontside(!0);if(b)return c&&this.rerender(),b.get_element()};f.creators_from_json.top_level=function(c){c=f.widget.create_top_level_widget(c.settings);$(c.get_backside(!0).get_element()).addClass("toontalk-top-level-backside");return c};return{add_standard_widget_functionality:function(c){this.add_sides_functionality(c);this.runnable(c);this.stackable(c);this.animatable(c);this.has_title(c);this.has_parent(c);
this.has_description(c);this.has_listeners(c);this.erasable(c);c.is_of_type||(c.is_of_type=function(b){return this.get_type_name()===b});c.is_widget=!0;return c},erasable:function(c){var b;c.get_erased||(c.get_erased=function(){return b});c.set_erased||(c.set_erased=function(c,f){b=c;f&&this.rerender()});return c},add_sides_functionality:function(c){var b,p;c.get_frontside||(c.get_frontside=function(l){l&&!b&&(b=f.frontside.create(c));return b},c.save_dimensions=function(){var b;this.get_size_attributes?
(b=this.get_size_attributes(),this.saved_width=b.width,this.saved_height=b.height):(b=this.get_frontside_element(),this.saved_width=$(b).width(),this.saved_height=$(b).height())},c.restore_dimensions=function(){var b;0<this.saved_width&&(this.set_size_attributes?this.set_size_attributes(this.saved_width,this.saved_height):(b=this.get_frontside_element(),$(b).css({width:this.saved_width,height:this.saved_height})),this.saved_height=this.saved_width=void 0)});c.get_backside||(c.get_backside=function(b){b&&
!p&&(p=c.create_backside());return p});c.set_backside||(c.set_backside=function(b){p=b});c.forget_backside||(c.forget_backside=function(){p=void 0});c.create_backside||(c.create_backside=function(){return f.backside.create(c)});return c},runnable:function(c){var b=!1;c.get_running||(c.get_running=function(){return b});c.set_running||(c.set_running=function(f,l){var h,k;b===f&&b||(h=this.get_backside_widgets(),b=f,this.get_backside()&&this.get_backside().run_status_changed(b),h.forEach(function(e){k=
e.get_widget();e.is_backside()&&0<=this.backside_widgets.indexOf(k)||(k.is_of_type("robot")?e.is_backside()||b&&k.get_running()||(b?(k.set_stopped(!1),k.run(c,l)):k.set_stopped(!0),k.rerender()):k.set_running&&(!l&&e.is_backside()&&"top-level"!==c.get_type_name()?k.set_running(f,c):k.set_running(f)))}.bind(this)),this.walk_children&&this.walk_children(function(c){c.set_running&&c.set_running(b);return!0}),this.rerender())});return c},stackable:function(c){var b=!1;c.get_infinite_stack||(c.get_infinite_stack=
function(){return b});c.set_infinite_stack||(c.set_infinite_stack=function(f){var l=c.get_backside_element(),h=c.get_frontside_element();b=f;l&&$(l).find(".toontalk-infinite-stack-check-box").prop("checked",f);h&&(f?$(h).addClass("toontalk-infinite-stack"):$(h).removeClass("toontalk-infinite-stack"))});return c},animatable:function(c){var b;c.animate_to_widget||(b=function(b){var c=b.get_element();c&&$(c).is(":visible")||(c=f.UTILITIES.find_resource_equal_to_widget(b));return c},c.animate_to_widget=
function(c,f,h,k,e){this.animate_to_element(b(c),f,h,k,e)});c.animate_to_element||(c.animate_to_element=function(b,c,h,k,e){var q=$(b).offset(),t=$(this.get_frontside_element());b&&$(b).is(":visible")?(k||(k=($(b).width()-t.width())*Math.random()),e||(e=($(b).height()-t.height())*Math.random()),q?(q.left+=k,q.top+=e,f.debugging&&(0>q.left||0>q.top)&&console.log("Should this include negative values? "+q)):q={left:0,top:0},this.animate_to_absolute_position(q,c,h)):c()});c.animate_to_absolute_position||
(c.animate_to_absolute_position=function(b,c,h){var k;k=this.get_frontside_element();f.UTILITIES.animate_to_absolute_position(k,b,c,h)});return c},has_title:function(c){c.get_title||(c.get_title=function(){var b=this.get_type_name(),c=this.get_backside(),l=this.get_frontside_element(),h=this.get_description(),k;if($(l).is(".toontalk-top-level-resource"))k=this.can_run&&this.can_run()?this.get_running()?"Click elsewhere to stop this from running. Click on it to start it up again.":"Click to start this running. Click elsewhere to stop it.":
"Drag this "+b+" to a work area.";else if(!c||!c.get_element())k="Click to see the back side of this "+b;else if(!h)return f.UTILITIES.add_a_or_an(b,!0);h&&(h="This "+b+" "+h,k=k?h+"\n"+k:h);return k});return c},has_parent:function(c){var b,f;c.get_parent_of_frontside=function(){return b};c.get_parent_of_backside=function(){return f};c.set_parent_of_frontside=function(c,h,f){b&&!f&&b.is_backside()&&b.get_widget().remove_backside_widget(this,!1,!0);b=c&&h?c.get_backside(!0):c};c.set_parent_of_backside=
function(b,c,k){f&&!k&&f.is_backside()&&f.get_widget().remove_backside_widget(this,!0,!0);f=b&&c?b.get_backside(!0):b};c.closest_visible_ancestor=function(){for(var b=this;b&&!b.visible();)b=b.is_backside()?b.get_parent_of_backside():b.get_parent_of_frontside();return b||this};c.closest_visible_ancestor_or_frontside=function(){for(var b=this,c;b&&!b.visible();)c=b,b.is_backside()?(b=b.get_parent_of_backside())||(b=c.get_widget()):b=b.get_parent_of_frontside();return b||this};c.ancestor_of_type=function(b){for(var c=
this;c&&!c.is_of_type(b);)c=c.is_backside()?c.get_widget().get_parent_of_backside():c.get_parent_of_frontside();return c};c.has_ancestor=function(b){for(var c=this;c;){if(b===c)return!0;c=c.is_backside()?c.get_widget().get_parent_of_backside():c.get_parent_of_frontside()}return!1};c.remove_from_parent_of_frontside=function(c){b&&(b.is_backside()?b.remove_backside_widget(this,!1):b.removed_from_container&&b.removed_from_container(this,!1,c))};return c},has_description:function(c){var b;c.get_description||
(c.get_description=function(){return b});c.set_description||(c.set_description=function(c,f){if(b===c||!b&&""===c)return!1;b=c;f&&this.rerender();return!0})},has_listeners:function(c){var b={};c.add_listener||(c.add_listener=function(c,f){var h=b[c];h?0>h.indexOf(f)&&h.push(f):b[c]=[f]});c.remove_listener||(c.remove_listener=function(c,l,h){if(c=b[c])if(l=c.indexOf(l),0<=l){c.splice(l,1);return}!h&&f.debugging&&console.log("Listener of type "+type_name+" could not be removed.")});c.get_listeners||
(c.get_listeners=function(c){return b[c]})},get_full_description:function(){var c,b;if(this.get_erased&&this.get_erased())return"erased "+this.get_type_name();c=this.get_description();b=this.toString();return c?b+" ("+c+")":b},remove:function(c){var b=this.get_backside(),f=this.get_frontside(),l=this.get_parent_of_frontside(),h=this.get_parent_of_backside();b&&(b.remove_element(),h&&(b=h.is_backside()?h:h.get_backside(),b.get_widget().removed_from_container&&b.get_widget().removed_from_container(this,
!0,c)));f&&(f.remove(),l&&this.remove_from_parent_of_frontside(c));this.set_running(!1)},get_frontside_element:k,get_element:k,get_backside_element:function(c){if(c=this.get_backside&&this.get_backside(c))return c.get_element()},add_to_json:function(c,b){var f,l,h,k,e;if(c){c.view?(l=c,f=c.view,c=c.semantic):(f={},l={semantic:c,view:f});l.version=1;this.get_erased&&this.get_erased()&&(c.erased=!0);this.get_infinite_stack&&this.get_infinite_stack()&&(c.infinite_stack=!0);this.get_running&&this.get_running()&&
(c.running=!0);if(!this.get_parent_of_frontside()||this.get_parent_of_frontside().is_backside())if(k=this.get_frontside_element&&this.get_frontside_element())$(k).is(".toontalk-plain-text-element")||(e=$(k).width(),0!==e&&(f.frontside_width=$(k).width(),f.frontside_height=$(k).height())),$(k).is(":visible")&&(h=$(k).position()),h&&(f.frontside_left=h.left,f.frontside_top=h.top);if(k=this.get_backside()){if(e=k.get_element())f.backside_width=$(e).width(),f.backside_height=$(e).height(),f.backside_left||
(h=$(e).position(),f.backside_left=h.left,f.backside_top=h.top,"&lt;"===$(e).find(".toontalk-settings-backside-button").html()&&(f.advanced_settings_open=!0));k.get_backside_dimensions()&&(f.backside_geometry=k.get_backside_dimensions())}!f.backside_geometry&&this.backside_geometry&&(f.backside_geometry=this.backside_geometry);f.saved_width=this.saved_width;f.saved_height=this.saved_height;c.description=this.get_description&&this.get_description();return l}console.log("get_json not defined");return{}},
add_backside_widgets_to_json:function(c,b){var p=this.get_backside_widgets(),l;0<p.length&&(c.semantic.backside_widgets=f.UTILITIES.get_json_of_array(p,b),(p=this.get_backside_widgets_json_views())&&p.forEach(function(h,f){var e;l=c.semantic.backside_widgets[f];0<=l.widget.shared_widget_index?(e=b.widgets_encountered.indexOf(b.shared_widgets[l.widget.shared_widget_index]),e=b.json_of_widgets_encountered[e].view):e=l.widget.view;l.is_backside?h.backside_left&&(e.backside_left=h.backside_left,e.backside_top=
h.backside_top):h.frontside_left&&(e.frontside_left=h.frontside_left,e.frontside_top=h.frontside_top)}))},get_backside_widgets:function(){return this.backside_widgets||[]},add_backside_widget:function(c,b){var p=this.get_backside(),l=b?c.get_backside():c;f.debugging&&c===this?f.UTILITIES.report_internal_error("Adding a widget to a list of its backside widgets!"):(this.backside_widgets?0>this.backside_widgets.indexOf(l)&&this.backside_widgets.push(l):this.backside_widgets=[l],b?c.set_parent_of_backside(this,
!0):c.set_parent_of_frontside(this,!0),l.set_visible(p.visible()),this.get_running()&&c.set_running(!0),c.render())},remove_all_backside_widgets:function(){if(this.backside_widgets)for(;0<this.backside_widgets.length;)this.backside_widgets[0].remove()},remove_backside_widget:function(c,b,p){this.get_backside();var l=b?c.get_backside(!0):c,h;f.debugging&&!this.backside_widgets?p?console.log("remove_backside_widget called and there are no backside_widgets"):f.UTILITIES.report_internal_error("Couldn't remove a widget from backside widgets."):
(h=this.backside_widgets.indexOf(l),0>h?p?f.debugging&&console.log("Warning: Probable redundant call to remove_backside_widget"):f.UTILITIES.report_internal_error("Couldn't find a widget to remove it from backside widgets. "+l.get_widget()+" ("+l.get_widget().debug_id+")"):(this.backside_widgets.splice(h,1),this.backside_widgets_json_views&&this.backside_widgets_json_views.splice(h,1),b?(b=c.get_parent_of_backside())&&b.get_widget()===this&&c.set_parent_of_backside(void 0,!0,!0):(b=c.get_parent_of_frontside())&&
b.get_widget()===this&&c.set_parent_of_frontside(void 0,void 0,!0),l.set_visible(!1)))},set_backside_widget_sides:function(c,b){var f=this.get_backside(),l=f&&f.visible();this.backside_widgets=c;0<c.length&&(this.get_backside()?this.get_backside().add_backside_widgets(c,b):this.backside_widgets_json_views=b,c.forEach(function(b){b.is_backside()?b.get_widget().set_parent_of_backside(this,!0):b.get_widget().set_parent_of_frontside(this,!0);b.set_visible(l)}.bind(this)))},get_backside_widgets_json_views:function(c){!this.backside_widgets_json_views&&
c&&(this.backside_widgets_json_views=[]);return this.backside_widgets_json_views},can_run:function(){var c=!1,b;this.get_backside_widgets().some(function(f){b=f.get_widget();if(b.get_body&&!b.get_body().is_empty()||b.can_run())return c=!0});return c},add_to_copy:function(c,b){var p;this.get_erased&&this.get_erased()&&(c.set_erased||f.widget.erasable(c),c.set_erased(this.get_erased()));b||(p=this.get_backside_widgets(),0<p.length&&c.set_backside_widget_sides(f.UTILITIES.copy_widget_sides(p,b),this.get_backside_widgets_json_views()));
c.set_visible(this.visible());return c},get_type_name:function(){return""},copy:function(){console.assert(!1,"copy not implemented")},add_copy_to_container:function(c){c||(c=this.copy({}));var b=this.get_frontside_element(),p=c.get_frontside_element(),l=$(b).closest(".toontalk-backside"),h,k;0===l.length&&(l=$(".toontalk-backside"));h=f.UTILITIES.relative_position(b,l.get(0));k=f.UTILITIES.widget_from_jquery(l);$(p).css({width:$(b).width(),height:$(b).height(),left:h.left+30,top:h.top+30});l.append(p);
k&&k.add_backside_widget(c);f.robot.in_training&&f.robot.in_training.copied(this,c,!1);return c},visible:function(){var c=this.get_frontside();return c?c.visible():!1},set_visible:function(c){var b=this.get_frontside(c);b&&b.set_visible(c)},is_backside:function(){return!1},get_parent:function(){return this.get_parent_of_frontside()},drag_started:function(c,b){f.robot.in_training&&f.robot.in_training.picked_up(this,c,b)},match:function(c){console.assert(!1,"match not implemented for "+c.toString())},
removed:function(c){f.UTILITIES.report_internal_error("removed not implemented")},equals_box:function(){return!1},equals_number:function(){return!1},open_backside:function(c){var b=this.get_backside(),p=function(a,b){f.UTILITIES.set_timeout(function(){$(a).addClass("toontalk-side-appearing");f.UTILITIES.add_one_shot_event_handler(a,"transitionend",2500,function(){$(a).removeClass("toontalk-side-appearing");c&&c()});$(a).css({left:e,top:q,opacity:b});this.apply_backside_geometry()}.bind(this))}.bind(this),
l,h,k,e,q,t,a;if(b){l=b.get_element();if($(l).is(":visible"))return f.UTILITIES.highlight_element(l,void 0,1E3),b;if((h=this.get_parent_of_backside())&&h.is_backside())return h.get_widget().open_backside()}h=this.get_frontside_element();k=$(h).parent();b=$(h);if(!b.is(".toontalk-top-level-resource")){for(;0<k.length&&!k.is(".toontalk-backside");)b=k,k=k.parent();b.get(0);b=this.get_backside(!0);l=b.get_element();l.toontalk_widget=this;t=$(h).offset();(a=k.offset())||(a={left:0,top:0});$(l).css({left:t.left-
a.left,top:t.top-a.top,opacity:.01});k.append(l);(k=f.UTILITIES.widget_from_jquery(k))&&k.add_backside_widget(this,!0);e=t.left-a.left;q=t.top-a.top+h.offsetHeight;p(l,"inherit");b.render();this.backside_widgets&&this.backside_widgets.forEach(function(a){a.render();a.set_visible(!0)});return b}},apply_backside_geometry:function(){var c=this.get_backside(!0),b=c.get_element();this.backside_geometry&&b&&(f.backside.scale_backside($(b),this.backside_geometry.x_scale,this.backside_geometry.y_scale,this.backside_geometry.original_width,
this.backside_geometry.original_height),c.set_dimensions(this.backside_geometry))},top_level_widget:function(){var c;return this.is_of_type("top-level")?this:(c=f.UTILITIES.widget_from_jquery($(this.get_frontside_element()).closest(".toontalk-top-level-backside")))?c:(c=this.get_parent_of_frontside()||this.get_parent_of_backside())?c.get_widget().top_level_widget():this.create_top_level_widget()},backup_all:function(c){var b=this.top_level_widget();b&&b.save(c)},render:function(){f.DISPLAY_UPDATES.pending_update(this)},
rerender:function(){this.visible()&&f.DISPLAY_UPDATES.pending_update(this)},hide:function(){$(this.get_frontside_element()).hide()},close_button_ok:function(c){return"top-level"!==this.get_type_name()&&!$(c).is(".toontalk-top-level-resource")&&!$(c).closest(".toontalk-conditions-panel").is("*")},get_widget:function(){return this},add_to_top_level_backside:function(c,b){var p=this.top_level_widget(),l=c.get_frontside_element(!0);p.add_backside_widget(c);p.get_backside_element().appendChild(l);c.render();
b&&f.robot.in_training&&f.robot.in_training.dropped_on(c,p);return l},create_top_level_widget:function(c){var b=Object.create(f.widget);c||(c={});b.get_json=function(b){b=this.get_backside(!0).get_element();b=document.defaultView.getComputedStyle(b,null).getPropertyValue("background-color");return{semantic:{type:"top_level",settings:c},view:{background_color:b}}};b.get_type_name=function(){return"top-level"};b.is_of_type=function(b){return"top-level"===b};b.toString=function(){return"top level widget"};
b.get_description=function(){};b.match=function(){return"matched"};b.update_display=function(){this.backside_widgets&&this.backside_widgets.forEach(function(b){b.visible()&&b.update_display()})};b.copy=function(){return this};b.visible=function(){return!0};b.get_parent_of_frontside=function(){};b.get_parent_of_backside=function(){};b.closest_visible_ancestor=function(){return this};b.get_infinite_stack=function(){return!1};b.top_level_widget=function(){return this};b=b.add_sides_functionality(b);
b=b.runnable(b);b=b.has_parent(b);b.get_setting=function(b){"undefined"===typeof c[b]&&(c[b]=f.DEFAULT_SETTINGS&&f.DEFAULT_SETTINGS[b]);return c[b]};b.set_setting=function(b,f){c[b]=f};b.open_settings=function(){f.SETTINGS.open(b)};b.save=function(b,c,h){var k;c||(c={});"undefined"===typeof c.google_drive&&(c.google_drive=f.google_drive&&this.get_setting("auto_save_to_google_drive"));"undefined"===typeof c.local_storage&&(c.local_storage=this.get_setting("auto_save_to_local_storage"));b?(c.google_drive&&
(k=f.UTILITIES.get_json_top_level(this),b=f.google_drive.get_status(),"Ready"===b?(f.google_drive.upload_file(this.get_setting("program_name"),"json",JSON.stringify(k),h),h=void 0):f.google_drive.connection_to_google_drive_possible()&&console.log("Unable to save to Google Drive because: "+b)),c.local_storage&&(k||(k=f.UTILITIES.get_json_top_level(this)),this.save_to_local_storage(k)),h&&h()):setTimeout(function(){this.save(!0,c,h)}.bind(this),100)};b.publish=function(b,c){f.publish.publish_widget(this.get_setting("program_name"),
this,c,b)};b.save_to_local_storage=function(b,c){var h=this.get_setting("program_name"),k=f.UTILITIES.local_storage_program_key(h),e=f.UTILITIES.local_storage_program_meta_data_key(h),q,t,a;c||(c=Date.now());try{t=(t=window.localStorage.getItem(e))?JSON.parse(t):{created:c},t.last_modified=c,a=JSON.stringify(b),t.file_size=a.length,window.localStorage.setItem(e,JSON.stringify(t)),window.localStorage.setItem(k,a),window.localStorage.setItem("toontalk-last-key",k),q=f.UTILITIES.get_all_locally_stored_program_names(),
0>q.indexOf(h)&&(q.push(h),f.UTILITIES.set_all_locally_stored_program_names(q))}catch(g){h="Failed to save state to local storage since it requires "+JSON.stringify(b).length+" bytes. Error message is "+g,f.UTILITIES.is_internet_explorer()?console.error(h):f.UTILITIES.display_message(h),this.last_local_storage_error=h}};b.load=function(c,l){var h=this.get_setting("program_name"),k=h+".json",e=f.UTILITIES.local_storage_program_key(h),q=function(c){c&&(c=JSON.parse(c),b.remove_all_backside_widgets(),
f.UTILITIES.add_backside_widgets_from_json(b,c.semantic.backside_widgets),l&&l())},h=function(b){b?f.google_drive.download_file(b,q):q(window.localStorage.getItem(e))};c&&f.google_drive&&"Ready"===f.google_drive.get_status()?f.google_drive.get_toontalk_program_file(k,h):q(window.localStorage.getItem(e))};b.walk_children=function(){};b.is_widget=!0;b.get_backside(!0).set_visible(!0);f.debugging&&(b.debug_id=f.UTILITIES.generate_unique_id(),b.debug_string="Top-level widget");return b}}}(window.TOONTALK);window.TOONTALK.backside=function(f){return{create:function(k){var c=Object.create(this),b=document.createElement("div"),p=$(b),l=1,h=1,u=document.createElement("div"),e=document.createElement("div"),q=k.get_help_URL&&k.get_help_URL(),t,a,g,n,d,w,x,A,E,I,D,J=function(a){a?($(u).addClass("toontalk-green-flag-active").removeClass("toontalk-green-flag-inactive"),$(e).addClass("toontalk-stop-sign-inactive").removeClass("toontalk-stop-sign-active")):($(u).addClass("toontalk-green-flag-inactive").removeClass("toontalk-green-flag-active"),
$(e).addClass("toontalk-stop-sign-active").removeClass("toontalk-stop-sign-inactive"))},F=function(){var a=p.width();p.height();var b,c,d;0===a?setTimeout(F,100):(a=$(e).width(),b=(b=$(x).width())?b+14:0,$(e).css({right:b}),$(u).css({right:b+a+6}),c=$(u).width(),E&&$(E).css({right:b+a+c+12}),t&&(d=$(E).width()||0,$(t).css({right:b+a+c+d+12})))};A=this.create_description_label(c,k);var G=function(){var a;a=k.get_running()?"To stop this click on the stop sign.":k.can_run()?"Click this to start this running.":
"There is nothing to run on this.";u.title=a},N=function(){var a;a=k.get_running()?"Click to stop this from running.":k.can_run()?"This has stopped. Click on the flag to start running it.":"There is nothing to run here.";e.title=a},T,S;f.TRANSLATION_ENABLED&&(q=f.UTILITIES.add_URL_parameter(q,"translate","1"));k.close_button_ok(b)&&(S=function(a){c.hide_backside(a);a.stopPropagation()},T=(T=k.get_description())?"the "+k.get_type_name()+" who "+T:"the "+k.get_type_name(),x=f.UTILITIES.create_close_button(S,
"Click to hide this back side of "+T+"."),b.appendChild(x));$(u).addClass("toontalk-green-flag toontalk-green-flag-inactive").click(function(a){k.can_run()?(J(!0),k.set_running(!0),N()):k.is_of_type("top-level")?f.UTILITIES.display_message("There is nothing to run."):f.UTILITIES.display_message("This "+k.get_type_name()+" has nothing to run. Add some robots on the back.")}).on("mouseenter",N);$(e).addClass("toontalk-stop-sign toontalk-stop-sign-active").click(function(a){J(!1);k.set_running(!1);G()}).on("mouseenter",
G);b.appendChild(u);b.appendChild(e);q&&(E=document.createElement("div"),$(E).addClass("toontalk-help-button notranslate toontalk-widget-help-button").click(function(a){I=document.createElement("iframe");$(I).addClass("toontalk-help-frame");I.src=q;document.body.appendChild(D);document.body.appendChild(I)}),E.innerHTML="i",E.translate=!1,E.title="Click to learn more about "+k.get_type_name()+".",D=document.createElement("div"),$(D).addClass("toontalk-close-help-frame-button").button().click(function(a){$(I).remove();
$(D).remove()}),D.innerHTML="Return to ToonTalk",b.appendChild(E));A&&b.appendChild(A);k.is_of_type("top-level")&&(t=document.createElement("div"),$(t).addClass("toontalk-settings-button").click(function(a){k.open_settings()}),t.title="Click to change settings or open a different program.",b.appendChild(t));f.UTILITIES.set_timeout(F);p.addClass("toontalk-backside toontalk-side toontalk-backside-of-"+k.get_type_name());p.css({"z-index":f.UTILITIES.next_z_index()});c.get_element=function(){return b};
c.get_widget=function(){return k};c.visible=function(){return a};c.set_visible=function(b){var c=this.get_widget().get_backside_widgets();a=b;c.forEach(function(a){a.set_visible(b)})};k.get_backside||(k.get_backside=function(){return c});c.get_parent_of_backside=function(){return k.get_parent_of_backside()};c.get_parent_of_frontside=function(){return k.get_parent_of_frontside()};c.get_frontside=function(){return k.get_frontside()};c.get_frontside_element=function(){return k.get_frontside_element()};
k.removed_from_container||(k.removed_from_container=function(a,b,c,d){f.robot.in_training||this.remove_backside_widget(a,b,d)});c.widget_dropped_on_me=function(a,c,d,g,e){var h=this.get_widget(),n,l;c?(n=a.get_backside(!0),l=n.get_element(),n.rerender()):(n=a.get_frontside(!0),l=n.get_element(),a.rerender());n=$(l);p.append(n);this.is_of_type("top-level")?g&&!g.visible()&&n.addClass("toontalk-widget-added-to-backside-by-unwatched-robot"):d||a.animate_to_element(b);f.UTILITIES.set_position_is_absolute(l,
!0,d);f.robot.in_training&&!e&&d&&f.robot.in_training.dropped_on(a,this.get_widget());c&&"top-level"!=this.get_widget().get_type_name()&&(g=a.get_backside(),a.forget_backside(),a.remove(d),a.set_backside(g));h.add_backside_widget(a,c);a.dropped_on_other&&a.dropped_on_other(this.get_widget(),!0,d);a.get_body&&a.get_body().is_empty()&&!a.being_trained&&(g=a.open_backside())&&$(g.get_element()).find(".toontalk-train-backside-button").click();d&&a.get_widget().backup_all();return!0};c.add_backside_widgets=
function(a,b){0!==a.length&&f.UTILITIES.set_timeout(function(){var c,d,g=this.visible();a.forEach(function(a,e){var h=a.get_widget().get_backside();c=a.get_element(!0);c.toontalk_widget=a.get_widget();b&&(d=b[e])&&(a.is_backside()?($(c).css({left:d.backside_left,top:d.backside_top,width:d.backside_width,height:d.backside_height}),a.get_widget().apply_backside_geometry(),d.advanced_settings_open&&h.set_advanced_settings_showing(!0,h.get_element())):(0===d.frontside_width&&(d.frontside_width=""),0===
d.frontside_height&&(d.frontside_height=""),$(c).css({left:d.frontside_left,top:d.frontside_top,width:d.frontside_width,height:d.frontside_height})));p.append(c);a.set_visible(g);a.get_widget().rerender()})}.bind(this))};c.get_backside_dimensions=function(){if(l)return{x_scale:l,y_scale:h,original_width:g,original_height:n}};c.set_dimensions=function(a){l=a.x_scale;h=a.y_scale;g=a.original_width;n=a.original_height};c.scale_to_fit=function(a,b){var c;!g&&this.get_widget().backside_geometry&&(g=this.get_widget().backside_geometry.original_width,
n=this.get_widget().backside_geometry.original_height);c=f.UTILITIES.scale_to_fit(a,b,g,n);l=c.x_scale;h=c.y_scale};c.run_status_changed=function(a){J(a)};b.toontalk_widget=k;f.UTILITIES.drag_and_drop(b);p.resizable({start:function(){d=p.width();w=p.height();g||(g=d);n||(n=w)},resize:function(a,b){var c=b.size.width,e=b.size.height;p.is(".toontalk-top-level-backside")||(l*=c/d,h*=e/w,d=c,w=e,f.backside.scale_backside(p,l,h,g,n))},handles:"e,s,se"});b.addEventListener("mouseenter",function(a){var b=
k.get_frontside(),c=k.get_parent_of_backside();!b||c&&!c.get_widget().is_of_type("top-level")||f.UTILITIES.highlight_element(b.get_element(),a)});b.addEventListener("mouseleave",function(a){k.is_of_type("top-level")||f.UTILITIES.remove_highlight()});c.update_display=function(){c.display_updated()};c.display_updated=function(){var a=$(this.get_element());g||(g=a.width());n||(n=a.height())};k.get_backside_widgets&&(A=k.get_backside_widgets(),c.add_backside_widgets(A,k.get_backside_widgets_json_views()));
f.debugging&&(b.id=k.debug_id);return c},toString:function(){return"backside of "+this.get_widget()},remove_element:function(){$(this.get_element()).remove()},create_infinite_stack_check_box:function(k,c){var b=f.UTILITIES.create_check_box(c.get_infinite_stack(),"toontalk-infinite-stack-check-box","Copy when dragged.","Check this if you want the "+c.get_type_name()+" to be copied instead of moved.");$(b.button).click(function(p){var l=b.button.checked;c.set_infinite_stack(l);f.robot.in_training&&
f.robot.in_training.edited(c,{setter_name:"set_infinite_stack",argument_1:l,toString:l?"change dragging to make a copy of ":"change dragging back to moving for ",button_selector:".toontalk-infinite-stack-check-box"});p.stopPropagation()});return b},create_description_label:function(k,c){var b=c.get_description();if(b)return f.UTILITIES.create_text_element("Back side of a "+c.get_type_name()+" that "+b)},add_advanced_settings:function(k){var c=this.get_widget(),b=this.create_infinite_stack_check_box(this,
c),p=c.get_type_name(),l=f.UTILITIES.create_text_area(c.get_description(),"toontalk-description-input","This&nbsp;"+p+"&nbsp;","Type here to provide additional information about this "+p+"."),h=$("<button>Make a sensor</button>").button(),u=function(){var b=l.button.value.trim();c.set_description(b,!0)&&f.robot.in_training&&f.robot.in_training.edited(c,{setter_name:"set_description",argument_1:b,toString:"change the description to '"+b+"'' of the "+p,button_selector:".toontalk-description-input"})},
e=document.createElement("table"),q=this.get_element();$(e).addClass("toontalk-advanced-setting");$(l.button).val(c.get_description());l.button.addEventListener("change",u);l.button.addEventListener("mouseout",u);h.click(function(b){b=f.sensor.create("click","which",void 0,void 0,!0,c);var a=b.get_frontside_element(!0),g=h.offset();c.add_to_top_level_backside(b,!0);g.left-=120;f.UTILITIES.set_absolute_position($(a),g)});h.attr("title","Click to create a nest which receives messages when events happen to this "+
c.get_type_name()+".");e.appendChild(f.UTILITIES.create_row(l.container));e.appendChild(f.UTILITIES.create_row(h.get(0),b.container));q.appendChild(e);k?$(q).find(".toontalk-settings-backside-button").remove():$(q).find(".toontalk-advanced-setting").hide()},get_type_name:function(){return"the backside of "+f.UTILITIES.add_a_or_an(this.get_widget().get_type_name())},hide_backside:function(k){var c=this.get_widget(),b=c.get_frontside_element(),p=$(c.get_backside_element()),l=p.position(),h=p.parent().closest(".toontalk-backside"),
u=c.get_parent_of_backside();f.UTILITIES.remove_highlight();u&&(u.is_backside()?c.set_parent_of_backside(void 0,!0):u.removed_from_container(c,!0,k,!0),c.forget_backside&&c.forget_backside());(function(){var b=c.get_backside_widgets(),h=c.get_backside_widgets_json_views(!0),f;b.forEach(function(a,b){a.get_widget();var c;if(f=a.get_element())h[b]||(h[b]={}),a.start_position?(c=a.start_position,a.start_position=void 0):c=$(f).position(),a.is_backside()?(h[b].backside_left=c.left,h[b].backside_top=c.top):
(h[b].frontside_left=c.left,h[b].frontside_top=c.top)})})();c.backside_geometry=this.get_backside_dimensions();(function(c){var l=$(b).offset(),p=h.position(),a=function(){c.remove()};c.is(":visible")&&(c.addClass("toontalk-side-appearing"),f.UTILITIES.add_one_shot_event_handler(c.get(0),"transitionend",2500,a),p||(p={left:0,top:0}),c.css({left:l.left-p.left,top:l.top-p.top,opacity:.1}))})(p);$(b).is(":visible")||(l&&$(b).css({left:l.left,top:l.top}),f.UTILITIES.widget_from_jquery(h).add_backside_widget(c),
h.append(b),c.render());c.backside_widgets&&c.backside_widgets.forEach(function(b){b.set_visible(!1)})},create_advanced_settings_button:function(k,c){var b=document.createElement("div"),p=$(b),l=!1;b.innerHTML="&gt;";p.addClass("toontalk-settings-backside-button");p.css({"z-index":f.UTILITIES.next_z_index()});p.click(function(b){l=!l;this.set_advanced_settings_showing(l,k.get_element(),p);b.stopPropagation()}.bind(this));p.attr("title","Click to see the advanced settings of this "+c.get_type_name()+
".");return p.get(0)},set_advanced_settings_showing:function(f,c,b){b||(b=$(c).find(".toontalk-settings-backside-button"));f?($(c).find(".toontalk-advanced-setting").show(),b.html("<"),b.attr("title","Click to hide the advanced settings.")):($(c).find(".toontalk-advanced-setting").hide(),b.html(">"),b.attr("title","Click to show the advanced settings."))},get_widgets:function(){var f=[];$(this.get_element()).children().each(function(c,b){var p=b.toontalk_widget;p&&0>f.indexOf(p)&&f.push(p)});return f},
scale_backside:function(f,c,b,p,l){var h=Math.min(1,c,b);1===c&&1===b?f.css({width:"",height:""}):f.css({transform:"scale("+h+", "+h+")","transform-origin":"top left",width:p*c/h,height:l*b/h})},render:function(){f.DISPLAY_UPDATES.pending_update(this)},rerender:function(){this.visible()&&f.DISPLAY_UPDATES.pending_update(this)},remove_backside_widget:function(f,c,b){return this.get_widget().remove_backside_widget(f,c,b)},remove:function(){this.get_widget().remove()},is_backside:function(){return!0},
get_parent:function(){return this.get_parent_of_backside()},is_of_type:function(f){return this.get_widget().is_of_type(f)}}}(window.TOONTALK);window.TOONTALK.frontside=function(f){return{create:function(k){var c=Object.create(this),b=document.createElement("div"),p=$(b),l;$(b).addClass("toontalk-frontside toontalk-side");b.toontalk_widget=k;f.UTILITIES.drag_and_drop(b);c.get_element=function(){return b};c.get_widget=function(){return k};c.visible=function(){return l};c.set_visible=function(b){var c=this.get_widget();l=b;c.walk_children&&c.walk_children(function(c){c.set_visible(b);return!0})};b.addEventListener("click",function(b){$(b.target).is(".ui-resizable-handle")||
1!==b.which||(p.is(".toontalk-top-level-resource")?k.set_running(!k.get_running()):k.get_running()?f.debugging&&console.log("Ignoring click on running widget."):k.open_backside(),b.stopPropagation())});b.addEventListener("mouseenter",function(b){var c=k.get_backside();c&&f.UTILITIES.highlight_element(c.get_element(),b)});b.addEventListener("mouseleave",function(b){k.get_backside()&&f.UTILITIES.remove_highlight()});f.debugging&&(b.id=k.debug_id);return c},update_display:function(){return this.get_widget().update_display()},
remove:function(){$(this.get_element()).remove()}}}(window.TOONTALK);window.TOONTALK.number=function(f){var k=Object.create(f.widget),c=function(a,b,c,d){var e="",h=100;c=50/c;b/=1+b;if(d)for(d=0;h>=c&&d<a.length;)e=e+"<span class='toontalk-digit' style='font-size:"+h+"%'>"+a[d]+"</span>",d+=1,"-"!==a[d]&&(h*=b);else for(d=a.length-1;h>=c&&0<d;)e="<span class='toontalk-digit' style='font-size:"+h+"%'>"+a[d]+"</span>"+e,--d,"-"!==a[d]&&(h*=b);return e},b=function(a,b){var c=a/(1+a);return Math.ceil(Math.log(.5/b)/Math.log(c))},p=function(a,b,e){if(a.length<=Math.round(b))return'<span class="toontalk-digit" style="font-size:100%">'+
a+"</span>";if(1>b)return"";if(5>b)return"<span style='font-size: 80%'>"+p(a,1.25*b,.8*e)+"</span>";b=b/2-1;return c(a,b,e,!0)+c(a,b,e,!1)},l=function(a,b,c){var d="",e=new BigInteger(10),f=a.isNegative();for(f&&(a=a.abs());c>d.length;)if(a=a.multiply(e),0>a.compare(b))d+="0";else if(d+=a.divide(b).toString(),a=a.remainder(b).multiply(e),a.isZero())return f&&(d="-"+d),d=h(d);f&&(d="-"+d);return d},h=function(a){return 0<a.length&&"0"===a.charAt(a.length-1)?h(a.substring(0,a.length-1)):a},u=function(a,
b){var c=Math.min(b,a/2);return a-(c+1)},e=function(a,b){b||(b=1);if(!("number"!==typeof a&&"string"!==typeof a||"number"!==typeof b&&"string"!==typeof b))return bigrat.fromValues(a,b);var c=bigrat.create();1===b?bigrat.set(c,bigrat.toBigInteger(a.get_value()),BigInteger.ONE):a.get_value&&b.get_value?bigrat.set(c,bigrat.toBigInteger(a.get_value()),bigrat.toBigInteger(b.get_value())):bigrat.set(c,a,b);return c},q=function(a){switch(a){case "+":return"";case "-":return"&minus;";case "*":return"&times;";
case "/":return"&divide;";case "^":return"^";default:return f.UTILITIES.report_internal_error("Number has an unsupported operator: "+a),""}},t=bigrat.fromInteger(10);k.create=function(a,b,c,d,h){var l=Object.create(k),p=e(a,b);d||(d="improper_fraction");c||(c="+");l.set_value=function(a){if(!bigrat.equals(p,a))return this.fire_value_change_listeners(p,a),p=a,this.rerender(),f.debugging&&(this.debug_string=this.toString()),this};l.set_value_from_sub_classes=l.set_value;l.fire_value_change_listeners=
function(a,b){var c=this.get_listeners("value_changed"),d;c&&(d={type:"value_changed",old_value:a,new_value:b},c.forEach(function(a){a(d)}))};l.get_value=function(){return p};l.set_value_from_decimal=function(a){"number"===typeof a?this.set_value(bigrat.fromInteger(a)):this.set_value(bigrat.fromDecimal(a))};l.get_format=function(){return d};l.set_format=function(a,b){d=a;b&&this.rerender();return this};l.get_operator=function(){return c};l.set_operator=function(a,b){c=a;b&&this.rerender();return this};
l=k.add_standard_widget_functionality(l);l.set_description(h);f.debugging&&(l.debug_string=l.toString(),l.debug_id=f.UTILITIES.generate_unique_id(),p.debug_id_new=l.debug_id);return l};k.create_backside=function(){return f.number_backside.create(this)};k.set_from_values=function(a,b){return this.set_value(e(a,b))};k.ONE=function(){return this.create(1)};k.ZERO=function(){return this.create(0)};k.copy=function(a){return this.add_to_copy(k.create(this.get_value()[0],this.get_value()[1],this.get_operator(),
this.get_format(),this.get_description()),a)};k.is_number=function(){return!0};k.equals=function(a){return a.equals_number&&a.equals_number(this)};k.equals_number=function(a){return bigrat.equals(this.get_value(),a.get_value())};k.compare_with=function(a){if(a.compare_with_number)return-1*a.compare_with_number(this)};k.compare_with_number=function(a){return bigrat.equals(this.get_value(),a.get_value())?0:bigrat.isGreaterThan(this.get_value(),a.get_value())?1:-1};k.update_display=function(){var a,
b,c,d,e;a=this.get_frontside(!0).get_element();$(a).is(".toontalk-conditions-contents")?b=$(a):$(a).parent().is(".toontalk-backside, .toontalk-json")?(b=$(a),e=!0):b=$(a).parent().is(".toontalk-scale-half")?$(a):$(a).parent();if($(a).is(".toontalk-carried-by-bird"))c=100,d=40;else if($(a).is(".toontalk-element-attribute"))c=200,d=32;else{if(!b.is(":visible"))return;c=b.width();d=b.height();if(0===c||0===d)return;b.is(".toontalk-nest")&&(c*=.8,d*=.8)}$(a).removeClass("toontalk-number-eighth-size-border toontalk-number-quarter-size-border toontalk-number-half-size-border toontalk-number-full-size-border");
32>=c||32>=d?($(a).addClass("toontalk-number-eighth-size-border"),a.toontalk_border_size=4):64>=c||64>=d?($(a).addClass("toontalk-number-quarter-size-border"),a.toontalk_border_size=8):128>=c||128>=d?($(a).addClass("toontalk-number-half-size-border"),a.toontalk_border_size=16):($(a).addClass("toontalk-number-full-size-border"),a.toontalk_border_size=32);b=d-2*a.toontalk_border_size;e=this.to_HTML(c/(.64*b),b,this.get_format(),!0,this.get_operator(),e);f.UTILITIES.on_a_nest_in_a_box(a)&&(c="width:"+
c+"px;",b=e.indexOf('style="'),e=0<=b?e.substring(0,b+7)+c+e.substring(b+7):e);c=$(a).children(".toontalk-widget");c.is("*")?c=c.get(0):(c=document.createElement("div"),a.appendChild(c));c.innerHTML=e;c.translate=!1;$(c).addClass("toontalk-widget notranslate");a.title=this.get_title();(a=this.get_backside())&&a.rerender()};k.to_HTML=function(a,g,e,d,h,f){var k,E,I,D,J,F,G=!1!==d?" toontalk-top-level-number":"";f&&(G+=" toontalk-number-size-unconstrained-by-container");E=h?q(h):"";a||(a=4);g||(g=16);
if(this.get_erased&&this.get_erased())return'<div class="toontalk-number toontalk-integer'+G+'" style="font-size: '+g+'px;"></div>';0<E.length&&(--a,2>a&&(g*=Math.max(1,a)/2,a=2));if(this.is_integer()&&"scientific_notation"!==e)return k=bigrat.toBigInteger(this.get_value()).toString(),I=k.length,0<E.length&&I++,4>a&&I>a&&(I=Math.min(4,I),g*=a/I,a=I),'<div class="toontalk-number toontalk-integer'+G+'" style="font-size: '+g+'px;">'+E+p(k,a,g)+"</div>";k=' style="font-size:'+.4*g+'px;"';if("improper_fraction"===
e||!e)return g='<table class="toontalk-number toontalk-improper-fraction'+G+'"'+k+'><tr class="toontalk-numerator"><td align="center" class="toontalk-number">'+p(this.numerator_string(),2*a,g)+'</td></tr><tr class="toontalk-fraction-line-as-row"><td  class="toontalk-fraction-line-as-table-entry"><div class="toontalk-fraction-line"></div></tr><tr class="toontalk-denominator"><td align="center" class="toontalk-number">'+p(this.denominator_string(),2*a,g)+"</td></tr></table>",""===E?g:"<table class='toontalk-operator-and-fraction'"+
k+"><tr><td>"+E+"</td><td>"+g+"</td></tr></table>";if("mixed_number"===e||"proper_fraction"===e){E=this.integer_part();if(E.is_zero())return this.to_HTML(a,g,"improper_fraction",d,h);I=this.copy({just_value:!0}).subtract(E).absolute_value();return'<table class="toontalk-number toontalk-mixed-number'+G+'"'+k+'><tr><td class="toontalk-number toontalk-integer-part-of-mixed-number">'+E.to_HTML(a/2,g,"",!1,this.get_operator())+'</td><td class="toontalk-number toontalk-fraction-part-of-mixed-number">'+
I.to_HTML(a/2,g,"improper_fraction",!1)+"</td></tr></table>"}if("decimal"===e)return 4>a&&(g*=Math.max(1,a)/4,a=4),'<div class="toontalk-number toontalk-decimal'+G+'" style="font-size: '+g+'px;">'+E+this.decimal_string(a,g)+"</div>";if("scientific_notation"===e){I=bigrat.isNegative(this.get_value());D=this.get_value();J=bigrat.abs(bigrat.create(),D);D=bigrat.isLessThan(J,bigrat.ONE);J=(D?bigrat.toBigInteger(bigrat.divide(bigrat.create(),bigrat.ONE,J)):bigrat.toBigInteger(J)).toString();D=D?-J.length:
J.length-1;J=bigrat.power(bigrat.create(),t,D);F=bigrat.divide(bigrat.create(),this.get_value(),J);J=6+(0===D?1:Math.ceil(Math.log10(Math.abs(D)))/2);I&&J++;if(a<J+1)return this.to_HTML(J+1,g*a/(J+1),e,d,h,f);d=b(u(a,J),g);d=l(F[0],F[1],d);I?(I=d.substring(0,2),d=d.substring(2)):(I=d.substring(0,1),d=d.substring(1));a=c(d,a*(1-J/a),g,!0);0<a.length&&(a="<span class='toontalk-decimal-point'>.</span>"+a);return'<table class="toontalk-number toontalk-scientific_notation'+G+'"'+k+'><tr><td class="toontalk-number toontalk-significand-of-scientific-notation"><div class="toontalk-number toontalk-decimal'+
G+'" style="font-size: '+g+'px;">'+E+I+a+'</td><td class="toontalk-number toontalk-exponent-of-scientific-notation"><div style="font-size: '+g+'px;"> &times;10<sup style="font-size: '+g/2+'px;">'+D+"</sup></div></td></tr></table>"}};k.drop_on=function(a,b,c,d){if(a.number_dropped_on_me)return a.number_dropped_on_me(this,b,c,d),!0;if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,b,c,d);console.log("No handler for drop of '"+this+"' on '"+a+"'")};k.number_dropped_on_me=function(a,b,c,d){var e,
h,l,p;return a.visible()&&(c||d&&d.visible())?(d&&(a.robot_waiting_before_next_step=d),e=document.createElement("div"),$(e).addClass("toontalk-bammer-down"),h=$(this.get_frontside_element()).closest(".toontalk-top-level-backside"),e.style.left="-10px",e.style.top=h.height()+"px",h.append(e),b=this.get_frontside_element(),l=$(b).offset(),l.left-=.75*$(e).width(),l.left+=.5*$(b).width()+.1*$(e).width(),l.top-=.5*$(b).height()+.4*$(e).height(),b=function(){this.number_dropped_on_me_semantics(a,c,d)&&
d&&d.run_next_step();c&&this.backup_all();$(e).removeClass("toontalk-bammer-down");f.UTILITIES.set_timeout(function(){var a=h.offset();a||(a={left:0,top:0});$(e).addClass("toontalk-bammer-away");l.left=a.left+h.width()-100;l.top=a.top+h.height()+100;p=function(){$(e).remove()};f.UTILITIES.animate_to_absolute_position(e,l,p);$(e).css({opacity:.01})})}.bind(this),f.UTILITIES.animate_to_absolute_position(e,l,b),$(e).css({opacity:1,"z-index":f.UTILITIES.next_z_index()+100}),this):this.number_dropped_on_me_semantics(a,
c,d)};k.number_dropped_on_me_semantics=function(a,b,c){f.robot.in_training&&b&&f.robot.in_training.dropped_on(a,this);a.remove();switch(a.get_operator()){case "+":return this.add(a);case "-":return this.subtract(a);case "*":return this.multiply(a);case "/":return this.divide(a);case "^":return this.power(a);default:f.UTILITIES.report_internal_error("Number received a number with unsupported operator: "+a.get_operator())}};k.widget_dropped_on_me=function(a,b,c,d){return a.number_dropped_on_me?this.number_dropped_on_me(a,
b,c,d):!1};k.add=function(a){this.set_value(bigrat.add(bigrat.create(),this.get_value(),a.get_value()));return this};k.subtract=function(a){this.set_value(bigrat.subtract(bigrat.create(),this.get_value(),a.get_value()));return this};k.multiply=function(a){this.set_value(bigrat.multiply(bigrat.create(),this.get_value(),a.get_value()));return this};k.divide=function(a){this.set_value(bigrat.divide(bigrat.create(),this.get_value(),a.get_value()));return this};k.power=function(a){this.set_value(bigrat.power(bigrat.create(),
this.get_value(),bigrat.toInteger(a.get_value())));return this};k.absolute_value=function(){this.set_value(bigrat.abs(bigrat.create(),this.get_value()));return this};k.is_zero=function(){return bigrat.equals(this.get_value(),bigrat.ZERO)};k.is_negative=function(){return bigrat.isNegative(this.get_value())};k.toString=function(){return("+"===this.get_operator()?"":this.get_operator())+bigrat.str(this.get_value())};k.to_float=function(){return bigrat.toDecimal(this.get_value())};k.get_type_name=function(){return"number"};
k.get_help_URL=function(){return"docs/manual/numbers.html"};k.get_json=function(){return{type:"number",operator:this.get_operator(),numerator:this.numerator_string(),denominator:this.denominator_string(),format:this.get_format()}};f.creators_from_json.number=function(a){return k.create(a.numerator,a.denominator,a.operator,a.format,a.description)};k.is_integer=function(){return 0===this.get_value()[1].compare(BigInteger.ONE)||0===this.get_value()[0].compare(BigInteger.ZERO)};k.numerator=function(){var a=
bigrat.create();return bigrat.set(a,this.get_value()[0],BigInteger.ONE)};k.denominator=function(){var a=bigrat.create();return bigrat.set(a,this.get_value()[1],BigInteger.ONE)};k.numerator_string=function(){return this.get_value()[0].toString()};k.denominator_string=function(){return this.get_value()[1].toString()};k.integer_part=function(){return this.create(this)};k.decimal_string=function(a,g){if(this.is_integer())return this.numerator_string();var e=k.copy.call(this),d=e.integer_part(),h=d.toString();
"0"===h&&this.is_negative()&&(h="-"+h);var f=e.subtract(d),d=u(a,h.length),q=b(d,g),e=Math.min(h.length,a/2),f=f.absolute_value(),q=l(f.get_value()[0],f.get_value()[1],q),d=q.length<a?q:c(q,d,g,!0);return p(h,e,g)+"<span class='toontalk-decimal-point'>.</span>"+d};k.match=function(a){return this.get_erased&&this.get_erased()?a.match_with_any_number?a.match_with_any_number():this:a.match_with_this_number?a.match_with_this_number(this):this};k.match_with_any_number=function(){return"matched"};k.match_with_this_number=
function(a){return a.equals(this)?"matched":a};return k}(window.TOONTALK);
window.TOONTALK.number_backside=function(f){return{create:function(k){var c=f.backside.create(k),b=c.get_element(),p=document.createElement("div"),l=k.numerator_string(),h=k.denominator_string(),u=f.UTILITIES.create_text_area(l,"toontalk-numerator-input","","Type here to edit the numerator"),e=f.UTILITIES.create_text_area(h,"toontalk-denominator-input","","Type here to edit the denominator"),q=f.UTILITIES.create_radio_button("number_format","decimal","toontalk-decimal-radio-button","Decimal number",
"Display number as a decimal."),t=f.UTILITIES.create_radio_button("number_format","proper_fraction","toontalk-proper-fraction-radio-button","Mixed number","Display number as an integer part and a proper fraction."),a=f.UTILITIES.create_radio_button("number_format","improper_fraction","toontalk-improper-fraction-radio-button","Improper fraction","Display number as a simple fraction."),g=f.UTILITIES.create_radio_button("number_format","scientific_notation","toontalk-scientific-notation-radio-button",
"Scientific notation","Display number as a decimal between 1 and 10 multiplied by ten to some power."),n=f.UTILITIES.create_radio_button("operator","+","toontalk-plus-radio-button","+","Add me to what I'm dropped on."),d=f.UTILITIES.create_radio_button("operator","-","toontalk-minus-radio-button","&minus;","Subtract me from what I'm dropped on."),w=f.UTILITIES.create_radio_button("operator","*","toontalk-times-radio-button","&times;","Multiply me with what I'm dropped on."),x=f.UTILITIES.create_radio_button("operator",
"/","toontalk-dividie-radio-button","&divide;","Divide me into what I'm dropped on."),A=f.UTILITIES.create_radio_button("operator","^","toontalk-power-radio-button","Integer power","Use me as the number of times to multiply together what I'm dropped on."),E=function(a){var b=u.button.value.trim(),c=e.button.value.trim();if(b!==l||c!==h)k.set_from_values(b,c),l=b,h=c,f.robot.in_training&&(a=a.srcElement.className.split(" ",1)[0],f.robot.in_training.edited(k,{setter_name:"set_from_values",argument_1:b,
argument_2:c,toString:"toontalk-denominator-input"===a?"change value of the denominator to "+c+" of the number":"change value of the numerator to "+b+" of the number",button_selector:"."+a}))},I=function(){var b=f.UTILITIES.selected_radio_button(q.button,t.button,a.button,g.button),c=b.value;k.set_format(c,!0);f.robot.in_training&&f.robot.in_training.edited(k,{setter_name:"set_format",argument_1:c,toString:"change the format to "+c+" of the number",button_selector:"."+b.className.split(" ",1)[0]})},
D=function(){var a=f.UTILITIES.selected_radio_button(n.button,d.button,w.button,x.button,A.button),b=a.value;k.set_operator(b,!0);f.robot.in_training&&f.robot.in_training.edited(k,{setter_name:"set_operator",argument_1:b,toString:"change the operator to "+b+" of the number",button_selector:"."+a.className.split(" ",1)[0]})},J=f.UTILITIES.create_horizontal_table(u.container,p,e.container),F=$(f.UTILITIES.create_horizontal_table(q.container,t.container,a.container,g.container)).buttonset().get(0),G=
$(f.UTILITIES.create_horizontal_table(n.container,d.container,w.container,x.container,A.container)).buttonset().get(0),N=f.backside.create_advanced_settings_button(c,k),T=c.update_display;p.innerHTML="/";$(p).addClass("ui-widget");b.appendChild(J);b.appendChild(N);u.button.addEventListener("change",E);u.button.addEventListener("mouseout",E);u.button.addEventListener("mouseenter",function(){l=u.button.value.trim();h=e.button.value.trim()});e.button.addEventListener("change",E);e.button.addEventListener("mouseout",
E);q.button.addEventListener("change",I);t.button.addEventListener("change",I);a.button.addEventListener("change",I);g.button.addEventListener("change",I);switch(k.get_format()){case "decimal":f.UTILITIES.check_radio_button(q);break;case "improper_fraction":f.UTILITIES.check_radio_button(a);break;case "mixed_number":case "proper_fraction":f.UTILITIES.check_radio_button(t);break;case "scientific_format":f.UTILITIES.check_radio_button(g)}switch(k.get_operator()){case "+":f.UTILITIES.check_radio_button(n);
break;case "-":f.UTILITIES.check_radio_button(d);break;case "*":f.UTILITIES.check_radio_button(w);break;case "/":f.UTILITIES.check_radio_button(x);break;case "^":f.UTILITIES.check_radio_button(A)}n.button.addEventListener("change",D);d.button.addEventListener("change",D);w.button.addEventListener("change",D);x.button.addEventListener("change",D);A.button.addEventListener("change",D);c.update_display=function(){$(u.button).val(k.numerator_string());$(e.button).val(k.denominator_string());T()};$(F).addClass("toontalk-advanced-setting");
$(G).addClass("toontalk-advanced-setting");b.appendChild(F);b.appendChild(G);c.add_advanced_settings();return c}}}(window.TOONTALK);window.TOONTALK.box=function(f){var k=Object.create(f.widget);k.create=function(c,b,p,l){var h=Object.create(k),u=[],e;"undefined"===typeof b&&(b=!0);h.get_horizontal=function(){return b};h.set_horizontal=function(c,e){b=c;e&&($(this.get_frontside_element()).children(".toontalk-side").remove(),this.rerender());return this};h.get_hole=function(b){return u[b]};h.get_hole_contents=function(b){return u[b].get_contents()};h.set_hole=function(b,c,a){u[b].set_contents(c);a&&(c&&c.save_dimensions(),this.update_hole_display(b,
c));this.rerender();f.debugging&&(this.debug_string=this.toString())};h.get_holes=function(){return u};h.temporarily_remove_contents=function(b,c){var a=this.get_index_of(b);this.temporarily_removed_contents||(this.temporarily_removed_contents=[]);this.temporarily_removed_contents[a]=b;this.set_hole(a,void 0,c);return function(){this.set_hole(a,b,c);this.temporarily_removed_contents[a]=void 0}.bind(this)};h.get_contents_temporarily_removed=function(b){if(this.temporarily_removed_contents)return this.temporarily_removed_contents[b]};
h.set_contents=function(b){b.forEach(function(b,a){u[a].set_contents(b)})};h.get_size=function(){return c};h.set_size=function(b,e){var a;if(c===b)return!1;u.length=b;if(b>c)for(a=c;a<b;a++)u[a]=f.box_hole.create(a),u[a].set_parent_of_frontside(h);c=b;e&&this.rerender();f.debugging&&(this.debug_string=this.toString());return!0};h.copy=function(e){var h=u.map(function(a){if(a=a.get_contents())return a.copy(e)}),h=k.create(c,b,h,this.get_description());return this.add_to_copy(h,e)};h=h.add_standard_widget_functionality(h);
for(e=0;e<c;e++)u[e]=f.box_hole.create(e),u[e].set_parent_of_frontside(h);h.set_description(l);h.set_contents(p);f.debugging&&(h.debug_string=h.toString(),h.debug_id=f.UTILITIES.generate_unique_id());return h};k.create_backside=function(){return f.box_backside.create(this)};k.equals=function(c){return c.equals_box&&c.equals_box(this)};k.equals_box=function(c){var b=this.get_size(),f,l,h;if(b!==c.get_size())return!1;for(f=0;f<b;f++)if(l=this.get_hole_contents(f),h=c.get_hole_contents(f),!l&&h||l&&
!h||l&&h&&(!l.equals||!l.equals(h)))return!1;return!0};k.compare_with=function(c){if(c.compare_with_box)return-1*c.compare_with_box(this)};k.compare_with_box=function(c){var b=this.get_size(),f=c.get_size(),l,h;if(b>f)return 1;if(b<f)return-1;for(f=0;f<b;f++){l=this.get_hole_contents(f);h=c.get_hole_contents(f);if(l&&!h)return 1;if(!l&&h)return-1;if(l&&h)if(l.compare_with){if(l=l.compare_with(h),1===l||-1===l)return l}else return}return 0};k.match=function(c){return this.get_erased&&this.get_erased()?
c.match_with_any_box?c.match_with_any_box():this:c.match_with_this_box?c.match_with_this_box(this):this};k.match_with_any_box=function(){return"matched"};k.match_with_this_box=function(c){var b=this.get_size(),p=[],l,h,k;if(b!==c.get_size())return c;for(l=0;l<b;l++)if(k=c.get_hole_contents(l)){h=this.get_hole_contents(l);if(!h)return c;h=f.UTILITIES.match(k,h);if(h.is_widget)return h;"matched"!==h&&(p=0===p.length?h:p.concat(h))}return 0<p.length?p:"matched"};k.toString=function(){var c="",b=this.get_size(),
f,l,h=this.get_type_name()+" that looks like ";for(f=0;f<b;f++)l=this.get_hole(f),c+=l.get_full_description(),f<b-1&&(c+=" | ");return h+"["+c.replace(h,"")+"]"};k.get_type_name=function(){return"box"};k.get_help_URL=function(){return"docs/manual/boxes.html"};k.get_json=function(c){var b=[],p=this.get_size(),l;for(l=0;l<p;l++)this.get_hole_contents(l)?b[l]=f.UTILITIES.get_json(this.get_hole_contents(l),c):b[l]=null;return{type:"box",size:p,contents:b,horizontal:this.get_horizontal()}};k.walk_children=
function(c){var b=this.get_size(),f;for(f=0;f<b&&c(this.get_hole(f));f++);};f.creators_from_json.box=function(c,b){return k.create(c.size,c.horizontal,f.UTILITIES.create_array_from_json(c.contents,b),c.description)};k.update_display=function(){var c=this.get_frontside(!0).get_element(),b=this.get_size(),k=function(b,c,e){var h=c.get_frontside_element(!0),k,p;l?(k=q*e,1<e&&(k+=n*(e-1)),p=0):(k=0,p=a*e,1<e&&(p+=n*(e-1)));$(b).css({left:k,top:p,width:q,height:a});b!==h&&($(h).css({left:0,top:0,width:"",
height:""}),b.appendChild(h));f.UTILITIES.has_animating_image(h)||(0<e&&($(b).removeClass("toontalk-box-eighth-size-border-left toontalk-box-quarter-size-border-left toontalk-box-half-size-border-left toontalk-box-full-size-border-left"),$(b).removeClass("toontalk-box-eighth-size-border-top toontalk-box-quarter-size-border-top toontalk-box-half-size-border-top toontalk-box-full-size-border-top"),l?$(b).addClass(g+"-left"):$(b).addClass(g+"-top")),b.toontalk_border_size=n);c.render()},l=this.get_horizontal();
$(c).is(".toontalk-box");var h=function(){var a=$(c).children(".toontalk-box-hole");a.length===b?a.each(function(a,b){k(b,this.get_hole(a),a)}.bind(this)):(a.remove(),this.get_holes().forEach(function(a,b){u=a.get_element();$(u).addClass("toontalk-hole-number-"+b);k(u,a,b);c.appendChild(u)}))}.bind(this),u,e,q,t,a,g,n;$(c).addClass("toontalk-box");$(c).removeClass("toontalk-box-eighth-size-border toontalk-box-quarter-size-border toontalk-box-half-size-border toontalk-box-full-size-border");c.title=
this.get_title();f.debugging&&(this.debug_string=this.toString());this.get_erased()?($(c).addClass("toontalk-box-erased"),$(c).children(".toontalk-side").remove()):($(c).removeClass("toontalk-box-erased"),e=$(c).width(),t=$(c).height(),l?(q=e/b,a=t):(q=e,a=t/b),32>=q||32>=a?(g="toontalk-box-eighth-size-border",n=4):64>=q||64>=a?(g="toontalk-box-quarter-size-border",n=8):128>=q||128>=a?(g="toontalk-box-half-size-border",n=16):(g="toontalk-box-full-size-border",n=32),l?q-=(b-1)*n/b:a-=(b-1)*n/b,$(c).addClass(g),
c.toontalk_border_size=n,f.UTILITIES.set_timeout(h))};k.update_hole_display=function(c,b){var f=this.get_frontside_element(),f=$(f).children(".toontalk-hole-number-"+c),l;f.empty();b&&(l=b.get_frontside_element(!0),f.append(l),$(l).css({left:0,top:0}),b.rerender())};k.drop_on=function(c,b,f){if(c.box_dropped_on_me)return b=c.box_dropped_on_me(this,f),f&&c.rerender(),this.remove(),b;if(c.widget_dropped_on_me)return c.widget_dropped_on_me(this,b,f);console.log("No handler for drop of "+this+" on "+
c)};k.box_dropped_on_me=function(c,b){console.log("box on box not yet implemented");return!1};k.widget_dropped_on_me=function(c,b,k,l){var h=this.get_horizontal(),u=this.get_frontside_element(),e=this.get_size(),q,t,a;if(0!==e){t=$(u).offset();u=h?$(u).width()/e:$(u).height()/e;a=h?t.left:t.top;if(k)for(q=0;q<e;q++)if(t=this.get_hole(q),a+=u,(h?k.pageX<=a:k.pageY<=a)||q+1===e)return(h=t.get_contents())?c.drop_on(h,b,k,l):t.widget_dropped_on_me(c,b,k,l);f.UTILITIES.report_internal_error(c+" dropped on "+
this+" but no event was provided.")}};k.get_index_of=function(c){return c.get_parent_of_frontside().get_index()};k.removed_from_container=function(c,b,k,l){b=!!k;"undefined"===typeof l&&(l=this.get_index_of(c));0<=l?(this.set_hole(l,void 0,b),b&&(this.rerender(),c.restore_dimensions())):f.UTILITIES.report_internal_error("Attempted to remove "+c+" from "+this+" but not found.")};k.get_path_to=function(c,b){var k=this.get_size(),l,h;if("empty hole"===c.get_type_name()){k=c.get_parent_of_frontside();
h=f.box.path.create(c.get_index());if(k===this)return h;k=this.get_path_to(k);k.next=h;return k}for(l=0;l<k;l++)if(h=this.get_hole_contents(l)||this.get_contents_temporarily_removed(l)){if(c===h||h.top_contents_is&&h.top_contents_is(c))return f.box.path.create(l);if(h.get_path_to&&(h=h.get_path_to(c,b)))return k=f.box.path.create(l),k.next=h,k}};k.dereference=function(c,b,k){var l,h;if(c){l=c.get_index&&c.get_index();if(!f.debugging||"number"===typeof l){if(h=this.get_hole_contents(l)){if(h.dereference_contents&&
!c.not_to_be_dereferenced)return h.dereference_contents(c,b,k);if(c.next){if(h.dereference)return h.dereference(c.next,b,k);f.UTILITIES.report_internal_error("Expected to refer to a part of "+h+" but it lacks a method to obtain "+f.path.toString(c.next))}c.removing_widget&&("empty hole"===h.get_type_name()?f.UTILITIES.report_internal_error("Robot is trying to remove something from an empty hole. "):h.get_infinite_stack()||k.remove_from_container(h,this));return h}return this.get_hole(l)}f.UTILITIES.report_internal_error(this+
" unable to dereference the path: "+f.path.toString(c))}else return this};k.path={create:function(c){return{get_index:function(){return c},toString:function(){return"scale"===this.true_type?0===c?"the left side of the scale ":"the right side of the scale ":"the "+f.UTILITIES.cardinal(c)+" hole "},get_json:function(b){return{type:"box_path",index:c,true_type:this.true_type,next:this.next&&this.next.get_json(b)}}}}};f.creators_from_json.box_path=function(c,b){var p=k.path.create(c.index);c.next&&(p.next=
f.UTILITIES.create_from_json(c.next,b));c.true_type&&(p.true_type=c.true_type);return p};return k}(window.TOONTALK);
window.TOONTALK.box_backside=function(f){return{create:function(k){var c=f.backside.create(k),b=f.UTILITIES.create_text_input(k.get_size().toString(),"toontalk-box-size-input","Number of holes","Type here to edit the number of holes."),p=f.UTILITIES.create_radio_button("box_orientation","horizontal","toontalk-horizontal-radio-button","Left to right","Show box horizontally."),l=f.UTILITIES.create_radio_button("box_orientation","vertical","toontalk-vertical-radio-button","Top to bottom","Show box vertically."),
h=function(){var a=parseInt(b.button.value.trim(),10);k.set_size(a,!0)&&f.robot.in_training&&f.robot.in_training.edited(k,{setter_name:"set_size",argument_1:a,toString:"change the number of holes to "+a+" of the box",button_selector:".toontalk-box-size-input"})},u=function(){var a=f.UTILITIES.selected_radio_button(p.button,l.button),b=a.value,c="horizontal"===b;k.set_horizontal(c,!0);f.robot.in_training&&f.robot.in_training.edited(k,{setter_name:"set_horizontal",argument_1:c,toString:"change the orientation to "+
b+" of the box",button_selector:"."+a.className.split(" ",1)[0]})},e=c.get_element(),q=f.backside.create_advanced_settings_button(c,k),t=c.update_display;b.button.addEventListener("change",h);b.button.addEventListener("mouseout",h);p.button.addEventListener("change",u);l.button.addEventListener("change",u);c.update_display=function(){b.button.value=k.get_size().toString();k.get_horizontal()?f.UTILITIES.check_radio_button(p):f.UTILITIES.check_radio_button(l);t()};e.appendChild(b.container);e.appendChild($(f.UTILITIES.create_horizontal_table(p.container,
l.container)).buttonset().get(0));e.appendChild(q);c.add_advanced_settings();c.render();return c}}}(window.TOONTALK);
window.TOONTALK.box_hole=function(f){return{create:function(k){var c=Object.create(this),b,p,l;c.get_element=function(){l||(l=document.createElement("div"),l.className="toontalk-box-hole toontalk-frontside toontalk-side",l.toontalk_widget=c);return l};c.get_frontside=function(c){return b?b.get_frontside(c):this.get_element()};c.get_side_element=function(){return this.get_element()};c.get_frontside_element=function(c){return b?b.get_frontside_element(c):this.get_element()};c.get_frontside=function(){return this};
c.widget_dropped_on_me=function(b,c,e,l){c=this.get_parent_of_frontside();var k;f.robot.in_training&&e&&f.robot.in_training.dropped_on(b,this);e&&b.save_dimensions&&(b.save_dimensions(),b.set_size_attributes&&(k=$(this.get_element()),b.set_size_attributes(k.width(),k.height())));this.set_contents(b);b.dropped_on_other&&b.dropped_on_other(this,!1,e,l);c.render();return!0};c.get_json=function(){return null};c.add_to_json=function(b){return b};c.copy=function(b){return f.box_hole.create(k)};c.match=
function(){return"matched"};c.get_type_name=function(){return"empty hole"};c.is_of_type=function(b){return"empty hole"===b};c.get_index=function(){return k};c.get_contents=function(){return b};c.set_contents=function(h){var l=this.get_listeners("value_changed");l&&(b!==h&&l.forEach(function(c){c({type:"value_changed",old_value:b,new_value:h})}),b&&l.forEach(function(c){b.remove_listener("value_changed",c,!0)}),h&&l.forEach(function(b){h.add_listener("value_changed",b)}));b&&b.set_parent_of_frontside(void 0);
(b=h)?(b.set_parent_of_frontside(this),f.debugging&&(c.debug_string="A hole containing "+b),b.set_visible(p)):f.debugging&&(c.debug_string="An empty hole")};c.visible=function(){return this.get_parent_of_frontside().visible()};c.set_visible=function(c){p=c;b&&b.set_visible(c)};c.render=function(){if(b)return b.render()};c.rerender=function(){if(b)return b.rerender()};c.set_running=function(c){b&&b.set_running(c)};c.removed_from_container=function(c,l,e){b?(e&&b.restore_dimensions(),this.set_contents(void 0),
e&&this.get_parent_of_frontside().render()):f.UTILITIES.report_internal_error("Holes can't be removed from containers.")};c.temporarily_remove_contents=function(c,f){if(b)return this.get_parent_of_frontside().temporarily_remove_contents(c,f)};c.toString=function(){return b?b.toString():"_"};c.get_description=function(){return b?b.get_description():"_"};c.get_full_description=function(){return b?b.get_full_description():"_"};c.is_backside=function(){return!1};c.get_widget=function(){return this};f.debugging&&
(c.debug_string="An empty hole");f.widget.has_parent(c);f.widget.has_listeners(c);return c}}}(window.TOONTALK);(function(){var f,k,c,b,p,l;window.TOONTALK.bird=function(b){var c=Object.create(b.widget);c.create=function(e,p){var t=Object.create(c);f=function(a){e=a};t.widget_dropped_on_me=function(a,c,f,d){c=c?a.get_backside():a;var l;if(e){if(e.has_ancestor(a))return b.UTILITIES.display_message("Bird can't take its nest to its nest!"),!1;this.visible()||e.visible()||e.any_nest_copies_visible()?(a.save_dimensions(),l=this.get_frontside_element(),$(l).removeClass("toontalk-bird-gimme"),d&&(a.robot_waiting_before_next_step=
d,a.remove_from_parent_of_frontside()),e.animate_bird_delivery(c,this,d&&d.run_next_step,d)):(e.add_to_contents(c),d&&d.run_next_step())}else console.log("to do: handle drop on a nestless bird -- just removes other?");b.robot.in_training&&f&&b.robot.in_training.dropped_on(a,this);return!0};t.animate_delivery_to=function(a,c,f,d,l,k,p){var q=!!f,u=this.get_parent_of_frontside(),t=this.get_frontside_element(),J=this.closest_visible_ancestor_or_frontside(),F=$(J.get_frontside_element()).offset(),G=function(){var c=
$(L).offset(),d;q?this.remove():(d=function(){$(t).removeClass("toontalk-bird-morph-to-static");$(t).addClass("toontalk-bird-static");u&&u.get_widget().rerender()},t.style.position=U,c&&(F.left-=c.left,F.top-=c.top),$(t).css(F),L&&L.appendChild(t),u&&(u.get_widget().is_of_type("top-level")?this.rerender():u.get_widget().rerender()),za&&(ra.remove_backside_widget(this,!1,!0),za()),b.UTILITIES.add_animation_class(t,"toontalk-bird-morph-to-static"),b.UTILITIES.add_one_shot_event_handler(t,"animationend",
1E3,d),k&&(k(),a.robot_waiting_before_next_step=void 0))}.bind(this),N=function(){S();f.add_to_contents(a,this,!0);b.UTILITIES.set_timeout(function(){this.fly_to(F,G)}.bind(this))}.bind(this),T=function(a,c){this.element_to_display_when_flying=a;c&&(this.update_display(),c.update_display());a.width_before_carry=a.clientWidth;a.height_before_carry=a.clientHeight;b.UTILITIES.set_timeout(function(){$(this.element_to_display_when_flying).addClass("toontalk-carried-by-bird").css({left:"",top:"",width:"",
height:"",position:""});this.update_display()}.bind(this))}.bind(this),S=function(a){if(this.element_to_display_when_flying){var c=this.element_to_display_when_flying.width_before_carry,d=this.element_to_display_when_flying.height_before_carry;$(this.element_to_display_when_flying).removeClass("toontalk-carried-by-bird");a?($(this.element_to_display_when_flying).css({width:c,height:d}),$(t).closest(".toontalk-top-level-backside").append(this.element_to_display_when_flying),b.UTILITIES.set_absolute_position($(this.element_to_display_when_flying),
a)):$(this.element_to_display_when_flying).remove();this.element_to_display_when_flying=void 0;this.update_display()}}.bind(this),L,U,ba,da,oa,za,Aa,na,pa,ra,W;f||(f=e);pa=a.get_element();T(pa,a);J=c.get_widget().closest_visible_ancestor().get_widget().get_frontside_element();if(c.visible()||this.visible())if(c=$(J).offset(),oa=$(f.get_frontside_element()).closest(".toontalk-top-level-backside"),oa.is("*")||(oa=$(this.get_frontside_element()).closest(".toontalk-top-level-backside")),(W=oa.offset())||
(W={left:0,top:0}),d&&(F={left:d+W.left,top:l+W.top}),L=t.parentElement,ba=$(t).width(),da=$(t).height(),U=t.style.position,t.style.position="absolute",ra=this.top_level_widget(),u&&u.get_widget().temporarily_remove_contents&&(za=u.get_widget().temporarily_remove_contents(this,!0))&&ra.add_to_top_level_backside(this),oa.append(t),$(t).css({left:d||F.left-W.left,top:l||F.top-W.top,width:ba,height:da}),(Aa=f.get_contents_frontside_element())&&f.visible()&&(!p||p.visible())){d=$(J).width();l=$(J).height();
na=$(J).offset();W.max_left=W.left+oa.width();W.max_top=W.top+oa.height();c.left+=d;c.top+=l;var la={left:Math.min(na.left+d,W.max_left-d),top:Math.min(na.top+l,W.max_top-l)},fa={left:Math.max(na.left-d,W.left),top:Math.max(na.top-l,W.top)},J=function(){var a=function(){f.set_locked(!0);this.fly_to(na,Ha,300)}.bind(this);S(la);f.get_locked()?f.run_when_unlocked(a):a()}.bind(this),Ha=function(){T(Aa);this.fly_to(fa,Ba,300)}.bind(this),Ba=function(){S(fa);this.fly_to(la,Fa,300)}.bind(this),Fa=function(){T(pa,
a);this.fly_to(na,Ia,300)}.bind(this),Ia=function(){S(na);this.fly_to(fa,fb,300)}.bind(this),fb=function(){T(Aa);this.fly_to(na,Ca,300)}.bind(this),Ca=function(){f.set_locked(!1);S();f.update_display();N()}.bind(this);this.fly_to(la,J,300)}else this.fly_to(c,N,300);else f.add_to_contents(a,this,!0)};t.get_json=function(a){return{type:"bird",nest:e&&b.UTILITIES.get_json(e,a)}};t.copy=function(a){var b,c;if(a.just_value)b=this.create(void 0,this.get_description());else{if(a.nests_copied&&a.nests_copied[e]){b=
a.nests_copied[e][0];l.call(b);for(c=1;c<a.nests_copied[e].length;c++)k.call(a.nests_copied[e][c],b);b=this.create(b,this.get_description())}else b=this.create(e,this.get_description());a.birds_copied||(a.birds_copied={});a.birds_copied[e]||(a.birds_copied[e]=[]);a.birds_copied[e].push(b)}return this.add_to_copy(b,a)};t=t.add_standard_widget_functionality(t);t.set_description(p);b.debugging&&(t.debug_id=b.UTILITIES.generate_unique_id(),t.debug_string=e?"a bird with "+e.debug_string:"a bird without a nest");
return t};c.create_backside=function(){return b.bird_backside.create(this)};c.match=function(b){return b.match_with_any_bird?b.match_with_any_bird(this):this};c.match_with_any_bird=function(){return"matched"};c.update_display=function(){var c=this.get_frontside(!0),f=this.get_backside(),l;l=c.get_element();l.title=this.get_title();$(l).is(".toontalk-bird, .toontalk-side-animating")||($(l).addClass("toontalk-bird toontalk-bird-static"),l.addEventListener("dragover",function(a){$(l).is(".toontalk-bird-static")&&
($(l).removeClass("toontalk-bird-static"),b.UTILITIES.add_animation_class(l,"toontalk-bird-gimme"))}),l.addEventListener("dragleave",function(a){$(l).is(".toontalk-bird-gimme")&&$(l).addClass("toontalk-bird-static").removeClass("toontalk-bird-gimme")}));this.element_to_display_when_flying?l.appendChild(this.element_to_display_when_flying):$(l).children(".toontalk-side").remove();f&&f.rerender()};c.fly_to=function(c,f,l){var a=this.get_frontside_element(),g=$(a).offset(),g=Math.atan2(c.top-g.top,c.left-
g.left),n="toontalk-fly-west toontalk-fly-northwest toontalk-fly-north toontalk-fly-northeast toontalk-fly-east toontalk-fly-southeast toontalk-fly-south toontalk-fly-southwest".split(" ")[Math.round(4*(g/Math.PI+1))%8];$(a).position();b.UTILITIES.add_animation_class(a,n);this.animate_to_absolute_position(c,function(){$(a).removeClass(n);l?($(a).addClass("toontalk-bird-static"),setTimeout(f,l)):f()})};c.toString=function(){return"a bird"};c.get_type_name=function(){return"bird"};c.get_help_URL=function(){return"docs/manual/birds-nests.html"};
c.matching_resource=function(b){return b.get_type_name&&b.get_type_name()===this.get_type_name()};b.creators_from_json.bird=function(c,f){return b.bird.create(b.UTILITIES.create_from_json(c.nest,f),c.description)};c.drop_on=function(b,c,f,a){if(b.widget_dropped_on_me)return b.widget_dropped_on_me(this,!1,f,a)};return c}(window.TOONTALK);window.TOONTALK.bird_backside=function(b){return{create:function(c){c=b.backside.create(c);c.add_advanced_settings(!0);return c}}}(window.TOONTALK);window.TOONTALK.nest=
function(h){var u=Object.create(h.widget),e={},q={};u.create=function(q,a,g,n,d){var w=Object.create(u),x;a||(a=[]);g||(g=[]);k=function(a){d&&p.call(d,this);d=a;n=c.call(a);b.call(a,this)};c=function(){return n};l=function(){d&&p.call(d,this);d=void 0;n=h.UTILITIES.generate_unique_id()};b=function(a){this[e](a)};p=function(a){this[e](a,!0)};w.matched_by=function(b){return 0<a.length?h.UTILITIES.match(b,a[0].get_widget()):[[this,b]]};w.run_when_non_empty=function(a){g.push(a)};w.add_to_contents=function(b,
c,d){var e;1===a.push(b)?0<g.length&&(e=g,g=[],e.forEach(function(a){$(a.robot.get_frontside_element()).removeClass("toontalk-robot-waiting");a.robot.run(a.context,a.top_level_context,a.queue)})):b.get_widget().hide();b.is_backside()?b.get_widget().set_parent_of_backside(this):b.get_widget().set_parent_of_frontside(this);x&&!d&&(c?x.forEach(function(a){a.has_ancestor(b.get_widget())||a.animate_bird_delivery(h.UTILITIES.copy_side(b),c)}):x.forEach(function(a){a.has_ancestor(b.get_widget())||a.add_to_contents(h.UTILITIES.copy_side(b,
!1,!0))}));this.rerender()};w.animate_bird_delivery=function(a,b,c,d){var g,e,f;b.animate_delivery_to(a,this,void 0,void 0,void 0,c,d);x&&(g=$(b.closest_visible_ancestor().get_widget().get_frontside_element()).closest(":visible").position(),e=b.get_parent_of_frontside().get_element(),f=this.visible(),x.forEach(function(c){var n=h.UTILITIES.copy_side(a,!1,f),l,k;c.has_ancestor(a.get_widget())||(c.visible()||f?(l=b.copy({just_value:!0}),k=l.get_frontside_element(!0),$(e).append(k),l.animate_delivery_to(n,
c,c,g.left,g.top,void 0,d)):c.add_to_contents(n))}))};w.get_contents_frontside_element=function(){if(0<a.length)return a[0].get_widget().get_frontside_element()};w.get_locked=function(){return this.locked_for_animating_deliveries};w.set_locked=function(a){this.locked_for_animating_deliveries=a;!a&&this.to_run_when_unlocked&&0<this.to_run_when_unlocked.length&&this.to_run_when_unlocked.shift()()};w.run_when_unlocked=function(a){this.to_run_when_unlocked?this.to_run_when_unlocked.push(a):this.to_run_when_unlocked=
[a]};w.removed_from_container=function(b,c,d){b=a.shift();this.visible()&&(b?(b.get_widget().restore_dimensions(),b.is_backside()?b.get_widget().set_parent_of_backside(void 0):b.get_widget().set_parent_of_frontside(void 0)):h.UTILITIES.report_internal_error("Nothing removed from nest!"),0<a.length&&(a[0].set_visible(!0),$(a[0].get_element()).show()),this.render());return b};w.dereference_contents=function(b,c,d){var g,e,f,h;return 0===a.length?this:b.removing_widget?(b=a[0],d.remove_from_container(b,
this),this.visible()&&(f=this.get_frontside_element(),d=$(f).offset(),c=$(f).closest(".toontalk-backside-of-top-level"),(g=c.offset())||(g={left:0,top:0}),e=b.get_frontside_element(),h=$(f).width(),f=$(f).height(),$(e).css({left:.1*h+d.left-g.left,top:.1*f+d.top-g.top,width:.8*h,height:.8*f}),c.append(e)),b):b.next?a[0].get_widget().dereference(b.next,c,d):a[0].get_widget()};w.get_json=function(b){var c=g&&g.map(function(a){return{robot:h.UTILITIES.get_json(a.robot,b),context:a.context&&h.UTILITIES.get_json(a.context,
b),top_level_context:a.top_level_context&&h.UTILITIES.get_json(a.top_level_context,b)}});return{type:"nest",contents:h.UTILITIES.get_json_of_array(a,b),guid:n,original_nest:d&&h.UTILITIES.get_json(d,b),waiting_robots:c}};w.copy=function(b){var c,g,e;if(b.just_value)return 0<a.length?a[0].get_widget().copy(b):h.nest.create(this.get_description(),[],[],"in a robot's condition");c=h.UTILITIES.copy_widget_sides(a,b);b.fresh_copy?g=h.nest.create(this.get_description(),c,[],n&&h.UTILITIES.generate_unique_id()):
(e=d||this,b.birds_copied&&b.birds_copied[this]?(b.nests_copied&&b.nests_copied[e]?(g=b.nests_copied[u][0].copy({}),b.nests_copied[e].forEach(function(a){k.call(a,g)})):g=h.nest.create(this.get_description(),c,[],h.UTILITIES.generate_unique_id()),b.birds_copied[this].forEach(function(a){f.call(a,g)})):g=h.nest.create(this.get_description(),c,[],n,e),b.nests_copied||(b.nests_copied={}),b.nests_copied[e]?b.nests_copied[e].push(g):b.nests_copied[e]=[g]);return this.add_to_copy(g,b)};w.has_contents=function(){return 0<
a.length};w.dropped_on_other=function(a,b,c,d){var g,e,f,l,k,p,q;n||(n=h.UTILITIES.generate_unique_id(),h.debugging&&(w.debug_string="A nest with "+n),g=h.bird.create(this),d&&(d.add_newly_created_widget(g),this.robot_waiting_before_next_step=d),this.rerender(),e=this.get_frontside_element(!0),h.UTILITIES.add_animation_class(e,"toontalk-hatch-egg"),k=function(){var n,k,w;if(b)n=a.get_backside();else if((w=h.UTILITIES.widget_from_jquery($(e).closest(".toontalk-top-level-backside")))||(w=h.UTILITIES.widget_from_jquery($(a.get_widget().get_frontside_element(!0)).closest(".toontalk-top-level-backside"))),
w)n=w.get_backside();else{h.UTILITIES.report_internal_error("Unable to find the top-level backside for bird to go to.");return}k=n.get_element();w=$(k).offset();f=g.get_frontside_element(!0);$(f).removeClass("toontalk-bird-static");h.UTILITIES.add_animation_class(f,"toontalk-fly-southwest");l=h.UTILITIES.relative_position(e,k);$(f).css({left:l.left,top:l.top});h.robot.in_training&&c?(h.robot.in_training.add_newly_created_widget(g),n.widget_dropped_on_me(g,!1,c,void 0,!0)):n.widget_dropped_on_me(g,
!1,c);$(e).removeClass("toontalk-hatch-egg").addClass("toontalk-empty-nest").css({width:"",height:""});"top-level"===this.get_parent_of_frontside().get_widget().get_type_name()&&$(e).css({left:l.left-5,top:l.top+45});q=function(){$(f).removeClass("toontalk-fly-southwest");h.UTILITIES.set_timeout(function(){h.UTILITIES.add_animation_class(f,"toontalk-fly-down");p=function(){$(f).removeClass("toontalk-fly-down");h.UTILITIES.add_animation_class(f,"toontalk-bird-morph-to-static");h.UTILITIES.add_one_shot_event_handler(f,
"animationend",1E3,function(){$(f).removeClass("toontalk-bird-morph-to-static toontalk-side-animating").addClass("toontalk-bird-static")});d&&d.run_next_step();g.update_display()};h.UTILITIES.add_one_shot_event_handler(e,"animationend",1E3,p)}.bind(this))}.bind(this);$(f).removeClass("toontalk-bird-static");n=Math.max(10,l.left-70);k=Math.max(10,l.top+70);g.animate_to_absolute_position({left:n+w.left,top:k+w.top},q);this.rerender()}.bind(this),h.UTILITIES.add_one_shot_event_handler(e,"animationend",
2E3,k));return!0};w.widget_dropped_on_me=function(b,c,d,g){d&&b.save_dimensions&&b.save_dimensions();0===a.length?(this.add_to_contents(c?b.get_backside():b),b.dropped_on_other?b.dropped_on_other(this,c,d,g):h.robot.in_training&&d&&h.robot.in_training.dropped_on(b,this)):b.drop_on(a[0].get_widget(),c,d,g);return!0};w.drop_on=function(a,b,c,d){return a.widget_dropped_on_me?(a.widget_dropped_on_me(this,!1,c,d),!0):!1};w.element_to_highlight=function(){return 0===a.length?this.get_frontside_element():
a[0].get_frontside_element()};w.update_display=function(){var b=this.get_frontside(!0),c=this.get_backside(),d,g,e,f,l,b=b.get_element();0<a.length?(d=a[0].get_widget(),a[0].is_backside()?(f=d.get_backside(!0),l=f.get_element(),f.update_display(),f.scale_to_fit(l,b)):(d.render(),l=a[0].get_element()),g=$(b).width(),e=$(b).height(),0<g&&0<e&&h.UTILITIES.set_timeout(function(){for(var a=2*l.toontalk_border_size||0,b=.8*g,c=.8*e;2*a>=b||2*a>=c;)a/=2;b-=a;c-=a;$(l).css({width:b,height:c,left:.1*g,top:.1*
e});d.set_size_attributes&&d.set_size_attributes(b,c)},2),b.appendChild(l),$(b).addClass("toontalk-empty-nest"),a[0].is_backside()?d.set_parent_of_backside(this):d.set_parent_of_frontside(this)):(b.title=this.get_title(),n?($(b).removeClass("toontalk-nest-with-egg"),$(b).addClass("toontalk-empty-nest")):h.UTILITIES.add_animation_class(b,"toontalk-nest-with-egg"));$(b).addClass("toontalk-nest");c&&c.rerender()};w[e]=function(a,b){if(!x){if(b)return;x=[]}b?x.splice(x.indexOf(a),1):x.push(a)};w.get_path_to=
function(b,c){if(0<a.length){if(a[0].get_widget().get_path_to)return a[0].get_widget().get_path_to(b,c);if(a[0].get_widget()===b)return h.path.to_entire_context()}};w.walk_children=function(b){if(0<a.length)return b(a[0])};w.top_contents_is=function(b){return 0<a.length&&a[0].get_widget()===b};w.any_nest_copies_visible=function(){var a=!1;if(!x)return!1;x.some(function(b){b.visible()&&(a=!0)});return a};w.compare_with=function(b){if(0<a.length)return a[0].compare_with(b);if(b.compare_with_nest)return-1*
b.compare_with_nest(this)};w.compare_with_nest=function(b){return 0===a.length?0:1};w.compare_with_number=function(b){return 0<a.length?a[0].compare_with(b):-1};w.compare_with_box=w.compare_with_number;w.compare_with_scale=w.compare_with_number;w=w.add_standard_widget_functionality(w);w.set_description(q);h.debugging&&(w.debug_id=h.UTILITIES.generate_unique_id(),w.debug_string=n?"A nest with "+n:"A nest with an egg");if(d&&n)d[e](w);return w};u.create_backside=function(){return h.nest_backside.create(this)};
u.match=function(b){return b.match_nest_with_nest?b.match_nest_with_nest(this):b};u.match_nest_with_nest=function(b){return"matched"};u.toString=function(){return"a nest"};u.get_help_URL=function(){return"docs/manual/birds-nests.html"};u.get_type_name=function(){return"nest"};u.matching_resource=function(b){return b.get_type_name&&b.get_type_name()===this.get_type_name()};h.creators_from_json.nest=function(b,a){var c=!b.original_nest&&b.guid&&q[b.guid];c||(c=h.nest.create(b.description,h.UTILITIES.create_array_from_json(b.contents,
a),void 0,b.guid,b.original_nest&&h.UTILITIES.create_from_json(b.original_nest,a)),q[b.guid]=c);return c};return u}(window.TOONTALK);window.TOONTALK.nest_backside=function(b){return{create:function(c){c=b.backside.create(c);c.add_advanced_settings(!0);return c}}}(window.TOONTALK)})();window.TOONTALK.scale=function(f){var k=Object.create(f.widget);k.create=function(c,b,k,l){var h=function(){k.rerender()},u=function(a,b){var c=$(k.get_frontside_element()),d=c.offset(),c=c.width(),d=a.clientX-(d.left+c/2),c=b?c/10:0;return-d>c?0:d>c?1:-1},e,q,t;k||(k=f.box.create(2,void 0,c,b));e=k.get_json;q=k.copy;t=k.get_path_to;k.copy=function(a){var b=q.call(this,a),b=f.scale.create(void 0,void 0,b,a&&this.get_state());return k.add_to_copy(b,a)};k.get_json=function(a){a=e.call(this,a);a.type=
"scale";a.inactive_state=this.get_inactive_state();return a};k.get_path_to=function(a,b){var c=t.call(this,a,b);c&&(c.true_type="scale");return c};k.element_to_highlight=function(a){a=u(a,!0);var b;if(0>a)return this.get_frontside_element();a=this.get_hole(a);return(b=a.get_contents())?b.get_frontside_element():a.get_frontside_element()};k.drop_on=function(a,b,c,d){if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,b,c,d)};k.widget_dropped_on_me=function(a,b,c,d){var e=this.get_hole_contents(0),
f=this.get_hole_contents(1),h;if(e&&!f)return this.set_hole(1,a),!0;if(!e&&f)return this.set_hole(0,a),!0;h=u(c,!1);if(0===h){if(e){if(e.drop_on)return a.drop_on(e,b,c,d);return}}else if(f){if(f.drop_on)return a.drop_on(f,b,c,d);return}this.set_hole(h,a,c);return!0};k.get_inactive_state=function(){return l};k.update_display=function(){var a=this.get_frontside_element(),b=$(a),c=$(a).children(".toontalk-scale-half"),d=$(a).parent(),d=d.is(".toontalk-backside")?a:d.get(0),e=$(d).width(),h=$(d).height(),
l=function(a,b,c){var d=b.get_frontside_element(!0),g=c*e*.5,f=.5*e,n=h;b=b.get_contents();$(a).css({left:g,top:0,width:f,height:n});a!==d&&(g=0===c?-.05*e:.15*e,c="toontalk-scale-balanced"===k?.1*h:0===c&&"toontalk-scale-left_heavier"===k||1===c&&"toontalk-scale-right_heavier"===k?.25*h:1===c&&"toontalk-scale-left_heavier"===k||0===c&&"toontalk-scale-right_heavier"===k?-.1*h:.2*h,f=.4*e,n=.4*h,$(d).css({left:g,top:c,width:f,height:n}),b&&(b.set_location_attributes&&b.set_location_attributes(g,c),
b.set_size_attributes&&b.set_size_attributes(f,n)),a.appendChild(d))},k,d=f.UTILITIES.scale_to_fit(a,d,123,91);0===e&&(e=1);0===h&&(h=1);e/=d.x_scale;h/=d.y_scale;b.is(".toontalk-top-level-resource")?k="toontalk-scale-balanced":(d=this.get_state(),k="undefined"===typeof d?"toontalk-scale-unbalanced":["toontalk-scale-right_heavier","toontalk-scale-balanced","toontalk-scale-left_heavier"][d+1]);b.removeClass("toontalk-scale-balanced toontalk-scale-left_heavier toontalk-scale-right_heavier toontalk-scale-unbalanced");
b.addClass(k);b.addClass("toontalk-scale");2===c.length?c.each(function(a,b){f.UTILITIES.set_timeout(function(){l(b,this.get_hole(a),a)}.bind(this))}.bind(this)):this.get_holes().forEach(function(b,c){var d=b.get_element();0===c?$(d).addClass("toontalk-left_scale  toontalk-scale-half"):$(d).addClass("toontalk-right_scale toontalk-scale-half");l(d,b,c);a.appendChild(d)});a.title=this.get_title();f.debugging&&(this.debug_string=this.toString())};k.get_type_name=function(){return"scale"};k.get_help_URL=
function(){return"docs/manual/scales.html"};k.toString=function(){var a=this.get_hole(0),b=this.get_hole(1),c;switch(this.get_state()){case -1:c="scale leaning to the right";break;case 1:c="scale leaning to the left";break;case 0:c="balanced scale";break;default:c="unbalanced scale"}a=a?"contains "+f.UTILITIES.add_a_or_an(a.get_full_description()):"is empty";b=b?"contains "+f.UTILITIES.add_a_or_an(b.get_full_description()):"is empty";return c+" and the left pan "+a+" and the right pan "+b};k.create_backside=
function(){return f.scale_backside.create(this)};k.get_state=function(){var a=this.get_inactive_state(),b;if(a)return a;a=this.get_hole_contents(0);b=this.get_hole_contents(1);if(a||b)if(a){if(!b)return 1;if(a.compare_with)return a.compare_with(b)}else return-1};k.match=function(a){return a.match_with_scale?a.match_with_scale(this):this};k.match_with_scale=function(a){return this.get_state()===a.get_state()?"matched":a};k.compare_with=function(a){if(a.compare_with_scale)return-1*a.compare_with_scale(this)};
k.compare_with_scale=function(a){var b=this.get_state();a=a.get_state();return b&&!a?1:!b&&a?-1:b>a?1:b<a?-1:0};k.get_hole(0).add_listener("value_changed",h);k.get_hole(1).add_listener("value_changed",h);k.get_hole_contents(0)&&k.get_hole_contents(0).add_listener("value_changed",h);k.get_hole_contents(1)&&k.get_hole_contents(1).add_listener("value_changed",h);return k};f.creators_from_json.scale=function(c,b){return k.create(f.UTILITIES.create_array_from_json(c.contents,b),c.description,void 0,c.inactive_state)};
return k}(window.TOONTALK);window.TOONTALK.scale_backside=function(f){return{create:function(k){k=f.backside.create(k);k.add_advanced_settings(!0);return k}}}(window.TOONTALK);window.TOONTALK.robot=function(f){var k=Object.create(f.widget);k.create=function(c,b,p,l,h,u,e){var q=Object.create(k),t,a=!1;p||(p=f.actions.create());t||(t=q);q.get_frontside_conditions=function(){return c};q.set_frontside_conditions=function(a){c=a};q.get_backside_conditions=function(){return b};q.set_backside_conditions=function(a){(b=a)&&f.UTILITIES.available_types.forEach(function(a){b[a]&&f.widget.erasable(b[a])})};q.add_to_backside_conditions=function(a){var c=a.copy({just_value:!0});b||
(b={});b[a.get_type_name()]=c;f.widget.erasable(c)};q.get_body=function(){return p};q.get_animating=function(){return a};q.set_animating=function(b,c){var d=this.get_frontside_element();(a=b)?(c||(c=$(d).offset()),$(d).addClass("toontalk-robot-animating toontalk-side-animating"),$(d).css({width:"",height:"","z-index":f.UTILITIES.next_z_index()}),f.UTILITIES.set_position_relative_to_top_level_backside($(d),c),$(d).closest(".toontalk-top-level-backside").append(d)):$(d).removeClass("toontalk-robot-animating toontalk-side-animating")};
q.get_thing_in_hand=function(){return h};q.set_thing_in_hand=function(a){f.debugging&&a&&"empty hole"===a.get_type_name()?f.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):h=a};q.get_next_robot=function(){return e};q.set_next_robot=function(a){var b=this.get_backside_element();a&&a.set_first_in_team(this.get_first_in_team());!a&&e&&e.set_first_in_team(e);e=a;b&&(a=a?"When the robot can't run then this one will try: ":window.TOONTALK.robot.empty_drop_area_instructions,$(b).find(".toontalk-drop-area-instructions").get(0).innerHTML=
a)};q.get_first_in_team=function(){return t};q.set_first_in_team=function(a){t=a;e&&e.set_first_in_team(a)};q.walk_children=function(a){(!e||a(e))&&this.get_frontside_conditions()&&a(this.get_frontside_conditions())};q.get_run_once=function(){return u};q.set_run_once=function(a){u=a};e&&q.set_next_robot(e);q=q.add_standard_widget_functionality(q);q.set_description(l);f.debugging&&(this.debug_id=f.UTILITIES.generate_unique_id());return q};k.create_backside=function(){return f.robot_backside.create(this)};
k.copy=function(c){var b=this.get_frontside_conditions(),k=this.get_backside_conditions(),b=b?b.copy({just_value:!0}):void 0,l=this.get_next_robot(),l=l?l.copy(c):void 0,h;k&&(h={},f.UTILITIES.available_types.forEach(function(b){h[b]&&(h[b]=h[b].copy({just_value:!0}))}));k=this.create(b,h,this.get_body().copy(),this.get_description(),this.get_thing_in_hand(),this.get_run_once(),l);return this.add_to_copy(k,c)};k.match=function(){console.log("Robot-to-robot matching could be more sophisticated.");
return"matched"};k.run=function(c,b,k){var l=this.get_frontside_conditions(),h=function(b){b.visible()&&$(b.get_frontside_element()).removeClass("toontalk-conditions-not-matched toontalk-conditions-waiting").find(".toontalk-conditions-not-matched, .toontalk-conditions-waiting").removeClass("toontalk-conditions-not-matched toontalk-conditions-waiting")},u,e;if(this.being_trained||!l||this.get_animating())return this;h(l);this.rerender();this.match_status=f.UTILITIES.match(l,c);"matched"===this.match_status&&
(u=this.get_backside_conditions())&&(l=c.get_backside_widgets())&&l.some(function(b){var c=!b.is_backside()&&u[b.get_widget().get_type_name()];if(c&&(h(c),b=f.UTILITIES.match(c,b.get_widget()),"matched"!==b))return this.match_status=b,!0}.bind(this));if("matched"===this.match_status)return k||(k=f.QUEUE),this.get_body().reset_newly_created_widgets(),k.enqueue({robot:this,context:c,top_level_context:b,queue:k}),this.match_status;if(this.match_status.is_widget)return $(this.match_status.get_frontside_element()).addClass("toontalk-conditions-not-matched"),
this.rerender(),this.get_next_robot()?this.get_next_robot().run(c,b,k):this.match_status;this.match_status.forEach(function(b){$(b[1].get_frontside_element()).addClass("toontalk-conditions-waiting")});if(this.get_next_robot()){l=this.get_next_robot().run(c,b,k);if("matched"===l)return l;l.is_widget||l.forEach(function(b){0>this.match_status.indexOf(b)&&this.match_status.push(b)})}this.get_first_in_team()===this&&(e={robot:this,context:c,top_level_context:b,queue:k},this.match_status.forEach(function(b){b[0].run_when_non_empty(e)}),
f.UTILITIES.add_animation_class(this.get_frontside_element(),"toontalk-robot-waiting"));return this.match_status};k.set_stopped=function(c){(this.stopped=c)&&this.visible()&&$(this.get_frontside_element()).removeClass("toontalk-robot-waiting");this.get_next_robot()&&this.get_next_robot().set_stopped(c)};k.run_actions=function(c,b,f){return this.stopped?!1:this.visible()?this.get_body().run_watched(c,b,f,this):this.get_body().run_unwatched(c,b,f,this)};k.picked_up=function(c,b,k){var l;this!==c&&(c.get_infinite_stack&&
c.get_infinite_stack()?this.current_action_name="pick up a copy of":this.current_action_name="pick up",k?(l=c,b=c.copy({}),b=f.path.get_path_to_resource(b)):b=f.path.get_path_to(c,this),b&&this.add_step(f.robot_action.create(b,this.current_action_name),l),c.last_action=this.current_action_name,this.current_action_name=void 0,this.set_thing_in_hand(c))};k.dropped_on=function(c,b){var k;this!==c&&(this.current_action_name="drop it on",(k=f.path.get_path_to(b,this))&&this.add_step(f.robot_action.create(k,
this.current_action_name)),c.last_action=this.current_action_name+" "+b.get_type_name(),this.current_action_name=void 0,this.set_thing_in_hand(void 0))};k.copied=function(c,b,k){this.current_action_name=k?"pick up a copy of":"copy";(c=f.path.get_path_to(c,this))&&this.add_step(f.robot_action.create(c,this.current_action_name),b);b.last_action=this.current_action_name;this.current_action_name=void 0};k.removed=function(c){var b;this.current_action_name="remove";(b=f.path.get_path_to(c,this))&&this.add_step(f.robot_action.create(b,
this.current_action_name));c.last_action=this.current_action_name;this.current_action_name=void 0};k.edited=function(c,b){var k;this.current_action_name="edit";(k=f.path.get_path_to(c,this))&&this.add_step(f.robot_action.create(k,this.current_action_name,b));this.current_action_name=void 0};k.erased_widget=function(c,b){var k;this.current_action_name="erased_widget";(k=f.path.get_path_to(c,this))&&this.add_step(f.robot_action.create(k,this.current_action_name,{erased:b,toString:b?"erase":"un-erase"}));
this.current_action_name=void 0};k.remove_from_container=function(c,b){var k=b.get_index_of&&b.get_index_of(c),l=function(){c.get_parent_of_frontside()&&b.removed_from_container(c,!1,!0,k)};this.get_animating()?f.UTILITIES.add_one_shot_event_handler(this.get_frontside_element(),"transitionend",2500,l):l();this.add_newly_created_widget(c)};k.add_step=function(c,b){this.get_body().add_step(c,b);this.get_frontside_element().title=this.get_title()};k.get_context=function(){var c=this.get_frontside_element(),
b=$(c).parent(),c=f.UTILITIES.widget_from_jquery(b);return!c&&(b=f.UTILITIES.widget_from_jquery(b.closest(".toontalk-backside-of-robot")))?b.get_context():c};k.training_started=function(){var c=this.get_context();c?(this.being_trained=!0,this.set_frontside_conditions(c.copy({just_value:!0})),$("*").css({cursor:"url("+f.UTILITIES.absolute_file_path("images/RB19.32x32.PNG")+"), default"}),this.get_frontside_element().title=this.get_title(),c=this.get_backside_element(),$(c).find(".toontalk-conditions-panel").remove()):
f.UTILITIES.report_internal_error("Robot started training but can't find its 'context'.")};k.training_finished=function(){var c=this.get_body().get_newly_created_widgets(),b,k;$("*").css({cursor:""});for(b=0;b<c.length;b++)k=c[b],"drop it on top-level"!==k.last_action&&"copy"!==k.last_action||this.add_step(f.robot_action.create(f.newly_created_widgets_path.create(b),"add to the top-level backside"));this.rerender();this.being_trained=!1;this.get_frontside_element().title=this.get_title();this.backup_all()};
k.update_display=function(){var c=this.get_frontside(!0),b=this.get_backside(),k=this.get_thing_in_hand(),l,h;f.debugging&&(this.debug_string=this.toString());l=c.get_element();k&&(h=k.get_frontside_element());!h&&this.carrying_tool&&(h=document.createElement("div"),$(h).addClass(this.carrying_tool));l.title=this.get_title();$(l).addClass("toontalk-robot");$(l).children(".toontalk-side, .toontalk-held-by-robot").remove();h&&l.appendChild(h);this.match_status&&(this.match_status.is_widget?$(l).addClass("toontalk-side-animating toontalk-robot-not-matched"):
$(l).removeClass("toontalk-robot-not-matched"));f.UTILITIES.set_timeout(function(){var b,c,f,t,a;h&&(a={position:"absolute"},$(h).addClass("toontalk-held-by-robot"),b=$(h).width(),c=$(h).height(),f=$(l).width(),t=$(l).height(),0===b&&(b=2*f,c=t/2,a.width=b,a.height=c),a.left=(f-b)/2,a.top=(t-c)/2,$(h).css(a),k&&k.render())});b&&b.rerender()};k.add_newly_created_widget=function(c){return this.get_body().add_newly_created_widget(c)};k.add_newly_created_widget_if_new=function(c){if(c!==this.get_context())return this.get_body().add_newly_created_widget_if_new(c)};
k.get_recently_created_widget=function(){var c=this.get_body().get_newly_created_widgets();return c[c.length-1]};k.get_title=function(){var c=this.get_description();if(c)return c="This robot "+c,0>c.lastIndexOf(".")&&(c+="."),c+"\n"+this.toString();c=this.get_frontside_element();return $(c).is(".toontalk-top-level-resource")?"Drag this robot to a work area.":this.toString()};k.toString=function(){var c=this.get_frontside_conditions(),b=this.get_body(),k="",l="",h=this.get_next_robot();if(!c)return"has yet to be trained.";
c=c.get_full_description();this.being_trained&&(k="is being trained.\n",l="\n...");c=f.UTILITIES.add_a_or_an(c);b=k+"When working on something that matches "+c+" he will \n"+b.toString()+l;this.match_status&&(this.match_status.is_widget?b="He isn't running because the "+this.match_status+" in his conditions (highlighted in red) doesn't match the corresponding widget. Perhaps editing his conditions will help.\n"+b:"matched"!==this.match_status&&(b="He is waiting for something to be delivered to the nest that matches the "+
this.match_status[0][1]+"in his conditions (highlighted in yellow).\n"+b));h&&(b+="\nIf it doesn't match then the next robot will try to run.\n"+h.toString());return b};k.get_type_name=function(){return"robot"};k.get_help_URL=function(){return"docs/manual/robots.html"};k.get_json=function(c){var b=this.get_frontside_conditions(),k=this.get_backside_conditions(),l,h,u;b&&(l=b.is_of_type("top-level")?{type:"top_level"}:f.UTILITIES.get_json(b,c));k&&f.UTILITIES.available_types.forEach(function(b){k[b]&&
(h||(h={}),h[b]=f.UTILITIES.get_json(k[b],c))});this.get_next_robot()&&(u=f.UTILITIES.get_json(this.get_next_robot(),c));return{type:"robot",frontside_conditions:l,backside_conditions:h,body:this.get_body().get_json(c),run_once:this.get_run_once(),next_robot:u}};f.creators_from_json.robot=function(c,b){var k,l,h;c.thing_in_hand&&(l=f.UTILITIES.create_from_json(c.thing_in_hand,b));c.next_robot&&(k=f.UTILITIES.create_from_json(c.next_robot,b));c.backside_conditions&&(h={},f.UTILITIES.available_types.forEach(function(l){h[l]=
f.UTILITIES.create_from_json(c.backside_conditions[l],b)}));return f.robot.create(f.UTILITIES.create_from_json(c.frontside_conditions||c.bubble,b),h,f.UTILITIES.create_from_json(c.body,b),c.description,l,c.run_once,k)};return k}(window.TOONTALK);
window.TOONTALK.robot_backside=function(f){var k=function(b,c,l,h){b=f.UTILITIES.create_text_element(b);var k=c.get_frontside_element(!0),e=document.createElement("div");$(k).addClass("toontalk-conditions-contents "+h);f.UTILITIES.set_timeout(function(){$(k).parent().addClass("toontalk-conditions-contents-container");$(k).css({left:"inherit",width:"inherit",height:"inherit"});c.render()});l.match_status&&(l.match_status.is_widget?$(l.match_status.get_frontside_element()).addClass("toontalk-conditions-not-matched"):
"matched"!==l.match_status&&l.match_status.forEach(function(b){$(b[1].get_frontside_element()).addClass("toontalk-conditions-waiting")}));e.appendChild(k);l=f.UTILITIES.create_horizontal_table(b,e);$(l).addClass("toontalk-conditions-panel");return l},c=function(b,c){var l=c.get_frontside_conditions(),h=c.get_backside_conditions(),u,e;l&&0===$(b).find(".toontalk-frontside-conditions-area").length&&(b.insertBefore(k("Runs only if the widget matches: ",l,c,"toontalk-frontside-conditions-area"),b.firstChild),
l.set_visible(!0),l.render());h&&Object.keys(h).forEach(function(l){if(u=h[l])e="toontalk-backside-"+l+"-conditions-area",0===$(b).find("."+e).length&&(l="bird"===l?f.UTILITIES.create_text_element("And there is a bird on the back."):k("Runs only if the "+l+" on the backside matches: ",u,c,e),b.insertBefore(l,b.firstChild.nextSibling),u.set_visible(!0),u.render())})};return{create:function(b){var k=f.backside.create(b),l=k.get_element(),h=f.UTILITIES.create_check_box(!b.get_run_once(),"toontalk-run-once-check-box",
"When finished start again","Check this if you want the robot to start over again after finishing what he was trained to do."),u=f.UTILITIES.create_drop_area(window.TOONTALK.robot.empty_drop_area_instructions),e=b.get_next_robot(),q=f.backside.create_advanced_settings_button(k,b),t=k.update_display;u.data("drop_area_owner",b);$(h.button).click(function(a){var c=h.button.checked;b.set_run_once(!c);f.robot.in_training&&f.robot.in_training.edited(b,{setter_name:"set_run_once",argument_1:!c,toString:"change to "+
(c?"run again":"run once")+" of the robot",button_selector:".toontalk-run-once-check-box"});a.stopPropagation()});e&&u.append(e.get_frontside_element(!0));u.get(0).addEventListener("drop",function(a){a=f.UTILITIES.get_dragee();(a=f.UTILITIES.widget_from_jquery(a))&&a.is_of_type("robot")&&(a=a.open_backside(),$(a.get_element()).find(".toontalk-train-backside-button").click())});k.update_display=function(){var a=b.get_frontside_element();a&&(a.title=b.get_title());t()};l.appendChild(this.create_train_button(k,
b));l.appendChild(q);$(h.container).addClass("toontalk-advanced-setting");u.addClass("toontalk-advanced-setting");l.appendChild(h.container);l.appendChild(u.get(0));c(l,b);k.add_advanced_settings();return k},create_train_button:function(b,k){var l=b.get_element();$(l);var h=$("<button>Train</button>").button();h.addClass("toontalk-train-backside-button");var u=!1,e=function(){u?(h.button("option","label","Stop training"),h.attr("title","Click to stop training this robot.")):k.get_body().is_empty()?
(h.button("option","label","Train"),h.attr("title","Click to start training this robot.")):(h.button("option","label","Re-train"),h.attr("title","Click to start training this robot all over again."));$(l).is(":visible")&&c(l,k)};e();h.click(function(b){u=!u;e();u?(k.get_body().reset_steps(),f.robot.in_training=k,k.training_started()):(k.training_finished(),f.robot.in_training=null);b.stopPropagation()});return h.get(0)}}}(window.TOONTALK);window.TOONTALK.robot.empty_drop_area_instructions="Drop a robot here who will try to run when this robot can't run.";(function(){var f=function(f){return"rotate"===f||"skewX"===f||"skewY"===f||"transform-origin-x"===f||"transform-origin-y"===f};window.TOONTALK.element=function(k){var c=["left","top","width","height"],b=Object.create(k.widget),p=function(b,c){var f,e;"number"===typeof b&&(e=b);0===b.length&&(e=0);if("undefined"===typeof e&&(f=b.substring(b.length-1),0<="0123456789x".indexOf(f)&&(e=parseFloat(b),isNaN(e))))return;f=e;0<=["rotate","skewX","skewY"].indexOf(c)&&(f%=360,0>f&&(f+=360));return f};b.create=
function(c,h,p,e){var q=Object.create(b),t=q.drag_started,a={},g={},n,d,w,x;h||(h=[]);q.get_HTML=function(){return c};q.get_text=function(){return this.get_frontside_element().innerText};q.set_HTML=function(a){var b=this.get_frontside_element();if(!b||c===a)return!1;c=a;$(b).children(":not(.ui-resizable-handle)").remove();this.rerender();return!0};q.set_text=function(a){var b=this.get_frontside_element(),c=function(b){$(b).contents().each(function(){this.nodeType==Node.TEXT_NODE?(this.textContent=
a,a=""):c(this,a)})};if(!b||a===b.textContent)return!1;c(b);return this.set_HTML(b.innerHTML)};q.get_style_attributes=function(){return h};q.set_style_attributes=function(a){h=a};q.get_attribute_widgets=function(){return a};q.get_original_copies=function(){return g};q.get_pending_css=function(){return n};q.get_transform_css=function(){return d};q.add_to_css=function(a,b){f(a)?(d||(d={}),d[a]=b):(n||(n={}),n[a]=b)};q.apply_css=function(){var a,b;if(n||d)if(a=this.get_frontside_element())if($(a).is(":visible")){if(d){d.rotate&&
(b="rotate("+d.rotate+"deg)");d.skewX&&(b||(b=""),b+="skewX("+d.skewX+"deg)");d.skewY&&(b||(b=""),b+="skewY("+d.skewY+"deg)");if(d["transform-origin-x"]||d["transform-origin-y"])n||(n={}),n["transform-origin"]=(d["transform-origin-x"]||0)+" "+(d["transform-origin-y"]||0);b&&(n||(n={}),n["-webkit-transform"]=b,n["-moz-transform"]=b,n["-ms-transform"]=b,n["o-transform"]=b,n.transform=b)}k.UTILITIES.set_timeout(function(){n&&(n.width&&"undefined"===typeof n.height?n.height=a.clientHeight:n.height&&"undefined"===
typeof n.width&&(n.width=a.clientWidth),$(a).css(n),x&&(n.width||n.height)&&x.css({width:n.width,height:n.height}),n=void 0)})}else k.UTILITIES.set_timeout(function(){this.apply_css()}.bind(this),100)};q.on_update_display=function(a){w?w.push(a):w=[a]};q.fire_on_update_display_handlers=function(){w&&k.UTILITIES.set_timeout(function(){w.forEach(function(a,b){a()||w.splice(b,1)})})};q.get_image_element=function(){return x};q.set_image_element=function(a,b){x=$(a).find("img");0===x.length?x=void 0:($(b).width(x.width()),
$(b).height(x.height()))};q.get_additional_classes=function(){return e};q.set_additional_classes=function(a){e=a};q=q.add_standard_widget_functionality(q);q.drag_started=function(a,b){this.drag_x_offset=a.view.drag_x_offset;this.drag_y_offset=a.view.drag_y_offset;t.call(this,a,b)};q.set_description(p);k.debugging&&(q.debug_string=q.toString(),q.debug_id=k.UTILITIES.generate_unique_id());return q};b.copy=function(c){var f=b.create(this.get_HTML(),this.get_style_attributes().slice(),this.get_description());
return this.add_to_copy(f,c)};b.match=function(b){return this.get_erased&&this.get_erased()?b.match_with_any_element?b.match_with_any_element():this:b.match_with_another_element_widget?b.match_with_another_element_widget(this):this};b.match_with_any_element=function(){return"matched"};b.match_with_another_element_widget=function(b){return this.get_HTML()===b.get_HTML()?"matched":b};b.compare_with=function(b){if(b.compare_with_other_element)return b.compare_with_other_element(this)};b.compare_with_other_element=
function(b){b=b.get_HTML().localeCompare(this.get_HTML());return 0>b?-1:0<b?1:b};b.create_backside=function(){return k.element_backside.create(this)};b.get_attribute_from_pending_css=function(b){var c=this.get_pending_css();if(c&&c[b]||(c=this.get_transform_css())&&c[b])return c[b]};b.get_attribute_from_current_css=function(b){var c=this.get_frontside_element(),f=c.style[b];""===f&&(f=$(c).css(b));return f?"number"===typeof f?f:f.replace("px",""):0};b.get_attribute=function(b){var c=this.get_attribute_from_pending_css(b);
return"undefined"!==typeof c?c:this.get_attribute_from_current_css(b)};b.set_attribute=function(b,c,f,e){var q,t;if(!this.get_frontside(!0).get_element())return!1;q=this.get_attribute_from_pending_css(b);if(q===c)return!1;"undefined"===typeof q&&(q=this.get_attribute_from_current_css(b));t=p(c,b);if("number"===typeof t){if(q==t)return!0;c=t}f&&k.robot.in_training&&k.robot.in_training.edited(this,{setter_name:"set_attribute",argument_1:b,argument_2:c,toString:"change the '"+b+"' style to "+c+" of",
button_selector:".toontalk-element-"+b+"-attribute-input"});this.add_to_css(b,c);e&&(c=this.get_style_attributes(),0>c.indexOf(b)&&c.push(b));this.rerender();return!0};b.dropped_on_style_attribute=function(b,c,f,e){var p,t,a;if(b){p=b.toString();if(b.is_of_type("number")){t=this.get_attribute(c);if("number"===typeof t)a=t;else if("auto"===t)switch(c){case "left":a=$(this.get_frontside_element()).offset().left;break;case "top":a=$(this.get_frontside_element()).offset().top;break;default:a=0}else a=
parseFloat(t);t=b.to_float();switch(p.substring(0,1)){case "-":p=a-t;break;case "*":p=a*t;break;case "/":p=a/t;break;case "^":p=Math.pow(a,t);break;default:p=a+t}this.set_attribute(c,p,!1);(f||e&&e.visible())&&this.get_backside().render()}b.get_infinite_stack()||b.remove();k.robot.in_training&&f&&k.robot.in_training.dropped_on(b,this.create_attribute_widget(c))}};b.get_attribute_widget=function(b){var c=this.get_attribute_widgets()[b];c||(c=this.create_attribute_widget(b),this.get_attribute_widgets()[b]=
c);return c};b.create_attribute_widget=function(b){var f=".toontalk-element-"+b+"-attribute-input",p=this.get_backside_element(),e=this.get_attribute(b),q=this,t=function(c){var d=a.get_attribute_owner(),g;c.currentTarget.toontalk_widget===d&&(g=$(d.get_frontside_element()).closest(".toontalk-top-level-backside").offset(),g||(console.log("Unable to find top-level backside of an element for its position. Perhaps is 'visible' but not attached."),g={left:0,top:0}),c="left"===b?c.pageX-g.left-d.drag_x_offset:
c.pageY-g.top-d.drag_y_offset,a.set_value_from_decimal(c),n.call(a))}.bind(this),a,g,n,d;p&&(f=$(p).find(f),0<f.length&&(f.get(0).toontalk_widget=this));a=k.number.create(0,1);a.element_widget=this;a.set_value_from_decimal(e);a.set_format("decimal");a.attribute=b;a.get_type_name=function(){return"element attribute"};d=a.toString;a.toString=function(){return d.call(this)+" ("+this.attribute+")"};g=a.equals;a.equals=function(a){return b===a.attribute?this.equals(a.element_widget):g.call(this,a)};(e=
this.get_original_copies()[b])?e.push(a):this.get_original_copies()[b]=[a];a.set_value=function(a){var c=q.get_original_copies()[b],d;this.get_attribute_owner().set_attribute(this.attribute,bigrat.toDecimal(a))&&c.forEach(function(b,c){d=b.set_value_from_sub_classes(a)});return d};n=a.update_display;a.update_display=function(){var b;this.get_erased()||(b=this.get_attribute_owner().get_attribute(this.attribute),a.set_value_from_decimal(b));n.call(this)};0<=c.indexOf(b)&&(this.on_update_display(function(){a.update_display();
return!0}),"left"===b||"top"===b)&&(e=this.get_frontside_element(),e.addEventListener("drag",t));a.copy=function(a){return a.just_value?k.number.copy.call(this,a):this.add_to_copy(q.create_attribute_widget(b),a)};a.get_json=function(a){return{type:"attribute_number",attribute_name:b,element:k.UTILITIES.get_json(q,a)}};a.get_original_attribute_widget=function(){return q.get_original_copies()[b][0]};a.get_attribute_owner=function(){var a=function(b){if(b=b.get_parent_of_frontside())return b.is_backside()?
b:a(b.get_widget())},b=this.get_original_attribute_widget();if(b!==this)return b.get_attribute_owner();var c,b=a(this);if(!b||!b.is_of_type("element"))return q;b=b.get_widget();for(c=b.get_parent_of_backside();c&&c.is_of_type("element");)b=c.get_widget(),c=b.get_parent_of_backside();return b};return a};k.creators_from_json.attribute_number=function(b,c){return k.UTILITIES.create_from_json(b.element,c).create_attribute_widget(b.attribute_name)};b.update_display=function(){var b=this.get_frontside_element();
this.get_backside();var c=function(b){return this.get_image_element()?"image":$(b).is(".toontalk-plain-text-element")?"text":"element"}.bind(this),f,e;this.being_dragged||(this.get_erased&&this.get_erased()?$(b).css({opacity:0}):(this.get_erased&&"0"===$(b).css("opacity")&&$(b).css({opacity:1}),b.children.length===$(b).children(".ui-resizable-handle").length&&(f=document.createElement("div"),f.innerHTML=this.get_HTML(),b.appendChild(f),this.set_image_element(f,b),$(b).addClass("toontalk-element-frontside"),
"<"!==f.innerHTML.substring(0,1)&&((e=this.get_additional_classes())&&$(f).addClass(e),$(b).addClass("ui-widget toontalk-plain-text-element"))),k.UTILITIES.on_a_nest_in_a_box(b)&&(this.set_attribute("width",$(b).closest(".toontalk-box-hole").width(),!1),this.set_attribute("height",$(b).closest(".toontalk-box-hole").height(),!1)),this.apply_css(),this.fire_on_update_display_handlers(),b.title="Click to see the backside where you can place robots or change the style of this "+c(b)))};b.toString=function(){var b=
"element whose HTML is '"+k.UTILITIES.maximum_string_length(this.get_HTML(),40)+"'";k.debugging&&(b+=" ("+this.debug_id+")");return b};b.get_type_name=function(){return"element"};b.get_help_URL=function(){return"docs/manual/elements.html"};b.get_json=function(b){var c=this.get_style_attributes(),f=[],e=k.UTILITIES.remove_z_index(this.get_HTML()),p=encodeURIComponent(e);0===e.indexOf("<img src='data:image/")?(b.shared_html||(b.shared_html=[]),e=b.shared_html.indexOf(p),0>e&&(e=b.shared_html.push(p)-
1),b={shared_html_index:e}):b=p;c.forEach(function(b){f.push(b)});return{type:"element",html:b,attributes:f,attribute_values:f.map(this.get_attribute.bind(this)),additional_classes:this.get_additional_classes()}};k.creators_from_json.element=function(c,f){var k=decodeURIComponent("string"===typeof c.html?c.html:f.shared_html[c.html.shared_html_index]),e=b.create(k,c.attributes,c.description),q;q=f&&f.event?["left","top"]:[];c.attribute_values.forEach(function(b,a){var g=c.attributes[a];0>q.indexOf(g)&&
e.add_to_css(g,p(b)||b)});c.additional_classes&&e.set_additional_classes(c.additional_classes);return e};b.create_attribute_path=function(b,c){var f=k.path.get_path_to(b.element_widget,c);return this.extend_attribute_path(f,b.attribute)};b.extend_attribute_path=function(b,c){return{dereference:function(f,e,k){return b.dereference(e||f,void 0,k).get_attribute_widget(c)},toString:function(){return"the '"+c+"' property of "+b},get_json:function(){return{type:"path_to_style_attribute",attribute:c,element_widget_path:b.get_json()}}}};
k.creators_from_json.path_to_style_attribute=function(c){var f=k.UTILITIES.create_from_json(c.element_widget_path);return b.extend_attribute_path(f,c.attribute)};b.get_size_attributes=function(){return{width:this.get_attribute("width"),height:this.get_attribute("height")}};b.set_size_attributes=function(b,c){this.set_attribute("width",b);this.set_attribute("height",c);k.UTILITIES.set_timeout(function(){this.rerender()}.bind(this))};b.set_location_attributes=function(b,c){this.set_attribute("left",
b);this.set_attribute("top",c)};return b}(window.TOONTALK);window.TOONTALK.element_backside=function(k){var c=function(l,h,p){var e=function(a){var b=h.get_style_attributes();0>b.indexOf(a)&&(b.push(a),"left"===a?(a=h.get_frontside_element(),$(a).on("drag",function(a){var b=h.get_backside_element(),c=h.get_frontside_element();b&&c&&$(b).find(".toontalk-element-left-attribute-input").val(a.originalEvent.clientX)})):"top"===a&&(a=h.get_frontside_element(),$(a).on("drag",function(a){var b=h.get_backside_element(),
c=h.get_frontside_element();b&&c&&$(b).find(".toontalk-element-top-attribute-input").val(a.originalEvent.clientY)})))},q=function(a,g){var n=0<=h.get_style_attributes().indexOf(a),d=k.UTILITIES.create_check_box(n,"toontalk-style-attribute-check-box",a+"&nbsp;","Click to add or remove the '"+a+"' style attribute from the backside of this element."),n=k.UTILITIES.create_anchor_element("i",("transform-origin-x"===a||"transform-origin-y"===a?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin#":
f(a)?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform#":"http://www.w3.org/community/webed/wiki/CSS/Properties/")+a),q=document.createElement("li");$(n).addClass("toontalk-help-button notranslate toontalk-attribute-help-button");$(n).css({color:"white"});n.translate=!1;n.lang="en";d.container.appendChild(n);d.button.addEventListener("click",function(g){if(d.button.checked)e(a);else{g=h.get_style_attributes();var f=g.indexOf(a);0<=f&&(g.splice(f,1),c(l,h,p))}b(p,h,h.get_backside())});q.appendChild(d.container);
g.appendChild(q)},t=function(a,b){var c,d;"string"===typeof a?q(a,b):a.label?(c=document.createElement("h3"),c.textContent=a.label,d=document.createElement("ul"),b.appendChild(c),b.appendChild(d),t(a.sub_menus,d)):a.forEach(function(a){t(a,b)})};$(l).is(".ui-accordion")&&$(l).accordion("destroy");$(l).empty();t([{label:"Geometry attributes",sub_menus:"left top width height z-index background-position".split(" ")},{label:"Color attributes",sub_menus:["background-color","color","opacity"]},{label:"Font attributes",
sub_menus:["font-size","font-weight"]},{label:"Visibility",sub_menus:["display","visibility"]},{label:"Transformations",sub_menus:["rotate","skewX","skewY","transform-origin-x","transform-origin-y"]}],l);$(l).accordion({active:0,heightStyle:"content"});return l},b=function(b,c,f){var e=c.get_style_attributes();c.get_frontside_element();$(b).empty();e.forEach(function(e){c.get_attribute(e);var p=document.createElement("tr"),a=document.createElement("td"),g=c.get_attribute_widget(e),n=g.get_frontside_element();
g.set_parent_of_frontside(f,!1,!0);g.set_infinite_stack(!0);b.appendChild(p);p.appendChild(a);a.appendChild(k.UTILITIES.create_text_element(e));a=document.createElement("td");p.appendChild(a);g.set_visible(!0);$(n).addClass("toontalk-element-attribute");a.appendChild(n);g.render()})},p=function(b){var c=$("<button>Add or remove style attributes</button>").button();c.addClass("toontalk-show-attributes-chooser-button");c.click(function(f){$(b).is(":visible")?($(b).hide(),c.button("option","label","Add or remove style attributes"),
c.attr("title","Click to add widgets for reading and writing style attributes of this element.")):($(b).show(),c.button("option","label","Hide style attributes list"),c.attr("title","Click to hide the list of attributes that can be added or removed."))});c.attr("title","Click to add widgets for reading and writing style attributes of this element.");return c.get(0)};return{create:function(f){var h=k.backside.create(f),u=h.get_element();f.get_HTML();var e=document.createElement("table"),q=document.createElement("div"),
t=p(q),a=k.backside.create_advanced_settings_button(h,f),g=k.UTILITIES.get_current_url_boolean_parameter("elementHTML",!1),n=g?"get_HTML":"get_text",d=h.update_display,w,x;f.update_display();w=f[n]().trim();0<w.length&&(x=k.UTILITIES.create_text_area(w,"toontalk-html-input","","Type here to edit the text."),w=function(a){a=x.button.value.trim();f.get_frontside_element();var b=g?"set_HTML":"set_text";f[b](a)&&k.robot.in_training&&k.robot.in_training.edited(f,{setter_name:b,argument_1:a,toString:"change the text to "+
a+" of",button_selector:".toontalk-html-input"})},$(x.container).resizable(),$(x.container).css({width:"100%"}),$(x.button).css({width:"100%"}),x.button.addEventListener("change",w),x.button.addEventListener("mouseout",w),u.appendChild(x.container));h.get_attributes_chooser=function(){return q};c(q,f,e);b(e,f,h);u.appendChild(q);u.appendChild(t);u.appendChild(e);u.appendChild(a);$(q).hide();$(q).addClass("toontalk-attributes-chooser");h.update_display=function(){x&&$(x.button).val(f[n]());b(e,f,h);
$(q).is(":visible")&&c(q,f,e);d()};$(u).find(".toontalk-hide-backside-button").click(function(a){$(q).hide()});h.add_advanced_settings();return h}}}(window.TOONTALK)})();window.TOONTALK.sensor=function(f){var k=Object.create(f.widget),c=function(b,c){"element"===b.get_type_name()&&(b.set_attribute("font-size",.5*$(c.get_frontside_element(!0)).height(),!1,!0),b.set_additional_classes("toontalk-string-value-from-sensor"),c.visible()&&b.rerender())};k.create=function(b,p,l,h,u,e){var q=f.nest.create(l,h,void 0,"sensor"),t=q.get_json,a=q.update_display,g=q.copy,n=function(a){var b=a[p],g=q.visible(),e=$(q.get_frontside_element()).closest(".toontalk-top-level-backside"),
h;if("keyCode"===p){if(16===b)return;b=String.fromCharCode(b);a.shiftKey||(b=b.toLowerCase())}switch(typeof b){case "number":h=f.number.create(Math.round(b),1);break;case "string":h=f.element.create(b,void 0,void 0,"toontalk-string-value-from-sensor");c(h,q);break;case "boolean":h=f.element.create(b.toString(),void 0,void 0,"toontalk-string-value-from-sensor");c(h,q);break;case "undefined":f.UTILITIES.report_internal_error("No "+p+" in sensor "+k);return}g?(a=f.bird.create(),q.add_to_top_level_backside(a),
a.animate_delivery_to(h,q,q,e.width()/2,e.height())):q.add_to_contents(h)}.bind(this);q.copy=function(a){var c;if(a.just_value&&this.has_contents())return g.call(this,a);c=f.sensor.create(b,p,l,void 0,u,a?void 0:e);return q.add_to_copy(c,a)};q.get_json=function(a){var c=t.call(this,a);c.type="sensor";c.event_name=b;c.attribute=p;c.active=u;c.sensor_of=e&&f.UTILITIES.get_json(e,a);return c};q.update_display=function(){var b=$(this.get_frontside_element());a.call(this);u||b.is(".toontalk-top-level-resource")?
(b.addClass("toontalk-sensor-nest"),b.removeClass("toontalk-sensor-inactive-nest")):(b.addClass("toontalk-sensor-inactive-nest"),b.removeClass("toontalk-sensor-nest"));b.removeClass("toontalk-empty-nest")};q.get_type_name=function(){return"sensor"};q.get_help_URL=function(){return"docs/manual/sensors.html"};q.toString=function(){return"a sensor of "+p+" for "+b+" sensors"};q.get_active=function(){return u};q.set_active=function(a,c){if(u!==a||c)a?e?e.get_frontside_element().addEventListener(b,n):
window.addEventListener(b,n):e?e.get_frontside_element().removeEventListener(b,n):window.removeEventListener(b,n),u=a};q.set_active(u,!0);q.create_backside=function(){return f.sensor_backside.create(this)};q.get_event_name=function(){return b};q.set_event_name=function(a){var c=u;b&&u&&this.set_active(!1);b=a;c&&this.set_active(!0)};q.get_attribute=function(){return p};q.set_attribute=function(a){p=a};q.match=function(a){return this};q.set_sensor_of=function(a){e=a};return q};f.creators_from_json.sensor=
function(b,k){var l=f.UTILITIES.create_array_from_json(b.contents,k),h=f.sensor.create(b.event_name,b.attribute,b.description,l,!1);b.sensor_of?f.UTILITIES.set_timeout(function(){h.set_sensor_of(f.UTILITIES.create_from_json(b.sensor_of,k));h.set_active(b.active)}):h.set_active(b.active);0<l.length&&setTimeout(function(){l.forEach(function(b){c(b.get_widget(),h)})},500);return h};return k}(window.TOONTALK);
window.TOONTALK.sensor_backside=function(f){return{create:function(k){var c=f.UTILITIES.create_text_input(k.get_event_name(),"toontalk-sensor-event-name-input","Event name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;","Type here the event name.","https://developer.mozilla.org/en-US/docs/Web/Events/"+k.get_event_name()),b=f.UTILITIES.create_text_input(k.get_attribute(),"toontalk-sensor-event-attribute-input","Event attribute","Type here the event attribute name.","https://developer.mozilla.org/en/docs/Web/API/Event"),
p=f.UTILITIES.create_check_box(k.get_active(),"toontalk-sensor-active-check-box","Listening to events","Check the box if you want to make this sensor active."),l=f.nest_backside.create(k),h=l.get_element(),u=$(h).find(".toontalk-settings-backside-button").get(0);c.button.addEventListener("change",function(){k.set_event_name(c.button.value.trim())});b.button.addEventListener("change",function(){k.set_attribute(b.button.value.trim())});$(p.button).click(function(b){var c=p.button.checked;k.set_active(c);
f.robot.in_training&&f.robot.in_training.edited(robot,{setter_name:"set_active",argument_1:c,toString:"change to "+(c?"active":"inactive")+" of the "+k,button_selector:".toontalk-sensor-active-check-box"});k.render();b.stopPropagation()});h.insertBefore(c.container,u);h.insertBefore(b.container,u);h.insertBefore(p.container,u);return l}}}(window.TOONTALK);window.TOONTALK.tool=function(f){return{add_listeners:function(k,c){var b,p,l,h,u,e=function(a){var b=t(a),c,d={};a.preventDefault();var e=0,h=0;20>a.clientX?e=-20:a.clientX+20>window.innerWidth&&(e=20);20>a.clientY?h=-20:a.clientY+20>window.innerHeight&&(h=20);window.scrollBy(e,h);d.clientX=a.pageX-e-p;d.clientY=a.pageY-h-l;k.style.left=d.clientX+"px";k.style.top=d.clientY+"px";if(b&&b.is_of_type("top-level"))u&&(f.UTILITIES.remove_highlight(),u=void 0);else{if(b&&(c=b.get_frontside_element(),c===
u))return;u=c;f.UTILITIES.highlight_element(u,d)}},q=function(a){var g=t(a),h;a.preventDefault();u&&f.UTILITIES.remove_highlight();g&&g.add_copy_to_container&&(h=g.top_level_widget(),c.apply_tool(g,a),h.backup_all());!g&&c.nothing_under_tool&&c.nothing_under_tool();$(k).removeClass("toontalk-tool-held");$(k).addClass("toontalk-tool-returning");f.UTILITIES.add_one_shot_event_handler(k,"transitionend",1E3,function(){$(k).removeClass("toontalk-tool-returning")});f.UTILITIES.set_timeout(function(){k.style.left=
b.left+"px";k.style.top=b.top+"px"});document.removeEventListener("mousemove",e);document.removeEventListener("mouseup",q)},t=function(a){var b;$(k).hide();a=document.elementFromPoint(a.pageX-(window.pageXOffset+p),a.pageY-(window.pageYOffset+l)+h/2);for($(k).show();a&&!a.toontalk_widget&&(!$(a).is(".toontalk-backside")||$(a).is(".toontalk-top-level-backside"));)a=a.parentNode;a&&(b=a.toontalk_widget);if(b)return a=b.get_type_name(),b&&"empty hole"===a?b.get_parent_of_frontside():b};k.addEventListener("mousedown",
function(a){var c=k.getBoundingClientRect();p=a.clientX-c.left;l=a.clientY-c.top;h=c.height;a.preventDefault();$(k).addClass("toontalk-tool-held");b=$(k).offset();document.addEventListener("mousemove",e);document.addEventListener("mouseup",q)})}}}(window.TOONTALK);window.TOONTALK.vacuum=function(f){var k=Object.create(null),c={suck:"Drag this vacuum over the thing you want to remove. Click or type 'e' to switch to erasing. Type 'r' to restore previously removed or erased things.",erase:"Drag this vacuum over the thing you want to erase (or un-erase). Type 's' to switch to sucking. Click or type 'r' to restore contents.",restore:"Drag this over the work area. Each time you release it a widget is restored. Click or type 's' to switch to sucking. Type 'e' to switch to erasing."},
b={suck:"toontalk-vacuum-s",erase:"toontalk-vacuum-e",restore:"toontalk-vacuum-r"},p={suck:"erase",erase:"restore",restore:"suck"};k.create=function(){var k,h,u,e=[],q=function(a){h!==a&&(h=a,$(k).removeClass(u),u=b[h],$(k).addClass(u),t())},t=function(){k.title="restore"===h&&0===e.length?"The vacuum is empty. Type 'r' to switch to removing. Type 'e' to switch to erasing.":c[h]};return{apply_tool:function(a,b){var c,d;"suck"===h?a.remove&&"top-level"!==a.get_type_name()&&(f.robot.in_training&&b&&
f.robot.in_training.removed(a),a.remove(b),e.push(a)):"erase"===h?"top-level"!==a.get_type_name()&&(a.get_frontside_element(),c=!a.get_erased(),a.set_erased(c,!0),f.robot.in_training&&b&&f.robot.in_training.set_erased(a,c)):"restore"===h&&0<e.length&&(c=e.pop(),d=a.add_to_top_level_backside(c,!0),c=$(k).offset(),c.left-=$(d).width(),f.UTILITIES.set_absolute_position($(d),c))},nothing_under_tool:function(){q(p[h])},get_element:function(){k||(k=document.createElement("div"),$(k).addClass("toontalk-vacuum"),
f.tool.add_listeners(k,this),q("suck"),document.addEventListener("keyup",function(a){a=String.fromCharCode(a.keyCode);"s"===a||"S"===a?q("suck"):"e"===a||"E"===a?q("erase"):"r"!==a&&"R"!==a||q("restore")}),t());return k}}};f.creators_from_json.vacuum=function(b,c){var k=f.vacuum.create();b.mode&&f.UTILITIES.set_timeout(function(){k.set_mode(b.mode)});return k};return k}(window.TOONTALK);window.TOONTALK.wand=function(f){var k=Object.create(null);k.create=function(){var c;return{apply_tool:function(b){"top-level"!==b.get_type_name()&&b.add_copy_to_container()},get_element:function(){c||(c=document.createElement("div"),$(c).addClass("toontalk-wand"),c.title="Drag this magic wand over the thing you want to copy.",f.tool.add_listeners(c,this));return c}}};f.creators_from_json.wand=function(){return f.wand.create()};return k}(window.TOONTALK);window.TOONTALK.SETTINGS=function(f){var k=function(k,l,h){var u=[],e=[],q=l?1:0,t=f.UTILITIES.create_local_files_table(k);u[q]="Programs stored in browser";b(k,t,!1,h);e[q]=t;l?(c("program",k,h,function(a){u[0]="Programs in cloud";e[0]=a||f.UTILITIES.create_text_element("Error connecting");e[2]&&h.appendChild(f.UTILITIES.create_tabs(u,e))}),c("page",k,h,function(a){u[2]="Published pages";e[2]=a||f.UTILITIES.create_text_element("Error connecting");e[0]&&h.appendChild(f.UTILITIES.create_tabs(u,e))})):
h.appendChild(f.UTILITIES.create_tabs(u,e))},c=function(c,k,h,u){f.google_drive.get_toontalk_files(!1,c,function(e){var q;"string"===typeof e?q=e:e.error&&(q=e.error.message);q?"Need to authorize"===q||"Login Required"===q?f.google_drive.authorize(u):(console.log(q),console.log("Google drive status: "+f.google_drive.get_status()),u(null)):(q="program"===c&&"toontalk-file-load-button",e=f.UTILITIES.create_file_data_table(e.items,!0,q),b(k,e,!0,h),u(e))})},b=function(b,c,f,k){$(c).find(".toontalk-file-load-button").click(function(c){var l=
function(){$(k).remove()},t=function(){b.set_setting("program_name",c.target.innerText);b.load(f,l)}.bind(this);b.save(!0,void 0,t)})};return{open:function(b){var c=document.createElement("div"),h=b.get_backside_element(),u=b.get_setting("program_name"),e=f.UTILITIES.create_text_input(u,"toontalk-program-name-input","Current program name:","Edit this to change the name of your program","docs/manual/settings.html"),q=f.UTILITIES.create_close_button(function(){$(c).remove()},"Click to close the settings panel."),
t=f.UTILITIES.create_text_element("How should your program be saved?"),a=f.UTILITIES.create_check_box(b.get_setting("auto_save_to_google_drive"),"toontalk-save-setting","Save automatically to my Google Drive","Check this if you want your programs automatically saved to a 'ToonTalk Programs' folder in your Google Drive."),g=f.UTILITIES.create_check_box(b.get_setting("auto_save_to_local_storage"),"toontalk-save-setting","Save automatically to this browser's local storage","Check this if you want your programs automatically saved in this browser's local storage."),
n=f.UTILITIES.create_button("Save to Google Drive now","toontalk-save-button","Click to save your program now to your Google Drive account.",function(){b.save(!0,{google_drive:!0})}),d=f.UTILITIES.create_button("Save to browser's storage now","toontalk-save-button","Click to save your program now to this browser's local storage.",function(){b.save(!0,{local_storage:!0})}),w=f.UTILITIES.create_button("Login to Google","toontalk-google-login-button","Click to log in to Google to authorize use of your Google Drive.",
function(){f.google_drive.authorize(function(){$(w).remove()})}),x=f.UTILITIES.create_button("Publish","toontalk-publish-button","Click to publish your program by generating a Google Drive URL.",function(){b.publish(E,A.button.checked)}),A=f.UTILITIES.create_check_box(b.get_setting("publish_as_workspace"),"toontalk-publish-setting","As a workspace","Check this if you want to publish the workspace and its widgets. Uncheck it you wish to publish just the widgets."),E=function(a,c){var d=document.createElement("span"),
g=f.google_drive.google_drive_url(a.id);d.innerHTML="Published: <a href='"+g+"' target='_blank'>"+b.get_setting("program_name")+"</a>";$(e.container).children("tr").append(f.UTILITIES.create_table_entry(d))},I=document.createElement("div"),D=f.google_drive&&"undefined"!==typeof gapi?f.google_drive.get_status():"Google Drive API not loaded",J=!0,F=f.UTILITIES.create_vertical_table(x,A.container);$(c).addClass("toontalk-settings-panel").css({width:$(h).width()+29,height:$(h).height()+50,left:-2,top:-25,
"z-index":f.UTILITIES.next_z_index()});c.appendChild(q);e.button.addEventListener("change",function(){var a=e.button.value.trim();u!==a&&b.save(!0,void 0,function(){u=a;b.set_setting("program_name",a);b.load(!0,function(){setTimeout(function(){$(c).css({"z-index":f.UTILITIES.next_z_index()})},500)})})});a.button.addEventListener("click",function(c){b.save(!0,{auto_save_to_google_drive:g.button.checked,gooogle_drive:!0});b.set_setting("auto_save_to_google_drive",a.button.checked);a.button.checked?
$(n).hide():$(n).show()});g.button.addEventListener("click",function(a){b.save(!0,{auto_save_to_local_storage:g.button.checked,local_storage:!0});b.set_setting("auto_save_to_local_storage",g.button.checked);g.button.checked?$(d).hide():$(d).show()});A.button.addEventListener("click",function(a){b.set_setting("publish_as_workspace",A.button.checked)});c.appendChild(I);$(t).css({"font-weight":"bold","font-size":24,color:"navy"});I.appendChild(t);I.appendChild(e.container);I.appendChild(a.container);
I.appendChild(g.container);a.container.appendChild(f.UTILITIES.create_space());a.container.appendChild(n);b.get_setting("auto_save_to_google_drive")&&$(n).hide();g.container.appendChild(f.UTILITIES.create_space());g.container.appendChild(d);b.get_setting("auto_save_to_local_storage")&&$(d).hide();"Need to authorize"===D?(a.container.appendChild(f.UTILITIES.create_space()),a.container.appendChild(w)):"Authorized"!==D&&"Ready"!==D&&"Authorized but not yet ready"!==D&&(J=!1,setTimeout(function(){a.button.disabled=
!0;$(x).button("option","disabled",!0);$(n).button("option","disabled",!0);a.container.title="Inactived because attempt to connect to Google Drive returned: "+D;x.title=a.container.title;n.title=a.container.title},1));$(e.container).children("tr").append(f.UTILITIES.create_table_entry(F));k(b,J,c);h.appendChild(c)}}}(window.TOONTALK);window.TOONTALK.DEFAULT_SETTINGS={program_name:"My first program",auto_save_to_google_drive:!0,auto_save_to_local_storage:!0};window.TOONTALK.DISPLAY_UPDATES=function(f){var k=[],c=0;return{pending_update:function(b){b.update_display&&(0<=k.indexOf(b)||k.push(b))},update_display:function(){var b=k,c=function(b,f){$(b).children().each(function(b,e){$(e).css({"z-index":f+1});c(e,f+1)})};k=[];0!==b.length&&b.forEach(function(b){var h=b.get_frontside_element&&b.get_frontside_element(),k,e,q;b.update_display();k=$(h).parent().closest(".toontalk-side");k.is("*")&&(e=f.UTILITIES.get_style_numeric_property(h,"z-index"),q=f.UTILITIES.get_style_numeric_property(k.get(0),
"z-index"),q||(q=f.UTILITIES.next_z_index(),k.css({"z-index":q})),!e||k.is(".toontalk-top-level-backside")?(e=f.UTILITIES.next_z_index(),$(h).css({"z-index":e})):e>=q&&(e=q+1,$(h).css({"z-index":e})),c(h,e));h&&!$(h).is(".toontalk-top-level-resource, .toontalk-bird, .toontalk-nest, .toontalk-box-hole, .toontalk-plain-text-element, .toontalk-conditions-contents, .toontalk-robot, .toontalk-widget, .toontalk-held-by-robot")&&f.UTILITIES.set_timeout(function(){k.is(".toontalk-box-hole")?$(h).is(".ui-resizable")&&
$(h).resizable("destroy"):$(h).is(".ui-resizable")||f.UTILITIES.make_resizable($(h),b)})})},run_cycle_is_over:function(){var b=Date.now();20<=b-c&&(this.update_display(),c=b)}}}(window.TOONTALK);window.TOONTALK.actions=function(f){f.creators_from_json.body=function(k,c){var b=f.actions.create();c.body=b;b.initialise_steps(f.UTILITIES.create_array_from_json(k.steps,c));return b};return{create:function(k){var c=Object.create(this),b=[];k||(k=[]);c.copy=function(){return f.actions.create(f.UTILITIES.copy_array(k))};c.get_steps=function(){return k};c.initialise_steps=function(b){k=b};c.is_empty=function(){return 0===k.length};c.reset_steps=function(){k=[];this.reset_newly_created_widgets()};
c.reset_newly_created_widgets=function(){b=[]};c.add_step=function(b,c){k.push(b);c&&this.add_newly_created_widget(c)};c.add_newly_created_widget_if_new=function(c){0<=b.indexOf(c)||this.add_newly_created_widget(c)};c.add_newly_created_widget=function(c){f.debugging&&0<=b.indexOf(c)?console.log("add_newly_created_widget called with not new widget."):b.push(c)};c.get_newly_created_widgets=function(){return b};c.get_path_to=function(c,k){var h,u;b.some(function(b,q){if(b===c)return h=f.newly_created_widgets_path.create(q),
!0;if(b.get_path_to&&(u=b.get_path_to(c,k)))return h=f.newly_created_widgets_path.create(q),h.next=u,!0});return h};c.dereference=function(c){f.debugging&&!b[c]&&f.UTILITIES.report_internal_error("Expected to find the "+(c+1)+"th newly created widget.");return b[c]};return c},run_unwatched:function(f,c,b,p,l){var h=this.get_steps();l||(l=0);p.run_next_step=function(){if(l<h.length){var u=h[l];l++;u.run_unwatched(f,c,p)}else p.get_run_once()||p.get_first_in_team().run(f,c,b)};p.run_next_step()},run_watched:function(k,
c,b,p){var l=this.get_steps(),h=p.get_frontside_element(),u=h.parentElement,e=function(){$(h).addClass("toontalk-side-animating");f.UTILITIES.set_position_relative_to_top_level_backside($(h),t);setTimeout(function(){u.appendChild(h);f.UTILITIES.set_absolute_position($(h),t);p.set_animating(!1);p.get_run_once()||p.get_first_in_team().run(k,c,b);p.render()},1E3)},q=0,t=$(h).offset(),a=$(h).position(),g=$(h).width(),n=$(h).height(),d=$(h).closest(".toontalk-backside"),w=d.get(0).getBoundingClientRect(),
x=$(h).closest(".toontalk-top-level-backside").offset(),A=k.get_backside();0===g&&($(h).css({width:"",height:""}),g=$(h).width(),n=$(h).height());x||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),x={left:0,top:0});if(t.left<w.left-x.left||t.top<w.top-x.top||t.left+g>w.right+x.left||t.top+n>w.bottom+x.top)t=d.offset(),t.left+=d.width()/2,t.top+=d.height()-n;p.start_position=a;p.run_next_step=function(){A&&A.visible()?setTimeout(function(){if(q<l.length){var a=
l[q];q++;a.run_watched(k,c,p);p.get_thing_in_hand()&&(p.get_thing_in_hand().save_dimensions(),p.render())}else e()},500):(p.set_animating(!1),$(h).css({width:"",height:""}),h.style.left=a.left+"px",h.style.top=a.top+"px",u.appendChild(h),this.run_unwatched(k,c,b,p,q))}.bind(this);p.set_animating(!0,t);p.run_next_step();return!0},toString:function(){var f="",c=this.get_steps();c.forEach(function(b,p){f+=b.toString();f=p===c.length-2?f+" and \n":p<c.length-2?f+", \n":f+"."});return f},get_json:function(k){return{type:"body",
steps:f.UTILITIES.get_json_of_array(this.get_steps(),k)}}}}(window.TOONTALK);
window.TOONTALK.newly_created_widgets_path=function(f){f.creators_from_json.newly_created_widgets_path=function(k){return f.newly_created_widgets_path.create(k.index)};return{create:function(k){return{dereference:function(c,b,p){c=p.get_body().dereference(k);return this.next?f.path.dereference_path(this.next,c,b,p):c},toString:function(){var c;switch(k){case 0:c="first";break;case 1:c="second";break;case 2:c="third";break;default:c=k+1+"th"}return"the "+c+" widget he created"},get_json:function(){return{type:"newly_created_widgets_path",
index:k}}}}}}(window.TOONTALK);window.TOONTALK.robot_action=function(f){var k={copy:function(b,c,f,a){a.add_newly_created_widget(b.copy({}));return!0},"pick up":function(b,c,f,a){a.set_thing_in_hand(b);return!0},"pick up a copy of":function(b,c,f,a){b=b.copy({});a.add_newly_created_widget(b);a.set_thing_in_hand(b);return!0},"drop it on":function(b,c,h,a,g){if(b)if(c=a.get_thing_in_hand()){if(c.drop_on)return c.drop_on(b,!1,void 0,a),a.set_thing_in_hand(void 0),b.visible&&b.visible()&&b.render(),c.robot_waiting_before_next_step===
a?(g&&g.running_watched||(c.robot_waiting_before_next_step=void 0),!1):!0;f.UTILITIES.report_internal_error("Thing in robot's hand ("+c+") doesn't handle 'drop_on'. Robot that "+a)}else f.UTILITIES.report_internal_error("The robot that '"+a.toString()+"' is executing drop_on but has nothing in its hand.");else f.UTILITIES.report_internal_error("The robot that '"+a.toString()+"' is executing drop_on but doesn't know where to drop what its holding")},remove:function(b,c,f,a){b.remove();return!0},erased_widget:function(b,
c,f,a,g){b.set_erased(g.erased);return!0},edit:function(b,c,h,a,g){if(b[g.setter_name])return g.argument_2?b[g.setter_name].call(b,g.argument_1,g.argument_2,b.visible()):b[g.setter_name].call(b,g.argument_1,b.visible()),!0;f.UTILITIES.report_internal_error(b+" cannot be edited.")},"add to the top-level backside":function(b,c,f,a,g){a.visible()||(a=b.get_frontside_element(!0),f=$(c.get_frontside_element()).position(),c=$(c.get_frontside_element()).closest(".toontalk-top-level-backside").get(0),$(a).css({left:f.left,
top:f.top}),c.appendChild(a),c.toontalk_widget.add_backside_widget(b),b.animate_to_element(c));return!0}},c=function(b,c,f,a,g){c=a.get_thing_in_hand();a.get_frontside_element();var h=b.get_element();f=$(h).width()/2;h=$(h).height()/2;a.animate_to_widget(b,g,.25,f,h);c&&a.render()},b=function(b,c){var f=b.get_backside_element(!0);return $(f).find(c).get(0)},p=function(c,f,h,a,g,n){var d=b(c,n),k=a.get_frontside_element(),l=d&&$(d).is(":visible"),p=function(){g();$(d).addClass("ui-state-active");setTimeout(function(){$(d).removeClass("ui-state-active");
!l&&c.get_backside()&&c.get_backside().hide_backside();a.run_next_step()},500)};f=function(){a.animate_to_element(d,p,.25,0,-$(k).height())};!l&&c.open_backside?c.open_backside(f):f()},l=function(b,c,f,a,g,h){a.get_frontside_element();a.carrying_tool=h;a.update_display();a.animate_to_element(b.get_frontside_element(),function(){g();a.carrying_tool=void 0;a.update_display();a.run_next_step()},.25,0,0)},h=function(b,c,f,a,g){var h=b.get_parent_of_frontside();l(b,c,f,a,function(){g();h&&"top-level"!==
h.get_widget().get_type_name()&&h.update_display&&h.update_display();b.render()},"toontalk-vacuum-ready-small")},u={copy:function(b,c,f,a,g){l(b,c,f,a,function(){g();b.add_copy_to_container(a.get_recently_created_widget())},"toontalk-wand-small")},"pick up":function(b,h,k,a,g){var n=b.get_frontside_element(),d=function(){g();a.run_next_step()};"empty hole"===b.get_type_name()?f.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):(b.save_dimensions(),$(n).css({width:n.offsetWidth+
"px",height:n.offsetHeight+"px"}),c(b,h,k,a,d))},"pick up a copy of":function(b,f,h,a,g){c(b,f,h,a,function(){g();a.get_recently_created_widget().set_visible(!0);a.update_display();a.run_next_step()})},"drop it on":function(b,h,k,a,g){var n=a.get_thing_in_hand(),d;n?(d=$(n.get_frontside_element()),c(b,h,k,a,function(){var b=d.offset();d.removeClass("toontalk-held-by-robot");g();n.drop_on&&($(a.get_frontside_element()).closest(".toontalk-top-level-backside").append(d.get(0)),f.UTILITIES.set_absolute_position(d,
b),n.restore_dimensions(),n.robot_waiting_before_next_step===a?n.robot_waiting_before_next_step=void 0:(a.set_thing_in_hand(void 0),a.run_next_step()),a.rerender())})):(f.UTILITIES.report_internal_error("Expected the robot to be holding something."),console.log("The robot is "+a),c(b,h,k,a,g))},remove:h,erased_widget:h,edit:function(b,c,f,a,g,h){p(b,c,f,a,function(){b.get_backside()&&b.get_backside().update_display();g()},h.button_selector)},"add to the top-level backside":function(b,c,f,a,g){g();
a.run_next_step()}};f.creators_from_json.robot_action=function(b,c){return b.additional_info?f.robot_action.create(f.path.create_from_json(b.path,c),b.action_name,b.additional_info):f.robot_action.create(f.path.create_from_json(b.path,c),b.action_name)};return{create:function(b,c,h){var a=Object.create(this),g=k[c],n=u[c];n||(n=function(a,b,c,g,e){setTimeout(function(){continuation(a)},3E3)});b||f.UTILITIES.report_internal_error("path undefined in "+c+" action");g||f.UTILITIES.report_internal_error("no run_function for "+
c);a.run_unwatched=function(a,c,n){var k=f.path.dereference_path(b,a,c,n);if(!k)return f.UTILITIES.report_internal_error("Unable to dereference path: "+f.path.toString(b)+" in context: "+a.toString()),!1;g(k,a,c,n,h)&&n.run_next_step()};a.run_watched=function(a,c,k){var l=f.path.dereference_path(b,a,c,k),p=function(){h||(h={});h.running_watched=!0;g(l,a,c,k,h)};l?(l.set_visible(!0),n(l,a,c,k,p,h)):f.UTILITIES.report_internal_error("Unable to dereference the path: "+f.path.toString(b)+" in context: "+
a.toString())};a.toString=function(){return c+" "+f.path.toString(b)};a.get_json=function(a){return{type:"robot_action",action_name:c,path:f.path.get_json(b,a),additional_info:h}};return a}}}(window.TOONTALK);window.TOONTALK.queue=function(f){return{create:function(){var k=Object.create(this);k.to_run=f.UTILITIES.create_queue();return k},enqueue:function(k){if(f.debugging&&this.to_run.does_any_item_satisfy(function(c){return c.robot===k.robot}))console.log("The same robot is being queued twice."),console.log("Robot is "+k.robot);else return this.to_run.enqueue(k)},maximum_run:50,paused:!1,run:function(){for(var k,c=Date.now()+this.maximum_run;!(this.to_run.isEmpty()||this.paused||Date.now()>=c);)k=this.to_run.dequeue(),
k.robot.run_actions(k.context,k.top_level_context,k.queue);f.DISPLAY_UPDATES.run_cycle_is_over();f.UTILITIES.set_timeout(function(){this.run()}.bind(this),this.to_run.isEmpty()?this.maximum_run:0)}}}(window.TOONTALK);window.TOONTALK.path=function(f){f.creators_from_json["path.to_entire_context"]=function(){return f.path.to_entire_context()};f.creators_from_json["path.top_level_backside"]=function(){return f.path.top_level_backside};f.creators_from_json["path.to_backside_widget_of_context"]=function(k){return f.path.get_path_to_backside_widget_of_context(k.type_name)};f.creators_from_json["path.to_resource"]=function(k,c){return f.path.get_path_to_resource(f.UTILITIES.create_from_json(k.resource,c))};return{get_path_to:function(k,
c){var b=function(b,c){var h=c.get_context(),k=c.get_body(),e,q;if(h===b)return f.path.to_entire_context();q=b.get_type_name();if("top-level"===q)return f.path.top_level_backside;if(e=k.get_path_to(b,c))return e;if("element attribute"===q&&b.get_original_attribute_widget()===b)return f.element.create_attribute_path(b,c);if(h.get_path_to&&(k=h.get_path_to(b,c)))return e=f.path.to_entire_context(),e.next=k,e;h.backside_widgets.some(function(h){h=h.get_widget();var a;if(h===b||h.top_contents_is&&h.top_contents_is(b))return e=
f.path.get_path_to_backside_widget_of_context(h.get_type_name()),c.add_to_backside_conditions(h),!0;if(h.get_path_to&&(a=h.get_path_to(b,c)))return e=f.path.get_path_to_backside_widget_of_context(h.get_type_name()),e.next=a,c.add_to_backside_conditions(h),!0});return e?e:f.path.get_path_to_resource(b.copy({}))}(k,c);b&&k.dereference_contents&&(f.path.path_end(b).not_to_be_dereferenced=!0);!b||"pick up"!==c.current_action_name&&"remove"!==c.current_action_name||(f.path.path_end(b).removing_widget=
!0);return b},path_end:function(f){for(;f.next;)f=f.next;return f},dereference_path:function(f,c,b,p){return f?f.dereference?f.dereference(c,b,p):c.dereference(f,b,p):c},continue_dereferencing_path:function(f,c,b,p){return f.next?c.dereference_contents&&!f.next.not_to_be_dereferenced?c.dereference_contents(f.next,b,p):c.dereference(f.next,b,p):c.dereference_contents&&!f.not_to_be_dereferenced?c.dereference_contents(f,b,p):c},toString:function(k){return k.next?(f.path.toString(k.next),f.path.toString(k.next)+
"of "+k.toString()):k.toString()},get_json:function(k,c){var b;if(!k.get_json)return k;b=k.get_json(c);k.next&&(b.next_path=f.path.get_json(k.next,c));k.removing_widget&&(b.removing_widget=!0);k.not_to_be_dereferenced&&(b.not_to_be_dereferenced=!0);return b},to_entire_context:function(){return{dereference:function(k,c,b){return f.path.continue_dereferencing_path(this,k,c,b)},toString:function(){return"what he's working on"},get_json:function(){return{type:"path.to_entire_context"}}}},get_path_to_resource:function(k,
c){k=k.get_widget();return{dereference:function(b,c,l){b=k.copy({});var h,u,e;l.add_newly_created_widget(b);l.visible()&&!k.visible()&&(h=f.UTILITIES.find_resource_equal_to_widget(k))&&(e=b.get_frontside_element(),u=$(h).position(),f.UTILITIES.set_timeout(function(){$(e).css({left:u.left,top:u.top,width:h.offsetWidth,height:h.offsetHeight})}));return b},toString:function(){return f.UTILITIES.add_a_or_an(k.toString())},get_json:function(){return{type:"path.to_resource",resource:f.path.get_json(k,f.UTILITIES.fresh_json_history())}}}},
get_path_to_backside_widget_of_context:function(k){return{dereference:function(c,b,p){var l;c.backside_widgets.some(function(b){if(b.get_widget().is_of_type(k))return l=b.get_widget(),!0});if(l)return f.path.continue_dereferencing_path(this,l,b,p)},toString:function(){return"the "+k+" on the back of what he's working on"},get_json:function(){return{type:"path.to_backside_widget_of_context",type_name:k}}}},create_from_json:function(k,c){var b=f.UTILITIES.create_from_json(k,c),p;k.next_path&&(p=f.UTILITIES.create_from_json(k.next_path,
c),k.next_path.removing_widget&&(p.removing_widget=!0),k.next_path.not_to_be_dereferenced&&(p.not_to_be_dereferenced=!0),b.next=p);k.removing_widget&&(b.removing_widget=!0);k.not_to_be_dereferenced&&(b.not_to_be_dereferenced=!0);return b},top_level_backside:{dereference:function(f,c,b){return f.ancestor_of_type("top-level")},toString:function(){return"the top-level backside"},get_json:function(){return{type:"path.top_level_backside"}}}}}(window.TOONTALK);window.TOONTALK.publish=function(f){var k=function(c,b,f){var k='<!DOCTYPE html>\n<html>\n<head>\n<link rel="stylesheet" media="all" href="https://toontalk.github.io/ToonTalk/toontalk.css">\n<link href="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/css/font-awesome.min.css" rel="stylesheet" type="text/css" />\n<link href="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/css/froala_editor.min.css" rel="stylesheet" type="text/css" />\n<script src="https://toontalk.github.io/ToonTalk/compile/toontalk.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/jquery-ui-1.11.2.custom/jquery-ui.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/froala_editor.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/block_styles.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/colors.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/font_family.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/font_size.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/lists.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/tables.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/video.min.js">\x3c/script>\n<title>\n'+
c+'</title>\n<link rel="shortcut icon" href="favicon.ico" />\n</head>\n<body>\n';b.forEach(function(b,c){k+='<div class="toontalk-edit" name="content">\n'+b+"</div>";f[c]&&(k+=f[c])});return k+='<script src="https://toontalk.github.io/ToonTalk/support/published_support.js">\x3c/script>\n</body>\n</html>\n'};return{publish_widget:function(c,b,p,l){var h=f.google_drive.get_status(),u=["Edit this. Select text for formatting.","And edit this."],e=function(b){(b=b&&b.items&&0<b.items.length&&b.items[0])?
l(b,a):(contents=k(c,u,a),f.google_drive.upload_file(q,"html",contents,l))},q,t,a;"Ready"===h?(q=b.get_setting("program_name"),p?(t=f.UTILITIES.get_json_top_level(b),b.set_setting("program_name",q+" (published version)"),a=[f.UTILITIES.toontalk_json_div(t,b)],b.set_setting("program_name",q)):(b=b.get_backside_widgets(),a=[],b.forEach(function(b,c){b.visible()&&(t=f.UTILITIES.get_json_top_level(b),a.push(f.UTILITIES.toontalk_json_div(t,b)),1<c&&(u[c]=u[1]))}),u.push(u[1])),f.google_drive.get_toontalk_files(f.google_drive.full_file_name(q,
"page"),"page",e)):(console.log("Unable to publish to Google Drive because: "+h),l(null))},republish:function(c){f.google_drive.insert_or_update_file(void 0,c.file_id,"page",k(c.title,c.editable_contents,c.widgets_json),function(){console.log("Published page '"+c.title+"' updated.")})}}}(window.TOONTALK);function handle_client_load(){window.TOONTALK.google_drive.handle_client_load()}
window.TOONTALK.google_drive=function(f){var k=f.GOOGLE_DRIVE_CLIENT_ID||"829199594800-54bk3k92fdepke86ik366cds9kmo4u0c.apps.googleusercontent.com",c=f.ORIGIN_FOR_GOOGLE_DRIVE||"http://toontalk.github.io",b="Need to authorize",p,l;return{handle_client_load:function(h){0!==window.location.href.indexOf(c)?(b="Connections to Google Drive are configured for the following domain only: "+c+". If you are hosting ToonTalk elsewhere you need to set window.TOONTALK.GOOGLE_DRIVE_CLIENT_ID and window.TOONTALK.ORIGIN_FOR_GOOGLE_DRIVE",h&&
h(b)):setTimeout(function(){f.google_drive.check_authorization(h)})},check_authorization:function(c){b="Awaiting authorization";gapi.auth.authorize({client_id:k,scope:"https://www.googleapis.com/auth/drive",immediate:!0},function(b){f.google_drive.handle_authorization_result(b,c)})},handle_authorization_result:function(c,k){c&&!c.error?(b="Authorized but not yet ready",gapi.client.load("drive","v2",function(){f.google_drive.get_folder_ids(function(){b="Ready"})}),k&&k()):(b="Need to authorize",k&&
k(b))},authorize:function(b){gapi.auth.authorize({client_id:k,scope:"https://www.googleapis.com/auth/drive",immediate:!1},function(c){f.google_drive.handle_authorization_result(c,b)})},get_folder_ids:function(b){f.google_drive.get_folder_id(!0,function(c){p=c;f.google_drive.get_folder_id(!1,function(c){l=c;b()})})},get_folder_id:function(b,c){var e=b?"ToonTalk Programs":"ToonTalk Pages",k=function(k){var a=function(a){a&&a.id?c(a.id):console.error("Failure to create folder '"+e+"'. Response was "+
a)};(k=k&&k.items&&0<k.items.length&&k.items[0].id)?c(k):b?f.google_drive.create_folder("ToonTalk Programs",!1,a):f.google_drive.create_folder("ToonTalk Pages",!0,a)};b&&p?c(p):!b&&l?c(l):f.google_drive.fetch_folder_id(e,k)},get_status:function(){return b},connection_to_google_drive_possible:function(){return 0!==b.indexOf("Connections to Google Drive are configured for the following domain only: ")},list_files:function(b,c){gapi.client.request({path:"/drive/v2/files",method:"GET",params:b}).execute(c)},
fetch_folder_id:function(b,c){f.google_drive.list_files({q:"mimeType = 'application/vnd.google-apps.folder' and title ='"+b+"' and trashed = false"},c)},get_toontalk_files:function(b,c,e){"undefined"===typeof gapi?e("Google Drive API not available."):(c="properties has {key='ToonTalkType' and value='"+c+"' and visibility='PUBLIC'} and trashed = false",b&&(c+=" and title='"+b+"'"),f.google_drive.list_files({q:c},e))},get_toontalk_program_file:function(b,c){f.google_drive.list_files({q:"'"+p+"' in parents and trashed = false and title='"+
b+"'"},function(b){b&&b.items&&0<b.items.length?c(b.items[0]):c(null)})},upload_file:function(b,c,e,k){var l="json"===c?"program":"page",a=b+"."+c;f.google_drive.get_toontalk_files(a,l,function(b){gapi.client.load("drive","v2",function(){var c=b&&b.items&&0<b.items.length&&b.items[0].id;k||(k=function(a){a.error&&(console.log("Google drive status: "+f.google_drive.get_status()),"Login Required"!==a.error.message&&console.log(a.error.message));console.log("File "+a.title+" ("+a.id+") "+(c?"updated":
"created"))});c?f.google_drive.insert_or_update_file(void 0,c,l,e,k):f.google_drive.insert_or_update_file(a,void 0,l,e,k)})})},full_file_name:function(b,c){return b+"."+("program"===c?"json":"html")},insert_or_update_file:function(b,c,e,k,t){var a={title:b,mimeType:"text/html"};a.parents=[{kind:"drive#fileLink",id:"program"===e?p:l}];k="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify(a)+"\r\n---------314159265358979323846\r\nContent-Type: text/html\r\n\r\n"+
k+"\r\n---------314159265358979323846--";b?(b="/upload/drive/v2/files",a="POST"):(b="/upload/drive/v2/files/"+c,a="PUT");gapi.client.request({path:b,method:a,params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="-------314159265358979323846"'},body:k}).execute(function(a){c||f.google_drive.insert_property(a.id,"ToonTalkType",e,"PUBLIC");t&&t(a)})},create_folder:function(b,c,e){gapi.client.drive.files.insert({resource:{title:b,mimeType:"application/vnd.google-apps.folder"}}).execute(c?
function(b){gapi.client.drive.permissions.insert({fileId:b.id,resource:{value:"",type:"anyone",role:"reader"}}).execute(function(c){e(b)})}:e)},download_file:function(b,c){if(b.downloadUrl){var e=gapi.auth.getToken().access_token,f=new XMLHttpRequest;f.open("GET",b.downloadUrl);f.setRequestHeader("Authorization","Bearer "+e);f.onload=function(){c(f.responseText)};f.onerror=function(){c(null)};f.send()}else c(null)},google_drive_url:function(b){return"https://googledrive.com/host/"+b+"/"},insert_property:function(b,
c,e,f){gapi.client.drive.properties.insert({fileId:b,resource:{key:c,value:e,visibility:f}}).execute(function(b){})}}}(window.TOONTALK);window.TOONTALK.UTILITIES=function(f){var k,c=100,b=(new Date).getTime(),p,l=function(a){var b=a.indexOf("{"),c=a.lastIndexOf("}");if(!(0>b||0>c))return a.substring(b,c+1)},h=function(a,b,c,d,e,h,k,l,p,q){var t,u,G,N,T;c.set_visible(!0);if(a.is(".toontalk-backside")){if(c.is_of_type("top-level")){t=k.semantic.backside_widgets;u=k.shared_widgets;G=a.get(0);h=c.get_backside_widgets().slice();h.forEach(function(a,b){var g=a.get_widget(),e,f,h,k,l,p,q;c.remove_backside_widget(g,a.is_backside());e=0<=
t[b].widget.shared_widget_index?u[t[b].widget.shared_widget_index].view:t[b].widget.view;a.is_backside()?(f=g.get_backside_element(!0),h=e.backside_left,k=e.backside_top,l=e.backside_width,p=e.backside_height):(f=g.get_frontside_element(!0),h=e.frontside_left,k=e.frontside_top,l=e.frontside_width,p=e.frontside_height);d.add_backside_widget(g,a.is_backside());G.appendChild(f);q=$(f).position();$(f).css({left:q.left+h,top:q.top+k,width:l,height:p});a.is_backside()&&(g.backside_geometry=e.backside_geometry,
g.apply_backside_geometry())}.bind(this));return}c?d.get_backside().widget_dropped_on_me(c,q,h):f.UTILITIES.report_internal_error("No source_widget");l||(p=l=0,setTimeout(function(){var a=c.get_HTML(),d=b.width(),e=b.height();0<=a.indexOf("data:image")?(a=Math.min(80,d)/2,d=90,90>e&&(d-=(90-e)/2)):(a=Math.min(60,d/2),d=Math.min(30,e/2));b.css({left:N-a,top:T-d})},50));N=h.pageX-(e.left+l);T=h.pageY-(e.top+p);b.css({left:N,top:T});k&&k.semantic.running&&c.set_running(!0)}else if(a.is(".toontalk-drop-area"))b.addClass("toontalk-widget-in-drop_area"),
a.append(b.get(0)),b.is(".toontalk-robot")&&a.data("drop_area_owner").set_next_robot(f.UTILITIES.widget_from_jquery(b));else{if(b.is(".toontalk-backside-of-top-level"))return;if(d)G=a.closest(".toontalk-top-level-backside").get(0),G.appendChild(b.get(0)),e=$(G).offset(),b.css({left:h.pageX-(e.left+l),top:h.pageY-(e.top+p)}),c.drop_on&&c.drop_on(d,q,h)||d.widget_dropped_on_me&&d.widget_dropped_on_me(c,q,h)||(a=a.closest(".toontalk-top-level-backside"),0<a.length&&(d=f.UTILITIES.widget_from_jquery(a))&&
d.get_backside().widget_dropped_on_me(c,q,h));else{f.UTILITIES.report_internal_error("target element has no 'owner'");return}}f.UTILITIES.remove_highlight()},u=function(a,b,c,d,e){var k=new FileReader,p=0===a.type.indexOf("image"),q,t;k.onloadend=function(){if(p)q=f.element.create("<img src='"+k.result+"' alt='"+a.name+"'/>");else{if(t=l(k.result))try{q=f.UTILITIES.create_from_json(JSON.parse(t))}catch(u){}q||(q=f.element.create(k.result))}h(b,$(q.get_frontside_element(!0)),q,c,d,e)};p?k.readAsDataURL(a):
k.readAsText(a)},e=function(){k&&(k.removeClass("toontalk-being-dragged"),k.find("*").removeClass("toontalk-ignore-events"),f.UTILITIES.set_timeout(function(){k=void 0}))},q=function(a,b){if(a===b)return!0;if(a.parentNode)return q(a.parentNode,b)},t=[];window.addEventListener("message",function(a){a.source===window&&"zero-timeout-message"===a.data?(a.stopPropagation(),0<t.length&&t.shift()()):a.data.editable_contents&&f.publish.republish(a.data)},!1);$(document).ready(function(){f.debugging=f.UTILITIES.get_current_url_boolean_parameter("debugging",
!1);f.UTILITIES.process_json_elements();$(document).click(function(a){$(".toontalk-top-level-resource-container").each(function(a,b){var c=b.toontalk_widget;c&&c.set_running&&c.set_running(!1)})});f.QUEUE=window.TOONTALK.queue.create();f.QUEUE.run();window.addEventListener("beforeunload",function(a){f.UTILITIES.backup_all_top_level_widgets(!0)});$(document).tooltip();f.TRANSLATION_ENABLED=f.UTILITIES.get_current_url_boolean_parameter("translate",!1);f.TRANSLATION_ENABLED?$("a").each(function(a,b){b.href=
f.UTILITIES.add_URL_parameter(b.href,"translate","1")}):$("#google_translate_element").remove();f.UTILITIES.add_test_all_button()});return{create_from_json:function(a,b,c){var d=function(a,b,c){b.shared_widgets[c]=a;a.finish_create_from_json_continuation&&(a.finish_create_from_json_continuation(),a.finish_create_from_json_continuation=void 0);return a},e,h,k,l;if(a){b||(b={});a.shared_widgets&&(b.json_of_shared_widgets=a.shared_widgets,b.shared_widgets=[]);a.shared_html&&(b.shared_html=a.shared_html);
if(a.widget)return e=f.UTILITIES.create_from_json(a.widget,b),a.is_backside?e.get_backside(!0):e;if(b&&b.shared_widgets&&0<=a.shared_widget_index){if(c=b.shared_widgets[a.shared_widget_index])return c;c=b.json_of_shared_widgets[a.shared_widget_index];e=f.UTILITIES.create_from_json(c,b,!0);return d(e,b,a.shared_widget_index)}(k=a.semantic)||(k=a);a=a.view;if(0<=k.shared_widget_index)return e=f.UTILITIES.create_from_json(b.json_of_shared_widgets[k.shared_widget_index],b,!0),d(e,b,k.shared_widget_index);
if(f.creators_from_json[k.type]){b||(b={});a?b.json_view=a:a=b.json_view;if((e=f.creators_from_json[k.type](k,b))&&e.get_backside){k.erased&&(f.widget.erasable(e),e.set_erased(k.erased));k.infinite_stack&&e.set_infinite_stack(k.infinite_stack);if(a&&a.frontside_width)if(h=a.backside?e.get_backside(!0).get_element():e.get_frontside_element(),l={width:a.frontside_width,height:a.frontside_height},"element"===k.type)e.on_update_display(function(){$(h).css(l)});else $(h).css(l);a&&a.saved_width&&(e.saved_width=
a.saved_width,e.saved_height=a.saved_height);a&&a.backside_geometry&&(e.backside_geometry=a.backside_geometry);k.backside_widgets&&(c?e.finish_create_from_json_continuation=function(){this.add_backside_widgets_from_json(e,k.backside_widgets,b)}.bind(this):this.add_backside_widgets_from_json(e,k.backside_widgets,b))}return e}f.UTILITIES.report_internal_error("JSON type '"+k.type+"' not supported. Perhaps a JavaScript file implementing it is missing.")}},add_backside_widgets_from_json:function(a,b,
c){var d;b&&(d=this.create_array_from_json(b,c),a.set_backside_widget_sides(d,b.map(function(a){return 0<=a.widget.shared_widget_index?c.json_of_shared_widgets[a.widget.shared_widget_index].view:a.widget.view})))},create_array_from_json:function(a,b){var c=[];a.forEach(function(a,e){c[e]=a?f.UTILITIES.create_from_json(a,b):a});return c},get_json_of_array:function(a,b){var c=[];a.forEach(function(a,e){a.is_backside&&a.is_backside()?c[e]={widget:f.UTILITIES.get_json(a.get_widget(),b),is_backside:!0}:
c[e]=a.get_type_name?{widget:f.UTILITIES.get_json(a,b)}:a.get_json(b)});return c},fresh_json_history:function(){return{widgets_encountered:[],shared_widgets:[],json_of_widgets_encountered:[]}},get_json_top_level:function(a){var b=this.fresh_json_history(),c=f.UTILITIES.get_json(a,b);0<b.shared_widgets.length&&(c.shared_widgets=b.shared_widgets.map(function(d,e){var h=function(a){a=b.widgets_encountered.indexOf(a);return b.json_of_widgets_encountered[a]},k=function(a){return h(b.shared_widgets[a])},
l=h(d);a===d?(l={semantic:l.semantic,view:l.view,version:l.version},c.semantic={shared_widget_index:e}):f.UTILITIES.tree_replace_once(c.semantic,l,{shared_widget_index:e},k);return l}));c.shared_html=b.shared_html;return c},get_json:function(a,b){var c,d;f.debugging&&!b&&f.UTILITIES.report_internal_error("no json_history");c=b.shared_widgets.indexOf(a);if(0<=c)return{shared_widget_index:c};c=b.widgets_encountered.indexOf(a);if(0<=c)return c=f.UTILITIES.insert_ancestors_last(a,b.shared_widgets),{shared_widget_index:c};
c=b.widgets_encountered.push(a)-1;d=a.get_json(b);d=a.add_to_json(d,b);b.json_of_widgets_encountered[c]=d;a.add_backside_widgets_to_json&&a.add_backside_widgets_to_json(d,b);return d},tree_replace_once:function(a,b,c,d){var e,f;for(f in a)if(a.hasOwnProperty(f)&&(e=a[f])){if(e===b)return a[f]=c,!0;if("shared_widget_index"===f){if(this.tree_replace_once(d(e),b,c,d))return!0}else if(!(0<=["string","number","function","undefined"].indexOf(typeof e))&&this.tree_replace_once(e,b,c,d))return!0}return!1},
insert_ancestors_last:function(a,b){var c=-1;b.some(function(b,g){if(a.has_ancestor(b))return c=g,!0});0>c&&(c=b.length);b.splice(c,0,a);return c},toontalk_json_div:function(a,b){var c=a.view.backside,d=b.get_backside_widgets(),e=b.get_type_name();"top-level"===e?c?(e="a work area containing ",0===d.length?e="an empty work area":(e=1===d.length?e+"one thing: ":e+(d.length+" things: "),p=d.length,d.forEach(function(a){p--;e+=f.UTILITIES.add_a_or_an(a.get_type_name());1===p?e+=", and ":1<p&&(e+=", ")}))):
e="a top-level widget":(e=f.UTILITIES.add_a_or_an(e),c&&(e="the back of "+e));return"<div class='toontalk-json'>\nThis will be replaced by "+e+".\n<div style='display:none;'>"+JSON.stringify(a,null,"  ")+"</div></div>"},copy_widgets:function(a,b){var c=[],d;for(d=0;d<a.length;d++)c[d]=a[d]&&a[d].copy(b);return c},copy_widget_sides:function(a,b){return a.map(function(a){var c=a.get_widget().copy(b);a.is_backside()&&c.get_backside();return c})},copy_array:function(a){return a.slice()},generate_unique_id:function(){b+=
1;return"toontalk_id_"+b},get_style_property:function(a,b){if(a.currentStyle)return a.currentStyle[b];if(window.getComputedStyle)return document.defaultView.getComputedStyle(a,null).getPropertyValue(b)},get_style_numeric_property:function(a,b){var c=this.get_style_property(a,b),d;return"string"===typeof c?(d=c.indexOf("px"),0<=d&&(c=c.substring(0,d)),parseInt(c,10)):c},data_transfer_json_object:function(a){var b;if(a.dataTransfer){try{b=a.dataTransfer.getData("text/html")}catch(c){b=a.dataTransfer.getData("text")}if(!b||
b.match(/[\u3400-\u9FBF]/))b=a.dataTransfer.getData("text");if(b){a=l(b);if(!a)return f.UTILITIES.get_json_top_level(f.element.create(b));try{return JSON.parse(a)}catch(d){f.UTILITIES.report_internal_error("Exception parsing "+a+"\n"+d.toString())}}}},drag_and_drop:function(a){f.UTILITIES.draggable(a);f.UTILITIES.can_receive_drops(a)},draggable:function(a){$(a).attr("draggable",!0);a.addEventListener("dragstart",function(b){var c=$(b.target).closest(".toontalk-side"),d,e,h;b.dataTransfer.getData("text")&&
0<b.dataTransfer.getData("text").length||(k=c||$(a),e=f.UTILITIES.widget_from_jquery(k),e||(e=f.UTILITIES.widget_from_jquery($element),f.UTILITIES.report_internal_error("Possible bug that "+k+" doesn't have a known owner."),k=$(a)),e.being_dragged=!0,d=k.get(0).getBoundingClientRect(),h=k.is(".toontalk-top-level-resource"),b.dataTransfer&&e.get_json&&(b.dataTransfer.effectAllowed=h?"copy":"move",c=f.UTILITIES.get_json_top_level(e),c.view.drag_x_offset=b.clientX-d.left,c.view.drag_y_offset=b.clientY-
d.top,!c.view.frontside_width&&k.parent().is(".toontalk-backside")&&(c.view.frontside_width=k.width(),c.view.frontside_height=k.height()),k.is(".toontalk-backside")&&(c.view.backside=!0),k.data("json",c),d=f.UTILITIES.toontalk_json_div(c,e),b.dataTransfer.setData("text",d),f.UTILITIES.is_internet_explorer()||b.dataTransfer.setData("text/html",d),e.drag_started(c,h)),k.addClass("toontalk-being-dragged"),b.stopPropagation())});a.addEventListener("dragend",function(a){k||(k=$(a.target).closest(".toontalk-side"));
f.UTILITIES.widget_from_jquery(k).being_dragged=void 0;if(k.is(".toontalk-frontside"))if(k.parent().is(".toontalk-backside")){var b=k.data("json");b&&(k.data("json",""),k.css({width:b.view.frontside_width,height:b.view.frontside_height}))}else k.parent().is(".toontalk-top-level-resource, .toontalk-drop-area")||k.is(".toontalk-carried-by-bird, .toontalk-element-attribute")||f.UTILITIES.has_animating_image(k.get(0))||k.css({width:"100%",height:"100%"});e();a.stopPropagation()})},can_receive_drops:function(a){a.addEventListener("dragover",
function(a){a.preventDefault();return!1});a.addEventListener("drop",function(b){var c,d,l,p,q,t,I,D,J,F,G=f.UTILITIES.data_transfer_json_object(b);b.preventDefault();$(a).find("*").removeClass("toontalk-ignore-events");c=k;e();if(c||G||b.dataTransfer.files){if($(b.target).is(".toontalk-drop-area-instructions"))l=$(b.target).parent();else if($(b.target).is(".toontalk-element-attribute-input")){if(l=$(b.target).closest(".toontalk-side"),p=f.UTILITIES.widget_from_jquery(l)){d=c?f.UTILITIES.widget_from_jquery(c):
f.UTILITIES.create_from_json(G);f.UTILITIES.restore_resource(c,d);p.dropped_on_style_attribute(d,b.target.name,b);b.stopPropagation();return}}else l=$(b.target).is(".toontalk-drop-area")?$(b.target):$(b.target).closest(".toontalk-side");if(0!==l.length&&!l.is(".toontalk-top-level-resource")){I=l.offset();f.UTILITIES.remove_highlight();p=f.UTILITIES.widget_from_jquery(l);if(c&&0<c.length&&!(p&&p.get_infinite_stack&&p.get_infinite_stack())&&(c.get(0)===l.get(0)||jQuery.contains(c.get(0),l.get(0)))){if(c.is(".toontalk-top-level-backside"))return;
l.hide();d=document.elementFromPoint(b.pageX-window.pageXOffset,b.pageY-window.pageYOffset);l.show();d&&(l=$(d).closest(".toontalk-side"),I=l.offset(),p=f.UTILITIES.widget_from_jquery(l))}G&&G.view&&G.view.drag_x_offset?(q=G.view.drag_x_offset,t=G.view.drag_y_offset):t=q=0;if(c&&0<c.length){if(!(p&&p.get_infinite_stack&&p.get_infinite_stack()||c.get(0)!==l.get(0)&&!jQuery.contains(c.get(0),l.get(0)))){c.css({left:c.get(0).offsetLeft+(b.layerX-q),top:c.get(0).offsetTop+(b.layerY-t)});b.stopPropagation();
return}D=c.is(".toontalk-backside");d=f.UTILITIES.widget_from_jquery(c);c.parent().is(".toontalk-drop-area")?(c.removeClass("toontalk-widget-in-drop_area"),c.parent().data("drop_area_owner").set_next_robot(void 0)):(J=c.parents(".toontalk-side:first"),(F=f.UTILITIES.widget_from_jquery(J))?!D&&d.get_infinite_stack&&d.get_infinite_stack()?(d=d.copy({}),J=c.width(),F=c.height(),c=$(d.get_frontside_element(!0)),l.is(".toontalk-backside")&&c.css({width:G.view.frontside_width||J,height:G.view.frontside_height||
F})):F.removed_from_container&&(J.is(".toontalk-backside")?F.remove_backside_widget(d,D,!0):(F.removed_from_container(d,D,b),d.restore_dimensions&&d.restore_dimensions())):f.UTILITIES.restore_resource(c,d),f.robot.in_training&&f.robot.in_training.add_newly_created_widget_if_new(d))}else{if(0<b.dataTransfer.files.length){for(c=0;c<b.dataTransfer.files.length;c++)u(b.dataTransfer.files[c],l,p,I,b);b.stopPropagation();return}d=f.UTILITIES.create_from_json(G,{event:b});if(!d){G?f.UTILITIES.report_internal_error("Unable to construct a ToonTalk widget from the JSON."):
f.debugging&&console.log("No data transfer in drop.");b.stopPropagation();return}(D=G.view.backside)?(c=$(d.get_backside_element()),c.css({width:G.view.backside_width,height:G.view.backside_height,"background-color":G.view.background_color,"border-width":G.view.border_width}),d.apply_backside_geometry()):c=$(d.get_frontside_element())}d!==p&&h(l,c,d,p,I,b,G,q,t,D);b.stopPropagation()}}else b.dataTransfer?f.UTILITIES.report_internal_error("Drop failed since unable to parse as JSON."):f.UTILITIES.report_internal_error("Drop failed since there is no event.dataTransfer"),
b.stopPropagation()});a.addEventListener("dragenter",function(b){var c=$(b.target).closest(".toontalk-side"),d=f.UTILITIES.get_dragee();c.is(".toontalk-top-level-backside")||c.closest(".toontalk-top-level-resource").is("*")||c.is(".toontalk-being-dragged")||d&&q(c.get(0),d.get(0))||(f.UTILITIES.highlight_element(c,b),c.is(".toontalk-backside, .toontalk-drop-area")||"box"===f.UTILITIES.widget_from_jquery($(a)).get_type_name()||c.find(".toontalk-side").addClass("toontalk-ignore-events"));b.stopPropagation()});
a.addEventListener("dragleave",function(a){a.stopPropagation()})},create_drop_area:function(a){var b=document.createElement("div"),c=$(b),d=document.createElement("div");d.innerHTML=a;$(d).addClass("toontalk-drop-area-instructions ui-widget");c.addClass("toontalk-drop-area");c.append(d);f.UTILITIES.can_receive_drops(b);return c},process_json_elements:function(){$(".toontalk-json").each(function(a,b){var c=b.textContent,d,e,h,k;if(c)if(c=c.substring(c.indexOf("{"),c.lastIndexOf("}")+1),d=JSON.parse(c),
e=f.UTILITIES.create_from_json(d)){b.textContent="";if(e.get_type_name)if(e.is_of_type("top-level")){if(!f.no_local_storage&&!f.UTILITIES.get_current_url_boolean_parameter("reset",!1)){if(d.load_most_recent_program)try{(k=window.localStorage.getItem("toontalk-last-key"))&&(h=window.localStorage.getItem(k))}catch(l){c="Error reading previous state. Error message is "+l,f.UTILITIES.is_internet_explorer()?console.error(c):f.UTILITIES.display_message()}h&&(d=JSON.parse(h),e=f.UTILITIES.create_from_json(d))}h=
e.get_backside(!0);h=h.get_element();$(b).replaceWith(h);$(h).css({width:d.view.backside_width,height:d.view.backside_height,"background-color":d.view.background_color,"border-width":d.view.border_width})}else $(b).addClass("toontalk-top-level-resource toontalk-top-level-resource-container"),h=e.get_frontside_element(),$(h).addClass("toontalk-top-level-resource").css({position:"relative"}),b.toontalk_widget=e,b.appendChild(h);else b.appendChild(e.get_element());e.set_active&&e.set_active(!1);e.set_visible&&
e.set_visible(!0);setTimeout(function(){e.update_display&&e.update_display();d.semantic.running&&e.set_running(!0)},1)}else f.UTILITIES.report_internal_error("Could not recreate a widget from this JSON: "+c)})},set_absolute_position:function(a,b){for(var c=a.parent(),d=b.left,e=b.top,f;c.is("*")&&!c.is("html");)f=c.position(),d-=f.left,e-=f.top,c=c.parent();a.css({left:d,top:e,position:"absolute"});a.is(".toontalk-side-animating")&&(a.get(0).style.left=d+"px",a.get(0).style.top=e+"px")},set_position_relative_to_top_level_backside:function(a,
b){var c=a.closest(".toontalk-top-level-backside").offset();c||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),c={left:0,top:0});var d=b.left-c.left,c=b.top-c.top;a.css({left:d,top:c,position:"absolute"});a.is(".toontalk-side-animating")&&(a.get(0).style.left=d+"px",a.get(0).style.top=c+"px")},restore_resource:function(a,b){var c,d;a.is(".toontalk-top-level-resource")&&(c=b.copy({fresh_copy:!0}),d=c.get_frontside_element(),$(d).css({width:a.width(),height:a.height()}),
a.parent().removeClass("toontalk-top-level-resource toontalk-top-level-resource-container"),a.removeClass("toontalk-top-level-resource toontalk-top-level-resource-container"),$(d).addClass("toontalk-top-level-resource toontalk-top-level-resource-container").css({position:"relative"}),a.get(0).parentElement.appendChild(d),f.DISPLAY_UPDATES.pending_update(c),b.set_active&&(b.set_active(!0),c.set_active(!1)))},find_resource_equal_to_widget:function(a){var b;$(".toontalk-top-level-resource").each(function(c,
d){var e=$(d).children(":first"),h=f.UTILITIES.widget_from_jquery(e);if(h&&(a.equals&&a.equals(h)||a.matching_resource&&a.matching_resource(h)))return b=e.get(0),!1});return b},set_position_is_absolute:function(a,b,c){b?(c=$(a).position(),b=c.left,c=c.top,$(a).css({left:b,top:c,position:"absolute"})):a.style.position="static"},cardinal:function(a){switch(a){case 0:return"first";case 1:return"second";case 2:return"third";default:return a+"th"}},on_a_nest_in_a_box:function(a){return $(a).closest(".toontalk-nest").is("*")&&
$(a).closest(".toontalk-box").is("*")},add_one_shot_event_handler:function(a,b,c,d){var e=!1,f=function(c){e=!0;d&&d();a.removeEventListener(b,f)};a.addEventListener(b,f);setTimeout(function(){e||f()},c)},animate_to_absolute_position:function(a,b,c,d,e){var h=$(a).offset(),k=$(a).position(),l=f.UTILITIES.distance(b,h);d||(d=.5);d=Math.round(l/d);$(a).addClass("toontalk-side-animating");a.style.transitionDuration=d+"ms";a.style.left=k.left+(b.left-h.left)+"px";a.style.top=k.top+(b.top-h.top)+"px";
e||f.UTILITIES.add_one_shot_event_handler(a,"transitionend",d+500,function(){$(a).removeClass("toontalk-side-animating");a.style.transitionDuration=""});f.UTILITIES.add_one_shot_event_handler(a,"transitionend",d+500,c)},distance:function(a,b){var c=a.left-b.left,d=a.top-b.top;return Math.sqrt(c*c+d*d)},highlight_element:function(a,b,c){var d;if(!$(a).is(".toontalk-highlight")&&(f.UTILITIES.remove_highlight(),d=f.UTILITIES.widget_from_jquery($(a)))){if(d.element_to_highlight&&b&&(a=d.element_to_highlight(b),
!a))return;$(a).addClass("toontalk-highlight").css({"z-index":f.UTILITIES.next_z_index()});c&&setTimeout(function(){f.UTILITIES.remove_highlight()},c)}},remove_highlight:function(){$(".toontalk-highlight").removeClass("toontalk-highlight")},cursor_of_image:function(a){var b=a.lastIndexOf(".");return 0<=b?a.substring(0,b)+".32x32"+a.substring(b):a},next_z_index:function(){c++;return c},create_button:function(a,b,c,d){a=$("<button>"+a+"</button>").button();a.addClass(b).click(d).attr("title",c);return a.get(0)},
create_close_button:function(a,b){var c=document.createElement("div"),d=document.createElement("div");$(c).addClass("toontalk-close-button");$(c).click(a);$(c).attr("title",b);d.innerHTML="&times;";c.appendChild(d);return c},check_radio_button:function(a){$(a.button).prop("checked",!0);$(a.label).addClass("ui-state-active")},create_button_set:function(){var a=document.createElement("div"),b,c;for(b=0;b<arguments.length;b++)if(0<=arguments[b].length)for(c=0;c<arguments[b].length;c++)a.appendChild(arguments[b][c]);
else a.appendChild(arguments[b]);$(a).buttonset();return a},create_text_element:function(a){var b=document.createElement("div");b.textContent=a;$(b).addClass("ui-widget");return b},create_space:function(){var a=document.createElement("span");a.innerHTML="&nbsp;";$(a).addClass("ui-widget");return a},create_anchor_element:function(a,b){var c=document.createElement("a");c.innerHTML=a;f.TRANSLATION_ENABLED&&(b=f.UTILITIES.add_URL_parameter(b,"translate","1"));c.href=b;c.target="_blank";return c},create_text_input:function(a,
b,c,d,e){var h=document.createElement("input"),k;h.type="text";h.className=b;h.value=a;h.title=d;c?(a=document.createElement("label"),a.innerHTML=c,h.id=f.UTILITIES.generate_unique_id(),a.htmlFor=h.id,e&&(k=f.UTILITIES.create_anchor_element("i",e),$(k).addClass("toontalk-help-button notranslate"),k.translate=!1),c=f.UTILITIES.create_horizontal_table(a,h,k),$(a).addClass("ui-widget")):c=h;$(h).button().addClass("toontalk-text-input");$(h).css({"background-color":"white"});return{container:c,button:h}},
create_text_area:function(a,b,c,d){var e=document.createElement("textarea");e.className=b;e.value=a;e.title=d;a=document.createElement("label");a.innerHTML=c;e.id=f.UTILITIES.generate_unique_id();a.htmlFor=e.id;c=f.UTILITIES.create_horizontal_table(a,e);$(e).button().addClass("toontalk-text-text_area");$(e).css({background:"white"});$(a).addClass("ui-widget");return{container:c,button:e}},create_radio_button:function(a,b,c,d,e){var h=document.createElement("div"),k=document.createElement("input"),
l=document.createElement("label");k.type="radio";k.className=c;k.name=a;k.value=b;l.innerHTML=d;k.id=f.UTILITIES.generate_unique_id();l.htmlFor=k.id;h.appendChild(k);h.appendChild(l);h.title=e;$(k).button();return{container:h,button:k,label:l}},create_check_box:function(a,b,c,d){var e=document.createElement("div"),h=document.createElement("input"),k=document.createElement("label");h.type="checkbox";h.className=b;h.checked=a;k.innerHTML=c;h.id=f.UTILITIES.generate_unique_id();k.htmlFor=h.id;$(k).addClass("ui-widget");
e.appendChild(h);e.appendChild(k);e.title=d;return{container:e,button:h,label:k}},create_horizontal_table:function(){var a=document.createElement("table"),b,c,d;c=document.createElement("tr");a.appendChild(c);for(b=0;b<arguments.length;b++)arguments[b]&&(d=document.createElement("td"),c.appendChild(d),d.appendChild(arguments[b]));return a},create_vertical_table:function(){var a=document.createElement("table"),b,c;for(b=0;b<arguments.length;b++)arguments[b]&&(c=f.UTILITIES.create_row(arguments[b]),
a.appendChild(c));return a},create_row:function(){var a=document.createElement("tr"),b=document.createElement("td"),c;for(c=0;c<arguments.length;c++)a.appendChild(arguments[c]);b.appendChild(a);return a},create_table_entry:function(a){var b=document.createElement("td");b.appendChild(a);return b},selected_radio_button:function(){var a;for(a=0;a<arguments.length;a++)if(arguments[a].checked)return arguments[a]},create_image:function(a,b){var c=document.createElement("img"),d;c.src=a;b&&$(c).addClass(b);
0===a.indexOf("images/")&&(d=function(b){c.removeEventListener("error",d);c.src="http://toontalk.github.io/ToonTalk/"+a},c.addEventListener("error",d));return c},create_tabs:function(a,b){var c=document.createElement("div"),d=document.createElement("ul"),e;if(a.length!==b.length)return console.error("UTILITIES.create_tabs called with different length lists."),c;a.forEach(function(a,c){var f=document.createElement("li"),h=document.createElement("a"),k;"string"===typeof a?(k=document.createElement("span"),
k.innerHTML=a):k=a;e="tab-"+c;h.href="#"+e;h.appendChild(k);f.appendChild(h);d.appendChild(f);b[c].id=e});c.appendChild(d);b.forEach(function(a){c.appendChild(a)});$(c).tabs();return c},create_file_data_table:function(a,b,c){var d=document.createElement("table");$(d).DataTable({data:a,columns:[{data:"title",title:"Name",render:function(a,d,e,h){a=b?a.substring(0,a.length-5):a;d=b?f.google_drive.google_drive_url(e.id):"Click to load this program.";return c?"<div class='"+c+"' title='"+d+"'id='"+e.id+
"'>"+a+"</div>":"<a href='"+d+"'target='_blank' title='Click to open published page.'>"+a+"</a>"}},{data:"modifiedDate",title:"Modified",render:function(a,b,c,d){return(new Date(a)).toUTCString()}},{data:"createdDate",title:"Created",render:function(a,b,c,d){return(new Date(a)).toUTCString()}},{data:"fileSize",title:"Size"}]});$(d).addClass("toontalk-file-table");return d},create_local_files_table:function(a){a=f.UTILITIES.get_all_locally_stored_program_names().map(function(a){var b=f.UTILITIES.get_local_storage_meta_data(a);
if(b)return{title:a,modifiedDate:b.last_modified,createdDate:b.created,fileSize:b.file_size}});return f.UTILITIES.create_file_data_table(a,!1,"toontalk-file-load-button")},get_dragee:function(){return k},add_URL_parameter:function(a,b,c){a=f.UTILITIES.remove_URL_parameter(a,b);var d;d=0<=a.indexOf("?")?"&":"?";return a+d+b+"="+c},remove_URL_parameter:function(a,b){var c=a.indexOf("&"+b+"="),d;0>c&&(c=a.indexOf("?"+b+"="));if(0>c)return a;d=a.indexOf("&",c+1);0>d&&(d=a.length);a=a.substring(0,c)+a.substring(d);
"?"===a[a.length-1]&&(a=substring(0,a.length-1));return a},add_a_or_an:function(a,b){var c=a.charAt(0);return 0===a.indexOf("the ")?a:0>"aeiou".indexOf(c)?b?"A "+a:"a "+a:b?"An "+a:"an "+a},maximum_string_length:function(a,b){var c;if(a.length<=b)return a;c=a.substring(0,Math.round(.75*b));return c+" ... "+a.substring(a.length-(b-c.length))},backup_all_top_level_widgets:function(a){$(".toontalk-top-level-backside").each(function(b,c){f.UTILITIES.widget_from_jquery($(c)).save(a)})},make_resizable:function(a,
b){a.resizable({resize:function(c,d){a.find("img").css({width:d.size.width,height:d.size.height});b.render()},handles:"n,e,s,w"})},match:function(a,b){var c=a.match(b);return c.is_widget&&b.matched_by?b.matched_by(a):c},current_URL:function(){return window.location.pathname},absolute_file_path:function(a){var b=window.location.pathname,c=b.lastIndexOf("ToonTalk/");return 0>c?a:b.substring(0,c+9)+a},copy_side:function(a,b,c){b=a.get_widget().copy(b);var d;c&&(c=a.get_widget().get_frontside_element())&&
(d=b.get_frontside_element(!0),$(d).css({width:$(c).width(),height:$(c).height()}));return a.is_backside()?b.get_backside():b},scale_to_fit:function(a,b,c,d,e){var f=function(){$(a).css({transform:"scale("+k+", "+l+")","transform-origin":"top left",width:c,height:d})},h,k,l;c||(c=$(a).width());d||(d=$(a).height());$(b).is(".toontalk-backside")?l=k=1:(h=$(b).width(),b=$(b).height(),k=h/c,l=b/d,0===k&&(k=1),0===l&&(l=1));e?setTimeout(f,e):f();return{x_scale:k,y_scale:l}},relative_position:function(a,
b){var c=$(a).offset(),d;b&&(d=$(b).offset(),c.left-=d.left,c.top-=d.top);return c},add_animation_class:function(a,b){$(a).css({width:"",height:""}).addClass(b)},widget_from_jquery:function(a){if(0<a.length)return a.get(0).toontalk_widget},has_animating_image:function(a){a=$(a);return(a=a.css("animation")||a.css("webkit-animation")||a.css("moz-animation")||a.css("ms-animation")||a.css("o-animation"))&&0!==a.indexOf("none")},display_message:function(a){console.error(a);alert(a)},report_internal_error:function(a){console.log(a);
f.debugging&&f.UTILITIES.display_message(a)},get_current_url_boolean_parameter:function(a,b){return 0>window.location.href.indexOf(a+"=")?b:0<=window.location.href.indexOf(a+"=1")?!0:!1},is_browser_of_type:function(a){return 0<=window.navigator.userAgent.indexOf(a)},is_internet_explorer:function(){return f.UTILITIES.is_browser_of_type("MSIE")||f.UTILITIES.is_browser_of_type("Trident")},remove_z_index:function(a){if(0===a.length||"<"!==a.charAt(0)||0>a.indexOf("z-index"))return a;a=$(a);a.attr("z-index",
"");return a.html()},add_test_all_button:function(){var a=$("#toontalk-test-all-button"),b;if(0!==a.length){a.button();b=a.get(0);b.innerHTML="Run all tests";var c=!1;a.click(function(a){c?($(".toontalk-stop-sign").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&$(this).click()}),b.innerHTML="Run all tests"):($(".toontalk-green-flag").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&$(this).click()}),b.innerHTML="Stop all tests");c=!c})}},set_timeout:function(a,
b){b?setTimeout(a,b):(t.push(a),window.postMessage("zero-timeout-message","*"))},get_all_locally_stored_program_names:function(){var a=window.localStorage.getItem("toontalk-all-program-names");return a?JSON.parse(a):[]},set_all_locally_stored_program_names:function(a){window.localStorage.setItem("toontalk-all-program-names",JSON.stringify(a))},get_local_storage_meta_data:function(a){a=f.UTILITIES.local_storage_program_meta_data_key(a);var b;try{if(b=window.localStorage.getItem(a))return JSON.parse(b)}catch(c){}},
local_storage_program_key:function(a){return"toontalk-json: "+a},local_storage_program_meta_data_key:function(a){return"toontalk-meta-data: "+a},enable_editor:function(a,b,c,d){(function(a,b){var c=function(a){a.data.editor_enabled_for&&a.data.editor_enabled_for===b&&(e=!0,window.removeEventListener("message",c))},d=function(a,b){e||setTimeout(function(){a();d(a,b)},500)},e=!1;window.addEventListener("message",c);d(a,b)})(function(){a.postMessage({save_edits_to:window.location.href,file_id:c,widgets_json:d},
"*")},c)},create_queue:function(){var a=[],b=0;return{getLength:function(){return a.length-b},isEmpty:function(){return 0==a.length},enqueue:function(b){a.push(b)},dequeue:function(){var c;if(0!=a.length)return c=a[b],2*++b>=a.length&&(a=a.slice(b),b=0),c},peek:function(){return 0<a.length?a[b]:void 0},does_any_item_satisfy:function(c){var d;for(d=b;d<a.length;d++)if(c(a[d]))return!0;return!1}}}}}(window.TOONTALK);window.TOONTALK.UTILITIES.available_types="number box element robot nest sensor top-level".split(" ");
