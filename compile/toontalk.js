'use strict';(function(c){var m;"undefined"===typeof exports?"function"===typeof define&&"object"===typeof define.amd&&define.amd?(m={},define(function(){return m})):m="undefined"!==typeof window?window:c:m=exports;(function(c){var f={greatest_common_divisor:function(a,b){if(1===b||1===a)return 1;for(var d;0!==b;){d=b;b=a%b;if(!isFinite(b))return 0;a=d}return a}};f.gcd=f.greatest_common_divisor;f.fromRandom=function(a){return Math.random()*(1<<a)>>>0};f.fromMillitime=function(){return+new Date};f.fromUnixtime=
function(){return.001*f.fromMillitime()|0};"undefined"!==typeof c&&(c.integer=f);(function(a){function b(a,h,e){if(e!==d)return a instanceof b?a:"undefined"===typeof a?c:b.parse(a);for(a=a||[];a.length&&!a[a.length-1];)--a.length;this._d=a;this._s=a.length?h||1:0}var d={};b._construct=function(a,h){return new b(a,h,d)};b.base=1E7;b.base_log10=7;var c=new b([],0,d);b.ZERO=c;var e=new b([1],1,d);b.ONE=e;var f=new b(e._d,-1,d);b.M_ONE=f;b._0=c;b._1=e;b.small=[c,e,new b([2],1,d),new b([3],1,d),new b([4],
1,d),new b([5],1,d),new b([6],1,d),new b([7],1,d),new b([8],1,d),new b([9],1,d),new b([10],1,d),new b([11],1,d),new b([12],1,d),new b([13],1,d),new b([14],1,d),new b([15],1,d),new b([16],1,d),new b([17],1,d),new b([18],1,d),new b([19],1,d),new b([20],1,d),new b([21],1,d),new b([22],1,d),new b([23],1,d),new b([24],1,d),new b([25],1,d),new b([26],1,d),new b([27],1,d),new b([28],1,d),new b([29],1,d),new b([30],1,d),new b([31],1,d),new b([32],1,d),new b([33],1,d),new b([34],1,d),new b([35],1,d),new b([36],
1,d)];b.digits="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");b.prototype.toString=function(a){a=+a||10;if(2>a||36<a)throw Error("illegal radix "+a+".");if(0===this._s)return"0";if(10===a){a=0>this._s?"-":"";a+=this._d[this._d.length-1].toString();for(var h=this._d.length-2;0<=h;h--){for(var d=this._d[h].toString();7>d.length;)d="0"+d;a+=d}return a}h=b.digits;a=b.small[a];for(var d=this._s,c=this.abs(),e=[],f;0!==c._s;)f=c.divRem(a),c=f[0],f=f[1],e.push(h[f.valueOf()]);return(0>d?"-":"")+e.reverse().join("")};
b.radixRegex=[/^$/,/^$/,/^[01]*$/,/^[012]*$/,/^[0-3]*$/,/^[0-4]*$/,/^[0-5]*$/,/^[0-6]*$/,/^[0-7]*$/,/^[0-8]*$/,/^[0-9]*$/,/^[0-9aA]*$/,/^[0-9abAB]*$/,/^[0-9abcABC]*$/,/^[0-9a-dA-D]*$/,/^[0-9a-eA-E]*$/,/^[0-9a-fA-F]*$/,/^[0-9a-gA-G]*$/,/^[0-9a-hA-H]*$/,/^[0-9a-iA-I]*$/,/^[0-9a-jA-J]*$/,/^[0-9a-kA-K]*$/,/^[0-9a-lA-L]*$/,/^[0-9a-mA-M]*$/,/^[0-9a-nA-N]*$/,/^[0-9a-oA-O]*$/,/^[0-9a-pA-P]*$/,/^[0-9a-qA-Q]*$/,/^[0-9a-rA-R]*$/,/^[0-9a-sA-S]*$/,/^[0-9a-tA-T]*$/,/^[0-9a-uA-U]*$/,/^[0-9a-vA-V]*$/,/^[0-9a-wA-W]*$/,
/^[0-9a-xA-X]*$/,/^[0-9a-yA-Y]*$/,/^[0-9a-zA-Z]*$/];b.parse=function(a,h){function e(a){a=a.replace(/\s*[*xX]\s*10\s*(\^|\*\*)\s*/,"e");return a.replace(/^([+\-])?(\d+)\.?(\d*)[eE]([+\-]?\d+)$/,function(a,h,b,d,s){s=+s;var c=0>s,e=b.length+s;a=(c?b:d).length;s=(s=Math.abs(s))>=a?s-a+c:0;a=Array(s+1).join("0");b+=d;return(h||"")+(c?b=a+b:b+=a).substr(0,e+=c?a.length:0)+(e<b.length?"."+b.substr(e):"")})}a=a.toString();if("undefined"===typeof h||10===+h)a=e(a);var f=RegExp("^([+\\-]?)("+("undefined"===
typeof h?"0[xcb]":16==h?"0x":8==h?"0c":2==h?"0b":"")+")?([0-9a-z]*)(?:\\.\\d*)?$","i").exec(a);if(f){var g=f[1]||"+",k=f[2]||"",f=f[3]||"";if("undefined"===typeof h)h="0x"===k||"0X"===k?16:"0c"===k||"0C"===k?8:"0b"===k||"0B"===k?2:10;else if(2>h||36<h)throw Error("Illegal radix "+h+".");h=+h;if(!b.radixRegex[h].test(f))throw Error("Bad digit for radix "+h);f=f.replace(/^0+/,"").split("");if(0===f.length)return c;g="-"===g?-1:1;if(10==h){for(k=[];7<=f.length;)k.push(parseInt(f.splice(f.length-b.base_log10,
b.base_log10).join(""),10));k.push(parseInt(f.join(""),10));return new b(k,g,d)}k=c;h=b.small[h];for(var l=b.small,n=0;n<f.length;n++)k=k.multiply(h).add(l[parseInt(f[n],36)]);return new b(k._d,g,d)}throw Error("Invalid BigInteger format: "+a);};b.prototype.add=function(a){if(0===this._s)return b(a);a=b(a);if(0===a._s)return this;if(this._s!==a._s)return a=a.negate(),this.subtract(a);var h=this._d;a=a._d;for(var c=h.length,e=a.length,f=Array(Math.max(c,e)+1),g=Math.min(c,e),k=0,l=0;l<g;l++)k=h[l]+
a[l]+k,f[l]=k%1E7,k=k/1E7|0;e>c&&(h=a,c=e);for(l=g;k&&l<c;l++)k=h[l]+k,f[l]=k%1E7,k=k/1E7|0;for(k&&(f[l]=k);l<c;l++)f[l]=h[l];return new b(f,this._s,d)};b.prototype.negate=function(){return new b(this._d,-this._s|0,d)};b.prototype.abs=function(){return 0>this._s?this.negate():this};b.prototype.subtract=function(a){if(0===this._s)return b(a).negate();a=b(a);if(0===a._s)return this;if(this._s!==a._s)return a=a.negate(),this.add(a);var h=this;0>this._s&&(h=new b(a._d,1,d),a=new b(this._d,1,d));var e=
h.compareAbs(a);if(0===e)return c;if(0>e){var f=a;a=h;h=f}h=h._d;a=a._d;var f=h.length,g=a.length,k=Array(f),l=0,n,y;for(n=0;n<g;n++)y=h[n]-l-a[n],0>y?(y+=1E7,l=1):l=0,k[n]=y;for(n=g;n<f;n++){y=h[n]-l;if(0>y)y+=1E7;else{k[n++]=y;break}k[n]=y}for(;n<f;n++)k[n]=h[n];return new b(k,e,d)};(function(){function a(h,c){for(var e=h._d,f=e.slice(),g=0;;){var k=(e[g]||0)+1;f[g]=k%1E7;if(9999999>=k)break;++g}return new b(f,c,d)}function h(a,c){for(var e=a._d,f=e.slice(),g=0;;){var k=(e[g]||0)-1;if(0>k)f[g]=
k+1E7;else{f[g]=k;break}++g}return new b(f,c,d)}b.prototype.next=function(){switch(this._s){case 0:return e;case -1:return h(this,-1);default:return a(this,1)}};b.prototype.prev=function(){switch(this._s){case 0:return f;case -1:return a(this,-1);default:return h(this,1)}}})();b.prototype.compareAbs=function(a){if(this===a)return 0;if(!(a instanceof b)){if(!isFinite(a))return isNaN(a)?a:-1;a=b(a)}if(0===this._s)return 0!==a._s?-1:0;if(0===a._s)return 1;var h=this._d.length,d=a._d.length;if(h<d)return-1;
if(h>d)return 1;d=this._d;a=a._d;for(h-=1;0<=h;h--)if(d[h]!==a[h])return d[h]<a[h]?-1:1;return 0};b.prototype.compare=function(a){if(this===a)return 0;a=b(a);return 0===this._s?-a._s:this._s===a._s?this.compareAbs(a)*this._s:this._s};b.prototype.isUnit=function(){return this===e||this===f||1===this._d.length&&1===this._d[0]};b.prototype.multiply=function(a){if(0===this._s)return c;a=b(a);if(0===a._s)return c;if(this.isUnit())return 0>this._s?a.negate():a;if(a.isUnit())return 0>a._s?this.negate():
this;if(this===a)return this.square();var h=this._d.length>=a._d.length,e=(h?this:a)._d,h=(h?a:this)._d,f=e.length,g=h.length,k=f+g,l=Array(k),n;for(n=0;n<k;n++)l[n]=0;for(n=0;n<g;n++){for(var k=0,y=h[n],q=f+n,m,r=n;r<q;r++)m=l[r]+y*e[r-n]+k,k=m/1E7|0,l[r]=m%1E7|0;k&&(m=l[r]+k,l[r]=m%1E7)}return new b(l,this._s*a._s,d)};b.prototype.multiplySingleDigit=function(a){if(0===a||0===this._s)return c;if(1===a)return this;var h;if(1===this._d.length)return h=this._d[0]*a,1E7<=h?new b([h%1E7|0,h/1E7|0],1,
d):new b([h],1,d);if(2===a)return this.add(this);if(this.isUnit())return new b([a],1,d);var e=this._d,f=e.length;h=f+1;for(var g=Array(h),k=0;k<h;k++)g[k]=0;for(var l=k=0;l<f;l++)h=a*e[l]+k,k=h/1E7|0,g[l]=h%1E7|0;k&&(g[l]=k);return new b(g,1,d)};b.prototype.square=function(){if(0===this._s)return c;if(this.isUnit())return e;var a=this._d,h=a.length,f=Array(h+h+1),g,k,l,n;for(n=0;n<h;n++)l=2*n,g=a[n]*a[n],k=g/1E7|0,f[l]=g%1E7,f[l+1]=k;for(n=0;n<h;n++){k=0;l=2*n+1;for(var q=n+1;q<h;q++,l++)g=a[q]*a[n]*
2+f[l]+k,k=g/1E7|0,f[l]=g%1E7;l=h+n;g=k+f[l];k=g/1E7|0;f[l]=g%1E7;f[l+1]+=k}return new b(f,1,d)};b.prototype.quotient=function(a){return this.divRem(a)[0]};b.prototype.divide=b.prototype.quotient;b.prototype.remainder=function(a){return this.divRem(a)[1]};b.prototype.divRem=function(a){a=b(a);if(0===a._s)throw Error("Divide by zero");if(0===this._s)return[c,c];if(1===a._d.length)return this.divRemSmall(a._s*a._d[0]);switch(this.compareAbs(a)){case 0:return[this._s===a._s?e:f,c];case -1:return[c,this]}var h=
this._s*a._s,g=a.abs(),k=this._d,l=k.length,n=[],q,m=new b([],0,d);for(m._s=1;l;)if(m._d.unshift(k[--l]),0>m.compareAbs(a))n.push(0);else{if(0===m._s)q=0;else{var r=m._d.length;q=g._d.length;r=1E7*m._d[r-1]+m._d[r-2];q=1E7*g._d[q-1]+g._d[q-2];m._d.length>g._d.length&&(r=1E7*(r+1));q=Math.ceil(r/q)}do{r=g.multiplySingleDigit(q);if(0>=r.compareAbs(m))break;q--}while(q);n.push(q);q&&(q=m.subtract(r),m._d=q._d.slice(),0===m._d.length&&(m._s=0))}return[new b(n.reverse(),h,d),new b(m._d,this._s,d)]};b.prototype.divRemSmall=
function(a){a=+a;if(0===a)throw Error("Divide by zero");var h=this._s*(0>a?-1:1);a=Math.abs(a);if(1>a||1E7<=a)throw Error("Argument out of range");if(0===this._s)return[c,c];if(1===a||-1===a)return[1===h?this.abs():new b(this._d,h,d),c];if(1===this._d.length){var e=new b([this._d[0]/a|0],1,d);a=new b([this._d[0]%a|0],1,d);0>h&&(e=e.negate());0>this._s&&(a=a.negate());return[e,a]}for(var f=this._d.slice(),e=Array(f.length),g=0,k=0,l=0,n;f.length;)g=1E7*g+f[f.length-1],g<a?(e[l++]=0,f.pop(),k=1E7*k+
g):(n=0===g?0:g/a|0,k=g-a*n,(e[l++]=n)?(f.pop(),g=k):f.pop());a=new b([k],1,d);0>this._s&&(a=a.negate());return[new b(e.reverse(),h,d),a]};b.prototype.isEven=function(){var a=this._d;return 0===this._s||0===a.length||0===a[0]%2};b.prototype.isOdd=function(){return!this.isEven()};b.prototype.sign=function(){return this._s};b.prototype.isPositive=function(){return 0<this._s};b.prototype.isNegative=function(){return 0>this._s};b.prototype.isZero=function(){return 0===this._s};b.prototype.exp10=function(a){a=
+a;if(0===a)return this;if(Math.abs(a)>Number(g))throw Error("exponent too large in BigInteger.exp10");if(0<a){for(var h=new b(this._d.slice(),this._s,d);7<=a;a-=7)h._d.unshift(0);if(0==a)return h;h._s=1;h=h.multiplySingleDigit(Math.pow(10,a));return 0>this._s?h.negate():h}if(-a>=7*this._d.length)return c;h=new b(this._d.slice(),this._s,d);for(a=-a;7<=a;a-=7)h._d.shift();return 0==a?h:h.divRemSmall(Math.pow(10,a))[0]};b.prototype.pow=function(a){if(this.isUnit())return 0<this._s?this:b(a).isOdd()?
this:this.negate();a=b(a);if(0===a._s)return e;if(0>a._s){if(0===this._s)throw Error("Divide by zero");return c}if(0===this._s)return c;if(a.isUnit())return this;if(0<a.compareAbs(g))throw Error("exponent too large in BigInteger.pow");for(var h=this,d=e,f=b.small[2];a.isPositive()&&(!a.isOdd()||(d=d.multiply(h),!a.isUnit()));)h=h.square(),a=a.quotient(f);return d};b.prototype.modPow=function(a,h){for(var d=e,c=this;a.isPositive();)a.isOdd()&&(d=d.multiply(c).remainder(h)),a=a.quotient(b.small[2]),
a.isPositive()&&(c=c.square().remainder(h));return d};b.prototype.log=function(){switch(this._s){case 0:return-Infinity;case -1:return NaN}var a=this._d.length;if(30>7*a)return Math.log(this.valueOf());var h=Math.ceil(30/7),c=this._d.slice(a-h);return Math.log((new b(c,1,d)).valueOf())+(a-h)*Math.log(1E7)};b.prototype.valueOf=function(){return parseInt(this.toString(),10)};b.prototype.toJSValue=function(){return parseInt(this.toString(),10)};var g=b(2147483647);b.MAX_EXP=g;(function(){function a(h){return function(a){return h.call(b(a))}}
function h(a){return function(h,d){return a.call(b(h),b(d))}}function d(a){return function(h,d,c){return a.call(b(h),b(d),b(c))}}(function(){var c,e,f="toJSValue isEven isOdd sign isZero isNegative abs isUnit square negate isPositive toString next prev log".split(" "),g="compare remainder divRem subtract add quotient divide multiply pow compareAbs".split(" "),v=["modPow"];for(c=0;c<f.length;c++)e=f[c],b[e]=a(b.prototype[e]);for(c=0;c<g.length;c++)e=g[c],b[e]=h(b.prototype[e]);for(c=0;c<v.length;c++)e=
v[c],b[e]=d(b.prototype[e]);b.exp10=function(a,h){return b(a).exp10(h)}})()})();a.BigInteger=b})("undefined"!==typeof c?c:this);var q={greatest_common_divisor:function(a,b){if(b.isUnit()||a.isUnit())return BigInteger.ONE;for(var d;!b.isZero();)d=b,b=a.remainder(b),a=d;return a},create:function(){return[0]},clone:function(a){for(var b=[],d=0,c=a.length;d<c;d++)b[d]=a[d];return b},copy:function(a,b){a=[];for(var d=0,c=b.length;d<c;d++)a[d]=b[d];return a},abs:function(a,b){a[0]=Math.abs(b[0]);return a},
str:function(a){return a[0].toString()},toInteger:function(a){return out[0]},fromInteger:function(a){return[parseInt(a)]}};q.ZERO=q.fromInteger(0);q.ONE=q.fromInteger(1);"undefined"!==typeof c&&(c.bigint=q);if(!n)var n=Array;if(!l)var l=Math.pow(2,56);if(!m)var m=16777216;var k={EPSILON:2E-16};k.MAX_LOOPS=m;k.create=function(){var a=new n(2);a[0]=0;a[1]=1;return a};k.clone=function(a){var b=new n(2);b[0]=a[0];b[1]=a[1];return b};k.fromValues=function(a,b){var d=new n(2);d[0]=a;d[1]=b;return k.normalize(d,
d)};k.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};k.set=function(a,b,d){a[0]=b;a[1]=d;return k.normalize(a,a)};k.abs=function(a,b){a[0]=Math.abs(b[0]);a[1]=b[1];return a};k.invert=function(a,b){var d=b[0];a[0]=b[1];a[1]=d;return a};k.reciprocal=k.invert;k.add=function(a,b,d){b[1]===d[1]?(a[0]=b[0]+d[0],a[1]=b[1]):(a[0]=b[0]*d[1]+d[0]*b[1],a[1]=b[1]*d[1]);return k.normalize(a,a)};k.subtract=function(a,b,d){b[1]===d[1]?(a[0]=b[0]-d[0],a[1]=b[1]):(a[0]=b[0]*d[1]-d[0]*b[1],a[1]=b[1]*d[1]);return k.normalize(a,
a)};k.sub=k.subtract;k.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];return k.normalize(a,a)};k.mul=k.multiply;k.mediant=function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];return k.normalize(a,a)};k.divide=function(a,b,d){a[0]=b[0]*d[1];a[1]=b[1]*d[0];return k.normalize(a,a)};k.div=k.divide;k.equals=function(a,b){return 0===a[0]&&0===b[0]||0===a[1]&&0===b[1]?!0:a[0]===b[0]&&a[1]===b[1]};k.approximates=function(a,b){if(k.equals(a,b))return!0;var d=k.create();k.sub(d,a,b);k.abs(d,d);return k.isLessThan(d,
k.INFINITESIMAL)};k.isGreaterThan=function(a,b){return k.equals(a,b)?!1:a[0]*b[1]>b[0]*a[1]};k.isLessThan=function(a,b){return k.equals(a,b)?!1:a[0]*b[1]<b[0]*a[1]};k.isNegative=function(a){return 0>a[0]};k.min=function(a,b,d){k.isLessThan(b,d)?(a[0]=b[0],a[1]=b[1]):(a[0]=d[0],a[1]=d[1]);return a};k.max=function(a,b,d){k.isGreaterThan(b,d)?(a[0]=b[0],a[1]=b[1]):(a[0]=d[0],a[1]=d[1]);return a};k.scalar_multiply=function(a,b,d){a[0]=b[0]*d;a[1]=b[1];return k.normalize(a,a)};k.scalar_divide=function(a,
b,d){a[0]=b[0];a[1]=b[1]*d;return k.normalize(a,a)};k.normalize=function(a,b){if(isNaN(b[0])||isNaN(b[1])||0===b[0]&&0===b[1])return a[0]=0,a[1]=0,a;if(0===b[0])return a[0]=0,a[1]=1,a;if(0===b[1])return a[0]=1,a[1]=0,a;if(b[0]===b[1])return a[0]=1,a[1]=1,a;0<b[1]?(a[0]=b[0],a[1]=b[1]):(a[0]=-b[0],a[1]=-b[1]);var d=f.greatest_common_divisor(Math.abs(a[0]),a[1]);1<d&&(a[0]/=d,a[1]/=d);return a};k.opposite=function(a,b){a[0]=-b[0];a[1]=b[1];return a};k.negative=k.opposite;k.neg=k.opposite;k.power=function(a,
b,d){2===d?(a[0]=b[0]*b[0],a[1]=b[1]*b[1]):0<d?(a[0]=Math.pow(b[0],d),a[1]=Math.pow(b[1],d)):0>d?(d=Math.abs(d),a[0]=Math.pow(b[1],d),a[1]=Math.pow(b[0],d)):k.copy(a,k.ONE);return k.normalize(a,a)};k.pow=k.power;k.sqrt=function(a,b){return k.nthRoot(a,b,2)};k.nthRoot=function(a,b,d){if(k.equals(b,k.ZERO))return k.copy(a,k.ZERO);if(k.equals(b,k.ONE))return k.copy(a,k.ONE);if(k.equals(b,k.INFINITY))return k.copy(a,k.INFINITY);if(k.equals(b,k.INFINULL))return k.copy(a,k.INFINULL);var c=k.isNegative(b);
c&&(b[0]=-b[0]);a=k.copy(a,k.ONE);for(var e=[1,0,0,1],f=k.clone(k.ONE),g=k.MAX_LOOPS;!k.approximates(b,f)&&g--;)k.isLessThan(b,f)?(e[0]+=e[1],e[2]+=e[3]):(e[1]+=e[0],e[3]+=e[2]),a[0]=e[0]+e[1],a[1]=e[2]+e[3],k.pow(f,a,d);c&&(b[0]=-b[0],1===d%2&&k.neg(a,a));return a};k.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};k.str=function(a){return 1===a[1]?a[0].toString():a[0]+"/"+a[1]};k.toDecimal=function(a){return a[0]/a[1]};k.dec=k.toDecimal;k.toInteger=function(a){return Math.round(k.toDecimal(a))};k.round=
k.toInteger;k.floor=function(a){return Math.floor(k.toDecimal(a))};k.ceil=function(a){return Math.ceil(k.toDecimal(a))};k.fromInteger_copy=function(a,b){a[0]=parseInt(b);a[1]=1;return a};k.fromInteger=function(a){return k.fromInteger_copy(k.create(),a)};k.fromIntegerInverse_copy=function(a,b){a[0]=1;a[1]=parseInt(b);0>a[1]&&(a[0]=-a[0],a[1]=-a[1]);return a};k.fromIntegerInverse=function(a){return k.fromIntegerInverse_copy(k.create(),a)};k.fromDecimal=function(a){return k.fromDecimal_copy(k.create(),
a)};k.fromDecimal_copy=function(a,b){b=parseFloat(b);if(isNaN(b))return k.copy(a,k.INFINULL);if(Infinity===b)return k.copy(a,k.INFINITY);if(Math.abs(b)<k.EPSILON)return k.copy(a,k.ZERO);if(Math.abs(b-1)<k.EPSILON)return k.copy(a,k.ONE);if(Math.abs(b%1)<k.EPSILON)return k.fromInteger_copy(a,b);if(Math.abs(1/b%1)<k.EPSILON)return k.fromIntegerInverse_copy(a,Math.round(1/b));k.copy(a,k.ONE);for(var d=[1,0,0,1],c=b,e=1,f=k.MAX_LOOPS;f--&&Math.abs(b-k.toDecimal(a))>k.EPSILON;)e=Math.floor(c),a[0]=e*d[0]+
d[2],a[1]=e*d[1]+d[3],c=1/(c-e),d[2]=d[0],d[3]=d[1],d[0]=a[0],d[1]=a[1];return a};k.fromRandom=function(a){a[0]=0xfffffffffffff*Math.random()<<0;a[1]=Math.abs(0xfffffffffffff*Math.random()<<0);return k.normalize(a,a)};k.sin=function(a,b){if(0===b[1])return k.copy(a,k.ZERO);k.scalar_multiply(a,b,2);var d=k.create();k.pow(d,b,2);k.add(d,d,k.ONE);k.divide(a,a,d);return a};k.cos=function(a,b){if(0===b[1])return k.neg(a,k.ONE);var d=k.create();k.pow(d,b,2);k.sub(a,k.ONE,d);var c=k.create();k.add(c,k.ONE,
d);k.divide(a,a,c);return a};k.tan=function(a,b){k.scalar_multiply(a,b,2);var d=k.create();k.pow(d,b,2);k.scalar_multiply(d,d,2);k.add(a,a,d);k.pow(d,b,4);k.sub(d,k.ONE,d);k.divide(a,a,d);return a};k.toEgyptian=function(a){a=k.clone(a);k.abs(a,a);var b=k.floor(a);b&&k.sub(a,a,k.fromInteger(b));if(!a[0])return b.toString();b||(b="");for(var d=1,c=k.create();1!==a[0];)d++,c=k.fromValues(1,d),k.isGreaterThan(a,c)&&(b&&(b+=" + "),b+=k.str(c),k.sub(a,a,c));return a?b?b+" + "+k.str(a):k.str(a):b?b:"0"};
k.toBabylonian=function(a){var b="",d=k.toDecimal(a);a=parseInt(d);for(var d=d-a,c=0,e=0;0<a;)(c=a%60)&&(b=c+" * 60^"+e+(b?" + ":"")+b),a=(a-c)/60,e++;for(e=-1;0<d;)d*=60,c=parseInt(d+1E-13),d-=c,-1E-13>d||(c&&(b+=(b?" + ":"")+c+" * 60^"+e),e--);return b?b:"0"};k.traceSternBrocot=function(a){var b="";if(k.equals(a,k.ZERO)||k.equals(a,k.ONE)||k.equals(a,k.INFINITY)||k.equals(a,k.INFINULL))return b;if(k.equals(a,k.ZERO))return k.copy(out,k.ZERO);if(k.equals(a,k.ONE))return k.copy(out,k.ONE);if(k.equals(a,
k.INFINITY))return k.copy(out,k.INFINITY);if(k.equals(a,k.INFINULL))return k.copy(out,k.INFINULL);a=k.clone(a);k.isNegative(a)&&(a[0]=-a[0]);for(var d=k.clone(k.ONE),c=[1,0,0,1],e=0,f=0,g=k.MAX_LOOPS;!k.approximates(a,d)&&g--;)k.isLessThan(a,d)?(c[0]+=c[1],c[2]+=c[3],f++,e&&(b+="R",1!==e&&(b+=e),e=0,b+=" ")):(c[1]+=c[0],c[3]+=c[2],e++,f&&(b+="L",1!==f&&(b+=f),f=0,b+=" ")),d[0]=c[0]+c[1],d[1]=c[2]+c[3];f?(b+="L",1!==f&&(b+=f)):e&&(b+="R",1!==e&&(b+=e));0>g&&(b+="...");return b};k.toContinuedFraction=
function(a,b){b="undefined"===typeof b?65536:parseInt(b);if(k.equals(a,k.ZERO))return[0];if(k.equals(a,k.ONE))return[1];if(k.equals(a,k.NEGONE))return[-1];if(k.equals(a,k.INFINITY))return[1,0];if(k.equals(a,k.INFINULL))return[0,0];var d=k.clone(a),c=k.isNegative(d);c&&(d[0]=-d[0]);for(var e=k.clone(k.ONE),f=[1,0,0,1],g=1,l=[0],n=l.length-1;!k.equals(d,e)&&b--;)k.isLessThan(d,e)?(-1===g?l[n]++:(g=-1,l.push(1),n++),f[0]+=f[1],f[2]+=f[3]):(1===g?l[n]++:(g=1,l.push(1),n++),f[1]+=f[0],f[3]+=f[2]),e[0]=
f[0]+f[1],e[1]=f[2]+f[3];0>b?l.push(0):l[n]++;if(c)for(var q in l)l[q]=-l[q];return l};k.fromContinuedFraction=function(a,b){k.fromInteger_copy(a,b[b.length-1]);for(var d=b.length-2;-1<d;d--)k.invert(a,a),k.add(a,k.fromInteger(b[d]),a);return a};k.dump=function(a){k.create();return"rat\t"+k.str(a)+"\n~\t"+k.toDecimal(a)+"\nCF:\t["+k.toContinuedFraction(a)+"]\n"};k.ZERO=k.fromInteger(0);k.ONE=k.fromInteger(1);k.NEGONE=k.fromInteger(-1);k.INFINITY=k.fromValues(1,0);k.INFINULL=k.fromValues(0,0);k.INFINITESIMAL=
k.clone([1,l]);k.PI=k.fromValues(1320192667429,420230377710);"undefined"!==typeof c&&(c.rat=k);if(!b)var b=new BigInteger("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");if(!e)var e=1073741824;var a={EPSILON:2E-16};a.MAX_LOOPS=e;a.create=function(){var a=[];a[0]=BigInteger.ZERO;a[1]=BigInteger.ONE;return a};a.clone=function(a){var b=[];b[0]=a[0];b[1]=a[1];return b};a.fromValues=function(b,d){var c=[];c[0]=new BigInteger(b);c[1]=new BigInteger(d);return a.normalize(c,c)};a.copy=function(a,b){a[0]=b[0];a[1]=
b[1];return a};a.set=function(b,d,c){b[0]=d;b[1]=c;return a.normalize(b,b)};a.toRat=function(a,b){return k.set(a,b[0].toJSValue(),b[1].toJSValue())};a.fromRat=function(b,d){return a.set(b,BigInteger(d[0]),BigInteger(d[1]))};a.abs=function(a,b){a[0]=b[0].abs();a[1]=b[1];return a};a.invert=function(a,b){var d=b[0];a[0]=b[1];a[1]=d;return a};a.reciprocal=a.invert;a.add=function(b,d,c){0===d[1].compare(c[1])?(b[0]=d[0].add(c[0]),b[1]=d[1]):(b[0]=d[0].multiply(c[1]).add(c[0].multiply(d[1])),b[1]=d[1].multiply(c[1]));
return a.normalize(b,b)};a.subtract=function(b,d,c){0===d[1].compare(c[1])?(b[0]=d[0].subtract(c[0]),b[1]=d[1]):(b[0]=d[0].multiply(c[1]).subtract(c[0].multiply(d[1])),b[1]=d[1].multiply(c[1]));return a.normalize(b,b)};a.sub=a.subtract;a.multiply=function(b,d,c){b[0]=d[0].multiply(c[0]);b[1]=d[1].multiply(c[1]);return a.normalize(b,b)};a.mul=a.multiply;a.mediant=function(b,d,c){b[0]=d[0].add(c[0]);b[1]=d[1].add(c[1]);return a.normalize(b,b)};a.divide=function(b,d,c){b[0]=d[0].multiply(c[1]);b[1]=
d[1].multiply(c[0]);return a.normalize(b,b)};a.div=a.divide;a.equals=function(a,b){return a[0].isZero()&&b[0].isZero()||a[1].isZero()&&b[1].isZero()?!0:0===a[0].compare(b[0])&&0===a[1].compare(b[1])};a.approximates=function(b,d){if(a.equals(b,d))return!0;var c=a.create();a.sub(c,b,d);a.abs(c,c);return a.isLessThan(c,a.INFINITESIMAL)};a.isGreaterThan=function(b,d){return a.equals(b,d)?!1:0<b[0].multiply(d[1]).compare(d[0].multiply(b[1]))};a.isLessThan=function(b,d){return a.equals(b,d)?!1:0>b[0].multiply(d[1]).compare(d[0].multiply(b[1]))};
a.isNegative=function(a){return a[0].isNegative()};a.min=function(b,d,c){a.isLessThan(d,c)?(b[0]=d[0],b[1]=d[1]):(b[0]=c[0],b[1]=c[1]);return b};a.max=function(b,d,c){a.isGreaterThan(d,c)?(b[0]=d[0],b[1]=d[1]):(b[0]=c[0],b[1]=c[1]);return b};a.scalar_multiply=function(b,d,c){b[0]=d[0].multiply(c);b[1]=d[1];return a.normalize(b,b)};a.scalar_divide=function(b,d,c){b[0]=d[0];b[1]=d[1].multiply(c);return a.normalize(b,b)};a.normalize=function(b,d){if(d[0].isZero()||d[1].isZero())return d;if(0===d[0].compare(d[1]))return a.clone(a.ONE);
if(d[1].isNegative())b[0]=d[0].negate(),b[1]=d[1].negate();else if(b[0]=d[0],b[1]=d[1],b[1].isZero())return b;var c=q.greatest_common_divisor(b[0].abs(),b[1]);0<c.compare(BigInteger.ONE)&&(b[0]=b[0].quotient(c),b[1]=b[1].quotient(c));return b};a.opposite=function(a,b){a[0]=b[0].negate();a[1]=b[1];return a};a.negative=a.opposite;a.neg=a.opposite;a.power=function(b,d,c){2===c?(b[0]=d[0].square(),b[1]=d[1].square()):0<c?(b[0]=d[0].pow(c),b[1]=d[1].pow(c)):0>c?(c=Math.abs(c),b[0]=d[1].pow(c),b[1]=d[0].pow(c)):
a.copy(b,a.ONE);return b};a.pow=a.power;a.sqrt=function(b,d){return a.nthRoot(b,d,2)};a.nthRoot=function(b,d,c){if(a.equals(d,a.ZERO))return a.copy(b,a.ZERO);if(a.equals(d,a.ONE))return a.copy(b,a.ONE);if(a.equals(d,a.INFINITY))return a.copy(b,a.INFINITY);if(a.equals(d,a.INFINULL))return a.copy(b,a.INFINULL);var f=a.isNegative(d);f&&(d[0]=d[0].negate());a.copy(b,a.ONE);for(var g=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],k=a.clone(a.ONE),l=e;!a.approximates(d,k)&&l--;)a.isLessThan(d,
k)?(g[0]=g[0].add(g[1]),g[2]=g[2].add(g[3])):(g[1]=g[1].add(g[0]),g[3]=g[3].add(g[2])),b[0]=g[0].add(g[1]),b[1]=g[2].add(g[3]),a.pow(k,b,c);f&&(d[0]=d[0].negate(),1===c%2&&a.neg(b,b));return b};a.dot=function(a,b){return a[0].multiply(b[0]).add(a[1].multiply(b[1]))};a.str=function(a){return 0===a[1].compare(BigInteger.ONE)?a[0].toString():a[0].toString()+"/"+a[1].toString()};a.toDecimal=function(a){return a[0].toJSValue()/a[1].toJSValue()};a.dec=a.toDecimal;a.toInteger=function(a){return a[0].quotient(a[1]).toJSValue()};
a.round=a.toInteger;a.toBigInteger=function(a){return a[0].quotient(a[1])};a.floor=function(b){return Math.floor(a.toDecimal(b))};a.ceil=function(b){return Math.ceil(a.toDecimal(b))};a.fromInteger_copy=function(a,b){a[0]=BigInteger(b);a[1]=BigInteger.ONE;return a};a.fromInteger=function(b){return a.fromInteger_copy(a.create(),b)};a.fromIntegerInverse_copy=function(a,b){a[0]=BigInteger.ONE;a[1]=BigInteger(b);a[1].isNegative()&&(a[0]=a[0].negate(),a[1]=a[1].negate());return a};a.fromIntegerInverse=
function(b){return a.fromIntegerInverse_copy(a.create(),b)};a.fromDecimal=function(b){return a.fromDecimal_copy(a.create(),b)};a.fromDecimal_copy=function(b,d){d=parseFloat(d);if(isNaN(d))return a.copy(b,a.INFINULL);if(Infinity===d)return a.copy(b,a.INFINITY);if(Math.abs(d)<a.EPSILON)return a.copy(b,a.ZERO);if(Math.abs(d-1)<a.EPSILON)return a.copy(b,a.ONE);if(Math.abs(d%1)<a.EPSILON)return a.fromInteger_copy(b,d);if(Math.abs(1/d%1)<a.EPSILON)return a.fromIntegerInverse_copy(b,Math.round(1/d));a.copy(b,
a.ONE);for(var c=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],e=d,f=1,g=a.MAX_LOOPS;g--&&Math.abs(d-a.toDecimal(b))>a.EPSILON;)f=Math.floor(e),b[0]=BigInteger(f*c[0]+c[2]),b[1]=BigInteger(f*c[1]+c[3]),e=1/(e-f),c[2]=c[0],c[3]=c[1],c[0]=b[0],c[1]=b[1];return b};a.fromRandom=function(b){b[0]=BigInteger(0xfffffffffffff*Math.random()<<0);b[1]=BigInteger(Math.abs(0xfffffffffffff*Math.random()<<0));return a.normalize(b,b)};a.sin=function(b,d){if(d[1].isZero())return a.copy(b,a.ZERO);a.scalar_multiply(b,
d,2);var c=a.create();a.pow(c,d,2);a.add(c,c,a.ONE);a.divide(b,b,c);return b};a.cos=function(b,d){if(d[1].isZero())return a.neg(b,a.ONE);var c=a.create();a.pow(c,d,2);a.sub(b,a.ONE,c);var e=a.create();a.add(e,a.ONE,c);a.divide(b,b,e);return b};a.tan=function(b,d){a.scalar_multiply(b,d,2);var c=a.create();a.pow(c,d,2);a.scalar_multiply(c,c,2);a.add(b,b,c);a.pow(c,d,4);a.sub(c,a.ONE,c);a.divide(b,b,c);return b};a.toEgyptian=function(b){b=a.clone(b);a.abs(b,b);var d=a.floor(b);d&&a.sub(b,b,a.fromInteger(d));
if(!b[0])return d.toString();d||(d="");for(var c=1,e=a.create();1!==b[0];)c++,e=a.fromValues(1,c),a.isGreaterThan(b,e)&&(d&&(d+=" + "),d+=a.str(e),a.sub(b,b,e));return b?d?d+" + "+a.str(b):a.str(b):d?d:"0"};a.toBabylonian=function(b){var d="",c=a.toDecimal(b);b=parseInt(c);for(var c=c-b,e=0,f=0;0<b;)(e=b%60)&&(d=e+" * 60^"+f+(d?" + ":"")+d),b=(b-e)/60,f++;for(f=-1;0<c;)c*=60,e=parseInt(c+1E-13),c-=e,-1E-13>c||(e&&(d+=(d?" + ":"")+e+" * 60^"+f),f--);return d?d:"0"};a.traceSternBrocot=function(b){var d=
"";if(a.equals(b,a.ZERO)||a.equals(b,a.ONE)||a.equals(b,a.INFINITY)||a.equals(b,a.INFINULL))return d;b=a.clone(b);a.isNegative(b)&&(b[0]=b[0].negate());for(var c=a.clone(a.ONE),e=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],f=0,g=0,k=65536;!a.equals(b,c)&&k--;)a.isLessThan(b,c)?(e[0]=e[0].add(e[1]),e[2]=e[2].add(e[3]),g++,f&&(d+="R",1!==f&&(d+=f),f=0,d+=" ")):(e[1]=e[1].add(e[0]),e[3]=e[3].add(e[2]),f++,g&&(d+="L",1!==g&&(d+=g),g=0,d+=" ")),c[0]=e[0].add(e[1]),c[1]=e[2].add(e[3]);g?(d+=
"L",1!==g&&(d+=g)):f&&(d+="R",1!==f&&(d+=f));0>k&&(d+="...");return d};a.toContinuedFraction=function(b,d){d="undefined"===typeof d?65536:parseInt(d);if(a.equals(b,a.ZERO))return[0];if(a.equals(b,a.ONE))return[1];if(a.equals(b,a.NEGONE))return[-1];if(a.equals(b,a.INFINITY))return[1,0];if(a.equals(b,a.INFINULL))return[0,0];var c=a.clone(b),e=a.isNegative(c);e&&(c[0]=c[0].negate());for(var f=a.clone(a.ONE),g=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],k=1,l=[0],n=l.length-1;!a.equals(c,
f)&&d--;)a.isLessThan(c,f)?(-1===k?l[n]++:(k=-1,l.push(1),n++),g[0]=g[0].add(g[1]),g[2]=g[2].add(g[3])):(1===k?l[n]++:(k=1,l.push(1),n++),g[1]=g[1].add(g[0]),g[3]=g[3].add(g[2])),f[0]=g[0].add(g[1]),f[1]=g[2].add(g[3]);0>d?l.push(0):l[n]++;if(e)for(var q in l)l[q]=-l[q];return l};a.fromContinuedFraction=function(b,d){a.fromInteger_copy(b,d[d.length-1]);for(var c=d.length-2;-1<c;c--)a.invert(b,b),a.add(b,a.fromInteger(d[c]),b);return b};a.fromFactorial=function(b,d){if("undefined"!==typeof factorial.PREPARED[d])return a.fromInteger_copy(b,
factorial.PREPARED[d]);var c=factorial.PREPARED.length-1;for(a.fromInteger_copy(b,factorial.PREPARED[c]);c<d;)a.scalar_multiply(b,b,++c);return b};a.dump=function(b){return"bigrat\t"+a.str(b)+"\n~\t"+a.toDecimal(b)+"\nCF:\t["+a.toContinuedFraction(b)+"]\n"};a.ZERO=a.fromInteger(0);a.ONE=a.fromInteger(1);a.NEGONE=a.fromInteger(-1);a.INFINITY=a.fromValues(1,0);a.INFINULL=a.fromValues(0,0);a.INFINITESIMAL=a.clone([new BigInteger(1),b]);a.PI=a.fromValues("3141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481117450284102701938521105559644622948954930381964428810975665933446128475648233786783165271201909145648566923460348610454326648213393607260249141273724587",
"1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");"undefined"!==typeof c&&(c.bigrat=a);var d=function(a,b){this.a=k.fromValues(parseInt(a),parseInt(b))};d.prototype.toString=function(){return k.str(this.a)};d.prototype.toContinuedFraction=function(a){return k.toContinuedFraction(this.a,
a)};d.prototype.invert=function(){return k.invert(this.a)};d.prototype.reciprocal=d.prototype.invert;d.prototype.add=function(a){var b=k.create();k.add(b,this.a,a.a);return new d(b[0],b[1])};d.prototype.plus=d.prototype.add;d.prototype.subtract=function(a){var b=k.create();k.sub(b,this.a,a.a);return new d(b[0],b[1])};d.prototype.sub=d.prototype.subtract;d.prototype.minus=d.prototype.subtract;d.prototype.multiply=function(a){var b=k.create();k.mul(b,this.a,a.a);return new d(b[0],b[1])};d.prototype.mul=
d.prototype.multiply;d.prototype.times=d.prototype.multiply;d.prototype.mediant=function(a){var b=k.create();k.mediant(b,this.a,a.a);return new d(b[0],b[1])};d.prototype.divide=function(a){var b=k.create();k.div(b,this.a,a.a);return new d(b[0],b[1])};d.prototype.div=d.prototype.divide;d.prototype.divided_by=d.prototype.divide;d.prototype.power=function(a){var b=k.create();k.pow(b,this.a,a);return new d(b[0],b[1])};d.prototype.pow=d.prototype.power;d.prototype.dump=function(){return k.dump(this.a)};
d.prototype.toRat=function(){return k.clone(this.a)};d.prototype.toDecimal=function(){return k.toDecimal(this.a)};d.fromRat=function(a){var b=new d;b.a[0]=a[0];b.a[1]=a[1];return b};d.fromInteger=function(a){return d.fromRat(k.fromInteger(a))};d.fromIntegerInverse=function(a){return d.fromRat(k.fromIntegerInverse(a))};d.fromDecimal=function(a){return d.fromRat(k.fromDecimal(a))};d.fromContinuedFraction=function(a){return d.fromRat(k.fromContinuedFraction(k.create(),a))};"undefined"!==typeof c&&(c.rational=
d)})(m)})(this);(function(c,m){"object"===typeof module&&"object"===typeof module.exports?module.exports=c.document?m(c,!0):function(c){if(!c.document)throw Error("jQuery requires a window with a document");return m(c)}:m(c)})("undefined"!==typeof window?window:this,function(c,m){function g(a){var b=a.length,d=p.type(a);return"function"===d||p.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===d||0===b||"number"===typeof b&&0<b&&b-1 in a}function f(a,b,d){if(p.isFunction(b))return p.grep(a,function(a,c){return!!b.call(a,
c,a)!==d});if(b.nodeType)return p.grep(a,function(a){return a===b!==d});if("string"===typeof b){if(Bb.test(b))return p.filter(b,a,d);b=p.filter(b,a)}return p.grep(a,function(a){return 0<=la.call(b,a)!==d})}function q(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function n(a){var b=mb[a]={};p.each(a.match(fa)||[],function(a,d){b[d]=!0});return b}function l(){N.removeEventListener("DOMContentLoaded",l,!1);c.removeEventListener("load",l,!1);p.ready()}function r(){Object.defineProperty(this.cache={},
0,{get:function(){return{}}});this.expando=p.expando+Math.random()}function k(a,b,d){if(void 0===d&&1===a.nodeType)if(d="data-"+b.replace(Pa,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Cb.test(d)?p.parseJSON(d):d}catch(c){}T.set(a,b,d)}else d=void 0;return d}function b(){return!0}function e(){return!1}function a(){try{return N.activeElement}catch(a){}}function d(a,b){return p.nodeName(a,"table")&&p.nodeName(11!==b.nodeType?
b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function h(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function s(a){var b=ab.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function v(a,b){for(var d=0,c=a.length;d<c;d++)H.set(a[d],"globalEval",!b||H.get(b[d],"globalEval"))}function w(a,b){var d,c,e,h;if(1===b.nodeType){if(H.hasData(a)&&(h=H.access(a),d=H.set(b,h),h=h.events))for(e in delete d.handle,
d.events={},h)for(d=0,c=h[e].length;d<c;d++)p.event.add(b,e,h[e][d]);T.hasData(a)&&(e=T.access(a),e=p.extend({},e),T.set(b,e))}}function y(a,b){var d=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&p.nodeName(a,b)?p.merge([a],d):d}function z(a,b){var d,e=p(b.createElement(a)).appendTo(b.body),h=c.getDefaultComputedStyle&&(d=c.getDefaultComputedStyle(e[0]))?d.display:p.css(e[0],"display");e.detach();return h}function C(a){var b=
N,d=Qa[a];d||(d=z(a,b),"none"!==d&&d||(Ra=(Ra||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Ra[0].contentDocument,b.write(),b.close(),d=z(a,b),Ra.detach()),Qa[a]=d);return d}function A(a,b,d){var c,e,h=a.style;(d=d||Sa(a))&&(e=d.getPropertyValue(b)||d[b]);d&&(""!==e||p.contains(a.ownerDocument,a)||(e=p.style(a,b)),ma.test(e)&&Fa.test(b)&&(a=h.width,b=h.minWidth,c=h.maxWidth,h.minWidth=h.maxWidth=h.width=e,e=d.width,h.width=a,h.minWidth=b,h.maxWidth=c));return void 0!==
e?e+"":e}function F(a,b){return{get:function(){if(a())delete this.get;else return(this.get=b).apply(this,arguments)}}}function E(a,b){if(b in a)return b;for(var d=b[0].toUpperCase()+b.slice(1),c=b,e=ia.length;e--;)if(b=ia[e]+d,b in a)return b;return c}function G(a,b,d){return(a=ja.exec(b))?Math.max(0,a[1]-(d||0))+(a[2]||"px"):b}function X(a,b,d,c,e){b=d===(c?"border":"content")?4:"width"===b?1:0;for(var h=0;4>b;b+=2)"margin"===d&&(h+=p.css(a,d+za[b],!0,e)),c?("content"===d&&(h-=p.css(a,"padding"+
za[b],!0,e)),"margin"!==d&&(h-=p.css(a,"border"+za[b]+"Width",!0,e))):(h+=p.css(a,"padding"+za[b],!0,e),"padding"!==d&&(h+=p.css(a,"border"+za[b]+"Width",!0,e)));return h}function L(a,b,d){var c=!0,e="width"===b?a.offsetWidth:a.offsetHeight,h=Sa(a),f="border-box"===p.css(a,"boxSizing",!1,h);if(0>=e||null==e){e=A(a,b,h);if(0>e||null==e)e=a.style[b];if(ma.test(e))return e;c=f&&(K.boxSizingReliable()||e===a.style[b]);e=parseFloat(e)||0}return e+X(a,b,d||(f?"border":"content"),c,h)+"px"}function P(a,
b){for(var d,c,e,h=[],f=0,g=a.length;f<g;f++)c=a[f],c.style&&(h[f]=H.get(c,"olddisplay"),d=c.style.display,b?(h[f]||"none"!==d||(c.style.display=""),""===c.style.display&&Ca(c)&&(h[f]=H.access(c,"olddisplay",C(c.nodeName)))):(e=Ca(c),"none"===d&&e||H.set(c,"olddisplay",e?d:p.css(c,"display"))));for(f=0;f<g;f++)c=a[f],!c.style||b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?h[f]||"":"none");return a}function x(a,b,d,c,e){return new x.prototype.init(a,b,d,c,e)}function M(){setTimeout(function(){Da=
void 0});return Da=p.now()}function O(a,b){var d,c=0,e={height:a};for(b=b?1:0;4>c;c+=2-b)d=za[c],e["margin"+d]=e["padding"+d]=a;b&&(e.opacity=e.width=a);return e}function ba(a,b,d){for(var c,e=(I[b]||[]).concat(I["*"]),h=0,f=e.length;h<f;h++)if(c=e[h].call(d,b,a))return c}function ha(a,b){var d,c,e,h,f;for(d in a)if(c=p.camelCase(d),e=b[c],h=a[d],p.isArray(h)&&(e=h[1],h=a[d]=h[0]),d!==c&&(a[c]=h,delete a[d]),(f=p.cssHooks[c])&&"expand"in f)for(d in h=f.expand(h),delete a[c],h)d in a||(a[d]=h[d],b[d]=
e);else b[c]=e}function ca(a,b,d){var c,e=0,h=Q.length,f=p.Deferred().always(function(){delete g.elem}),g=function(){if(c)return!1;for(var b=Da||M(),b=Math.max(0,k.startTime+k.duration-b),d=1-(b/k.duration||0),e=0,h=k.tweens.length;e<h;e++)k.tweens[e].run(d);f.notifyWith(a,[k,d,b]);if(1>d&&h)return b;f.resolveWith(a,[k]);return!1},k=f.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},d),originalProperties:b,originalOptions:d,startTime:Da||M(),duration:d.duration,tweens:[],createTween:function(b,
d){var c=p.Tween(a,k.opts,b,d,k.opts.specialEasing[b]||k.opts.easing);k.tweens.push(c);return c},stop:function(b){var d=0,e=b?k.tweens.length:0;if(c)return this;for(c=!0;d<e;d++)k.tweens[d].run(1);b?f.resolveWith(a,[k,b]):f.rejectWith(a,[k,b]);return this}});d=k.props;for(ha(d,k.opts.specialEasing);e<h;e++)if(b=Q[e].call(k,a,d,k.opts))return b;p.map(d,ba,k);p.isFunction(k.opts.start)&&k.opts.start.call(a,k);p.fx.timer(p.extend(g,{elem:a,anim:k,queue:k.opts.queue}));return k.progress(k.opts.progress).done(k.opts.done,
k.opts.complete).fail(k.opts.fail).always(k.opts.always)}function qa(a){return function(b,d){"string"!==typeof b&&(d=b,b="*");var c,e=0,h=b.toLowerCase().match(fa)||[];if(p.isFunction(d))for(;c=h[e++];)"+"===c[0]?(c=c.slice(1)||"*",(a[c]=a[c]||[]).unshift(d)):(a[c]=a[c]||[]).push(d)}}function Y(a,b,d,c){function e(g){var k;h[g]=!0;p.each(a[g]||[],function(a,u){var D=u(b,d,c);if("string"===typeof D&&!f&&!h[D])return b.dataTypes.unshift(D),e(D),!1;if(f)return!(k=D)});return k}var h={},f=a===bb;return e(b.dataTypes[0])||
!h["*"]&&e("*")}function ra(a,b){var d,c,e=p.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);c&&p.extend(!0,a,c);return a}function na(a,b,d,c){var e;if(p.isArray(b))p.each(b,function(b,e){d||La.test(a)?c(a,e):na(a+"["+("object"===typeof e?b:"")+"]",e,d,c)});else if(d||"object"!==p.type(b))c(a,b);else for(e in b)na(a+"["+e+"]",b[e],d,c)}function V(a){return p.isWindow(a)?a:9===a.nodeType&&a.defaultView}var sa=[],da=sa.slice,va=sa.concat,Aa=sa.push,la=sa.indexOf,
wa={},cb=wa.toString,ua=wa.hasOwnProperty,K={},N=c.document,p=function(a,b){return new p.fn.init(a,b)},Eb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Fb=/^-ms-/,nb=/-([\da-z])/gi,db=function(a,b){return b.toUpperCase()};p.fn=p.prototype={jquery:"2.1.1",constructor:p,selector:"",length:0,toArray:function(){return da.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:da.call(this)},pushStack:function(a){a=p.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},
each:function(a,b){return p.each(this,a,b)},map:function(a){return this.pushStack(p.map(this,function(b,d){return a.call(b,d,b)}))},slice:function(){return this.pushStack(da.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Aa,sort:sa.sort,splice:sa.splice};p.extend=p.fn.extend=function(){var a,
b,d,c,e,h=arguments[0]||{},f=1,g=arguments.length,k=!1;"boolean"===typeof h&&(k=h,h=arguments[f]||{},f++);"object"===typeof h||p.isFunction(h)||(h={});f===g&&(h=this,f--);for(;f<g;f++)if(null!=(a=arguments[f]))for(b in a)d=h[b],c=a[b],h!==c&&(k&&c&&(p.isPlainObject(c)||(e=p.isArray(c)))?(e?(e=!1,d=d&&p.isArray(d)?d:[]):d=d&&p.isPlainObject(d)?d:{},h[b]=p.extend(k,d,c)):void 0!==c&&(h[b]=c));return h};p.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);
},noop:function(){},isFunction:function(a){return"function"===p.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!p.isArray(a)&&0<=a-parseFloat(a)},isPlainObject:function(a){return"object"!==p.type(a)||a.nodeType||p.isWindow(a)||a.constructor&&!ua.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){for(var b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?
wa[cb.call(a)]||"object":typeof a},globalEval:function(a){var b;b=eval;if(a=p.trim(a))1===a.indexOf("use strict")?(b=N.createElement("script"),b.text=a,N.head.appendChild(b).parentNode.removeChild(b)):b(a)},camelCase:function(a){return a.replace(Fb,"ms-").replace(nb,db)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var c,e=0,h=a.length;c=g(a);if(d)if(c)for(;e<h&&(c=b.apply(a[e],d),!1!==c);e++);else for(e in a){if(c=b.apply(a[e],d),!1===
c)break}else if(c)for(;e<h&&(c=b.call(a[e],e,a[e]),!1!==c);e++);else for(e in a)if(c=b.call(a[e],e,a[e]),!1===c)break;return a},trim:function(a){return null==a?"":(a+"").replace(Eb,"")},makeArray:function(a,b){var d=b||[];null!=a&&(g(Object(a))?p.merge(d,"string"===typeof a?[a]:a):Aa.call(d,a));return d},inArray:function(a,b,d){return null==b?-1:la.call(b,a,d)},merge:function(a,b){for(var d=+b.length,c=0,e=a.length;c<d;c++)a[e++]=b[c];a.length=e;return a},grep:function(a,b,d){for(var c=[],e=0,h=a.length,
f=!d;e<h;e++)d=!b(a[e],e),d!==f&&c.push(a[e]);return c},map:function(a,b,d){var c,e=0,h=a.length,f=[];if(g(a))for(;e<h;e++)c=b(a[e],e,d),null!=c&&f.push(c);else for(e in a)c=b(a[e],e,d),null!=c&&f.push(c);return va.apply([],f)},guid:1,proxy:function(a,b){var d,c;"string"===typeof b&&(d=a[b],b=a,a=d);if(p.isFunction(a))return c=da.call(arguments,2),d=function(){return a.apply(b||this,c.concat(da.call(arguments)))},d.guid=a.guid=a.guid||p.guid++,d},now:Date.now,support:K});p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){wa["[object "+b+"]"]=b.toLowerCase()});var Ha=function(a){function b(a,d,c,e){var h,f,t,D,g;(d?d.ownerDocument||d:H)!==M&&L(d);d=d||M;c=c||[];if(!a||"string"!==typeof a)return c;if(1!==(D=d.nodeType)&&9!==D)return[];if(B&&!e){if(h=ta.exec(a))if(t=h[1])if(9===D)if((f=d.getElementById(t))&&f.parentNode){if(f.id===t)return c.push(f),c}else return c;else{if(d.ownerDocument&&(f=d.ownerDocument.getElementById(t))&&N(d,f)&&f.id===t)return c.push(f),c}else{if(h[2])return S.apply(c,d.getElementsByTagName(a)),
c;if((t=h[3])&&r.getElementsByClassName&&d.getElementsByClassName)return S.apply(c,d.getElementsByClassName(t)),c}if(r.qsa&&(!O||!O.test(a))){f=h=K;t=d;g=9===D&&a;if(1===D&&"object"!==d.nodeName.toLowerCase()){D=C(a);(h=d.getAttribute("id"))?f=h.replace(Aa,"\\$&"):d.setAttribute("id",f);f="[id='"+f+"'] ";for(t=D.length;t--;)D[t]=f+J(D[t]);t=va.test(a)&&u(d.parentNode)||d;g=D.join(",")}if(g)try{return S.apply(c,t.querySelectorAll(g)),c}catch(k){}finally{h||d.removeAttribute("id")}}}return A(a.replace(Z,
"$1"),d,c,e)}function d(){function a(d,c){b.push(d+" ")>w.cacheLength&&delete a[b.shift()];return a[d+" "]=c}var b=[];return a}function c(a){a[K]=!0;return a}function e(a){var b=M.createElement("div");try{return!!a(b)}catch(d){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function h(a,b){for(var d=a.split("|"),c=a.length;c--;)w.attrHandle[d[c]]=b}function f(a,b){var d=b&&a,c=d&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(c)return c;
if(d)for(;d=d.nextSibling;)if(d===b)return-1;return a?1:-1}function g(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function k(a){return function(b){var d=b.nodeName.toLowerCase();return("input"===d||"button"===d)&&b.type===a}}function l(a){return c(function(b){b=+b;return c(function(d,c){for(var u,e=a([],d.length,b),h=e.length;h--;)d[u=e[h]]&&(d[u]=!(c[u]=d[u]))})})}function u(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function t(){}function J(a){for(var b=
0,d=a.length,c="";b<d;b++)c+=a[b].value;return c}function n(a,b,d){var c=b.dir,u=d&&"parentNode"===c,e=ha++;return b.first?function(b,d,e){for(;b=b[c];)if(1===b.nodeType||u)return a(b,d,e)}:function(b,d,h){var f,t,D=[Y,e];if(h)for(;b=b[c];){if((1===b.nodeType||u)&&a(b,d,h))return!0}else for(;b=b[c];)if(1===b.nodeType||u){t=b[K]||(b[K]={});if((f=t[c])&&f[0]===Y&&f[1]===e)return D[2]=f[2];t[c]=D;if(D[2]=a(b,d,h))return!0}}}function s(a){return 1<a.length?function(b,d,c){for(var u=a.length;u--;)if(!a[u](b,
d,c))return!1;return!0}:a[0]}function p(a,b,d,c,u){for(var e,h=[],f=0,t=a.length,D=null!=b;f<t;f++)if(e=a[f])if(!d||d(e,c,u))h.push(e),D&&b.push(f);return h}function q(a,d,u,e,h,f){e&&!e[K]&&(e=q(e));h&&!h[K]&&(h=q(h,f));return c(function(c,f,t,D){var g,k,J=[],l=[],n=f.length,s;if(!(s=c)){s=d||"*";for(var W=t.nodeType?[t]:t,q=[],v=0,Oa=W.length;v<Oa;v++)b(s,W[v],q);s=q}s=!a||!c&&d?s:p(s,J,a,t,D);W=u?h||(c?a:n||e)?[]:f:s;u&&u(s,W,t,D);if(e)for(g=p(W,l),e(g,[],t,D),t=g.length;t--;)if(k=g[t])W[l[t]]=
!(s[l[t]]=k);if(c){if(h||a){if(h){g=[];for(t=W.length;t--;)(k=W[t])&&g.push(s[t]=k);h(null,W=[],g,D)}for(t=W.length;t--;)(k=W[t])&&-1<(g=h?U.call(c,k):J[t])&&(c[g]=!(f[g]=k))}}else W=p(W===f?W.splice(n,W.length):W),h?h(null,f,W,D):S.apply(f,W)})}function v(a){var b,d,c,u=a.length,e=w.relative[a[0].type];d=e||w.relative[" "];for(var h=e?1:0,f=n(function(a){return a===b},d,!0),t=n(function(a){return-1<U.call(b,a)},d,!0),D=[function(a,d,c){return!e&&(c||d!==x)||((b=d).nodeType?f(a,d,c):t(a,d,c))}];h<
u;h++)if(d=w.relative[a[h].type])D=[n(s(D),d)];else{d=w.filter[a[h].type].apply(null,a[h].matches);if(d[K]){for(c=++h;c<u&&!w.relative[a[c].type];c++);return q(1<h&&s(D),1<h&&J(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(Z,"$1"),d,h<c&&v(a.slice(h,c)),c<u&&v(a=a.slice(c)),c<u&&J(a))}D.push(d)}return s(D)}function m(a,d){var u=0<d.length,e=0<a.length,h=function(c,h,f,t,D){var g,k,J,l=0,n="0",s=c&&[],W=[],q=x,v=c||e&&w.find.TAG("*",D),Oa=Y+=null==q?1:Math.random()||.1,eb=v.length;
for(D&&(x=h!==M&&h);n!==eb&&null!=(g=v[n]);n++){if(e&&g){for(k=0;J=a[k++];)if(J(g,h,f)){t.push(g);break}D&&(Y=Oa)}u&&((g=!J&&g)&&l--,c&&s.push(g))}l+=n;if(u&&n!==l){for(k=0;J=d[k++];)J(s,W,h,f);if(c){if(0<l)for(;n--;)s[n]||W[n]||(W[n]=qa.call(t));W=p(W)}S.apply(t,W);D&&!c&&0<W.length&&1<l+d.length&&b.uniqueSort(t)}D&&(Y=Oa,x=q);return s};return u?c(h):h}var y,r,w,z,E,C,G,A,x,F,X,L,M,P,B,O,ba,I,N,K="sizzle"+-new Date,H=a.document,Y=0,ha=0,Q=d(),R=d(),V=d(),wa=function(a,b){a===b&&(X=!0);return 0},
T={}.hasOwnProperty,ca=[],qa=ca.pop,na=ca.push,S=ca.push,ra=ca.slice,U=ca.indexOf||function(a){for(var b=0,d=this.length;b<d;b++)if(this[b]===a)return b;return-1},aa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),sa="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+aa+"))|)[\\x20\\t\\r\\n\\f]*\\]",da=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
sa+")*)|.*)\\)|)",Z=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,ga=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ia=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ja=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,ka=new RegExp(da),ma=new RegExp("^"+aa+"$"),ua={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+sa),PSEUDO:new RegExp("^"+da),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,fa=/^[^{]+\{\s*\[native \w/,ta=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,va=/[+~]/,Aa=/'|\\/g,ea=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,la=function(a,b,d){a="0x"+b-65536;
return a!==a||d?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{S.apply(ca=ra.call(H.childNodes),H.childNodes),ca[H.childNodes.length].nodeType}catch(za){S={apply:ca.length?function(a,b){na.apply(a,ra.call(b))}:function(a,b){for(var d=a.length,c=0;a[d++]=b[c++];);a.length=d-1}}}r=b.support={};E=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};L=b.setDocument=function(a){var b=a?a.ownerDocument||a:H;a=b.defaultView;
if(b===M||9!==b.nodeType||!b.documentElement)return M;M=b;P=b.documentElement;B=!E(b);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){L()},!1):a.attachEvent&&a.attachEvent("onunload",function(){L()}));r.attributes=e(function(a){a.className="i";return!a.getAttribute("className")});r.getElementsByTagName=e(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});r.getElementsByClassName=fa.test(b.getElementsByClassName)&&e(function(a){a.innerHTML=
"<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});r.getById=e(function(a){P.appendChild(a).id=K;return!b.getElementsByName||!b.getElementsByName(K).length});r.getById?(w.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&B){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}},w.filter.ID=function(a){var b=a.replace(ea,la);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=
a.replace(ea,la);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});w.find.TAG=r.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var d,c=[],u=0,e=b.getElementsByTagName(a);if("*"===a){for(;d=e[u++];)1===d.nodeType&&c.push(d);return c}return e};w.find.CLASS=r.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&B)return b.getElementsByClassName(a)};
ba=[];O=[];if(r.qsa=fa.test(b.querySelectorAll))e(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";a.querySelectorAll("[msallowclip^='']").length&&O.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||O.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||O.push(":checked")}),
e(function(a){var d=b.createElement("input");d.setAttribute("type","hidden");a.appendChild(d).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&O.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||O.push(":enabled",":disabled");a.querySelectorAll("*,:x");O.push(",.*:")});(r.matchesSelector=fa.test(I=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&e(function(a){r.disconnectedMatch=I.call(a,"div");I.call(a,
"[s!='']:x");ba.push("!=",da)});O=O.length&&new RegExp(O.join("|"));ba=ba.length&&new RegExp(ba.join("|"));N=(a=fa.test(P.compareDocumentPosition))||fa.test(P.contains)?function(a,b){var d=9===a.nodeType?a.documentElement:a,c=b&&b.parentNode;return a===c||!!(c&&1===c.nodeType&&(d.contains?d.contains(c):a.compareDocumentPosition&&a.compareDocumentPosition(c)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};wa=a?function(a,d){if(a===d)return X=!0,0;var c=!a.compareDocumentPosition-
!d.compareDocumentPosition;if(c)return c;c=(a.ownerDocument||a)===(d.ownerDocument||d)?a.compareDocumentPosition(d):1;return c&1||!r.sortDetached&&d.compareDocumentPosition(a)===c?a===b||a.ownerDocument===H&&N(H,a)?-1:d===b||d.ownerDocument===H&&N(H,d)?1:F?U.call(F,a)-U.call(F,d):0:c&4?-1:1}:function(a,d){if(a===d)return X=!0,0;var c,u=0;c=a.parentNode;var e=d.parentNode,h=[a],t=[d];if(!c||!e)return a===b?-1:d===b?1:c?-1:e?1:F?U.call(F,a)-U.call(F,d):0;if(c===e)return f(a,d);for(c=a;c=c.parentNode;)h.unshift(c);
for(c=d;c=c.parentNode;)t.unshift(c);for(;h[u]===t[u];)u++;return u?f(h[u],t[u]):h[u]===H?-1:t[u]===H?1:0};return b};b.matches=function(a,d){return b(a,null,null,d)};b.matchesSelector=function(a,d){(a.ownerDocument||a)!==M&&L(a);d=d.replace(ja,"='$1']");if(!(!r.matchesSelector||!B||ba&&ba.test(d)||O&&O.test(d)))try{var c=I.call(a,d);if(c||r.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(u){}return 0<b(d,M,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==M&&
L(a);return N(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==M&&L(a);var d=w.attrHandle[b.toLowerCase()],d=d&&T.call(w.attrHandle,b.toLowerCase())?d(a,b,!B):void 0;return void 0!==d?d:r.attributes||!B?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,d=[],c=0,u=0;X=!r.detectDuplicates;F=!r.sortStable&&a.slice(0);a.sort(wa);if(X){for(;b=a[u++];)b===a[u]&&(c=d.push(u));
for(;c--;)a.splice(d[c],1)}F=null;return a};z=b.getText=function(a){var b,d="",c=0;b=a.nodeType;if(!b)for(;b=a[c++];)d+=z(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)d+=z(a)}else if(3===b||4===b)return a.nodeValue;return d};w=b.selectors={cacheLength:50,createPseudo:c,match:ua,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},
preFilter:{ATTR:function(a){a[1]=a[1].replace(ea,la);a[3]=(a[3]||a[4]||a[5]||"").replace(ea,la);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,d=!a[6]&&a[2];if(ua.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":d&&ka.test(d)&&(b=C(d,!0))&&(b=d.indexOf(")",
d.length-b)-d.length)&&(a[0]=a[0].slice(0,b),a[2]=d.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(ea,la).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=Q[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&Q(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},
ATTR:function(a,d,c){return function(u){u=b.attr(u,a);if(null==u)return"!="===d;if(!d)return!0;u+="";return"="===d?u===c:"!="===d?u!==c:"^="===d?c&&0===u.indexOf(c):"*="===d?c&&-1<u.indexOf(c):"$="===d?c&&u.slice(-c.length)===c:"~="===d?-1<(" "+u+" ").indexOf(c):"|="===d?u===c||u.slice(0,c.length+1)===c+"-":!1}},CHILD:function(a,b,d,c,u){var e="nth"!==a.slice(0,3),h="last"!==a.slice(-4),f="of-type"===b;return 1===c&&0===u?function(a){return!!a.parentNode}:function(b,d,t){var D,g,k,J,l;d=e!==h?"nextSibling":
"previousSibling";var n=b.parentNode,s=f&&b.nodeName.toLowerCase();t=!t&&!f;if(n){if(e){for(;d;){for(g=b;g=g[d];)if(f?g.nodeName.toLowerCase()===s:1===g.nodeType)return!1;l=d="only"===a&&!l&&"nextSibling"}return!0}l=[h?n.firstChild:n.lastChild];if(h&&t)for(t=n[K]||(n[K]={}),D=t[a]||[],J=D[0]===Y&&D[1],k=D[0]===Y&&D[2],g=J&&n.childNodes[J];g=++J&&g&&g[d]||(k=J=0)||l.pop();){if(1===g.nodeType&&++k&&g===b){t[a]=[Y,J,k];break}}else if(t&&(D=(b[K]||(b[K]={}))[a])&&D[0]===Y)k=D[1];else for(;(g=++J&&g&&
g[d]||(k=J=0)||l.pop())&&((f?g.nodeName.toLowerCase()!==s:1!==g.nodeType)||!++k||(t&&((g[K]||(g[K]={}))[a]=[Y,k]),g!==b)););k-=u;return k===c||0===k%c&&0<=k/c}}},PSEUDO:function(a,d){var u,e=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return e[K]?e(d):1<e.length?(u=[a,a,"",d],w.setFilters.hasOwnProperty(a.toLowerCase())?c(function(a,b){for(var c,u=e(a,d),h=u.length;h--;)c=U.call(a,u[h]),a[c]=!(b[c]=u[h])}):function(a){return e(a,0,u)}):e}},pseudos:{not:c(function(a){var b=
[],d=[],u=G(a.replace(Z,"$1"));return u[K]?c(function(a,b,d,c){c=u(a,null,c,[]);for(var e=a.length;e--;)if(d=c[e])a[e]=!(b[e]=d)}):function(a,c,e){b[0]=a;u(b,null,e,d);return!d.pop()}}),has:c(function(a){return function(d){return 0<b(a,d).length}}),contains:c(function(a){return function(b){return-1<(b.textContent||b.innerText||z(b)).indexOf(a)}}),lang:c(function(a){ma.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(ea,la).toLowerCase();return function(b){var d;do if(d=B?b.lang:b.getAttribute("xml:lang")||
b.getAttribute("lang"))return d=d.toLowerCase(),d===a||0===d.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var d=a.location&&a.location.hash;return d&&d.slice(1)===b.id},root:function(a){return a===P},focus:function(a){return a===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&
"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,d){return[0>d?d+b:d]}),even:l(function(a,b){for(var d=0;d<b;d+=2)a.push(d);return a}),odd:l(function(a,b){for(var d=1;d<b;d+=2)a.push(d);return a}),lt:l(function(a,b,d){for(b=0>d?d+b:d;0<=--b;)a.push(b);return a}),gt:l(function(a,b,d){for(d=0>d?d+b:d;++d<b;)a.push(d);return a})}};w.pseudos.nth=w.pseudos.eq;for(y in{radio:!0,checkbox:!0,
file:!0,password:!0,image:!0})w.pseudos[y]=g(y);for(y in{submit:!0,reset:!0})w.pseudos[y]=k(y);t.prototype=w.filters=w.pseudos;w.setFilters=new t;C=b.tokenize=function(a,d){var c,u,e,h,f,t,D;if(f=R[a+" "])return d?0:f.slice(0);f=a;t=[];for(D=w.preFilter;f;){if(!c||(u=ga.exec(f)))u&&(f=f.slice(u[0].length)||f),t.push(e=[]);c=!1;if(u=ia.exec(f))c=u.shift(),e.push({value:c,type:u[0].replace(Z," ")}),f=f.slice(c.length);for(h in w.filter)!(u=ua[h].exec(f))||D[h]&&!(u=D[h](u))||(c=u.shift(),e.push({value:c,
type:h,matches:u}),f=f.slice(c.length));if(!c)break}return d?f.length:f?b.error(a):R(a,t).slice(0)};G=b.compile=function(a,b){var d,c=[],u=[],e=V[a+" "];if(!e){b||(b=C(a));for(d=b.length;d--;)e=v(b[d]),e[K]?c.push(e):u.push(e);e=V(a,m(u,c));e.selector=a}return e};A=b.select=function(a,b,d,c){var e,h,f,t,D="function"===typeof a&&a,g=!c&&C(a=D.selector||a);d=d||[];if(1===g.length){h=g[0]=g[0].slice(0);if(2<h.length&&"ID"===(f=h[0]).type&&r.getById&&9===b.nodeType&&B&&w.relative[h[1].type]){b=(w.find.ID(f.matches[0].replace(ea,
la),b)||[])[0];if(!b)return d;D&&(b=b.parentNode);a=a.slice(h.shift().value.length)}for(e=ua.needsContext.test(a)?0:h.length;e--;){f=h[e];if(w.relative[t=f.type])break;if(t=w.find[t])if(c=t(f.matches[0].replace(ea,la),va.test(h[0].type)&&u(b.parentNode)||b)){h.splice(e,1);a=c.length&&J(h);if(!a)return S.apply(d,c),d;break}}}(D||G(a,g))(c,b,!B,d,va.test(a)&&u(b.parentNode)||b);return d};r.sortStable=K.split("").sort(wa).join("")===K;r.detectDuplicates=!!X;L();r.sortDetached=e(function(a){return a.compareDocumentPosition(M.createElement("div"))&
1});e(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||h("type|href|height|width",function(a,b,d){if(!d)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});r.attributes&&e(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||h("value",function(a,b,d){if(!d&&"input"===a.nodeName.toLowerCase())return a.defaultValue});e(function(a){return null==a.getAttribute("disabled")})||h("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
function(a,b,d){var c;if(!d)return!0===a[b]?b.toLowerCase():(c=a.getAttributeNode(b))&&c.specified?c.value:null});return b}(c);p.find=Ha;p.expr=Ha.selectors;p.expr[":"]=p.expr.pseudos;p.unique=Ha.uniqueSort;p.text=Ha.getText;p.isXMLDoc=Ha.isXML;p.contains=Ha.contains;var ob=p.expr.match.needsContext,pb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Bb=/^.[^:#\[\.,]*$/;p.filter=function(a,b,d){var c=b[0];d&&(a=":not("+a+")");return 1===b.length&&1===c.nodeType?p.find.matchesSelector(c,a)?[c]:[]:p.find.matches(a,p.grep(b,
function(a){return 1===a.nodeType}))};p.fn.extend({find:function(a){var b,d=this.length,c=[],e=this;if("string"!==typeof a)return this.pushStack(p(a).filter(function(){for(b=0;b<d;b++)if(p.contains(e[b],this))return!0}));for(b=0;b<d;b++)p.find(a,e[b],c);c=this.pushStack(1<d?p.unique(c):c);c.selector=this.selector?this.selector+" "+a:a;return c},filter:function(a){return this.pushStack(f(this,a||[],!1))},not:function(a){return this.pushStack(f(this,a||[],!0))},is:function(a){return!!f(this,"string"===
typeof a&&ob.test(a)?p(a):a||[],!1).length}});var Ta,Gb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(p.fn.init=function(a,b){var d;if(!a)return this;if("string"===typeof a){d="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:Gb.exec(a);if(!d||!d[1]&&b)return!b||b.jquery?(b||Ta).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof p?b[0]:b,p.merge(this,p.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:N,!0)),pb.test(d[1])&&p.isPlainObject(b))for(d in b)if(p.isFunction(this[d]))this[d](b[d]);
else this.attr(d,b[d])}else(d=N.getElementById(d[2]))&&d.parentNode&&(this.length=1,this[0]=d),this.context=N,this.selector=a;return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(p.isFunction(a))return"undefined"!==typeof Ta.ready?Ta.ready(a):a(p);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return p.makeArray(a,this)}).prototype=p.fn;Ta=p(N);var Ua=/^(?:parents|prev(?:Until|All))/,fb={children:!0,contents:!0,next:!0,prev:!0};p.extend({dir:function(a,
b,d){for(var c=[],e=void 0!==d;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&p(a).is(d))break;c.push(a)}return c},sibling:function(a,b){for(var d=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&d.push(a);return d}});p.fn.extend({has:function(a){var b=p(a,this),d=b.length;return this.filter(function(){for(var a=0;a<d;a++)if(p.contains(this,b[a]))return!0})},closest:function(a,b){for(var d,c=0,e=this.length,h=[],f=ob.test(a)||"string"!==typeof a?p(a,b||this.context):0;c<e;c++)for(d=this[c];d&&d!==
b;d=d.parentNode)if(11>d.nodeType&&(f?-1<f.index(d):1===d.nodeType&&p.find.matchesSelector(d,a))){h.push(d);break}return this.pushStack(1<h.length?p.unique(h):h)},index:function(a){return a?"string"===typeof a?la.call(p(a),this[0]):la.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(p.unique(p.merge(this.get(),p(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});p.each({parent:function(a){return(a=
a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,d){return p.dir(a,"parentNode",d)},next:function(a){return q(a,"nextSibling")},prev:function(a){return q(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,d){return p.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return p.dir(a,"previousSibling",d)},siblings:function(a){return p.sibling((a.parentNode||
{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return a.contentDocument||p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(d,c){var e=p.map(this,b,d);"Until"!==a.slice(-5)&&(c=d);c&&"string"===typeof c&&(e=p.filter(c,e));1<this.length&&(fb[a]||p.unique(e),Ua.test(a)&&e.reverse());return this.pushStack(e)}});var fa=/\S+/g,mb={};p.Callbacks=function(a){a="string"===typeof a?mb[a]||n(a):p.extend({},a);var b,d,c,e,h,f,g=[],k=!a.once&&[],l=function(t){b=
a.memory&&t;d=!0;f=e||0;e=0;h=g.length;for(c=!0;g&&f<h;f++)if(!1===g[f].apply(t[0],t[1])&&a.stopOnFalse){b=!1;break}c=!1;g&&(k?k.length&&l(k.shift()):b?g=[]:u.disable())},u={add:function(){if(g){var d=g.length;(function W(b){p.each(b,function(b,d){var c=p.type(d);"function"===c?a.unique&&u.has(d)||g.push(d):d&&d.length&&"string"!==c&&W(d)})})(arguments);c?h=g.length:b&&(e=d,l(b))}return this},remove:function(){g&&p.each(arguments,function(a,b){for(var d;-1<(d=p.inArray(b,g,d));)g.splice(d,1),c&&(d<=
h&&h--,d<=f&&f--)});return this},has:function(a){return a?-1<p.inArray(a,g):!(!g||!g.length)},empty:function(){g=[];h=0;return this},disable:function(){g=k=b=void 0;return this},disabled:function(){return!g},lock:function(){k=void 0;b||u.disable();return this},locked:function(){return!k},fireWith:function(a,b){!g||d&&!k||(b=b||[],b=[a,b.slice?b.slice():b],c?k.push(b):l(b));return this},fire:function(){u.fireWith(this,arguments);return this},fired:function(){return!!d}};return u};p.extend({Deferred:function(a){var b=
[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],d="pending",c={state:function(){return d},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return p.Deferred(function(d){p.each(b,function(b,h){var f=p.isFunction(a[b])&&a[b];e[h[1]](function(){var a=f&&f.apply(this,arguments);if(a&&p.isFunction(a.promise))a.promise().done(d.resolve).fail(d.reject).progress(d.notify);
else d[h[0]+"With"](this===c?d.promise():this,f?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?p.extend(a,c):c}},e={};c.pipe=c.then;p.each(b,function(a,h){var f=h[2],g=h[3];c[h[1]]=f.add;g&&f.add(function(){d=g},b[a^1][2].disable,b[2][2].lock);e[h[0]]=function(){e[h[0]+"With"](this===e?c:this,arguments);return this};e[h[0]+"With"]=f.fireWith});c.promise(e);a&&a.call(e,e);return e},when:function(a){var b=0,d=da.call(arguments),c=d.length,e=1!==c||a&&p.isFunction(a.promise)?
c:0,h=1===e?a:p.Deferred(),f=function(a,b,d){return function(c){b[a]=this;d[a]=1<arguments.length?da.call(arguments):c;d===g?h.notifyWith(b,d):--e||h.resolveWith(b,d)}},g,k,l;if(1<c)for(g=Array(c),k=Array(c),l=Array(c);b<c;b++)d[b]&&p.isFunction(d[b].promise)?d[b].promise().done(f(b,l,d)).fail(h.reject).progress(f(b,k,g)):--e;e||h.resolveWith(l,d);return h.promise()}});var Va;p.fn.ready=function(a){p.ready.promise().done(a);return this};p.extend({isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:
p.ready(!0)},ready:function(a){(!0===a?--p.readyWait:p.isReady)||(p.isReady=!0,!0!==a&&0<--p.readyWait||(Va.resolveWith(N,[p]),p.fn.triggerHandler&&(p(N).triggerHandler("ready"),p(N).off("ready"))))}});p.ready.promise=function(a){Va||(Va=p.Deferred(),"complete"===N.readyState?setTimeout(p.ready):(N.addEventListener("DOMContentLoaded",l,!1),c.addEventListener("load",l,!1)));return Va.promise(a)};p.ready.promise();var ea=p.access=function(a,b,d,c,e,h,f){var g=0,k=a.length,l=null==d;if("object"===p.type(d))for(g in e=
!0,d)p.access(a,b,g,d[g],!0,h,f);else if(void 0!==c&&(e=!0,p.isFunction(c)||(f=!0),l&&(f?(b.call(a,c),b=null):(l=b,b=function(a,b,d){return l.call(p(a),d)})),b))for(;g<k;g++)b(a[g],d,f?c:c.call(a[g],g,b(a[g],d)));return e?a:l?b.call(a):k?b(a[0],d):h};p.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};r.uid=1;r.accepts=p.acceptData;r.prototype={key:function(a){if(!r.accepts(a))return 0;var b={},d=a[this.expando];if(!d){d=r.uid++;try{b[this.expando]={value:d},Object.defineProperties(a,
b)}catch(c){b[this.expando]=d,p.extend(a,b)}}this.cache[d]||(this.cache[d]={});return d},set:function(a,b,d){var c;a=this.key(a);var e=this.cache[a];if("string"===typeof b)e[b]=d;else if(p.isEmptyObject(e))p.extend(this.cache[a],b);else for(c in b)e[c]=b[c];return e},get:function(a,b){var d=this.cache[this.key(a)];return void 0===b?d:d[b]},access:function(a,b,d){if(void 0===b||b&&"string"===typeof b&&void 0===d)return d=this.get(a,b),void 0!==d?d:this.get(a,p.camelCase(b));this.set(a,b,d);return void 0!==
d?d:b},remove:function(a,b){var d,c;d=this.key(a);var e=this.cache[d];if(void 0===b)this.cache[d]={};else for(p.isArray(b)?c=b.concat(b.map(p.camelCase)):(d=p.camelCase(b),b in e?c=[b,d]:(c=d,c=c in e?[c]:c.match(fa)||[])),d=c.length;d--;)delete e[c[d]]},hasData:function(a){return!p.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var H=new r,T=new r,Cb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pa=/([A-Z])/g;p.extend({hasData:function(a){return T.hasData(a)||
H.hasData(a)},data:function(a,b,d){return T.access(a,b,d)},removeData:function(a,b){T.remove(a,b)},_data:function(a,b,d){return H.access(a,b,d)},_removeData:function(a,b){H.remove(a,b)}});p.fn.extend({data:function(a,b){var d,c,e,h=this[0],f=h&&h.attributes;if(void 0===a){if(this.length&&(e=T.get(h),1===h.nodeType&&!H.get(h,"hasDataAttrs"))){for(d=f.length;d--;)f[d]&&(c=f[d].name,0===c.indexOf("data-")&&(c=p.camelCase(c.slice(5)),k(h,c,e[c])));H.set(h,"hasDataAttrs",!0)}return e}return"object"===
typeof a?this.each(function(){T.set(this,a)}):ea(this,function(b){var d,c=p.camelCase(a);if(h&&void 0===b){d=T.get(h,a);if(void 0!==d)return d;d=T.get(h,c);if(void 0!==d)return d;d=k(h,c,void 0);if(void 0!==d)return d}else this.each(function(){var d=T.get(this,c);T.set(this,c,b);-1!==a.indexOf("-")&&void 0!==d&&T.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){T.remove(this,a)})}});p.extend({queue:function(a,b,d){var c;if(a)return b=(b||"fx")+
"queue",c=H.get(a,b),d&&(!c||p.isArray(d)?c=H.access(a,b,p.makeArray(d)):c.push(d)),c||[]},dequeue:function(a,b){b=b||"fx";var d=p.queue(a,b),c=d.length,e=d.shift(),h=p._queueHooks(a,b),f=function(){p.dequeue(a,b)};"inprogress"===e&&(e=d.shift(),c--);e&&("fx"===b&&d.unshift("inprogress"),delete h.stop,e.call(a,f,h));!c&&h&&h.empty.fire()},_queueHooks:function(a,b){var d=b+"queueHooks";return H.get(a,d)||H.access(a,d,{empty:p.Callbacks("once memory").add(function(){H.remove(a,[b+"queue",d])})})}});
p.fn.extend({queue:function(a,b){var d=2;"string"!==typeof a&&(b=a,a="fx",d--);return arguments.length<d?p.queue(this[0],a):void 0===b?this:this.each(function(){var d=p.queue(this,a,b);p._queueHooks(this,a);"fx"===a&&"inprogress"!==d[0]&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var d,c=1,e=p.Deferred(),h=this,f=this.length,g=function(){--c||e.resolveWith(h,[h])};"string"!==
typeof a&&(b=a,a=void 0);for(a=a||"fx";f--;)(d=H.get(h[f],a+"queueHooks"))&&d.empty&&(c++,d.empty.add(g));g();return e.promise(b)}});var oa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,za=["Top","Right","Bottom","Left"],Ca=function(a,b){a=b||a;return"none"===p.css(a,"display")||!p.contains(a.ownerDocument,a)},qb=/^(?:checkbox|radio)$/i;(function(){var a=N.createDocumentFragment().appendChild(N.createElement("div")),b=N.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked",
"checked");b.setAttribute("name","t");a.appendChild(b);K.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";K.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue})();K.focusinBubbles="onfocusin"in c;var Hb=/^key/,Ib=/^(?:mouse|pointer|contextmenu)|click/,rb=/^(?:focusinfocus|focusoutblur)$/,R=/^([^.]*)(?:\.(.+)|)$/;p.event={global:{},add:function(a,b,d,c,e){var h,f,g,k,l,u,t,J,n;if(l=H.get(a))for(d.handler&&(h=d,d=h.handler,e=h.selector),d.guid||(d.guid=
p.guid++),(k=l.events)||(k=l.events={}),(f=l.handle)||(f=l.handle=function(b){return"undefined"!==typeof p&&p.event.triggered!==b.type?p.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(fa)||[""],l=b.length;l--;)g=R.exec(b[l])||[],J=u=g[1],n=(g[2]||"").split(".").sort(),J&&(g=p.event.special[J]||{},J=(e?g.delegateType:g.bindType)||J,g=p.event.special[J]||{},u=p.extend({type:J,origType:u,data:c,handler:d,guid:d.guid,selector:e,needsContext:e&&p.expr.match.needsContext.test(e),namespace:n.join(".")},
h),(t=k[J])||(t=k[J]=[],t.delegateCount=0,g.setup&&!1!==g.setup.call(a,c,n,f)||a.addEventListener&&a.addEventListener(J,f,!1)),g.add&&(g.add.call(a,u),u.handler.guid||(u.handler.guid=d.guid)),e?t.splice(t.delegateCount++,0,u):t.push(u),p.event.global[J]=!0)},remove:function(a,b,d,c,e){var h,f,g,k,l,u,t,J,n,s,q,v=H.hasData(a)&&H.get(a);if(v&&(k=v.events)){b=(b||"").match(fa)||[""];for(l=b.length;l--;)if(g=R.exec(b[l])||[],n=q=g[1],s=(g[2]||"").split(".").sort(),n){t=p.event.special[n]||{};n=(c?t.delegateType:
t.bindType)||n;J=k[n]||[];g=g[2]&&new RegExp("(^|\\.)"+s.join("\\.(?:.*\\.|)")+"(\\.|$)");for(f=h=J.length;h--;)u=J[h],!e&&q!==u.origType||d&&d.guid!==u.guid||g&&!g.test(u.namespace)||c&&c!==u.selector&&("**"!==c||!u.selector)||(J.splice(h,1),u.selector&&J.delegateCount--,t.remove&&t.remove.call(a,u));f&&!J.length&&(t.teardown&&!1!==t.teardown.call(a,s,v.handle)||p.removeEvent(a,n,v.handle),delete k[n])}else for(n in k)p.event.remove(a,n+b[l],d,c,!0);p.isEmptyObject(k)&&(delete v.handle,H.remove(a,
"events"))}},trigger:function(a,b,d,e){var h,f,g,k,l,n,u=[d||N],t=ua.call(a,"type")?a.type:a;n=ua.call(a,"namespace")?a.namespace.split("."):[];f=h=d=d||N;if(3!==d.nodeType&&8!==d.nodeType&&!rb.test(t+p.event.triggered)&&(0<=t.indexOf(".")&&(n=t.split("."),t=n.shift(),n.sort()),k=0>t.indexOf(":")&&"on"+t,a=a[p.expando]?a:new p.Event(t,"object"===typeof a&&a),a.isTrigger=e?2:3,a.namespace=n.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+n.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,
a.target||(a.target=d),b=null==b?[a]:p.makeArray(b,[a]),n=p.event.special[t]||{},e||!n.trigger||!1!==n.trigger.apply(d,b))){if(!e&&!n.noBubble&&!p.isWindow(d)){g=n.delegateType||t;rb.test(g+t)||(f=f.parentNode);for(;f;f=f.parentNode)u.push(f),h=f;h===(d.ownerDocument||N)&&u.push(h.defaultView||h.parentWindow||c)}for(h=0;(f=u[h++])&&!a.isPropagationStopped();)a.type=1<h?g:n.bindType||t,(l=(H.get(f,"events")||{})[a.type]&&H.get(f,"handle"))&&l.apply(f,b),(l=k&&f[k])&&l.apply&&p.acceptData(f)&&(a.result=
l.apply(f,b),!1===a.result&&a.preventDefault());a.type=t;e||a.isDefaultPrevented()||n._default&&!1!==n._default.apply(u.pop(),b)||!p.acceptData(d)||!k||!p.isFunction(d[t])||p.isWindow(d)||((h=d[k])&&(d[k]=null),p.event.triggered=t,d[t](),p.event.triggered=void 0,h&&(d[k]=h));return a.result}},dispatch:function(a){a=p.event.fix(a);var b,d,c,e,h=[],f=da.call(arguments);b=(H.get(this,"events")||{})[a.type]||[];var g=p.event.special[a.type]||{};f[0]=a;a.delegateTarget=this;if(!g.preDispatch||!1!==g.preDispatch.call(this,
a)){h=p.event.handlers.call(this,a,b);for(b=0;(e=h[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,d=0;(c=e.handlers[d++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(c.namespace))a.handleObj=c,a.data=c.data,c=((p.event.special[c.origType]||{}).handle||c.handler).apply(e.elem,f),void 0!==c&&!1===(a.result=c)&&(a.preventDefault(),a.stopPropagation());g.postDispatch&&g.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var d,c,e,h,f=[],g=
b.delegateCount,k=a.target;if(g&&k.nodeType&&(!a.button||"click"!==a.type))for(;k!==this;k=k.parentNode||this)if(!0!==k.disabled||"click"!==a.type){c=[];for(d=0;d<g;d++)h=b[d],e=h.selector+" ",void 0===c[e]&&(c[e]=h.needsContext?0<=p(e,this).index(k):p.find(e,this,null,[k]).length),c[e]&&c.push(h);c.length&&f.push({elem:k,handlers:c})}g<b.length&&f.push({elem:this,handlers:b.slice(g)});return f},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var d,c,e=b.button;null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||N,c=d.documentElement,d=d.body,a.pageX=b.clientX+(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c&&c.clientLeft||d&&d.clientLeft||0),a.pageY=
b.clientY+(c&&c.scrollTop||d&&d.scrollTop||0)-(c&&c.clientTop||d&&d.clientTop||0));a.which||void 0===e||(a.which=e&1?1:e&2?3:e&4?2:0);return a}},fix:function(a){if(a[p.expando])return a;var b,d,c;b=a.type;var e=a,h=this.fixHooks[b];h||(this.fixHooks[b]=h=Ib.test(b)?this.mouseHooks:Hb.test(b)?this.keyHooks:{});c=h.props?this.props.concat(h.props):this.props;a=new p.Event(e);for(b=c.length;b--;)d=c[b],a[d]=e[d];a.target||(a.target=N);3===a.target.nodeType&&(a.target=a.target.parentNode);return h.filter?
h.filter(a,e):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==a()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===a()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&p.nodeName(this,"input"))return this.click(),!1},_default:function(a){return p.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=
a.result)}}},simulate:function(a,b,d,c){a=p.extend(new p.Event,d,{type:a,isSimulated:!0,originalEvent:{}});c?p.event.trigger(a,null,b):p.event.dispatch.call(b,a);a.isDefaultPrevented()&&d.preventDefault()}};p.removeEvent=function(a,b,d){a.removeEventListener&&a.removeEventListener(b,d,!1)};p.Event=function(a,d){if(!(this instanceof p.Event))return new p.Event(a,d);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?
b:e):this.type=a;d&&p.extend(this,d);this.timeStamp=a&&a.timeStamp||p.now();this[p.expando]=!0};p.Event.prototype={isDefaultPrevented:e,isPropagationStopped:e,isImmediatePropagationStopped:e,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=b;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=b;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=
b;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var d,c=a.relatedTarget,e=a.handleObj;if(!c||c!==this&&!p.contains(this,c))a.type=e.origType,d=e.handler.apply(this,arguments),a.type=b;return d}}});K.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var d=
function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){var c=this.ownerDocument||this,e=H.access(c,b);e||c.addEventListener(a,d,!0);H.access(c,b,(e||0)+1)},teardown:function(){var c=this.ownerDocument||this,e=H.access(c,b)-1;e?H.access(c,b,e):(c.removeEventListener(a,d,!0),H.remove(c,b))}}});p.fn.extend({on:function(a,b,d,c,h){var f,g;if("object"===typeof a){"string"!==typeof b&&(d=d||b,b=void 0);for(g in a)this.on(g,b,d,a[g],h);return this}null==d&&null==
c?(c=b,d=b=void 0):null==c&&("string"===typeof b?(c=d,d=void 0):(c=d,d=b,b=void 0));if(!1===c)c=e;else if(!c)return this;1===h&&(f=c,c=function(a){p().off(a);return f.apply(this,arguments)},c.guid=f.guid||(f.guid=p.guid++));return this.each(function(){p.event.add(this,a,c,d,b)})},one:function(a,b,d,c){return this.on(a,b,d,c,1)},off:function(a,b,d){var c;if(a&&a.preventDefault&&a.handleObj)return c=a.handleObj,p(a.delegateTarget).off(c.namespace?c.origType+"."+c.namespace:c.origType,c.selector,c.handler),
this;if("object"===typeof a){for(c in a)this.off(c,b,a[c]);return this}if(!1===b||"function"===typeof b)d=b,b=void 0;!1===d&&(d=e);return this.each(function(){p.event.remove(this,a,d,b)})},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){var d=this[0];if(d)return p.event.trigger(a,b,d,!0)}});var sb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ia=/<([\w:]+)/,Jb=/<|&#?\w+;/,Kb=/<(?:script|style|link)/i,tb=/checked\s*(?:[^=]|=\s*.checked.)/i,
gb=/^$|\/(?:java|ecma)script/i,ab=/^true\/(.*)/,Lb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ka={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ka.optgroup=ka.option;ka.tbody=ka.tfoot=ka.colgroup=ka.caption=ka.thead;ka.th=ka.td;p.extend({clone:function(a,b,d){var c,e,h,f,g=a.cloneNode(!0),k=p.contains(a.ownerDocument,
a);if(!(K.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||p.isXMLDoc(a)))for(f=y(g),h=y(a),c=0,e=h.length;c<e;c++){var l=h[c],u=f[c],t=u.nodeName.toLowerCase();if("input"===t&&qb.test(l.type))u.checked=l.checked;else if("input"===t||"textarea"===t)u.defaultValue=l.defaultValue}if(b)if(d)for(h=h||y(a),f=f||y(g),c=0,e=h.length;c<e;c++)w(h[c],f[c]);else w(a,g);f=y(g,"script");0<f.length&&v(f,!k&&y(a,"script"));return g},buildFragment:function(a,b,d,c){for(var e,h,f,g=b.createDocumentFragment(),k=[],
l=0,u=a.length;l<u;l++)if((e=a[l])||0===e)if("object"===p.type(e))p.merge(k,e.nodeType?[e]:e);else if(Jb.test(e)){h=h||g.appendChild(b.createElement("div"));f=(Ia.exec(e)||["",""])[1].toLowerCase();f=ka[f]||ka._default;h.innerHTML=f[1]+e.replace(sb,"<$1></$2>")+f[2];for(f=f[0];f--;)h=h.lastChild;p.merge(k,h.childNodes);h=g.firstChild;h.textContent=""}else k.push(b.createTextNode(e));g.textContent="";for(l=0;e=k[l++];)if(!c||-1===p.inArray(e,c))if(a=p.contains(e.ownerDocument,e),h=y(g.appendChild(e),
"script"),a&&v(h),d)for(f=0;e=h[f++];)gb.test(e.type||"")&&d.push(e);return g},cleanData:function(a){for(var b,d,c,e,h=p.event.special,f=0;void 0!==(d=a[f]);f++){if(p.acceptData(d)&&(e=d[H.expando])&&(b=H.cache[e])){if(b.events)for(c in b.events)h[c]?p.event.remove(d,c):p.removeEvent(d,c,b.handle);H.cache[e]&&delete H.cache[e]}delete T.cache[d[T.expando]]}}});p.fn.extend({text:function(a){return ea(this,function(a){return void 0===a?p.text(this):this.empty().each(function(){if(1===this.nodeType||
11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||d(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=d(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,
this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var d,c=a?p.filter(a,this):this,e=0;null!=(d=c[e]);e++)b||1!==d.nodeType||p.cleanData(y(d)),d.parentNode&&(b&&p.contains(d.ownerDocument,d)&&v(y(d,"script")),d.parentNode.removeChild(d));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(p.cleanData(y(a,!1)),a.textContent="");return this},clone:function(a,
b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return p.clone(this,a,b)})},html:function(a){return ea(this,function(a){var b=this[0]||{},d=0,c=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"===typeof a&&!Kb.test(a)&&!ka[(Ia.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(sb,"<$1></$2>");try{for(;d<c;d++)b=this[d]||{},1===b.nodeType&&(p.cleanData(y(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=
arguments[0];this.domManip(arguments,function(b){a=this.parentNode;p.cleanData(y(this));a&&a.replaceChild(b,this)});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=va.apply([],a);var d,c,e,f,g=0,k=this.length,l=this,n=k-1,u=a[0],t=p.isFunction(u);if(t||1<k&&"string"===typeof u&&!K.checkClone&&tb.test(u))return this.each(function(d){var c=l.eq(d);t&&(a[0]=u.call(this,d,c.html()));c.domManip(a,b)});if(k&&(d=p.buildFragment(a,
this[0].ownerDocument,!1,this),c=d.firstChild,1===d.childNodes.length&&(d=c),c)){c=p.map(y(d,"script"),h);for(e=c.length;g<k;g++)f=d,g!==n&&(f=p.clone(f,!0,!0),e&&p.merge(c,y(f,"script"))),b.call(this[g],f,g);if(e)for(d=c[c.length-1].ownerDocument,p.map(c,s),g=0;g<e;g++)f=c[g],gb.test(f.type||"")&&!H.access(f,"globalEval")&&p.contains(d,f)&&(f.src?p._evalUrl&&p._evalUrl(f.src):p.globalEval(f.textContent.replace(Lb,"")))}return this}});p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",
insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(a){for(var d=[],c=p(a),e=c.length-1,h=0;h<=e;h++)a=h===e?this:this.clone(!0),p(c[h])[b](a),Aa.apply(d,a.get());return this.pushStack(d)}});var Ra,Qa={},Fa=/^margin/,ma=new RegExp("^("+oa+")(?!px)[a-z%]+$","i"),Sa=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};(function(){function a(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";
f.innerHTML="";e.appendChild(h);var g=c.getComputedStyle(f,null);b="1%"!==g.top;d="4px"===g.width;e.removeChild(h)}var b,d,e=N.documentElement,h=N.createElement("div"),f=N.createElement("div");f.style&&(f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",K.clearCloneStyle="content-box"===f.style.backgroundClip,h.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",h.appendChild(f),c.getComputedStyle&&p.extend(K,{pixelPosition:function(){a();
return b},boxSizingReliable:function(){null==d&&a();return d},reliableMarginRight:function(){var a;a=f.appendChild(N.createElement("div"));a.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";a.style.marginRight=a.style.width="0";f.style.width="1px";e.appendChild(h);a=!parseFloat(c.getComputedStyle(a,null).marginRight);e.removeChild(h);return a}}))})();p.swap=function(a,b,d,c){var e,h={};for(e in b)h[e]=
a.style[e],a.style[e]=b[e];d=d.apply(a,c||[]);for(e in b)a.style[e]=h[e];return d};var ub=/^(none|table(?!-c[ea]).+)/,ja=new RegExp("^("+oa+")(.*)$","i"),U=new RegExp("^([+-])=("+oa+")","i"),vb={position:"absolute",visibility:"hidden",display:"block"},hb={letterSpacing:"0",fontWeight:"400"},ia=["Webkit","O","Moz","ms"];p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var d=A(a,"opacity");return""===d?"1":d}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,
opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,d,c){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,h,f,g=p.camelCase(b),k=a.style;b=p.cssProps[g]||(p.cssProps[g]=E(k,g));f=p.cssHooks[b]||p.cssHooks[g];if(void 0!==d)h=typeof d,"string"===h&&(e=U.exec(d))&&(d=(e[1]+1)*e[2]+parseFloat(p.css(a,b)),h="number"),null!=d&&d===d&&("number"!==h||p.cssNumber[g]||(d+="px"),K.clearCloneStyle||""!==d||0!==b.indexOf("background")||(k[b]="inherit"),
f&&"set"in f&&void 0===(d=f.set(a,d,c))||(k[b]=d));else return f&&"get"in f&&void 0!==(e=f.get(a,!1,c))?e:k[b]}},css:function(a,b,d,c){var e,h;h=p.camelCase(b);b=p.cssProps[h]||(p.cssProps[h]=E(a.style,h));(h=p.cssHooks[b]||p.cssHooks[h])&&"get"in h&&(e=h.get(a,!0,d));void 0===e&&(e=A(a,b,c));"normal"===e&&b in hb&&(e=hb[b]);return""===d||d?(a=parseFloat(e),!0===d||p.isNumeric(a)?a||0:e):e}});p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,d,c){if(d)return ub.test(p.css(a,"display"))&&
0===a.offsetWidth?p.swap(a,vb,function(){return L(a,b,c)}):L(a,b,c)},set:function(a,d,c){var e=c&&Sa(a);return G(a,d,c?X(a,b,c,"border-box"===p.css(a,"boxSizing",!1,e),e):0)}}});p.cssHooks.marginRight=F(K.reliableMarginRight,function(a,b){if(b)return p.swap(a,{display:"inline-block"},A,[a,"marginRight"])});p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(d){var c=0,e={};for(d="string"===typeof d?d.split(" "):[d];4>c;c++)e[a+za[c]+b]=d[c]||d[c-2]||d[0];return e}};
Fa.test(a)||(p.cssHooks[a+b].set=G)});p.fn.extend({css:function(a,b){return ea(this,function(a,b,d){var c,e={},h=0;if(p.isArray(b)){d=Sa(a);for(c=b.length;h<c;h++)e[b[h]]=p.css(a,b[h],!1,d);return e}return void 0!==d?p.style(a,b,d):p.css(a,b)},a,b,1<arguments.length)},show:function(){return P(this,!0)},hide:function(){return P(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){Ca(this)?p(this).show():p(this).hide()})}});p.Tween=x;x.prototype={constructor:x,
init:function(a,b,d,c,e,h){this.elem=a;this.prop=d;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=c;this.unit=h||(p.cssNumber[d]?"":"px")},cur:function(){var a=x.propHooks[this.prop];return a&&a.get?a.get(this):x.propHooks._default.get(this)},run:function(a){var b,d=x.propHooks[this.prop];this.pos=this.options.duration?b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,
this.now,this);d&&d.set?d.set(this):x.propHooks._default.set(this);return this}};x.prototype.init.prototype=x.prototype;x.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=p.css(a.elem,a.prop,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(p.fx.step[a.prop])p.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[p.cssProps[a.prop]]||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};x.propHooks.scrollTop=
x.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};p.fx=x.prototype.init;p.fx.step={};var Da,Wa,Mb=/^(?:toggle|show|hide)$/,B=new RegExp("^(?:([+-])=|)("+oa+")([a-z%]*)$","i"),Z=/queueHooks$/,Q=[function(a,b,d){var c,e,h,f,g,k,l=this,u={},t=a.style,J=a.nodeType&&Ca(a),n=H.get(a,"fxshow");d.queue||(f=p._queueHooks(a,"fx"),null==f.unqueued&&(f.unqueued=0,g=f.empty.fire,
f.empty.fire=function(){f.unqueued||g()}),f.unqueued++,l.always(function(){l.always(function(){f.unqueued--;p.queue(a,"fx").length||f.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(d.overflow=[t.overflow,t.overflowX,t.overflowY],k=p.css(a,"display"),e="none"===k?H.get(a,"olddisplay")||C(a.nodeName):k,"inline"===e&&"none"===p.css(a,"float")&&(t.display="inline-block"));d.overflow&&(t.overflow="hidden",l.always(function(){t.overflow=d.overflow[0];t.overflowX=d.overflow[1];t.overflowY=
d.overflow[2]}));for(c in b)if(e=b[c],Mb.exec(e)){delete b[c];h=h||"toggle"===e;if(e===(J?"hide":"show"))if("show"===e&&n&&void 0!==n[c])J=!0;else continue;u[c]=n&&n[c]||p.style(a,c)}else k=void 0;if(p.isEmptyObject(u))"inline"===("none"===k?C(a.nodeName):k)&&(t.display=k);else for(c in n?"hidden"in n&&(J=n.hidden):n=H.access(a,"fxshow",{}),h&&(n.hidden=!J),J?p(a).show():l.done(function(){p(a).hide()}),l.done(function(){var b;H.remove(a,"fxshow");for(b in u)p.style(a,b,u[b])}),u)b=ba(J?n[c]:0,c,l),
c in n||(n[c]=b.start,J&&(b.end=b.start,b.start="width"===c||"height"===c?1:0))}],I={"*":[function(a,b){var d=this.createTween(a,b),c=d.cur(),e=B.exec(b),h=e&&e[3]||(p.cssNumber[a]?"":"px"),f=(p.cssNumber[a]||"px"!==h&&+c)&&B.exec(p.css(d.elem,a)),g=1,k=20;if(f&&f[3]!==h){h=h||f[3];e=e||[];f=+c||1;do g=g||".5",f/=g,p.style(d.elem,a,f+h);while(g!==(g=d.cur()/c)&&1!==g&&--k)}e&&(f=d.start=+f||+c||0,d.unit=h,d.end=e[1]?f+(e[1]+1)*e[2]:+e[2]);return d}]};p.Animation=p.extend(ca,{tweener:function(a,b){p.isFunction(a)?
(b=a,a=["*"]):a=a.split(" ");for(var d,c=0,e=a.length;c<e;c++)d=a[c],I[d]=I[d]||[],I[d].unshift(b)},prefilter:function(a,b){b?Q.unshift(a):Q.push(a)}});p.speed=function(a,b,d){var c=a&&"object"===typeof a?p.extend({},a):{complete:d||!d&&b||p.isFunction(a)&&a,duration:a,easing:d&&b||b&&!p.isFunction(b)&&b};c.duration=p.fx.off?0:"number"===typeof c.duration?c.duration:c.duration in p.fx.speeds?p.fx.speeds[c.duration]:p.fx.speeds._default;if(null==c.queue||!0===c.queue)c.queue="fx";c.old=c.complete;
c.complete=function(){p.isFunction(c.old)&&c.old.call(this);c.queue&&p.dequeue(this,c.queue)};return c};p.fn.extend({fadeTo:function(a,b,d,c){return this.filter(Ca).css("opacity",0).show().end().animate({opacity:b},a,d,c)},animate:function(a,b,d,c){var e=p.isEmptyObject(a),h=p.speed(b,d,c);b=function(){var b=ca(this,p.extend({},a),h);(e||H.get(this,"finish"))&&b.stop(!0)};b.finish=b;return e||!1===h.queue?this.each(b):this.queue(h.queue,b)},stop:function(a,b,d){var c=function(a){var b=a.stop;delete a.stop;
b(d)};"string"!==typeof a&&(d=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",h=p.timers,f=H.get(this);if(e)f[e]&&f[e].stop&&c(f[e]);else for(e in f)f[e]&&f[e].stop&&Z.test(e)&&c(f[e]);for(e=h.length;e--;)h[e].elem!==this||null!=a&&h[e].queue!==a||(h[e].anim.stop(d),b=!1,h.splice(e,1));!b&&d||p.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,d=H.get(this),c=d[a+"queue"];b=d[a+"queueHooks"];
var e=p.timers,h=c?c.length:0;d.finish=!0;p.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=e.length;b--;)e[b].elem===this&&e[b].queue===a&&(e[b].anim.stop(!0),e.splice(b,1));for(b=0;b<h;b++)c[b]&&c[b].finish&&c[b].finish.call(this);delete d.finish})}});p.each(["toggle","show","hide"],function(a,b){var d=p.fn[b];p.fn[b]=function(a,c,e){return null==a||"boolean"===typeof a?d.apply(this,arguments):this.animate(O(b,!0),a,c,e)}});p.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),
fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,d,c){return this.animate(b,a,d,c)}});p.timers=[];p.fx.tick=function(){var a,b=0,d=p.timers;for(Da=p.now();b<d.length;b++)a=d[b],a()||d[b]!==a||d.splice(b--,1);d.length||p.fx.stop();Da=void 0};p.fx.timer=function(a){p.timers.push(a);a()?p.fx.start():p.timers.pop()};p.fx.interval=13;p.fx.start=function(){Wa||(Wa=setInterval(p.fx.tick,p.fx.interval))};p.fx.stop=function(){clearInterval(Wa);
Wa=null};p.fx.speeds={slow:600,fast:200,_default:400};p.fn.delay=function(a,b){a=p.fx?p.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,d){var c=setTimeout(b,a);d.stop=function(){clearTimeout(c)}})};(function(){var a=N.createElement("input"),b=N.createElement("select"),d=b.appendChild(N.createElement("option"));a.type="checkbox";K.checkOn=""!==a.value;K.optSelected=d.selected;b.disabled=!0;K.optDisabled=!d.disabled;a=N.createElement("input");a.value="t";a.type="radio";K.radioValue="t"===a.value})();
var S,Ja=p.expr.attrHandle;p.fn.extend({attr:function(a,b){return ea(this,p.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})}});p.extend({attr:function(a,b,d){var c,e,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h){if("undefined"===typeof a.getAttribute)return p.prop(a,b,d);1===h&&p.isXMLDoc(a)||(b=b.toLowerCase(),c=p.attrHooks[b]||(p.expr.match.bool.test(b)?S:void 0));if(void 0!==d)if(null===d)p.removeAttr(a,b);else{if(c&&"set"in c&&void 0!==(e=c.set(a,
d,b)))return e;a.setAttribute(b,d+"");return d}else{if(c&&"get"in c&&null!==(e=c.get(a,b)))return e;e=p.find.attr(a,b);return null==e?void 0:e}}},removeAttr:function(a,b){var d,c,e=0,h=b&&b.match(fa);if(h&&1===a.nodeType)for(;d=h[e++];)c=p.propFix[d]||d,p.expr.match.bool.test(d)&&(a[c]=!1),a.removeAttribute(d)},attrHooks:{type:{set:function(a,b){if(!K.radioValue&&"radio"===b&&p.nodeName(a,"input")){var d=a.value;a.setAttribute("type",b);d&&(a.value=d);return b}}}}});S={set:function(a,b,d){!1===b?
p.removeAttr(a,d):a.setAttribute(d,d);return d}};p.each(p.expr.match.bool.source.match(/\w+/g),function(a,b){var d=Ja[b]||p.find.attr;Ja[b]=function(a,b,c){var e,h;c||(h=Ja[b],Ja[b]=e,e=null!=d(a,b,c)?b.toLowerCase():null,Ja[b]=h);return e}});var Nb=/^(?:input|select|textarea|button)$/i;p.fn.extend({prop:function(a,b){return ea(this,p.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[p.propFix[a]||a]})}});p.extend({propFix:{"for":"htmlFor","class":"className"},
prop:function(a,b,d){var c,e,h;h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h){if(h=1!==h||!p.isXMLDoc(a))b=p.propFix[b]||b,e=p.propHooks[b];return void 0!==d?e&&"set"in e&&void 0!==(c=e.set(a,d,b))?c:a[b]=d:e&&"get"in e&&null!==(c=e.get(a,b))?c:a[b]}},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||Nb.test(a.nodeName)||a.href?a.tabIndex:-1}}}});K.optSelected||(p.propHooks.selected={get:function(a){(a=a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null}});p.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){p.propFix[this.toLowerCase()]=this});var Ma=/[\t\r\n\f]/g;p.fn.extend({addClass:function(a){var b,d,c,e,h;b="string"===typeof a&&a;var f=0,g=this.length;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(fa)||[];f<g;f++)if(d=this[f],c=1===d.nodeType&&(d.className?(" "+d.className+" ").replace(Ma," "):" ")){for(h=0;e=b[h++];)0>c.indexOf(" "+e+" ")&&(c+=e+" ");c=p.trim(c);d.className!==c&&(d.className=c)}return this},
removeClass:function(a){var b,d,c,e,h;b=0===arguments.length||"string"===typeof a&&a;var f=0,g=this.length;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(fa)||[];f<g;f++)if(d=this[f],c=1===d.nodeType&&(d.className?(" "+d.className+" ").replace(Ma," "):"")){for(h=0;e=b[h++];)for(;0<=c.indexOf(" "+e+" ");)c=c.replace(" "+e+" "," ");c=a?p.trim(c):"";d.className!==c&&(d.className=c)}return this},toggleClass:function(a,b){var d=
typeof a;return"boolean"===typeof b&&"string"===d?b?this.addClass(a):this.removeClass(a):p.isFunction(a)?this.each(function(d){p(this).toggleClass(a.call(this,d,this.className,b),b)}):this.each(function(){if("string"===d)for(var b,c=0,e=p(this),h=a.match(fa)||[];b=h[c++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else if("undefined"===d||"boolean"===d)this.className&&H.set(this,"__className__",this.className),this.className=this.className||!1===a?"":H.get(this,"__className__")||""})},hasClass:function(a){a=
" "+a+" ";for(var b=0,d=this.length;b<d;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Ma," ").indexOf(a))return!0;return!1}});var Sb=/\r/g;p.fn.extend({val:function(a){var b,d,c,e=this[0];if(arguments.length)return c=p.isFunction(a),this.each(function(d){1===this.nodeType&&(d=c?a.call(this,d,p(this).val()):a,null==d?d="":"number"===typeof d?d+="":p.isArray(d)&&(d=p.map(d,function(a){return null==a?"":a+""})),b=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],b&&
"set"in b&&void 0!==b.set(this,d,"value")||(this.value=d))});if(e){if((b=p.valHooks[e.type]||p.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(d=b.get(e,"value")))return d;d=e.value;return"string"===typeof d?d.replace(Sb,""):null==d?"":d}}});p.extend({valHooks:{option:{get:function(a){var b=p.find.attr(a,"value");return null!=b?b:p.trim(p.text(a))}},select:{get:function(a){for(var b,d=a.options,c=a.selectedIndex,e=(a="select-one"===a.type||0>c)?null:[],h=a?c+1:d.length,f=0>c?h:a?c:0;f<h;f++)if(b=
d[f],!(!b.selected&&f!==c||(K.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&p.nodeName(b.parentNode,"optgroup"))){b=p(b).val();if(a)return b;e.push(b)}return e},set:function(a,b){for(var d,c,e=a.options,h=p.makeArray(b),f=e.length;f--;)if(c=e[f],c.selected=0<=p.inArray(c.value,h))d=!0;d||(a.selectedIndex=-1);return h}}}});p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(a,b){if(p.isArray(b))return a.checked=0<=p.inArray(p(a).val(),b)}};K.checkOn||
(p.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,d){return 0<arguments.length?this.on(b,null,a,d):this.trigger(b)}});p.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,
b,d){return this.on(a,null,b,d)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,d,c){return this.on(b,a,d,c)},undelegate:function(a,b,d){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",d)}});var wb=p.now(),xb=/\?/;p.parseJSON=function(a){return JSON.parse(a+"")};p.parseXML=function(a){var b,d;if(!a||"string"!==typeof a)return null;try{d=new DOMParser,b=d.parseFromString(a,"text/xml")}catch(c){b=void 0}b&&!b.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+
a);return b};var Ba,ga,Ob=/#.*$/,yb=/([?&])_=[^&]*/,zb=/^(.*?):[ \t]*([^\r\n]*)$/mg,Pb=/^(?:GET|HEAD)$/,ta=/^\/\//,Na=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ka={},bb={},ib="*/".concat("*");try{ga=location.href}catch(pa){ga=N.createElement("a"),ga.href="",ga=ga.href}Ba=Na.exec(ga.toLowerCase())||[];p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ga,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ba[1]),global:!0,processData:!0,async:!0,
contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ib,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?ra(ra(a,p.ajaxSettings),b):ra(p.ajaxSettings,
a)},ajaxPrefilter:qa(Ka),ajaxTransport:qa(bb),ajax:function(a,b){function d(a,b,u,f){var k,m,y,w;w=b;if(2!==r){r=2;g&&clearTimeout(g);c=void 0;h=f||"";z.readyState=0<a?4:0;f=200<=a&&300>a||304===a;if(u){y=t;for(var Ea=z,xa,ya,E,D,C=y.contents,Ga=y.dataTypes;"*"===Ga[0];)Ga.shift(),void 0===xa&&(xa=y.mimeType||Ea.getResponseHeader("Content-Type"));if(xa)for(ya in C)if(C[ya]&&C[ya].test(xa)){Ga.unshift(ya);break}if(Ga[0]in u)E=Ga[0];else{for(ya in u){if(!Ga[0]||y.converters[ya+" "+Ga[0]]){E=ya;break}D||
(D=ya)}E=E||D}E?(E!==Ga[0]&&Ga.unshift(E),y=u[E]):y=void 0}a:{u=t;xa=y;ya=z;E=f;var G,A,x,Ea={},C=u.dataTypes.slice();if(C[1])for(A in u.converters)Ea[A.toLowerCase()]=u.converters[A];for(D=C.shift();D;)if(u.responseFields[D]&&(ya[u.responseFields[D]]=xa),!x&&E&&u.dataFilter&&(xa=u.dataFilter(xa,u.dataType)),x=D,D=C.shift())if("*"===D)D=x;else if("*"!==x&&x!==D){A=Ea[x+" "+D]||Ea["* "+D];if(!A)for(G in Ea)if(y=G.split(" "),y[1]===D&&(A=Ea[x+" "+y[0]]||Ea["* "+y[0]])){!0===A?A=Ea[G]:!0!==Ea[G]&&(D=
y[0],C.unshift(y[1]));break}if(!0!==A)if(A&&u["throws"])xa=A(xa);else try{xa=A(xa)}catch(F){y={state:"parsererror",error:A?F:"No conversion from "+x+" to "+D};break a}}y={state:"success",data:xa}}if(f)t.ifModified&&((w=z.getResponseHeader("Last-Modified"))&&(p.lastModified[e]=w),(w=z.getResponseHeader("etag"))&&(p.etag[e]=w)),204===a||"HEAD"===t.type?w="nocontent":304===a?w="notmodified":(w=y.state,k=y.data,m=y.error,f=!m);else if(m=w,a||!w)w="error",0>a&&(a=0);z.status=a;z.statusText=(b||w)+"";f?
s.resolveWith(J,[k,w,z]):s.rejectWith(J,[z,w,m]);z.statusCode(v);v=void 0;l&&n.trigger(f?"ajaxSuccess":"ajaxError",[z,t,f?k:m]);q.fireWith(J,[z,w]);l&&(n.trigger("ajaxComplete",[z,t]),--p.active||p.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);b=b||{};var c,e,h,f,g,k,l,u,t=p.ajaxSetup({},b),J=t.context||t,n=t.context&&(J.nodeType||J.jquery)?p(J):p.event,s=p.Deferred(),q=p.Callbacks("once memory"),v=t.statusCode||{},m={},y={},r=0,w="canceled",z={readyState:0,getResponseHeader:function(a){var b;
if(2===r){if(!f)for(f={};b=zb.exec(h);)f[b[1].toLowerCase()]=b[2];b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===r?h:null},setRequestHeader:function(a,b){var d=a.toLowerCase();r||(a=y[d]=y[d]||a,m[a]=b);return this},overrideMimeType:function(a){r||(t.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>r)for(b in a)v[b]=[v[b],a[b]];else z.always(a[z.status]);return this},abort:function(a){a=a||w;c&&c.abort(a);d(0,a);return this}};s.promise(z).complete=
q.add;z.success=z.done;z.error=z.fail;t.url=((a||t.url||ga)+"").replace(Ob,"").replace(ta,Ba[1]+"//");t.type=b.method||b.type||t.method||t.type;t.dataTypes=p.trim(t.dataType||"*").toLowerCase().match(fa)||[""];null==t.crossDomain&&(k=Na.exec(t.url.toLowerCase()),t.crossDomain=!(!k||k[1]===Ba[1]&&k[2]===Ba[2]&&(k[3]||("http:"===k[1]?"80":"443"))===(Ba[3]||("http:"===Ba[1]?"80":"443"))));t.data&&t.processData&&"string"!==typeof t.data&&(t.data=p.param(t.data,t.traditional));Y(Ka,t,b,z);if(2===r)return z;
(l=t.global)&&0===p.active++&&p.event.trigger("ajaxStart");t.type=t.type.toUpperCase();t.hasContent=!Pb.test(t.type);e=t.url;t.hasContent||(t.data&&(e=t.url+=(xb.test(e)?"&":"?")+t.data,delete t.data),!1===t.cache&&(t.url=yb.test(e)?e.replace(yb,"$1_="+wb++):e+(xb.test(e)?"&":"?")+"_="+wb++));t.ifModified&&(p.lastModified[e]&&z.setRequestHeader("If-Modified-Since",p.lastModified[e]),p.etag[e]&&z.setRequestHeader("If-None-Match",p.etag[e]));(t.data&&t.hasContent&&!1!==t.contentType||b.contentType)&&
z.setRequestHeader("Content-Type",t.contentType);z.setRequestHeader("Accept",t.dataTypes[0]&&t.accepts[t.dataTypes[0]]?t.accepts[t.dataTypes[0]]+("*"!==t.dataTypes[0]?", "+ib+"; q=0.01":""):t.accepts["*"]);for(u in t.headers)z.setRequestHeader(u,t.headers[u]);if(t.beforeSend&&(!1===t.beforeSend.call(J,z,t)||2===r))return z.abort();w="abort";for(u in{success:1,error:1,complete:1})z[u](t[u]);if(c=Y(bb,t,b,z)){z.readyState=1;l&&n.trigger("ajaxSend",[z,t]);t.async&&0<t.timeout&&(g=setTimeout(function(){z.abort("timeout")},
t.timeout));try{r=1,c.send(m,d)}catch(ya){if(2>r)d(-1,ya);else throw ya;}}else d(-1,"No Transport");return z},getJSON:function(a,b,d){return p.get(a,b,d,"json")},getScript:function(a,b){return p.get(a,void 0,b,"script")}});p.each(["get","post"],function(a,b){p[b]=function(a,d,c,e){p.isFunction(d)&&(e=e||c,c=d,d=void 0);return p.ajax({url:a,type:b,dataType:e,data:d,success:c})}});p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,
a)}});p._evalUrl=function(a){return p.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};p.fn.extend({wrapAll:function(a){var b;if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});this[0]&&(b=p(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this));return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,
b))}):this.each(function(){var b=p(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(d){p(this).wrapAll(b?a.call(this,d):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}});p.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight};p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)};var Xa=/%20/g,La=/\[\]$/,Ya=
/\r?\n/g,Tb=/^(?:submit|button|image|reset|file)$/i,Ub=/^(?:input|select|textarea|keygen)/i;p.param=function(a,b){var d,c=[],e=function(a,b){b=p.isFunction(b)?b():null==b?"":b;c[c.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){e(this.name,this.value)});else for(d in a)na(d,a[d],b,e);return c.join("&").replace(Xa,"+")};p.fn.extend({serialize:function(){return p.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){var a=p.prop(this,"elements");return a?p.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!p(this).is(":disabled")&&Ub.test(this.nodeName)&&!Tb.test(a)&&(this.checked||!qb.test(a))}).map(function(a,b){var d=p(this).val();return null==d?null:p.isArray(d)?p.map(d,function(a){return{name:b.name,value:a.replace(Ya,"\r\n")}}):{name:b.name,value:d.replace(Ya,"\r\n")}}).get()}});p.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};
var Qb=0,aa={},Vb={0:200,1223:204},Za=p.ajaxSettings.xhr();if(c.ActiveXObject)p(c).on("unload",function(){for(var a in aa)aa[a]()});K.cors=!!Za&&"withCredentials"in Za;K.ajax=Za=!!Za;p.ajaxTransport(function(a){var b;if(K.cors||Za&&!a.crossDomain)return{send:function(d,c){var e,h=a.xhr(),f=++Qb;h.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(e in a.xhrFields)h[e]=a.xhrFields[e];a.mimeType&&h.overrideMimeType&&h.overrideMimeType(a.mimeType);a.crossDomain||d["X-Requested-With"]||
(d["X-Requested-With"]="XMLHttpRequest");for(e in d)h.setRequestHeader(e,d[e]);b=function(a){return function(){b&&(delete aa[f],b=h.onload=h.onerror=null,"abort"===a?h.abort():"error"===a?c(h.status,h.statusText):c(Vb[h.status]||h.status,h.statusText,"string"===typeof h.responseText?{text:h.responseText}:void 0,h.getAllResponseHeaders()))}};h.onload=b();h.onerror=b("error");b=aa[f]=b("abort");try{h.send(a.hasContent&&a.data||null)}catch(g){if(b)throw g;}},abort:function(){b&&b()}}});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){p.globalEval(a);return a}}});p.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});p.ajaxTransport("script",function(a){if(a.crossDomain){var b,d;return{send:function(c,e){b=p("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",d=function(a){b.remove();d=null;a&&e("error"===a.type?404:200,a.type)});N.head.appendChild(b[0])},abort:function(){d&&d()}}}});
var Ab=[],$a=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ab.pop()||p.expando+"_"+wb++;this[a]=!0;return a}});p.ajaxPrefilter("json jsonp",function(a,b,d){var e,h,f,g=!1!==a.jsonp&&($a.test(a.url)?"url":"string"===typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&$a.test(a.data)&&"data");if(g||"jsonp"===a.dataTypes[0])return e=a.jsonpCallback=p.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g?a[g]=a[g].replace($a,"$1"+
e):!1!==a.jsonp&&(a.url+=(xb.test(a.url)?"&":"?")+a.jsonp+"="+e),a.converters["script json"]=function(){f||p.error(e+" was not called");return f[0]},a.dataTypes[0]="json",h=c[e],c[e]=function(){f=arguments},d.always(function(){c[e]=h;a[e]&&(a.jsonpCallback=b.jsonpCallback,Ab.push(e));f&&p.isFunction(h)&&h(f[0]);f=h=void 0}),"script"});p.parseHTML=function(a,b,d){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(d=b,b=!1);b=b||N;var c=pb.exec(a);d=!d&&[];if(c)return[b.createElement(c[1])];
c=p.buildFragment([a],b,d);d&&d.length&&p(d).remove();return p.merge([],c.childNodes)};var jb=p.fn.load;p.fn.load=function(a,b,d){if("string"!==typeof a&&jb)return jb.apply(this,arguments);var c,e,h,f=this,g=a.indexOf(" ");0<=g&&(c=p.trim(a.slice(g)),a=a.slice(0,g));p.isFunction(b)?(d=b,b=void 0):b&&"object"===typeof b&&(e="POST");0<f.length&&p.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){h=arguments;f.html(c?p("<div>").append(p.parseHTML(a)).find(c):a)}).complete(d&&function(a,b){f.each(d,
h||[a.responseText,b,a])});return this};p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length};var kb=c.document.documentElement;p.offset={setOffset:function(a,b,d){var c,e,h,f=p.css(a,"position"),g=p(a),k={};"static"===f&&(a.style.position="relative");h=g.offset();e=p.css(a,"top");c=p.css(a,"left");("absolute"===f||"fixed"===f)&&-1<(e+c).indexOf("auto")?(c=g.position(),e=c.top,c=c.left):(e=parseFloat(e)||0,c=parseFloat(c)||0);p.isFunction(b)&&(b=b.call(a,
d,h));null!=b.top&&(k.top=b.top-h.top+e);null!=b.left&&(k.left=b.left-h.left+c);"using"in b?b.using.call(a,k):g.css(k)}};p.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){p.offset.setOffset(this,a,b)});var b,d;d=this[0];var c={top:0,left:0},e=d&&d.ownerDocument;if(e){b=e.documentElement;if(!p.contains(b,d))return c;"undefined"!==typeof d.getBoundingClientRect&&(c=d.getBoundingClientRect());d=V(e);return{top:c.top+d.pageYOffset-b.clientTop,left:c.left+
d.pageXOffset-b.clientLeft}}},position:function(){if(this[0]){var a,b,d=this[0],c={top:0,left:0};"fixed"===p.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),p.nodeName(a[0],"html")||(c=a.offset()),c.top+=p.css(a[0],"borderTopWidth",!0),c.left+=p.css(a[0],"borderLeftWidth",!0));return{top:b.top-c.top-p.css(d,"marginTop",!0),left:b.left-c.left-p.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||kb;a&&!p.nodeName(a,
"html")&&"static"===p.css(a,"position");)a=a.offsetParent;return a||kb})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var d="pageYOffset"===b;p.fn[a]=function(e){return ea(this,function(a,e,h){var f=V(a);if(void 0===h)return f?f[b]:a[e];f?f.scrollTo(d?c.pageXOffset:h,d?h:c.pageYOffset):a[e]=h},a,e,arguments.length,null)}});p.each(["top","left"],function(a,b){p.cssHooks[b]=F(K.pixelPosition,function(a,d){if(d)return d=A(a,b),ma.test(d)?p(a).position()[b]+"px":d})});p.each({Height:"height",
Width:"width"},function(a,b){p.each({padding:"inner"+a,content:b,"":"outer"+a},function(d,c){p.fn[c]=function(c,e){var h=arguments.length&&(d||"boolean"!==typeof c),f=d||(!0===c||!0===e?"margin":"border");return ea(this,function(b,d,c){return p.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(d=b.documentElement,Math.max(b.body["scroll"+a],d["scroll"+a],b.body["offset"+a],d["offset"+a],d["client"+a])):void 0===c?p.css(b,d,f):p.style(b,d,c,f)},b,h?c:void 0,h,null)}})});p.fn.size=
function(){return this.length};p.fn.andSelf=p.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return p});var lb=c.jQuery,Wb=c.$;p.noConflict=function(a){c.$===p&&(c.$=Wb);a&&c.jQuery===p&&(c.jQuery=lb);return p};"undefined"===typeof m&&(c.jQuery=c.$=p);return p});(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(jQuery)})(function(c){function m(b,e){var a,d;a=b.nodeName.toLowerCase();if("area"===a){a=b.parentNode;d=a.name;if(!b.href||!d||"map"!==a.nodeName.toLowerCase())return!1;a=c("img[usemap='#"+d+"']")[0];return!!a&&g(a)}return(/input|select|textarea|button|object/.test(a)?!b.disabled:"a"===a?b.href||e:e)&&g(b)}function g(b){return c.expr.filters.visible(b)&&!c(b).parents().addBack().filter(function(){return"hidden"===c.css(this,
"visibility")}).length}c.ui=c.ui||{};c.extend(c.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});c.fn.extend({scrollParent:function(b){var e=this.css("position"),a="absolute"===e,d=b?/(auto|scroll|hidden)/:/(auto|scroll)/;b=this.parents().filter(function(){var b=c(this);return a&&"static"===b.css("position")?!1:d.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);
return"fixed"!==e&&b.length?b:c(this[0].ownerDocument||document)},uniqueId:function(){var b=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++b)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&c(this).removeAttr("id")})}});c.extend(c.expr[":"],{data:c.expr.createPseudo?c.expr.createPseudo(function(b){return function(e){return!!c.data(e,b)}}):function(b,e,a){return!!c.data(b,a[3])},focusable:function(b){return m(b,!isNaN(c.attr(b,
"tabindex")))},tabbable:function(b){var e=c.attr(b,"tabindex"),a=isNaN(e);return(a||0<=e)&&m(b,!a)}});c("<a>").outerWidth(1).jquery||c.each(["Width","Height"],function(b,e){function a(a,b,e,h){c.each(d,function(){b-=parseFloat(c.css(a,"padding"+this))||0;e&&(b-=parseFloat(c.css(a,"border"+this+"Width"))||0);h&&(b-=parseFloat(c.css(a,"margin"+this))||0)});return b}var d="Width"===e?["Left","Right"]:["Top","Bottom"],h=e.toLowerCase(),f={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,
outerHeight:c.fn.outerHeight};c.fn["inner"+e]=function(b){return void 0===b?f["inner"+e].call(this):this.each(function(){c(this).css(h,a(this,b)+"px")})};c.fn["outer"+e]=function(b,d){return"number"!==typeof b?f["outer"+e].call(this,b):this.each(function(){c(this).css(h,a(this,b,!0,d)+"px")})}});c.fn.addBack||(c.fn.addBack=function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))});c("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(c.fn.removeData=function(b){return function(e){return arguments.length?
b.call(this,c.camelCase(e)):b.call(this)}}(c.fn.removeData));c.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());c.fn.extend({focus:function(b){return function(e,a){return"number"===typeof e?this.each(function(){var b=this;setTimeout(function(){c(b).focus();a&&a.call(b)},e)}):b.apply(this,arguments)}}(c.fn.focus),disableSelection:function(){var b="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(b+".ui-disableSelection",function(b){b.preventDefault()})}}(),
enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length){b=c(this[0]);for(var e;b.length&&b[0]!==document;){e=b.css("position");if("absolute"===e||"relative"===e||"fixed"===e)if(e=parseInt(b.css("zIndex"),10),!isNaN(e)&&0!==e)return e;b=b.parent()}}return 0}});c.ui.plugin={add:function(b,e,a){var d;b=c.ui[b].prototype;for(d in a)b.plugins[d]=b.plugins[d]||[],b.plugins[d].push([e,a[d]])},call:function(b,c,a,
d){if((c=b.plugins[c])&&(d||b.element[0].parentNode&&11!==b.element[0].parentNode.nodeType))for(d=0;d<c.length;d++)b.options[c[d][0]]&&c[d][1].apply(b.element,a)}};var f=0,q=Array.prototype.slice;c.cleanData=function(b){return function(e){var a,d,h;for(h=0;null!=(d=e[h]);h++)try{(a=c._data(d,"events"))&&a.remove&&c(d).triggerHandler("remove")}catch(f){}b(e)}}(c.cleanData);c.widget=function(b,e,a){var d,h,f,g,k={},l=b.split(".")[0];b=b.split(".")[1];d=l+"-"+b;a||(a=e,e=c.Widget);c.expr[":"][d.toLowerCase()]=
function(a){return!!c.data(a,d)};c[l]=c[l]||{};h=c[l][b];f=c[l][b]=function(a,b){if(!this._createWidget)return new f(a,b);arguments.length&&this._createWidget(a,b)};c.extend(f,h,{version:a.version,_proto:c.extend({},a),_childConstructors:[]});g=new e;g.options=c.widget.extend({},g.options);c.each(a,function(a,b){c.isFunction(b)?k[a]=function(){var d=function(){return e.prototype[a].apply(this,arguments)},c=function(b){return e.prototype[a].apply(this,b)};return function(){var a=this._super,e=this._superApply,
h;this._super=d;this._superApply=c;h=b.apply(this,arguments);this._super=a;this._superApply=e;return h}}():k[a]=b});f.prototype=c.widget.extend(g,{widgetEventPrefix:h?g.widgetEventPrefix||b:b},k,{constructor:f,namespace:l,widgetName:b,widgetFullName:d});h?(c.each(h._childConstructors,function(a,b){var d=b.prototype;c.widget(d.namespace+"."+d.widgetName,f,b._proto)}),delete h._childConstructors):e._childConstructors.push(f);c.widget.bridge(b,f);return f};c.widget.extend=function(b){for(var e=q.call(arguments,
1),a=0,d=e.length,h,f;a<d;a++)for(h in e[a])f=e[a][h],e[a].hasOwnProperty(h)&&void 0!==f&&(c.isPlainObject(f)?b[h]=c.isPlainObject(b[h])?c.widget.extend({},b[h],f):c.widget.extend({},f):b[h]=f);return b};c.widget.bridge=function(b,e){var a=e.prototype.widgetFullName||b;c.fn[b]=function(d){var h="string"===typeof d,f=q.call(arguments,1),g=this;d=!h&&f.length?c.widget.extend.apply(null,[d].concat(f)):d;h?this.each(function(){var e,h=c.data(this,a);if("instance"===d)return g=h,!1;if(!h)return c.error("cannot call methods on "+
b+" prior to initialization; attempted to call method '"+d+"'");if(!c.isFunction(h[d])||"_"===d.charAt(0))return c.error("no such method '"+d+"' for "+b+" widget instance");e=h[d].apply(h,f);if(e!==h&&void 0!==e)return g=e&&e.jquery?g.pushStack(e.get()):e,!1}):this.each(function(){var b=c.data(this,a);b?(b.option(d||{}),b._init&&b._init()):c.data(this,a,new e(d,this))});return g}};c.Widget=function(){};c.Widget._childConstructors=[];c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",
options:{disabled:!1,create:null},_createWidget:function(b,e){e=c(e||this.defaultElement||this)[0];this.element=c(e);this.uuid=f++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=c();this.hoverable=c();this.focusable=c();e!==this&&(c.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===e&&this.destroy()}}),this.document=c(e.style?e.ownerDocument:e.document||e),this.window=c(this.document[0].defaultView||this.document[0].parentWindow));this.options=
c.widget.extend({},this.options,this._getCreateOptions(),b);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:c.noop,_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(c.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");
this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:c.noop,widget:function(){return this.element},option:function(b,e){var a=b,d,h,f;if(0===arguments.length)return c.widget.extend({},this.options);if("string"===typeof b)if(a={},d=b.split("."),b=d.shift(),d.length){h=a[b]=c.widget.extend({},this.options[b]);for(f=0;f<d.length-1;f++)h[d[f]]=h[d[f]]||{},h=h[d[f]];b=d.pop();if(1===arguments.length)return void 0===
h[b]?null:h[b];h[b]=e}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];a[b]=e}this._setOptions(a);return this},_setOptions:function(b){for(var c in b)this._setOption(c,b[c]);return this},_setOption:function(b,c){this.options[b]=c;"disabled"===b&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!c),c&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")));return this},enable:function(){return this._setOptions({disabled:!1})},
disable:function(){return this._setOptions({disabled:!0})},_on:function(b,e,a){var d,h=this;"boolean"!==typeof b&&(a=e,e=b,b=!1);a?(e=d=c(e),this.bindings=this.bindings.add(e)):(a=e,e=this.element,d=this.widget());c.each(a,function(a,f){function g(){if(b||!0!==h.options.disabled&&!c(this).hasClass("ui-state-disabled"))return("string"===typeof f?h[f]:f).apply(h,arguments)}"string"!==typeof f&&(g.guid=f.guid=f.guid||g.guid||c.guid++);var k=a.match(/^([\w:-]*)\s*(.*)$/),l=k[1]+h.eventNamespace;(k=k[2])?
d.delegate(k,l,g):e.bind(l,g)})},_off:function(b,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;b.unbind(e).undelegate(e);this.bindings=c(this.bindings.not(b).get());this.focusable=c(this.focusable.not(b).get());this.hoverable=c(this.hoverable.not(b).get())},_delay:function(b,c){var a=this;return setTimeout(function(){return("string"===typeof b?a[b]:b).apply(a,arguments)},c||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){c(b.currentTarget).addClass("ui-state-hover")},
mouseleave:function(b){c(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){c(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){c(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,e,a){var d,h=this.options[b];a=a||{};e=c.Event(e);e.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();e.target=this.element[0];if(b=e.originalEvent)for(d in b)d in e||
(e[d]=b[d]);this.element.trigger(e,a);return!(c.isFunction(h)&&!1===h.apply(this.element[0],[e].concat(a))||e.isDefaultPrevented())}};c.each({show:"fadeIn",hide:"fadeOut"},function(b,e){c.Widget.prototype["_"+b]=function(a,d,h){"string"===typeof d&&(d={effect:d});var f,g=d?!0===d||"number"===typeof d?e:d.effect||e:b;d=d||{};"number"===typeof d&&(d={duration:d});f=!c.isEmptyObject(d);d.complete=h;d.delay&&a.delay(d.delay);if(f&&c.effects&&c.effects.effect[g])a[b](d);else if(g!==b&&a[g])a[g](d.duration,
d.easing,h);else a.queue(function(d){c(this)[b]();h&&h.call(a[0]);d()})}});var n=!1;c(document).mouseup(function(){n=!1});c.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c)}).bind("click."+this.widgetName,function(e){if(!0===c.data(e.target,b.widgetName+".preventClickEvent"))return c.removeData(e.target,b.widgetName+".preventClickEvent"),
e.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!n){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var e=this,a=1===b.which,d="string"===typeof this.options.cancel&&b.target.nodeName?c(b.target).closest(this.options.cancel).length:
!1;if(!a||d||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===c.data(b.target,this.widgetName+".preventClickEvent")&&c.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return e._mouseMove(a)};
this._mouseUpDelegate=function(a){return e._mouseUp(a)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);b.preventDefault();return n=!0}},_mouseMove:function(b){if(this._mouseMoved&&(c.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button||!b.which))return this._mouseUp(b);if(b.which||b.button)this._mouseMoved=!0;if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&
this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&c.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return n=!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-
b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});(function(){function b(a,b,d){return[parseFloat(a[0])*(m.test(a[0])?b/100:1),parseFloat(a[1])*(m.test(a[1])?d/100:1)]}function e(a){var b=a[0];return 9===b.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:c.isWindow(b)?{width:a.width(),height:a.height(),
offset:{top:a.scrollTop(),left:a.scrollLeft()}}:b.preventDefault?{width:0,height:0,offset:{top:b.pageY,left:b.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}c.ui=c.ui||{};var a,d,h=Math.max,f=Math.abs,g=Math.round,k=/left|center|right/,l=/top|center|bottom/,n=/[\+\-]\d+(\.[\d]+)?%?/,q=/^\w+/,m=/%$/,r=c.fn.position;c.position={scrollbarWidth:function(){if(void 0!==a)return a;var b,d,e=c("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");
d=e.children()[0];c("body").append(e);b=d.offsetWidth;e.css("overflow","scroll");d=d.offsetWidth;b===d&&(d=e[0].clientWidth);e.remove();return a=b-d},getScrollInfo:function(a){var b=a.isWindow||a.isDocument?"":a.element.css("overflow-x"),d=a.isWindow||a.isDocument?"":a.element.css("overflow-y"),b="scroll"===b||"auto"===b&&a.width<a.element[0].scrollWidth;return{width:"scroll"===d||"auto"===d&&a.height<a.element[0].scrollHeight?c.position.scrollbarWidth():0,height:b?c.position.scrollbarWidth():0}},
getWithinInfo:function(a){a=c(a||window);var b=c.isWindow(a[0]),d=!!a[0]&&9===a[0].nodeType;return{element:a,isWindow:b,isDocument:d,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:b||d?a.width():a.outerWidth(),height:b||d?a.height():a.outerHeight()}}};c.fn.position=function(a){if(!a||!a.of)return r.apply(this,arguments);a=c.extend({},a);var m,A,L,P,x,M,O=c(a.of),ba=c.position.getWithinInfo(a.within),ha=c.position.getScrollInfo(ba),ca=(a.collision||"flip").split(" "),
qa={};M=e(O);O[0].preventDefault&&(a.at="left top");A=M.width;L=M.height;P=M.offset;x=c.extend({},P);c.each(["my","at"],function(){var b=(a[this]||"").split(" "),d,c;1===b.length&&(b=k.test(b[0])?b.concat(["center"]):l.test(b[0])?["center"].concat(b):["center","center"]);b[0]=k.test(b[0])?b[0]:"center";b[1]=l.test(b[1])?b[1]:"center";d=n.exec(b[0]);c=n.exec(b[1]);qa[this]=[d?d[0]:0,c?c[0]:0];a[this]=[q.exec(b[0])[0],q.exec(b[1])[0]]});1===ca.length&&(ca[1]=ca[0]);"right"===a.at[0]?x.left+=A:"center"===
a.at[0]&&(x.left+=A/2);"bottom"===a.at[1]?x.top+=L:"center"===a.at[1]&&(x.top+=L/2);m=b(qa.at,A,L);x.left+=m[0];x.top+=m[1];return this.each(function(){var e,k,l=c(this),n=l.outerWidth(),q=l.outerHeight(),y=parseInt(c.css(this,"marginLeft"),10)||0,r=parseInt(c.css(this,"marginTop"),10)||0,w=n+y+(parseInt(c.css(this,"marginRight"),10)||0)+ha.width,z=q+r+(parseInt(c.css(this,"marginBottom"),10)||0)+ha.height,C=c.extend({},x),F=b(qa.my,l.outerWidth(),l.outerHeight());"right"===a.my[0]?C.left-=n:"center"===
a.my[0]&&(C.left-=n/2);"bottom"===a.my[1]?C.top-=q:"center"===a.my[1]&&(C.top-=q/2);C.left+=F[0];C.top+=F[1];d||(C.left=g(C.left),C.top=g(C.top));e={marginLeft:y,marginTop:r};c.each(["left","top"],function(b,d){if(c.ui.position[ca[b]])c.ui.position[ca[b]][d](C,{targetWidth:A,targetHeight:L,elemWidth:n,elemHeight:q,collisionPosition:e,collisionWidth:w,collisionHeight:z,offset:[m[0]+F[0],m[1]+F[1]],my:a.my,at:a.at,within:ba,elem:l})});a.using&&(k=function(b){var d=P.left-C.left,c=d+A-n,e=P.top-C.top,
g=e+L-q,k={target:{element:O,left:P.left,top:P.top,width:A,height:L},element:{element:l,left:C.left,top:C.top,width:n,height:q},horizontal:0>c?"left":0<d?"right":"center",vertical:0>g?"top":0<e?"bottom":"middle"};A<n&&f(d+c)<A&&(k.horizontal="center");L<q&&f(e+g)<L&&(k.vertical="middle");h(f(d),f(c))>h(f(e),f(g))?k.important="horizontal":k.important="vertical";a.using.call(this,b,k)});l.offset(c.extend(C,{using:k}))})};c.ui.position={fit:{left:function(a,b){var d=b.within,c=d.isWindow?d.scrollLeft:
d.offset.left,e=d.width,f=a.left-b.collisionPosition.marginLeft,d=c-f,g=f+b.collisionWidth-e-c;b.collisionWidth>e?0<d&&0>=g?(c=a.left+d+b.collisionWidth-e-c,a.left+=d-c):a.left=0<g&&0>=d?c:d>g?c+e-b.collisionWidth:c:a.left=0<d?a.left+d:0<g?a.left-g:h(a.left-f,a.left)},top:function(a,b){var d=b.within,c=d.isWindow?d.scrollTop:d.offset.top,e=b.within.height,f=a.top-b.collisionPosition.marginTop,d=c-f,g=f+b.collisionHeight-e-c;b.collisionHeight>e?0<d&&0>=g?(c=a.top+d+b.collisionHeight-e-c,a.top+=d-c):
a.top=0<g&&0>=d?c:d>g?c+e-b.collisionHeight:c:a.top=0<d?a.top+d:0<g?a.top-g:h(a.top-f,a.top)}},flip:{left:function(a,b){var d=b.within,c=d.offset.left+d.scrollLeft,e=d.width,h=d.isWindow?d.scrollLeft:d.offset.left,g=a.left-b.collisionPosition.marginLeft,d=g-h,k=g+b.collisionWidth-e-h,g="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,l="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,n=-2*b.offset[0];if(0>d){if(c=a.left+g+l+n+b.collisionWidth-e-c,0>c||c<f(d))a.left+=
g+l+n}else 0<k&&(c=a.left-b.collisionPosition.marginLeft+g+l+n-h,0<c||f(c)<k)&&(a.left+=g+l+n)},top:function(a,b){var d=b.within,c=d.offset.top+d.scrollTop,e=d.height,h=d.isWindow?d.scrollTop:d.offset.top,g=a.top-b.collisionPosition.marginTop,d=g-h,k=g+b.collisionHeight-e-h,g="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,l="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,n=-2*b.offset[1];0>d?(c=a.top+g+l+n+b.collisionHeight-e-c,a.top+g+l+n>d&&(0>c||c<f(d))&&(a.top+=
g+l+n)):0<k&&(c=a.top-b.collisionPosition.marginTop+g+l+n-h,a.top+g+l+n>k&&(0<c||f(c)<k)&&(a.top+=g+l+n))}},flipfit:{left:function(){c.ui.position.flip.left.apply(this,arguments);c.ui.position.fit.left.apply(this,arguments)},top:function(){c.ui.position.flip.top.apply(this,arguments);c.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,b,e,h,f=document.getElementsByTagName("body")[0];e=document.createElement("div");a=document.createElement(f?"div":"body");b={visibility:"hidden",width:0,
height:0,border:0,margin:0,background:"none"};f&&c.extend(b,{position:"absolute",left:"-1000px",top:"-1000px"});for(h in b)a.style[h]=b[h];a.appendChild(e);b=f||document.documentElement;b.insertBefore(a,b.firstChild);e.style.cssText="position: absolute; left: 10.7432222px;";e=c(e).offset().left;d=10<e&&11>e;a.innerHTML="";b.removeChild(a)})()})();c.widget("ui.resizable",c.ui.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",
aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(b){return parseInt(b,10)||0},_isNumber:function(b){return!isNaN(parseInt(b,10))},_hasScroll:function(b,e){if("hidden"===c(b).css("overflow"))return!1;var a=e&&"left"===e?"scrollLeft":"scrollTop",d=!1;if(0<b[a])return!0;b[a]=1;d=0<b[a];b[a]=0;return d},_create:function(){var b,e,a,d,h,f=this,g=this.options;
this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!g.aspectRatio,aspectRatio:g.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:g.helper||g.ghost||g.animate?g.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(c("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=
this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=g.handles||(c(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},e=0;e<b.length;e++)a=c.trim(b[e]),h="ui-resizable-"+a,d=c("<div class='ui-resizable-handle "+h+"'></div>"),d.css({zIndex:g.zIndex}),"se"===a&&d.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[a]=".ui-resizable-"+a,this.element.append(d);this._renderAxis=function(a){var b,d,e;a=a||this.element;for(b in this.handles)this.handles[b].constructor===
String&&(this.handles[b]=this.element.children(this.handles[b]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=c(this.handles[b],this.element),e=/sw|ne|nw|se|n|s/.test(b)?d.outerHeight():d.outerWidth(),d=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join(""),a.css(d,e),this._proportionallyResize()),c(this.handles[b])};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",
this.element).disableSelection();this._handles.mouseover(function(){f.resizing||(this.className&&(d=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),f.axis=d&&d[1]?d[1]:"se")});g.autoHide&&(this._handles.hide(),c(this.element).addClass("ui-resizable-autohide").mouseenter(function(){g.disabled||(c(this).removeClass("ui-resizable-autohide"),f._handles.show())}).mouseleave(function(){g.disabled||f.resizing||(c(this).addClass("ui-resizable-autohide"),f._handles.hide())}));this._mouseInit()},
_destroy:function(){this._mouseDestroy();var b,e=function(a){c(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};this.elementIsWrapper&&(e(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove());this.originalElement.css("resize",this.originalResizeStyle);
e(this.originalElement);return this},_mouseCapture:function(b){var e,a,d=!1;for(e in this.handles)if(a=c(this.handles[e])[0],a===b.target||c.contains(a,b.target))d=!0;return!this.options.disabled&&d},_mouseStart:function(b){var e,a,d=this.options,h=this.element;this.resizing=!0;this._renderProxy();e=this._num(this.helper.css("left"));a=this._num(this.helper.css("top"));d.containment&&(e+=c(d.containment).scrollLeft()||0,a+=c(d.containment).scrollTop()||0);this.offset=this.helper.offset();this.position=
{left:e,top:a};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:h.width(),height:h.height()};this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()};this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()};this.originalPosition={left:e,top:a};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio="number"===typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/
this.originalSize.height||1;e=c(".ui-resizable-"+this.axis).css("cursor");c("body").css("cursor","auto"===e?this.axis+"-resize":e);h.addClass("ui-resizable-resizing");this._propagate("start",b);return!0},_mouseDrag:function(b){var e,a=this.originalMousePosition;e=b.pageX-a.left||0;var a=b.pageY-a.top||0,d=this._change[this.axis];this._updatePrevProperties();if(!d)return!1;e=d.apply(this,[b,e,a]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)e=this._updateRatio(e,b);e=
this._respectSize(e,b);this._updateCache(e);this._propagate("resize",b);e=this._applyChanges();!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();c.isEmptyObject(e)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges());return!1},_mouseStop:function(b){this.resizing=!1;var e,a,d,h=this.options;this._helper&&(e=this._proportionallyResizeElements,e=(a=e.length&&/textarea/i.test(e[0].nodeName))&&this._hasScroll(e[0],"left")?0:this.sizeDiff.height,
a=a?0:this.sizeDiff.width,a={width:this.helper.width()-a,height:this.helper.height()-e},e=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,d=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,h.animate||this.element.css(c.extend(a,{top:d,left:e})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!h.animate&&this._proportionallyResize());c("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");
this._propagate("stop",b);this._helper&&this.helper.remove();return!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var b={};this.position.top!==this.prevPosition.top&&(b.top=this.position.top+"px");this.position.left!==this.prevPosition.left&&(b.left=this.position.left+"px");this.size.width!==this.prevSize.width&&(b.width=this.size.width+"px");this.size.height!==
this.prevSize.height&&(b.height=this.size.height+"px");this.helper.css(b);return b},_updateVirtualBoundaries:function(b){var c,a,d,h;h=this.options;h={minWidth:this._isNumber(h.minWidth)?h.minWidth:0,maxWidth:this._isNumber(h.maxWidth)?h.maxWidth:Infinity,minHeight:this._isNumber(h.minHeight)?h.minHeight:0,maxHeight:this._isNumber(h.maxHeight)?h.maxHeight:Infinity};if(this._aspectRatio||b)b=h.minHeight*this.aspectRatio,a=h.minWidth/this.aspectRatio,c=h.maxHeight*this.aspectRatio,d=h.maxWidth/this.aspectRatio,
b>h.minWidth&&(h.minWidth=b),a>h.minHeight&&(h.minHeight=a),c<h.maxWidth&&(h.maxWidth=c),d<h.maxHeight&&(h.maxHeight=d);this._vBoundaries=h},_updateCache:function(b){this.offset=this.helper.offset();this._isNumber(b.left)&&(this.position.left=b.left);this._isNumber(b.top)&&(this.position.top=b.top);this._isNumber(b.height)&&(this.size.height=b.height);this._isNumber(b.width)&&(this.size.width=b.width)},_updateRatio:function(b){var c=this.position,a=this.size,d=this.axis;this._isNumber(b.height)?b.width=
b.height*this.aspectRatio:this._isNumber(b.width)&&(b.height=b.width/this.aspectRatio);"sw"===d&&(b.left=c.left+(a.width-b.width),b.top=null);"nw"===d&&(b.top=c.top+(a.height-b.height),b.left=c.left+(a.width-b.width));return b},_respectSize:function(b){var c=this._vBoundaries,a=this.axis,d=this._isNumber(b.width)&&c.maxWidth&&c.maxWidth<b.width,h=this._isNumber(b.height)&&c.maxHeight&&c.maxHeight<b.height,f=this._isNumber(b.width)&&c.minWidth&&c.minWidth>b.width,g=this._isNumber(b.height)&&c.minHeight&&
c.minHeight>b.height,k=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,n=/sw|nw|w/.test(a),a=/nw|ne|n/.test(a);f&&(b.width=c.minWidth);g&&(b.height=c.minHeight);d&&(b.width=c.maxWidth);h&&(b.height=c.maxHeight);f&&n&&(b.left=k-c.minWidth);d&&n&&(b.left=k-c.maxWidth);g&&a&&(b.top=l-c.minHeight);h&&a&&(b.top=l-c.maxHeight);b.width||b.height||b.left||!b.top?b.width||b.height||b.top||!b.left||(b.left=null):b.top=null;return b},_getPaddingPlusBorderDimensions:function(b){var c=
0,a=[],d=[b.css("borderTopWidth"),b.css("borderRightWidth"),b.css("borderBottomWidth"),b.css("borderLeftWidth")];for(b=[b.css("paddingTop"),b.css("paddingRight"),b.css("paddingBottom"),b.css("paddingLeft")];4>c;c++)a[c]=parseInt(d[c],10)||0,a[c]+=parseInt(b[c],10)||0;return{height:a[0]+a[2],width:a[1]+a[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b,c=0,a=this.helper||this.element;c<this._proportionallyResizeElements.length;c++)b=this._proportionallyResizeElements[c],
this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(b)),b.css({height:a.height()-this.outerDimensions.height||0,width:a.width()-this.outerDimensions.width||0})},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||c("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+
"px",top:this.elementOffset.top+"px",zIndex:++b.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(b,c){return{width:this.originalSize.width+c}},w:function(b,c){return{left:this.originalPosition.left+c,width:this.originalSize.width-c}},n:function(b,c,a){return{top:this.originalPosition.top+a,height:this.originalSize.height-a}},s:function(b,c,a){return{height:this.originalSize.height+a}},se:function(b,e,a){return c.extend(this._change.s.apply(this,
arguments),this._change.e.apply(this,[b,e,a]))},sw:function(b,e,a){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,e,a]))},ne:function(b,e,a){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,e,a]))},nw:function(b,e,a){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,e,a]))}},_propagate:function(b,e){c.ui.plugin.call(this,b,[e,this.ui()]);"resize"!==b&&this._trigger(b,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,
element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.ui.plugin.add("resizable","animate",{stop:function(b){var e=c(this).resizable("instance"),a=e.options,d=e._proportionallyResizeElements,h=d.length&&/textarea/i.test(d[0].nodeName),f=h&&e._hasScroll(d[0],"left")?0:e.sizeDiff.height,h={width:e.size.width-(h?0:e.sizeDiff.width),height:e.size.height-f},f=parseInt(e.element.css("left"),10)+(e.position.left-
e.originalPosition.left)||null,g=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;e.element.animate(c.extend(h,g&&f?{top:g,left:f}:{}),{duration:a.animateDuration,easing:a.animateEasing,step:function(){var a={width:parseInt(e.element.css("width"),10),height:parseInt(e.element.css("height"),10),top:parseInt(e.element.css("top"),10),left:parseInt(e.element.css("left"),10)};d&&d.length&&c(d[0]).css({width:a.width,height:a.height});e._updateCache(a);e._propagate("resize",
b)}})}});c.ui.plugin.add("resizable","containment",{start:function(){var b,e,a,d,h,f=c(this).resizable("instance"),g=f.element;a=f.options.containment;if(g=a instanceof c?a.get(0):/parent/.test(a)?g.parent().get(0):a)f.containerElement=c(g),/document/.test(a)||a===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}):(b=c(g),e=[],c(["Top",
"Right","Left","Bottom"]).each(function(a,d){e[a]=f._num(b.css("padding"+d))}),f.containerOffset=b.offset(),f.containerPosition=b.position(),f.containerSize={height:b.innerHeight()-e[3],width:b.innerWidth()-e[1]},a=f.containerOffset,d=f.containerSize.height,h=f.containerSize.width,h=f._hasScroll(g,"left")?g.scrollWidth:h,d=f._hasScroll(g)?g.scrollHeight:d,f.parentData={element:g,left:a.left,top:a.top,width:h,height:d})},resize:function(b){var e,a,d,h=c(this).resizable("instance");e=h.options;a=h.containerOffset;
d=h.position;b=h._aspectRatio||b.shiftKey;var f={top:0,left:0},g=h.containerElement,k=!0;g[0]!==document&&/static/.test(g.css("position"))&&(f=a);d.left<(h._helper?a.left:0)&&(h.size.width+=h._helper?h.position.left-a.left:h.position.left-f.left,b&&(h.size.height=h.size.width/h.aspectRatio,k=!1),h.position.left=e.helper?a.left:0);d.top<(h._helper?a.top:0)&&(h.size.height+=h._helper?h.position.top-a.top:h.position.top,b&&(h.size.width=h.size.height*h.aspectRatio,k=!1),h.position.top=h._helper?a.top:
0);e=h.containerElement.get(0)===h.element.parent().get(0);d=/relative|absolute/.test(h.containerElement.css("position"));e&&d?(h.offset.left=h.parentData.left+h.position.left,h.offset.top=h.parentData.top+h.position.top):(h.offset.left=h.element.offset().left,h.offset.top=h.element.offset().top);e=Math.abs(h.sizeDiff.width+(h._helper?h.offset.left-f.left:h.offset.left-a.left));a=Math.abs(h.sizeDiff.height+(h._helper?h.offset.top-f.top:h.offset.top-a.top));e+h.size.width>=h.parentData.width&&(h.size.width=
h.parentData.width-e,b&&(h.size.height=h.size.width/h.aspectRatio,k=!1));a+h.size.height>=h.parentData.height&&(h.size.height=h.parentData.height-a,b&&(h.size.width=h.size.height*h.aspectRatio,k=!1));k||(h.position.left=h.prevPosition.left,h.position.top=h.prevPosition.top,h.size.width=h.prevSize.width,h.size.height=h.prevSize.height)},stop:function(){var b=c(this).resizable("instance"),e=b.options,a=b.containerOffset,d=b.containerPosition,h=b.containerElement,f=c(b.helper),g=f.offset(),k=f.outerWidth()-
b.sizeDiff.width,f=f.outerHeight()-b.sizeDiff.height;b._helper&&!e.animate&&/relative/.test(h.css("position"))&&c(this).css({left:g.left-d.left-a.left,width:k,height:f});b._helper&&!e.animate&&/static/.test(h.css("position"))&&c(this).css({left:g.left-d.left-a.left,width:k,height:f})}});c.ui.plugin.add("resizable","alsoResize",{start:function(){var b=c(this).resizable("instance").options,e=function(a){c(a).each(function(){var a=c(this);a.data("ui-resizable-alsoresize",{width:parseInt(a.width(),10),
height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"!==typeof b.alsoResize||b.alsoResize.parentNode?e(b.alsoResize):b.alsoResize.length?(b.alsoResize=b.alsoResize[0],e(b.alsoResize)):c.each(b.alsoResize,function(a){e(a)})},resize:function(b,e){var a=c(this).resizable("instance"),d=a.options,h=a.originalSize,f=a.originalPosition,g={height:a.size.height-h.height||0,width:a.size.width-h.width||0,top:a.position.top-f.top||0,left:a.position.left-f.left||
0},k=function(a,b){c(a).each(function(){var a=c(this),d=c(this).data("ui-resizable-alsoresize"),h={},f=b&&b.length?b:a.parents(e.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(f,function(a,b){var c=(d[b]||0)+(g[b]||0);c&&0<=c&&(h[b]=c||null)});a.css(h)})};"object"!==typeof d.alsoResize||d.alsoResize.nodeType?k(d.alsoResize):c.each(d.alsoResize,function(a,b){k(a,b)})},stop:function(){c(this).removeData("resizable-alsoresize")}});c.ui.plugin.add("resizable","ghost",
{start:function(){var b=c(this).resizable("instance"),e=b.options,a=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:.25,display:"block",position:"relative",height:a.height,width:a.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"===typeof e.ghost?e.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=c(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=c(this).resizable("instance");
b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});c.ui.plugin.add("resizable","grid",{resize:function(){var b,e=c(this).resizable("instance"),a=e.options,d=e.size,h=e.originalSize,f=e.originalPosition,g=e.axis,k="number"===typeof a.grid?[a.grid,a.grid]:a.grid,l=k[0]||1,n=k[1]||1,q=Math.round((d.width-h.width)/l)*l,d=Math.round((d.height-h.height)/n)*n,m=h.width+q,r=h.height+d,E=a.maxWidth&&a.maxWidth<m,G=a.maxHeight&&a.maxHeight<r,X=a.minWidth&&a.minWidth>m,L=a.minHeight&&a.minHeight>
r;a.grid=k;X&&(m+=l);L&&(r+=n);E&&(m-=l);G&&(r-=n);if(/^(se|s|e)$/.test(g))e.size.width=m,e.size.height=r;else if(/^(ne)$/.test(g))e.size.width=m,e.size.height=r,e.position.top=f.top-d;else if(/^(sw)$/.test(g))e.size.width=m,e.size.height=r,e.position.left=f.left-q;else{if(0>=r-n||0>=m-l)b=e._getPaddingPlusBorderDimensions(this);0<r-n?(e.size.height=r,e.position.top=f.top-d):(r=n-b.height,e.size.height=r,e.position.top=f.top+h.height-r);0<m-l?(e.size.width=m,e.position.left=f.left-q):(m=n-b.height,
e.size.width=m,e.position.left=f.left+h.width-m)}}});c.widget("ui.selectable",c.ui.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,e=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){b=c(e.options.filter,e.element[0]);b.addClass("ui-selectee");b.each(function(){var a=c(this),b=a.offset();c.data(this,"selectable-item",
{element:this,$element:a,left:b.left,top:b.top,right:b.left+a.outerWidth(),bottom:b.top+a.outerHeight(),startselected:!1,selected:a.hasClass("ui-selected"),selecting:a.hasClass("ui-selecting"),unselecting:a.hasClass("ui-unselecting")})})};this.refresh();this.selectees=b.addClass("ui-selectee");this._mouseInit();this.helper=c("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");
this._mouseDestroy()},_mouseStart:function(b){var e=this,a=this.options;this.opos=[b.pageX,b.pageY];this.options.disabled||(this.selectees=c(a.filter,this.element[0]),this._trigger("start",b),c(a.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),a.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var a=c.data(this,"selectable-item");a.startselected=!0;b.metaKey||b.ctrlKey||(a.$element.removeClass("ui-selected"),a.selected=!1,
a.$element.addClass("ui-unselecting"),a.unselecting=!0,e._trigger("unselecting",b,{unselecting:a.element}))}),c(b.target).parents().addBack().each(function(){var a,h=c.data(this,"selectable-item");if(h)return a=!b.metaKey&&!b.ctrlKey||!h.$element.hasClass("ui-selected"),h.$element.removeClass(a?"ui-unselecting":"ui-selected").addClass(a?"ui-selecting":"ui-unselecting"),h.unselecting=!a,h.selecting=a,(h.selected=a)?e._trigger("selecting",b,{selecting:h.element}):e._trigger("unselecting",b,{unselecting:h.element}),
!1}))},_mouseDrag:function(b){this.dragged=!0;if(!this.options.disabled){var e,a=this,d=this.options,h=this.opos[0],f=this.opos[1],g=b.pageX,k=b.pageY;h>g&&(e=g,g=h,h=e);f>k&&(e=k,k=f,f=e);this.helper.css({left:h,top:f,width:g-h,height:k-f});this.selectees.each(function(){var e=c.data(this,"selectable-item"),l=!1;e&&e.element!==a.element[0]&&("touch"===d.tolerance?l=!(e.left>g||e.right<h||e.top>k||e.bottom<f):"fit"===d.tolerance&&(l=e.left>h&&e.right<g&&e.top>f&&e.bottom<k),l?(e.selected&&(e.$element.removeClass("ui-selected"),
e.selected=!1),e.unselecting&&(e.$element.removeClass("ui-unselecting"),e.unselecting=!1),e.selecting||(e.$element.addClass("ui-selecting"),e.selecting=!0,a._trigger("selecting",b,{selecting:e.element}))):(e.selecting&&((b.metaKey||b.ctrlKey)&&e.startselected?(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.$element.addClass("ui-selected"),e.selected=!0):(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.startselected&&(e.$element.addClass("ui-unselecting"),e.unselecting=!0),a._trigger("unselecting",
b,{unselecting:e.element}))),!e.selected||b.metaKey||b.ctrlKey||e.startselected||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,a._trigger("unselecting",b,{unselecting:e.element}))))});return!1}},_mouseStop:function(b){var e=this;this.dragged=!1;c(".ui-unselecting",this.element[0]).each(function(){var a=c.data(this,"selectable-item");a.$element.removeClass("ui-unselecting");a.unselecting=!1;a.startselected=!1;e._trigger("unselected",b,{unselected:a.element})});
c(".ui-selecting",this.element[0]).each(function(){var a=c.data(this,"selectable-item");a.$element.removeClass("ui-selecting").addClass("ui-selected");a.selecting=!1;a.selected=!0;a.startselected=!0;e._trigger("selected",b,{selected:a.element})});this._trigger("stop",b);this.helper.remove();return!1}});c.widget("ui.accordion",{version:"1.11.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",
header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=c();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");b.collapsible||!1!==b.active&&null!=b.active||(b.active=
0);this._processPanels();0>b.active&&(b.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():c()}},_createIcons:function(){var b=this.options.icons;b&&(c("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},
_destroy:function(){var b;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId();this._destroyIcons();b=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display",
"").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId();"content"!==this.options.heightStyle&&b.css("height","")},_setOption:function(b,c){"active"===b?this._activate(c):("event"===b&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(c)),this._super(b,c),"collapsible"!==b||c||!1!==this.options.active||this._activate(0),"icons"===b&&(this._destroyIcons(),c&&this._createIcons()),"disabled"===b&&(this.element.toggleClass("ui-state-disabled",
!!c).attr("aria-disabled",c),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!c)))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var e=c.ui.keyCode,a=this.headers.length,d=this.headers.index(b.target),h=!1;switch(b.keyCode){case e.RIGHT:case e.DOWN:h=this.headers[(d+1)%a];break;case e.LEFT:case e.UP:h=this.headers[(d-1+a)%a];break;case e.SPACE:case e.ENTER:this._eventHandler(b);break;case e.HOME:h=this.headers[0];break;case e.END:h=this.headers[a-1]}h&&(c(b.target).attr("tabIndex",
-1),c(h).attr("tabIndex",0),h.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===c.ui.keyCode.UP&&b.ctrlKey&&c(b.currentTarget).prev().focus()},refresh:function(){var b=this.options;this._processPanels();!1===b.active&&!0===b.collapsible||!this.headers.length?(b.active=!1,this.active=c()):!1===b.active?this._activate(0):this.active.length&&!c.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=c()):
this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){var b=this.headers,c=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all");this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();c&&(this._off(b.not(this.headers)),this._off(c.not(this.panels)))},
_refresh:function(){var b,e=this.options,a=e.heightStyle,d=this.element.parent();this.active=this._findActive(e.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(){var a=c(this),b=a.uniqueId().attr("id"),d=a.next(),e=d.uniqueId().attr("id");a.attr("aria-controls",e);d.attr("aria-labelledby",b)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",
"aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(e.event);"fill"===a?(b=d.height(),this.element.siblings(":visible").each(function(){var a=c(this),d=a.css("position");"absolute"!==d&&"fixed"!==d&&(b-=a.outerHeight(!0))}),this.headers.each(function(){b-=c(this).outerHeight(!0)}),
this.headers.next().each(function(){c(this).height(Math.max(0,b-c(this).innerHeight()+c(this).height()))}).css("overflow","auto")):"auto"===a&&(b=0,this.headers.next().each(function(){b=Math.max(b,c(this).css("height","").height())}).height(b))},_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,currentTarget:b,preventDefault:c.noop}))},_findActive:function(b){return"number"===typeof b?this.headers.eq(b):c()},_setupEvents:function(b){var e=
{keydown:"_keydown"};b&&c.each(b.split(" "),function(a,b){e[b]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,e);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(b){var e=this.options,a=this.active,d=c(b.currentTarget),h=d[0]===a[0],f=h&&e.collapsible,g=f?c():d.next(),k=a.next(),g={oldHeader:a,oldPanel:k,newHeader:f?c():d,newPanel:g};b.preventDefault();h&&!e.collapsible||
!1===this._trigger("beforeActivate",b,g)||(e.active=f?!1:this.headers.index(d),this.active=h?c():d,this._toggle(g),a.removeClass("ui-accordion-header-active ui-state-active"),e.icons&&a.children(".ui-accordion-header-icon").removeClass(e.icons.activeHeader).addClass(e.icons.header),h||(d.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),e.icons&&d.children(".ui-accordion-header-icon").removeClass(e.icons.header).addClass(e.icons.activeHeader),d.next().addClass("ui-accordion-content-active")))},
_toggle:function(b){var e=b.newPanel,a=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=e;this.prevHide=a;this.options.animate?this._animate(e,a,b):(a.hide(),e.show(),this._toggleComplete(b));a.attr({"aria-hidden":"true"});a.prev().attr("aria-selected","false");e.length&&a.length?a.prev().attr({tabIndex:-1,"aria-expanded":"false"}):e.length&&this.headers.filter(function(){return 0===c(this).attr("tabIndex")}).attr("tabIndex",-1);e.attr("aria-hidden",
"false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(b,c,a){var d,h,f,g=this,k=0,l=b.length&&(!c.length||b.index()<c.index()),n=this.options.animate||{},l=l&&n.down||n,q=function(){g._toggleComplete(a)};"number"===typeof l&&(f=l);"string"===typeof l&&(h=l);h=h||l.easing||n.easing;f=f||l.duration||n.duration;if(!c.length)return b.animate(this.showProps,f,h,q);if(!b.length)return c.animate(this.hideProps,f,h,q);d=b.show().outerHeight();c.animate(this.hideProps,
{duration:f,easing:h,step:function(a,b){b.now=Math.round(a)}});b.hide().animate(this.showProps,{duration:f,easing:h,complete:q,step:function(a,b){b.now=Math.round(a);"height"!==b.prop?k+=b.now:"content"!==g.options.heightStyle&&(b.now=Math.round(d-c.outerHeight()-k),k=0)}})},_toggleComplete:function(b){var c=b.oldPanel;c.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");c.length&&(c.parent()[0].className=c.parent()[0].className);this._trigger("activate",
null,b)}});var l,r=function(){var b=c(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},k=function(b){var e=b.name,a=b.form,d=c([]);e&&(e=e.replace(/'/g,"\\'"),d=a?c(a).find("[name='"+e+"'][type=radio]"):c("[name='"+e+"'][type=radio]",b.ownerDocument).filter(function(){return!this.form}));return d};c.widget("ui.button",{version:"1.11.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+
this.eventNamespace).bind("reset"+this.eventNamespace,r);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var b=this,e=this.options,a="checkbox"===this.type||"radio"===this.type,d=a?"":"ui-state-active";null===e.label&&(e.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);
this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){e.disabled||this===l&&c(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){e.disabled||c(this).removeClass(d)}).bind("click"+this.eventNamespace,function(a){e.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}});
a&&this.element.bind("change"+this.eventNamespace,function(){b.refresh()});"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(e.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(e.disabled)return!1;c(this).addClass("ui-state-active");b.buttonElement.attr("aria-pressed","true");var a=b.element[0];k(a).not(a).map(function(){return c(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",
"false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(e.disabled)return!1;c(this).addClass("ui-state-active");l=this;b.document.one("mouseup",function(){l=null})}).bind("mouseup"+this.eventNamespace,function(){if(e.disabled)return!1;c(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(a){if(e.disabled)return!1;a.keyCode!==c.ui.keyCode.SPACE&&a.keyCode!==c.ui.keyCode.ENTER||c(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+
" blur"+this.eventNamespace,function(){c(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===c.ui.keyCode.SPACE&&c(this).click()}));this._setOption("disabled",e.disabled);this._resetButton()},_determineButtonType:function(){var b,c;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?
(b=this.element.parents().last(),c="label[for='"+this.element.attr("id")+"']",this.buttonElement=b.find(c),this.buttonElement.length||(b=b.length?b.siblings():this.element.siblings(),this.buttonElement=b.filter(c),this.buttonElement.length||(this.buttonElement=b.find(c))),this.element.addClass("ui-helper-hidden-accessible"),(b=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",b)):this.buttonElement=this.element},widget:function(){return this.buttonElement},
_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-active ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(b,c){this._super(b,
c);"disabled"===b?(this.widget().toggleClass("ui-state-disabled",!!c),this.element.prop("disabled",!!c),c&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active"))):this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b);"radio"===this.type?k(this.element[0]).each(function(){c(this).is(":checked")?
c(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):c(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
e=c("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),a=this.options.icons,d=a.primary&&a.secondary,f=[];a.primary||a.secondary?(this.options.text&&f.push("ui-button-text-icon"+(d?"s":a.primary?"-primary":"-secondary")),a.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+a.primary+"'></span>"),a.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+a.secondary+"'></span>"),this.options.text||(f.push(d?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||b.attr("title",c.trim(e)))):f.push("ui-button-text-only");b.addClass(f.join(" "))}}});c.widget("ui.buttonset",{version:"1.11.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){"disabled"===b&&this.buttons.button("option",b,c);this._super(b,c)},refresh:function(){var b=
"rtl"===this.element.css("direction"),e=this.element.find(this.options.items),a=e.filter(":ui-button");e.not(":ui-button").button();a.button("refresh");this.buttons=e.map(function(){return c(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return c(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});
c.widget("ui.menu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0});this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled",
"true");this._on({"mousedown .ui-menu-item":function(b){b.preventDefault()},"click .ui-menu-item":function(b){var e=c(b.target);!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),e.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&c(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){if(!this.previousFilter){var e=
c(b.currentTarget);e.siblings(".ui-state-active").removeClass("ui-state-active");this.focus(b,e)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(b,c){var a=this.active||this.element.find(this.options.items).eq(0);c||this.focus(b,a)},blur:function(b){this._delay(function(){c.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(b){this._closeOnDocumentClick(b)&&this.collapseAll(b);
this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=
c(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){var e,a,d,f=!0;switch(b.keyCode){case c.ui.keyCode.PAGE_UP:this.previousPage(b);break;case c.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case c.ui.keyCode.HOME:this._move("first","first",b);break;case c.ui.keyCode.END:this._move("last","last",b);break;case c.ui.keyCode.UP:this.previous(b);break;case c.ui.keyCode.DOWN:this.next(b);break;
case c.ui.keyCode.LEFT:this.collapse(b);break;case c.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case c.ui.keyCode.ENTER:case c.ui.keyCode.SPACE:this._activate(b);break;case c.ui.keyCode.ESCAPE:this.collapse(b);break;default:f=!1,e=this.previousFilter||"",a=String.fromCharCode(b.keyCode),d=!1,clearTimeout(this.filterTimer),a===e?d=!0:a=e+a,e=this._filterMenuItems(a),e=d&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e,e.length||
(a=String.fromCharCode(b.keyCode),e=this._filterMenuItems(a)),e.length?(this.focus(b,e),this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter}f&&b.preventDefault()},_activate:function(b){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(b):this.select(b))},refresh:function(){var b,e=this,a=this.options.icons.submenu;b=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",
!!this.element.find(".ui-icon").length);b.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=c(this),e=b.parent(),f=c("<span>").addClass("ui-menu-icon ui-icon "+a).data("ui-menu-submenu-carat",!0);e.attr("aria-haspopup","true").prepend(f);b.attr("aria-labelledby",e.attr("id"))});b=b.add(this.element).find(this.options.items);b.not(".ui-menu-item").each(function(){var a=
c(this);e._isDivider(a)&&a.addClass("ui-widget-content ui-menu-divider")});b.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});b.filter(".ui-state-disabled").attr("aria-disabled","true");this.active&&!c.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(b,c){"icons"===b&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(c.submenu);
"disabled"===b&&this.element.toggleClass("ui-state-disabled",!!c).attr("aria-disabled",c);this._super(b,c)},focus:function(b,c){var a;this.blur(b,b&&"focus"===b.type);this._scrollIntoView(c);this.active=c.first();a=this.active.addClass("ui-state-focus").removeClass("ui-state-active");this.options.role&&this.element.attr("aria-activedescendant",a.attr("id"));this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");b&&"keydown"===b.type?this._close():this.timer=this._delay(function(){this._close()},
this.delay);a=c.children(".ui-menu");a.length&&b&&/^mouse/.test(b.type)&&this._startOpening(a);this.activeMenu=c.parent();this._trigger("focus",b,{item:c})},_scrollIntoView:function(b){var e,a,d;this._hasScroll()&&(e=parseFloat(c.css(this.activeMenu[0],"borderTopWidth"))||0,a=parseFloat(c.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-e-a,a=this.activeMenu.scrollTop(),d=this.activeMenu.height(),b=b.outerHeight(),0>e?this.activeMenu.scrollTop(a+e):e+b>d&&this.activeMenu.scrollTop(a+
e-d+b))},blur:function(b,c){c||clearTimeout(this.timer);this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",b,{item:this.active}))},_startOpening:function(b){clearTimeout(this.timer);"true"===b.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(b)},this.delay))},_open:function(b){var e=c.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden",
"true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(b,e){clearTimeout(this.timer);this.timer=this._delay(function(){var a=e?this.element:c(b&&b.target).closest(this.element.find(".ui-menu"));a.length||(a=this.element);this._close(a);this.blur(b);this.activeMenu=a},this.delay)},_close:function(b){b||(b=this.active?this.active.parent():this.element);b.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},
_closeOnDocumentClick:function(b){return!c(b.target).closest(".ui-menu").length},_isDivider:function(b){return!/[^\-\u2014\u2013\s]/.test(b.text())},collapse:function(b){var c=this.active&&this.active.parent().closest(".ui-menu-item",this.element);c&&c.length&&(this._close(),this.focus(b,c))},expand:function(b){var c=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();c&&c.length&&(this._open(c.parent()),this._delay(function(){this.focus(b,c)}))},next:function(b){this._move("next",
"first",b)},previous:function(b){this._move("prev","last",b)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(b,c,a){var d;this.active&&(d="first"===b||"last"===b?this.active["first"===b?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[b+"All"](".ui-menu-item").eq(0));d&&d.length&&this.active||(d=this.activeMenu.find(this.options.items)[c]());this.focus(a,
d)},nextPage:function(b){var e,a,d;this.active?this.isLastItem()||(this._hasScroll()?(a=this.active.offset().top,d=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){e=c(this);return 0>e.offset().top-a-d}),this.focus(b,e)):this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(b)},previousPage:function(b){var e,a,d;this.active?this.isFirstItem()||(this._hasScroll()?(a=this.active.offset().top,d=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){e=
c(this);return 0<e.offset().top-a+d}),this.focus(b,e)):this.focus(b,this.activeMenu.find(this.options.items).first())):this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||c(b.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0);this._trigger("select",b,e)},_filterMenuItems:function(b){b=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var e=
new RegExp("^"+b,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return e.test(c.trim(c(this).text()))})}});c.widget("ui.tabs",{version:"1.11.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var b=/#.*$/;return function(c){var a,d;c=c.cloneNode(!1);a=c.href.replace(b,"");d=location.href.replace(b,"");try{a=decodeURIComponent(a)}catch(f){}try{d=
decodeURIComponent(d)}catch(g){}return 1<c.hash.length&&a===d}}(),_create:function(){var b=this,e=this.options;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",e.collapsible);this._processTabs();e.active=this._initialActive();c.isArray(e.disabled)&&(e.disabled=c.unique(e.disabled.concat(c.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?
this._findActive(e.active):c();this._refresh();this.active.length&&this.load(e.active)},_initialActive:function(){var b=this.options.active,e=this.options.collapsible,a=location.hash.substring(1);null===b&&(a&&this.tabs.each(function(d,e){if(c(e).attr("aria-controls")===a)return b=d,!1}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===b||-1===b)&&(b=this.tabs.length?0:!1);!1!==b&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=e?!1:0));!e&&!1===b&&this.anchors.length&&(b=
0);return b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):c()}},_tabKeydown:function(b){var e=c(this.document[0].activeElement).closest("li"),a=this.tabs.index(e),d=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case c.ui.keyCode.RIGHT:case c.ui.keyCode.DOWN:a++;break;case c.ui.keyCode.UP:case c.ui.keyCode.LEFT:d=!1;a--;break;case c.ui.keyCode.END:a=this.anchors.length-1;break;case c.ui.keyCode.HOME:a=0;break;case c.ui.keyCode.SPACE:b.preventDefault();
clearTimeout(this.activating);this._activate(a);return;case c.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(a===this.options.active?!1:a);return;default:return}b.preventDefault();clearTimeout(this.activating);a=this._focusNextTab(a,d);b.ctrlKey||(e.attr("aria-selected","false"),this.tabs.eq(a).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",a)},this.delay))}},_panelKeydown:function(b){!this._handlePageNav(b)&&b.ctrlKey&&b.keyCode===
c.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){if(b.altKey&&b.keyCode===c.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(b.altKey&&b.keyCode===c.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(b,e){function a(){b>d&&(b=0);0>b&&(b=d);return b}for(var d=this.tabs.length-1;-1!==c.inArray(a(),this.options.disabled);)b=e?b+1:b-1;return b},_focusNextTab:function(b,
c){b=this._findNextTab(b,c);this.tabs.eq(b).focus();return b},_setOption:function(b,c){"active"===b?this._activate(c):"disabled"===b?this._setupDisabled(c):(this._super(b,c),"collapsible"===b&&(this.element.toggleClass("ui-tabs-collapsible",c),c||!1!==this.options.active||this._activate(0)),"event"===b&&this._setupEvents(c),"heightStyle"===b&&this._setupHeightStyle(c))},_sanitizeSelector:function(b){return b?b.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,
e=this.tablist.children(":has(a[href])");b.disabled=c.map(e.filter(".ui-state-disabled"),function(a){return e.index(a)});this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!c.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=c()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=c());this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);
this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",
0)},_processTabs:function(){var b=this,e=this.tabs,a=this.anchors,d=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(a){c(this).is(".ui-state-disabled")&&a.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){c(this).closest("li").is(".ui-state-disabled")&&this.blur()});this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",
tabIndex:-1});this.anchors=this.tabs.map(function(){return c("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=c();this.anchors.each(function(a,d){var e,f,g=c(d).uniqueId().attr("id"),k=c(d).closest("li"),l=k.attr("aria-controls");b._isLocal(d)?(e=d.hash,f=e.substring(1),e=b.element.find(b._sanitizeSelector(e))):(f=k.attr("aria-controls")||c({}).uniqueId()[0].id,e=b.element.find("#"+f),e.length||(e=b._createPanel(f),e.insertAfter(b.panels[a-1]||b.tablist)),
e.attr("aria-live","polite"));e.length&&(b.panels=b.panels.add(e));l&&k.data("ui-tabs-aria-controls",l);k.attr({"aria-controls":f,"aria-labelledby":g});e.attr("aria-labelledby",g)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel");e&&(this._off(e.not(this.tabs)),this._off(a.not(this.anchors)),this._off(d.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(b){return c("<div>").attr("id",
b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){c.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var e=0,a;a=this.tabs[e];e++)!0===b||-1!==c.inArray(e,b)?c(a).addClass("ui-state-disabled").attr("aria-disabled","true"):c(a).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var e={};b&&c.each(b.split(" "),function(a,b){e[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));
this._on(!0,this.anchors,{click:function(a){a.preventDefault()}});this._on(this.anchors,e);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var e,a=this.element.parent();"fill"===b?(e=a.height(),e-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var a=c(this),b=a.css("position");"absolute"!==b&&"fixed"!==b&&(e-=a.outerHeight(!0))}),
this.element.children().not(this.panels).each(function(){e-=c(this).outerHeight(!0)}),this.panels.each(function(){c(this).height(Math.max(0,e-c(this).innerHeight()+c(this).height()))}).css("overflow","auto")):"auto"===b&&(e=0,this.panels.each(function(){e=Math.max(e,c(this).height("").height())}).height(e))},_eventHandler:function(b){var e=this.options,a=this.active,d=c(b.currentTarget).closest("li"),f=d[0]===a[0],g=f&&e.collapsible,k=g?c():this._getPanelForTab(d),l=a.length?this._getPanelForTab(a):
c(),a={oldTab:a,oldPanel:l,newTab:g?c():d,newPanel:k};b.preventDefault();d.hasClass("ui-state-disabled")||d.hasClass("ui-tabs-loading")||this.running||f&&!e.collapsible||!1===this._trigger("beforeActivate",b,a)||(e.active=g?!1:this.tabs.index(d),this.active=f?c():d,this.xhr&&this.xhr.abort(),l.length||k.length||c.error("jQuery UI Tabs: Mismatching fragment identifier."),k.length&&this.load(this.tabs.index(d),b),this._toggle(b,a))},_toggle:function(b,e){function a(){f.running=!1;f._trigger("activate",
b,e)}function d(){e.newTab.closest("li").addClass("ui-tabs-active ui-state-active");g.length&&f.options.show?f._show(g,f.options.show,a):(g.show(),a())}var f=this,g=e.newPanel,k=e.oldPanel;this.running=!0;k.length&&this.options.hide?this._hide(k,this.options.hide,function(){e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");d()}):(e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),k.hide(),d());k.attr("aria-hidden","true");e.oldTab.attr({"aria-selected":"false",
"aria-expanded":"false"});g.length&&k.length?e.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===c(this).attr("tabIndex")}).attr("tabIndex",-1);g.attr("aria-hidden","false");e.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),b=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:b,currentTarget:b,preventDefault:c.noop}))},_findActive:function(b){return!1===
b?c():this.tabs.eq(b)},_getIndex:function(b){"string"===typeof b&&(b=this.anchors.index(this.anchors.filter("[href$='"+b+"']")));return b},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();
this.tablist.unbind(this.eventNamespace);this.tabs.add(this.panels).each(function(){c.data(this,"ui-tabs-destroy")?c(this).remove():c(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var b=
c(this),e=b.data("ui-tabs-aria-controls");e?b.attr("aria-controls",e).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var e=this.options.disabled;!1!==e&&(void 0===b?e=!1:(b=this._getIndex(b),e=c.isArray(e)?c.map(e,function(a){return a!==b?a:null}):c.map(this.tabs,function(a,d){return d!==b?d:null})),this._setupDisabled(e))},disable:function(b){var e=this.options.disabled;
if(!0!==e){if(void 0===b)e=!0;else{b=this._getIndex(b);if(-1!==c.inArray(b,e))return;e=c.isArray(e)?c.merge([b],e).sort():[b]}this._setupDisabled(e)}},load:function(b,e){b=this._getIndex(b);var a=this,d=this.tabs.eq(b),f=d.find(".ui-tabs-anchor"),g=this._getPanelForTab(d),k={tab:d,panel:g};this._isLocal(f[0])||(this.xhr=c.ajax(this._ajaxSettings(f,e,k)))&&"canceled"!==this.xhr.statusText&&(d.addClass("ui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.success(function(b){setTimeout(function(){g.html(b);
a._trigger("load",e,k)},1)}).complete(function(b,c){setTimeout(function(){"abort"===c&&a.panels.stop(!1,!0);d.removeClass("ui-tabs-loading");g.removeAttr("aria-busy");b===a.xhr&&delete a.xhr},1)}))},_ajaxSettings:function(b,e,a){var d=this;return{url:b.attr("href"),beforeSend:function(b,f){return d._trigger("beforeLoad",e,c.extend({jqXHR:b,ajaxSettings:f},a))}}},_getPanelForTab:function(b){b=c(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+b))}});c.widget("ui.tooltip",
{version:"1.11.2",options:{content:function(){var b=c(this).attr("title")||"";return c("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(b,e){var a=(b.attr("aria-describedby")||"").split(/\s+/);a.push(e);b.data("ui-tooltip-id",e).attr("aria-describedby",c.trim(a.join(" ")))},_removeDescribedBy:function(b){var e=b.data("ui-tooltip-id"),
a=(b.attr("aria-describedby")||"").split(/\s+/),e=c.inArray(e,a);-1!==e&&a.splice(e,1);b.removeData("ui-tooltip-id");(a=c.trim(a.join(" ")))?b.attr("aria-describedby",a):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable();this.liveRegion=c("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},
_setOption:function(b,e){var a=this;"disabled"===b?(this[e?"_disable":"_enable"](),this.options[b]=e):(this._super(b,e),"content"===b&&c.each(this.tooltips,function(b,c){a._updateContent(c.element)}))},_disable:function(){var b=this;c.each(this.tooltips,function(e,a){var d=c.Event("blur");d.target=d.currentTarget=a.element[0];b.close(d,!0)});this.element.find(this.options.items).addBack().each(function(){var b=c(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).removeAttr("title")})},
_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=c(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var e=this,a=c(b?b.target:this.element).closest(this.options.items);a.length&&!a.data("ui-tooltip-id")&&(a.attr("title")&&a.data("ui-tooltip-title",a.attr("title")),a.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&a.parents().each(function(){var a=c(this),b;a.data("ui-tooltip-open")&&(b=c.Event("blur"),b.target=
b.currentTarget=this,e.close(b,!0));a.attr("title")&&(a.uniqueId(),e.parents[this.id]={element:this,title:a.attr("title")},a.attr("title",""))}),this._updateContent(a,b))},_updateContent:function(b,c){var a;a=this.options.content;var d=this,f=c?c.type:null;if("string"===typeof a)return this._open(c,b,a);(a=a.call(b[0],function(a){b.data("ui-tooltip-open")&&d._delay(function(){c&&(c.type=f);this._open(c,b,a)})}))&&this._open(c,b,a)},_open:function(b,e,a){function d(a){l.of=a;g.is(":hidden")||g.position(l)}
var f,g,k,l=c.extend({},this.options.position);a&&((f=this._find(e))?f.tooltip.find(".ui-tooltip-content").html(a):(e.is("[title]")&&(b&&"mouseover"===b.type?e.attr("title",""):e.removeAttr("title")),f=this._tooltip(e),g=f.tooltip,this._addDescribedBy(e,g.attr("id")),g.find(".ui-tooltip-content").html(a),this.liveRegion.children().hide(),a.clone&&(a=a.clone(),a.removeAttr("id").find("[id]").removeAttr("id")),c("<div>").html(a).appendTo(this.liveRegion),this.options.track&&b&&/^mouse/.test(b.type)?
(this._on(this.document,{mousemove:d}),d(b)):g.position(c.extend({of:e},this.options.position)),g.hide(),this._show(g,this.options.show),this.options.show&&this.options.show.delay&&(k=this.delayedShow=setInterval(function(){g.is(":visible")&&(d(l.of),clearInterval(k))},c.fx.interval)),this._trigger("open",b,{tooltip:g}),a={keyup:function(a){a.keyCode===c.ui.keyCode.ESCAPE&&(a=c.Event(a),a.currentTarget=e[0],this.close(a,!0))}},e[0]!==this.element[0]&&(a.remove=function(){this._removeTooltip(g)}),
b&&"mouseover"!==b.type||(a.mouseleave="close"),b&&"focusin"!==b.type||(a.focusout="close"),this._on(!0,e,a)))},close:function(b){var e,a=this,d=c(b?b.currentTarget:this.element),f=this._find(d);f&&(e=f.tooltip,f.closing||(clearInterval(this.delayedShow),d.data("ui-tooltip-title")&&!d.attr("title")&&d.attr("title",d.data("ui-tooltip-title")),this._removeDescribedBy(d),f.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){a._removeTooltip(c(this))}),d.removeData("ui-tooltip-open"),this._off(d,
"mouseleave focusout keyup"),d[0]!==this.element[0]&&this._off(d,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&c.each(this.parents,function(b,d){c(d.element).attr("title",d.title);delete a.parents[b]}),f.closing=!0,this._trigger("close",b,{tooltip:e}),f.hiding||(f.closing=!1)))},_tooltip:function(b){var e=c("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),a=e.uniqueId().attr("id");c("<div>").addClass("ui-tooltip-content").appendTo(e);
e.appendTo(this.document[0].body);return this.tooltips[a]={element:b,tooltip:e}},_find:function(b){return(b=b.data("ui-tooltip-id"))?this.tooltips[b]:null},_removeTooltip:function(b){b.remove();delete this.tooltips[b.attr("id")]},_destroy:function(){var b=this;c.each(this.tooltips,function(e,a){var d=c.Event("blur"),f=a.element;d.target=d.currentTarget=f[0];b.close(d,!0);c("#"+e).remove();f.data("ui-tooltip-title")&&(f.attr("title")||f.attr("title",f.data("ui-tooltip-title")),f.removeData("ui-tooltip-title"))});
this.liveRegion.remove()}})});/*
   Copyright 2008-2014 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net
*/
(function(c,m,g){(function(c){"function"===typeof define&&define.amd?define("datatables",["jquery"],c):"object"===typeof exports?c(require("jquery")):jQuery&&!jQuery.fn.dataTable&&c(jQuery)})(function(f){function q(a){var b,d,c={};f.each(a,function(e,f){(b=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" ")&&(d=e.replace(b[0],b[2].toLowerCase()),c[d]=e,"o"===b[1]&&q(a[e]))});a._hungarianMap=c}function n(a,b,d){a._hungarianMap||q(a);var c;f.each(b,function(e,h){c=a._hungarianMap[e];
c===g||!d&&b[c]!==g||("o"===c.charAt(0)?(b[c]||(b[c]={}),f.extend(!0,b[c],b[e]),n(a[c],b[c],d)):b[c]=b[e])})}function l(a){var b=B.defaults.oLanguage,d=a.sZeroRecords;!a.sEmptyTable&&d&&"No data available in table"===b.sEmptyTable&&ma(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&d&&"Loading..."===b.sLoadingRecords&&ma(a,a,"sZeroRecords","sLoadingRecords");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&Wa(a)}function r(a){pa(a,"ordering","bSort");pa(a,"orderMulti","bSortMulti");
pa(a,"orderClasses","bSortClasses");pa(a,"orderCellsTop","bSortCellsTop");pa(a,"order","aaSorting");pa(a,"orderFixed","aaSortingFixed");pa(a,"paging","bPaginate");pa(a,"pagingType","sPaginationType");pa(a,"pageLength","iDisplayLength");pa(a,"searching","bFilter");if(a=a.aoSearchCols)for(var b=0,d=a.length;b<d;b++)a[b]&&n(B.models.oSearch,a[b])}function k(a){pa(a,"orderable","bSortable");pa(a,"orderData","aDataSort");pa(a,"orderSequence","asSorting");pa(a,"orderDataType","sortDataType")}function b(a){a=
a.oBrowser;var b=f("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(f("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(f('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),d=b.find(".test");a.bScrollOversize=100===d[0].offsetWidth;a.bScrollbarLeft=1!==d.offset().left;b.remove()}function e(a,b,d,c,e,f){var h,k=!1;d!==g&&(h=d,k=!0);for(;c!==e;)a.hasOwnProperty(c)&&(h=k?b(h,a[c],c,a):a[c],k=!0,c+=f);return h}
function a(a,b){var c=B.defaults.column,e=a.aoColumns.length,c=f.extend({},B.models.oColumn,c,{nTh:b?b:m.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[e],mData:c.mData?c.mData:e,idx:e});a.aoColumns.push(c);c=a.aoPreSearchCols;c[e]=f.extend({},B.models.oSearch,c[e]);d(a,e,null)}function d(a,b,d){b=a.aoColumns[b];var c=a.oClasses,e=f(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=e.attr("width")||null;var h=(e.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);
h&&(b.sWidthOrig=h[1])}d!==g&&null!==d&&(k(d),n(B.defaults.column,d),d.mDataProp===g||d.mData||(d.mData=d.mDataProp),d.sType&&(b._sManualType=d.sType),d.className&&!d.sClass&&(d.sClass=d.className),f.extend(b,d),ma(b,d,"sWidth","sWidthOrig"),"number"===typeof d.iDataSort&&(b.aDataSort=[d.iDataSort]),ma(b,d,"aDataSort"));var l=b.mData,q=L(l),p=b.mRender?L(b.mRender):null;d=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};b._bAttrSrc=f.isPlainObject(l)&&(d(l.sort)||d(l.type)||d(l.filter));
b.fnGetData=function(a,b,d){var c=q(a,b,g,d);return p&&b?p(c,b,a,d):c};b.fnSetData=function(a,b,d){return P(l)(a,b,d)};"number"!==typeof l&&(a._rowReadObject=!0);a.oFeatures.bSort||(b.bSortable=!1,e.addClass(c.sSortableNone));a=-1!==f.inArray("asc",b.asSorting);d=-1!==f.inArray("desc",b.asSorting);b.bSortable&&(a||d)?a&&!d?(b.sSortingClass=c.sSortableAsc,b.sSortingClassJUI=c.sSortJUIAscAllowed):!a&&d?(b.sSortingClass=c.sSortableDesc,b.sSortingClassJUI=c.sSortJUIDescAllowed):(b.sSortingClass=c.sSortable,
b.sSortingClassJUI=c.sSortJUI):(b.sSortingClass=c.sSortableNone,b.sSortingClassJUI="")}function h(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;za(a);for(var d=0,c=b.length;d<c;d++)b[d].nTh.style.width=b[d].sWidth}b=a.oScroll;""===b.sY&&""===b.sX||Pa(a);U(a,null,"column-sizing",[a])}function s(a,b){var d=y(a,"bVisible");return"number"===typeof d[b]?d[b]:null}function v(a,b){var d=y(a,"bVisible"),d=f.inArray(b,d);return-1!==d?d:null}function w(a){return y(a,"bVisible").length}function y(a,b){var d=
[];f.map(a.aoColumns,function(a,c){a[b]&&d.push(c)});return d}function z(a){var b=a.aoColumns,d=a.aoData,c=B.ext.type.detect,e,f,h,k,l,n,q,p,m;e=0;for(f=b.length;e<f;e++)if(q=b[e],m=[],!q.sType&&q._sManualType)q.sType=q._sManualType;else if(!q.sType){h=0;for(k=c.length;h<k;h++){l=0;for(n=d.length;l<n;l++){m[l]===g&&(m[l]=E(a,l,e,"type"));p=c[h](m[l],a);if(!p&&h!==c.length-1)break;if("html"===p)break}if(p){q.sType=p;break}}q.sType||(q.sType="string")}}function C(b,d,c,e){var h,k,l,n,q,p,m=b.aoColumns;
if(d)for(h=d.length-1;0<=h;h--){p=d[h];var s=p.targets!==g?p.targets:p.aTargets;f.isArray(s)||(s=[s]);k=0;for(l=s.length;k<l;k++)if("number"===typeof s[k]&&0<=s[k]){for(;m.length<=s[k];)a(b);e(s[k],p)}else if("number"===typeof s[k]&&0>s[k])e(m.length+s[k],p);else if("string"===typeof s[k])for(n=0,q=m.length;n<q;n++)("_all"==s[k]||f(m[n].nTh).hasClass(s[k]))&&e(n,p)}if(c)for(h=0,b=c.length;h<b;h++)e(h,c[h])}function A(a,b,d,c){var e=a.aoData.length,h=f.extend(!0,{},B.models.oRow,{src:d?"dom":"data"});
h._aData=b;a.aoData.push(h);b=a.aoColumns;for(var h=0,g=b.length;h<g;h++)d&&G(a,e,h,E(a,e,h)),b[h].sType=null;a.aiDisplayMaster.push(e);!d&&a.oFeatures.bDeferRender||ca(a,e,d,c);return e}function F(a,b){var d;b instanceof f||(b=f(b));return b.map(function(b,c){d=ha(a,c);return A(a,d.data,c,d.cells)})}function E(a,b,d,c){var e=a.iDraw,f=a.aoColumns[d],h=a.aoData[b]._aData,k=f.sDefaultContent;d=f.fnGetData(h,c,{settings:a,row:b,col:d});if(d===g)return a.iDrawError!=e&&null===k&&(Fa(a,0,"Requested unknown parameter "+
("function"==typeof f.mData?"{function}":"'"+f.mData+"'")+" for row "+b,4),a.iDrawError=e),k;if((d===h||null===d)&&null!==k)d=k;else if("function"===typeof d)return d.call(h);return null===d&&"display"==c?"":d}function G(a,b,d,c){a.aoColumns[d].fnSetData(a.aoData[b]._aData,c,{settings:a,row:b,col:d})}function X(a){return f.map(a.match(/(\\.|[^\.])+/g),function(a){return a.replace(/\\./g,".")})}function L(a){if(f.isPlainObject(a)){var b={};f.each(a,function(a,d){d&&(b[a]=L(d))});return function(a,
d,c,e){var f=b[d]||b._;return f!==g?f(a,d,c,e):a}}if(null===a)return function(a){return a};if("function"===typeof a)return function(b,d,c,e){return a(b,d,c,e)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b,d){return b[a]};var d=function(a,b,c){var e,f;if(""!==c){f=X(c);for(var h=0,u=f.length;h<u;h++){c=f[h].match(Xa);e=f[h].match(La);if(c){f[h]=f[h].replace(Xa,"");""!==f[h]&&(a=a[f[h]]);e=[];f.splice(0,h+1);f=f.join(".");h=0;for(u=a.length;h<
u;h++)e.push(d(a[h],b,f));a=c[0].substring(1,c[0].length-1);a=""===a?e:e.join(a);break}else if(e){f[h]=f[h].replace(La,"");a=a[f[h]]();continue}if(null===a||a[f[h]]===g)return g;a=a[f[h]]}}return a};return function(b,c){return d(b,c,a)}}function P(a){if(f.isPlainObject(a))return P(a._);if(null===a)return function(){};if("function"===typeof a)return function(b,d,c){a(b,"set",d,c)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b,d){b[a]=d};var b=
function(a,d,c){c=X(c);var e;e=c[c.length-1];for(var f,h,u=0,k=c.length-1;u<k;u++){f=c[u].match(Xa);h=c[u].match(La);if(f){c[u]=c[u].replace(Xa,"");a[c[u]]=[];e=c.slice();e.splice(0,u+1);f=e.join(".");h=0;for(k=d.length;h<k;h++)e={},b(e,d[h],f),a[c[u]].push(e);return}h&&(c[u]=c[u].replace(La,""),a=a[c[u]](d));if(null===a[c[u]]||a[c[u]]===g)a[c[u]]={};a=a[c[u]]}if(e.match(La))a[e.replace(La,"")](d);else a[e.replace(Xa,"")]=d};return function(d,c){return b(d,c,a)}}function x(a){return ta(a.aoData,"_aData")}
function M(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0}function O(a,b,d){for(var c=-1,e=0,f=a.length;e<f;e++)a[e]==b?c=e:a[e]>b&&a[e]--; -1!=c&&d===g&&a.splice(c,1)}function ba(a,b,d,c){var e=a.aoData[b],f,h=function(d,c){for(;d.childNodes.length;)d.removeChild(d.firstChild);d.innerHTML=E(a,b,c,"display")};if("dom"!==d&&(d&&"auto"!==d||"dom"!==e.src)){var k=e.anCells;if(k)if(c!==g)h(k[c],c);else for(d=0,f=k.length;d<f;d++)h(k[d],d)}else e._aData=ha(a,e,c,c===g?g:e._aData).data;
e._aSortData=null;e._aFilterData=null;h=a.aoColumns;if(c!==g)h[c].sType=null;else{d=0;for(f=h.length;d<f;d++)h[d].sType=null;qa(e)}}function ha(a,b,d,c){var e=[],h=b.firstChild,k,l=0,n,q=a.aoColumns,p=a._rowReadObject;c=c||p?{}:[];var s=function(a,b){if("string"===typeof a){var d=a.indexOf("@");-1!==d&&(d=a.substring(d+1),P(a)(c,b.getAttribute(d)))}};a=function(a){if(d===g||d===l)k=q[l],n=f.trim(a.innerHTML),k&&k._bAttrSrc?(P(k.mData._)(c,n),s(k.mData.sort,a),s(k.mData.type,a),s(k.mData.filter,a)):
p?(k._setter||(k._setter=P(k.mData)),k._setter(c,n)):c[l]=n;l++};if(h)for(;h;){b=h.nodeName.toUpperCase();if("TD"==b||"TH"==b)a(h),e.push(h);h=h.nextSibling}else for(e=b.anCells,h=0,b=e.length;h<b;h++)a(e[h]);return{data:c,cells:e}}function ca(a,b,d,c){var e=a.aoData[b],f=e._aData,h=[],g,k,l,n,p;if(null===e.nTr){g=d||m.createElement("tr");e.nTr=g;e.anCells=h;g._DT_RowIndex=b;qa(e);n=0;for(p=a.aoColumns.length;n<p;n++){l=a.aoColumns[n];k=d?c[n]:m.createElement(l.sCellType);h.push(k);if(!d||l.mRender||
l.mData!==n)k.innerHTML=E(a,b,n,"display");l.sClass&&(k.className+=" "+l.sClass);l.bVisible&&!d?g.appendChild(k):!l.bVisible&&d&&k.parentNode.removeChild(k);l.fnCreatedCell&&l.fnCreatedCell.call(a.oInstance,k,E(a,b,n),f,b,n)}U(a,"aoRowCreatedCallback",null,[g,f,b])}e.nTr.setAttribute("role","row")}function qa(a){var b=a.nTr,d=a._aData;if(b){d.DT_RowId&&(b.id=d.DT_RowId);if(d.DT_RowClass){var c=d.DT_RowClass.split(" ");a.__rowc=a.__rowc?ib(a.__rowc.concat(c)):c;f(b).removeClass(a.__rowc.join(" ")).addClass(d.DT_RowClass)}d.DT_RowData&&
f(b).data(d.DT_RowData)}}function Y(a){var b,d,c,e,h,g=a.nTHead,k=a.nTFoot,l=0===f("th, td",g).length,n=a.oClasses,p=a.aoColumns;l&&(e=f("<tr/>").appendTo(g));b=0;for(d=p.length;b<d;b++)h=p[b],c=f(h.nTh).addClass(h.sClass),l&&c.appendTo(e),a.oFeatures.bSort&&(c.addClass(h.sSortingClass),!1!==h.bSortable&&(c.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),gb(a,h.nTh,b))),h.sTitle!=c.html()&&c.html(h.sTitle),hb(a,"header")(a,c,h,n);l&&da(a.aoHeader,g);f(g).find(">tr").attr("role","row");
f(g).find(">tr>th, >tr>td").addClass(n.sHeaderTH);f(k).find(">tr>th, >tr>td").addClass(n.sFooterTH);if(null!==k)for(a=a.aoFooter[0],b=0,d=a.length;b<d;b++)h=p[b],h.nTf=a[b].cell,h.sClass&&f(h.nTf).addClass(h.sClass)}function ra(a,b,d){var c,e,h,k=[],l=[],n=a.aoColumns.length,p;if(b){d===g&&(d=!1);c=0;for(e=b.length;c<e;c++){k[c]=b[c].slice();k[c].nTr=b[c].nTr;for(h=n-1;0<=h;h--)a.aoColumns[h].bVisible||d||k[c].splice(h,1);l.push([])}c=0;for(e=k.length;c<e;c++){if(a=k[c].nTr)for(;h=a.firstChild;)a.removeChild(h);
h=0;for(b=k[c].length;h<b;h++)if(p=n=1,l[c][h]===g){a.appendChild(k[c][h].cell);for(l[c][h]=1;k[c+n]!==g&&k[c][h].cell==k[c+n][h].cell;)l[c+n][h]=1,n++;for(;k[c][h+p]!==g&&k[c][h].cell==k[c][h+p].cell;){for(d=0;d<n;d++)l[c+d][h+p]=1;p++}f(k[c][h].cell).attr("rowspan",n).attr("colspan",p)}}}}function na(a){var b=U(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==f.inArray(!1,b))T(a,!1);else{var b=[],d=0,c=a.asStripeClasses,e=c.length,h=a.oLanguage,k=a.iInitDisplayStart,l="ssp"==ia(a),n=a.aiDisplay;a.bDrawing=
!0;k!==g&&-1!==k&&(a._iDisplayStart=l?k:k>=a.fnRecordsDisplay()?0:k,a.iInitDisplayStart=-1);var k=a._iDisplayStart,p=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,T(a,!1);else if(!l)a.iDraw++;else if(!a.bDestroying&&!la(a))return;if(0!==n.length)for(h=l?a.aoData.length:p,l=l?0:k;l<h;l++){var q=n[l],s=a.aoData[q];null===s.nTr&&ca(a,q);q=s.nTr;if(0!==e){var m=c[d%e];s._sRowStripe!=m&&(f(q).removeClass(s._sRowStripe).addClass(m),s._sRowStripe=m)}U(a,"aoRowCallback",null,[q,s._aData,
d,l]);b.push(q);d++}else d=h.sZeroRecords,1==a.iDraw&&"ajax"==ia(a)?d=h.sLoadingRecords:h.sEmptyTable&&0===a.fnRecordsTotal()&&(d=h.sEmptyTable),b[0]=f("<tr/>",{"class":e?c[0]:""}).append(f("<td />",{valign:"top",colSpan:w(a),"class":a.oClasses.sRowEmpty}).html(d))[0];U(a,"aoHeaderCallback","header",[f(a.nTHead).children("tr")[0],x(a),k,p,n]);U(a,"aoFooterCallback","footer",[f(a.nTFoot).children("tr")[0],x(a),k,p,n]);c=f(a.nTBody);c.children().detach();c.append(f(b));U(a,"aoDrawCallback","draw",[a]);
a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function V(a,b){var d=a.oFeatures,c=d.bFilter;d.bSort&&Jb(a);c?N(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;na(a);a._drawHold=!1}function sa(a){var b=a.oClasses,d=f(a.nTable),d=f("<div/>").insertBefore(d),c=a.oFeatures,e=f("<div/>",{id:a.sTableId+"_wrapper","class":b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});a.nHolding=d[0];a.nTableWrapper=e[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var h=
a.sDom.split(""),g,k,l,n,p,q,s=0;s<h.length;s++){g=null;k=h[s];if("<"==k){l=f("<div/>")[0];n=h[s+1];if("'"==n||'"'==n){p="";for(q=2;h[s+q]!=n;)p+=h[s+q],q++;"H"==p?p=b.sJUIHeader:"F"==p&&(p=b.sJUIFooter);-1!=p.indexOf(".")?(n=p.split("."),l.id=n[0].substr(1,n[0].length-1),l.className=n[1]):"#"==p.charAt(0)?l.id=p.substr(1,p.length-1):l.className=p;s+=q}e.append(l);e=f(l)}else if(">"==k)e=e.parent();else if("l"==k&&c.bPaginate&&c.bLengthChange)g=mb(a);else if("f"==k&&c.bFilter)g=K(a);else if("r"==
k&&c.bProcessing)g=H(a);else if("t"==k)g=Cb(a);else if("i"==k&&c.bInfo)g=Bb(a);else if("p"==k&&c.bPaginate)g=Va(a);else if(0!==B.ext.feature.length)for(l=B.ext.feature,q=0,n=l.length;q<n;q++)if(k==l[q].cFeature){g=l[q].fnInit(a);break}g&&(l=a.aanFeatures,l[k]||(l[k]=[]),l[k].push(g),e.append(g))}d.replaceWith(e)}function da(a,b){var d=f(b).children("tr"),c,e,h,g,k,l,n,p,q,s;a.splice(0,a.length);h=0;for(l=d.length;h<l;h++)a.push([]);h=0;for(l=d.length;h<l;h++)for(c=d[h],e=c.firstChild;e;){if("TD"==
e.nodeName.toUpperCase()||"TH"==e.nodeName.toUpperCase()){p=1*e.getAttribute("colspan");q=1*e.getAttribute("rowspan");p=p&&0!==p&&1!==p?p:1;q=q&&0!==q&&1!==q?q:1;g=0;for(k=a[h];k[g];)g++;n=g;s=1===p?!0:!1;for(k=0;k<p;k++)for(g=0;g<q;g++)a[h+g][n+k]={cell:e,unique:s},a[h+g].nTr=c}e=e.nextSibling}}function va(a,b,d){var c=[];d||(d=a.aoHeader,b&&(d=[],da(d,b)));b=0;for(var e=d.length;b<e;b++)for(var f=0,h=d[b].length;f<h;f++)!d[b][f].unique||c[f]&&a.bSortCellsTop||(c[f]=d[b][f].cell);return c}function Aa(a,
b,d){U(a,"aoServerParams","serverParams",[b]);if(b&&f.isArray(b)){var c={},e=/(.*?)\[\]$/;f.each(b,function(a,b){var d=b.name.match(e);d?(d=d[0],c[d]||(c[d]=[]),c[d].push(b.value)):c[b.name]=b.value});b=c}var h,g=a.ajax,k=a.oInstance;if(f.isPlainObject(g)&&g.data){h=g.data;var l=f.isFunction(h)?h(b):h;b=f.isFunction(h)&&l?l:f.extend(!0,b,l);delete g.data}l={data:b,success:function(b){var c=b.error||b.sError;c&&a.oApi._fnLog(a,0,c);a.json=b;U(a,null,"xhr",[a,b]);d(b)},dataType:"json",cache:!1,type:a.sServerMethod,
error:function(b,d,c){c=a.oApi._fnLog;"parsererror"==d?c(a,0,"Invalid JSON response",1):4===b.readyState&&c(a,0,"Ajax error",7);T(a,!1)}};a.oAjaxData=b;U(a,null,"preXhr",[a,b]);a.fnServerData?a.fnServerData.call(k,a.sAjaxSource,f.map(b,function(a,b){return{name:b,value:a}}),d,a):a.sAjaxSource||"string"===typeof g?a.jqXHR=f.ajax(f.extend(l,{url:g||a.sAjaxSource})):f.isFunction(g)?a.jqXHR=g.call(k,b,d,a):(a.jqXHR=f.ajax(f.extend(l,g)),g.data=h)}function la(a){return a.bAjaxDataGet?(a.iDraw++,T(a,!0),
Aa(a,wa(a),function(b){cb(a,b)}),!1):!0}function wa(a){var b=a.aoColumns,d=b.length,c=a.oFeatures,e=a.oPreviousSearch,h=a.aoPreSearchCols,g,k=[],l,n,p,q=Ia(a);g=a._iDisplayStart;l=!1!==c.bPaginate?a._iDisplayLength:-1;var s=function(a,b){k.push({name:a,value:b})};s("sEcho",a.iDraw);s("iColumns",d);s("sColumns",ta(b,"sName").join(","));s("iDisplayStart",g);s("iDisplayLength",l);var m={draw:a.iDraw,columns:[],order:[],start:g,length:l,search:{value:e.sSearch,regex:e.bRegex}};for(g=0;g<d;g++)n=b[g],
p=h[g],l="function"==typeof n.mData?"function":n.mData,m.columns.push({data:l,name:n.sName,searchable:n.bSearchable,orderable:n.bSortable,search:{value:p.sSearch,regex:p.bRegex}}),s("mDataProp_"+g,l),c.bFilter&&(s("sSearch_"+g,p.sSearch),s("bRegex_"+g,p.bRegex),s("bSearchable_"+g,n.bSearchable)),c.bSort&&s("bSortable_"+g,n.bSortable);c.bFilter&&(s("sSearch",e.sSearch),s("bRegex",e.bRegex));c.bSort&&(f.each(q,function(a,b){m.order.push({column:b.col,dir:b.dir});s("iSortCol_"+a,b.col);s("sSortDir_"+
a,b.dir)}),s("iSortingCols",q.length));b=B.ext.legacy.ajax;return null===b?a.sAjaxSource?k:m:b?k:m}function cb(a,b){var d=function(a,d){return b[a]!==g?b[a]:b[d]},c=d("sEcho","draw"),e=d("iTotalRecords","recordsTotal"),d=d("iTotalDisplayRecords","recordsFiltered");if(c){if(1*c<a.iDraw)return;a.iDraw=1*c}M(a);a._iRecordsTotal=parseInt(e,10);a._iRecordsDisplay=parseInt(d,10);c=ua(a,b);e=0;for(d=c.length;e<d;e++)A(a,c[e]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;na(a);a._bInitComplete||
fb(a,b);a.bAjaxDataGet=!0;T(a,!1)}function ua(a,b){var d=f.isPlainObject(a.ajax)&&a.ajax.dataSrc!==g?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===d?b.aaData||b[d]:""!==d?L(d)(b):b}function K(a){var b=a.oClasses,d=a.sTableId,c=a.oLanguage,e=a.oPreviousSearch,h=a.aanFeatures,g='<input type="search" class="'+b.sFilterInput+'"/>',k=c.sSearch,k=k.match(/_INPUT_/)?k.replace("_INPUT_",g):k+g,b=f("<div/>",{id:h.f?null:d+"_filter","class":b.sFilter}).append(f("<label/>").append(k)),h=function(){var b=this.value?
this.value:"";b!=e.sSearch&&(N(a,{sSearch:b,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),a._iDisplayStart=0,na(a))},g=null!==a.searchDelay?a.searchDelay:"ssp"===ia(a)?400:0,l=f("input",b).val(e.sSearch).attr("placeholder",c.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",g?Ca(h,g):h).bind("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",d);f(a.nTable).on("search.dt.DT",function(b,d){if(a===d)try{l[0]!==m.activeElement&&l.val(e.sSearch)}catch(c){}});
return b[0]}function N(a,b,d){var c=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){c.sSearch=a.sSearch;c.bRegex=a.bRegex;c.bSmart=a.bSmart;c.bCaseInsensitive=a.bCaseInsensitive},h=function(a){return a.bEscapeRegex!==g?!a.bEscapeRegex:a.bRegex};z(a);if("ssp"!=ia(a)){Fb(a,b.sSearch,d,h(b),b.bSmart,b.bCaseInsensitive);f(b);for(b=0;b<e.length;b++)Eb(a,e[b].sSearch,b,h(e[b]),e[b].bSmart,e[b].bCaseInsensitive);p(a)}else f(b);a.bFiltered=!0;U(a,null,"search",[a])}function p(a){for(var b=B.ext.search,
d=a.aiDisplay,c,e,f=0,h=b.length;f<h;f++){for(var g=[],k=0,l=d.length;k<l;k++)e=d[k],c=a.aoData[e],b[f](a,c._aFilterData,e,c._aData,k)&&g.push(e);d.length=0;d.push.apply(d,g)}}function Eb(a,b,d,c,e,f){if(""!==b){var h=a.aiDisplay;c=nb(b,c,e,f);for(e=h.length-1;0<=e;e--)b=a.aoData[h[e]]._aFilterData[d],c.test(b)||h.splice(e,1)}}function Fb(a,b,d,c,e,f){c=nb(b,c,e,f);e=a.oPreviousSearch.sSearch;f=a.aiDisplayMaster;var h;0!==B.ext.search.length&&(d=!0);h=Ha(a);if(0>=b.length)a.aiDisplay=f.slice();else{if(h||
d||e.length>b.length||0!==b.indexOf(e)||a.bSorted)a.aiDisplay=f.slice();b=a.aiDisplay;for(d=b.length-1;0<=d;d--)c.test(a.aoData[b[d]]._sFilterRow)||b.splice(d,1)}}function nb(a,b,d,c){a=b?a:db(a);d&&(a="^(?=.*?"+f.map(a.match(/"[^"]+"|[^ ]+/g)||"",function(a){if('"'===a.charAt(0)){var b=a.match(/^"(.*)"$/);a=b?b[1]:a}return a.replace('"',"")}).join(")(?=.*?")+").*$");return new RegExp(a,c?"i":"")}function db(a){return a.replace(xb,"\\$1")}function Ha(a){var b=a.aoColumns,d,c,e,f,h,g,k,l,n=B.ext.type.search;
d=!1;c=0;for(f=a.aoData.length;c<f;c++)if(l=a.aoData[c],!l._aFilterData){g=[];e=0;for(h=b.length;e<h;e++)d=b[e],d.bSearchable?(k=E(a,c,e,"filter"),n[d.sType]&&(k=n[d.sType](k)),null===k&&(k=""),"string"!==typeof k&&k.toString&&(k=k.toString())):k="",k.indexOf&&-1!==k.indexOf("&")&&(Ya.innerHTML=k,k=Tb?Ya.textContent:Ya.innerText),k.replace&&(k=k.replace(/[\r\n]/g,"")),g.push(k);l._aFilterData=g;l._sFilterRow=g.join("  ");d=!0}return d}function ob(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,
caseInsensitive:a.bCaseInsensitive}}function pb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function Bb(a){var b=a.sTableId,d=a.aanFeatures.i,c=f("<div/>",{"class":a.oClasses.sInfo,id:d?null:b+"_info"});d||(a.aoDrawCallback.push({fn:Ta,sName:"information"}),c.attr("role","status").attr("aria-live","polite"),f(a.nTable).attr("aria-describedby",b+"_info"));return c[0]}function Ta(a){var b=a.aanFeatures.i;if(0!==b.length){var d=a.oLanguage,c=a._iDisplayStart+
1,e=a.fnDisplayEnd(),h=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),k=g?d.sInfo:d.sInfoEmpty;g!==h&&(k+=" "+d.sInfoFiltered);k+=d.sInfoPostFix;k=Gb(a,k);d=d.fnInfoCallback;null!==d&&(k=d.call(a.oInstance,a,c,e,h,g,k));f(b).html(k)}}function Gb(a,b){var d=a.fnFormatNumber,c=a._iDisplayStart+1,e=a._iDisplayLength,f=a.fnRecordsDisplay(),h=-1===e;return b.replace(/_START_/g,d.call(a,c)).replace(/_END_/g,d.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,d.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,d.call(a,
f)).replace(/_PAGE_/g,d.call(a,h?1:Math.ceil(c/e))).replace(/_PAGES_/g,d.call(a,h?1:Math.ceil(f/e)))}function Ua(a){var b,d,c=a.iInitDisplayStart,e=a.aoColumns,f;d=a.oFeatures;if(a.bInitialised){sa(a);Y(a);ra(a,a.aoHeader);ra(a,a.aoFooter);T(a,!0);d.bAutoWidth&&za(a);b=0;for(d=e.length;b<d;b++)f=e[b],f.sWidth&&(f.nTh.style.width=R(f.sWidth));V(a);e=ia(a);"ssp"!=e&&("ajax"==e?Aa(a,[],function(d){var e=ua(a,d);for(b=0;b<e.length;b++)A(a,e[b]);a.iInitDisplayStart=c;V(a);T(a,!1);fb(a,d)},a):(T(a,!1),
fb(a)))}else setTimeout(function(){Ua(a)},200)}function fb(a,b){a._bInitComplete=!0;b&&h(a);U(a,"aoInitComplete","init",[a,b])}function fa(a,b){var d=parseInt(b,10);a._iDisplayLength=d;vb(a);U(a,null,"length",[a,d])}function mb(a){for(var b=a.oClasses,d=a.sTableId,c=a.aLengthMenu,e=f.isArray(c[0]),h=e?c[0]:c,c=e?c[1]:c,e=f("<select/>",{name:d+"_length","aria-controls":d,"class":b.sLengthSelect}),g=0,k=h.length;g<k;g++)e[0][g]=new Option(c[g],h[g]);var l=f("<div><label/></div>").addClass(b.sLength);
a.aanFeatures.l||(l[0].id=d+"_length");l.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",e[0].outerHTML));f("select",l).val(a._iDisplayLength).bind("change.DT",function(b){fa(a,f(this).val());na(a)});f(a.nTable).bind("length.dt.DT",function(b,d,c){a===d&&f("select",l).val(c)});return l[0]}function Va(a){var b=a.sPaginationType,d=B.ext.pager[b],c="function"===typeof d,e=function(a){na(a)},b=f("<div/>").addClass(a.oClasses.sPaging+b)[0],h=a.aanFeatures;c||d.fnInit(a,b,e);h.p||(b.id=a.sTableId+
"_paginate",a.aoDrawCallback.push({fn:function(a){if(c){var b=a._iDisplayStart,f=a._iDisplayLength,g=a.fnRecordsDisplay(),k=-1===f,b=k?0:Math.ceil(b/f),f=k?1:Math.ceil(g/f),g=d(b,f),l,k=0;for(l=h.p.length;k<l;k++)hb(a,"pageButton")(a,h.p[k],k,g,b,f)}else d.fnUpdate(a,e)},sName:"pagination"}));return b}function ea(a,b,d){var c=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();0===f||-1===e?c=0:"number"===typeof b?(c=b*e,c>f&&(c=0)):"first"==b?c=0:"previous"==b?(c=0<=e?c-e:0,0>c&&(c=0)):"next"==
b?c+e<f&&(c+=e):"last"==b?c=Math.floor((f-1)/e)*e:Fa(a,0,"Unknown paging action: "+b,5);b=a._iDisplayStart!==c;a._iDisplayStart=c;b&&(U(a,null,"page",[a]),d&&na(a));return b}function H(a){return f("<div/>",{id:a.aanFeatures.r?null:a.sTableId+"_processing","class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function T(a,b){a.oFeatures.bProcessing&&f(a.aanFeatures.r).css("display",b?"block":"none");U(a,null,"processing",[a,b])}function Cb(a){var b=f(a.nTable);b.attr("role",
"grid");var d=a.oScroll;if(""===d.sX&&""===d.sY)return a.nTable;var c=d.sX,e=d.sY,h=a.oClasses,g=b.children("caption"),k=g.length?g[0]._captionSide:null,l=f(b[0].cloneNode(!1)),n=f(b[0].cloneNode(!1)),p=b.children("tfoot");d.sX&&"100%"===b.attr("width")&&b.removeAttr("width");p.length||(p=null);d=f("<div/>",{"class":h.sScrollWrapper}).append(f("<div/>",{"class":h.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:c?c?R(c):null:"100%"}).append(f("<div/>",{"class":h.sScrollHeadInner}).css({"box-sizing":"content-box",
width:d.sXInner||"100%"}).append(l.removeAttr("id").css("margin-left",0).append("top"===k?g:null).append(b.children("thead"))))).append(f("<div/>",{"class":h.sScrollBody}).css({overflow:"auto",height:e?R(e):null,width:c?R(c):null}).append(b));p&&d.append(f("<div/>",{"class":h.sScrollFoot}).css({overflow:"hidden",border:0,width:c?c?R(c):null:"100%"}).append(f("<div/>",{"class":h.sScrollFootInner}).append(n.removeAttr("id").css("margin-left",0).append("bottom"===k?g:null).append(b.children("tfoot")))));
var b=d.children(),q=b[0],h=b[1],s=p?b[2]:null;c&&f(h).scroll(function(a){a=this.scrollLeft;q.scrollLeft=a;p&&(s.scrollLeft=a)});a.nScrollHead=q;a.nScrollBody=h;a.nScrollFoot=s;a.aoDrawCallback.push({fn:Pa,sName:"scrolling"});return d[0]}function Pa(a){var b=a.oScroll,d=b.sX,c=b.sXInner,e=b.sY,h=b.iBarWidth,g=f(a.nScrollHead),k=g[0].style,l=g.children("div"),n=l[0].style,p=l.children("table"),l=a.nScrollBody,q=f(l),m=l.style,r=f(a.nScrollFoot).children("div"),v=r.children("table"),y=f(a.nTHead),w=
f(a.nTable),z=w[0],C=z.style,A=a.nTFoot?f(a.nTFoot):null,x=a.oBrowser,F=x.bScrollOversize,G,E,B,M,O,D=[],P=[],ba=[],L,K=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};w.children("thead, tfoot").remove();O=y.clone().prependTo(w);G=y.find("tr");B=O.find("tr");O.find("th, td").removeAttr("tabindex");A&&(M=A.clone().prependTo(w),E=A.find("tr"),M=M.find("tr"));d||(m.width="100%",g[0].style.width="100%");f.each(va(a,O),function(b,d){L=
s(a,b);d.style.width=a.aoColumns[L].sWidth});A&&oa(function(a){a.style.width=""},M);b.bCollapse&&""!==e&&(m.height=q[0].offsetHeight+y[0].offsetHeight+"px");g=w.outerWidth();""===d?(C.width="100%",F&&(w.find("tbody").height()>l.offsetHeight||"scroll"==q.css("overflow-y"))&&(C.width=R(w.outerWidth()-h))):""!==c?C.width=R(c):g==q.width()&&q.height()<w.height()?(C.width=R(g-h),w.outerWidth()>g-h&&(C.width=R(g))):C.width=R(g);g=w.outerWidth();oa(K,B);oa(function(a){ba.push(a.innerHTML);D.push(R(f(a).css("width")))},
B);oa(function(a,b){a.style.width=D[b]},G);f(B).height(0);A&&(oa(K,M),oa(function(a){P.push(R(f(a).css("width")))},M),oa(function(a,b){a.style.width=P[b]},E),f(M).height(0));oa(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+ba[b]+"</div>";a.style.width=D[b]},B);A&&oa(function(a,b){a.innerHTML="";a.style.width=P[b]},M);w.outerWidth()<g?(E=l.scrollHeight>l.offsetHeight||"scroll"==q.css("overflow-y")?g+h:g,F&&(l.scrollHeight>l.offsetHeight||"scroll"==q.css("overflow-y"))&&
(C.width=R(E-h)),""!==d&&""===c||Fa(a,1,"Possible column misalignment",6)):E="100%";m.width=R(E);k.width=R(E);A&&(a.nScrollFoot.style.width=R(E));!e&&F&&(m.height=R(z.offsetHeight+h));e&&b.bCollapse&&(m.height=R(e),b=d&&z.offsetWidth>l.offsetWidth?h:0,z.offsetHeight<l.offsetHeight&&(m.height=R(z.offsetHeight+b)));b=w.outerWidth();p[0].style.width=R(b);n.width=R(b);p=w.height()>l.clientHeight||"scroll"==q.css("overflow-y");x="padding"+(x.bScrollbarLeft?"Left":"Right");n[x]=p?h+"px":"0px";A&&(v[0].style.width=
R(b),r[0].style.width=R(b),r[0].style[x]=p?h+"px":"0px");q.scroll();!a.bSorted&&!a.bFiltered||a._drawHold||(l.scrollTop=0)}function oa(a,b,d){for(var c=0,e=0,f=b.length,h,g;e<f;){h=b[e].firstChild;for(g=d?d[e].firstChild:null;h;)1===h.nodeType&&(d?a(h,g,c):a(h,c),c++),h=h.nextSibling,g=d?g.nextSibling:null;e++}}function za(a){var b=a.nTable,d=a.aoColumns,e=a.oScroll,g=e.sY,k=e.sX,l=e.sXInner,n=d.length,e=y(a,"bVisible"),p=f("th",a.nTHead),q=b.getAttribute("width"),s=b.parentNode,m=!1,r,v;for(r=0;r<
e.length;r++)v=d[e[r]],null!==v.sWidth&&(v.sWidth=qb(v.sWidthOrig,s),m=!0);if(m||k||g||n!=w(a)||n!=p.length){n=f(b).clone().empty().css("visibility","hidden").removeAttr("id").append(f(a.nTHead).clone(!1)).append(f(a.nTFoot).clone(!1)).append(f("<tbody><tr/></tbody>"));n.find("tfoot th, tfoot td").css("width","");var z=n.find("tbody tr"),p=va(a,n.find("thead")[0]);for(r=0;r<e.length;r++)v=d[e[r]],p[r].style.width=null!==v.sWidthOrig&&""!==v.sWidthOrig?R(v.sWidthOrig):"";if(a.aoData.length)for(r=0;r<
e.length;r++)m=e[r],v=d[m],f(Ib(a,m)).clone(!1).append(v.sContentPadding).appendTo(z);n.appendTo(s);k&&l?n.width(l):k?(n.css("width","auto"),n.width()<s.offsetWidth&&n.width(s.offsetWidth)):g?n.width(s.offsetWidth):q&&n.width(q);Hb(a,n[0]);if(k){for(r=l=0;r<e.length;r++)v=d[e[r]],g=f(p[r]).outerWidth(),l+=null===v.sWidthOrig?g:parseInt(v.sWidth,10)+g-f(p[r]).width();n.width(R(l));b.style.width=R(l)}for(r=0;r<e.length;r++)if(v=d[e[r]],g=f(p[r]).width())v.sWidth=R(g);b.style.width=R(n.css("width"));
n.remove()}else for(r=0;r<n;r++)d[r].sWidth=R(p.eq(r).width());q&&(b.style.width=R(q));!q&&!k||a._reszEvt||(f(c).bind("resize.DT-"+a.sInstance,Ca(function(){h(a)})),a._reszEvt=!0)}function Ca(a,b){var d=b!==g?b:200,c,e;return function(){var b=this,f=+new Date,h=arguments;c&&f<c+d?(clearTimeout(e),e=setTimeout(function(){c=g;a.apply(b,h)},d)):c?(c=f,a.apply(b,h)):c=f}}function qb(a,b){if(!a)return 0;var d=f("<div/>").css("width",R(a)).appendTo(b||m.body),c=d[0].offsetWidth;d.remove();return c}function Hb(a,
b){var d=a.oScroll;if(d.sX||d.sY)d=d.sX?0:d.iBarWidth,b.style.width=R(f(b).outerWidth()-d)}function Ib(a,b){var d=rb(a,b);if(0>d)return null;var c=a.aoData[d];return c.nTr?c.anCells[b]:f("<td/>").html(E(a,d,b,"display"))[0]}function rb(a,b){for(var d,c=-1,e=-1,f=0,h=a.aoData.length;f<h;f++)d=E(a,f,b,"display")+"",d=d.replace(Ub,""),d.length>c&&(c=d.length,e=f);return e}function R(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function sb(){if(!B.__scrollbarWidth){var a=
f("<p/>").css({width:"100%",height:200,padding:0})[0],b=f("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(a).appendTo("body"),d=a.offsetWidth;b.css("overflow","scroll");a=a.offsetWidth;d===a&&(a=b[0].clientWidth);b.remove();B.__scrollbarWidth=d-a}return B.__scrollbarWidth}function Ia(a){var b,d,c=[],e=a.aoColumns,h,k,l,n;b=a.aaSortingFixed;d=f.isPlainObject(b);var p=[];h=function(a){a.length&&!f.isArray(a[0])?p.push(a):
p.push.apply(p,a)};f.isArray(b)&&h(b);d&&b.pre&&h(b.pre);h(a.aaSorting);d&&b.post&&h(b.post);for(a=0;a<p.length;a++)for(n=p[a][0],h=e[n].aDataSort,b=0,d=h.length;b<d;b++)k=h[b],l=e[k].sType||"string",p[a]._idx===g&&(p[a]._idx=f.inArray(p[a][1],e[k].asSorting)),c.push({src:n,col:k,dir:p[a][1],index:p[a]._idx,type:l,formatter:B.ext.type.order[l+"-pre"]});return c}function Jb(a){var b,d,c=[],e=B.ext.type.order,h=a.aoData,f=0,g,k=a.aiDisplayMaster,l;z(a);l=Ia(a);b=0;for(d=l.length;b<d;b++)g=l[b],g.formatter&&
f++,Lb(a,g.col);if("ssp"!=ia(a)&&0!==l.length){b=0;for(d=k.length;b<d;b++)c[k[b]]=b;f===l.length?k.sort(function(a,b){var d,e,f,g,k=l.length,n=h[a]._aSortData,u=h[b]._aSortData;for(f=0;f<k;f++)if(g=l[f],d=n[g.col],e=u[g.col],d=d<e?-1:d>e?1:0,0!==d)return"asc"===g.dir?d:-d;d=c[a];e=c[b];return d<e?-1:d>e?1:0}):k.sort(function(a,b){var d,f,g,k,n=l.length,u=h[a]._aSortData,p=h[b]._aSortData;for(g=0;g<n;g++)if(k=l[g],d=u[k.col],f=p[k.col],k=e[k.type+"-"+k.dir]||e["string-"+k.dir],d=k(d,f),0!==d)return d;
d=c[a];f=c[b];return d<f?-1:d>f?1:0})}a.bSorted=!0}function Kb(a){var b,d,c=a.aoColumns,e=Ia(a);a=a.oLanguage.oAria;for(var f=0,h=c.length;f<h;f++){d=c[f];var g=d.asSorting;b=d.sTitle.replace(/<.*?>/g,"");var k=d.nTh;k.removeAttribute("aria-sort");d.bSortable&&(0<e.length&&e[0].col==f?(k.setAttribute("aria-sort","asc"==e[0].dir?"ascending":"descending"),d=g[e[0].index+1]||g[0]):d=g[0],b+="asc"===d?a.sSortAscending:a.sSortDescending);k.setAttribute("aria-label",b)}}function tb(a,b,d,c){var e=a.aaSorting,
h=a.aoColumns[b].asSorting,k=function(a,b){var d=a._idx;d===g&&(d=f.inArray(a[1],h));return d+1<h.length?d+1:b?null:0};"number"===typeof e[0]&&(e=a.aaSorting=[e]);d&&a.oFeatures.bSortMulti?(d=f.inArray(b,ta(e,"0")),-1!==d?(b=k(e[d],!0),null===b?e.splice(d,1):(e[d][1]=h[b],e[d]._idx=b)):(e.push([b,h[0],0]),e[e.length-1]._idx=0)):e.length&&e[0][0]==b?(b=k(e[0]),e.length=1,e[0][1]=h[b],e[0]._idx=b):(e.length=0,e.push([b,h[0]]),e[0]._idx=0);V(a);"function"==typeof c&&c(a)}function gb(a,b,d,c){var e=a.aoColumns[d];
ub(b,{},function(b){!1!==e.bSortable&&(a.oFeatures.bProcessing?(T(a,!0),setTimeout(function(){tb(a,d,b.shiftKey,c);"ssp"!==ia(a)&&T(a,!1)},0)):tb(a,d,b.shiftKey,c))})}function ab(a){var b=a.aLastSort,d=a.oClasses.sSortColumn,c=Ia(a),e=a.oFeatures,h,g;if(e.bSort&&e.bSortClasses){e=0;for(h=b.length;e<h;e++)g=b[e].src,f(ta(a.aoData,"anCells",g)).removeClass(d+(2>e?e+1:3));e=0;for(h=c.length;e<h;e++)g=c[e].src,f(ta(a.aoData,"anCells",g)).addClass(d+(2>e?e+1:3))}a.aLastSort=c}function Lb(a,b){var d=a.aoColumns[b],
c=B.ext.order[d.sSortDataType],e;c&&(e=c.call(a.oInstance,a,b,v(a,b)));for(var h,f=B.ext.type.order[d.sType+"-pre"],g=0,k=a.aoData.length;g<k;g++)if(d=a.aoData[g],d._aSortData||(d._aSortData=[]),!d._aSortData[b]||c)h=c?e[g]:E(a,g,b,"sort"),d._aSortData[b]=f?f(h):h}function ka(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:f.extend(!0,[],a.aaSorting),search:ob(a.oPreviousSearch),columns:f.map(a.aoColumns,function(b,d){return{visible:b.bVisible,
search:ob(a.aoPreSearchCols[d])}})};U(a,"aoStateSaveParams","stateSaveParams",[a,b]);a.oSavedState=b;a.fnStateSaveCallback.call(a.oInstance,a,b)}}function Ra(a,b){var d,c,e=a.aoColumns;if(a.oFeatures.bStateSave){var h=a.fnStateLoadCallback.call(a.oInstance,a);if(h&&h.time&&(d=U(a,"aoStateLoadParams","stateLoadParams",[a,h]),-1===f.inArray(!1,d)&&(d=a.iStateDuration,!(0<d&&h.time<+new Date-1E3*d)&&e.length===h.columns.length))){a.oLoadedState=f.extend(!0,{},h);a._iDisplayStart=h.start;a.iInitDisplayStart=
h.start;a._iDisplayLength=h.length;a.aaSorting=[];f.each(h.order,function(b,d){a.aaSorting.push(d[0]>=e.length?[0,d[1]]:d)});f.extend(a.oPreviousSearch,pb(h.search));d=0;for(c=h.columns.length;d<c;d++){var g=h.columns[d];e[d].bVisible=g.visible;f.extend(a.aoPreSearchCols[d],pb(g.search))}U(a,"aoStateLoaded","stateLoaded",[a,h])}}}function Qa(a){var b=B.settings;a=f.inArray(a,ta(b,"nTable"));return-1!==a?b[a]:null}function Fa(a,b,d,e){d="DataTables warning: "+(null!==a?"table id="+a.sTableId+" - ":
"")+d;e&&(d+=". For more information about this error, please see http://datatables.net/tn/"+e);if(b)c.console&&console.log&&console.log(d);else if(a=B.ext,"alert"==(a.sErrMode||a.errMode))alert(d);else throw Error(d);}function ma(a,b,d,c){f.isArray(d)?f.each(d,function(d,c){f.isArray(c)?ma(a,b,c[0],c[1]):ma(a,b,c)}):(c===g&&(c=d),b[d]!==g&&(a[c]=b[d]))}function Sa(a,b,d){var c,e;for(e in b)b.hasOwnProperty(e)&&(c=b[e],f.isPlainObject(c)?(f.isPlainObject(a[e])||(a[e]={}),f.extend(!0,a[e],c)):d&&"data"!==
e&&"aaData"!==e&&f.isArray(c)?a[e]=c.slice():a[e]=c);return a}function ub(a,b,d){f(a).bind("click.DT",b,function(b){a.blur();d(b)}).bind("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),d(a))}).bind("selectstart.DT",function(){return!1})}function ja(a,b,d,c){d&&a[b].push({fn:d,sName:c})}function U(a,b,d,c){var e=[];b&&(e=f.map(a[b].slice().reverse(),function(b,d){return b.fn.apply(a.oInstance,c)}));null!==d&&f(a.nTable).trigger(d+".dt",c);return e}function vb(a){var b=a._iDisplayStart,
d=a.fnDisplayEnd(),c=a._iDisplayLength;b>=d&&(b=d-c);b-=b%c;if(-1===c||0>b)b=0;a._iDisplayStart=b}function hb(a,b){var d=a.renderer,c=B.ext.renderer[b];return f.isPlainObject(d)&&d[b]?c[d[b]]||c._:"string"===typeof d?c[d]||c._:c._}function ia(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function Da(a,b){var d=[],d=Yb.numbers_length,c=Math.floor(d/2);b<=d?d=Ka(0,b):a<=c?(d=Ka(0,d-2),d.push("ellipsis"),d.push(b-1)):(a>=b-1-c?d=Ka(b-(d-2),b):(d=Ka(a-1,a+2),d.push("ellipsis"),
d.push(b-1)),d.splice(0,0,"ellipsis"),d.splice(0,0,0));d.DT_el="span";return d}function Wa(a){f.each({num:function(b){return Db(b,a)},"num-fmt":function(b){return Db(b,a,Ba)},"html-num":function(b){return Db(b,a,Ma)},"html-num-fmt":function(b){return Db(b,a,Ma,Ba)}},function(b,d){Z.type.order[b+a+"-pre"]=d;b.match(/^html\-/)&&(Z.type.search[b+a]=Z.type.search.html)})}function Mb(a){return function(){var b=[Qa(this[B.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return B.ext.internal[a].apply(this,
b)}}var B,Z,Q,I,S,Ja={},Nb=/[\r\n]/g,Ma=/<.*?>/g,Sb=/^[\w\+\-]/,wb=/[\w\+\-]$/,xb=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\|\$|\^|\-)/g,Ba=/[',$\u00a3\u20ac\u00a5%\u2009\u202F]/g,ga=function(a){return a&&!0!==a&&"-"!==a?!1:!0},Ob=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},yb=function(a,b){Ja[b]||(Ja[b]=new RegExp(db(b),"g"));return"string"===typeof a&&"."!==b?a.replace(/\./g,"").replace(Ja[b],"."):a},zb=function(a,b,d){var c="string"===typeof a;b&&c&&(a=yb(a,b));d&&c&&(a=
a.replace(Ba,""));return ga(a)||!isNaN(parseFloat(a))&&isFinite(a)},Pb=function(a,b,d){return ga(a)?!0:ga(a)||"string"===typeof a?zb(a.replace(Ma,""),b,d)?!0:null:null},ta=function(a,b,d){var c=[],e=0,h=a.length;if(d!==g)for(;e<h;e++)a[e]&&a[e][b]&&c.push(a[e][b][d]);else for(;e<h;e++)a[e]&&c.push(a[e][b]);return c},Na=function(a,b,d,c){var e=[],h=0,f=b.length;if(c!==g)for(;h<f;h++)a[b[h]][d]&&e.push(a[b[h]][d][c]);else for(;h<f;h++)e.push(a[b[h]][d]);return e},Ka=function(a,b){var d=[],c;b===g?(b=
0,c=a):(c=b,b=a);for(var e=b;e<c;e++)d.push(e);return d},bb=function(a){for(var b=[],d=0,c=a.length;d<c;d++)a[d]&&b.push(a[d]);return b},ib=function(a){var b=[],d,c,e=a.length,h,f=0;c=0;a:for(;c<e;c++){d=a[c];for(h=0;h<f;h++)if(b[h]===d)continue a;b.push(d);f++}return b},pa=function(a,b,d){a[b]!==g&&(a[d]=a[b])},Xa=/\[.*?\]$/,La=/\(\)$/,Ya=f("<div>")[0],Tb=Ya.textContent!==g,Ub=/<.*?>/g;B=function(c){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,b){return this.api(!0).rows(a,
b).data()};this.api=function(a){return a?new Q(Qa(this[Z.iApiIndex])):new Q(this)};this.fnAddData=function(a,b){var d=this.api(!0),c=f.isArray(a)&&(f.isArray(a[0])||f.isPlainObject(a[0]))?d.rows.add(a):d.row.add(a);(b===g||b)&&d.draw();return c.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),d=b.settings()[0],c=d.oScroll;a===g||a?b.draw(!1):""===c.sX&&""===c.sY||Pa(d)};this.fnClearTable=function(a){var b=this.api(!0).clear();(a===g||a)&&b.draw()};this.fnClose=
function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,b,d){var c=this.api(!0);a=c.rows(a);var e=a.settings()[0],h=e.aoData[a[0][0]];a.remove();b&&b.call(this,e,h);(d===g||d)&&c.draw();return h};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(!a)};this.fnFilter=function(a,b,d,c,e,h){e=this.api(!0);null===b||b===g?e.search(a,d,c,h):e.column(b).search(a,d,c,h);e.draw()};this.fnGetData=function(a,b){var d=this.api(!0);if(a!==g){var c=a.nodeName?
a.nodeName.toLowerCase():"";return b!==g||"td"==c||"th"==c?d.cell(a,b).data():d.row(a).data()||null}return d.data().toArray()};this.fnGetNodes=function(a){var b=this.api(!0);return a!==g?b.row(a).node():b.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),d=a.nodeName.toUpperCase();return"TR"==d?b.row(a).index():"TD"==d||"TH"==d?(a=b.cell(a).index(),[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};this.fnOpen=
function(a,b,d){return this.api(!0).row(a).child(b,d).show().child()[0]};this.fnPageChange=function(a,b){var d=this.api(!0).page(a);(b===g||b)&&d.draw(!1)};this.fnSetColumnVis=function(a,b,d){a=this.api(!0).column(a).visible(b);(d===g||d)&&a.columns.adjust().draw()};this.fnSettings=function(){return Qa(this[Z.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=function(a,b,d){this.api(!0).order.listener(a,b,d)};this.fnUpdate=function(a,b,d,c,e){var h=this.api(!0);
d===g||null===d?h.row(b).data(a):h.cell(b,d).data(a);(e===g||e)&&h.columns.adjust();(c===g||c)&&h.draw();return 0};this.fnVersionCheck=Z.fnVersionCheck;var e=this,h=c===g,p=this.length;h&&(c={});this.oApi=this.internal=Z.internal;for(var q in B.ext.internal)q&&(this[q]=Mb(q));this.each(function(){var q={},q=1<p?Sa(q,c,!0):c,s=0,m,v=this.getAttribute("id"),y=!1,w=B.defaults;if("table"!=this.nodeName.toLowerCase())Fa(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{r(w);k(w.column);
n(w,w,!0);n(w.column,w.column,!0);n(w,q);var z=B.settings,s=0;for(m=z.length;s<m;s++){if(z[s].nTable==this){m=q.bRetrieve!==g?q.bRetrieve:w.bRetrieve;if(h||m)return z[s].oInstance;if(q.bDestroy!==g?q.bDestroy:w.bDestroy){z[s].oInstance.fnDestroy();break}else{Fa(z[s],0,"Cannot reinitialise DataTable",3);return}}if(z[s].sTableId==this.id){z.splice(s,1);break}}if(null===v||""===v)this.id=v="DataTables_Table_"+B.ext._unique++;var x=f.extend(!0,{},B.models.oSettings,{nTable:this,oApi:e.internal,oInit:q,
sDestroyWidth:f(this)[0].style.width,sInstance:v,sTableId:v});z.push(x);x.oInstance=1===e.length?e:f(this).dataTable();r(q);q.oLanguage&&l(q.oLanguage);q.aLengthMenu&&!q.iDisplayLength&&(q.iDisplayLength=f.isArray(q.aLengthMenu[0])?q.aLengthMenu[0][0]:q.aLengthMenu[0]);q=Sa(f.extend(!0,{},w),q);ma(x.oFeatures,q,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));ma(x,q,["asStripeClasses","ajax","fnServerData","fnFormatNumber",
"sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);ma(x.oScroll,q,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);
ma(x.oLanguage,q,"fnInfoCallback");ja(x,"aoDrawCallback",q.fnDrawCallback,"user");ja(x,"aoServerParams",q.fnServerParams,"user");ja(x,"aoStateSaveParams",q.fnStateSaveParams,"user");ja(x,"aoStateLoadParams",q.fnStateLoadParams,"user");ja(x,"aoStateLoaded",q.fnStateLoaded,"user");ja(x,"aoRowCallback",q.fnRowCallback,"user");ja(x,"aoRowCreatedCallback",q.fnCreatedRow,"user");ja(x,"aoHeaderCallback",q.fnHeaderCallback,"user");ja(x,"aoFooterCallback",q.fnFooterCallback,"user");ja(x,"aoInitComplete",q.fnInitComplete,
"user");ja(x,"aoPreDrawCallback",q.fnPreDrawCallback,"user");v=x.oClasses;q.bJQueryUI?(f.extend(v,B.ext.oJUIClasses,q.oClasses),q.sDom===w.sDom&&"lfrtip"===w.sDom&&(x.sDom='<"H"lfr>t<"F"ip>'),x.renderer)?f.isPlainObject(x.renderer)&&!x.renderer.header&&(x.renderer.header="jqueryui"):x.renderer="jqueryui":f.extend(v,B.ext.classes,q.oClasses);f(this).addClass(v.sTable);if(""!==x.oScroll.sX||""!==x.oScroll.sY)x.oScroll.iBarWidth=sb();!0===x.oScroll.sX&&(x.oScroll.sX="100%");x.iInitDisplayStart===g&&
(x.iInitDisplayStart=q.iDisplayStart,x._iDisplayStart=q.iDisplayStart);null!==q.iDeferLoading&&(x.bDeferLoading=!0,s=f.isArray(q.iDeferLoading),x._iRecordsDisplay=s?q.iDeferLoading[0]:q.iDeferLoading,x._iRecordsTotal=s?q.iDeferLoading[1]:q.iDeferLoading);var eb=x.oLanguage;f.extend(!0,eb,q.oLanguage);""!==eb.sUrl&&(f.ajax({dataType:"json",url:eb.sUrl,success:function(a){l(a);n(w.oLanguage,a);f.extend(!0,eb,a);Ua(x)},error:function(){Ua(x)}}),y=!0);null===q.asStripeClasses&&(x.asStripeClasses=[v.sStripeOdd,
v.sStripeEven]);var s=x.asStripeClasses,E=f("tbody tr:eq(0)",this);-1!==f.inArray(!0,f.map(s,function(a,b){return E.hasClass(a)}))&&(f("tbody tr",this).removeClass(s.join(" ")),x.asDestroyStripes=s.slice());var z=[],G,s=this.getElementsByTagName("thead");0!==s.length&&(da(x.aoHeader,s[0]),z=va(x));if(null===q.aoColumns)for(G=[],s=0,m=z.length;s<m;s++)G.push(null);else G=q.aoColumns;s=0;for(m=G.length;s<m;s++)a(x,z?z[s]:null);C(x,q.aoColumnDefs,G,function(a,b){d(x,a,b)});if(E.length){var M=function(a,
b){return a.getAttribute("data-"+b)?b:null};f.each(ha(x,E[0]).cells,function(a,b){var c=x.aoColumns[a];if(c.mData===a){var e=M(b,"sort")||M(b,"order"),h=M(b,"filter")||M(b,"search");if(null!==e||null!==h)c.mData={_:a+".display",sort:null!==e?a+".@data-"+e:g,type:null!==e?a+".@data-"+e:g,filter:null!==h?a+".@data-"+h:g},d(x,a)}})}var O=x.oFeatures;q.bStateSave&&(O.bStateSave=!0,Ra(x,q),ja(x,"aoDrawCallback",ka,"state_save"));if(q.aaSorting===g)for(z=x.aaSorting,s=0,m=z.length;s<m;s++)z[s][1]=x.aoColumns[s].asSorting[0];
ab(x);O.bSort&&ja(x,"aoDrawCallback",function(){if(x.bSorted){var a=Ia(x),b={};f.each(a,function(a,d){b[d.src]=d.dir});U(x,null,"order",[x,a,b]);Kb(x)}});ja(x,"aoDrawCallback",function(){(x.bSorted||"ssp"===ia(x)||O.bDeferRender)&&ab(x)},"sc");b(x);s=f(this).children("caption").each(function(){this._captionSide=f(this).css("caption-side")});m=f(this).children("thead");0===m.length&&(m=f("<thead/>").appendTo(this));x.nTHead=m[0];m=f(this).children("tbody");0===m.length&&(m=f("<tbody/>").appendTo(this));
x.nTBody=m[0];m=f(this).children("tfoot");0===m.length&&0<s.length&&(""!==x.oScroll.sX||""!==x.oScroll.sY)&&(m=f("<tfoot/>").appendTo(this));0===m.length||0===m.children().length?f(this).addClass(v.sNoFooter):0<m.length&&(x.nTFoot=m[0],da(x.aoFooter,x.nTFoot));if(q.aaData)for(s=0;s<q.aaData.length;s++)A(x,q.aaData[s]);else(x.bDeferLoading||"dom"==ia(x))&&F(x,f(x.nTBody).children("tr"));x.aiDisplay=x.aiDisplayMaster.slice();x.bInitialised=!0;!1===y&&Ua(x)}});e=null;return this};var Qb=[],aa=Array.prototype,
Vb=function(a){var b,d,c=B.settings,e=f.map(c,function(a,b){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&"table"===a.nodeName.toLowerCase())return b=f.inArray(a,e),-1!==b?[c[b]]:null;if(a&&"function"===typeof a.settings)return a.settings().toArray();"string"===typeof a?d=f(a):a instanceof f&&(d=a)}else return[];if(d)return d.map(function(a){b=f.inArray(this,e);return-1!==b?c[b]:null}).toArray()};Q=function(a,b){if(!this instanceof Q)throw"DT API must be constructed as a new object";
var d=[],c=function(a){(a=Vb(a))&&d.push.apply(d,a)};if(f.isArray(a))for(var e=0,h=a.length;e<h;e++)c(a[e]);else c(a);this.context=ib(d);b&&this.push.apply(this,b.toArray?b.toArray():b);this.selector={rows:null,cols:null,opts:null};Q.extend(this,this,Qb)};B.Api=Q;Q.prototype={concat:aa.concat,context:[],each:function(a){for(var b=0,d=this.length;b<d;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new Q(b[a],this[a]):null},filter:function(a){var b=[];
if(aa.filter)b=aa.filter.call(this,a,this);else for(var d=0,c=this.length;d<c;d++)a.call(this,this[d],d,this)&&b.push(this[d]);return new Q(this.context,b)},flatten:function(){var a=[];return new Q(this.context,a.concat.apply(a,this.toArray()))},join:aa.join,indexOf:aa.indexOf||function(a,b){for(var d=b||0,c=this.length;d<c;d++)if(this[d]===a)return d;return-1},iterator:function(a,b,d,c){var e=[],h,f,k,l,n,q=this.context,p,s,m=this.selector;"string"===typeof a&&(c=d,d=b,b=a,a=!1);f=0;for(k=q.length;f<
k;f++){var r=new Q(q[f]);if("table"===b)h=d.call(r,q[f],f),h!==g&&e.push(h);else if("columns"===b||"rows"===b)h=d.call(r,q[f],this[f],f),h!==g&&e.push(h);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b)for(s=this[f],"column-rows"===b&&(p=lb(q[f],m.opts)),l=0,n=s.length;l<n;l++)h=s[l],h="cell"===b?d.call(r,q[f],h.row,h.column,f,l):d.call(r,q[f],h,f,l,p),h!==g&&e.push(h)}return e.length||c?(a=new Q(q,a?e.concat.apply([],e):e),b=a.selector,b.rows=m.rows,b.cols=m.cols,b.opts=m.opts,a):
this},lastIndexOf:aa.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(aa.map)b=aa.map.call(this,a,this);else for(var d=0,c=this.length;d<c;d++)b.push(a.call(this,this[d],d));return new Q(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:aa.pop,push:aa.push,reduce:aa.reduce||function(a,b){return e(this,a,b,0,this.length,1)},reduceRight:aa.reduceRight||function(a,b){return e(this,a,b,this.length-
1,-1,-1)},reverse:aa.reverse,selector:null,shift:aa.shift,sort:aa.sort,splice:aa.splice,toArray:function(){return aa.slice.call(this)},to$:function(){return f(this)},toJQuery:function(){return f(this)},unique:function(){return new Q(this.context,ib(this))},unshift:aa.unshift};Q.extend=function(a,b,d){if(b&&(b instanceof Q||b.__dt_wrapper)){var c,e,h,g=function(a,b,d){return function(){var c=b.apply(a,arguments);Q.extend(c,c,d.methodExt);return c}};c=0;for(e=d.length;c<e;c++)h=d[c],b[h.name]="function"===
typeof h.val?g(a,h.val,h):f.isPlainObject(h.val)?{}:h.val,b[h.name].__dt_wrapper=!0,Q.extend(a,b[h.name],h.propExt)}};Q.register=I=function(a,b){if(f.isArray(a))for(var d=0,c=a.length;d<c;d++)Q.register(a[d],b);else for(var e=a.split("."),h=Qb,g,k,d=0,c=e.length;d<c;d++){g=(k=-1!==e[d].indexOf("()"))?e[d].replace("()",""):e[d];var l;a:{l=0;for(var n=h.length;l<n;l++)if(h[l].name===g){l=h[l];break a}l=null}l||(l={name:g,val:{},methodExt:[],propExt:[]},h.push(l));d===c-1?l.val=b:h=k?l.methodExt:l.propExt}};
Q.registerPlural=S=function(a,b,d){Q.register(a,d);Q.register(b,function(){var a=d.apply(this,arguments);return a===this?this:a instanceof Q?a.length?f.isArray(a[0])?new Q(a.context,a[0]):a[0]:g:a})};var Za=function(a,b){if("number"===typeof a)return[b[a]];var d=f.map(b,function(a,b){return a.nTable});return f(d).filter(a).map(function(a){a=f.inArray(this,d);return b[a]}).toArray()};I("tables()",function(a){return a?new Q(Za(a,this.context)):this});I("table()",function(a){a=this.tables(a);var b=a.context;
return b.length?new Q(b[0]):a});S("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});S("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody},1)});S("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});S("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});S("tables().containers()",
"table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});I("draw()",function(a){return this.iterator("table",function(b){V(b,!1===a)})});I("page()",function(a){return a===g?this.page.info().page:this.iterator("table",function(b){ea(b,a)})});I("page.info()",function(a){if(0===this.context.length)return g;a=this.context[0];var b=a._iDisplayStart,d=a._iDisplayLength,c=a.fnRecordsDisplay(),e=-1===d;return{page:e?0:Math.floor(b/d),pages:e?1:Math.ceil(c/d),
start:b,end:a.fnDisplayEnd(),length:d,recordsTotal:a.fnRecordsTotal(),recordsDisplay:c}});I("page.len()",function(a){return a===g?0!==this.context.length?this.context[0]._iDisplayLength:g:this.iterator("table",function(b){fa(b,a)})});var Ab=function(a,b,d){"ssp"==ia(a)?V(a,b):(T(a,!0),Aa(a,[],function(d){M(a);d=ua(a,d);for(var c=0,e=d.length;c<e;c++)A(a,d[c]);V(a,b);T(a,!1)}));if(d){var c=new Q(a);c.one("draw",function(){d(c.ajax.json())})}};I("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});
I("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});I("ajax.reload()",function(a,b){return this.iterator("table",function(d){Ab(d,!1===b,a)})});I("ajax.url()",function(a){var b=this.context;if(a===g){if(0===b.length)return g;b=b[0];return b.ajax?f.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource}return this.iterator("table",function(b){f.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})});I("ajax.url().load()",function(a,b){return this.iterator("table",function(d){Ab(d,
!1===b,a)})});var $a=function(a,b){var d=[],c,e,h,k,l,n;c=typeof a;a&&"string"!==c&&"function"!==c&&a.length!==g||(a=[a]);h=0;for(k=a.length;h<k;h++)for(e=a[h]&&a[h].split?a[h].split(","):[a[h]],l=0,n=e.length;l<n;l++)(c=b("string"===typeof e[l]?f.trim(e[l]):e[l]))&&c.length&&d.push.apply(d,c);return d},jb=function(a){a||(a={});a.filter&&!a.search&&(a.search=a.filter);return{search:a.search||"none",order:a.order||"current",page:a.page||"all"}},kb=function(a){for(var b=0,d=a.length;b<d;b++)if(0<a[b].length)return a[0]=
a[b],a.length=1,a.context=[a.context[b]],a;a.length=0;return a},lb=function(a,b){var d,c,e,h=[],g=a.aiDisplay;d=a.aiDisplayMaster;var k=b.search;c=b.order;e=b.page;if("ssp"==ia(a))return"removed"===k?[]:Ka(0,d.length);if("current"==e)for(d=a._iDisplayStart,c=a.fnDisplayEnd();d<c;d++)h.push(g[d]);else if("current"==c||"applied"==c)h="none"==k?d.slice():"applied"==k?g.slice():f.map(d,function(a,b){return-1===f.inArray(a,g)?a:null});else if("index"==c||"original"==c)for(d=0,c=a.aoData.length;d<c;d++)"none"==
k?h.push(d):(e=f.inArray(d,g),(-1===e&&"removed"==k||0<=e&&"applied"==k)&&h.push(d));return h},Wb=function(a,b,d){return $a(b,function(b){var c=Ob(b);if(null!==c&&!d)return[c];var e=lb(a,d);if(null!==c&&-1!==f.inArray(c,e))return[c];if(!b)return e;if("function"===typeof b)return f.map(e,function(d){var c=a.aoData[d];return b(d,c._aData,c.nTr)?d:null});c=bb(Na(a.aoData,e,"nTr"));return b.nodeName&&-1!==f.inArray(b,c)?[b._DT_RowIndex]:f(c).filter(b).map(function(){return this._DT_RowIndex}).toArray()})};
I("rows()",function(a,b){a===g?a="":f.isPlainObject(a)&&(b=a,a="");b=jb(b);var d=this.iterator("table",function(d){return Wb(d,a,b)},1);d.selector.rows=a;d.selector.opts=b;return d});I("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||g},1)});I("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return Na(a.aoData,b,"_aData")},1)});S("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,d){var c=b.aoData[d];
return"search"===a?c._aFilterData:c._aSortData},1)});S("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,d){ba(b,d,a)})});S("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b},1)});S("rows().remove()","row().remove()",function(){var a=this;return this.iterator("row",function(b,d,c){var e=b.aoData;e.splice(d,1);for(var h=0,g=e.length;h<g;h++)null!==e[h].nTr&&(e[h].nTr._DT_RowIndex=h);f.inArray(d,b.aiDisplay);O(b.aiDisplayMaster,
d);O(b.aiDisplay,d);O(a[c],d,!1);vb(b)})});I("rows.add()",function(a){var b=this.iterator("table",function(b){var d,c,e,h=[];c=0;for(e=a.length;c<e;c++)d=a[c],d.nodeName&&"TR"===d.nodeName.toUpperCase()?h.push(F(b,d)[0]):h.push(A(b,d));return h},1),d=this.rows(-1);d.pop();d.push.apply(d,b.toArray());return d});I("row()",function(a,b){return kb(this.rows(a,b))});I("row().data()",function(a){var b=this.context;if(a===g)return b.length&&this.length?b[0].aoData[this[0]]._aData:g;b[0].aoData[this[0]]._aData=
a;ba(b[0],this[0],"data");return this});I("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});I("row.add()",function(a){a instanceof f&&a.length&&(a=a[0]);var b=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?F(b,a)[0]:A(b,a)});return this.row(b[0])});var D=function(a,b,d,c){var e=[],h=function(b,d){if(b.nodeName&&"tr"===b.nodeName.toLowerCase())e.push(b);else{var c=f("<tr><td/></tr>").addClass(d);f("td",
c).addClass(d).html(b)[0].colSpan=w(a);e.push(c[0])}};if(f.isArray(d)||d instanceof f)for(var g=0,k=d.length;g<k;g++)h(d[g],c);else h(d,c);b._details&&b._details.remove();b._details=f(e);b._detailsShow&&b._details.insertAfter(b.nTr)},Rb=function(a,b){var d=a.context;d.length&&(d=d[0].aoData[b!==g?b:a[0]],d._details&&(d._details.remove(),d._detailsShow=g,d._details=g))},Oa=function(a,b){var d=a.context;if(d.length&&a.length){var c=d[0].aoData[a[0]];c._details&&((c._detailsShow=b)?c._details.insertAfter(c.nTr):
c._details.detach(),Zb(d[0]))}},Zb=function(a){var b=new Q(a),d=a.aoData;b.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<ta(d,"_details").length&&(b.on("draw.dt.DT_details",function(c,e){a===e&&b.rows({page:"current"}).eq(0).each(function(a){a=d[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),b.on("column-visibility.dt.DT_details",function(b,c,e,h){if(a===c)for(c=w(c),e=0,h=d.length;e<h;e++)b=d[e],b._details&&b._details.children("td[colspan]").attr("colspan",
c)}),b.on("destroy.dt.DT_details",function(c,e){if(a===e)for(var h=0,f=d.length;h<f;h++)d[h]._details&&Rb(b,h)}))};I("row().child()",function(a,b){var d=this.context;if(a===g)return d.length&&this.length?d[0].aoData[this[0]]._details:g;!0===a?this.child.show():!1===a?Rb(this):d.length&&this.length&&D(d[0],d[0].aoData[this[0]],a,b);return this});I(["row().child.show()","row().child().show()"],function(a){Oa(this,!0);return this});I(["row().child.hide()","row().child().hide()"],function(){Oa(this,!1);
return this});I(["row().child.remove()","row().child().remove()"],function(){Rb(this);return this});I("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var $b=/^(.+):(name|visIdx|visible)$/,Xb=function(a,b,d,c,e){d=[];c=0;for(var h=e.length;c<h;c++)d.push(E(a,e[c],b));return d},ac=function(a,b,d){var c=a.aoColumns,e=ta(c,"sName"),h=ta(c,"nTh");return $a(b,function(b){var g=Ob(b);if(""===b)return Ka(c.length);if(null!==g)return[0<=
g?g:c.length+g];if("function"===typeof b){var k=lb(a,d);return f.map(c,function(d,c){return b(c,Xb(a,c,0,0,k),h[c])?c:null})}var l="string"===typeof b?b.match($b):"";if(l)switch(l[2]){case "visIdx":case "visible":g=parseInt(l[1],10);if(0>g){var n=f.map(c,function(a,b){return a.bVisible?b:null});return[n[n.length+g]]}return[s(a,g)];case "name":return f.map(e,function(a,b){return a===l[1]?b:null})}else return f(h).filter(b).map(function(){return f.inArray(this,h)}).toArray()})};I("columns()",function(a,
b){a===g?a="":f.isPlainObject(a)&&(b=a,a="");b=jb(b);var d=this.iterator("table",function(d){return ac(d,a,b)},1);d.selector.cols=a;d.selector.opts=b;return d});S("columns().header()","column().header()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)});S("columns().footer()","column().footer()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf},1)});S("columns().data()","column().data()",function(){return this.iterator("column-rows",
Xb,1)});S("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)});S("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,d,c,e,h){return Na(b.aoData,h,"search"===a?"_aFilterData":"_aSortData",d)},1)});S("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,d,c,e){return Na(a.aoData,e,"anCells",b)},1)});S("columns().visible()","column().visible()",
function(a,b){return this.iterator("column",function(d,c){if(a===g)return d.aoColumns[c].bVisible;var e=d.aoColumns,k=e[c],l=d.aoData,n,q,p;if(a!==g&&k.bVisible!==a){if(a){var s=f.inArray(!0,ta(e,"bVisible"),c+1);n=0;for(q=l.length;n<q;n++)p=l[n].nTr,e=l[n].anCells,p&&p.insertBefore(e[c],e[s]||null)}else f(ta(d.aoData,"anCells",c)).detach();k.bVisible=a;ra(d,d.aoHeader);ra(d,d.aoFooter);if(b===g||b)h(d),(d.oScroll.sX||d.oScroll.sY)&&Pa(d);U(d,null,"column-visibility",[d,c,a]);ka(d)}})});S("columns().indexes()",
"column().index()",function(a){return this.iterator("column",function(b,d){return"visible"===a?v(b,d):d},1)});I("columns.adjust()",function(){return this.iterator("table",function(a){h(a)},1)});I("column.index()",function(a,b){if(0!==this.context.length){var d=this.context[0];if("fromVisible"===a||"toData"===a)return s(d,b);if("fromData"===a||"toVisible"===a)return v(d,b)}});I("column()",function(a,b){return kb(this.columns(a,b))});var bc=function(a,b,d){var c=a.aoData,e=lb(a,d);d=bb(Na(c,e,"anCells"));
var h=f([].concat.apply([],d)),k,l=a.aoColumns.length,n,q,p,s,m,r;return $a(b,function(b){var d="function"===typeof b;if(null===b||b===g||d){n=[];q=0;for(p=e.length;q<p;q++)for(k=e[q],s=0;s<l;s++)m={row:k,column:s},d?(r=a.aoData[k],b(m,E(a,k,s),r.anCells[s])&&n.push(m)):n.push(m);return n}return f.isPlainObject(b)?[b]:h.filter(b).map(function(a,b){k=b.parentNode._DT_RowIndex;return{row:k,column:f.inArray(b,c[k].anCells)}}).toArray()})};I("cells()",function(a,b,d){f.isPlainObject(a)&&(typeof a.row!==
g?(d=b,b=null):(d=a,a=null));f.isPlainObject(b)&&(d=b,b=null);if(null===b||b===g)return this.iterator("table",function(b){return bc(b,a,jb(d))});var c=this.columns(b,d),e=this.rows(a,d),h,k,l,n,q,p=this.iterator("table",function(a,b){h=[];k=0;for(l=e[b].length;k<l;k++)for(n=0,q=c[b].length;n<q;n++)h.push({row:e[b][k],column:c[b][n]});return h},1);f.extend(p.selector,{cols:b,rows:a,opts:d});return p});S("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,d){return(a=
a.aoData[b].anCells)?a[d]:g},1)});I("cells().data()",function(){return this.iterator("cell",function(a,b,d){return E(a,b,d)},1)});S("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,d,c){return b.aoData[d][a][c]},1)});S("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,d,c){return E(b,d,c,a)},1)});S("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,
b,d){return{row:b,column:d,columnVisible:v(a,d)}},1)});S("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,d,c){ba(b,d,a,c)})});I("cell()",function(a,b,d){return kb(this.cells(a,b,d))});I("cell().data()",function(a){var b=this.context,d=this[0];if(a===g)return b.length&&d.length?E(b[0],d[0].row,d[0].column):g;G(b[0],d[0].row,d[0].column,a);ba(b[0],d[0].row,"data",d[0].column);return this});I("order()",function(a,b){var d=this.context;if(a===g)return 0!==
d.length?d[0].aaSorting:g;"number"===typeof a?a=[[a,b]]:f.isArray(a[0])||(a=Array.prototype.slice.call(arguments));return this.iterator("table",function(b){b.aaSorting=a.slice()})});I("order.listener()",function(a,b,d){return this.iterator("table",function(c){gb(c,a,b,d)})});I(["columns().order()","column().order()"],function(a){var b=this;return this.iterator("table",function(d,c){var e=[];f.each(b[c],function(b,d){e.push([d,a])});d.aaSorting=e})});I("search()",function(a,b,d,c){var e=this.context;
return a===g?0!==e.length?e[0].oPreviousSearch.sSearch:g:this.iterator("table",function(e){e.oFeatures.bFilter&&N(e,f.extend({},e.oPreviousSearch,{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===d?!0:d,bCaseInsensitive:null===c?!0:c}),1)})});S("columns().search()","column().search()",function(a,b,d,c){return this.iterator("column",function(e,h){var k=e.aoPreSearchCols;if(a===g)return k[h].sSearch;e.oFeatures.bFilter&&(f.extend(k[h],{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===d?!0:d,bCaseInsensitive:null===
c?!0:c}),N(e,e.oPreviousSearch,1))})});I("state()",function(){return this.context.length?this.context[0].oSavedState:null});I("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});I("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});I("state.save()",function(){return this.iterator("table",function(a){ka(a)})});B.versionCheck=B.fnVersionCheck=function(a){var b=B.version.split(".");a=a.split(".");
for(var d,c,e=0,h=a.length;e<h;e++)if(d=parseInt(b[e],10)||0,c=parseInt(a[e],10)||0,d!==c)return d>c;return!0};B.isDataTable=B.fnIsDataTable=function(a){var b=f(a).get(0),d=!1;f.each(B.settings,function(a,c){if(c.nTable===b||c.nScrollHead===b||c.nScrollFoot===b)d=!0});return d};B.tables=B.fnTables=function(a){return f.map(B.settings,function(b){if(!a||a&&f(b.nTable).is(":visible"))return b.nTable})};B.util={throttle:Ca,escapeRegex:db};B.camelToHungarian=n;I("$()",function(a,b){var d=this.rows(b).nodes(),
d=f(d);return f([].concat(d.filter(a).toArray(),d.find(a).toArray()))});f.each(["on","one","off"],function(a,b){I(b+"()",function(){var a=Array.prototype.slice.call(arguments);a[0].match(/\.dt\b/)||(a[0]+=".dt");var d=f(this.tables().nodes());d[b].apply(d,a);return this})});I("clear()",function(){return this.iterator("table",function(a){M(a)})});I("settings()",function(){return new Q(this.context,this.context)});I("data()",function(){return this.iterator("table",function(a){return ta(a.aoData,"_aData")}).flatten()});
I("destroy()",function(a){a=a||!1;return this.iterator("table",function(b){var d=b.nTableWrapper.parentNode,e=b.oClasses,h=b.nTable,g=b.nTBody,k=b.nTHead,l=b.nTFoot,n=f(h),g=f(g),q=f(b.nTableWrapper),p=f.map(b.aoData,function(a){return a.nTr}),s;b.bDestroying=!0;U(b,"aoDestroyCallback","destroy",[b]);a||(new Q(b)).columns().visible(!0);q.unbind(".DT").find(":not(tbody *)").unbind(".DT");f(c).unbind(".DT-"+b.sInstance);h!=k.parentNode&&(n.children("thead").detach(),n.append(k));l&&h!=l.parentNode&&
(n.children("tfoot").detach(),n.append(l));n.detach();q.detach();b.aaSorting=[];b.aaSortingFixed=[];ab(b);f(p).removeClass(b.asStripeClasses.join(" "));f("th, td",k).removeClass(e.sSortable+" "+e.sSortableAsc+" "+e.sSortableDesc+" "+e.sSortableNone);b.bJUI&&(f("th span."+e.sSortIcon+", td span."+e.sSortIcon,k).detach(),f("th, td",k).each(function(){var a=f("div."+e.sSortJUIWrapper,this);f(this).append(a.contents());a.detach()}));!a&&d&&d.insertBefore(h,b.nTableReinsertBefore);g.children().detach();
g.append(p);n.css("width",b.sDestroyWidth).removeClass(e.sTable);(s=b.asDestroyStripes.length)&&g.children().each(function(a){f(this).addClass(b.asDestroyStripes[a%s])});d=f.inArray(b,B.settings);-1!==d&&B.settings.splice(d,1)})});B.version="1.10.4";B.settings=[];B.models={};B.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};B.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null};B.models.oColumn={idx:null,aDataSort:null,
asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};B.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],
asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,
fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(d){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,
iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",
sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:f.extend({},B.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null};q(B.defaults);B.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,
mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};q(B.defaults.column);B.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,
bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,
nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:g,oAjaxData:g,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},
bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==ia(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==ia(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,d=b+a,c=this.aiDisplay.length,e=this.oFeatures,h=e.bPaginate;return e.bServerSide?!1===h||-1===a?b+c:Math.min(b+a,this._iRecordsDisplay):!h||d>c||-1===a?c:d},
oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}};B.ext=Z={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:B.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:B.version};f.extend(Z,{afnFiltering:Z.search,aTypes:Z.type.detect,ofnSearch:Z.type.search,oSort:Z.type.order,afnSortData:Z.order,aoFeatures:Z.feature,
oApi:Z.internal,oStdClasses:Z.classes,oPagination:Z.pager});f.extend(B.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",
sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",
sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});(function(){var a="",a="",b=a+"ui-state-default",d=a+"css_right ui-icon ui-icon-",a=a+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";f.extend(B.ext.oJUIClasses,B.ext.classes,{sPageButton:"fg-button ui-button "+b,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:b+
" sorting_asc",sSortDesc:b+" sorting_desc",sSortable:b+" sorting",sSortableAsc:b+" sorting_asc_disabled",sSortableDesc:b+" sorting_desc_disabled",sSortableNone:b+" sorting_disabled",sSortJUIAsc:d+"triangle-1-n",sSortJUIDesc:d+"triangle-1-s",sSortJUI:d+"carat-2-n-s",sSortJUIAscAllowed:d+"carat-1-n",sSortJUIDescAllowed:d+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+b,sScrollFoot:"dataTables_scrollFoot "+b,sHeaderTH:b,sFooterTH:b,
sJUIHeader:a+" ui-corner-tl ui-corner-tr",sJUIFooter:a+" ui-corner-bl ui-corner-br"})})();var Yb=B.ext.pager;f.extend(Yb,{simple:function(a,b){return["previous","next"]},full:function(a,b){return["first","previous","next","last"]},simple_numbers:function(a,b){return["previous",Da(a,b),"next"]},full_numbers:function(a,b){return["first","previous",Da(a,b),"next","last"]},_numbers:Da,numbers_length:7});f.extend(!0,B.ext.renderer,{pageButton:{_:function(a,b,d,c,e,h){var g=a.oClasses,k=a.oLanguage.oPaginate,
l,n,q=0,p=function(b,c){var s,m,r,v,y=function(b){ea(a,b.data.action,!0)};s=0;for(m=c.length;s<m;s++)if(v=c[s],f.isArray(v))r=f("<"+(v.DT_el||"div")+"/>").appendTo(b),p(r,v);else{n=l="";switch(v){case "ellipsis":b.append("<span>&hellip;</span>");break;case "first":l=k.sFirst;n=v+(0<e?"":" "+g.sPageButtonDisabled);break;case "previous":l=k.sPrevious;n=v+(0<e?"":" "+g.sPageButtonDisabled);break;case "next":l=k.sNext;n=v+(e<h-1?"":" "+g.sPageButtonDisabled);break;case "last":l=k.sLast;n=v+(e<h-1?"":
" "+g.sPageButtonDisabled);break;default:l=v+1,n=e===v?g.sPageButtonActive:""}l&&(r=f("<a>",{"class":g.sPageButton+" "+n,"aria-controls":a.sTableId,"data-dt-idx":q,tabindex:a.iTabIndex,id:0===d&&"string"===typeof v?a.sTableId+"_"+v:null}).html(l).appendTo(b),ub(r,{action:v},y),q++)}};try{var s=f(m.activeElement).data("dt-idx");p(f(b).empty(),c);null!==s&&f(b).find("[data-dt-idx="+s+"]").focus()}catch(r){}}}});f.extend(B.ext.type.detect,[function(a,b){var d=b.oLanguage.sDecimal;return zb(a,d)?"num"+
d:null},function(a,b){if(!(!a||a instanceof Date||Sb.test(a)&&wb.test(a)))return null;var d=Date.parse(a);return null!==d&&!isNaN(d)||ga(a)?"date":null},function(a,b){var d=b.oLanguage.sDecimal;return zb(a,d,!0)?"num-fmt"+d:null},function(a,b){var d=b.oLanguage.sDecimal;return Pb(a,d)?"html-num"+d:null},function(a,b){var d=b.oLanguage.sDecimal;return Pb(a,d,!0)?"html-num-fmt"+d:null},function(a,b){return ga(a)||"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);f.extend(B.ext.type.search,{html:function(a){return ga(a)?
a:"string"===typeof a?a.replace(Nb," ").replace(Ma,""):""},string:function(a){return ga(a)?a:"string"===typeof a?a.replace(Nb," "):a}});var Db=function(a,b,d,c){if(0!==a&&(!a||"-"===a))return-Infinity;b&&(a=yb(a,b));a.replace&&(d&&(a=a.replace(d,"")),c&&(a=a.replace(c,"")));return 1*a};f.extend(Z.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return ga(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return ga(a)?"":"string"===
typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0}});Wa("");f.extend(!0,B.ext.renderer,{header:{_:function(a,b,d,c){f(a.nTable).on("order.dt.DT",function(e,h,f,g){a===h&&(e=d.idx,b.removeClass(d.sSortingClass+" "+c.sSortAsc+" "+c.sSortDesc).addClass("asc"==g[e]?c.sSortAsc:"desc"==g[e]?c.sSortDesc:d.sSortingClass))})},jqueryui:function(a,b,d,c){f("<div/>").addClass(c.sSortJUIWrapper).append(b.contents()).append(f("<span/>").addClass(c.sSortIcon+
" "+d.sSortingClassJUI)).appendTo(b);f(a.nTable).on("order.dt.DT",function(e,h,f,g){a===h&&(e=d.idx,b.removeClass(c.sSortAsc+" "+c.sSortDesc).addClass("asc"==g[e]?c.sSortAsc:"desc"==g[e]?c.sSortDesc:d.sSortingClass),b.find("span."+c.sSortIcon).removeClass(c.sSortJUIAsc+" "+c.sSortJUIDesc+" "+c.sSortJUI+" "+c.sSortJUIAscAllowed+" "+c.sSortJUIDescAllowed).addClass("asc"==g[e]?c.sSortJUIAsc:"desc"==g[e]?c.sSortJUIDesc:d.sSortingClassJUI))})}}});B.render={number:function(a,b,d,c){return{display:function(e){var h=
0>e?"-":"";e=Math.abs(parseFloat(e));var f=parseInt(e,10);e=d?b+(e-f).toFixed(d).substring(2):"";return h+(c||"")+f.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+e}}}};f.extend(B.ext.internal,{_fnExternApiFunc:Mb,_fnBuildAjax:Aa,_fnAjaxUpdate:la,_fnAjaxParameters:wa,_fnAjaxUpdateDraw:cb,_fnAjaxDataSrc:ua,_fnAddColumn:a,_fnColumnOptions:d,_fnAdjustColumnSizing:h,_fnVisibleToColumnIndex:s,_fnColumnIndexToVisible:v,_fnVisbleColumns:w,_fnGetColumns:y,_fnColumnTypes:z,_fnApplyColumnDefs:C,_fnHungarianMap:q,
_fnCamelToHungarian:n,_fnLanguageCompat:l,_fnBrowserDetect:b,_fnAddData:A,_fnAddTr:F,_fnNodeToDataIndex:function(a,b){return b._DT_RowIndex!==g?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,d){return f.inArray(d,a.aoData[b].anCells)},_fnGetCellData:E,_fnSetCellData:G,_fnSplitObjNotation:X,_fnGetObjectDataFn:L,_fnSetObjectDataFn:P,_fnGetDataMaster:x,_fnClearTable:M,_fnDeleteIndex:O,_fnInvalidate:ba,_fnGetRowElements:ha,_fnCreateTr:ca,_fnBuildHead:Y,_fnDrawHead:ra,_fnDraw:na,_fnReDraw:V,_fnAddOptionsHtml:sa,
_fnDetectHeader:da,_fnGetUniqueThs:va,_fnFeatureHtmlFilter:K,_fnFilterComplete:N,_fnFilterCustom:p,_fnFilterColumn:Eb,_fnFilter:Fb,_fnFilterCreateSearch:nb,_fnEscapeRegex:db,_fnFilterData:Ha,_fnFeatureHtmlInfo:Bb,_fnUpdateInfo:Ta,_fnInfoMacros:Gb,_fnInitialise:Ua,_fnInitComplete:fb,_fnLengthChange:fa,_fnFeatureHtmlLength:mb,_fnFeatureHtmlPaginate:Va,_fnPageChange:ea,_fnFeatureHtmlProcessing:H,_fnProcessingDisplay:T,_fnFeatureHtmlTable:Cb,_fnScrollDraw:Pa,_fnApplyToChildren:oa,_fnCalculateColumnWidths:za,
_fnThrottle:Ca,_fnConvertToWidth:qb,_fnScrollingWidthAdjust:Hb,_fnGetWidestNode:Ib,_fnGetMaxLenString:rb,_fnStringToCss:R,_fnScrollBarWidth:sb,_fnSortFlatten:Ia,_fnSort:Jb,_fnSortAria:Kb,_fnSortListener:tb,_fnSortAttachListener:gb,_fnSortingClasses:ab,_fnSortData:Lb,_fnSaveState:ka,_fnLoadState:Ra,_fnSettingsFromNode:Qa,_fnLog:Fa,_fnMap:ma,_fnBindAction:ub,_fnCallbackReg:ja,_fnCallbackFire:U,_fnLengthOverflow:vb,_fnRenderer:hb,_fnDataSource:ia,_fnRowAttributes:qa,_fnCalculateEnd:function(){}});f.fn.dataTable=
B;f.fn.dataTableSettings=B.settings;f.fn.dataTableExt=B.ext;f.fn.DataTable=function(a){return f(this).dataTable(a).api()};f.each(B,function(a,b){f.fn.DataTable[a]=b});return f.fn.dataTable})})(window,document);window.TOONTALK||(window.TOONTALK={});window.TOONTALK.creators_from_json={};window.TOONTALK.widget=function(c){var m=function(c){var f=this.get_frontside&&this.get_frontside(!0);if(f)return c&&this.rerender(),f.get_element()};c.creators_from_json.top_level=function(g){g=c.widget.create_top_level_widget(g.settings);$(g.get_backside(!0).get_element()).addClass("toontalk-top-level-backside");return g};return{add_standard_widget_functionality:function(c){this.add_sides_functionality(c);this.runnable(c);this.stackable(c);this.animatable(c);this.has_title(c);this.has_parent(c);
this.has_description(c);this.has_listeners(c);this.erasable(c);c.is_of_type||(c.is_of_type=function(c){return this.get_type_name()===c});c.is_widget=!0;return c},erasable:function(c){var f;c.get_erased||(c.get_erased=function(){return f});c.set_erased||(c.set_erased=function(c,g){f=c;g&&this.rerender()});return c},add_sides_functionality:function(g){var f,q;g.get_frontside||(g.get_frontside=function(n){n&&!f&&(f=c.frontside.create(g));return f},g.save_dimensions=function(){var c;this.get_size_attributes?
(c=this.get_size_attributes(),this.saved_width=c.width,this.saved_height=c.height):(c=this.get_frontside_element(),this.saved_width=$(c).width(),this.saved_height=$(c).height())},g.restore_dimensions=function(){var c;0<this.saved_width&&(this.set_size_attributes?this.set_size_attributes(this.saved_width,this.saved_height):(c=this.get_frontside_element(),$(c).css({width:this.saved_width,height:this.saved_height})),this.saved_height=this.saved_width=void 0)});g.get_backside||(g.get_backside=function(c){c&&
!q&&(q=g.create_backside());return q});g.set_backside||(g.set_backside=function(c){q=c});g.forget_backside||(g.forget_backside=function(){q=void 0});g.create_backside||(g.create_backside=function(){return c.backside.create(g)});return g},runnable:function(c){var f=!1;c.get_running||(c.get_running=function(){return f});c.set_running||(c.set_running=function(q,n){var l,m;f===q&&f||(l=this.get_backside_widgets(),f=q,this.get_backside()&&this.get_backside().run_status_changed(f),l.forEach(function(k){m=
k.get_widget();k.is_backside()&&0<=this.backside_widgets.indexOf(m)||(m.is_of_type("robot")?k.is_backside()||f&&m.get_running()||(f?(m.set_stopped(!1),m.run(c,n)):m.set_stopped(!0),m.rerender()):m.set_running&&(!n&&k.is_backside()&&"top-level"!==c.get_type_name()?m.set_running(q,c):m.set_running(q)))}.bind(this)),this.walk_children&&this.walk_children(function(c){c.set_running&&c.set_running(f);return!0}),this.rerender())});return c},stackable:function(c){var f=!1;c.get_infinite_stack||(c.get_infinite_stack=
function(){return f});c.set_infinite_stack||(c.set_infinite_stack=function(q){var n=c.get_backside_element(),l=c.get_frontside_element();f=q;n&&$(n).find(".toontalk-infinite-stack-check-box").prop("checked",q);l&&(q?$(l).addClass("toontalk-infinite-stack"):$(l).removeClass("toontalk-infinite-stack"))});return c},animatable:function(g){var f;g.animate_to_widget||(f=function(f){var g=f.get_element();g&&$(g).is(":visible")||(g=c.UTILITIES.find_resource_equal_to_widget(f));return g},g.animate_to_widget=
function(c,g,l,m,k){this.animate_to_element(f(c),g,l,m,k)});g.animate_to_element||(g.animate_to_element=function(f,g,l,m,k){var b=$(f).offset(),e=$(this.get_frontside_element());f&&$(f).is(":visible")?(m||(m=($(f).width()-e.width())*Math.random()),k||(k=($(f).height()-e.height())*Math.random()),b?(b.left+=m,b.top+=k,c.debugging&&(0>b.left||0>b.top)&&console.log("Should this include negative values? "+b)):b={left:0,top:0},this.animate_to_absolute_position(b,g,l)):g()});g.animate_to_absolute_position||
(g.animate_to_absolute_position=function(f,g,l){var m;m=this.get_frontside_element();c.UTILITIES.animate_to_absolute_position(m,f,g,l)});return g},has_title:function(g){g.get_title||(g.get_title=function(){var f=this.get_type_name(),g=this.get_backside(),n=this.get_frontside_element(),l=this.get_description(),m;if($(n).is(".toontalk-top-level-resource"))m=this.can_run&&this.can_run()?this.get_running()?"Click elsewhere to stop this from running. Click on it to start it up again.":"Click to start this running. Click elsewhere to stop it.":
"Drag this "+f+" to a work area.";else if(!g||!g.get_element())m="Click to see the back side of this "+f;else if(!l)return c.UTILITIES.add_a_or_an(f,!0);l&&(l="This "+f+" "+l,m=m?l+"\n"+m:l);return m});return g},has_parent:function(c){var f,q;c.get_parent_of_frontside=function(){return f};c.get_parent_of_backside=function(){return q};c.set_parent_of_frontside=function(c,g,q){f&&!q&&f.is_backside()&&f.get_widget().remove_backside_widget(this,!1,!0);f=c&&g?c.get_backside(!0):c};c.set_parent_of_backside=
function(c,f,g){q&&!g&&q.is_backside()&&q.get_widget().remove_backside_widget(this,!0,!0);q=c&&f?c.get_backside(!0):c};c.closest_visible_ancestor=function(){for(var c=this;c&&!c.visible();)c=c.is_backside()?c.get_parent_of_backside():c.get_parent_of_frontside();return c||this};c.closest_visible_ancestor_or_frontside=function(){for(var c=this,f;c&&!c.visible();)f=c,c.is_backside()?(c=c.get_parent_of_backside())||(c=f.get_widget()):c=c.get_parent_of_frontside();return c||this};c.ancestor_of_type=function(c){for(var f=
this;f&&!f.is_of_type(c);)f=f.is_backside()?f.get_widget().get_parent_of_backside():f.get_parent_of_frontside();return f};c.has_ancestor=function(c){for(var f=this;f;){if(c===f)return!0;f=f.is_backside()?f.get_widget().get_parent_of_backside():f.get_parent_of_frontside()}return!1};c.remove_from_parent_of_frontside=function(c){f&&(f.is_backside()?f.remove_backside_widget(this,!1):f.removed_from_container&&f.removed_from_container(this,!1,c))};return c},has_description:function(c){var f;c.get_description||
(c.get_description=function(){return f});c.set_description||(c.set_description=function(c,g){if(f===c||!f&&""===c)return!1;f=c;g&&this.rerender();return!0})},has_listeners:function(g){var f={};g.add_listener||(g.add_listener=function(c,g){var l=f[c];l?0>l.indexOf(g)&&l.push(g):f[c]=[g]});g.remove_listener||(g.remove_listener=function(g,n,l){if(g=f[g])if(n=g.indexOf(n),0<=n){g.splice(n,1);return}!l&&c.debugging&&console.log("Listener of type "+type_name+" could not be removed.")});g.get_listeners||
(g.get_listeners=function(c){return f[c]})},get_full_description:function(){var c,f;if(this.get_erased&&this.get_erased())return"erased "+this.get_type_name();c=this.get_description();f=this.toString();return c?f+" ("+c+")":f},remove:function(c){var f=this.get_backside(),q=this.get_frontside(),n=this.get_parent_of_frontside(),l=this.get_parent_of_backside();f&&(f.remove_element(),l&&(f=l.is_backside()?l:l.get_backside(),f.get_widget().removed_from_container&&f.get_widget().removed_from_container(this,
!0,c)));q&&(q.remove(),n&&this.remove_from_parent_of_frontside(c));this.set_running(!1)},get_frontside_element:m,get_element:m,get_backside_element:function(c){if(c=this.get_backside&&this.get_backside(c))return c.get_element()},add_to_json:function(c,f){var q,n,l,m,k;if(c){c.view?(n=c,q=c.view,c=c.semantic):(q={},n={semantic:c,view:q});n.version=1;this.get_erased&&this.get_erased()&&(c.erased=!0);this.get_infinite_stack&&this.get_infinite_stack()&&(c.infinite_stack=!0);this.get_running&&this.get_running()&&
(c.running=!0);if(!this.get_parent_of_frontside()||this.get_parent_of_frontside().is_backside())if(m=this.get_frontside_element&&this.get_frontside_element())$(m).is(".toontalk-plain-text-element")||(k=$(m).width(),0!==k&&(q.frontside_width=$(m).width(),q.frontside_height=$(m).height())),$(m).is(":visible")&&(l=$(m).position()),l&&(q.frontside_left=l.left,q.frontside_top=l.top);if(m=this.get_backside()){if(k=m.get_element())q.backside_width=$(k).width(),q.backside_height=$(k).height(),q.backside_left||
(l=$(k).position(),q.backside_left=l.left,q.backside_top=l.top,"&lt;"===$(k).find(".toontalk-settings-backside-button").html()&&(q.advanced_settings_open=!0));m.get_backside_dimensions()&&(q.backside_geometry=m.get_backside_dimensions())}!q.backside_geometry&&this.backside_geometry&&(q.backside_geometry=this.backside_geometry);q.saved_width=this.saved_width;q.saved_height=this.saved_height;c.description=this.get_description&&this.get_description();return n}console.log("get_json not defined");return{}},
add_backside_widgets_to_json:function(g,f){var q=this.get_backside_widgets(),n;0<q.length&&(g.semantic.backside_widgets=c.UTILITIES.get_json_of_array(q,f),(q=this.get_backside_widgets_json_views())&&q.forEach(function(c,q){var k;n=g.semantic.backside_widgets[q];0<=n.widget.shared_widget_index?(k=f.widgets_encountered.indexOf(f.shared_widgets[n.widget.shared_widget_index]),k=f.json_of_widgets_encountered[k].view):k=n.widget.view;n.is_backside?c.backside_left&&(k.backside_left=c.backside_left,k.backside_top=
c.backside_top):c.frontside_left&&(k.frontside_left=c.frontside_left,k.frontside_top=c.frontside_top)}))},get_backside_widgets:function(){return this.backside_widgets||[]},add_backside_widget:function(g,f){var q=this.get_backside(),n=f?g.get_backside():g;c.debugging&&g===this?c.UTILITIES.report_internal_error("Adding a widget to a list of its backside widgets!"):(this.backside_widgets?0>this.backside_widgets.indexOf(n)&&this.backside_widgets.push(n):this.backside_widgets=[n],f?g.set_parent_of_backside(this,
!0):g.set_parent_of_frontside(this,!0),n.set_visible(q.visible()),this.get_running()&&g.set_running(!0),g.render())},remove_all_backside_widgets:function(){if(this.backside_widgets)for(;0<this.backside_widgets.length;)this.backside_widgets[0].remove()},remove_backside_widget:function(g,f,q){this.get_backside();var n=f?g.get_backside(!0):g,l;c.debugging&&!this.backside_widgets?q?console.log("remove_backside_widget called and there are no backside_widgets"):c.UTILITIES.report_internal_error("Couldn't remove a widget from backside widgets."):
(l=this.backside_widgets.indexOf(n),0>l?q?c.debugging&&console.log("Warning: Probable redundant call to remove_backside_widget"):c.UTILITIES.report_internal_error("Couldn't find a widget to remove it from backside widgets. "+n.get_widget()+" ("+n.get_widget().debug_id+")"):(this.backside_widgets.splice(l,1),this.backside_widgets_json_views&&this.backside_widgets_json_views.splice(l,1),f?(f=g.get_parent_of_backside())&&f.get_widget()===this&&g.set_parent_of_backside(void 0,!0,!0):(f=g.get_parent_of_frontside())&&
f.get_widget()===this&&g.set_parent_of_frontside(void 0,void 0,!0),n.set_visible(!1)))},set_backside_widget_sides:function(c,f){var q=this.get_backside(),n=q&&q.visible();this.backside_widgets=c;0<c.length&&(this.get_backside()?this.get_backside().add_backside_widgets(c,f):this.backside_widgets_json_views=f,c.forEach(function(c){c.is_backside()?c.get_widget().set_parent_of_backside(this,!0):c.get_widget().set_parent_of_frontside(this,!0);c.set_visible(n)}.bind(this)))},get_backside_widgets_json_views:function(c){!this.backside_widgets_json_views&&
c&&(this.backside_widgets_json_views=[]);return this.backside_widgets_json_views},can_run:function(){var c=!1,f;this.get_backside_widgets().some(function(q){f=q.get_widget();if(f.get_body&&!f.get_body().is_empty()||f.can_run())return c=!0});return c},add_to_copy:function(g,f){var q;this.get_erased&&this.get_erased()&&(g.set_erased||c.widget.erasable(g),g.set_erased(this.get_erased()));f||(q=this.get_backside_widgets(),0<q.length&&g.set_backside_widget_sides(c.UTILITIES.copy_widget_sides(q,f),this.get_backside_widgets_json_views()));
g.set_visible(this.visible());return g},get_type_name:function(){return""},copy:function(){console.assert(!1,"copy not implemented")},add_copy_to_container:function(g){g||(g=this.copy({}));var f=this.get_frontside_element(),q=g.get_frontside_element(),n=$(f).closest(".toontalk-backside"),l,m;0===n.length&&(n=$(".toontalk-backside"));l=c.UTILITIES.relative_position(f,n.get(0));m=c.UTILITIES.widget_from_jquery(n);$(q).css({width:$(f).width(),height:$(f).height(),left:l.left+30,top:l.top+30});n.append(q);
m&&m.add_backside_widget(g);c.robot.in_training&&c.robot.in_training.copied(this,g,!1);return g},visible:function(){var c=this.get_frontside();return c?c.visible():!1},set_visible:function(c){var f=this.get_frontside(c);f&&f.set_visible(c)},is_backside:function(){return!1},get_parent:function(){return this.get_parent_of_frontside()},drag_started:function(g,f){c.robot.in_training&&c.robot.in_training.picked_up(this,g,f)},match:function(c){console.assert(!1,"match not implemented for "+c.toString())},
removed:function(g){c.UTILITIES.report_internal_error("removed not implemented")},equals_box:function(){return!1},equals_number:function(){return!1},open_backside:function(g){var f=this.get_backside(),q=function(a,e){c.UTILITIES.set_timeout(function(){$(a).addClass("toontalk-side-appearing");c.UTILITIES.add_one_shot_event_handler(a,"transitionend",2500,function(){$(a).removeClass("toontalk-side-appearing");g&&g()});$(a).css({left:k,top:b,opacity:e});this.apply_backside_geometry()}.bind(this))}.bind(this),
n,l,m,k,b,e,a;if(f){n=f.get_element();if($(n).is(":visible"))return c.UTILITIES.highlight_element(n,void 0,1E3),f;if((l=this.get_parent_of_backside())&&l.is_backside())return l.get_widget().open_backside()}l=this.get_frontside_element();m=$(l).parent();f=$(l);if(!f.is(".toontalk-top-level-resource")){for(;0<m.length&&!m.is(".toontalk-backside");)f=m,m=m.parent();f.get(0);f=this.get_backside(!0);n=f.get_element();n.toontalk_widget=this;e=$(l).offset();(a=m.offset())||(a={left:0,top:0});$(n).css({left:e.left-
a.left,top:e.top-a.top,opacity:.01});m.append(n);(m=c.UTILITIES.widget_from_jquery(m))&&m.add_backside_widget(this,!0);k=e.left-a.left;b=e.top-a.top+l.offsetHeight;q(n,"inherit");f.render();this.backside_widgets&&this.backside_widgets.forEach(function(a){a.render();a.set_visible(!0)});return f}},apply_backside_geometry:function(){var g=this.get_backside(!0),f=g.get_element();this.backside_geometry&&f&&(c.backside.scale_backside($(f),this.backside_geometry.x_scale,this.backside_geometry.y_scale,this.backside_geometry.original_width,
this.backside_geometry.original_height),g.set_dimensions(this.backside_geometry))},top_level_widget:function(){var g;return this.is_of_type("top-level")?this:(g=c.UTILITIES.widget_from_jquery($(this.get_frontside_element()).closest(".toontalk-top-level-backside")))?g:(g=this.get_parent_of_frontside()||this.get_parent_of_backside())?g.get_widget().top_level_widget():this.create_top_level_widget()},backup_all:function(c){var f=this.top_level_widget();f&&f.save(c)},render:function(){c.DISPLAY_UPDATES.pending_update(this)},
rerender:function(){this.visible()&&c.DISPLAY_UPDATES.pending_update(this)},hide:function(){$(this.get_frontside_element()).hide()},close_button_ok:function(c){return"top-level"!==this.get_type_name()&&!$(c).is(".toontalk-top-level-resource")&&!$(c).closest(".toontalk-conditions-panel").is("*")},get_widget:function(){return this},add_to_top_level_backside:function(g,f){var q=this.top_level_widget(),n=g.get_frontside_element(!0);q.add_backside_widget(g);q.get_backside_element().appendChild(n);g.render();
f&&c.robot.in_training&&c.robot.in_training.dropped_on(g,q);return n},create_top_level_widget:function(g){var f=Object.create(c.widget);g||(g={});f.get_json=function(c){c=this.get_backside(!0).get_element();c=document.defaultView.getComputedStyle(c,null).getPropertyValue("background-color");return{semantic:{type:"top_level",settings:g},view:{background_color:c}}};f.get_type_name=function(){return"top-level"};f.is_of_type=function(c){return"top-level"===c};f.toString=function(){return"top level widget"};
f.get_description=function(){};f.match=function(){return"matched"};f.update_display=function(){this.backside_widgets&&this.backside_widgets.forEach(function(c){c.visible()&&c.update_display()})};f.copy=function(){return this};f.visible=function(){return!0};f.get_parent_of_frontside=function(){};f.get_parent_of_backside=function(){};f.closest_visible_ancestor=function(){return this};f.get_infinite_stack=function(){return!1};f.top_level_widget=function(){return this};f=f.add_sides_functionality(f);
f=f.runnable(f);f=f.has_parent(f);f.get_setting=function(f){"undefined"===typeof g[f]&&(g[f]=c.DEFAULT_SETTINGS&&c.DEFAULT_SETTINGS[f]);return g[f]};f.set_setting=function(c,f){g[c]=f};f.open_settings=function(){c.SETTINGS.open(f)};f.save=function(f,g,l){var m;g||(g={});"undefined"===typeof g.google_drive&&(g.google_drive=c.google_drive&&this.get_setting("auto_save_to_google_drive"));"undefined"===typeof g.local_storage&&(g.local_storage=this.get_setting("auto_save_to_local_storage"));f?(g.google_drive&&
(m=c.UTILITIES.get_json_top_level(this),f=c.google_drive.get_status(),"Ready"===f?(c.google_drive.upload_file(this.get_setting("program_name"),"json",JSON.stringify(m),l),l=void 0):c.google_drive.connection_to_google_drive_possible()&&console.log("Unable to save to Google Drive because: "+f)),g.local_storage&&(m||(m=c.UTILITIES.get_json_top_level(this)),this.save_to_local_storage(m)),l&&l()):setTimeout(function(){this.save(!0,g,l)}.bind(this),100)};f.publish=function(f,g){c.publish.publish_widget(this.get_setting("program_name"),
this,g,f)};f.save_to_local_storage=function(f,g){var l=this.get_setting("program_name"),m=c.UTILITIES.local_storage_program_key(l),k=c.UTILITIES.local_storage_program_meta_data_key(l),b,e,a;g||(g=Date.now());try{e=(e=window.localStorage.getItem(k))?JSON.parse(e):{created:g},e.last_modified=g,a=JSON.stringify(f),e.file_size=a.length,window.localStorage.setItem(k,JSON.stringify(e)),window.localStorage.setItem(m,a),window.localStorage.setItem("toontalk-last-key",m),b=c.UTILITIES.get_all_locally_stored_program_names(),
0>b.indexOf(l)&&(b.push(l),c.UTILITIES.set_all_locally_stored_program_names(b))}catch(d){l="Failed to save state to local storage since it requires "+JSON.stringify(f).length+" bytes. Error message is "+d,c.UTILITIES.is_internet_explorer()?console.error(l):c.UTILITIES.display_message(l),this.last_local_storage_error=l}};f.load=function(g,n){var l=this.get_setting("program_name"),m=l+".json",k=c.UTILITIES.local_storage_program_key(l),b=function(b){b&&(b=JSON.parse(b),f.remove_all_backside_widgets(),
c.UTILITIES.add_backside_widgets_from_json(f,b.semantic.backside_widgets),n&&n())},l=function(e){e?c.google_drive.download_file(e,b):b(window.localStorage.getItem(k))};g&&c.google_drive&&"Ready"===c.google_drive.get_status()?c.google_drive.get_toontalk_program_file(m,l):b(window.localStorage.getItem(k))};f.walk_children=function(){};f.is_widget=!0;f.get_backside(!0).set_visible(!0);c.debugging&&(f.debug_id=c.UTILITIES.generate_unique_id(),f.debug_string="Top-level widget");return f}}}(window.TOONTALK);window.TOONTALK.backside=function(c){return{create:function(m){var g=Object.create(this),f=document.createElement("div"),q=$(f),n=1,l=1,r=document.createElement("div"),k=document.createElement("div"),b=m.get_help_URL&&m.get_help_URL(),e,a,d,h,s,v,w,y,z,C,A,F=function(a){a?($(r).addClass("toontalk-green-flag-active").removeClass("toontalk-green-flag-inactive"),$(k).addClass("toontalk-stop-sign-inactive").removeClass("toontalk-stop-sign-active")):($(r).addClass("toontalk-green-flag-inactive").removeClass("toontalk-green-flag-active"),
$(k).addClass("toontalk-stop-sign-active").removeClass("toontalk-stop-sign-inactive"))},E=function(){var a=q.width();q.height();var b,d,c;0===a?setTimeout(E,100):(a=$(k).width(),b=(b=$(w).width())?b+14:0,$(k).css({right:b}),$(r).css({right:b+a+6}),d=$(r).width(),z&&$(z).css({right:b+a+d+12}),e&&(c=$(z).width()||0,$(e).css({right:b+a+d+c+12})))};y=this.create_description_label(g,m);var G=function(){var a;a=m.get_running()?"To stop this click on the stop sign.":m.can_run()?"Click this to start this running.":
"There is nothing to run on this.";r.title=a},X=function(){var a;a=m.get_running()?"Click to stop this from running.":m.can_run()?"This has stopped. Click on the flag to start running it.":"There is nothing to run here.";k.title=a},L,P;m.close_button_ok(f)&&(P=function(a){g.hide_backside(a);a.stopPropagation()},L=(L=m.get_description())?"the "+m.get_type_name()+" who "+L:"the "+m.get_type_name(),w=c.UTILITIES.create_close_button(P,"Click to hide this back side of "+L+"."),f.appendChild(w));$(r).addClass("toontalk-green-flag toontalk-green-flag-inactive").click(function(a){m.can_run()?
(F(!0),m.set_running(!0),X()):m.is_of_type("top-level")?c.UTILITIES.display_message("There is nothing to run."):c.UTILITIES.display_message("This "+m.get_type_name()+" has nothing to run. Add some robots on the back.")}).on("mouseenter",X);$(k).addClass("toontalk-stop-sign toontalk-stop-sign-active").click(function(a){F(!1);m.set_running(!1);G()}).on("mouseenter",G);f.appendChild(r);f.appendChild(k);b&&(z=document.createElement("div"),$(z).addClass("toontalk-help-button toontalk-widget-help-button").click(function(a){C=
document.createElement("iframe");$(C).addClass("toontalk-help-frame");C.src=b;document.body.appendChild(A);document.body.appendChild(C)}),z.innerHTML="i",z.title="Click to learn more about "+m.get_type_name()+".",A=document.createElement("div"),$(A).addClass("toontalk-close-help-frame-button").button().click(function(a){$(C).remove();$(A).remove()}),A.innerHTML="Return to ToonTalk",f.appendChild(z));y&&f.appendChild(y);m.is_of_type("top-level")&&(e=document.createElement("div"),$(e).addClass("toontalk-settings-button").click(function(a){m.open_settings()}),
e.title="Click to change settings or open a different program.",f.appendChild(e));c.UTILITIES.set_timeout(E);q.addClass("toontalk-backside toontalk-side toontalk-backside-of-"+m.get_type_name());q.css({"z-index":c.UTILITIES.next_z_index()});g.get_element=function(){return f};g.get_widget=function(){return m};g.visible=function(){return a};g.set_visible=function(b){var d=this.get_widget().get_backside_widgets();a=b;d.forEach(function(a){a.set_visible(b)})};m.get_backside||(m.get_backside=function(){return g});
g.get_parent_of_backside=function(){return m.get_parent_of_backside()};g.get_parent_of_frontside=function(){return m.get_parent_of_frontside()};g.get_frontside=function(){return m.get_frontside()};g.get_frontside_element=function(){return m.get_frontside_element()};m.removed_from_container||(m.removed_from_container=function(a,b,d,e){c.robot.in_training||this.remove_backside_widget(a,b,e)});g.widget_dropped_on_me=function(a,b,d,e,h){var g=this.get_widget(),k,l;b?(k=a.get_backside(!0),l=k.get_element(),
k.rerender()):(k=a.get_frontside(!0),l=k.get_element(),a.rerender());k=$(l);q.append(k);this.is_of_type("top-level")?e&&!e.visible()&&k.addClass("toontalk-widget-added-to-backside-by-unwatched-robot"):d||a.animate_to_element(f);c.UTILITIES.set_position_is_absolute(l,!0,d);c.robot.in_training&&!h&&d&&c.robot.in_training.dropped_on(a,this.get_widget());b&&"top-level"!=this.get_widget().get_type_name()&&(e=a.get_backside(),a.forget_backside(),a.remove(d),a.set_backside(e));g.add_backside_widget(a,b);
a.dropped_on_other&&a.dropped_on_other(this.get_widget(),!0,d);a.get_body&&a.get_body().is_empty()&&!a.being_trained&&(e=a.open_backside())&&$(e.get_element()).find(".toontalk-train-backside-button").click();d&&a.get_widget().backup_all();return!0};g.add_backside_widgets=function(a,b){0!==a.length&&c.UTILITIES.set_timeout(function(){var d,c,e=this.visible();a.forEach(function(a,h){var f=a.get_widget().get_backside();d=a.get_element(!0);d.toontalk_widget=a.get_widget();b&&(c=b[h])&&(a.is_backside()?
($(d).css({left:c.backside_left,top:c.backside_top,width:c.backside_width,height:c.backside_height}),a.get_widget().apply_backside_geometry(),c.advanced_settings_open&&f.set_advanced_settings_showing(!0,f.get_element())):(0===c.frontside_width&&(c.frontside_width=""),0===c.frontside_height&&(c.frontside_height=""),$(d).css({left:c.frontside_left,top:c.frontside_top,width:c.frontside_width,height:c.frontside_height})));q.append(d);a.set_visible(e);a.get_widget().rerender()})}.bind(this))};g.get_backside_dimensions=
function(){if(n)return{x_scale:n,y_scale:l,original_width:d,original_height:h}};g.set_dimensions=function(a){n=a.x_scale;l=a.y_scale;d=a.original_width;h=a.original_height};g.scale_to_fit=function(a,b){var e;!d&&this.get_widget().backside_geometry&&(d=this.get_widget().backside_geometry.original_width,h=this.get_widget().backside_geometry.original_height);e=c.UTILITIES.scale_to_fit(a,b,d,h);n=e.x_scale;l=e.y_scale};g.run_status_changed=function(a){F(a)};f.toontalk_widget=m;c.UTILITIES.drag_and_drop(f);
q.resizable({start:function(){s=q.width();v=q.height();d||(d=s);h||(h=v)},resize:function(a,b){var e=b.size.width,f=b.size.height;q.is(".toontalk-top-level-backside")||(n*=e/s,l*=f/v,s=e,v=f,c.backside.scale_backside(q,n,l,d,h))},handles:"e,s,se"});f.addEventListener("mouseenter",function(a){var b=m.get_frontside(),d=m.get_parent_of_backside();!b||d&&!d.get_widget().is_of_type("top-level")||c.UTILITIES.highlight_element(b.get_element(),a)});f.addEventListener("mouseleave",function(a){m.is_of_type("top-level")||
c.UTILITIES.remove_highlight()});g.update_display=function(){g.display_updated()};g.display_updated=function(){var a=$(this.get_element());d||(d=a.width());h||(h=a.height())};m.get_backside_widgets&&(y=m.get_backside_widgets(),g.add_backside_widgets(y,m.get_backside_widgets_json_views()));c.debugging&&(f.id=m.debug_id);return g},toString:function(){return"backside of "+this.get_widget()},remove_element:function(){$(this.get_element()).remove()},create_infinite_stack_check_box:function(m,g){var f=
c.UTILITIES.create_check_box(g.get_infinite_stack(),"toontalk-infinite-stack-check-box","Copy when dragged.","Check this if you want the "+g.get_type_name()+" to be copied instead of moved.");$(f.button).click(function(q){var n=f.button.checked;g.set_infinite_stack(n);c.robot.in_training&&c.robot.in_training.edited(g,{setter_name:"set_infinite_stack",argument_1:n,toString:n?"change dragging to make a copy of ":"change dragging back to moving for ",button_selector:".toontalk-infinite-stack-check-box"});
q.stopPropagation()});return f},create_description_label:function(m,g){var f=g.get_description();if(f)return c.UTILITIES.create_text_element("Back side of a "+g.get_type_name()+" that "+f)},add_advanced_settings:function(m){var g=this.get_widget(),f=this.create_infinite_stack_check_box(this,g),q=g.get_type_name(),n=c.UTILITIES.create_text_area(g.get_description(),"toontalk-description-input","This&nbsp;"+q+"&nbsp;","Type here to provide additional information about this "+q+"."),l=$("<button>Make a sensor</button>").button(),
r=function(){var b=n.button.value.trim();g.set_description(b,!0)&&c.robot.in_training&&c.robot.in_training.edited(g,{setter_name:"set_description",argument_1:b,toString:"change the description to '"+b+"'' of the "+q,button_selector:".toontalk-description-input"})},k=document.createElement("table"),b=this.get_element();$(k).addClass("toontalk-advanced-setting");$(n.button).val(g.get_description());n.button.addEventListener("change",r);n.button.addEventListener("mouseout",r);l.click(function(b){b=c.sensor.create("click",
"which",void 0,void 0,!0,g);var a=b.get_frontside_element(!0),d=l.offset();g.add_to_top_level_backside(b,!0);d.left-=120;c.UTILITIES.set_absolute_position($(a),d)});l.attr("title","Click to create a nest which receives messages when events happen to this "+g.get_type_name()+".");k.appendChild(c.UTILITIES.create_row(n.container));k.appendChild(c.UTILITIES.create_row(l.get(0),f.container));b.appendChild(k);m?$(b).find(".toontalk-settings-backside-button").remove():$(b).find(".toontalk-advanced-setting").hide()},
get_type_name:function(){return"the backside of "+c.UTILITIES.add_a_or_an(this.get_widget().get_type_name())},hide_backside:function(m){var g=this.get_widget(),f=g.get_frontside_element(),q=$(g.get_backside_element()),n=q.position(),l=q.parent().closest(".toontalk-backside"),r=g.get_parent_of_backside();c.UTILITIES.remove_highlight();r&&(r.is_backside()?g.set_parent_of_backside(void 0,!0):r.removed_from_container(g,!0,m,!0),g.forget_backside&&g.forget_backside());(function(){var c=g.get_backside_widgets(),
b=g.get_backside_widgets_json_views(!0),e;c.forEach(function(a,d){a.get_widget();var c;if(e=a.get_element())b[d]||(b[d]={}),a.start_position?(c=a.start_position,a.start_position=void 0):c=$(e).position(),a.is_backside()?(b[d].backside_left=c.left,b[d].backside_top=c.top):(b[d].frontside_left=c.left,b[d].frontside_top=c.top)})})();g.backside_geometry=this.get_backside_dimensions();(function(g){var b=$(f).offset(),e=l.position(),a=function(){g.remove()};g.is(":visible")&&(g.addClass("toontalk-side-appearing"),
c.UTILITIES.add_one_shot_event_handler(g.get(0),"transitionend",2500,a),e||(e={left:0,top:0}),g.css({left:b.left-e.left,top:b.top-e.top,opacity:.1}))})(q);$(f).is(":visible")||(n&&$(f).css({left:n.left,top:n.top}),c.UTILITIES.widget_from_jquery(l).add_backside_widget(g),l.append(f),g.render());g.backside_widgets&&g.backside_widgets.forEach(function(c){c.set_visible(!1)})},create_advanced_settings_button:function(m,g){var f=document.createElement("div"),q=$(f),n=!1;f.innerHTML="&gt;";q.addClass("toontalk-settings-backside-button");
q.css({"z-index":c.UTILITIES.next_z_index()});q.click(function(c){n=!n;this.set_advanced_settings_showing(n,m.get_element(),q);c.stopPropagation()}.bind(this));q.attr("title","Click to see the advanced settings of this "+g.get_type_name()+".");return q.get(0)},set_advanced_settings_showing:function(c,g,f){f||(f=$(g).find(".toontalk-settings-backside-button"));c?($(g).find(".toontalk-advanced-setting").show(),f.html("<"),f.attr("title","Click to hide the advanced settings.")):($(g).find(".toontalk-advanced-setting").hide(),
f.html(">"),f.attr("title","Click to show the advanced settings."))},get_widgets:function(){var c=[];$(this.get_element()).children().each(function(g,f){var q=f.toontalk_widget;q&&0>c.indexOf(q)&&c.push(q)});return c},scale_backside:function(c,g,f,q,n){var l=Math.min(1,g,f);1===g&&1===f?c.css({width:"",height:""}):c.css({transform:"scale("+l+", "+l+")","transform-origin":"top left",width:q*g/l,height:n*f/l})},render:function(){c.DISPLAY_UPDATES.pending_update(this)},rerender:function(){this.visible()&&
c.DISPLAY_UPDATES.pending_update(this)},remove_backside_widget:function(c,g,f){return this.get_widget().remove_backside_widget(c,g,f)},remove:function(){this.get_widget().remove()},is_backside:function(){return!0},get_parent:function(){return this.get_parent_of_backside()},is_of_type:function(c){return this.get_widget().is_of_type(c)}}}(window.TOONTALK);window.TOONTALK.frontside=function(c){return{create:function(m){var g=Object.create(this),f=document.createElement("div"),q=$(f),n;$(f).addClass("toontalk-frontside toontalk-side");f.toontalk_widget=m;c.UTILITIES.drag_and_drop(f);g.get_element=function(){return f};g.get_widget=function(){return m};g.visible=function(){return n};g.set_visible=function(c){var f=this.get_widget();n=c;f.walk_children&&f.walk_children(function(f){f.set_visible(c);return!0})};f.addEventListener("click",function(f){$(f.target).is(".ui-resizable-handle")||
1!==f.which||(q.is(".toontalk-top-level-resource")?m.set_running(!m.get_running()):m.get_running()?c.debugging&&console.log("Ignoring click on running widget."):m.open_backside(),f.stopPropagation())});f.addEventListener("mouseenter",function(f){var g=m.get_backside();g&&c.UTILITIES.highlight_element(g.get_element(),f)});f.addEventListener("mouseleave",function(f){m.get_backside()&&c.UTILITIES.remove_highlight()});c.debugging&&(f.id=m.debug_id);return g},update_display:function(){return this.get_widget().update_display()},
remove:function(){$(this.get_element()).remove()}}}(window.TOONTALK);window.TOONTALK.number=function(c){var m=Object.create(c.widget),g=function(a,b,c,e){var f="",g=100;c=50/c;b/=1+b;if(e)for(e=0;g>=c&&e<a.length;)f=f+"<span class='toontalk-digit' style='font-size:"+g+"%'>"+a[e]+"</span>",e+=1,"-"!==a[e]&&(g*=b);else for(e=a.length-1;g>=c&&0<e;)f="<span class='toontalk-digit' style='font-size:"+g+"%'>"+a[e]+"</span>"+f,e-=1,"-"!==a[e]&&(g*=b);return f},f=function(a,b){var c=a/(1+a);return Math.ceil(Math.log(.5/b)/Math.log(c))},q=function(a,b,c){if(a.length<=Math.round(b))return'<span class="toontalk-digit" style="font-size:100%">'+
a+"</span>";if(1>b)return"";if(5>b)return"<span style='font-size: 80%'>"+q(a,1.25*b,.8*c)+"</span>";b=b/2-1;return g(a,b,c,!0)+g(a,b,c,!1)},n=function(a,b,c){var e="",f=new BigInteger(10),g=a.isNegative();for(g&&(a=a.abs());c>e.length;)if(a=a.multiply(f),0>a.compare(b))e+="0";else if(e+=a.divide(b).toString(),a=a.remainder(b).multiply(f),a.isZero())return g&&(e="-"+e),e=l(e);g&&(e="-"+e);return e},l=function(a){return 0<a.length&&"0"===a.charAt(a.length-1)?l(a.substring(0,a.length-1)):a},r=function(a,
b){var c=Math.min(b,a/2);return a-(c+1)},k=function(a,b){b||(b=1);if(!("number"!==typeof a&&"string"!==typeof a||"number"!==typeof b&&"string"!==typeof b))return bigrat.fromValues(a,b);var c=bigrat.create();1===b?bigrat.set(c,bigrat.toBigInteger(a.get_value()),BigInteger.ONE):a.get_value&&b.get_value?bigrat.set(c,bigrat.toBigInteger(a.get_value()),bigrat.toBigInteger(b.get_value())):bigrat.set(c,a,b);return c},b=function(a){switch(a){case "+":return"";case "-":return"&minus;";case "*":return"&times;";
case "/":return"&divide;";case "^":return"^";default:return c.UTILITIES.report_internal_error("Number has an unsupported operator: "+a),""}},e=bigrat.fromInteger(10);m.create=function(a,b,e,f,g){var l=Object.create(m),n=k(a,b);f||(f="improper_fraction");e||(e="+");l.set_value=function(a){if(!bigrat.equals(n,a))return this.fire_value_change_listeners(n,a),n=a,this.rerender(),c.debugging&&(this.debug_string=this.toString()),this};l.set_value_from_sub_classes=l.set_value;l.fire_value_change_listeners=
function(a,b){var d=this.get_listeners("value_changed"),c;d&&(c={type:"value_changed",old_value:a,new_value:b},d.forEach(function(a){a(c)}))};l.get_value=function(){return n};l.set_value_from_decimal=function(a){"number"===typeof a?this.set_value(bigrat.fromInteger(a)):this.set_value(bigrat.fromDecimal(a))};l.get_format=function(){return f};l.set_format=function(a,b){f=a;b&&this.rerender();return this};l.get_operator=function(){return e};l.set_operator=function(a,b){e=a;b&&this.rerender();return this};
l=m.add_standard_widget_functionality(l);l.set_description(g);c.debugging&&(l.debug_string=l.toString(),l.debug_id=c.UTILITIES.generate_unique_id(),n.debug_id_new=l.debug_id);return l};m.create_backside=function(){return c.number_backside.create(this)};m.set_from_values=function(a,b){return this.set_value(k(a,b))};m.ONE=function(){return this.create(1)};m.ZERO=function(){return this.create(0)};m.copy=function(a){return this.add_to_copy(m.create(this.get_value()[0],this.get_value()[1],this.get_operator(),
this.get_format(),this.get_description()),a)};m.is_number=function(){return!0};m.equals=function(a){return a.equals_number&&a.equals_number(this)};m.equals_number=function(a){return bigrat.equals(this.get_value(),a.get_value())};m.compare_with=function(a){if(a.compare_with_number)return-1*a.compare_with_number(this)};m.compare_with_number=function(a){return bigrat.equals(this.get_value(),a.get_value())?0:bigrat.isGreaterThan(this.get_value(),a.get_value())?1:-1};m.update_display=function(){var a,
b,e,f,g;a=this.get_frontside(!0).get_element();$(a).is(".toontalk-conditions-contents")?b=$(a):$(a).parent().is(".toontalk-backside, .toontalk-json")?(b=$(a),g=!0):b=$(a).parent().is(".toontalk-scale-half")?$(a):$(a).parent();if($(a).is(".toontalk-carried-by-bird"))e=100,f=40;else if($(a).is(".toontalk-element-attribute"))e=200,f=32;else{if(!b.is(":visible"))return;e=b.width();f=b.height();if(0===e||0===f)return;b.is(".toontalk-nest")&&(e*=.8,f*=.8)}$(a).removeClass("toontalk-number-eighth-size-border toontalk-number-quarter-size-border toontalk-number-half-size-border toontalk-number-full-size-border");
32>=e||32>=f?($(a).addClass("toontalk-number-eighth-size-border"),a.toontalk_border_size=4):64>=e||64>=f?($(a).addClass("toontalk-number-quarter-size-border"),a.toontalk_border_size=8):128>=e||128>=f?($(a).addClass("toontalk-number-half-size-border"),a.toontalk_border_size=16):($(a).addClass("toontalk-number-full-size-border"),a.toontalk_border_size=32);b=f-2*a.toontalk_border_size;g=this.to_HTML(e/(.64*b),b,this.get_format(),!0,this.get_operator(),g);c.UTILITIES.on_a_nest_in_a_box(a)&&(e="width:"+
e+"px;",b=g.indexOf('style="'),g=0<=b?g.substring(0,b+7)+e+g.substring(b+7):g);e=$(a).children(".toontalk-widget");e.is("*")?e=e.get(0):(e=document.createElement("div"),a.appendChild(e));e.innerHTML=g;$(e).addClass("toontalk-widget");a.title=this.get_title();(a=this.get_backside())&&a.rerender()};m.to_HTML=function(a,d,c,k,l,m){var y,z,C,A,F,E,G=!1!==k?" toontalk-top-level-number":"";m&&(G+=" toontalk-number-size-unconstrained-by-container");z=l?b(l):"";a||(a=4);d||(d=16);if(this.get_erased&&this.get_erased())return'<div class="toontalk-number toontalk-integer'+
G+'" style="font-size: '+d+'px;"></div>';0<z.length&&(a-=1,2>a&&(d*=Math.max(1,a)/2,a=2));if(this.is_integer()&&"scientific_notation"!==c)return y=bigrat.toBigInteger(this.get_value()).toString(),C=y.length,0<z.length&&C++,4>a&&C>a&&(C=Math.min(4,C),d*=a/C,a=C),'<div class="toontalk-number toontalk-integer'+G+'" style="font-size: '+d+'px;">'+z+q(y,a,d)+"</div>";y=' style="font-size:'+.4*d+'px;"';if("improper_fraction"===c||!c)return d='<table class="toontalk-number toontalk-improper-fraction'+G+'"'+
y+'><tr class="toontalk-numerator"><td align="center" class="toontalk-number">'+q(this.numerator_string(),2*a,d)+'</td></tr><tr class="toontalk-fraction-line-as-row"><td  class="toontalk-fraction-line-as-table-entry"><div class="toontalk-fraction-line"></div></tr><tr class="toontalk-denominator"><td align="center" class="toontalk-number">'+q(this.denominator_string(),2*a,d)+"</td></tr></table>",""===z?d:"<table class='toontalk-operator-and-fraction'"+y+"><tr><td>"+z+"</td><td>"+d+"</td></tr></table>";
if("mixed_number"===c||"proper_fraction"===c){z=this.integer_part();if(z.is_zero())return this.to_HTML(a,d,"improper_fraction",k,l);C=this.copy({just_value:!0}).subtract(z).absolute_value();return'<table class="toontalk-number toontalk-mixed-number'+G+'"'+y+'><tr><td class="toontalk-number toontalk-integer-part-of-mixed-number">'+z.to_HTML(a/2,d,"",!1,this.get_operator())+'</td><td class="toontalk-number toontalk-fraction-part-of-mixed-number">'+C.to_HTML(a/2,d,"improper_fraction",!1)+"</td></tr></table>"}if("decimal"===
c)return 4>a&&(d*=Math.max(1,a)/4,a=4),'<div class="toontalk-number toontalk-decimal'+G+'" style="font-size: '+d+'px;">'+z+this.decimal_string(a,d)+"</div>";if("scientific_notation"===c){C=bigrat.isNegative(this.get_value());A=this.get_value();F=bigrat.abs(bigrat.create(),A);A=bigrat.isLessThan(F,bigrat.ONE);F=(A?bigrat.toBigInteger(bigrat.divide(bigrat.create(),bigrat.ONE,F)):bigrat.toBigInteger(F)).toString();A=A?-F.length:F.length-1;F=bigrat.power(bigrat.create(),e,A);E=bigrat.divide(bigrat.create(),
this.get_value(),F);F=6+(0===A?1:Math.ceil(Math.log10(Math.abs(A)))/2);C&&F++;if(a<F+1)return this.to_HTML(F+1,d*a/(F+1),c,k,l,m);k=f(r(a,F),d);k=n(E[0],E[1],k);C?(C=k.substring(0,2),k=k.substring(2)):(C=k.substring(0,1),k=k.substring(1));a=g(k,a*(1-F/a),d,!0);0<a.length&&(a="<span class='toontalk-decimal-point'>.</span>"+a);return'<table class="toontalk-number toontalk-scientific_notation'+G+'"'+y+'><tr><td class="toontalk-number toontalk-significand-of-scientific-notation"><div class="toontalk-number toontalk-decimal'+
G+'" style="font-size: '+d+'px;">'+z+C+a+'</td><td class="toontalk-number toontalk-exponent-of-scientific-notation"><div style="font-size: '+d+'px;"> &times;10<sup style="font-size: '+d/2+'px;">'+A+"</sup></div></td></tr></table>"}};m.drop_on=function(a,b,c,e){if(a.number_dropped_on_me)return a.number_dropped_on_me(this,b,c,e),!0;if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,b,c,e);console.log("No handler for drop of '"+this+"' on '"+a+"'")};m.number_dropped_on_me=function(a,b,e,f){var g,
k,l,n;return a.visible()&&(e||f&&f.visible())?(f&&(a.robot_waiting_before_next_step=f),g=document.createElement("div"),$(g).addClass("toontalk-bammer-down"),k=$(this.get_frontside_element()).closest(".toontalk-top-level-backside"),g.style.left="-10px",g.style.top=k.height()+"px",k.append(g),b=this.get_frontside_element(),l=$(b).offset(),l.left-=.75*$(g).width(),l.left+=.5*$(b).width()+.1*$(g).width(),l.top-=.5*$(b).height()+.4*$(g).height(),b=function(){this.number_dropped_on_me_semantics(a,e,f)&&
f&&f.run_next_step();e&&this.backup_all();$(g).removeClass("toontalk-bammer-down");c.UTILITIES.set_timeout(function(){var a=k.offset();a||(a={left:0,top:0});$(g).addClass("toontalk-bammer-away");l.left=a.left+k.width()-100;l.top=a.top+k.height()+100;n=function(){$(g).remove()};c.UTILITIES.animate_to_absolute_position(g,l,n);$(g).css({opacity:.01})})}.bind(this),c.UTILITIES.animate_to_absolute_position(g,l,b),$(g).css({opacity:1,"z-index":c.UTILITIES.next_z_index()+100}),this):this.number_dropped_on_me_semantics(a,
e,f)};m.number_dropped_on_me_semantics=function(a,b,e){c.robot.in_training&&b&&c.robot.in_training.dropped_on(a,this);a.remove();switch(a.get_operator()){case "+":return this.add(a);case "-":return this.subtract(a);case "*":return this.multiply(a);case "/":return this.divide(a);case "^":return this.power(a);default:c.UTILITIES.report_internal_error("Number received a number with unsupported operator: "+a.get_operator())}};m.widget_dropped_on_me=function(a,b,c,e){return a.number_dropped_on_me?this.number_dropped_on_me(a,
b,c,e):!1};m.add=function(a){this.set_value(bigrat.add(bigrat.create(),this.get_value(),a.get_value()));return this};m.subtract=function(a){this.set_value(bigrat.subtract(bigrat.create(),this.get_value(),a.get_value()));return this};m.multiply=function(a){this.set_value(bigrat.multiply(bigrat.create(),this.get_value(),a.get_value()));return this};m.divide=function(a){this.set_value(bigrat.divide(bigrat.create(),this.get_value(),a.get_value()));return this};m.power=function(a){this.set_value(bigrat.power(bigrat.create(),
this.get_value(),bigrat.toInteger(a.get_value())));return this};m.absolute_value=function(){this.set_value(bigrat.abs(bigrat.create(),this.get_value()));return this};m.is_zero=function(){return bigrat.equals(this.get_value(),bigrat.ZERO)};m.is_negative=function(){return bigrat.isNegative(this.get_value())};m.toString=function(){return("+"===this.get_operator()?"":this.get_operator())+bigrat.str(this.get_value())};m.to_float=function(){return bigrat.toDecimal(this.get_value())};m.get_type_name=function(){return"number"};
m.get_help_URL=function(){return"docs/manual/numbers.html"};m.get_json=function(){return{type:"number",operator:this.get_operator(),numerator:this.numerator_string(),denominator:this.denominator_string(),format:this.get_format()}};c.creators_from_json.number=function(a){return m.create(a.numerator,a.denominator,a.operator,a.format,a.description)};m.is_integer=function(){return 0===this.get_value()[1].compare(BigInteger.ONE)||0===this.get_value()[0].compare(BigInteger.ZERO)};m.numerator=function(){var a=
bigrat.create();return bigrat.set(a,this.get_value()[0],BigInteger.ONE)};m.denominator=function(){var a=bigrat.create();return bigrat.set(a,this.get_value()[1],BigInteger.ONE)};m.numerator_string=function(){return this.get_value()[0].toString()};m.denominator_string=function(){return this.get_value()[1].toString()};m.integer_part=function(){return this.create(this)};m.decimal_string=function(a,b){if(this.is_integer())return this.numerator_string();var c=m.copy.call(this),e=c.integer_part(),k=e.toString();
"0"===k&&this.is_negative()&&(k="-"+k);var l=c.subtract(e),e=r(a,k.length),y=f(e,b),c=Math.min(k.length,a/2),l=l.absolute_value(),y=n(l.get_value()[0],l.get_value()[1],y),e=y.length<a?y:g(y,e,b,!0);return q(k,c,b)+"<span class='toontalk-decimal-point'>.</span>"+e};m.match=function(a){return this.get_erased&&this.get_erased()?a.match_with_any_number?a.match_with_any_number():this:a.match_with_this_number?a.match_with_this_number(this):this};m.match_with_any_number=function(){return"matched"};m.match_with_this_number=
function(a){return a.equals(this)?"matched":a};return m}(window.TOONTALK);
window.TOONTALK.number_backside=function(c){return{create:function(m){var g=c.backside.create(m),f=g.get_element(),q=document.createElement("div"),n=m.numerator_string(),l=m.denominator_string(),r=c.UTILITIES.create_text_area(n,"toontalk-numerator-input","","Type here to edit the numerator"),k=c.UTILITIES.create_text_area(l,"toontalk-denominator-input","","Type here to edit the denominator"),b=c.UTILITIES.create_radio_button("number_format","decimal","toontalk-decimal-radio-button","Decimal number",
"Display number as a decimal."),e=c.UTILITIES.create_radio_button("number_format","proper_fraction","toontalk-proper-fraction-radio-button","Mixed number","Display number as an integer part and a proper fraction."),a=c.UTILITIES.create_radio_button("number_format","improper_fraction","toontalk-improper-fraction-radio-button","Improper fraction","Display number as a simple fraction."),d=c.UTILITIES.create_radio_button("number_format","scientific_notation","toontalk-scientific-notation-radio-button",
"Scientific notation","Display number as a decimal between 1 and 10 multiplied by ten to some power."),h=c.UTILITIES.create_radio_button("operator","+","toontalk-plus-radio-button","+","Add me to what I'm dropped on."),s=c.UTILITIES.create_radio_button("operator","-","toontalk-minus-radio-button","&minus;","Subtract me from what I'm dropped on."),v=c.UTILITIES.create_radio_button("operator","*","toontalk-times-radio-button","&times;","Multiply me with what I'm dropped on."),w=c.UTILITIES.create_radio_button("operator",
"/","toontalk-dividie-radio-button","&divide;","Divide me into what I'm dropped on."),y=c.UTILITIES.create_radio_button("operator","^","toontalk-power-radio-button","Integer power","Use me as the number of times to multiply together what I'm dropped on."),z=function(a){var b=r.button.value.trim(),d=k.button.value.trim();if(b!==n||d!==l)m.set_from_values(b,d),n=b,l=d,c.robot.in_training&&(a=a.srcElement.className.split(" ",1)[0],c.robot.in_training.edited(m,{setter_name:"set_from_values",argument_1:b,
argument_2:d,toString:"toontalk-denominator-input"===a?"change value of the denominator to "+d+" of the number":"change value of the numerator to "+b+" of the number",button_selector:"."+a}))},C=function(){var f=c.UTILITIES.selected_radio_button(b.button,e.button,a.button,d.button),h=f.value;m.set_format(h,!0);c.robot.in_training&&c.robot.in_training.edited(m,{setter_name:"set_format",argument_1:h,toString:"change the format to "+h+" of the number",button_selector:"."+f.className.split(" ",1)[0]})},
A=function(){var a=c.UTILITIES.selected_radio_button(h.button,s.button,v.button,w.button,y.button),b=a.value;m.set_operator(b,!0);c.robot.in_training&&c.robot.in_training.edited(m,{setter_name:"set_operator",argument_1:b,toString:"change the operator to "+b+" of the number",button_selector:"."+a.className.split(" ",1)[0]})},F=c.UTILITIES.create_horizontal_table(r.container,q,k.container),E=$(c.UTILITIES.create_horizontal_table(b.container,e.container,a.container,d.container)).buttonset().get(0),G=
$(c.UTILITIES.create_horizontal_table(h.container,s.container,v.container,w.container,y.container)).buttonset().get(0),X=c.backside.create_advanced_settings_button(g,m),L=g.update_display;q.innerHTML="/";$(q).addClass("ui-widget");f.appendChild(F);f.appendChild(X);r.button.addEventListener("change",z);r.button.addEventListener("mouseout",z);r.button.addEventListener("mouseenter",function(){n=r.button.value.trim();l=k.button.value.trim()});k.button.addEventListener("change",z);k.button.addEventListener("mouseout",
z);b.button.addEventListener("change",C);e.button.addEventListener("change",C);a.button.addEventListener("change",C);d.button.addEventListener("change",C);switch(m.get_format()){case "decimal":c.UTILITIES.check_radio_button(b);break;case "improper_fraction":c.UTILITIES.check_radio_button(a);break;case "mixed_number":case "proper_fraction":c.UTILITIES.check_radio_button(e);break;case "scientific_format":c.UTILITIES.check_radio_button(d)}switch(m.get_operator()){case "+":c.UTILITIES.check_radio_button(h);
break;case "-":c.UTILITIES.check_radio_button(s);break;case "*":c.UTILITIES.check_radio_button(v);break;case "/":c.UTILITIES.check_radio_button(w);break;case "^":c.UTILITIES.check_radio_button(y)}h.button.addEventListener("change",A);s.button.addEventListener("change",A);v.button.addEventListener("change",A);w.button.addEventListener("change",A);y.button.addEventListener("change",A);g.update_display=function(){$(r.button).val(m.numerator_string());$(k.button).val(m.denominator_string());L()};$(E).addClass("toontalk-advanced-setting");
$(G).addClass("toontalk-advanced-setting");f.appendChild(E);f.appendChild(G);g.add_advanced_settings();return g}}}(window.TOONTALK);window.TOONTALK.box=function(c){var m=Object.create(c.widget);m.create=function(g,f,q,n){var l=Object.create(m),r=[],k;"undefined"===typeof f&&(f=!0);l.get_horizontal=function(){return f};l.set_horizontal=function(b,c){f=b;c&&($(this.get_frontside_element()).children(".toontalk-side").remove(),this.rerender());return this};l.get_hole=function(b){return r[b]};l.get_hole_contents=function(b){return r[b].get_contents()};l.set_hole=function(b,e,a){r[b].set_contents(e);a&&(e&&e.save_dimensions(),this.update_hole_display(b,
e));this.rerender();c.debugging&&(this.debug_string=this.toString())};l.get_holes=function(){return r};l.temporarily_remove_contents=function(b,c){var a=this.get_index_of(b);this.temporarily_removed_contents||(this.temporarily_removed_contents=[]);this.temporarily_removed_contents[a]=b;this.set_hole(a,void 0,c);return function(){this.set_hole(a,b,c);this.temporarily_removed_contents[a]=void 0}.bind(this)};l.get_contents_temporarily_removed=function(b){if(this.temporarily_removed_contents)return this.temporarily_removed_contents[b]};
l.set_contents=function(b){b.forEach(function(b,a){r[a].set_contents(b)})};l.get_size=function(){return g};l.set_size=function(b,e){var a;if(g===b)return!1;r.length=b;if(b>g)for(a=g;a<b;a++)r[a]=c.box_hole.create(a),r[a].set_parent_of_frontside(l);g=b;e&&this.rerender();c.debugging&&(this.debug_string=this.toString());return!0};l.copy=function(b){var c=r.map(function(a){if(a=a.get_contents())return a.copy(b)}),c=m.create(g,f,c,this.get_description());return this.add_to_copy(c,b)};l=l.add_standard_widget_functionality(l);
for(k=0;k<g;k++)r[k]=c.box_hole.create(k),r[k].set_parent_of_frontside(l);l.set_description(n);l.set_contents(q);c.debugging&&(l.debug_string=l.toString(),l.debug_id=c.UTILITIES.generate_unique_id());return l};m.create_backside=function(){return c.box_backside.create(this)};m.equals=function(c){return c.equals_box&&c.equals_box(this)};m.equals_box=function(c){var f=this.get_size(),q,n,l;if(f!==c.get_size())return!1;for(q=0;q<f;q++)if(n=this.get_hole_contents(q),l=c.get_hole_contents(q),!n&&l||n&&
!l||n&&l&&(!n.equals||!n.equals(l)))return!1;return!0};m.compare_with=function(c){if(c.compare_with_box)return-1*c.compare_with_box(this)};m.compare_with_box=function(c){var f=this.get_size(),q=c.get_size(),n,l;if(f>q)return 1;if(f<q)return-1;for(q=0;q<f;q++){n=this.get_hole_contents(q);l=c.get_hole_contents(q);if(n&&!l)return 1;if(!n&&l)return-1;if(n&&l)if(n.compare_with){if(n=n.compare_with(l),1===n||-1===n)return n}else return}return 0};m.match=function(c){return this.get_erased&&this.get_erased()?
c.match_with_any_box?c.match_with_any_box():this:c.match_with_this_box?c.match_with_this_box(this):this};m.match_with_any_box=function(){return"matched"};m.match_with_this_box=function(g){var f=this.get_size(),q=[],n,l,m;if(f!==g.get_size())return g;for(n=0;n<f;n++)if(m=g.get_hole_contents(n)){l=this.get_hole_contents(n);if(!l)return g;l=c.UTILITIES.match(m,l);if(l.is_widget)return l;"matched"!==l&&(q=0===q.length?l:q.concat(l))}return 0<q.length?q:"matched"};m.toString=function(){var c="",f=this.get_size(),
q,n,l=this.get_type_name()+" that looks like ";for(q=0;q<f;q++)n=this.get_hole(q),c+=n.get_full_description(),q<f-1&&(c+=" | ");return l+"["+c.replace(l,"")+"]"};m.get_type_name=function(){return"box"};m.get_help_URL=function(){return"docs/manual/boxes.html"};m.get_json=function(g){var f=[],q=this.get_size(),n;for(n=0;n<q;n++)this.get_hole_contents(n)?f[n]=c.UTILITIES.get_json(this.get_hole_contents(n),g):f[n]=null;return{type:"box",size:q,contents:f,horizontal:this.get_horizontal()}};m.walk_children=
function(c){var f=this.get_size(),q;for(q=0;q<f&&c(this.get_hole(q));q++);};c.creators_from_json.box=function(g,f){return m.create(g.size,g.horizontal,c.UTILITIES.create_array_from_json(g.contents,f),g.description)};m.update_display=function(){var g=this.get_frontside(!0).get_element(),f=this.get_size(),q=function(e,f,g){var k=f.get_frontside_element(!0),l,q;n?(l=b*g,1<g&&(l+=h*(g-1)),q=0):(l=0,q=a*g,1<g&&(q+=h*(g-1)));$(e).css({left:l,top:q,width:b,height:a});e!==k&&($(k).css({left:0,top:0,width:"",
height:""}),e.appendChild(k));c.UTILITIES.has_animating_image(k)||(0<g&&($(e).removeClass("toontalk-box-eighth-size-border-left toontalk-box-quarter-size-border-left toontalk-box-half-size-border-left toontalk-box-full-size-border-left"),$(e).removeClass("toontalk-box-eighth-size-border-top toontalk-box-quarter-size-border-top toontalk-box-half-size-border-top toontalk-box-full-size-border-top"),n?$(e).addClass(d+"-left"):$(e).addClass(d+"-top")),e.toontalk_border_size=h);f.render()},n=this.get_horizontal();
$(g).is(".toontalk-box");var l=function(){var a=$(g).children(".toontalk-box-hole");a.length===f?a.each(function(a,b){q(b,this.get_hole(a),a)}.bind(this)):(a.remove(),this.get_holes().forEach(function(a,b){m=a.get_element();$(m).addClass("toontalk-hole-number-"+b);q(m,a,b);g.appendChild(m)}))}.bind(this),m,k,b,e,a,d,h;$(g).addClass("toontalk-box");$(g).removeClass("toontalk-box-eighth-size-border toontalk-box-quarter-size-border toontalk-box-half-size-border toontalk-box-full-size-border");g.title=
this.get_title();c.debugging&&(this.debug_string=this.toString());this.get_erased()?($(g).addClass("toontalk-box-erased"),$(g).children(".toontalk-side").remove()):($(g).removeClass("toontalk-box-erased"),k=$(g).width(),e=$(g).height(),n?(b=k/f,a=e):(b=k,a=e/f),32>=b||32>=a?(d="toontalk-box-eighth-size-border",h=4):64>=b||64>=a?(d="toontalk-box-quarter-size-border",h=8):128>=b||128>=a?(d="toontalk-box-half-size-border",h=16):(d="toontalk-box-full-size-border",h=32),n?b-=(f-1)*h/f:a-=(f-1)*h/f,$(g).addClass(d),
g.toontalk_border_size=h,c.UTILITIES.set_timeout(l))};m.update_hole_display=function(c,f){var q=this.get_frontside_element(),q=$(q).children(".toontalk-hole-number-"+c),n;q.empty();f&&(n=f.get_frontside_element(!0),q.append(n),$(n).css({left:0,top:0}),f.rerender())};m.drop_on=function(c,f,q){if(c.box_dropped_on_me)return f=c.box_dropped_on_me(this,q),q&&c.rerender(),this.remove(),f;if(c.widget_dropped_on_me)return c.widget_dropped_on_me(this,f,q);console.log("No handler for drop of "+this+" on "+
c)};m.box_dropped_on_me=function(c,f){console.log("box on box not yet implemented");return!1};m.widget_dropped_on_me=function(g,f,q,n){var l=this.get_horizontal(),m=this.get_frontside_element(),k=this.get_size(),b,e,a;if(0!==k){e=$(m).offset();m=l?$(m).width()/k:$(m).height()/k;a=l?e.left:e.top;if(q)for(b=0;b<k;b++)if(e=this.get_hole(b),a+=m,(l?q.pageX<=a:q.pageY<=a)||b+1===k)return(l=e.get_contents())?g.drop_on(l,f,q,n):e.widget_dropped_on_me(g,f,q,n);c.UTILITIES.report_internal_error(g+" dropped on "+
this+" but no event was provided.")}};m.get_index_of=function(c){return c.get_parent_of_frontside().get_index()};m.removed_from_container=function(g,f,q,n){f=!!q;"undefined"===typeof n&&(n=this.get_index_of(g));0<=n?(this.set_hole(n,void 0,f),f&&(this.rerender(),g.restore_dimensions())):c.UTILITIES.report_internal_error("Attempted to remove "+g+" from "+this+" but not found.")};m.get_path_to=function(g,f){var q=this.get_size(),n,l;if("empty hole"===g.get_type_name()){q=g.get_parent_of_frontside();
l=c.box.path.create(g.get_index());if(q===this)return l;q=this.get_path_to(q);q.next=l;return q}for(n=0;n<q;n++)if(l=this.get_hole_contents(n)||this.get_contents_temporarily_removed(n)){if(g===l||l.top_contents_is&&l.top_contents_is(g))return c.box.path.create(n);if(l.get_path_to&&(l=l.get_path_to(g,f)))return q=c.box.path.create(n),q.next=l,q}};m.dereference=function(g,f,q){var n,l;if(g){n=g.get_index&&g.get_index();if(!c.debugging||"number"===typeof n){if(l=this.get_hole_contents(n)){if(l.dereference_contents&&
!g.not_to_be_dereferenced)return l.dereference_contents(g,f,q);if(g.next){if(l.dereference)return l.dereference(g.next,f,q);c.UTILITIES.report_internal_error("Expected to refer to a part of "+l+" but it lacks a method to obtain "+c.path.toString(g.next))}g.removing_widget&&("empty hole"===l.get_type_name()?c.UTILITIES.report_internal_error("Robot is trying to remove something from an empty hole. "):l.get_infinite_stack()||q.remove_from_container(l,this));return l}return this.get_hole(n)}c.UTILITIES.report_internal_error(this+
" unable to dereference the path: "+c.path.toString(g))}else return this};m.path={create:function(g){return{get_index:function(){return g},toString:function(){return"scale"===this.true_type?0===g?"the left side of the scale ":"the right side of the scale ":"the "+c.UTILITIES.cardinal(g)+" hole "},get_json:function(c){return{type:"box_path",index:g,true_type:this.true_type,next:this.next&&this.next.get_json(c)}}}}};c.creators_from_json.box_path=function(g,f){var q=m.path.create(g.index);g.next&&(q.next=
c.UTILITIES.create_from_json(g.next,f));g.true_type&&(q.true_type=g.true_type);return q};return m}(window.TOONTALK);
window.TOONTALK.box_backside=function(c){return{create:function(m){var g=c.backside.create(m),f=c.UTILITIES.create_text_input(m.get_size().toString(),"toontalk-box-size-input","Number of holes","Type here to edit the number of holes."),q=c.UTILITIES.create_radio_button("box_orientation","horizontal","toontalk-horizontal-radio-button","Left to right","Show box horizontally."),n=c.UTILITIES.create_radio_button("box_orientation","vertical","toontalk-vertical-radio-button","Top to bottom","Show box vertically."),
l=function(){var a=parseInt(f.button.value.trim(),10);m.set_size(a,!0)&&c.robot.in_training&&c.robot.in_training.edited(m,{setter_name:"set_size",argument_1:a,toString:"change the number of holes to "+a+" of the box",button_selector:".toontalk-box-size-input"})},r=function(){var a=c.UTILITIES.selected_radio_button(q.button,n.button),b=a.value,e="horizontal"===b;m.set_horizontal(e,!0);c.robot.in_training&&c.robot.in_training.edited(m,{setter_name:"set_horizontal",argument_1:e,toString:"change the orientation to "+
b+" of the box",button_selector:"."+a.className.split(" ",1)[0]})},k=g.get_element(),b=c.backside.create_advanced_settings_button(g,m),e=g.update_display;f.button.addEventListener("change",l);f.button.addEventListener("mouseout",l);q.button.addEventListener("change",r);n.button.addEventListener("change",r);g.update_display=function(){f.button.value=m.get_size().toString();m.get_horizontal()?c.UTILITIES.check_radio_button(q):c.UTILITIES.check_radio_button(n);e()};k.appendChild(f.container);k.appendChild($(c.UTILITIES.create_horizontal_table(q.container,
n.container)).buttonset().get(0));k.appendChild(b);g.add_advanced_settings();g.render();return g}}}(window.TOONTALK);
window.TOONTALK.box_hole=function(c){return{create:function(m){var g=Object.create(this),f,q,n;g.get_element=function(){n||(n=document.createElement("div"),n.className="toontalk-box-hole toontalk-frontside toontalk-side",n.toontalk_widget=g);return n};g.get_frontside=function(c){return f?f.get_frontside(c):this.get_element()};g.get_side_element=function(){return this.get_element()};g.get_frontside_element=function(c){return f?f.get_frontside_element(c):this.get_element()};g.get_frontside=function(){return this};
g.widget_dropped_on_me=function(f,g,k,b){g=this.get_parent_of_frontside();var e;c.robot.in_training&&k&&c.robot.in_training.dropped_on(f,this);k&&f.save_dimensions&&(f.save_dimensions(),f.set_size_attributes&&(e=$(this.get_element()),f.set_size_attributes(e.width(),e.height())));this.set_contents(f);f.dropped_on_other&&f.dropped_on_other(this,!1,k,b);g.render();return!0};g.get_json=function(){return null};g.add_to_json=function(c){return c};g.copy=function(f){return c.box_hole.create(m)};g.match=
function(){return"matched"};g.get_type_name=function(){return"empty hole"};g.is_of_type=function(c){return"empty hole"===c};g.get_index=function(){return m};g.get_contents=function(){return f};g.set_contents=function(l){var n=this.get_listeners("value_changed");n&&(f!==l&&n.forEach(function(c){c({type:"value_changed",old_value:f,new_value:l})}),f&&n.forEach(function(c){f.remove_listener("value_changed",c,!0)}),l&&n.forEach(function(c){l.add_listener("value_changed",c)}));f&&f.set_parent_of_frontside(void 0);
(f=l)?(f.set_parent_of_frontside(this),c.debugging&&(g.debug_string="A hole containing "+f),f.set_visible(q)):c.debugging&&(g.debug_string="An empty hole")};g.visible=function(){return this.get_parent_of_frontside().visible()};g.set_visible=function(c){q=c;f&&f.set_visible(c)};g.render=function(){if(f)return f.render()};g.rerender=function(){if(f)return f.rerender()};g.set_running=function(c){f&&f.set_running(c)};g.removed_from_container=function(g,n,k){f?(k&&f.restore_dimensions(),this.set_contents(void 0),
k&&this.get_parent_of_frontside().render()):c.UTILITIES.report_internal_error("Holes can't be removed from containers.")};g.temporarily_remove_contents=function(c,g){if(f)return this.get_parent_of_frontside().temporarily_remove_contents(c,g)};g.toString=function(){return f?f.toString():"_"};g.get_description=function(){return f?f.get_description():"_"};g.get_full_description=function(){return f?f.get_full_description():"_"};g.is_backside=function(){return!1};g.get_widget=function(){return this};c.debugging&&
(g.debug_string="An empty hole");c.widget.has_parent(g);c.widget.has_listeners(g);return g}}}(window.TOONTALK);(function(){var c,m,g,f,q,n;window.TOONTALK.bird=function(f){var g=Object.create(f.widget);g.create=function(k,b){var e=Object.create(g);c=function(a){k=a};e.widget_dropped_on_me=function(a,b,c,e){b=b?a.get_backside():a;var g;if(k){if(k.has_ancestor(a))return f.UTILITIES.display_message("Bird can't take its nest to its nest!"),!1;this.visible()||k.visible()||k.any_nest_copies_visible()?(a.save_dimensions(),g=this.get_frontside_element(),$(g).removeClass("toontalk-bird-gimme"),e&&(a.robot_waiting_before_next_step=
e,a.remove_from_parent_of_frontside()),k.animate_bird_delivery(b,this,e&&e.run_next_step,e)):(k.add_to_contents(b),e&&e.run_next_step())}else console.log("to do: handle drop on a nestless bird -- just removes other?");f.robot.in_training&&c&&f.robot.in_training.dropped_on(a,this);return!0};e.animate_delivery_to=function(a,b,c,e,g,n,q){var m=!!c,r=this.get_parent_of_frontside(),A=this.get_frontside_element(),F=this.closest_visible_ancestor_or_frontside(),E=$(F.get_frontside_element()).offset(),G=function(){var b=
$(x).offset(),d;m?this.remove():(d=function(){$(A).removeClass("toontalk-bird-morph-to-static");$(A).addClass("toontalk-bird-static");r&&r.get_widget().rerender()},A.style.position=M,b&&(E.left-=b.left,E.top-=b.top),$(A).css(E),x&&x.appendChild(A),r&&(r.get_widget().is_of_type("top-level")?this.rerender():r.get_widget().rerender()),ca&&(na.remove_backside_widget(this,!1,!0),ca()),f.UTILITIES.add_animation_class(A,"toontalk-bird-morph-to-static"),f.UTILITIES.add_one_shot_event_handler(A,"animationend",
1E3,d),n&&(n(),a.robot_waiting_before_next_step=void 0))}.bind(this),X=function(){P();c.add_to_contents(a,this,!0);f.UTILITIES.set_timeout(function(){this.fly_to(E,G)}.bind(this))}.bind(this),L=function(a,b){this.element_to_display_when_flying=a;b&&(this.update_display(),b.update_display());a.width_before_carry=a.clientWidth;a.height_before_carry=a.clientHeight;f.UTILITIES.set_timeout(function(){$(this.element_to_display_when_flying).addClass("toontalk-carried-by-bird").css({left:"",top:"",width:"",
height:"",position:""});this.update_display()}.bind(this))}.bind(this),P=function(a){if(this.element_to_display_when_flying){var b=this.element_to_display_when_flying.width_before_carry,d=this.element_to_display_when_flying.height_before_carry;$(this.element_to_display_when_flying).removeClass("toontalk-carried-by-bird");a?($(this.element_to_display_when_flying).css({width:b,height:d}),$(A).closest(".toontalk-top-level-backside").append(this.element_to_display_when_flying),f.UTILITIES.set_absolute_position($(this.element_to_display_when_flying),
a)):$(this.element_to_display_when_flying).remove();this.element_to_display_when_flying=void 0;this.update_display()}}.bind(this),x,M,O,ba,ha,ca,qa,Y,ra,na,V;c||(c=k);ra=a.get_element();L(ra,a);F=b.get_widget().closest_visible_ancestor().get_widget().get_frontside_element();if(b.visible()||this.visible())if(b=$(F).offset(),ha=$(c.get_frontside_element()).closest(".toontalk-top-level-backside"),ha.is("*")||(ha=$(this.get_frontside_element()).closest(".toontalk-top-level-backside")),(V=ha.offset())||
(V={left:0,top:0}),e&&(E={left:e+V.left,top:g+V.top}),x=A.parentElement,O=$(A).width(),ba=$(A).height(),M=A.style.position,A.style.position="absolute",na=this.top_level_widget(),r&&r.get_widget().temporarily_remove_contents&&(ca=r.get_widget().temporarily_remove_contents(this,!0))&&na.add_to_top_level_backside(this),ha.append(A),$(A).css({left:e||E.left-V.left,top:g||E.top-V.top,width:O,height:ba}),(qa=c.get_contents_frontside_element())&&c.visible()&&(!q||q.visible())){e=$(F).width();g=$(F).height();
Y=$(F).offset();V.max_left=V.left+ha.width();V.max_top=V.top+ha.height();b.left+=e;b.top+=g;var sa={left:Math.min(Y.left+e,V.max_left-e),top:Math.min(Y.top+g,V.max_top-g)},da={left:Math.max(Y.left-e,V.left),top:Math.max(Y.top-g,V.top)},F=function(){var a=function(){c.set_locked(!0);this.fly_to(Y,va,300)}.bind(this);P(sa);c.get_locked()?c.run_when_unlocked(a):a()}.bind(this),va=function(){L(qa);this.fly_to(da,Aa,300)}.bind(this),Aa=function(){P(da);this.fly_to(sa,la,300)}.bind(this),la=function(){L(ra,
a);this.fly_to(Y,wa,300)}.bind(this),wa=function(){P(Y);this.fly_to(da,cb,300)}.bind(this),cb=function(){L(qa);this.fly_to(Y,ua,300)}.bind(this),ua=function(){c.set_locked(!1);P();c.update_display();X()}.bind(this);this.fly_to(sa,F,300)}else this.fly_to(b,X,300);else c.add_to_contents(a,this,!0)};e.get_json=function(a){return{type:"bird",nest:k&&f.UTILITIES.get_json(k,a)}};e.copy=function(a){var b,c;if(a.just_value)b=this.create(void 0,this.get_description());else{if(a.nests_copied&&a.nests_copied[k]){b=
a.nests_copied[k][0];n.call(b);for(c=1;c<a.nests_copied[k].length;c++)m.call(a.nests_copied[k][c],b);b=this.create(b,this.get_description())}else b=this.create(k,this.get_description());a.birds_copied||(a.birds_copied={});a.birds_copied[k]||(a.birds_copied[k]=[]);a.birds_copied[k].push(b)}return this.add_to_copy(b,a)};e=e.add_standard_widget_functionality(e);e.set_description(b);f.debugging&&(e.debug_id=f.UTILITIES.generate_unique_id(),e.debug_string=k?"a bird with "+k.debug_string:"a bird without a nest");
return e};g.create_backside=function(){return f.bird_backside.create(this)};g.match=function(c){return c.match_with_any_bird?c.match_with_any_bird(this):this};g.match_with_any_bird=function(){return"matched"};g.update_display=function(){var c=this.get_frontside(!0),b=this.get_backside(),e;e=c.get_element();e.title=this.get_title();$(e).is(".toontalk-bird, .toontalk-side-animating")||($(e).addClass("toontalk-bird toontalk-bird-static"),e.addEventListener("dragover",function(a){$(e).is(".toontalk-bird-static")&&
($(e).removeClass("toontalk-bird-static"),f.UTILITIES.add_animation_class(e,"toontalk-bird-gimme"))}),e.addEventListener("dragleave",function(a){$(e).is(".toontalk-bird-gimme")&&$(e).addClass("toontalk-bird-static").removeClass("toontalk-bird-gimme")}));this.element_to_display_when_flying?e.appendChild(this.element_to_display_when_flying):$(e).children(".toontalk-side").remove();b&&b.rerender()};g.fly_to=function(c,b,e){var a=this.get_frontside_element(),d=$(a).offset(),d=Math.atan2(c.top-d.top,c.left-
d.left),h="toontalk-fly-west toontalk-fly-northwest toontalk-fly-north toontalk-fly-northeast toontalk-fly-east toontalk-fly-southeast toontalk-fly-south toontalk-fly-southwest".split(" ")[Math.round(4*(d/Math.PI+1))%8];$(a).position();f.UTILITIES.add_animation_class(a,h);this.animate_to_absolute_position(c,function(){$(a).removeClass(h);e?($(a).addClass("toontalk-bird-static"),setTimeout(b,e)):b()})};g.toString=function(){return"a bird"};g.get_type_name=function(){return"bird"};g.get_help_URL=function(){return"docs/manual/birds-nests.html"};
g.matching_resource=function(c){return c.get_type_name&&c.get_type_name()===this.get_type_name()};f.creators_from_json.bird=function(c,b){return f.bird.create(f.UTILITIES.create_from_json(c.nest,b),c.description)};g.drop_on=function(c,b,e,a){if(c.widget_dropped_on_me)return c.widget_dropped_on_me(this,!1,e,a)};return g}(window.TOONTALK);window.TOONTALK.bird_backside=function(c){return{create:function(f){f=c.backside.create(f);f.add_advanced_settings(!0);return f}}}(window.TOONTALK);window.TOONTALK.nest=
function(l){var r=Object.create(l.widget),k={},b={};r.create=function(b,a,d,h,s){var v=Object.create(r),w;a||(a=[]);d||(d=[]);m=function(a){s&&q.call(s,this);s=a;h=g.call(a);f.call(a,this)};g=function(){return h};n=function(){s&&q.call(s,this);s=void 0;h=l.UTILITIES.generate_unique_id()};f=function(a){this[k](a)};q=function(a){this[k](a,!0)};v.matched_by=function(b){return 0<a.length?l.UTILITIES.match(b,a[0].get_widget()):[[this,b]]};v.run_when_non_empty=function(a){d.push(a)};v.add_to_contents=function(b,
c,e){var f;1===a.push(b)?0<d.length&&(f=d,d=[],f.forEach(function(a){$(a.robot.get_frontside_element()).removeClass("toontalk-robot-waiting");a.robot.run(a.context,a.top_level_context,a.queue)})):b.get_widget().hide();b.is_backside()?b.get_widget().set_parent_of_backside(this):b.get_widget().set_parent_of_frontside(this);w&&!e&&(c?w.forEach(function(a){a.has_ancestor(b.get_widget())||a.animate_bird_delivery(l.UTILITIES.copy_side(b),c)}):w.forEach(function(a){a.has_ancestor(b.get_widget())||a.add_to_contents(l.UTILITIES.copy_side(b,
!1,!0))}));this.rerender()};v.animate_bird_delivery=function(a,b,d,c){var e,f,h;b.animate_delivery_to(a,this,void 0,void 0,void 0,d,c);w&&(e=$(b.closest_visible_ancestor().get_widget().get_frontside_element()).closest(":visible").position(),f=b.get_parent_of_frontside().get_element(),h=this.visible(),w.forEach(function(d){var g=l.UTILITIES.copy_side(a,!1,h),k,n;d.has_ancestor(a.get_widget())||(d.visible()||h?(k=b.copy({just_value:!0}),n=k.get_frontside_element(!0),$(f).append(n),k.animate_delivery_to(g,
d,d,e.left,e.top,void 0,c)):d.add_to_contents(g))}))};v.get_contents_frontside_element=function(){if(0<a.length)return a[0].get_widget().get_frontside_element()};v.get_locked=function(){return this.locked_for_animating_deliveries};v.set_locked=function(a){this.locked_for_animating_deliveries=a;!a&&this.to_run_when_unlocked&&0<this.to_run_when_unlocked.length&&this.to_run_when_unlocked.shift()()};v.run_when_unlocked=function(a){this.to_run_when_unlocked?this.to_run_when_unlocked.push(a):this.to_run_when_unlocked=
[a]};v.removed_from_container=function(b,d,c){b=a.shift();this.visible()&&(b?(b.get_widget().restore_dimensions(),b.is_backside()?b.get_widget().set_parent_of_backside(void 0):b.get_widget().set_parent_of_frontside(void 0)):l.UTILITIES.report_internal_error("Nothing removed from nest!"),0<a.length&&(a[0].set_visible(!0),$(a[0].get_element()).show()),this.render());return b};v.dereference_contents=function(b,d,c){var e,f,h,g;return 0===a.length?this:b.removing_widget?(b=a[0],c.remove_from_container(b,
this),this.visible()&&(h=this.get_frontside_element(),c=$(h).offset(),d=$(h).closest(".toontalk-backside-of-top-level"),(e=d.offset())||(e={left:0,top:0}),f=b.get_frontside_element(),g=$(h).width(),h=$(h).height(),$(f).css({left:.1*g+c.left-e.left,top:.1*h+c.top-e.top,width:.8*g,height:.8*h}),d.append(f)),b):b.next?a[0].get_widget().dereference(b.next,d,c):a[0].get_widget()};v.get_json=function(b){var c=d&&d.map(function(a){return{robot:l.UTILITIES.get_json(a.robot,b),context:a.context&&l.UTILITIES.get_json(a.context,
b),top_level_context:a.top_level_context&&l.UTILITIES.get_json(a.top_level_context,b)}});return{type:"nest",contents:l.UTILITIES.get_json_of_array(a,b),guid:h,original_nest:s&&l.UTILITIES.get_json(s,b),waiting_robots:c}};v.copy=function(b){var d,e,f;if(b.just_value)return 0<a.length?a[0].get_widget().copy(b):l.nest.create(this.get_description(),[],[],"in a robot's condition");d=l.UTILITIES.copy_widget_sides(a,b);b.fresh_copy?e=l.nest.create(this.get_description(),d,[],h&&l.UTILITIES.generate_unique_id()):
(f=s||this,b.birds_copied&&b.birds_copied[this]?(b.nests_copied&&b.nests_copied[f]?(e=b.nests_copied[r][0].copy({}),b.nests_copied[f].forEach(function(a){m.call(a,e)})):e=l.nest.create(this.get_description(),d,[],l.UTILITIES.generate_unique_id()),b.birds_copied[this].forEach(function(a){c.call(a,e)})):e=l.nest.create(this.get_description(),d,[],h,f),b.nests_copied||(b.nests_copied={}),b.nests_copied[f]?b.nests_copied[f].push(e):b.nests_copied[f]=[e]);return this.add_to_copy(e,b)};v.has_contents=function(){return 0<
a.length};v.dropped_on_other=function(a,b,d,c){var e,f,g,k,n,q,m;h||(h=l.UTILITIES.generate_unique_id(),l.debugging&&(v.debug_string="A nest with "+h),e=l.bird.create(this),c&&(c.add_newly_created_widget(e),this.robot_waiting_before_next_step=c),this.rerender(),f=this.get_frontside_element(!0),l.UTILITIES.add_animation_class(f,"toontalk-hatch-egg"),n=function(){var h,n,s;if(b)h=a.get_backside();else if((s=l.UTILITIES.widget_from_jquery($(f).closest(".toontalk-top-level-backside")))||(s=l.UTILITIES.widget_from_jquery($(a.get_widget().get_frontside_element(!0)).closest(".toontalk-top-level-backside"))),
s)h=s.get_backside();else{l.UTILITIES.report_internal_error("Unable to find the top-level backside for bird to go to.");return}n=h.get_element();s=$(n).offset();g=e.get_frontside_element(!0);$(g).removeClass("toontalk-bird-static");l.UTILITIES.add_animation_class(g,"toontalk-fly-southwest");k=l.UTILITIES.relative_position(f,n);$(g).css({left:k.left,top:k.top});l.robot.in_training&&d?(l.robot.in_training.add_newly_created_widget(e),h.widget_dropped_on_me(e,!1,d,void 0,!0)):h.widget_dropped_on_me(e,
!1,d);$(f).removeClass("toontalk-hatch-egg").addClass("toontalk-empty-nest").css({width:"",height:""});"top-level"===this.get_parent_of_frontside().get_widget().get_type_name()&&$(f).css({left:k.left-5,top:k.top+45});m=function(){$(g).removeClass("toontalk-fly-southwest");l.UTILITIES.set_timeout(function(){l.UTILITIES.add_animation_class(g,"toontalk-fly-down");q=function(){$(g).removeClass("toontalk-fly-down");l.UTILITIES.add_animation_class(g,"toontalk-bird-morph-to-static");l.UTILITIES.add_one_shot_event_handler(g,
"animationend",1E3,function(){$(g).removeClass("toontalk-bird-morph-to-static toontalk-side-animating").addClass("toontalk-bird-static")});c&&c.run_next_step();e.update_display()};l.UTILITIES.add_one_shot_event_handler(f,"animationend",1E3,q)}.bind(this))}.bind(this);$(g).removeClass("toontalk-bird-static");h=Math.max(10,k.left-70);n=Math.max(10,k.top+70);e.animate_to_absolute_position({left:h+s.left,top:n+s.top},m);this.rerender()}.bind(this),l.UTILITIES.add_one_shot_event_handler(f,"animationend",
2E3,n));return!0};v.widget_dropped_on_me=function(b,d,c,e){c&&b.save_dimensions&&b.save_dimensions();0===a.length?(this.add_to_contents(d?b.get_backside():b),b.dropped_on_other?b.dropped_on_other(this,d,c,e):l.robot.in_training&&c&&l.robot.in_training.dropped_on(b,this)):b.drop_on(a[0].get_widget(),d,c,e);return!0};v.drop_on=function(a,b,d,c){return a.widget_dropped_on_me?(a.widget_dropped_on_me(this,!1,d,c),!0):!1};v.element_to_highlight=function(){return 0===a.length?this.get_frontside_element():
a[0].get_frontside_element()};v.update_display=function(){var b=this.get_frontside(!0),d=this.get_backside(),c,e,f,g,k,b=b.get_element();0<a.length?(c=a[0].get_widget(),a[0].is_backside()?(g=c.get_backside(!0),k=g.get_element(),g.update_display(),g.scale_to_fit(k,b)):(c.render(),k=a[0].get_element()),e=$(b).width(),f=$(b).height(),0<e&&0<f&&l.UTILITIES.set_timeout(function(){for(var a=2*k.toontalk_border_size||0,b=.8*e,d=.8*f;2*a>=b||2*a>=d;)a/=2;b-=a;d-=a;$(k).css({width:b,height:d,left:.1*e,top:.1*
f});c.set_size_attributes&&c.set_size_attributes(b,d)},2),b.appendChild(k),$(b).addClass("toontalk-empty-nest"),a[0].is_backside()?c.set_parent_of_backside(this):c.set_parent_of_frontside(this)):(b.title=this.get_title(),h?($(b).removeClass("toontalk-nest-with-egg"),$(b).addClass("toontalk-empty-nest")):l.UTILITIES.add_animation_class(b,"toontalk-nest-with-egg"));$(b).addClass("toontalk-nest");d&&d.rerender()};v[k]=function(a,b){if(!w){if(b)return;w=[]}b?w.splice(w.indexOf(a),1):w.push(a)};v.get_path_to=
function(b,d){if(0<a.length){if(a[0].get_widget().get_path_to)return a[0].get_widget().get_path_to(b,d);if(a[0].get_widget()===b)return l.path.to_entire_context()}};v.walk_children=function(b){if(0<a.length)return b(a[0])};v.top_contents_is=function(b){return 0<a.length&&a[0].get_widget()===b};v.any_nest_copies_visible=function(){var a=!1;if(!w)return!1;w.some(function(b){b.visible()&&(a=!0)});return a};v.compare_with=function(b){if(0<a.length)return a[0].compare_with(b);if(b.compare_with_nest)return-1*
b.compare_with_nest(this)};v.compare_with_nest=function(b){return 0===a.length?0:1};v.compare_with_number=function(b){return 0<a.length?a[0].compare_with(b):-1};v.compare_with_box=v.compare_with_number;v.compare_with_scale=v.compare_with_number;v=v.add_standard_widget_functionality(v);v.set_description(b);l.debugging&&(v.debug_id=l.UTILITIES.generate_unique_id(),v.debug_string=h?"A nest with "+h:"A nest with an egg");if(s&&h)s[k](v);return v};r.create_backside=function(){return l.nest_backside.create(this)};
r.match=function(b){return b.match_nest_with_nest?b.match_nest_with_nest(this):b};r.match_nest_with_nest=function(b){return"matched"};r.toString=function(){return"a nest"};r.get_help_URL=function(){return"docs/manual/birds-nests.html"};r.get_type_name=function(){return"nest"};r.matching_resource=function(b){return b.get_type_name&&b.get_type_name()===this.get_type_name()};l.creators_from_json.nest=function(c,a){var d=!c.original_nest&&c.guid&&b[c.guid];d||(d=l.nest.create(c.description,l.UTILITIES.create_array_from_json(c.contents,
a),void 0,c.guid,c.original_nest&&l.UTILITIES.create_from_json(c.original_nest,a)),b[c.guid]=d);return d};return r}(window.TOONTALK);window.TOONTALK.nest_backside=function(c){return{create:function(f){f=c.backside.create(f);f.add_advanced_settings(!0);return f}}}(window.TOONTALK)})();window.TOONTALK.scale=function(c){var m=Object.create(c.widget);m.create=function(g,f,q,n){var l=function(){q.rerender()},m=function(a,b){var c=$(q.get_frontside_element()),e=c.offset(),c=c.width(),e=a.clientX-(e.left+c/2),c=b?c/10:0;return-e>c?0:e>c?1:-1},k,b,e;q||(q=c.box.create(2,void 0,g,f));k=q.get_json;b=q.copy;e=q.get_path_to;q.copy=function(a){var d=b.call(this,a),d=c.scale.create(void 0,void 0,d,a&&this.get_state());return q.add_to_copy(d,a)};q.get_json=function(a){a=k.call(this,a);a.type=
"scale";a.inactive_state=this.get_inactive_state();return a};q.get_path_to=function(a,b){var c=e.call(this,a,b);c&&(c.true_type="scale");return c};q.element_to_highlight=function(a){a=m(a,!0);var b;if(0>a)return this.get_frontside_element();a=this.get_hole(a);return(b=a.get_contents())?b.get_frontside_element():a.get_frontside_element()};q.drop_on=function(a,b,c,e){if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,b,c,e)};q.widget_dropped_on_me=function(a,b,c,e){var f=this.get_hole_contents(0),
g=this.get_hole_contents(1),k;if(f&&!g)return this.set_hole(1,a),!0;if(!f&&g)return this.set_hole(0,a),!0;k=m(c,!1);if(0===k){if(f){if(f.drop_on)return a.drop_on(f,b,c,e);return}}else if(g){if(g.drop_on)return a.drop_on(g,b,c,e);return}this.set_hole(k,a,c);return!0};q.get_inactive_state=function(){return n};q.update_display=function(){var a=this.get_frontside_element(),b=$(a),e=$(a).children(".toontalk-scale-half"),f=$(a).parent(),f=f.is(".toontalk-backside")?a:f.get(0),g=$(f).width(),k=$(f).height(),
l=function(a,b,d){var c=b.get_frontside_element(!0),e=d*g*.5,f=.5*g,h=k;b=b.get_contents();$(a).css({left:e,top:0,width:f,height:h});a!==c&&(e=0===d?-.05*g:.15*g,d="toontalk-scale-balanced"===n?.1*k:0===d&&"toontalk-scale-left_heavier"===n||1===d&&"toontalk-scale-right_heavier"===n?.25*k:1===d&&"toontalk-scale-left_heavier"===n||0===d&&"toontalk-scale-right_heavier"===n?-.1*k:.2*k,f=.4*g,h=.4*k,$(c).css({left:e,top:d,width:f,height:h}),b&&(b.set_location_attributes&&b.set_location_attributes(e,d),
b.set_size_attributes&&b.set_size_attributes(f,h)),a.appendChild(c))},n,f=c.UTILITIES.scale_to_fit(a,f,123,91);0===g&&(g=1);0===k&&(k=1);g/=f.x_scale;k/=f.y_scale;b.is(".toontalk-top-level-resource")?n="toontalk-scale-balanced":(f=this.get_state(),n="undefined"===typeof f?"toontalk-scale-unbalanced":["toontalk-scale-right_heavier","toontalk-scale-balanced","toontalk-scale-left_heavier"][f+1]);b.removeClass("toontalk-scale-balanced toontalk-scale-left_heavier toontalk-scale-right_heavier toontalk-scale-unbalanced");
b.addClass(n);b.addClass("toontalk-scale");2===e.length?e.each(function(a,b){c.UTILITIES.set_timeout(function(){l(b,this.get_hole(a),a)}.bind(this))}.bind(this)):this.get_holes().forEach(function(b,d){var c=b.get_element();0===d?$(c).addClass("toontalk-left_scale  toontalk-scale-half"):$(c).addClass("toontalk-right_scale toontalk-scale-half");l(c,b,d);a.appendChild(c)});a.title=this.get_title();c.debugging&&(this.debug_string=this.toString())};q.get_type_name=function(){return"scale"};q.get_help_URL=
function(){return"docs/manual/scales.html"};q.toString=function(){var a=this.get_hole(0),b=this.get_hole(1),e;switch(this.get_state()){case -1:e="scale leaning to the right";break;case 1:e="scale leaning to the left";break;case 0:e="balanced scale";break;default:e="unbalanced scale"}a=a?"contains "+c.UTILITIES.add_a_or_an(a.get_full_description()):"is empty";b=b?"contains "+c.UTILITIES.add_a_or_an(b.get_full_description()):"is empty";return e+" and the left pan "+a+" and the right pan "+b};q.create_backside=
function(){return c.scale_backside.create(this)};q.get_state=function(){var a=this.get_inactive_state(),b;if(a)return a;a=this.get_hole_contents(0);b=this.get_hole_contents(1);if(a||b)if(a){if(!b)return 1;if(a.compare_with)return a.compare_with(b)}else return-1};q.match=function(a){return a.match_with_scale?a.match_with_scale(this):this};q.match_with_scale=function(a){return this.get_state()===a.get_state()?"matched":a};q.compare_with=function(a){if(a.compare_with_scale)return-1*a.compare_with_scale(this)};
q.compare_with_scale=function(a){var b=this.get_state();a=a.get_state();return b&&!a?1:!b&&a?-1:b>a?1:b<a?-1:0};q.get_hole(0).add_listener("value_changed",l);q.get_hole(1).add_listener("value_changed",l);q.get_hole_contents(0)&&q.get_hole_contents(0).add_listener("value_changed",l);q.get_hole_contents(1)&&q.get_hole_contents(1).add_listener("value_changed",l);return q};c.creators_from_json.scale=function(g,f){return m.create(c.UTILITIES.create_array_from_json(g.contents,f),g.description,void 0,g.inactive_state)};
return m}(window.TOONTALK);window.TOONTALK.scale_backside=function(c){return{create:function(m){m=c.backside.create(m);m.add_advanced_settings(!0);return m}}}(window.TOONTALK);window.TOONTALK.robot=function(c){var m=Object.create(c.widget);m.create=function(g,f,q,n,l,r,k){var b=Object.create(m),e,a=!1;q||(q=c.actions.create());e||(e=b);b.get_frontside_conditions=function(){return g};b.set_frontside_conditions=function(a){g=a};b.get_backside_conditions=function(){return f};b.set_backside_conditions=function(a){(f=a)&&c.UTILITIES.available_types.forEach(function(a){f[a]&&c.widget.erasable(f[a])})};b.add_to_backside_conditions=function(a){var b=a.copy({just_value:!0});f||
(f={});f[a.get_type_name()]=b;c.widget.erasable(b)};b.get_body=function(){return q};b.get_animating=function(){return a};b.set_animating=function(b,e){var f=this.get_frontside_element();(a=b)?(e||(e=$(f).offset()),$(f).addClass("toontalk-robot-animating toontalk-side-animating"),$(f).css({width:"",height:"","z-index":c.UTILITIES.next_z_index()}),c.UTILITIES.set_position_relative_to_top_level_backside($(f),e),$(f).closest(".toontalk-top-level-backside").append(f)):$(f).removeClass("toontalk-robot-animating toontalk-side-animating")};
b.get_thing_in_hand=function(){return l};b.set_thing_in_hand=function(a){c.debugging&&a&&"empty hole"===a.get_type_name()?c.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):l=a};b.get_next_robot=function(){return k};b.set_next_robot=function(a){var b=this.get_backside_element();a&&a.set_first_in_team(this.get_first_in_team());!a&&k&&k.set_first_in_team(k);k=a;b&&(a=a?"When the robot can't run then this one will try: ":window.TOONTALK.robot.empty_drop_area_instructions,$(b).find(".toontalk-drop-area-instructions").get(0).innerHTML=
a)};b.get_first_in_team=function(){return e};b.set_first_in_team=function(a){e=a;k&&k.set_first_in_team(a)};b.walk_children=function(a){(!k||a(k))&&this.get_frontside_conditions()&&a(this.get_frontside_conditions())};b.get_run_once=function(){return r};b.set_run_once=function(a){r=a};k&&b.set_next_robot(k);b=b.add_standard_widget_functionality(b);b.set_description(n);c.debugging&&(this.debug_id=c.UTILITIES.generate_unique_id());return b};m.create_backside=function(){return c.robot_backside.create(this)};
m.copy=function(g){var f=this.get_frontside_conditions(),q=this.get_backside_conditions(),f=f?f.copy({just_value:!0}):void 0,n=this.get_next_robot(),n=n?n.copy(g):void 0,l;q&&(l={},c.UTILITIES.available_types.forEach(function(c){l[c]&&(l[c]=l[c].copy({just_value:!0}))}));q=this.create(f,l,this.get_body().copy(),this.get_description(),this.get_thing_in_hand(),this.get_run_once(),n);return this.add_to_copy(q,g)};m.match=function(){console.log("Robot-to-robot matching could be more sophisticated.");
return"matched"};m.run=function(g,f,q){var n=this.get_frontside_conditions(),l=function(b){b.visible()&&$(b.get_frontside_element()).removeClass("toontalk-conditions-not-matched toontalk-conditions-waiting").find(".toontalk-conditions-not-matched, .toontalk-conditions-waiting").removeClass("toontalk-conditions-not-matched toontalk-conditions-waiting")},m,k;if(this.being_trained||!n||this.get_animating())return this;l(n);this.rerender();this.match_status=c.UTILITIES.match(n,g);"matched"===this.match_status&&
(m=this.get_backside_conditions())&&(n=g.get_backside_widgets())&&n.some(function(b){var e=!b.is_backside()&&m[b.get_widget().get_type_name()];if(e&&(l(e),b=c.UTILITIES.match(e,b.get_widget()),"matched"!==b))return this.match_status=b,!0}.bind(this));if("matched"===this.match_status)return q||(q=c.QUEUE),this.get_body().reset_newly_created_widgets(),q.enqueue({robot:this,context:g,top_level_context:f,queue:q}),this.match_status;if(this.match_status.is_widget)return $(this.match_status.get_frontside_element()).addClass("toontalk-conditions-not-matched"),
this.rerender(),this.get_next_robot()?this.get_next_robot().run(g,f,q):this.match_status;this.match_status.forEach(function(b){$(b[1].get_frontside_element()).addClass("toontalk-conditions-waiting")});if(this.get_next_robot()){n=this.get_next_robot().run(g,f,q);if("matched"===n)return n;n.is_widget||n.forEach(function(b){0>this.match_status.indexOf(b)&&this.match_status.push(b)})}this.get_first_in_team()===this&&(k={robot:this,context:g,top_level_context:f,queue:q},this.match_status.forEach(function(b){b[0].run_when_non_empty(k)}),
c.UTILITIES.add_animation_class(this.get_frontside_element(),"toontalk-robot-waiting"));return this.match_status};m.set_stopped=function(c){(this.stopped=c)&&this.visible()&&$(this.get_frontside_element()).removeClass("toontalk-robot-waiting");this.get_next_robot()&&this.get_next_robot().set_stopped(c)};m.run_actions=function(c,f,q){return this.stopped?!1:this.visible()?this.get_body().run_watched(c,f,q,this):this.get_body().run_unwatched(c,f,q,this)};m.picked_up=function(g,f,q){var n;this!==g&&(g.get_infinite_stack&&
g.get_infinite_stack()?this.current_action_name="pick up a copy of":this.current_action_name="pick up",q?(n=g,f=g.copy({}),f=c.path.get_path_to_resource(f)):f=c.path.get_path_to(g,this),f&&this.add_step(c.robot_action.create(f,this.current_action_name),n),g.last_action=this.current_action_name,this.current_action_name=void 0,this.set_thing_in_hand(g))};m.dropped_on=function(g,f){var q;this!==g&&(this.current_action_name="drop it on",(q=c.path.get_path_to(f,this))&&this.add_step(c.robot_action.create(q,
this.current_action_name)),g.last_action=this.current_action_name+" "+f.get_type_name(),this.current_action_name=void 0,this.set_thing_in_hand(void 0))};m.copied=function(g,f,q){this.current_action_name=q?"pick up a copy of":"copy";(g=c.path.get_path_to(g,this))&&this.add_step(c.robot_action.create(g,this.current_action_name),f);f.last_action=this.current_action_name;this.current_action_name=void 0};m.removed=function(g){var f;this.current_action_name="remove";(f=c.path.get_path_to(g,this))&&this.add_step(c.robot_action.create(f,
this.current_action_name));g.last_action=this.current_action_name;this.current_action_name=void 0};m.edited=function(g,f){var q;this.current_action_name="edit";(q=c.path.get_path_to(g,this))&&this.add_step(c.robot_action.create(q,this.current_action_name,f));this.current_action_name=void 0};m.erased_widget=function(g,f){var q;this.current_action_name="erased_widget";(q=c.path.get_path_to(g,this))&&this.add_step(c.robot_action.create(q,this.current_action_name,{erased:f,toString:f?"erase":"un-erase"}));
this.current_action_name=void 0};m.remove_from_container=function(g,f){var q=f.get_index_of&&f.get_index_of(g),n=function(){g.get_parent_of_frontside()&&f.removed_from_container(g,!1,!0,q)};this.get_animating()?c.UTILITIES.add_one_shot_event_handler(this.get_frontside_element(),"transitionend",2500,n):n();this.add_newly_created_widget(g)};m.add_step=function(c,f){this.get_body().add_step(c,f);this.get_frontside_element().title=this.get_title()};m.get_context=function(){var g=this.get_frontside_element(),
f=$(g).parent(),g=c.UTILITIES.widget_from_jquery(f);return!g&&(f=c.UTILITIES.widget_from_jquery(f.closest(".toontalk-backside-of-robot")))?f.get_context():g};m.training_started=function(){var g=this.get_context();g?(this.being_trained=!0,this.set_frontside_conditions(g.copy({just_value:!0})),$("*").css({cursor:"url("+c.UTILITIES.absolute_file_path("images/RB19.32x32.PNG")+"), default"}),this.get_frontside_element().title=this.get_title(),g=this.get_backside_element(),$(g).find(".toontalk-conditions-panel").remove()):
c.UTILITIES.report_internal_error("Robot started training but can't find its 'context'.")};m.training_finished=function(){var g=this.get_body().get_newly_created_widgets(),f,q;$("*").css({cursor:""});for(f=0;f<g.length;f++)q=g[f],"drop it on top-level"!==q.last_action&&"copy"!==q.last_action||this.add_step(c.robot_action.create(c.newly_created_widgets_path.create(f),"add to the top-level backside"));this.rerender();this.being_trained=!1;this.get_frontside_element().title=this.get_title();this.backup_all()};
m.update_display=function(){var g=this.get_frontside(!0),f=this.get_backside(),q=this.get_thing_in_hand(),n,l;c.debugging&&(this.debug_string=this.toString());n=g.get_element();q&&(l=q.get_frontside_element());!l&&this.carrying_tool&&(l=document.createElement("div"),$(l).addClass(this.carrying_tool));n.title=this.get_title();$(n).addClass("toontalk-robot");$(n).children(".toontalk-side, .toontalk-held-by-robot").remove();l&&n.appendChild(l);this.match_status&&(this.match_status.is_widget?$(n).addClass("toontalk-side-animating toontalk-robot-not-matched"):
$(n).removeClass("toontalk-robot-not-matched"));c.UTILITIES.set_timeout(function(){var c,f,b,e,a;l&&(a={position:"absolute"},$(l).addClass("toontalk-held-by-robot"),c=$(l).width(),f=$(l).height(),b=$(n).width(),e=$(n).height(),0===c&&(c=2*b,f=e/2,a.width=c,a.height=f),a.left=(b-c)/2,a.top=(e-f)/2,$(l).css(a),q&&q.render())});f&&f.rerender()};m.add_newly_created_widget=function(c){return this.get_body().add_newly_created_widget(c)};m.add_newly_created_widget_if_new=function(c){if(c!==this.get_context())return this.get_body().add_newly_created_widget_if_new(c)};
m.get_recently_created_widget=function(){var c=this.get_body().get_newly_created_widgets();return c[c.length-1]};m.get_title=function(){var c=this.get_description();if(c)return c="This robot "+c,0>c.lastIndexOf(".")&&(c+="."),c+"\n"+this.toString();c=this.get_frontside_element();return $(c).is(".toontalk-top-level-resource")?"Drag this robot to a work area.":this.toString()};m.toString=function(){var g=this.get_frontside_conditions(),f=this.get_body(),q="",n="",l=this.get_next_robot();if(!g)return"has yet to be trained.";
g=g.get_full_description();this.being_trained&&(q="is being trained.\n",n="\n...");g=c.UTILITIES.add_a_or_an(g);f=q+"When working on something that matches "+g+" he will \n"+f.toString()+n;this.match_status&&(this.match_status.is_widget?f="He isn't running because the "+this.match_status+" in his conditions (highlighted in red) doesn't match the corresponding widget. Perhaps editing his conditions will help.\n"+f:"matched"!==this.match_status&&(f="He is waiting for something to be delivered to the nest that matches the "+
this.match_status[0][1]+"in his conditions (highlighted in yellow).\n"+f));l&&(f+="\nIf it doesn't match then the next robot will try to run.\n"+l.toString());return f};m.get_type_name=function(){return"robot"};m.get_help_URL=function(){return"docs/manual/robots.html"};m.get_json=function(g){var f=this.get_frontside_conditions(),q=this.get_backside_conditions(),n,l,m;f&&(n=f.is_of_type("top-level")?{type:"top_level"}:c.UTILITIES.get_json(f,g));q&&c.UTILITIES.available_types.forEach(function(f){q[f]&&
(l||(l={}),l[f]=c.UTILITIES.get_json(q[f],g))});this.get_next_robot()&&(m=c.UTILITIES.get_json(this.get_next_robot(),g));return{type:"robot",frontside_conditions:n,backside_conditions:l,body:this.get_body().get_json(g),run_once:this.get_run_once(),next_robot:m}};c.creators_from_json.robot=function(g,f){var q,n,l;g.thing_in_hand&&(n=c.UTILITIES.create_from_json(g.thing_in_hand,f));g.next_robot&&(q=c.UTILITIES.create_from_json(g.next_robot,f));g.backside_conditions&&(l={},c.UTILITIES.available_types.forEach(function(n){l[n]=
c.UTILITIES.create_from_json(g.backside_conditions[n],f)}));return c.robot.create(c.UTILITIES.create_from_json(g.frontside_conditions||g.bubble,f),l,c.UTILITIES.create_from_json(g.body,f),g.description,n,g.run_once,q)};return m}(window.TOONTALK);
window.TOONTALK.robot_backside=function(c){var m=function(f,g,n,l){f=c.UTILITIES.create_text_element(f);var m=g.get_frontside_element(!0),k=document.createElement("div");$(m).addClass("toontalk-conditions-contents "+l);c.UTILITIES.set_timeout(function(){$(m).parent().addClass("toontalk-conditions-contents-container");$(m).css({left:"inherit",width:"inherit",height:"inherit"});g.render()});n.match_status&&(n.match_status.is_widget?$(n.match_status.get_frontside_element()).addClass("toontalk-conditions-not-matched"):
"matched"!==n.match_status&&n.match_status.forEach(function(b){$(b[1].get_frontside_element()).addClass("toontalk-conditions-waiting")}));k.appendChild(m);n=c.UTILITIES.create_horizontal_table(f,k);$(n).addClass("toontalk-conditions-panel");return n},g=function(f,g){var n=g.get_frontside_conditions(),l=g.get_backside_conditions(),r,k;n&&0===$(f).find(".toontalk-frontside-conditions-area").length&&(f.insertBefore(m("Runs only if the widget matches: ",n,g,"toontalk-frontside-conditions-area"),f.firstChild),
n.set_visible(!0),n.render());l&&Object.keys(l).forEach(function(b){if(r=l[b])k="toontalk-backside-"+b+"-conditions-area",0===$(f).find("."+k).length&&(b="bird"===b?c.UTILITIES.create_text_element("And there is a bird on the back."):m("Runs only if the "+b+" on the backside matches: ",r,g,k),f.insertBefore(b,f.firstChild.nextSibling),r.set_visible(!0),r.render())})};return{create:function(f){var q=c.backside.create(f),n=q.get_element(),l=c.UTILITIES.create_check_box(!f.get_run_once(),"toontalk-run-once-check-box",
"When finished start again","Check this if you want the robot to start over again after finishing what he was trained to do."),m=c.UTILITIES.create_drop_area(window.TOONTALK.robot.empty_drop_area_instructions),k=f.get_next_robot(),b=c.backside.create_advanced_settings_button(q,f),e=q.update_display;m.data("drop_area_owner",f);$(l.button).click(function(a){var b=l.button.checked;f.set_run_once(!b);c.robot.in_training&&c.robot.in_training.edited(f,{setter_name:"set_run_once",argument_1:!b,toString:"change to "+
(b?"run again":"run once")+" of the robot",button_selector:".toontalk-run-once-check-box"});a.stopPropagation()});k&&m.append(k.get_frontside_element(!0));m.get(0).addEventListener("drop",function(a){a=c.UTILITIES.get_dragee();(a=c.UTILITIES.widget_from_jquery(a))&&a.is_of_type("robot")&&(a=a.open_backside(),$(a.get_element()).find(".toontalk-train-backside-button").click())});q.update_display=function(){var a=f.get_frontside_element();a&&(a.title=f.get_title());e()};n.appendChild(this.create_train_button(q,
f));n.appendChild(b);$(l.container).addClass("toontalk-advanced-setting");m.addClass("toontalk-advanced-setting");n.appendChild(l.container);n.appendChild(m.get(0));g(n,f);q.add_advanced_settings();return q},create_train_button:function(f,q){var n=f.get_element();$(n);var l=$("<button>Train</button>").button();l.addClass("toontalk-train-backside-button");var m=!1,k=function(){m?(l.button("option","label","Stop training"),l.attr("title","Click to stop training this robot.")):q.get_body().is_empty()?
(l.button("option","label","Train"),l.attr("title","Click to start training this robot.")):(l.button("option","label","Re-train"),l.attr("title","Click to start training this robot all over again."));$(n).is(":visible")&&g(n,q)};k();l.click(function(b){m=!m;k();m?(q.get_body().reset_steps(),c.robot.in_training=q,q.training_started()):(q.training_finished(),c.robot.in_training=null);b.stopPropagation()});return l.get(0)}}}(window.TOONTALK);window.TOONTALK.robot.empty_drop_area_instructions="Drop a robot here who will try to run when this robot can't run.";(function(){var c=function(c){return"rotate"===c||"skewX"===c||"skewY"===c||"transform-origin-x"===c||"transform-origin-y"===c};window.TOONTALK.element=function(m){var g=["left","top","width","height"],f=Object.create(m.widget),q=function(c,f){var g,k;"number"===typeof c&&(k=c);0===c.length&&(k=0);if("undefined"===typeof k&&(g=c.substring(c.length-1),0<="0123456789x".indexOf(g)&&(k=parseFloat(c),isNaN(k))))return;g=k;0<=["rotate","skewX","skewY"].indexOf(f)&&(g%=360,0>g&&(g+=360));return g};f.create=
function(g,l,q,k){var b=Object.create(f),e=b.drag_started,a={},d={},h,s,v,w;l||(l=[]);b.get_HTML=function(){return g};b.get_text=function(){return this.get_frontside_element().innerText};b.set_HTML=function(a){var b=this.get_frontside_element();if(!b||g===a)return!1;g=a;$(b).children(":not(.ui-resizable-handle)").remove();this.rerender();return!0};b.set_text=function(a){var b=this.get_frontside_element(),d=function(b){$(b).contents().each(function(){this.nodeType==Node.TEXT_NODE?(this.textContent=
a,a=""):d(this,a)})};if(!b||a===b.textContent)return!1;d(b);return this.set_HTML(b.innerHTML)};b.get_style_attributes=function(){return l};b.set_style_attributes=function(a){l=a};b.get_attribute_widgets=function(){return a};b.get_original_copies=function(){return d};b.get_pending_css=function(){return h};b.get_transform_css=function(){return s};b.add_to_css=function(a,b){c(a)?(s||(s={}),s[a]=b):(h||(h={}),h[a]=b)};b.apply_css=function(){var a,b;if(h||s)if(a=this.get_frontside_element())if($(a).is(":visible")){if(s){s.rotate&&
(b="rotate("+s.rotate+"deg)");s.skewX&&(b||(b=""),b+="skewX("+s.skewX+"deg)");s.skewY&&(b||(b=""),b+="skewY("+s.skewY+"deg)");if(s["transform-origin-x"]||s["transform-origin-y"])h||(h={}),h["transform-origin"]=(s["transform-origin-x"]||0)+" "+(s["transform-origin-y"]||0);b&&(h||(h={}),h["-webkit-transform"]=b,h["-moz-transform"]=b,h["-ms-transform"]=b,h["o-transform"]=b,h.transform=b)}m.UTILITIES.set_timeout(function(){h&&(h.width&&"undefined"===typeof h.height?h.height=a.clientHeight:h.height&&"undefined"===
typeof h.width&&(h.width=a.clientWidth),$(a).css(h),w&&(h.width||h.height)&&w.css({width:h.width,height:h.height}),h=void 0)})}else m.UTILITIES.set_timeout(function(){this.apply_css()}.bind(this),100)};b.on_update_display=function(a){v?v.push(a):v=[a]};b.fire_on_update_display_handlers=function(){v&&m.UTILITIES.set_timeout(function(){v.forEach(function(a,b){a()||v.splice(b,1)})})};b.get_image_element=function(){return w};b.set_image_element=function(a,b){w=$(a).find("img");0===w.length?w=void 0:($(b).width(w.width()),
$(b).height(w.height()))};b.get_additional_classes=function(){return k};b.set_additional_classes=function(a){k=a};b=b.add_standard_widget_functionality(b);b.drag_started=function(a,b){this.drag_x_offset=a.view.drag_x_offset;this.drag_y_offset=a.view.drag_y_offset;e.call(this,a,b)};b.set_description(q);m.debugging&&(b.debug_string=b.toString(),b.debug_id=m.UTILITIES.generate_unique_id());return b};f.copy=function(c){var g=f.create(this.get_HTML(),this.get_style_attributes().slice(),this.get_description());
return this.add_to_copy(g,c)};f.match=function(c){return this.get_erased&&this.get_erased()?c.match_with_any_element?c.match_with_any_element():this:c.match_with_another_element_widget?c.match_with_another_element_widget(this):this};f.match_with_any_element=function(){return"matched"};f.match_with_another_element_widget=function(c){return this.get_HTML()===c.get_HTML()?"matched":c};f.compare_with=function(c){if(c.compare_with_other_element)return c.compare_with_other_element(this)};f.compare_with_other_element=
function(c){c=c.get_HTML().localeCompare(this.get_HTML());return 0>c?-1:0<c?1:c};f.create_backside=function(){return m.element_backside.create(this)};f.get_attribute_from_pending_css=function(c){var f=this.get_pending_css();if(f&&f[c]||(f=this.get_transform_css())&&f[c])return f[c]};f.get_attribute_from_current_css=function(c){var f=this.get_frontside_element(),g=f.style[c];""===g&&(g=$(f).css(c));return g?"number"===typeof g?g:g.replace("px",""):0};f.get_attribute=function(c){var f=this.get_attribute_from_pending_css(c);
return"undefined"!==typeof f?f:this.get_attribute_from_current_css(c)};f.set_attribute=function(c,f,g,k){var b,e;if(!this.get_frontside(!0).get_element())return!1;b=this.get_attribute_from_pending_css(c);if(b===f)return!1;"undefined"===typeof b&&(b=this.get_attribute_from_current_css(c));e=q(f,c);if("number"===typeof e){if(b==e)return!0;f=e}g&&m.robot.in_training&&m.robot.in_training.edited(this,{setter_name:"set_attribute",argument_1:c,argument_2:f,toString:"change the '"+c+"' style to "+f+" of",
button_selector:".toontalk-element-"+c+"-attribute-input"});this.add_to_css(c,f);k&&(f=this.get_style_attributes(),0>f.indexOf(c)&&f.push(c));this.rerender();return!0};f.dropped_on_style_attribute=function(c,f,g,k){var b,e,a;if(c){b=c.toString();if(c.is_of_type("number")){e=this.get_attribute(f);if("number"===typeof e)a=e;else if("auto"===e)switch(f){case "left":a=$(this.get_frontside_element()).offset().left;break;case "top":a=$(this.get_frontside_element()).offset().top;break;default:a=0}else a=
parseFloat(e);e=c.to_float();switch(b.substring(0,1)){case "-":b=a-e;break;case "*":b=a*e;break;case "/":b=a/e;break;case "^":b=Math.pow(a,e);break;default:b=a+e}this.set_attribute(f,b,!1);(g||k&&k.visible())&&this.get_backside().render()}c.get_infinite_stack()||c.remove();m.robot.in_training&&g&&m.robot.in_training.dropped_on(c,this.create_attribute_widget(f))}};f.get_attribute_widget=function(c){var f=this.get_attribute_widgets()[c];f||(f=this.create_attribute_widget(c),this.get_attribute_widgets()[c]=
f);return f};f.create_attribute_widget=function(c){var f=".toontalk-element-"+c+"-attribute-input",q=this.get_backside_element(),k=this.get_attribute(c),b=this,e=function(b){var d=a.get_attribute_owner(),e;b.currentTarget.toontalk_widget===d&&(e=$(d.get_frontside_element()).closest(".toontalk-top-level-backside").offset(),e||(console.log("Unable to find top-level backside of an element for its position. Perhaps is 'visible' but not attached."),e={left:0,top:0}),b="left"===c?b.pageX-e.left-d.drag_x_offset:
b.pageY-e.top-d.drag_y_offset,a.set_value_from_decimal(b),h.call(a))}.bind(this),a,d,h,s;q&&(f=$(q).find(f),0<f.length&&(f.get(0).toontalk_widget=this));a=m.number.create(0,1);a.element_widget=this;a.set_value_from_decimal(k);a.set_format("decimal");a.attribute=c;a.get_type_name=function(){return"element attribute"};s=a.toString;a.toString=function(){return s.call(this)+" ("+this.attribute+")"};d=a.equals;a.equals=function(a){return c===a.attribute?this.equals(a.element_widget):d.call(this,a)};(k=
this.get_original_copies()[c])?k.push(a):this.get_original_copies()[c]=[a];a.set_value=function(a){var d=b.get_original_copies()[c],e;this.get_attribute_owner().set_attribute(this.attribute,bigrat.toDecimal(a))&&d.forEach(function(b,c){e=b.set_value_from_sub_classes(a)});return e};h=a.update_display;a.update_display=function(){var b;this.get_erased()||(b=this.get_attribute_owner().get_attribute(this.attribute),a.set_value_from_decimal(b));h.call(this)};0<=g.indexOf(c)&&(this.on_update_display(function(){a.update_display();
return!0}),"left"===c||"top"===c)&&(k=this.get_frontside_element(),k.addEventListener("drag",e));a.copy=function(a){return a.just_value?m.number.copy.call(this,a):this.add_to_copy(b.create_attribute_widget(c),a)};a.get_json=function(a){return{type:"attribute_number",attribute_name:c,element:m.UTILITIES.get_json(b,a)}};a.get_original_attribute_widget=function(){return b.get_original_copies()[c][0]};a.get_attribute_owner=function(){var a=function(b){if(b=b.get_parent_of_frontside())return b.is_backside()?
b:a(b.get_widget())},c=this.get_original_attribute_widget();if(c!==this)return c.get_attribute_owner();var d,c=a(this);if(!c||!c.is_of_type("element"))return b;c=c.get_widget();for(d=c.get_parent_of_backside();d&&d.is_of_type("element");)c=d.get_widget(),d=c.get_parent_of_backside();return c};return a};m.creators_from_json.attribute_number=function(c,f){return m.UTILITIES.create_from_json(c.element,f).create_attribute_widget(c.attribute_name)};f.update_display=function(){var c=this.get_frontside_element();
this.get_backside();var f=function(b){return this.get_image_element()?"image":$(b).is(".toontalk-plain-text-element")?"text":"element"}.bind(this),g,k;this.being_dragged||(this.get_erased&&this.get_erased()?$(c).css({opacity:0}):(this.get_erased&&"0"===$(c).css("opacity")&&$(c).css({opacity:1}),c.children.length===$(c).children(".ui-resizable-handle").length&&(g=document.createElement("div"),g.innerHTML=this.get_HTML(),c.appendChild(g),this.set_image_element(g,c),$(c).addClass("toontalk-element-frontside"),
"<"!==g.innerHTML.substring(0,1)&&((k=this.get_additional_classes())&&$(g).addClass(k),$(c).addClass("ui-widget toontalk-plain-text-element"))),m.UTILITIES.on_a_nest_in_a_box(c)&&(this.set_attribute("width",$(c).closest(".toontalk-box-hole").width(),!1),this.set_attribute("height",$(c).closest(".toontalk-box-hole").height(),!1)),this.apply_css(),this.fire_on_update_display_handlers(),c.title="Click to see the backside where you can place robots or change the style of this "+f(c)))};f.toString=function(){var c=
"element whose HTML is '"+m.UTILITIES.maximum_string_length(this.get_HTML(),40)+"'";m.debugging&&(c+=" ("+this.debug_id+")");return c};f.get_type_name=function(){return"element"};f.get_help_URL=function(){return"docs/manual/elements.html"};f.get_json=function(c){var f=this.get_style_attributes(),g=[],k=m.UTILITIES.remove_z_index(this.get_HTML()),b=encodeURIComponent(k);0===k.indexOf("<img src='data:image/")?(c.shared_html||(c.shared_html=[]),k=c.shared_html.indexOf(b),0>k&&(k=c.shared_html.push(b)-
1),c={shared_html_index:k}):c=b;f.forEach(function(b){g.push(b)});return{type:"element",html:c,attributes:g,attribute_values:g.map(this.get_attribute.bind(this)),additional_classes:this.get_additional_classes()}};m.creators_from_json.element=function(c,g){var m=decodeURIComponent("string"===typeof c.html?c.html:g.shared_html[c.html.shared_html_index]),k=f.create(m,c.attributes,c.description),b;b=g&&g.event?["left","top"]:[];c.attribute_values.forEach(function(e,a){var d=c.attributes[a];0>b.indexOf(d)&&
k.add_to_css(d,q(e)||e)});c.additional_classes&&k.set_additional_classes(c.additional_classes);return k};f.create_attribute_path=function(c,f){var g=m.path.get_path_to(c.element_widget,f);return this.extend_attribute_path(g,c.attribute)};f.extend_attribute_path=function(c,f){return{dereference:function(g,k,b){return c.dereference(k||g,void 0,b).get_attribute_widget(f)},toString:function(){return"the '"+f+"' property of "+c},get_json:function(){return{type:"path_to_style_attribute",attribute:f,element_widget_path:c.get_json()}}}};
m.creators_from_json.path_to_style_attribute=function(c){var g=m.UTILITIES.create_from_json(c.element_widget_path);return f.extend_attribute_path(g,c.attribute)};f.get_size_attributes=function(){return{width:this.get_attribute("width"),height:this.get_attribute("height")}};f.set_size_attributes=function(c,f){this.set_attribute("width",c);this.set_attribute("height",f);m.UTILITIES.set_timeout(function(){this.rerender()}.bind(this))};f.set_location_attributes=function(c,f){this.set_attribute("left",
c);this.set_attribute("top",f)};return f}(window.TOONTALK);window.TOONTALK.element_backside=function(m){var g=function(n,l,q){var k=function(a){var b=l.get_style_attributes();0>b.indexOf(a)&&(b.push(a),"left"===a?(a=l.get_frontside_element(),$(a).on("drag",function(a){var b=l.get_backside_element(),c=l.get_frontside_element();b&&c&&$(b).find(".toontalk-element-left-attribute-input").val(a.originalEvent.clientX)})):"top"===a&&(a=l.get_frontside_element(),$(a).on("drag",function(a){var b=l.get_backside_element(),
c=l.get_frontside_element();b&&c&&$(b).find(".toontalk-element-top-attribute-input").val(a.originalEvent.clientY)})))},b=function(a,b){var e=0<=l.get_style_attributes().indexOf(a),s=m.UTILITIES.create_check_box(e,"toontalk-style-attribute-check-box",a+"&nbsp;","Click to add or remove the '"+a+"' style attribute from the backside of this element."),e=m.UTILITIES.create_anchor_element("i",("transform-origin-x"===a||"transform-origin-y"===a?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin#":
c(a)?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform#":"http://www.w3.org/community/webed/wiki/CSS/Properties/")+a),v=document.createElement("li");$(e).addClass("toontalk-help-button toontalk-attribute-help-button");$(e).css({color:"white"});s.container.appendChild(e);s.button.addEventListener("click",function(b){if(s.button.checked)k(a);else{b=l.get_style_attributes();var c=b.indexOf(a);0<=c&&(b.splice(c,1),g(n,l,q))}f(q,l,l.get_backside())});v.appendChild(s.container);b.appendChild(v)},
e=function(a,c){var f,g;"string"===typeof a?b(a,c):a.label?(f=document.createElement("h3"),f.textContent=a.label,g=document.createElement("ul"),c.appendChild(f),c.appendChild(g),e(a.sub_menus,g)):a.forEach(function(a){e(a,c)})};$(n).is(".ui-accordion")&&$(n).accordion("destroy");$(n).empty();e([{label:"Geometry attributes",sub_menus:"left top width height z-index background-position".split(" ")},{label:"Color attributes",sub_menus:["background-color","color","opacity"]},{label:"Font attributes",sub_menus:["font-size",
"font-weight"]},{label:"Visibility",sub_menus:["display","visibility"]},{label:"Transformations",sub_menus:["rotate","skewX","skewY","transform-origin-x","transform-origin-y"]}],n);$(n).accordion({active:0,heightStyle:"content"});return n},f=function(c,f,g){var k=f.get_style_attributes();f.get_frontside_element();$(c).empty();k.forEach(function(b){f.get_attribute(b);var e=document.createElement("tr"),a=document.createElement("td"),d=f.get_attribute_widget(b),h=d.get_frontside_element();d.set_parent_of_frontside(g,
!1,!0);d.set_infinite_stack(!0);c.appendChild(e);e.appendChild(a);a.appendChild(m.UTILITIES.create_text_element(b));a=document.createElement("td");e.appendChild(a);d.set_visible(!0);$(h).addClass("toontalk-element-attribute");a.appendChild(h);d.render()})},q=function(c){var f=$("<button>Add or remove style attributes</button>").button();f.addClass("toontalk-show-attributes-chooser-button");f.click(function(g){$(c).is(":visible")?($(c).hide(),f.button("option","label","Add or remove style attributes"),
f.attr("title","Click to add widgets for reading and writing style attributes of this element.")):($(c).show(),f.button("option","label","Hide style attributes list"),f.attr("title","Click to hide the list of attributes that can be added or removed."))});f.attr("title","Click to add widgets for reading and writing style attributes of this element.");return f.get(0)};return{create:function(c){var l=m.backside.create(c),r=l.get_element();c.get_HTML();var k=document.createElement("table"),b=document.createElement("div"),
e=q(b),a=m.backside.create_advanced_settings_button(l,c),d=m.UTILITIES.get_current_url_boolean_parameter("elementHTML",!1),h=d?"get_HTML":"get_text",s=l.update_display,v,w;c.update_display();v=c[h]().trim();0<v.length&&(w=m.UTILITIES.create_text_area(v,"toontalk-html-input","","Type here to edit the text."),v=function(a){a=w.button.value.trim();c.get_frontside_element();var b=d?"set_HTML":"set_text";c[b](a)&&m.robot.in_training&&m.robot.in_training.edited(c,{setter_name:b,argument_1:a,toString:"change the text to "+
a+" of",button_selector:".toontalk-html-input"})},$(w.container).resizable(),$(w.container).css({width:"100%"}),$(w.button).css({width:"100%"}),w.button.addEventListener("change",v),w.button.addEventListener("mouseout",v),r.appendChild(w.container));l.get_attributes_chooser=function(){return b};g(b,c,k);f(k,c,l);r.appendChild(b);r.appendChild(e);r.appendChild(k);r.appendChild(a);$(b).hide();$(b).addClass("toontalk-attributes-chooser");l.update_display=function(){w&&$(w.button).val(c[h]());f(k,c,l);
$(b).is(":visible")&&g(b,c,k);s()};$(r).find(".toontalk-hide-backside-button").click(function(a){$(b).hide()});l.add_advanced_settings();return l}}}(window.TOONTALK)})();window.TOONTALK.sensor=function(c){var m=Object.create(c.widget),g=function(c,g){"element"===c.get_type_name()&&(c.set_attribute("font-size",.5*$(g.get_frontside_element(!0)).height(),!1,!0),c.set_additional_classes("toontalk-string-value-from-sensor"),g.visible()&&c.rerender())};m.create=function(f,q,n,l,r,k){var b=c.nest.create(n,l,void 0,"sensor"),e=b.get_json,a=b.update_display,d=b.copy,h=function(a){var d=a[q],e=b.visible(),f=$(b.get_frontside_element()).closest(".toontalk-top-level-backside"),
h;if("keyCode"===q){if(16===d)return;d=String.fromCharCode(d);a.shiftKey||(d=d.toLowerCase())}switch(typeof d){case "number":h=c.number.create(Math.round(d),1);break;case "string":h=c.element.create(d,void 0,void 0,"toontalk-string-value-from-sensor");g(h,b);break;case "boolean":h=c.element.create(d.toString(),void 0,void 0,"toontalk-string-value-from-sensor");g(h,b);break;case "undefined":c.UTILITIES.report_internal_error("No "+q+" in sensor "+m);return}e?(a=c.bird.create(),b.add_to_top_level_backside(a),
a.animate_delivery_to(h,b,b,f.width()/2,f.height())):b.add_to_contents(h)}.bind(this);b.copy=function(a){var e;if(a.just_value&&this.has_contents())return d.call(this,a);e=c.sensor.create(f,q,n,void 0,r,a?void 0:k);return b.add_to_copy(e,a)};b.get_json=function(a){var b=e.call(this,a);b.type="sensor";b.event_name=f;b.attribute=q;b.active=r;b.sensor_of=k&&c.UTILITIES.get_json(k,a);return b};b.update_display=function(){var b=$(this.get_frontside_element());a.call(this);r||b.is(".toontalk-top-level-resource")?
(b.addClass("toontalk-sensor-nest"),b.removeClass("toontalk-sensor-inactive-nest")):(b.addClass("toontalk-sensor-inactive-nest"),b.removeClass("toontalk-sensor-nest"));b.removeClass("toontalk-empty-nest")};b.get_type_name=function(){return"sensor"};b.get_help_URL=function(){return"docs/manual/sensors.html"};b.toString=function(){return"a sensor of "+q+" for "+f+" sensors"};b.get_active=function(){return r};b.set_active=function(a,b){if(r!==a||b)a?k?k.get_frontside_element().addEventListener(f,h):
window.addEventListener(f,h):k?k.get_frontside_element().removeEventListener(f,h):window.removeEventListener(f,h),r=a};b.set_active(r,!0);b.create_backside=function(){return c.sensor_backside.create(this)};b.get_event_name=function(){return f};b.set_event_name=function(a){var b=r;f&&r&&this.set_active(!1);f=a;b&&this.set_active(!0)};b.get_attribute=function(){return q};b.set_attribute=function(a){q=a};b.match=function(a){return this};b.set_sensor_of=function(a){k=a};return b};c.creators_from_json.sensor=
function(f,q){var n=c.UTILITIES.create_array_from_json(f.contents,q),l=c.sensor.create(f.event_name,f.attribute,f.description,n,!1);f.sensor_of?c.UTILITIES.set_timeout(function(){l.set_sensor_of(c.UTILITIES.create_from_json(f.sensor_of,q));l.set_active(f.active)}):l.set_active(f.active);0<n.length&&setTimeout(function(){n.forEach(function(c){g(c.get_widget(),l)})},500);return l};return m}(window.TOONTALK);
window.TOONTALK.sensor_backside=function(c){return{create:function(m){var g=c.UTILITIES.create_text_input(m.get_event_name(),"toontalk-sensor-event-name-input","Event name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;","Type here the event name.","https://developer.mozilla.org/en-US/docs/Web/Events/"+m.get_event_name()),f=c.UTILITIES.create_text_input(m.get_attribute(),"toontalk-sensor-event-attribute-input","Event attribute","Type here the event attribute name.","https://developer.mozilla.org/en/docs/Web/API/Event"),
q=c.UTILITIES.create_check_box(m.get_active(),"toontalk-sensor-active-check-box","Listening to events","Check the box if you want to make this sensor active."),n=c.nest_backside.create(m),l=n.get_element(),r=$(l).find(".toontalk-settings-backside-button").get(0);g.button.addEventListener("change",function(){m.set_event_name(g.button.value.trim())});f.button.addEventListener("change",function(){m.set_attribute(f.button.value.trim())});$(q.button).click(function(f){var b=q.button.checked;m.set_active(b);
c.robot.in_training&&c.robot.in_training.edited(robot,{setter_name:"set_active",argument_1:b,toString:"change to "+(b?"active":"inactive")+" of the "+m,button_selector:".toontalk-sensor-active-check-box"});m.render();f.stopPropagation()});l.insertBefore(g.container,r);l.insertBefore(f.container,r);l.insertBefore(q.container,r);return n}}}(window.TOONTALK);window.TOONTALK.tool=function(c){return{add_listeners:function(m,g){var f,q,n,l,r,k=function(a){var b=e(a),f,g={};a.preventDefault();var k=0,l=0;20>a.clientX?k=-20:a.clientX+20>window.innerWidth&&(k=20);20>a.clientY?l=-20:a.clientY+20>window.innerHeight&&(l=20);window.scrollBy(k,l);g.clientX=a.pageX-k-q;g.clientY=a.pageY-l-n;m.style.left=g.clientX+"px";m.style.top=g.clientY+"px";if(b&&b.is_of_type("top-level"))r&&(c.UTILITIES.remove_highlight(),r=void 0);else{if(b&&(f=b.get_frontside_element(),f===
r))return;r=f;c.UTILITIES.highlight_element(r,g)}},b=function(a){var d=e(a),h;a.preventDefault();r&&c.UTILITIES.remove_highlight();d&&d.add_copy_to_container&&(h=d.top_level_widget(),g.apply_tool(d,a),h.backup_all());!d&&g.nothing_under_tool&&g.nothing_under_tool();$(m).removeClass("toontalk-tool-held");$(m).addClass("toontalk-tool-returning");c.UTILITIES.add_one_shot_event_handler(m,"transitionend",1E3,function(){$(m).removeClass("toontalk-tool-returning")});c.UTILITIES.set_timeout(function(){m.style.left=
f.left+"px";m.style.top=f.top+"px"});document.removeEventListener("mousemove",k);document.removeEventListener("mouseup",b)},e=function(a){var b;$(m).hide();a=document.elementFromPoint(a.pageX-(window.pageXOffset+q),a.pageY-(window.pageYOffset+n)+l/2);for($(m).show();a&&!a.toontalk_widget&&(!$(a).is(".toontalk-backside")||$(a).is(".toontalk-top-level-backside"));)a=a.parentNode;a&&(b=a.toontalk_widget);if(b)return a=b.get_type_name(),b&&"empty hole"===a?b.get_parent_of_frontside():b};m.addEventListener("mousedown",
function(a){var c=m.getBoundingClientRect();q=a.clientX-c.left;n=a.clientY-c.top;l=c.height;a.preventDefault();$(m).addClass("toontalk-tool-held");f=$(m).offset();document.addEventListener("mousemove",k);document.addEventListener("mouseup",b)})}}}(window.TOONTALK);window.TOONTALK.vacuum=function(c){var m=Object.create(null),g={suck:"Drag this vacuum over the thing you want to remove. Click or type 'e' to switch to erasing. Type 'r' to restore previously removed or erased things.",erase:"Drag this vacuum over the thing you want to erase (or un-erase). Type 's' to switch to sucking. Click or type 'r' to restore contents.",restore:"Drag this over the work area. Each time you release it a widget is restored. Click or type 's' to switch to sucking. Type 'e' to switch to erasing."},
f={suck:"toontalk-vacuum-s",erase:"toontalk-vacuum-e",restore:"toontalk-vacuum-r"},q={suck:"erase",erase:"restore",restore:"suck"};m.create=function(){var n,l,m,k=[],b=function(a){l!==a&&(l=a,$(n).removeClass(m),m=f[l],$(n).addClass(m),e())},e=function(){n.title="restore"===l&&0===k.length?"The vacuum is empty. Type 'r' to switch to removing. Type 'e' to switch to erasing.":g[l]};return{apply_tool:function(a,b){var e,f;"suck"===l?a.remove&&"top-level"!==a.get_type_name()&&(c.robot.in_training&&b&&
c.robot.in_training.removed(a),a.remove(b),k.push(a)):"erase"===l?"top-level"!==a.get_type_name()&&(a.get_frontside_element(),e=!a.get_erased(),a.set_erased(e,!0),c.robot.in_training&&b&&c.robot.in_training.set_erased(a,e)):"restore"===l&&0<k.length&&(e=k.pop(),f=a.add_to_top_level_backside(e,!0),e=$(n).offset(),e.left-=$(f).width(),c.UTILITIES.set_absolute_position($(f),e))},nothing_under_tool:function(){b(q[l])},get_element:function(){n||(n=document.createElement("div"),$(n).addClass("toontalk-vacuum"),
c.tool.add_listeners(n,this),b("suck"),document.addEventListener("keyup",function(a){a=String.fromCharCode(a.keyCode);"s"===a||"S"===a?b("suck"):"e"===a||"E"===a?b("erase"):"r"!==a&&"R"!==a||b("restore")}),e());return n}}};c.creators_from_json.vacuum=function(f,g){var q=c.vacuum.create();f.mode&&c.UTILITIES.set_timeout(function(){q.set_mode(f.mode)});return q};return m}(window.TOONTALK);window.TOONTALK.wand=function(c){var m=Object.create(null);m.create=function(){var g;return{apply_tool:function(c){"top-level"!==c.get_type_name()&&c.add_copy_to_container()},get_element:function(){g||(g=document.createElement("div"),$(g).addClass("toontalk-wand"),g.title="Drag this magic wand over the thing you want to copy.",c.tool.add_listeners(g,this));return g}}};c.creators_from_json.wand=function(){return c.wand.create()};return m}(window.TOONTALK);window.TOONTALK.SETTINGS=function(c){var m=function(q,n,l){var m=[],k=[],b=n?1:0,e=c.UTILITIES.create_local_files_table(q);m[b]="Programs stored in browser";f(q,e,!1,l);k[b]=e;n?(g("program",q,l,function(a){m[0]="Programs in cloud";k[0]=a||c.UTILITIES.create_text_element("Error connecting");k[2]&&l.appendChild(c.UTILITIES.create_tabs(m,k))}),g("page",q,l,function(a){m[2]="Published pages";k[2]=a||c.UTILITIES.create_text_element("Error connecting");k[0]&&l.appendChild(c.UTILITIES.create_tabs(m,k))})):
l.appendChild(c.UTILITIES.create_tabs(m,k))},g=function(g,n,l,m){c.google_drive.get_toontalk_files(!1,g,function(k){var b;"string"===typeof k?b=k:k.error&&(b=k.error.message);b?"Need to authorize"===b||"Login Required"===b?c.google_drive.authorize(m):(console.log(b),console.log("Google drive status: "+c.google_drive.get_status()),m(null)):(b="program"===g&&"toontalk-file-load-button",k=c.UTILITIES.create_file_data_table(k.items,!0,b),f(n,k,!0,l),m(k))})},f=function(c,f,g,m){$(f).find(".toontalk-file-load-button").click(function(f){var b=
function(){$(m).remove()},e=function(){c.set_setting("program_name",f.target.innerText);c.load(g,b)}.bind(this);c.save(!0,void 0,e)})};return{open:function(f){var g=document.createElement("div"),l=f.get_backside_element(),r=f.get_setting("program_name"),k=c.UTILITIES.create_text_input(r,"toontalk-program-name-input","Current program name:","Edit this to change the name of your program","docs/manual/settings.html"),b=c.UTILITIES.create_close_button(function(){$(g).remove()},"Click to close the settings panel."),
e=c.UTILITIES.create_text_element("How should your program be saved?"),a=c.UTILITIES.create_check_box(f.get_setting("auto_save_to_google_drive"),"toontalk-save-setting","Save automatically to my Google Drive","Check this if you want your programs automatically saved to a 'ToonTalk Programs' folder in your Google Drive."),d=c.UTILITIES.create_check_box(f.get_setting("auto_save_to_local_storage"),"toontalk-save-setting","Save automatically to this browser's local storage","Check this if you want your programs automatically saved in this browser's local storage."),
h=c.UTILITIES.create_button("Save to Google Drive now","toontalk-save-button","Click to save your program now to your Google Drive account.",function(){f.save(!0,{google_drive:!0})}),s=c.UTILITIES.create_button("Save to browser's storage now","toontalk-save-button","Click to save your program now to this browser's local storage.",function(){f.save(!0,{local_storage:!0})}),v=c.UTILITIES.create_button("Login to Google","toontalk-google-login-button","Click to log in to Google to authorize use of your Google Drive.",
function(){c.google_drive.authorize(function(){$(v).remove()})}),w=c.UTILITIES.create_button("Publish","toontalk-publish-button","Click to publish your program by generating a Google Drive URL.",function(){f.publish(z,y.button.checked)}),y=c.UTILITIES.create_check_box(f.get_setting("publish_as_workspace"),"toontalk-publish-setting","As a workspace","Check this if you want to publish the workspace and its widgets. Uncheck it you wish to publish just the widgets."),z=function(a,b){var d=document.createElement("span"),
e=c.google_drive.google_drive_url(a.id);d.innerHTML="Published: <a href='"+e+"' target='_blank'>"+f.get_setting("program_name")+"</a>";$(k.container).children("tr").append(c.UTILITIES.create_table_entry(d))},C=document.createElement("div"),A=c.google_drive&&"undefined"!==typeof gapi?c.google_drive.get_status():"Google Drive API not loaded",F=!0,E=c.UTILITIES.create_vertical_table(w,y.container);$(g).addClass("toontalk-settings-panel").css({width:$(l).width()+29,height:$(l).height()+50,left:-2,top:-25,
"z-index":c.UTILITIES.next_z_index()});g.appendChild(b);k.button.addEventListener("change",function(){var a=k.button.value.trim();r!==a&&f.save(!0,void 0,function(){r=a;f.set_setting("program_name",a);f.load(!0,function(){setTimeout(function(){$(g).css({"z-index":c.UTILITIES.next_z_index()})},500)})})});a.button.addEventListener("click",function(b){f.save(!0,{auto_save_to_google_drive:d.button.checked,gooogle_drive:!0});f.set_setting("auto_save_to_google_drive",a.button.checked);a.button.checked?
$(h).hide():$(h).show()});d.button.addEventListener("click",function(a){f.save(!0,{auto_save_to_local_storage:d.button.checked,local_storage:!0});f.set_setting("auto_save_to_local_storage",d.button.checked);d.button.checked?$(s).hide():$(s).show()});y.button.addEventListener("click",function(a){f.set_setting("publish_as_workspace",y.button.checked)});g.appendChild(C);$(e).css({"font-weight":"bold","font-size":24,color:"navy"});C.appendChild(e);C.appendChild(k.container);C.appendChild(a.container);
C.appendChild(d.container);a.container.appendChild(c.UTILITIES.create_space());a.container.appendChild(h);f.get_setting("auto_save_to_google_drive")&&$(h).hide();d.container.appendChild(c.UTILITIES.create_space());d.container.appendChild(s);f.get_setting("auto_save_to_local_storage")&&$(s).hide();"Need to authorize"===A?(a.container.appendChild(c.UTILITIES.create_space()),a.container.appendChild(v)):"Authorized"!==A&&"Ready"!==A&&"Authorized but not yet ready"!==A&&(F=!1,setTimeout(function(){a.button.disabled=
!0;$(w).button("option","disabled",!0);$(h).button("option","disabled",!0);a.container.title="Inactived because attempt to connect to Google Drive returned: "+A;w.title=a.container.title;h.title=a.container.title},1));$(k.container).children("tr").append(c.UTILITIES.create_table_entry(E));m(f,F,g);l.appendChild(g)}}}(window.TOONTALK);window.TOONTALK.DEFAULT_SETTINGS={program_name:"My first program",auto_save_to_google_drive:!0,auto_save_to_local_storage:!0};window.TOONTALK.DISPLAY_UPDATES=function(c){var m=[],g=0;return{pending_update:function(c){c.update_display&&(0<=m.indexOf(c)||m.push(c))},update_display:function(){var f=m,g=function(c,f){$(c).children().each(function(c,k){$(k).css({"z-index":f+1});g(k,f+1)})};m=[];0!==f.length&&f.forEach(function(f){var l=f.get_frontside_element&&f.get_frontside_element(),m,k,b;f.update_display();m=$(l).parent().closest(".toontalk-side");m.is("*")&&(k=c.UTILITIES.get_style_numeric_property(l,"z-index"),b=c.UTILITIES.get_style_numeric_property(m.get(0),
"z-index"),b||(b=c.UTILITIES.next_z_index(),m.css({"z-index":b})),!k||m.is(".toontalk-top-level-backside")?(k=c.UTILITIES.next_z_index(),$(l).css({"z-index":k})):k>=b&&(k=b+1,$(l).css({"z-index":k})),g(l,k));l&&!$(l).is(".toontalk-top-level-resource, .toontalk-bird, .toontalk-nest, .toontalk-box-hole, .toontalk-plain-text-element, .toontalk-conditions-contents, .toontalk-robot, .toontalk-widget, .toontalk-held-by-robot")&&c.UTILITIES.set_timeout(function(){m.is(".toontalk-box-hole")?$(l).is(".ui-resizable")&&
$(l).resizable("destroy"):$(l).is(".ui-resizable")||c.UTILITIES.make_resizable($(l),f)})})},run_cycle_is_over:function(){var c=Date.now();20<=c-g&&(this.update_display(),g=c)}}}(window.TOONTALK);window.TOONTALK.actions=function(c){c.creators_from_json.body=function(m,g){var f=c.actions.create();g.body=f;f.initialise_steps(c.UTILITIES.create_array_from_json(m.steps,g));return f};return{create:function(m){var g=Object.create(this),f=[];m||(m=[]);g.copy=function(){return c.actions.create(c.UTILITIES.copy_array(m))};g.get_steps=function(){return m};g.initialise_steps=function(c){m=c};g.is_empty=function(){return 0===m.length};g.reset_steps=function(){m=[];this.reset_newly_created_widgets()};
g.reset_newly_created_widgets=function(){f=[]};g.add_step=function(c,f){m.push(c);f&&this.add_newly_created_widget(f)};g.add_newly_created_widget_if_new=function(c){0<=f.indexOf(c)||this.add_newly_created_widget(c)};g.add_newly_created_widget=function(g){c.debugging&&0<=f.indexOf(g)?console.log("add_newly_created_widget called with not new widget."):f.push(g)};g.get_newly_created_widgets=function(){return f};g.get_path_to=function(g,m){var l,r;f.some(function(f,b){if(f===g)return l=c.newly_created_widgets_path.create(b),
!0;if(f.get_path_to&&(r=f.get_path_to(g,m)))return l=c.newly_created_widgets_path.create(b),l.next=r,!0});return l};g.dereference=function(g){c.debugging&&!f[g]&&c.UTILITIES.report_internal_error("Expected to find the "+(g+1)+"th newly created widget.");return f[g]};return g},run_unwatched:function(c,g,f,q,n){var l=this.get_steps();n||(n=0);q.run_next_step=function(){if(n<l.length){var r=l[n];n++;r.run_unwatched(c,g,q)}else q.get_run_once()||q.get_first_in_team().run(c,g,f)};q.run_next_step()},run_watched:function(m,
g,f,q){var n=this.get_steps(),l=q.get_frontside_element(),r=l.parentElement,k=function(){$(l).addClass("toontalk-side-animating");c.UTILITIES.set_position_relative_to_top_level_backside($(l),e);setTimeout(function(){r.appendChild(l);c.UTILITIES.set_absolute_position($(l),e);q.set_animating(!1);q.get_run_once()||q.get_first_in_team().run(m,g,f);q.render()},1E3)},b=0,e=$(l).offset(),a=$(l).position(),d=$(l).width(),h=$(l).height(),s=$(l).closest(".toontalk-backside"),v=s.get(0).getBoundingClientRect(),
w=$(l).closest(".toontalk-top-level-backside").offset(),y=m.get_backside();0===d&&($(l).css({width:"",height:""}),d=$(l).width(),h=$(l).height());w||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),w={left:0,top:0});if(e.left<v.left-w.left||e.top<v.top-w.top||e.left+d>v.right+w.left||e.top+h>v.bottom+w.top)e=s.offset(),e.left+=s.width()/2,e.top+=s.height()-h;q.start_position=a;q.run_next_step=function(){y&&y.visible()?setTimeout(function(){if(b<n.length){var a=
n[b];b++;a.run_watched(m,g,q);q.get_thing_in_hand()&&(q.get_thing_in_hand().save_dimensions(),q.render())}else k()},500):(q.set_animating(!1),$(l).css({width:"",height:""}),l.style.left=a.left+"px",l.style.top=a.top+"px",r.appendChild(l),this.run_unwatched(m,g,f,q,b))}.bind(this);q.set_animating(!0,e);q.run_next_step();return!0},toString:function(){var c="",g=this.get_steps();g.forEach(function(f,q){c+=f.toString();c=q===g.length-2?c+" and \n":q<g.length-2?c+", \n":c+"."});return c},get_json:function(m){return{type:"body",
steps:c.UTILITIES.get_json_of_array(this.get_steps(),m)}}}}(window.TOONTALK);
window.TOONTALK.newly_created_widgets_path=function(c){c.creators_from_json.newly_created_widgets_path=function(m){return c.newly_created_widgets_path.create(m.index)};return{create:function(m){return{dereference:function(g,f,q){g=q.get_body().dereference(m);return this.next?c.path.dereference_path(this.next,g,f,q):g},toString:function(){var c;switch(m){case 0:c="first";break;case 1:c="second";break;case 2:c="third";break;default:c=m+1+"th"}return"the "+c+" widget he created"},get_json:function(){return{type:"newly_created_widgets_path",
index:m}}}}}}(window.TOONTALK);window.TOONTALK.robot_action=function(c){var m={copy:function(c,b,e,a){a.add_newly_created_widget(c.copy({}));return!0},"pick up":function(c,b,e,a){a.set_thing_in_hand(c);return!0},"pick up a copy of":function(c,b,e,a){c=c.copy({});a.add_newly_created_widget(c);a.set_thing_in_hand(c);return!0},"drop it on":function(f,b,e,a,d){if(f)if(b=a.get_thing_in_hand()){if(b.drop_on)return b.drop_on(f,!1,void 0,a),a.set_thing_in_hand(void 0),f.visible&&f.visible()&&f.render(),b.robot_waiting_before_next_step===
a?(d&&d.running_watched||(b.robot_waiting_before_next_step=void 0),!1):!0;c.UTILITIES.report_internal_error("Thing in robot's hand ("+b+") doesn't handle 'drop_on'. Robot that "+a)}else c.UTILITIES.report_internal_error("The robot that '"+a.toString()+"' is executing drop_on but has nothing in its hand.");else c.UTILITIES.report_internal_error("The robot that '"+a.toString()+"' is executing drop_on but doesn't know where to drop what its holding")},remove:function(c,b,e,a){c.remove();return!0},erased_widget:function(c,
b,e,a,d){c.set_erased(d.erased);return!0},edit:function(f,b,e,a,d){if(f[d.setter_name])return d.argument_2?f[d.setter_name].call(f,d.argument_1,d.argument_2,f.visible()):f[d.setter_name].call(f,d.argument_1,f.visible()),!0;c.UTILITIES.report_internal_error(f+" cannot be edited.")},"add to the top-level backside":function(c,b,e,a,d){a.visible()||(a=c.get_frontside_element(!0),e=$(b.get_frontside_element()).position(),b=$(b.get_frontside_element()).closest(".toontalk-top-level-backside").get(0),$(a).css({left:e.left,
top:e.top}),b.appendChild(a),b.toontalk_widget.add_backside_widget(c),c.animate_to_element(b));return!0}},g=function(c,b,e,a,d){b=a.get_thing_in_hand();a.get_frontside_element();var f=c.get_element();e=$(f).width()/2;f=$(f).height()/2;a.animate_to_widget(c,d,.25,e,f);b&&a.render()},f=function(c,b){var e=c.get_backside_element(!0);return $(e).find(b).get(0)},q=function(c,b,e,a,d,h){var g=f(c,h),l=a.get_frontside_element(),m=g&&$(g).is(":visible"),n=function(){d();$(g).addClass("ui-state-active");setTimeout(function(){$(g).removeClass("ui-state-active");
!m&&c.get_backside()&&c.get_backside().hide_backside();a.run_next_step()},500)};b=function(){a.animate_to_element(g,n,.25,0,-$(l).height())};!m&&c.open_backside?c.open_backside(b):b()},n=function(c,b,e,a,d,f){a.get_frontside_element();a.carrying_tool=f;a.update_display();a.animate_to_element(c.get_frontside_element(),function(){d();a.carrying_tool=void 0;a.update_display();a.run_next_step()},.25,0,0)},l=function(c,b,e,a,d){var f=c.get_parent_of_frontside();n(c,b,e,a,function(){d();f&&"top-level"!==
f.get_widget().get_type_name()&&f.update_display&&f.update_display();c.render()},"toontalk-vacuum-ready-small")},r={copy:function(c,b,e,a,d){n(c,b,e,a,function(){d();c.add_copy_to_container(a.get_recently_created_widget())},"toontalk-wand-small")},"pick up":function(f,b,e,a,d){var h=f.get_frontside_element(),l=function(){d();a.run_next_step()};"empty hole"===f.get_type_name()?c.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):(f.save_dimensions(),$(h).css({width:h.offsetWidth+
"px",height:h.offsetHeight+"px"}),g(f,b,e,a,l))},"pick up a copy of":function(c,b,e,a,d){g(c,b,e,a,function(){d();a.get_recently_created_widget().set_visible(!0);a.update_display();a.run_next_step()})},"drop it on":function(f,b,e,a,d){var h=a.get_thing_in_hand(),l;h?(l=$(h.get_frontside_element()),g(f,b,e,a,function(){var b=l.offset();l.removeClass("toontalk-held-by-robot");d();h.drop_on&&($(a.get_frontside_element()).closest(".toontalk-top-level-backside").append(l.get(0)),c.UTILITIES.set_absolute_position(l,
b),h.restore_dimensions(),h.robot_waiting_before_next_step===a?h.robot_waiting_before_next_step=void 0:(a.set_thing_in_hand(void 0),a.run_next_step()),a.rerender())})):(c.UTILITIES.report_internal_error("Expected the robot to be holding something."),console.log("The robot is "+a),g(f,b,e,a,d))},remove:l,erased_widget:l,edit:function(c,b,e,a,d,f){q(c,b,e,a,function(){c.get_backside()&&c.get_backside().update_display();d()},f.button_selector)},"add to the top-level backside":function(c,b,e,a,d){d();
a.run_next_step()}};c.creators_from_json.robot_action=function(f,b){return f.additional_info?c.robot_action.create(c.path.create_from_json(f.path,b),f.action_name,f.additional_info):c.robot_action.create(c.path.create_from_json(f.path,b),f.action_name)};return{create:function(f,b,e){var a=Object.create(this),d=m[b],h=r[b];h||(h=function(a,b,c,d,e){setTimeout(function(){continuation(a)},3E3)});f||c.UTILITIES.report_internal_error("path undefined in "+b+" action");d||c.UTILITIES.report_internal_error("no run_function for "+
b);a.run_unwatched=function(a,b,h){var g=c.path.dereference_path(f,a,b,h);if(!g)return c.UTILITIES.report_internal_error("Unable to dereference path: "+c.path.toString(f)+" in context: "+a.toString()),!1;d(g,a,b,h,e)&&h.run_next_step()};a.run_watched=function(a,b,g){var l=c.path.dereference_path(f,a,b,g),m=function(){e||(e={});e.running_watched=!0;d(l,a,b,g,e)};l?(l.set_visible(!0),h(l,a,b,g,m,e)):c.UTILITIES.report_internal_error("Unable to dereference the path: "+c.path.toString(f)+" in context: "+
a.toString())};a.toString=function(){return b+" "+c.path.toString(f)};a.get_json=function(a){return{type:"robot_action",action_name:b,path:c.path.get_json(f,a),additional_info:e}};return a}}}(window.TOONTALK);window.TOONTALK.queue=function(c){return{create:function(){var m=Object.create(this);m.to_run=c.UTILITIES.create_queue();return m},enqueue:function(m){if(c.debugging&&this.to_run.does_any_item_satisfy(function(c){return c.robot===m.robot}))console.log("The same robot is being queued twice."),console.log("Robot is "+m.robot);else return this.to_run.enqueue(m)},maximum_run:50,paused:!1,run:function(){for(var m,g=Date.now()+this.maximum_run;!(this.to_run.isEmpty()||this.paused||Date.now()>=g);)m=this.to_run.dequeue(),
m.robot.run_actions(m.context,m.top_level_context,m.queue);c.DISPLAY_UPDATES.run_cycle_is_over();c.UTILITIES.set_timeout(function(){this.run()}.bind(this),this.to_run.isEmpty()?this.maximum_run:0)}}}(window.TOONTALK);window.TOONTALK.path=function(c){c.creators_from_json["path.to_entire_context"]=function(){return c.path.to_entire_context()};c.creators_from_json["path.top_level_backside"]=function(){return c.path.top_level_backside};c.creators_from_json["path.to_backside_widget_of_context"]=function(m){return c.path.get_path_to_backside_widget_of_context(m.type_name)};c.creators_from_json["path.to_resource"]=function(m,g){return c.path.get_path_to_resource(c.UTILITIES.create_from_json(m.resource,g))};return{get_path_to:function(m,
g){var f=function(f,g){var l=g.get_context(),m=g.get_body(),k,b;if(l===f)return c.path.to_entire_context();b=f.get_type_name();if("top-level"===b)return c.path.top_level_backside;if(k=m.get_path_to(f,g))return k;if("element attribute"===b&&f.get_original_attribute_widget()===f)return c.element.create_attribute_path(f,g);if(l.get_path_to&&(m=l.get_path_to(f,g)))return k=c.path.to_entire_context(),k.next=m,k;l.backside_widgets.some(function(b){b=b.get_widget();var a;if(b===f||b.top_contents_is&&b.top_contents_is(f))return k=
c.path.get_path_to_backside_widget_of_context(b.get_type_name()),g.add_to_backside_conditions(b),!0;if(b.get_path_to&&(a=b.get_path_to(f,g)))return k=c.path.get_path_to_backside_widget_of_context(b.get_type_name()),k.next=a,g.add_to_backside_conditions(b),!0});return k?k:c.path.get_path_to_resource(f.copy({}))}(m,g);f&&m.dereference_contents&&(c.path.path_end(f).not_to_be_dereferenced=!0);!f||"pick up"!==g.current_action_name&&"remove"!==g.current_action_name||(c.path.path_end(f).removing_widget=
!0);return f},path_end:function(c){for(;c.next;)c=c.next;return c},dereference_path:function(c,g,f,q){return c?c.dereference?c.dereference(g,f,q):g.dereference(c,f,q):g},continue_dereferencing_path:function(c,g,f,q){return c.next?g.dereference_contents&&!c.next.not_to_be_dereferenced?g.dereference_contents(c.next,f,q):g.dereference(c.next,f,q):g.dereference_contents&&!c.not_to_be_dereferenced?g.dereference_contents(c,f,q):g},toString:function(m){return m.next?(c.path.toString(m.next),c.path.toString(m.next)+
"of "+m.toString()):m.toString()},get_json:function(m,g){var f;if(!m.get_json)return m;f=m.get_json(g);m.next&&(f.next_path=c.path.get_json(m.next,g));m.removing_widget&&(f.removing_widget=!0);m.not_to_be_dereferenced&&(f.not_to_be_dereferenced=!0);return f},to_entire_context:function(){return{dereference:function(m,g,f){return c.path.continue_dereferencing_path(this,m,g,f)},toString:function(){return"what he's working on"},get_json:function(){return{type:"path.to_entire_context"}}}},get_path_to_resource:function(m,
g){m=m.get_widget();return{dereference:function(f,g,n){f=m.copy({});var l,r,k;n.add_newly_created_widget(f);n.visible()&&!m.visible()&&(l=c.UTILITIES.find_resource_equal_to_widget(m))&&(k=f.get_frontside_element(),r=$(l).position(),c.UTILITIES.set_timeout(function(){$(k).css({left:r.left,top:r.top,width:l.offsetWidth,height:l.offsetHeight})}));return f},toString:function(){return c.UTILITIES.add_a_or_an(m.toString())},get_json:function(){return{type:"path.to_resource",resource:c.path.get_json(m,c.UTILITIES.fresh_json_history())}}}},
get_path_to_backside_widget_of_context:function(m){return{dereference:function(g,f,q){var n;g.backside_widgets.some(function(c){if(c.get_widget().is_of_type(m))return n=c.get_widget(),!0});if(n)return c.path.continue_dereferencing_path(this,n,f,q)},toString:function(){return"the "+m+" on the back of what he's working on"},get_json:function(){return{type:"path.to_backside_widget_of_context",type_name:m}}}},create_from_json:function(m,g){var f=c.UTILITIES.create_from_json(m,g),q;m.next_path&&(q=c.UTILITIES.create_from_json(m.next_path,
g),m.next_path.removing_widget&&(q.removing_widget=!0),m.next_path.not_to_be_dereferenced&&(q.not_to_be_dereferenced=!0),f.next=q);m.removing_widget&&(f.removing_widget=!0);m.not_to_be_dereferenced&&(f.not_to_be_dereferenced=!0);return f},top_level_backside:{dereference:function(c,g,f){return c.ancestor_of_type("top-level")},toString:function(){return"the top-level backside"},get_json:function(){return{type:"path.top_level_backside"}}}}}(window.TOONTALK);window.TOONTALK.publish=function(c){var m=function(c,f,m){var n='<!DOCTYPE html>\n<html>\n<head>\n<link rel="stylesheet" media="all" href="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/toontalk.css">\n<link href="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/css/font-awesome.min.css" rel="stylesheet" type="text/css" />\n<link href="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/css/froala_editor.min.css" rel="stylesheet" type="text/css" />\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/compile/toontalk.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/froala_editor.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/block_styles.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/colors.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/font_family.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/font_size.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/lists.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/tables.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/video.min.js">\x3c/script>\n<title>'+
c+'</title>\n<link rel="shortcut icon" href="favicon.ico" />\n</head>\n<body>';f.forEach(function(c,f){n+='<div class="toontalk-edit" name="content">'+c+"</div>";m[f]&&(n+=m[f])});return n+='<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/support/published_support.js">\x3c/script>\n</body>\n</html>'};return{publish_widget:function(g,f,q,n){var l=c.google_drive.get_status(),r=["Edit this. Select text for formatting.","And edit this."],k=function(d){(d=d&&d.items&&0<d.items.length&&
d.items[0])?n(d,a):(contents=m(g,r,a),c.google_drive.upload_file(b,"html",contents,n))},b,e,a;"Ready"===l?(b=f.get_setting("program_name"),q?(e=c.UTILITIES.get_json_top_level(f),f.set_setting("program_name",b+" (published version)"),a=[c.UTILITIES.toontalk_json_div(e,f)],f.set_setting("program_name",b)):(f=f.get_backside_widgets(),a=[],f.forEach(function(b,f){b.visible()&&(e=c.UTILITIES.get_json_top_level(b),a.push(c.UTILITIES.toontalk_json_div(e,b)),1<f&&(r[f]=r[1]))}),r.push(r[1])),c.google_drive.get_toontalk_files(c.google_drive.full_file_name(b,
"page"),"page",k)):(console.log("Unable to publish to Google Drive because: "+l),n(null))},republish:function(g){c.google_drive.insert_or_update_file(void 0,g.file_id,"page",m(g.title,g.editable_contents,g.widgets_json),function(){console.log("Published page '"+g.title+"' updated.")})}}}(window.TOONTALK);function handle_client_load(){window.TOONTALK.google_drive.handle_client_load()}
window.TOONTALK.google_drive=function(c){var m=c.GOOGLE_DRIVE_CLIENT_ID||"829199594800-54bk3k92fdepke86ik366cds9kmo4u0c.apps.googleusercontent.com",g=c.ORIGIN_FOR_GOOGLE_DRIVE||"http://toontalk.github.io",f="Need to authorize",q,n;return{handle_client_load:function(l){0!==window.location.href.indexOf(g)?(f="Connections to Google Drive are configured for the following domain only: "+g+". If you are hosting ToonTalk elsewhere you need to set window.TOONTALK.GOOGLE_DRIVE_CLIENT_ID and window.TOONTALK.ORIGIN_FOR_GOOGLE_DRIVE",l&&
l(f)):setTimeout(function(){c.google_drive.check_authorization(l)})},check_authorization:function(g){f="Awaiting authorization";gapi.auth.authorize({client_id:m,scope:"https://www.googleapis.com/auth/drive",immediate:!0},function(f){c.google_drive.handle_authorization_result(f,g)})},handle_authorization_result:function(g,m){g&&!g.error?(f="Authorized but not yet ready",gapi.client.load("drive","v2",function(){c.google_drive.get_folder_ids(function(){f="Ready"})}),m&&m()):(f="Need to authorize",m&&
m(f))},authorize:function(f){gapi.auth.authorize({client_id:m,scope:"https://www.googleapis.com/auth/drive",immediate:!1},function(g){c.google_drive.handle_authorization_result(g,f)})},get_folder_ids:function(f){c.google_drive.get_folder_id(!0,function(g){q=g;c.google_drive.get_folder_id(!1,function(c){n=c;f()})})},get_folder_id:function(f,g){var k=f?"ToonTalk Programs":"ToonTalk Pages",b=function(b){var a=function(a){a&&a.id?g(a.id):console.error("Failure to create folder '"+k+"'. Response was "+
a)};(b=b&&b.items&&0<b.items.length&&b.items[0].id)?g(b):f?c.google_drive.create_folder("ToonTalk Programs",!1,a):c.google_drive.create_folder("ToonTalk Pages",!0,a)};f&&q?g(q):!f&&n?g(n):c.google_drive.fetch_folder_id(k,b)},get_status:function(){return f},connection_to_google_drive_possible:function(){return 0!==f.indexOf("Connections to Google Drive are configured for the following domain only: ")},list_files:function(c,f){gapi.client.request({path:"/drive/v2/files",method:"GET",params:c}).execute(f)},
fetch_folder_id:function(f,g){c.google_drive.list_files({q:"mimeType = 'application/vnd.google-apps.folder' and title ='"+f+"' and trashed = false"},g)},get_toontalk_files:function(f,g,k){"undefined"===typeof gapi?k("Google Drive API not available."):(g="properties has {key='ToonTalkType' and value='"+g+"' and visibility='PUBLIC'} and trashed = false",f&&(g+=" and title='"+f+"'"),c.google_drive.list_files({q:g},k))},get_toontalk_program_file:function(f,g){c.google_drive.list_files({q:"'"+q+"' in parents and trashed = false and title='"+
f+"'"},function(c){c&&c.items&&0<c.items.length?g(c.items[0]):g(null)})},upload_file:function(f,g,k,b){var e="json"===g?"program":"page",a=f+"."+g;c.google_drive.get_toontalk_files(a,e,function(d){gapi.client.load("drive","v2",function(){var f=d&&d.items&&0<d.items.length&&d.items[0].id;b||(b=function(a){a.error&&(console.log("Google drive status: "+c.google_drive.get_status()),"Login Required"!==a.error.message&&console.log(a.error.message));console.log("File "+a.title+" ("+a.id+") "+(f?"updated":
"created"))});f?c.google_drive.insert_or_update_file(void 0,f,e,k,b):c.google_drive.insert_or_update_file(a,void 0,e,k,b)})})},full_file_name:function(c,f){return c+"."+("program"===f?"json":"html")},insert_or_update_file:function(f,g,k,b,e){var a={title:f,mimeType:"text/html"};a.parents=[{kind:"drive#fileLink",id:"program"===k?q:n}];b="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify(a)+"\r\n---------314159265358979323846\r\nContent-Type: text/html\r\n\r\n"+
b+"\r\n---------314159265358979323846--";f?(f="/upload/drive/v2/files",a="POST"):(f="/upload/drive/v2/files/"+g,a="PUT");gapi.client.request({path:f,method:a,params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="-------314159265358979323846"'},body:b}).execute(function(a){g||c.google_drive.insert_property(a.id,"ToonTalkType",k,"PUBLIC");e&&e(a)})},create_folder:function(c,f,g){gapi.client.drive.files.insert({resource:{title:c,mimeType:"application/vnd.google-apps.folder"}}).execute(f?
function(b){gapi.client.drive.permissions.insert({fileId:b.id,resource:{value:"",type:"anyone",role:"reader"}}).execute(function(c){g(b)})}:g)},download_file:function(c,f){if(c.downloadUrl){var g=gapi.auth.getToken().access_token,b=new XMLHttpRequest;b.open("GET",c.downloadUrl);b.setRequestHeader("Authorization","Bearer "+g);b.onload=function(){f(b.responseText)};b.onerror=function(){f(null)};b.send()}else f(null)},google_drive_url:function(c){return"https://googledrive.com/host/"+c+"/"},insert_property:function(c,
f,g,b){gapi.client.drive.properties.insert({fileId:c,resource:{key:f,value:g,visibility:b}}).execute(function(b){})}}}(window.TOONTALK);window.TOONTALK.UTILITIES=function(c){var m,g=100,f=(new Date).getTime(),q,n=function(a){var b=a.indexOf("{"),c=a.lastIndexOf("}");if(!(0>b||0>c))return a.substring(b,c+1)},l=function(a,b,e,f,g,k,l,m,n,q){var r,E,G,X,L;e.set_visible(!0);if(a.is(".toontalk-backside")){if(e.is_of_type("top-level")){r=l.semantic.backside_widgets;E=l.shared_widgets;G=a.get(0);k=e.get_backside_widgets().slice();k.forEach(function(a,b){var c=a.get_widget(),d,g,k,l,m,n,q;e.remove_backside_widget(c,a.is_backside());d=0<=
r[b].widget.shared_widget_index?E[r[b].widget.shared_widget_index].view:r[b].widget.view;a.is_backside()?(g=c.get_backside_element(!0),k=d.backside_left,l=d.backside_top,m=d.backside_width,n=d.backside_height):(g=c.get_frontside_element(!0),k=d.frontside_left,l=d.frontside_top,m=d.frontside_width,n=d.frontside_height);f.add_backside_widget(c,a.is_backside());G.appendChild(g);q=$(g).position();$(g).css({left:q.left+k,top:q.top+l,width:m,height:n});a.is_backside()&&(c.backside_geometry=d.backside_geometry,
c.apply_backside_geometry())}.bind(this));return}e?f.get_backside().widget_dropped_on_me(e,q,k):c.UTILITIES.report_internal_error("No source_widget");m||(n=m=0,setTimeout(function(){var a=e.get_HTML(),c=b.width(),f=b.height();0<=a.indexOf("data:image")?(a=Math.min(80,c)/2,c=90,90>f&&(c-=(90-f)/2)):(a=Math.min(60,c/2),c=Math.min(30,f/2));b.css({left:X-a,top:L-c})},50));X=k.pageX-(g.left+m);L=k.pageY-(g.top+n);b.css({left:X,top:L});l&&l.semantic.running&&e.set_running(!0)}else if(a.is(".toontalk-drop-area"))b.addClass("toontalk-widget-in-drop_area"),
a.append(b.get(0)),b.is(".toontalk-robot")&&a.data("drop_area_owner").set_next_robot(c.UTILITIES.widget_from_jquery(b));else{if(b.is(".toontalk-backside-of-top-level"))return;if(f)G=a.closest(".toontalk-top-level-backside").get(0),G.appendChild(b.get(0)),g=$(G).offset(),b.css({left:k.pageX-(g.left+m),top:k.pageY-(g.top+n)}),e.drop_on&&e.drop_on(f,q,k)||f.widget_dropped_on_me&&f.widget_dropped_on_me(e,q,k)||(a=a.closest(".toontalk-top-level-backside"),0<a.length&&(f=c.UTILITIES.widget_from_jquery(a))&&
f.get_backside().widget_dropped_on_me(e,q,k));else{c.UTILITIES.report_internal_error("target element has no 'owner'");return}}c.UTILITIES.remove_highlight()},r=function(a,b,e,f,g){var k=new FileReader,m=0===a.type.indexOf("image"),q,r;k.onloadend=function(){if(m)q=c.element.create("<img src='"+k.result+"' alt='"+a.name+"'/>");else{if(r=n(k.result))try{q=c.UTILITIES.create_from_json(JSON.parse(r))}catch(A){}q||(q=c.element.create(k.result))}l(b,$(q.get_frontside_element(!0)),q,e,f,g)};m?k.readAsDataURL(a):
k.readAsText(a)},k=function(){m&&(m.removeClass("toontalk-being-dragged"),m.find("*").removeClass("toontalk-ignore-events"),c.UTILITIES.set_timeout(function(){m=void 0}))},b=function(a,c){if(a===c)return!0;if(a.parentNode)return b(a.parentNode,c)},e=[];window.addEventListener("message",function(a){a.source===window&&"zero-timeout-message"===a.data?(a.stopPropagation(),0<e.length&&e.shift()()):a.data.editable_contents&&c.publish.republish(a.data)},!1);$(document).ready(function(){c.debugging=c.UTILITIES.get_current_url_boolean_parameter("debugging",
!1);c.UTILITIES.process_json_elements();$(document).click(function(a){$(".toontalk-top-level-resource-container").each(function(a,b){var c=b.toontalk_widget;c&&c.set_running&&c.set_running(!1)})});c.QUEUE=window.TOONTALK.queue.create();c.QUEUE.run();window.addEventListener("beforeunload",function(a){c.UTILITIES.backup_all_top_level_widgets(!0)});$(document).tooltip();c.UTILITIES.add_test_all_button()});return{create_from_json:function(a,b,e){var f=function(a,b,c){b.shared_widgets[c]=a;a.finish_create_from_json_continuation&&
(a.finish_create_from_json_continuation(),a.finish_create_from_json_continuation=void 0);return a},g,k,l,m;if(a){b||(b={});a.shared_widgets&&(b.json_of_shared_widgets=a.shared_widgets,b.shared_widgets=[]);a.shared_html&&(b.shared_html=a.shared_html);if(a.widget)return g=c.UTILITIES.create_from_json(a.widget,b),a.is_backside?g.get_backside(!0):g;if(b&&b.shared_widgets&&0<=a.shared_widget_index){if(e=b.shared_widgets[a.shared_widget_index])return e;e=b.json_of_shared_widgets[a.shared_widget_index];
g=c.UTILITIES.create_from_json(e,b,!0);return f(g,b,a.shared_widget_index)}(l=a.semantic)||(l=a);a=a.view;if(0<=l.shared_widget_index)return g=c.UTILITIES.create_from_json(b.json_of_shared_widgets[l.shared_widget_index],b,!0),f(g,b,l.shared_widget_index);if(c.creators_from_json[l.type]){b||(b={});a?b.json_view=a:a=b.json_view;if((g=c.creators_from_json[l.type](l,b))&&g.get_backside){l.erased&&(c.widget.erasable(g),g.set_erased(l.erased));l.infinite_stack&&g.set_infinite_stack(l.infinite_stack);if(a&&
a.frontside_width)if(k=a.backside?g.get_backside(!0).get_element():g.get_frontside_element(),m={width:a.frontside_width,height:a.frontside_height},"element"===l.type)g.on_update_display(function(){$(k).css(m)});else $(k).css(m);a&&a.saved_width&&(g.saved_width=a.saved_width,g.saved_height=a.saved_height);a&&a.backside_geometry&&(g.backside_geometry=a.backside_geometry);l.backside_widgets&&(e?g.finish_create_from_json_continuation=function(){this.add_backside_widgets_from_json(g,l.backside_widgets,
b)}.bind(this):this.add_backside_widgets_from_json(g,l.backside_widgets,b))}return g}c.UTILITIES.report_internal_error("JSON type '"+l.type+"' not supported. Perhaps a JavaScript file implementing it is missing.")}},add_backside_widgets_from_json:function(a,b,c){var e;b&&(e=this.create_array_from_json(b,c),a.set_backside_widget_sides(e,b.map(function(a){return 0<=a.widget.shared_widget_index?c.json_of_shared_widgets[a.widget.shared_widget_index].view:a.widget.view})))},create_array_from_json:function(a,
b){var e=[];a.forEach(function(a,f){e[f]=a?c.UTILITIES.create_from_json(a,b):a});return e},get_json_of_array:function(a,b){var e=[];a.forEach(function(a,f){a.is_backside&&a.is_backside()?e[f]={widget:c.UTILITIES.get_json(a.get_widget(),b),is_backside:!0}:e[f]=a.get_type_name?{widget:c.UTILITIES.get_json(a,b)}:a.get_json(b)});return e},fresh_json_history:function(){return{widgets_encountered:[],shared_widgets:[],json_of_widgets_encountered:[]}},get_json_top_level:function(a){var b=this.fresh_json_history(),
e=c.UTILITIES.get_json(a,b);0<b.shared_widgets.length&&(e.shared_widgets=b.shared_widgets.map(function(f,g){var k=function(a){a=b.widgets_encountered.indexOf(a);return b.json_of_widgets_encountered[a]},l=function(a){return k(b.shared_widgets[a])},m=k(f);a===f?(m={semantic:m.semantic,view:m.view,version:m.version},e.semantic={shared_widget_index:g}):c.UTILITIES.tree_replace_once(e.semantic,m,{shared_widget_index:g},l);return m}));e.shared_html=b.shared_html;return e},get_json:function(a,b){var e,f;
c.debugging&&!b&&c.UTILITIES.report_internal_error("no json_history");e=b.shared_widgets.indexOf(a);if(0<=e)return{shared_widget_index:e};e=b.widgets_encountered.indexOf(a);if(0<=e)return e=c.UTILITIES.insert_ancestors_last(a,b.shared_widgets),{shared_widget_index:e};e=b.widgets_encountered.push(a)-1;f=a.get_json(b);f=a.add_to_json(f,b);b.json_of_widgets_encountered[e]=f;a.add_backside_widgets_to_json&&a.add_backside_widgets_to_json(f,b);return f},tree_replace_once:function(a,b,c,e){var f,g;for(g in a)if(a.hasOwnProperty(g)&&
(f=a[g])){if(f===b)return a[g]=c,!0;if("shared_widget_index"===g){if(this.tree_replace_once(e(f),b,c,e))return!0}else if(!(0<=["string","number","function","undefined"].indexOf(typeof f))&&this.tree_replace_once(f,b,c,e))return!0}return!1},insert_ancestors_last:function(a,b){var c=-1;b.some(function(b,d){if(a.has_ancestor(b))return c=d,!0});0>c&&(c=b.length);b.splice(c,0,a);return c},toontalk_json_div:function(a,b){var e=a.view.backside,f=b.get_backside_widgets(),g=b.get_type_name();"top-level"===
g?e?(g="a work area containing ",0===f.length?g="an empty work area":(g=1===f.length?g+"one thing: ":g+(f.length+" things: "),q=f.length,f.forEach(function(a){q--;g+=c.UTILITIES.add_a_or_an(a.get_type_name());1===q?g+=", and ":1<q&&(g+=", ")}))):g="a top-level widget":(g=c.UTILITIES.add_a_or_an(g),e&&(g="the back of "+g));return"<div class='toontalk-json'>\nThis will be replaced by "+g+".\n<div style='display:none;'>"+JSON.stringify(a,null,"  ")+"</div></div>"},copy_widgets:function(a,b){var c=[],
e;for(e=0;e<a.length;e++)c[e]=a[e]&&a[e].copy(b);return c},copy_widget_sides:function(a,b){return a.map(function(a){var c=a.get_widget().copy(b);a.is_backside()&&c.get_backside();return c})},copy_array:function(a){return a.slice()},generate_unique_id:function(){f+=1;return"toontalk_id_"+f},get_style_property:function(a,b){if(a.currentStyle)return a.currentStyle[b];if(window.getComputedStyle)return document.defaultView.getComputedStyle(a,null).getPropertyValue(b)},get_style_numeric_property:function(a,
b){var c=this.get_style_property(a,b),e;return"string"===typeof c?(e=c.indexOf("px"),0<=e&&(c=c.substring(0,e)),parseInt(c,10)):c},data_transfer_json_object:function(a){var b;if(a.dataTransfer){try{b=a.dataTransfer.getData("text/html")}catch(e){b=a.dataTransfer.getData("text")}if(!b||b.match(/[\u3400-\u9FBF]/))b=a.dataTransfer.getData("text");if(b){a=n(b);if(!a)return c.UTILITIES.get_json_top_level(c.element.create(b));try{return JSON.parse(a)}catch(f){c.UTILITIES.report_internal_error("Exception parsing "+
a+"\n"+f.toString())}}}},drag_and_drop:function(a){c.UTILITIES.draggable(a);c.UTILITIES.can_receive_drops(a)},draggable:function(a){$(a).attr("draggable",!0);a.addEventListener("dragstart",function(b){var e=$(b.target).closest(".toontalk-side"),f,g,k;b.dataTransfer.getData("text")&&0<b.dataTransfer.getData("text").length||(m=e||$(a),g=c.UTILITIES.widget_from_jquery(m),g||(g=c.UTILITIES.widget_from_jquery($element),c.UTILITIES.report_internal_error("Possible bug that "+m+" doesn't have a known owner."),
m=$(a)),g.being_dragged=!0,f=m.get(0).getBoundingClientRect(),k=m.is(".toontalk-top-level-resource"),b.dataTransfer&&g.get_json&&(b.dataTransfer.effectAllowed=k?"copy":"move",e=c.UTILITIES.get_json_top_level(g),e.view.drag_x_offset=b.clientX-f.left,e.view.drag_y_offset=b.clientY-f.top,!e.view.frontside_width&&m.parent().is(".toontalk-backside")&&(e.view.frontside_width=m.width(),e.view.frontside_height=m.height()),m.is(".toontalk-backside")&&(e.view.backside=!0),m.data("json",e),f=c.UTILITIES.toontalk_json_div(e,
g),b.dataTransfer.setData("text",f),c.UTILITIES.is_internet_explorer()||b.dataTransfer.setData("text/html",f),g.drag_started(e,k)),m.addClass("toontalk-being-dragged"),b.stopPropagation())});a.addEventListener("dragend",function(a){m||(m=$(a.target).closest(".toontalk-side"));c.UTILITIES.widget_from_jquery(m).being_dragged=void 0;if(m.is(".toontalk-frontside"))if(m.parent().is(".toontalk-backside")){var b=m.data("json");b&&(m.data("json",""),m.css({width:b.view.frontside_width,height:b.view.frontside_height}))}else m.parent().is(".toontalk-top-level-resource, .toontalk-drop-area")||
m.is(".toontalk-carried-by-bird, .toontalk-element-attribute")||c.UTILITIES.has_animating_image(m.get(0))||m.css({width:"100%",height:"100%"});k();a.stopPropagation()})},can_receive_drops:function(a){a.addEventListener("dragover",function(a){a.preventDefault();return!1});a.addEventListener("drop",function(b){var e,f,g,n,q,z,C,A,F,E,G=c.UTILITIES.data_transfer_json_object(b);b.preventDefault();$(a).find("*").removeClass("toontalk-ignore-events");e=m;k();if(e||G||b.dataTransfer.files){if($(b.target).is(".toontalk-drop-area-instructions"))g=
$(b.target).parent();else if($(b.target).is(".toontalk-element-attribute-input")){if(g=$(b.target).closest(".toontalk-side"),n=c.UTILITIES.widget_from_jquery(g)){f=e?c.UTILITIES.widget_from_jquery(e):c.UTILITIES.create_from_json(G);c.UTILITIES.restore_resource(e,f);n.dropped_on_style_attribute(f,b.target.name,b);b.stopPropagation();return}}else g=$(b.target).is(".toontalk-drop-area")?$(b.target):$(b.target).closest(".toontalk-side");if(0!==g.length&&!g.is(".toontalk-top-level-resource")){C=g.offset();
c.UTILITIES.remove_highlight();n=c.UTILITIES.widget_from_jquery(g);if(e&&0<e.length&&!(n&&n.get_infinite_stack&&n.get_infinite_stack())&&(e.get(0)===g.get(0)||jQuery.contains(e.get(0),g.get(0)))){if(e.is(".toontalk-top-level-backside"))return;g.hide();f=document.elementFromPoint(b.pageX-window.pageXOffset,b.pageY-window.pageYOffset);g.show();f&&(g=$(f).closest(".toontalk-side"),C=g.offset(),n=c.UTILITIES.widget_from_jquery(g))}G&&G.view&&G.view.drag_x_offset?(q=G.view.drag_x_offset,z=G.view.drag_y_offset):
z=q=0;if(e&&0<e.length){if(!(n&&n.get_infinite_stack&&n.get_infinite_stack()||e.get(0)!==g.get(0)&&!jQuery.contains(e.get(0),g.get(0)))){e.css({left:e.get(0).offsetLeft+(b.layerX-q),top:e.get(0).offsetTop+(b.layerY-z)});b.stopPropagation();return}A=e.is(".toontalk-backside");f=c.UTILITIES.widget_from_jquery(e);e.parent().is(".toontalk-drop-area")?(e.removeClass("toontalk-widget-in-drop_area"),e.parent().data("drop_area_owner").set_next_robot(void 0)):(F=e.parents(".toontalk-side:first"),(E=c.UTILITIES.widget_from_jquery(F))?
!A&&f.get_infinite_stack&&f.get_infinite_stack()?(f=f.copy({}),F=e.width(),E=e.height(),e=$(f.get_frontside_element(!0)),g.is(".toontalk-backside")&&e.css({width:G.view.frontside_width||F,height:G.view.frontside_height||E})):E.removed_from_container&&(F.is(".toontalk-backside")?E.remove_backside_widget(f,A,!0):(E.removed_from_container(f,A,b),f.restore_dimensions&&f.restore_dimensions())):c.UTILITIES.restore_resource(e,f),c.robot.in_training&&c.robot.in_training.add_newly_created_widget_if_new(f))}else{if(0<
b.dataTransfer.files.length){for(e=0;e<b.dataTransfer.files.length;e++)r(b.dataTransfer.files[e],g,n,C,b);b.stopPropagation();return}f=c.UTILITIES.create_from_json(G,{event:b});if(!f){G?c.UTILITIES.report_internal_error("Unable to construct a ToonTalk widget from the JSON."):c.debugging&&console.log("No data transfer in drop.");b.stopPropagation();return}(A=G.view.backside)?(e=$(f.get_backside_element()),e.css({width:G.view.backside_width,height:G.view.backside_height,"background-color":G.view.background_color,
"border-width":G.view.border_width}),f.apply_backside_geometry()):e=$(f.get_frontside_element())}f!==n&&l(g,e,f,n,C,b,G,q,z,A);b.stopPropagation()}}else b.dataTransfer?c.UTILITIES.report_internal_error("Drop failed since unable to parse as JSON."):c.UTILITIES.report_internal_error("Drop failed since there is no event.dataTransfer"),b.stopPropagation()});a.addEventListener("dragenter",function(d){var e=$(d.target).closest(".toontalk-side"),f=c.UTILITIES.get_dragee();e.is(".toontalk-top-level-backside")||
e.closest(".toontalk-top-level-resource").is("*")||e.is(".toontalk-being-dragged")||f&&b(e.get(0),f.get(0))||(c.UTILITIES.highlight_element(e,d),e.is(".toontalk-backside, .toontalk-drop-area")||"box"===c.UTILITIES.widget_from_jquery($(a)).get_type_name()||e.find(".toontalk-side").addClass("toontalk-ignore-events"));d.stopPropagation()});a.addEventListener("dragleave",function(a){a.stopPropagation()})},create_drop_area:function(a){var b=document.createElement("div"),e=$(b),f=document.createElement("div");
f.innerHTML=a;$(f).addClass("toontalk-drop-area-instructions ui-widget");e.addClass("toontalk-drop-area");e.append(f);c.UTILITIES.can_receive_drops(b);return e},process_json_elements:function(){$(".toontalk-json").each(function(a,b){var e=b.textContent,f,g,k,l;if(e)if(e=e.substring(e.indexOf("{"),e.lastIndexOf("}")+1),f=JSON.parse(e),g=c.UTILITIES.create_from_json(f)){b.textContent="";if(g.get_type_name)if(g.is_of_type("top-level")){if(!c.no_local_storage&&!c.UTILITIES.get_current_url_boolean_parameter("reset",
!1)){if(f.load_most_recent_program)try{(l=window.localStorage.getItem("toontalk-last-key"))&&(k=window.localStorage.getItem(l))}catch(m){e="Error reading previous state. Error message is "+m,c.UTILITIES.is_internet_explorer()?console.error(e):c.UTILITIES.display_message()}k&&(f=JSON.parse(k),g=c.UTILITIES.create_from_json(f))}k=g.get_backside(!0);k=k.get_element();$(b).replaceWith(k);$(k).css({width:f.view.backside_width,height:f.view.backside_height,"background-color":f.view.background_color,"border-width":f.view.border_width})}else $(b).addClass("toontalk-top-level-resource toontalk-top-level-resource-container"),
k=g.get_frontside_element(),$(k).addClass("toontalk-top-level-resource").css({position:"relative"}),b.toontalk_widget=g,b.appendChild(k);else b.appendChild(g.get_element());g.set_active&&g.set_active(!1);g.set_visible&&g.set_visible(!0);setTimeout(function(){g.update_display&&g.update_display();f.semantic.running&&g.set_running(!0)},1)}else c.UTILITIES.report_internal_error("Could not recreate a widget from this JSON: "+e)})},set_absolute_position:function(a,b){for(var c=a.parent(),e=b.left,f=b.top,
g;c.is("*")&&!c.is("html");)g=c.position(),e-=g.left,f-=g.top,c=c.parent();a.css({left:e,top:f,position:"absolute"});a.is(".toontalk-side-animating")&&(a.get(0).style.left=e+"px",a.get(0).style.top=f+"px")},set_position_relative_to_top_level_backside:function(a,b){var c=a.closest(".toontalk-top-level-backside").offset();c||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),c={left:0,top:0});var e=b.left-c.left,c=b.top-c.top;a.css({left:e,top:c,position:"absolute"});
a.is(".toontalk-side-animating")&&(a.get(0).style.left=e+"px",a.get(0).style.top=c+"px")},restore_resource:function(a,b){var e,f;a.is(".toontalk-top-level-resource")&&(e=b.copy({fresh_copy:!0}),f=e.get_frontside_element(),$(f).css({width:a.width(),height:a.height()}),a.parent().removeClass("toontalk-top-level-resource toontalk-top-level-resource-container"),a.removeClass("toontalk-top-level-resource toontalk-top-level-resource-container"),$(f).addClass("toontalk-top-level-resource toontalk-top-level-resource-container").css({position:"relative"}),
a.get(0).parentElement.appendChild(f),c.DISPLAY_UPDATES.pending_update(e),b.set_active&&(b.set_active(!0),e.set_active(!1)))},find_resource_equal_to_widget:function(a){var b;$(".toontalk-top-level-resource").each(function(e,f){var g=$(f).children(":first"),k=c.UTILITIES.widget_from_jquery(g);if(k&&(a.equals&&a.equals(k)||a.matching_resource&&a.matching_resource(k)))return b=g.get(0),!1});return b},set_position_is_absolute:function(a,b,c){b?(c=$(a).position(),b=c.left,c=c.top,$(a).css({left:b,top:c,
position:"absolute"})):a.style.position="static"},cardinal:function(a){switch(a){case 0:return"first";case 1:return"second";case 2:return"third";default:return a+"th"}},on_a_nest_in_a_box:function(a){return $(a).closest(".toontalk-nest").is("*")&&$(a).closest(".toontalk-box").is("*")},add_one_shot_event_handler:function(a,b,c,e){var f=!1,g=function(c){f=!0;e&&e();a.removeEventListener(b,g)};a.addEventListener(b,g);setTimeout(function(){f||g()},c)},animate_to_absolute_position:function(a,b,e,f,g){var k=
$(a).offset(),l=$(a).position(),m=c.UTILITIES.distance(b,k);f||(f=.5);f=Math.round(m/f);$(a).addClass("toontalk-side-animating");a.style.transitionDuration=f+"ms";a.style.left=l.left+(b.left-k.left)+"px";a.style.top=l.top+(b.top-k.top)+"px";g||c.UTILITIES.add_one_shot_event_handler(a,"transitionend",f+500,function(){$(a).removeClass("toontalk-side-animating");a.style.transitionDuration=""});c.UTILITIES.add_one_shot_event_handler(a,"transitionend",f+500,e)},distance:function(a,b){var c=a.left-b.left,
e=a.top-b.top;return Math.sqrt(c*c+e*e)},highlight_element:function(a,b,e){var f;if(!$(a).is(".toontalk-highlight")&&(c.UTILITIES.remove_highlight(),f=c.UTILITIES.widget_from_jquery($(a)))){if(f.element_to_highlight&&b&&(a=f.element_to_highlight(b),!a))return;$(a).addClass("toontalk-highlight").css({"z-index":c.UTILITIES.next_z_index()});e&&setTimeout(function(){c.UTILITIES.remove_highlight()},e)}},remove_highlight:function(){$(".toontalk-highlight").removeClass("toontalk-highlight")},cursor_of_image:function(a){var b=
a.lastIndexOf(".");return 0<=b?a.substring(0,b)+".32x32"+a.substring(b):a},next_z_index:function(){g++;return g},create_button:function(a,b,c,e){a=$("<button>"+a+"</button>").button();a.addClass(b).click(e).attr("title",c);return a.get(0)},create_close_button:function(a,b){var c=document.createElement("div"),e=document.createElement("div");$(c).addClass("toontalk-close-button");$(c).click(a);$(c).attr("title",b);e.innerHTML="&times;";c.appendChild(e);return c},check_radio_button:function(a){$(a.button).prop("checked",
!0);$(a.label).addClass("ui-state-active")},create_button_set:function(){var a=document.createElement("div"),b,c;for(b=0;b<arguments.length;b++)if(0<=arguments[b].length)for(c=0;c<arguments[b].length;c++)a.appendChild(arguments[b][c]);else a.appendChild(arguments[b]);$(a).buttonset();return a},create_text_element:function(a){var b=document.createElement("div");b.textContent=a;$(b).addClass("ui-widget");return b},create_space:function(){var a=document.createElement("span");a.innerHTML="&nbsp;";$(a).addClass("ui-widget");
return a},create_anchor_element:function(a,b){var c=document.createElement("a");c.innerHTML=a;c.href=b;c.target="_blank";return c},create_text_input:function(a,b,e,f,g){var k=document.createElement("input"),l;k.type="text";k.className=b;k.value=a;k.title=f;e?(a=document.createElement("label"),a.innerHTML=e,k.id=c.UTILITIES.generate_unique_id(),a.htmlFor=k.id,g&&(l=c.UTILITIES.create_anchor_element("i",g),$(l).addClass("toontalk-help-button")),e=c.UTILITIES.create_horizontal_table(a,k,l),$(a).addClass("ui-widget")):
e=k;$(k).button().addClass("toontalk-text-input");$(k).css({"background-color":"white"});return{container:e,button:k}},create_text_area:function(a,b,e,f){var g=document.createElement("textarea");g.className=b;g.value=a;g.title=f;a=document.createElement("label");a.innerHTML=e;g.id=c.UTILITIES.generate_unique_id();a.htmlFor=g.id;e=c.UTILITIES.create_horizontal_table(a,g);$(g).button().addClass("toontalk-text-text_area");$(g).css({background:"white"});$(a).addClass("ui-widget");return{container:e,button:g}},
create_radio_button:function(a,b,e,f,g){var k=document.createElement("div"),l=document.createElement("input"),m=document.createElement("label");l.type="radio";l.className=e;l.name=a;l.value=b;m.innerHTML=f;l.id=c.UTILITIES.generate_unique_id();m.htmlFor=l.id;k.appendChild(l);k.appendChild(m);k.title=g;$(l).button();return{container:k,button:l,label:m}},create_check_box:function(a,b,e,f){var g=document.createElement("div"),k=document.createElement("input"),l=document.createElement("label");k.type=
"checkbox";k.className=b;k.checked=a;l.innerHTML=e;k.id=c.UTILITIES.generate_unique_id();l.htmlFor=k.id;$(l).addClass("ui-widget");g.appendChild(k);g.appendChild(l);g.title=f;return{container:g,button:k,label:l}},create_horizontal_table:function(){var a=document.createElement("table"),b,c,e;c=document.createElement("tr");a.appendChild(c);for(b=0;b<arguments.length;b++)arguments[b]&&(e=document.createElement("td"),c.appendChild(e),e.appendChild(arguments[b]));return a},create_vertical_table:function(){var a=
document.createElement("table"),b,e;for(b=0;b<arguments.length;b++)arguments[b]&&(e=c.UTILITIES.create_row(arguments[b]),a.appendChild(e));return a},create_row:function(){var a=document.createElement("tr"),b=document.createElement("td"),c;for(c=0;c<arguments.length;c++)a.appendChild(arguments[c]);b.appendChild(a);return a},create_table_entry:function(a){var b=document.createElement("td");b.appendChild(a);return b},selected_radio_button:function(){var a;for(a=0;a<arguments.length;a++)if(arguments[a].checked)return arguments[a]},
create_image:function(a,b){var c=document.createElement("img"),e;c.src=a;b&&$(c).addClass(b);0===a.indexOf("images/")&&(e=function(b){c.removeEventListener("error",e);c.src="http://toontalk.github.io/ToonTalk/"+a},c.addEventListener("error",e));return c},create_tabs:function(a,b){var c=document.createElement("div"),e=document.createElement("ul"),f;if(a.length!==b.length)return console.error("UTILITIES.create_tabs called with different length lists."),c;a.forEach(function(a,c){var g=document.createElement("li"),
h=document.createElement("a"),k;"string"===typeof a?(k=document.createElement("span"),k.innerHTML=a):k=a;f="tab-"+c;h.href="#"+f;h.appendChild(k);g.appendChild(h);e.appendChild(g);b[c].id=f});c.appendChild(e);b.forEach(function(a){c.appendChild(a)});$(c).tabs();return c},create_file_data_table:function(a,b,e){var f=document.createElement("table");$(f).DataTable({data:a,columns:[{data:"title",title:"Name",render:function(a,f,g,k){a=b?a.substring(0,a.length-5):a;f=b?c.google_drive.google_drive_url(g.id):
"Click to load this program.";return e?"<div class='"+e+"' title='"+f+"'id='"+g.id+"'>"+a+"</div>":"<a href='"+f+"'target='_blank' title='Click to open published page.'>"+a+"</a>"}},{data:"modifiedDate",title:"Modified",render:function(a,b,c,d){return(new Date(a)).toUTCString()}},{data:"createdDate",title:"Created",render:function(a,b,c,d){return(new Date(a)).toUTCString()}},{data:"fileSize",title:"Size"}]});$(f).addClass("toontalk-file-table");return f},create_local_files_table:function(a){a=c.UTILITIES.get_all_locally_stored_program_names().map(function(a){var b=
c.UTILITIES.get_local_storage_meta_data(a);if(b)return{title:a,modifiedDate:b.last_modified,createdDate:b.created,fileSize:b.file_size}});return c.UTILITIES.create_file_data_table(a,!1,"toontalk-file-load-button")},get_dragee:function(){return m},add_a_or_an:function(a,b){var c=a.charAt(0);return 0===a.indexOf("the ")?a:0>"aeiou".indexOf(c)?b?"A "+a:"a "+a:b?"An "+a:"an "+a},maximum_string_length:function(a,b){var c;if(a.length<=b)return a;c=a.substring(0,Math.round(.75*b));return c+" ... "+a.substring(a.length-
(b-c.length))},backup_all_top_level_widgets:function(a){$(".toontalk-top-level-backside").each(function(b,e){c.UTILITIES.widget_from_jquery($(e)).save(a)})},make_resizable:function(a,b){a.resizable({resize:function(c,e){a.find("img").css({width:e.size.width,height:e.size.height});b.render()},handles:"n,e,s,w"})},match:function(a,b){var c=a.match(b);return c.is_widget&&b.matched_by?b.matched_by(a):c},current_URL:function(){return window.location.pathname},absolute_file_path:function(a){var b=window.location.pathname,
c=b.lastIndexOf("ToonTalk/");return 0>c?a:b.substring(0,c+9)+a},copy_side:function(a,b,c){b=a.get_widget().copy(b);var e;c&&(c=a.get_widget().get_frontside_element())&&(e=b.get_frontside_element(!0),$(e).css({width:$(c).width(),height:$(c).height()}));return a.is_backside()?b.get_backside():b},scale_to_fit:function(a,b,c,e,f){var g=function(){$(a).css({transform:"scale("+l+", "+m+")","transform-origin":"top left",width:c,height:e})},k,l,m;c||(c=$(a).width());e||(e=$(a).height());$(b).is(".toontalk-backside")?
m=l=1:(k=$(b).width(),b=$(b).height(),l=k/c,m=b/e,0===l&&(l=1),0===m&&(m=1));f?setTimeout(g,f):g();return{x_scale:l,y_scale:m}},relative_position:function(a,b){var c=$(a).offset(),e;b&&(e=$(b).offset(),c.left-=e.left,c.top-=e.top);return c},add_animation_class:function(a,b){$(a).css({width:"",height:""}).addClass(b)},widget_from_jquery:function(a){if(0<a.length)return a.get(0).toontalk_widget},has_animating_image:function(a){a=$(a);return(a=a.css("animation")||a.css("webkit-animation")||a.css("moz-animation")||
a.css("ms-animation")||a.css("o-animation"))&&0!==a.indexOf("none")},display_message:function(a){console.error(a);alert(a)},report_internal_error:function(a){console.log(a);c.debugging&&c.UTILITIES.display_message(a)},get_current_url_boolean_parameter:function(a,b){return 0>window.location.href.indexOf(a+"=")?b:0<=window.location.href.indexOf(a+"=1")?!0:!1},is_browser_of_type:function(a){return 0<=window.navigator.userAgent.indexOf(a)},is_internet_explorer:function(){return c.UTILITIES.is_browser_of_type("MSIE")||
c.UTILITIES.is_browser_of_type("Trident")},remove_z_index:function(a){if(0===a.length||"<"!==a.charAt(0)||0>a.indexOf("z-index"))return a;a=$(a);a.attr("z-index","");return a.html()},add_test_all_button:function(){var a=$("#toontalk-test-all-button"),b;if(0!==a.length){a.button();b=a.get(0);b.innerHTML="Run all tests";var c=!1;a.click(function(a){c?($(".toontalk-stop-sign").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&$(this).click()}),b.innerHTML="Run all tests"):($(".toontalk-green-flag").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&
$(this).click()}),b.innerHTML="Stop all tests");c=!c})}},set_timeout:function(a,b){b?setTimeout(a,b):(e.push(a),window.postMessage("zero-timeout-message","*"))},get_all_locally_stored_program_names:function(){var a=window.localStorage.getItem("toontalk-all-program-names");return a?JSON.parse(a):[]},set_all_locally_stored_program_names:function(a){window.localStorage.setItem("toontalk-all-program-names",JSON.stringify(a))},get_local_storage_meta_data:function(a){a=c.UTILITIES.local_storage_program_meta_data_key(a);
var b;try{if(b=window.localStorage.getItem(a))return JSON.parse(b)}catch(e){}},local_storage_program_key:function(a){return"toontalk-json: "+a},local_storage_program_meta_data_key:function(a){return"toontalk-meta-data: "+a},enable_editor:function(a,b,c,e){(function(a,b){var c=function(a){a.data.editor_enabled_for&&a.data.editor_enabled_for===b&&(e=!0,window.removeEventListener("message",c))},d=function(a,b){e||setTimeout(function(){a();d(a,b)},500)},e=!1;window.addEventListener("message",c);d(a,b)})(function(){a.postMessage({save_edits_to:window.location.href,
file_id:c,widgets_json:e},"*")},c)},create_queue:function(){var a=[],b=0;return{getLength:function(){return a.length-b},isEmpty:function(){return 0==a.length},enqueue:function(b){a.push(b)},dequeue:function(){var c;if(0!=a.length)return c=a[b],2*++b>=a.length&&(a=a.slice(b),b=0),c},peek:function(){return 0<a.length?a[b]:void 0},does_any_item_satisfy:function(c){var e;for(e=b;e<a.length;e++)if(c(a[e]))return!0;return!1}}}}}(window.TOONTALK);window.TOONTALK.UTILITIES.available_types="number box element robot nest sensor top-level".split(" ");
