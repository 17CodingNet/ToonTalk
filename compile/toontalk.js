'use strict';(function(c){var n;"undefined"===typeof exports?"function"===typeof define&&"object"===typeof define.amd&&define.amd?(n={},define(function(){return n})):n="undefined"!==typeof window?window:c:n=exports;(function(b){var a={greatest_common_divisor:function(a,q){if(1===q||1===a)return 1;for(var b;0!==q;){b=q;q=a%q;if(!isFinite(q))return 0;a=b}return a}};a.gcd=a.greatest_common_divisor;a.fromRandom=function(a){return Math.random()*(1<<a)>>>0};a.fromMillitime=function(){return+new Date};a.fromUnixtime=
function(){return.001*a.fromMillitime()|0};"undefined"!==typeof b&&(b.integer=a);(function(a){function q(a,e,v){if(v!==b)return a instanceof q?a:"undefined"===typeof a?c:q.parse(a);for(a=a||[];a.length&&!a[a.length-1];)--a.length;this._d=a;this._s=a.length?e||1:0}var b={};q._construct=function(a,e){return new q(a,e,b)};q.base=1E7;q.base_log10=7;var c=new q([],0,b);q.ZERO=c;var e=new q([1],1,b);q.ONE=e;var d=new q(e._d,-1,b);q.M_ONE=d;q._0=c;q._1=e;q.small=[c,e,new q([2],1,b),new q([3],1,b),new q([4],
1,b),new q([5],1,b),new q([6],1,b),new q([7],1,b),new q([8],1,b),new q([9],1,b),new q([10],1,b),new q([11],1,b),new q([12],1,b),new q([13],1,b),new q([14],1,b),new q([15],1,b),new q([16],1,b),new q([17],1,b),new q([18],1,b),new q([19],1,b),new q([20],1,b),new q([21],1,b),new q([22],1,b),new q([23],1,b),new q([24],1,b),new q([25],1,b),new q([26],1,b),new q([27],1,b),new q([28],1,b),new q([29],1,b),new q([30],1,b),new q([31],1,b),new q([32],1,b),new q([33],1,b),new q([34],1,b),new q([35],1,b),new q([36],
1,b)];q.digits="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");q.prototype.toString=function(a){a=+a||10;if(2>a||36<a)throw Error("illegal radix "+a+".");if(0===this._s)return"0";if(10===a){a=0>this._s?"-":"";a+=this._d[this._d.length-1].toString();for(var b=this._d.length-2;0<=b;b--){for(var e=this._d[b].toString();7>e.length;)e="0"+e;a+=e}return a}b=q.digits;a=q.small[a];for(var e=this._s,v=this.abs(),c=[],d;0!==v._s;)d=v.divRem(a),v=d[0],d=d[1],c.push(b[d.valueOf()]);return(0>e?"-":"")+c.reverse().join("")};
q.radixRegex=[/^$/,/^$/,/^[01]*$/,/^[012]*$/,/^[0-3]*$/,/^[0-4]*$/,/^[0-5]*$/,/^[0-6]*$/,/^[0-7]*$/,/^[0-8]*$/,/^[0-9]*$/,/^[0-9aA]*$/,/^[0-9abAB]*$/,/^[0-9abcABC]*$/,/^[0-9a-dA-D]*$/,/^[0-9a-eA-E]*$/,/^[0-9a-fA-F]*$/,/^[0-9a-gA-G]*$/,/^[0-9a-hA-H]*$/,/^[0-9a-iA-I]*$/,/^[0-9a-jA-J]*$/,/^[0-9a-kA-K]*$/,/^[0-9a-lA-L]*$/,/^[0-9a-mA-M]*$/,/^[0-9a-nA-N]*$/,/^[0-9a-oA-O]*$/,/^[0-9a-pA-P]*$/,/^[0-9a-qA-Q]*$/,/^[0-9a-rA-R]*$/,/^[0-9a-sA-S]*$/,/^[0-9a-tA-T]*$/,/^[0-9a-uA-U]*$/,/^[0-9a-vA-V]*$/,/^[0-9a-wA-W]*$/,
/^[0-9a-xA-X]*$/,/^[0-9a-yA-Y]*$/,/^[0-9a-zA-Z]*$/];q.parse=function(a,e){function v(a){a=a.replace(/\s*[*xX]\s*10\s*(\^|\*\*)\s*/,"e");return a.replace(/^([+\-])?(\d+)\.?(\d*)[eE]([+\-]?\d+)$/,function(a,b,q,e,v){v=+v;var c=0>v,d=q.length+v;a=(c?q:e).length;v=(v=Math.abs(v))>=a?v-a+c:0;a=Array(v+1).join("0");q+=e;return(b||"")+(c?q=a+q:q+=a).substr(0,d+=c?a.length:0)+(d<q.length?"."+q.substr(d):"")})}a=a.toString();if("undefined"===typeof e||10===+e)a=v(a);var d=RegExp("^([+\\-]?)("+("undefined"===
typeof e?"0[xcb]":16==e?"0x":8==e?"0c":2==e?"0b":"")+")?([0-9a-z]*)(?:\\.\\d*)?$","i").exec(a);if(d){var h=d[1]||"+",f=d[2]||"",d=d[3]||"";if("undefined"===typeof e)e="0x"===f||"0X"===f?16:"0c"===f||"0C"===f?8:"0b"===f||"0B"===f?2:10;else if(2>e||36<e)throw Error("Illegal radix "+e+".");e=+e;if(!q.radixRegex[e].test(d))throw Error("Bad digit for radix "+e);d=d.replace(/^0+/,"").split("");if(0===d.length)return c;h="-"===h?-1:1;if(10==e){for(f=[];7<=d.length;)f.push(parseInt(d.splice(d.length-q.base_log10,
q.base_log10).join(""),10));f.push(parseInt(d.join(""),10));return new q(f,h,b)}f=c;e=q.small[e];for(var g=q.small,p=0;p<d.length;p++)f=f.multiply(e).add(g[parseInt(d[p],36)]);return new q(f._d,h,b)}throw Error("Invalid BigInteger format: "+a);};q.prototype.add=function(a){if(0===this._s)return q(a);a=q(a);if(0===a._s)return this;if(this._s!==a._s)return a=a.negate(),this.subtract(a);var e=this._d;a=a._d;for(var v=e.length,c=a.length,d=Array(Math.max(v,c)+1),h=Math.min(v,c),f=0,p=0;p<h;p++)f=e[p]+
a[p]+f,d[p]=f%1E7,f=f/1E7|0;c>v&&(e=a,v=c);for(p=h;f&&p<v;p++)f=e[p]+f,d[p]=f%1E7,f=f/1E7|0;for(f&&(d[p]=f);p<v;p++)d[p]=e[p];return new q(d,this._s,b)};q.prototype.negate=function(){return new q(this._d,-this._s|0,b)};q.prototype.abs=function(){return 0>this._s?this.negate():this};q.prototype.subtract=function(a){if(0===this._s)return q(a).negate();a=q(a);if(0===a._s)return this;if(this._s!==a._s)return a=a.negate(),this.add(a);var e=this;0>this._s&&(e=new q(a._d,1,b),a=new q(this._d,1,b));var v=
e.compareAbs(a);if(0===v)return c;if(0>v){var d=a;a=e;e=d}e=e._d;a=a._d;var d=e.length,h=a.length,f=Array(d),p=0,g,l;for(g=0;g<h;g++)l=e[g]-p-a[g],0>l?(l+=1E7,p=1):p=0,f[g]=l;for(g=h;g<d;g++){l=e[g]-p;if(0>l)l+=1E7;else{f[g++]=l;break}f[g]=l}for(;g<d;g++)f[g]=e[g];return new q(f,v,b)};(function(){function a(e,v){for(var c=e._d,d=c.slice(),h=0;;){var f=(c[h]||0)+1;d[h]=f%1E7;if(9999999>=f)break;++h}return new q(d,v,b)}function v(a,e){for(var c=a._d,d=c.slice(),h=0;;){var f=(c[h]||0)-1;if(0>f)d[h]=
f+1E7;else{d[h]=f;break}++h}return new q(d,e,b)}q.prototype.next=function(){switch(this._s){case 0:return e;case -1:return v(this,-1);default:return a(this,1)}};q.prototype.prev=function(){switch(this._s){case 0:return d;case -1:return a(this,-1);default:return v(this,1)}}})();q.prototype.compareAbs=function(a){if(this===a)return 0;if(!(a instanceof q)){if(!isFinite(a))return isNaN(a)?a:-1;a=q(a)}if(0===this._s)return 0!==a._s?-1:0;if(0===a._s)return 1;var b=this._d.length,e=a._d.length;if(b<e)return-1;
if(b>e)return 1;e=this._d;a=a._d;for(--b;0<=b;b--)if(e[b]!==a[b])return e[b]<a[b]?-1:1;return 0};q.prototype.compare=function(a){if(this===a)return 0;a=q(a);return 0===this._s?-a._s:this._s===a._s?this.compareAbs(a)*this._s:this._s};q.prototype.isUnit=function(){return this===e||this===d||1===this._d.length&&1===this._d[0]};q.prototype.multiply=function(a){if(0===this._s)return c;a=q(a);if(0===a._s)return c;if(this.isUnit())return 0>this._s?a.negate():a;if(a.isUnit())return 0>a._s?this.negate():this;
if(this===a)return this.square();var e=this._d.length>=a._d.length,v=(e?this:a)._d,e=(e?a:this)._d,d=v.length,h=e.length,f=d+h,p=Array(f),g;for(g=0;g<f;g++)p[g]=0;for(g=0;g<h;g++){for(var f=0,l=e[g],k=d+g,z,r=g;r<k;r++)z=p[r]+l*v[r-g]+f,f=z/1E7|0,p[r]=z%1E7|0;f&&(z=p[r]+f,p[r]=z%1E7)}return new q(p,this._s*a._s,b)};q.prototype.multiplySingleDigit=function(a){if(0===a||0===this._s)return c;if(1===a)return this;var e;if(1===this._d.length)return e=this._d[0]*a,1E7<=e?new q([e%1E7|0,e/1E7|0],1,b):new q([e],
1,b);if(2===a)return this.add(this);if(this.isUnit())return new q([a],1,b);var v=this._d,d=v.length;e=d+1;for(var h=Array(e),f=0;f<e;f++)h[f]=0;for(var g=f=0;g<d;g++)e=a*v[g]+f,f=e/1E7|0,h[g]=e%1E7|0;f&&(h[g]=f);return new q(h,1,b)};q.prototype.square=function(){if(0===this._s)return c;if(this.isUnit())return e;var a=this._d,v=a.length,d=Array(v+v+1),f,h,g,p;for(p=0;p<v;p++)g=2*p,f=a[p]*a[p],h=f/1E7|0,d[g]=f%1E7,d[g+1]=h;for(p=0;p<v;p++){h=0;g=2*p+1;for(var l=p+1;l<v;l++,g++)f=a[l]*a[p]*2+d[g]+h,
h=f/1E7|0,d[g]=f%1E7;g=v+p;f=h+d[g];h=f/1E7|0;d[g]=f%1E7;d[g+1]+=h}return new q(d,1,b)};q.prototype.quotient=function(a){return this.divRem(a)[0]};q.prototype.divide=q.prototype.quotient;q.prototype.remainder=function(a){return this.divRem(a)[1]};q.prototype.divRem=function(a){a=q(a);if(0===a._s)throw Error("Divide by zero");if(0===this._s)return[c,c];if(1===a._d.length)return this.divRemSmall(a._s*a._d[0]);switch(this.compareAbs(a)){case 0:return[this._s===a._s?e:d,c];case -1:return[c,this]}var v=
this._s*a._s,f=a.abs(),h=this._d,g=h.length,l=[],k,z=new q([],0,b);for(z._s=1;g;)if(z._d.unshift(h[--g]),0>z.compareAbs(a))l.push(0);else{if(0===z._s)k=0;else{var r=z._d.length;k=f._d.length;r=1E7*z._d[r-1]+z._d[r-2];k=1E7*f._d[k-1]+f._d[k-2];z._d.length>f._d.length&&(r=1E7*(r+1));k=Math.ceil(r/k)}do{r=f.multiplySingleDigit(k);if(0>=r.compareAbs(z))break;k--}while(k);l.push(k);k&&(k=z.subtract(r),z._d=k._d.slice(),0===z._d.length&&(z._s=0))}return[new q(l.reverse(),v,b),new q(z._d,this._s,b)]};q.prototype.divRemSmall=
function(a){a=+a;if(0===a)throw Error("Divide by zero");var e=this._s*(0>a?-1:1);a=Math.abs(a);if(1>a||1E7<=a)throw Error("Argument out of range");if(0===this._s)return[c,c];if(1===a||-1===a)return[1===e?this.abs():new q(this._d,e,b),c];if(1===this._d.length){var v=new q([this._d[0]/a|0],1,b);a=new q([this._d[0]%a|0],1,b);0>e&&(v=v.negate());0>this._s&&(a=a.negate());return[v,a]}for(var d=this._d.slice(),v=Array(d.length),f=0,h=0,g=0,p;d.length;)f=1E7*f+d[d.length-1],f<a?(v[g++]=0,d.pop(),h=1E7*h+
f):(p=0===f?0:f/a|0,h=f-a*p,(v[g++]=p)?(d.pop(),f=h):d.pop());a=new q([h],1,b);0>this._s&&(a=a.negate());return[new q(v.reverse(),e,b),a]};q.prototype.isEven=function(){var a=this._d;return 0===this._s||0===a.length||0===a[0]%2};q.prototype.isOdd=function(){return!this.isEven()};q.prototype.sign=function(){return this._s};q.prototype.isPositive=function(){return 0<this._s};q.prototype.isNegative=function(){return 0>this._s};q.prototype.isZero=function(){return 0===this._s};q.prototype.exp10=function(a){a=
+a;if(0===a)return this;if(Math.abs(a)>Number(h))throw Error("exponent too large in BigInteger.exp10");if(0<a){for(var e=new q(this._d.slice(),this._s,b);7<=a;a-=7)e._d.unshift(0);if(0==a)return e;e._s=1;e=e.multiplySingleDigit(Math.pow(10,a));return 0>this._s?e.negate():e}if(-a>=7*this._d.length)return c;e=new q(this._d.slice(),this._s,b);for(a=-a;7<=a;a-=7)e._d.shift();return 0==a?e:e.divRemSmall(Math.pow(10,a))[0]};q.prototype.pow=function(a){if(this.isUnit())return 0<this._s?this:q(a).isOdd()?
this:this.negate();a=q(a);if(0===a._s)return e;if(0>a._s){if(0===this._s)throw Error("Divide by zero");return c}if(0===this._s)return c;if(a.isUnit())return this;if(0<a.compareAbs(h))throw Error("exponent too large in BigInteger.pow");for(var b=this,v=e,d=q.small[2];a.isPositive()&&(!a.isOdd()||(v=v.multiply(b),!a.isUnit()));)b=b.square(),a=a.quotient(d);return v};q.prototype.modPow=function(a,b){for(var v=e,c=this;a.isPositive();)a.isOdd()&&(v=v.multiply(c).remainder(b)),a=a.quotient(q.small[2]),
a.isPositive()&&(c=c.square().remainder(b));return v};q.prototype.log=function(){switch(this._s){case 0:return-Infinity;case -1:return NaN}var a=this._d.length;if(30>7*a)return Math.log(this.valueOf());var e=Math.ceil(30/7),v=this._d.slice(a-e);return Math.log((new q(v,1,b)).valueOf())+(a-e)*Math.log(1E7)};q.prototype.valueOf=function(){return parseInt(this.toString(),10)};q.prototype.toJSValue=function(){return parseInt(this.toString(),10)};var h=q(2147483647);q.MAX_EXP=h;(function(){function a(b){return function(a){return b.call(q(a))}}
function b(a){return function(b,e){return a.call(q(b),q(e))}}function e(a){return function(b,e,v){return a.call(q(b),q(e),q(v))}}(function(){var v,c,d="toJSValue isEven isOdd sign isZero isNegative abs isUnit square negate isPositive toString next prev log".split(" "),f="compare remainder divRem subtract add quotient divide multiply pow compareAbs".split(" "),h=["modPow"];for(v=0;v<d.length;v++)c=d[v],q[c]=a(q.prototype[c]);for(v=0;v<f.length;v++)c=f[v],q[c]=b(q.prototype[c]);for(v=0;v<h.length;v++)c=
h[v],q[c]=e(q.prototype[c]);q.exp10=function(a,b){return q(a).exp10(b)}})()})();a.BigInteger=q})("undefined"!==typeof b?b:this);var c={greatest_common_divisor:function(a,b){if(b.isUnit()||a.isUnit())return BigInteger.ONE;for(var c;!b.isZero();)c=b,b=a.remainder(b),a=c;return a},create:function(){return[0]},clone:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b},copy:function(a,b){a=[];for(var c=0,d=b.length;c<d;c++)a[c]=b[c];return a},abs:function(a,b){a[0]=Math.abs(b[0]);return a},
str:function(a){return a[0].toString()},toInteger:function(a){return out[0]},fromInteger:function(a){return[parseInt(a)]}};c.ZERO=c.fromInteger(0);c.ONE=c.fromInteger(1);"undefined"!==typeof b&&(b.bigint=c);if(!f)var f=Array;if(!d)var d=Math.pow(2,56);if(!r)var r=16777216;var g={EPSILON:2E-16};g.MAX_LOOPS=r;g.create=function(){var a=new f(2);a[0]=0;a[1]=1;return a};g.clone=function(a){var b=new f(2);b[0]=a[0];b[1]=a[1];return b};g.fromValues=function(a,b){var c=new f(2);c[0]=a;c[1]=b;return g.normalize(c,
c)};g.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};g.set=function(a,b,c){a[0]=b;a[1]=c;return g.normalize(a,a)};g.abs=function(a,b){a[0]=Math.abs(b[0]);a[1]=b[1];return a};g.invert=function(a,b){var c=b[0];a[0]=b[1];a[1]=c;return a};g.reciprocal=g.invert;g.add=function(a,b,c){b[1]===c[1]?(a[0]=b[0]+c[0],a[1]=b[1]):(a[0]=b[0]*c[1]+c[0]*b[1],a[1]=b[1]*c[1]);return g.normalize(a,a)};g.subtract=function(a,b,c){b[1]===c[1]?(a[0]=b[0]-c[0],a[1]=b[1]):(a[0]=b[0]*c[1]-c[0]*b[1],a[1]=b[1]*c[1]);return g.normalize(a,
a)};g.sub=g.subtract;g.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return g.normalize(a,a)};g.mul=g.multiply;g.mediant=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return g.normalize(a,a)};g.divide=function(a,b,c){a[0]=b[0]*c[1];a[1]=b[1]*c[0];return g.normalize(a,a)};g.div=g.divide;g.equals=function(a,b){return 0===a[0]&&0===b[0]||0===a[1]&&0===b[1]?!0:a[0]===b[0]&&a[1]===b[1]};g.approximates=function(a,b){if(g.equals(a,b))return!0;var c=g.create();g.sub(c,a,b);g.abs(c,c);return g.isLessThan(c,
g.INFINITESIMAL)};g.isGreaterThan=function(a,b){return g.equals(a,b)?!1:a[0]*b[1]>b[0]*a[1]};g.isLessThan=function(a,b){return g.equals(a,b)?!1:a[0]*b[1]<b[0]*a[1]};g.isNegative=function(a){return 0>a[0]};g.min=function(a,b,c){g.isLessThan(b,c)?(a[0]=b[0],a[1]=b[1]):(a[0]=c[0],a[1]=c[1]);return a};g.max=function(a,b,c){g.isGreaterThan(b,c)?(a[0]=b[0],a[1]=b[1]):(a[0]=c[0],a[1]=c[1]);return a};g.scalar_multiply=function(a,b,c){a[0]=b[0]*c;a[1]=b[1];return g.normalize(a,a)};g.scalar_divide=function(a,
b,c){a[0]=b[0];a[1]=b[1]*c;return g.normalize(a,a)};g.normalize=function(b,c){if(isNaN(c[0])||isNaN(c[1])||0===c[0]&&0===c[1])return b[0]=0,b[1]=0,b;if(0===c[0])return b[0]=0,b[1]=1,b;if(0===c[1])return b[0]=1,b[1]=0,b;if(c[0]===c[1])return b[0]=1,b[1]=1,b;0<c[1]?(b[0]=c[0],b[1]=c[1]):(b[0]=-c[0],b[1]=-c[1]);var d=a.greatest_common_divisor(Math.abs(b[0]),b[1]);1<d&&(b[0]/=d,b[1]/=d);return b};g.opposite=function(a,b){a[0]=-b[0];a[1]=b[1];return a};g.negative=g.opposite;g.neg=g.opposite;g.power=function(a,
b,c){2===c?(a[0]=b[0]*b[0],a[1]=b[1]*b[1]):0<c?(a[0]=Math.pow(b[0],c),a[1]=Math.pow(b[1],c)):0>c?(c=Math.abs(c),a[0]=Math.pow(b[1],c),a[1]=Math.pow(b[0],c)):g.copy(a,g.ONE);return g.normalize(a,a)};g.pow=g.power;g.sqrt=function(a,b){return g.nthRoot(a,b,2)};g.nthRoot=function(a,b,c){if(g.equals(b,g.ZERO))return g.copy(a,g.ZERO);if(g.equals(b,g.ONE))return g.copy(a,g.ONE);if(g.equals(b,g.INFINITY))return g.copy(a,g.INFINITY);if(g.equals(b,g.INFINULL))return g.copy(a,g.INFINULL);var d=g.isNegative(b);
d&&(b[0]=-b[0]);a=g.copy(a,g.ONE);for(var e=[1,0,0,1],f=g.clone(g.ONE),h=g.MAX_LOOPS;!g.approximates(b,f)&&h--;)g.isLessThan(b,f)?(e[0]+=e[1],e[2]+=e[3]):(e[1]+=e[0],e[3]+=e[2]),a[0]=e[0]+e[1],a[1]=e[2]+e[3],g.pow(f,a,c);d&&(b[0]=-b[0],1===c%2&&g.neg(a,a));return a};g.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};g.str=function(a){return 1===a[1]?a[0].toString():a[0]+"/"+a[1]};g.toDecimal=function(a){return a[0]/a[1]};g.dec=g.toDecimal;g.toInteger=function(a){return Math.round(g.toDecimal(a))};g.round=
g.toInteger;g.floor=function(a){return Math.floor(g.toDecimal(a))};g.ceil=function(a){return Math.ceil(g.toDecimal(a))};g.fromInteger_copy=function(a,b){a[0]=parseInt(b);a[1]=1;return a};g.fromInteger=function(a){return g.fromInteger_copy(g.create(),a)};g.fromIntegerInverse_copy=function(a,b){a[0]=1;a[1]=parseInt(b);0>a[1]&&(a[0]=-a[0],a[1]=-a[1]);return a};g.fromIntegerInverse=function(a){return g.fromIntegerInverse_copy(g.create(),a)};g.fromDecimal=function(a){return g.fromDecimal_copy(g.create(),
a)};g.fromDecimal_copy=function(a,b){b=parseFloat(b);if(isNaN(b))return g.copy(a,g.INFINULL);if(Infinity===b)return g.copy(a,g.INFINITY);if(Math.abs(b)<g.EPSILON)return g.copy(a,g.ZERO);if(Math.abs(b-1)<g.EPSILON)return g.copy(a,g.ONE);if(Math.abs(b%1)<g.EPSILON)return g.fromInteger_copy(a,b);if(Math.abs(1/b%1)<g.EPSILON)return g.fromIntegerInverse_copy(a,Math.round(1/b));g.copy(a,g.ONE);for(var c=[1,0,0,1],d=b,e=1,f=g.MAX_LOOPS;f--&&Math.abs(b-g.toDecimal(a))>g.EPSILON;)e=Math.floor(d),a[0]=e*c[0]+
c[2],a[1]=e*c[1]+c[3],d=1/(d-e),c[2]=c[0],c[3]=c[1],c[0]=a[0],c[1]=a[1];return a};g.fromRandom=function(a){a[0]=0xfffffffffffff*Math.random()<<0;a[1]=Math.abs(0xfffffffffffff*Math.random()<<0);return g.normalize(a,a)};g.sin=function(a,b){if(0===b[1])return g.copy(a,g.ZERO);g.scalar_multiply(a,b,2);var c=g.create();g.pow(c,b,2);g.add(c,c,g.ONE);g.divide(a,a,c);return a};g.cos=function(a,b){if(0===b[1])return g.neg(a,g.ONE);var c=g.create();g.pow(c,b,2);g.sub(a,g.ONE,c);var d=g.create();g.add(d,g.ONE,
c);g.divide(a,a,d);return a};g.tan=function(a,b){g.scalar_multiply(a,b,2);var c=g.create();g.pow(c,b,2);g.scalar_multiply(c,c,2);g.add(a,a,c);g.pow(c,b,4);g.sub(c,g.ONE,c);g.divide(a,a,c);return a};g.toEgyptian=function(a){a=g.clone(a);g.abs(a,a);var b=g.floor(a);b&&g.sub(a,a,g.fromInteger(b));if(!a[0])return b.toString();b||(b="");for(var c=1,d=g.create();1!==a[0];)c++,d=g.fromValues(1,c),g.isGreaterThan(a,d)&&(b&&(b+=" + "),b+=g.str(d),g.sub(a,a,d));return a?b?b+" + "+g.str(a):g.str(a):b?b:"0"};
g.toBabylonian=function(a){var b="",c=g.toDecimal(a);a=parseInt(c);for(var c=c-a,d=0,e=0;0<a;)(d=a%60)&&(b=d+" * 60^"+e+(b?" + ":"")+b),a=(a-d)/60,e++;for(e=-1;0<c;)c*=60,d=parseInt(c+1E-13),c-=d,-1E-13>c||(d&&(b+=(b?" + ":"")+d+" * 60^"+e),e--);return b?b:"0"};g.traceSternBrocot=function(a){var b="";if(g.equals(a,g.ZERO)||g.equals(a,g.ONE)||g.equals(a,g.INFINITY)||g.equals(a,g.INFINULL))return b;if(g.equals(a,g.ZERO))return g.copy(out,g.ZERO);if(g.equals(a,g.ONE))return g.copy(out,g.ONE);if(g.equals(a,
g.INFINITY))return g.copy(out,g.INFINITY);if(g.equals(a,g.INFINULL))return g.copy(out,g.INFINULL);a=g.clone(a);g.isNegative(a)&&(a[0]=-a[0]);for(var c=g.clone(g.ONE),d=[1,0,0,1],e=0,f=0,h=g.MAX_LOOPS;!g.approximates(a,c)&&h--;)g.isLessThan(a,c)?(d[0]+=d[1],d[2]+=d[3],f++,e&&(b+="R",1!==e&&(b+=e),e=0,b+=" ")):(d[1]+=d[0],d[3]+=d[2],e++,f&&(b+="L",1!==f&&(b+=f),f=0,b+=" ")),c[0]=d[0]+d[1],c[1]=d[2]+d[3];f?(b+="L",1!==f&&(b+=f)):e&&(b+="R",1!==e&&(b+=e));0>h&&(b+="...");return b};g.toContinuedFraction=
function(a,b){b="undefined"===typeof b?65536:parseInt(b);if(g.equals(a,g.ZERO))return[0];if(g.equals(a,g.ONE))return[1];if(g.equals(a,g.NEGONE))return[-1];if(g.equals(a,g.INFINITY))return[1,0];if(g.equals(a,g.INFINULL))return[0,0];var c=g.clone(a),d=g.isNegative(c);d&&(c[0]=-c[0]);for(var e=g.clone(g.ONE),f=[1,0,0,1],h=1,l=[0],k=l.length-1;!g.equals(c,e)&&b--;)g.isLessThan(c,e)?(-1===h?l[k]++:(h=-1,l.push(1),k++),f[0]+=f[1],f[2]+=f[3]):(1===h?l[k]++:(h=1,l.push(1),k++),f[1]+=f[0],f[3]+=f[2]),e[0]=
f[0]+f[1],e[1]=f[2]+f[3];0>b?l.push(0):l[k]++;if(d)for(var r in l)l[r]=-l[r];return l};g.fromContinuedFraction=function(a,b){g.fromInteger_copy(a,b[b.length-1]);for(var c=b.length-2;-1<c;c--)g.invert(a,a),g.add(a,g.fromInteger(b[c]),a);return a};g.dump=function(a){g.create();return"rat\t"+g.str(a)+"\n~\t"+g.toDecimal(a)+"\nCF:\t["+g.toContinuedFraction(a)+"]\n"};g.ZERO=g.fromInteger(0);g.ONE=g.fromInteger(1);g.NEGONE=g.fromInteger(-1);g.INFINITY=g.fromValues(1,0);g.INFINULL=g.fromValues(0,0);g.INFINITESIMAL=
g.clone([1,d]);g.PI=g.fromValues(1320192667429,420230377710);"undefined"!==typeof b&&(b.rat=g);if(!l)var l=new BigInteger("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");if(!n)var n=1073741824;var h={EPSILON:2E-16};h.MAX_LOOPS=n;h.create=function(){var a=[];a[0]=BigInteger.ZERO;a[1]=BigInteger.ONE;return a};h.clone=function(a){var b=[];b[0]=a[0];b[1]=a[1];return b};h.fromValues=function(a,b){var c=[];c[0]=new BigInteger(a);c[1]=new BigInteger(b);return h.normalize(c,c)};h.copy=function(a,b){a[0]=b[0];a[1]=
b[1];return a};h.set=function(a,b,c){a[0]=b;a[1]=c;return h.normalize(a,a)};h.toRat=function(a,b){return g.set(a,b[0].toJSValue(),b[1].toJSValue())};h.fromRat=function(a,b){return h.set(a,BigInteger(b[0]),BigInteger(b[1]))};h.abs=function(a,b){a[0]=b[0].abs();a[1]=b[1];return a};h.invert=function(a,b){var c=b[0];a[0]=b[1];a[1]=c;return a};h.reciprocal=h.invert;h.add=function(a,b,c){0===b[1].compare(c[1])?(a[0]=b[0].add(c[0]),a[1]=b[1]):(a[0]=b[0].multiply(c[1]).add(c[0].multiply(b[1])),a[1]=b[1].multiply(c[1]));
return h.normalize(a,a)};h.subtract=function(a,b,c){0===b[1].compare(c[1])?(a[0]=b[0].subtract(c[0]),a[1]=b[1]):(a[0]=b[0].multiply(c[1]).subtract(c[0].multiply(b[1])),a[1]=b[1].multiply(c[1]));return h.normalize(a,a)};h.sub=h.subtract;h.multiply=function(a,b,c){a[0]=b[0].multiply(c[0]);a[1]=b[1].multiply(c[1]);return h.normalize(a,a)};h.mul=h.multiply;h.mediant=function(a,b,c){a[0]=b[0].add(c[0]);a[1]=b[1].add(c[1]);return h.normalize(a,a)};h.divide=function(a,b,c){a[0]=b[0].multiply(c[1]);a[1]=
b[1].multiply(c[0]);return h.normalize(a,a)};h.div=h.divide;h.equals=function(a,b){return a[0].isZero()&&b[0].isZero()||a[1].isZero()&&b[1].isZero()?!0:0===a[0].compare(b[0])&&0===a[1].compare(b[1])};h.approximates=function(a,b){if(h.equals(a,b))return!0;var c=h.create();h.sub(c,a,b);h.abs(c,c);return h.isLessThan(c,h.INFINITESIMAL)};h.isGreaterThan=function(a,b){return h.equals(a,b)?!1:0<a[0].multiply(b[1]).compare(b[0].multiply(a[1]))};h.isLessThan=function(a,b){return h.equals(a,b)?!1:0>a[0].multiply(b[1]).compare(b[0].multiply(a[1]))};
h.isNegative=function(a){return a[0].isNegative()};h.min=function(a,b,c){h.isLessThan(b,c)?(a[0]=b[0],a[1]=b[1]):(a[0]=c[0],a[1]=c[1]);return a};h.max=function(a,b,c){h.isGreaterThan(b,c)?(a[0]=b[0],a[1]=b[1]):(a[0]=c[0],a[1]=c[1]);return a};h.scalar_multiply=function(a,b,c){a[0]=b[0].multiply(c);a[1]=b[1];return h.normalize(a,a)};h.scalar_divide=function(a,b,c){a[0]=b[0];a[1]=b[1].multiply(c);return h.normalize(a,a)};h.normalize=function(a,b){if(b[0].isZero()||b[1].isZero())return b;if(0===b[0].compare(b[1]))return h.clone(h.ONE);
if(b[1].isNegative())a[0]=b[0].negate(),a[1]=b[1].negate();else if(a[0]=b[0],a[1]=b[1],a[1].isZero())return a;var d=c.greatest_common_divisor(a[0].abs(),a[1]);0<d.compare(BigInteger.ONE)&&(a[0]=a[0].quotient(d),a[1]=a[1].quotient(d));return a};h.opposite=function(a,b){a[0]=b[0].negate();a[1]=b[1];return a};h.negative=h.opposite;h.neg=h.opposite;h.power=function(a,b,c){2===c?(a[0]=b[0].square(),a[1]=b[1].square()):0<c?(a[0]=b[0].pow(c),a[1]=b[1].pow(c)):0>c?(c=Math.abs(c),a[0]=b[1].pow(c),a[1]=b[0].pow(c)):
h.copy(a,h.ONE);return a};h.pow=h.power;h.sqrt=function(a,b){return h.nthRoot(a,b,2)};h.nthRoot=function(a,b,c){if(h.equals(b,h.ZERO))return h.copy(a,h.ZERO);if(h.equals(b,h.ONE))return h.copy(a,h.ONE);if(h.equals(b,h.INFINITY))return h.copy(a,h.INFINITY);if(h.equals(b,h.INFINULL))return h.copy(a,h.INFINULL);var d=h.isNegative(b);d&&(b[0]=b[0].negate());h.copy(a,h.ONE);for(var e=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],f=h.clone(h.ONE),g=n;!h.approximates(b,f)&&g--;)h.isLessThan(b,
f)?(e[0]=e[0].add(e[1]),e[2]=e[2].add(e[3])):(e[1]=e[1].add(e[0]),e[3]=e[3].add(e[2])),a[0]=e[0].add(e[1]),a[1]=e[2].add(e[3]),h.pow(f,a,c);d&&(b[0]=b[0].negate(),1===c%2&&h.neg(a,a));return a};h.dot=function(a,b){return a[0].multiply(b[0]).add(a[1].multiply(b[1]))};h.str=function(a){return 0===a[1].compare(BigInteger.ONE)?a[0].toString():a[0].toString()+"/"+a[1].toString()};h.toDecimal=function(a){return a[0].toJSValue()/a[1].toJSValue()};h.dec=h.toDecimal;h.toInteger=function(a){return a[0].quotient(a[1]).toJSValue()};
h.round=h.toInteger;h.toBigInteger=function(a){return a[0].quotient(a[1])};h.floor=function(a){return Math.floor(h.toDecimal(a))};h.ceil=function(a){return Math.ceil(h.toDecimal(a))};h.fromInteger_copy=function(a,b){a[0]=BigInteger(b);a[1]=BigInteger.ONE;return a};h.fromInteger=function(a){return h.fromInteger_copy(h.create(),a)};h.fromIntegerInverse_copy=function(a,b){a[0]=BigInteger.ONE;a[1]=BigInteger(b);a[1].isNegative()&&(a[0]=a[0].negate(),a[1]=a[1].negate());return a};h.fromIntegerInverse=
function(a){return h.fromIntegerInverse_copy(h.create(),a)};h.fromDecimal=function(a){return h.fromDecimal_copy(h.create(),a)};h.fromDecimal_copy=function(a,b){b=parseFloat(b);if(isNaN(b))return h.copy(a,h.INFINULL);if(Infinity===b)return h.copy(a,h.INFINITY);if(Math.abs(b)<h.EPSILON)return h.copy(a,h.ZERO);if(Math.abs(b-1)<h.EPSILON)return h.copy(a,h.ONE);if(Math.abs(b%1)<h.EPSILON)return h.fromInteger_copy(a,b);if(Math.abs(1/b%1)<h.EPSILON)return h.fromIntegerInverse_copy(a,Math.round(1/b));h.copy(a,
h.ONE);for(var c=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],d=b,e=1,f=h.MAX_LOOPS;f--&&Math.abs(b-h.toDecimal(a))>h.EPSILON;)e=Math.floor(d),a[0]=BigInteger(e*c[0]+c[2]),a[1]=BigInteger(e*c[1]+c[3]),d=1/(d-e),c[2]=c[0],c[3]=c[1],c[0]=a[0],c[1]=a[1];return a};h.fromRandom=function(a){a[0]=BigInteger(0xfffffffffffff*Math.random()<<0);a[1]=BigInteger(Math.abs(0xfffffffffffff*Math.random()<<0));return h.normalize(a,a)};h.sin=function(a,b){if(b[1].isZero())return h.copy(a,h.ZERO);h.scalar_multiply(a,
b,2);var c=h.create();h.pow(c,b,2);h.add(c,c,h.ONE);h.divide(a,a,c);return a};h.cos=function(a,b){if(b[1].isZero())return h.neg(a,h.ONE);var c=h.create();h.pow(c,b,2);h.sub(a,h.ONE,c);var d=h.create();h.add(d,h.ONE,c);h.divide(a,a,d);return a};h.tan=function(a,b){h.scalar_multiply(a,b,2);var c=h.create();h.pow(c,b,2);h.scalar_multiply(c,c,2);h.add(a,a,c);h.pow(c,b,4);h.sub(c,h.ONE,c);h.divide(a,a,c);return a};h.toEgyptian=function(a){a=h.clone(a);h.abs(a,a);var b=h.floor(a);b&&h.sub(a,a,h.fromInteger(b));
if(!a[0])return b.toString();b||(b="");for(var c=1,d=h.create();1!==a[0];)c++,d=h.fromValues(1,c),h.isGreaterThan(a,d)&&(b&&(b+=" + "),b+=h.str(d),h.sub(a,a,d));return a?b?b+" + "+h.str(a):h.str(a):b?b:"0"};h.toBabylonian=function(a){var b="",c=h.toDecimal(a);a=parseInt(c);for(var c=c-a,d=0,e=0;0<a;)(d=a%60)&&(b=d+" * 60^"+e+(b?" + ":"")+b),a=(a-d)/60,e++;for(e=-1;0<c;)c*=60,d=parseInt(c+1E-13),c-=d,-1E-13>c||(d&&(b+=(b?" + ":"")+d+" * 60^"+e),e--);return b?b:"0"};h.traceSternBrocot=function(a){var b=
"";if(h.equals(a,h.ZERO)||h.equals(a,h.ONE)||h.equals(a,h.INFINITY)||h.equals(a,h.INFINULL))return b;a=h.clone(a);h.isNegative(a)&&(a[0]=a[0].negate());for(var c=h.clone(h.ONE),d=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],e=0,f=0,g=65536;!h.equals(a,c)&&g--;)h.isLessThan(a,c)?(d[0]=d[0].add(d[1]),d[2]=d[2].add(d[3]),f++,e&&(b+="R",1!==e&&(b+=e),e=0,b+=" ")):(d[1]=d[1].add(d[0]),d[3]=d[3].add(d[2]),e++,f&&(b+="L",1!==f&&(b+=f),f=0,b+=" ")),c[0]=d[0].add(d[1]),c[1]=d[2].add(d[3]);f?(b+=
"L",1!==f&&(b+=f)):e&&(b+="R",1!==e&&(b+=e));0>g&&(b+="...");return b};h.toContinuedFraction=function(a,b){b="undefined"===typeof b?65536:parseInt(b);if(h.equals(a,h.ZERO))return[0];if(h.equals(a,h.ONE))return[1];if(h.equals(a,h.NEGONE))return[-1];if(h.equals(a,h.INFINITY))return[1,0];if(h.equals(a,h.INFINULL))return[0,0];var c=h.clone(a),d=h.isNegative(c);d&&(c[0]=c[0].negate());for(var e=h.clone(h.ONE),f=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],g=1,l=[0],k=l.length-1;!h.equals(c,
e)&&b--;)h.isLessThan(c,e)?(-1===g?l[k]++:(g=-1,l.push(1),k++),f[0]=f[0].add(f[1]),f[2]=f[2].add(f[3])):(1===g?l[k]++:(g=1,l.push(1),k++),f[1]=f[1].add(f[0]),f[3]=f[3].add(f[2])),e[0]=f[0].add(f[1]),e[1]=f[2].add(f[3]);0>b?l.push(0):l[k]++;if(d)for(var r in l)l[r]=-l[r];return l};h.fromContinuedFraction=function(a,b){h.fromInteger_copy(a,b[b.length-1]);for(var c=b.length-2;-1<c;c--)h.invert(a,a),h.add(a,h.fromInteger(b[c]),a);return a};h.fromFactorial=function(a,b){if("undefined"!==typeof factorial.PREPARED[b])return h.fromInteger_copy(a,
factorial.PREPARED[b]);var c=factorial.PREPARED.length-1;for(h.fromInteger_copy(a,factorial.PREPARED[c]);c<b;)h.scalar_multiply(a,a,++c);return a};h.dump=function(a){return"bigrat\t"+h.str(a)+"\n~\t"+h.toDecimal(a)+"\nCF:\t["+h.toContinuedFraction(a)+"]\n"};h.ZERO=h.fromInteger(0);h.ONE=h.fromInteger(1);h.NEGONE=h.fromInteger(-1);h.INFINITY=h.fromValues(1,0);h.INFINULL=h.fromValues(0,0);h.INFINITESIMAL=h.clone([new BigInteger(1),l]);h.PI=h.fromValues("3141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481117450284102701938521105559644622948954930381964428810975665933446128475648233786783165271201909145648566923460348610454326648213393607260249141273724587",
"1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");"undefined"!==typeof b&&(b.bigrat=h);var u=function(a,b){this.a=g.fromValues(parseInt(a),parseInt(b))};u.prototype.toString=function(){return g.str(this.a)};u.prototype.toContinuedFraction=function(a){return g.toContinuedFraction(this.a,
a)};u.prototype.invert=function(){return g.invert(this.a)};u.prototype.reciprocal=u.prototype.invert;u.prototype.add=function(a){var b=g.create();g.add(b,this.a,a.a);return new u(b[0],b[1])};u.prototype.plus=u.prototype.add;u.prototype.subtract=function(a){var b=g.create();g.sub(b,this.a,a.a);return new u(b[0],b[1])};u.prototype.sub=u.prototype.subtract;u.prototype.minus=u.prototype.subtract;u.prototype.multiply=function(a){var b=g.create();g.mul(b,this.a,a.a);return new u(b[0],b[1])};u.prototype.mul=
u.prototype.multiply;u.prototype.times=u.prototype.multiply;u.prototype.mediant=function(a){var b=g.create();g.mediant(b,this.a,a.a);return new u(b[0],b[1])};u.prototype.divide=function(a){var b=g.create();g.div(b,this.a,a.a);return new u(b[0],b[1])};u.prototype.div=u.prototype.divide;u.prototype.divided_by=u.prototype.divide;u.prototype.power=function(a){var b=g.create();g.pow(b,this.a,a);return new u(b[0],b[1])};u.prototype.pow=u.prototype.power;u.prototype.dump=function(){return g.dump(this.a)};
u.prototype.toRat=function(){return g.clone(this.a)};u.prototype.toDecimal=function(){return g.toDecimal(this.a)};u.fromRat=function(a){var b=new u;b.a[0]=a[0];b.a[1]=a[1];return b};u.fromInteger=function(a){return u.fromRat(g.fromInteger(a))};u.fromIntegerInverse=function(a){return u.fromRat(g.fromIntegerInverse(a))};u.fromDecimal=function(a){return u.fromRat(g.fromDecimal(a))};u.fromContinuedFraction=function(a){return u.fromRat(g.fromContinuedFraction(g.create(),a))};"undefined"!==typeof b&&(b.rational=
u)})(n)})(this);(function(c,n){"object"===typeof module&&"object"===typeof module.exports?module.exports=c.document?n(c,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return n(b)}:n(c)})("undefined"!==typeof window?window:this,function(c,n){function b(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"===typeof b&&0<b&&b-1 in a}function a(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,G){return!!b.call(a,
G,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(Bb.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return 0<=wa.call(b,a)!==c})}function k(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b=mb[a]={};m.each(a.match(ua)||[],function(a,G){b[G]=!0});return b}function d(){O.removeEventListener("DOMContentLoaded",d,!1);c.removeEventListener("load",d,!1);m.ready()}function r(){Object.defineProperty(this.cache={},
0,{get:function(){return{}}});this.expando=m.expando+Math.random()}function g(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(Pa,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Cb.test(c)?m.parseJSON(c):c}catch(e){}R.set(a,b,c)}else c=void 0;return c}function l(){return!0}function x(){return!1}function h(){try{return O.activeElement}catch(a){}}function u(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?
b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function v(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function q(a){var b=ab.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function B(a,b){for(var c=0,e=a.length;c<e;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function C(a,b){var c,e,d,f;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),c=L.set(b,f),f=f.events))for(d in delete c.handle,
c.events={},f)for(c=0,e=f[d].length;c<e;c++)m.event.add(b,d,f[d][c]);R.hasData(a)&&(d=R.access(a),d=m.extend({},d),R.set(b,d))}}function e(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&m.nodeName(a,b)?m.merge([a],c):c}function p(a,b){var e,d=m(b.createElement(a)).appendTo(b.body),f=c.getDefaultComputedStyle&&(e=c.getDefaultComputedStyle(d[0]))?e.display:m.css(d[0],"display");d.detach();return f}function z(a){var b=
O,c=Qa[a];c||(c=p(a,b),"none"!==c&&c||(Ra=(Ra||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Ra[0].contentDocument,b.write(),b.close(),c=p(a,b),Ra.detach()),Qa[a]=c);return c}function A(a,b,c){var e,d,f=a.style;(c=c||Sa(a))&&(d=c.getPropertyValue(b)||c[b]);c&&(""!==d||m.contains(a.ownerDocument,a)||(d=m.style(a,b)),pa.test(d)&&Fa.test(b)&&(a=f.width,b=f.minWidth,e=f.maxWidth,f.minWidth=f.maxWidth=f.width=d,d=c.width,f.width=a,f.minWidth=b,f.maxWidth=e));return void 0!==
d?d+"":d}function H(a,b){return{get:function(){if(a())delete this.get;else return(this.get=b).apply(this,arguments)}}}function y(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),e=b,d=ia.length;d--;)if(b=ia[d]+c,b in a)return b;return e}function M(a,b,c){return(a=na.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function J(a,b,c,e,d){b=c===(e?"border":"content")?4:"width"===b?1:0;for(var f=0;4>b;b+=2)"margin"===c&&(f+=m.css(a,c+Aa[b],!0,d)),e?("content"===c&&(f-=m.css(a,"padding"+
Aa[b],!0,d)),"margin"!==c&&(f-=m.css(a,"border"+Aa[b]+"Width",!0,d))):(f+=m.css(a,"padding"+Aa[b],!0,d),"padding"!==c&&(f+=m.css(a,"border"+Aa[b]+"Width",!0,d)));return f}function P(a,b,c){var e=!0,d="width"===b?a.offsetWidth:a.offsetHeight,f=Sa(a),h="border-box"===m.css(a,"boxSizing",!1,f);if(0>=d||null==d){d=A(a,b,f);if(0>d||null==d)d=a.style[b];if(pa.test(d))return d;e=h&&(T.boxSizingReliable()||d===a.style[b]);d=parseFloat(d)||0}return d+J(a,b,c||(h?"border":"content"),e,f)+"px"}function S(a,
b){for(var c,e,d,f=[],h=0,g=a.length;h<g;h++)e=a[h],e.style&&(f[h]=L.get(e,"olddisplay"),c=e.style.display,b?(f[h]||"none"!==c||(e.style.display=""),""===e.style.display&&Ca(e)&&(f[h]=L.access(e,"olddisplay",z(e.nodeName)))):(d=Ca(e),"none"===c&&d||L.set(e,"olddisplay",d?c:m.css(e,"display"))));for(h=0;h<g;h++)e=a[h],!e.style||b&&"none"!==e.style.display&&""!==e.style.display||(e.style.display=b?f[h]||"":"none");return a}function E(a,b,c,e,d){return new E.prototype.init(a,b,c,e,d)}function Q(){setTimeout(function(){Da=
void 0});return Da=m.now()}function ga(a,b){var c,e=0,d={height:a};for(b=b?1:0;4>e;e+=2-b)c=Aa[e],d["margin"+c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function ba(a,b,c){for(var e,d=(I[b]||[]).concat(I["*"]),f=0,h=d.length;f<h;f++)if(e=d[f].call(c,b,a))return e}function ca(a,b){var c,e,d,f,h;for(c in a)if(e=m.camelCase(c),d=b[e],f=a[c],m.isArray(f)&&(d=f[1],f=a[c]=f[0]),c!==e&&(a[e]=f,delete a[c]),(h=m.cssHooks[e])&&"expand"in h)for(c in f=h.expand(f),delete a[e],f)c in a||(a[c]=f[c],
b[c]=d);else b[e]=d}function N(a,b,c){var e,d=0,f=U.length,h=m.Deferred().always(function(){delete g.elem}),g=function(){if(e)return!1;for(var b=Da||Q(),b=Math.max(0,p.startTime+p.duration-b),t=1-(b/p.duration||0),c=0,d=p.tweens.length;c<d;c++)p.tweens[c].run(t);h.notifyWith(a,[p,t,b]);if(1>t&&d)return b;h.resolveWith(a,[p]);return!1},p=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Da||Q(),duration:c.duration,tweens:[],
createTween:function(b,t){var c=m.Tween(a,p.opts,b,t,p.opts.specialEasing[b]||p.opts.easing);p.tweens.push(c);return c},stop:function(b){var t=0,c=b?p.tweens.length:0;if(e)return this;for(e=!0;t<c;t++)p.tweens[t].run(1);b?h.resolveWith(a,[p,b]):h.rejectWith(a,[p,b]);return this}});c=p.props;for(ca(c,p.opts.specialEasing);d<f;d++)if(b=U[d].call(p,a,c,p.opts))return b;m.map(c,ba,p);m.isFunction(p.opts.start)&&p.opts.start.call(a,p);m.fx.timer(m.extend(g,{elem:a,anim:p,queue:p.opts.queue}));return p.progress(p.opts.progress).done(p.opts.done,
p.opts.complete).fail(p.opts.fail).always(p.opts.always)}function X(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var e,d=0,f=b.toLowerCase().match(ua)||[];if(m.isFunction(c))for(;e=f[d++];)"+"===e[0]?(e=e.slice(1)||"*",(a[e]=a[e]||[]).unshift(c)):(a[e]=a[e]||[]).push(c)}}function ma(a,b,c,e){function d(g){var p;f[g]=!0;m.each(a[g]||[],function(a,t){var G=t(b,c,e);if("string"===typeof G&&!h&&!f[G])return b.dataTypes.unshift(G),d(G),!1;if(h)return!(p=G)});return p}var f={},h=a===bb;return d(b.dataTypes[0])||
!f["*"]&&d("*")}function aa(a,b){var c,e,d=m.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((d[c]?a:e||(e={}))[c]=b[c]);e&&m.extend(!0,a,e);return a}function W(a,b,c,e){var d;if(m.isArray(b))m.each(b,function(b,d){c||La.test(a)?e(a,d):W(a+"["+("object"===typeof d?b:"")+"]",d,c,e)});else if(c||"object"!==m.type(b))e(a,b);else for(d in b)W(a+"["+d+"]",b[d],c,e)}function ja(a){return m.isWindow(a)?a:9===a.nodeType&&a.defaultView}var oa=[],Z=oa.slice,ra=oa.concat,sa=oa.push,wa=oa.indexOf,xa=
{},ta=xa.toString,ya=xa.hasOwnProperty,T={},O=c.document,m=function(a,b){return new m.fn.init(a,b)},cb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,db=/^-ms-/,nb=/-([\da-z])/gi,eb=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:"2.1.1",constructor:m,selector:"",length:0,toArray:function(){return Z.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:Z.call(this)},pushStack:function(a){a=m.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a,
b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(Z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:sa,sort:oa.sort,splice:oa.splice};m.extend=m.fn.extend=function(){var a,b,c,e,d,f=arguments[0]||
{},h=1,g=arguments.length,p=!1;"boolean"===typeof f&&(p=f,f=arguments[h]||{},h++);"object"===typeof f||m.isFunction(f)||(f={});h===g&&(f=this,h--);for(;h<g;h++)if(null!=(a=arguments[h]))for(b in a)c=f[b],e=a[b],f!==e&&(p&&e&&(m.isPlainObject(e)||(d=m.isArray(e)))?(d?(d=!1,c=c&&m.isArray(c)?c:[]):c=c&&m.isPlainObject(c)?c:{},f[b]=m.extend(p,c,e)):void 0!==e&&(f[b]=e));return f};m.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},
isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!m.isArray(a)&&0<=a-parseFloat(a)},isPlainObject:function(a){return"object"!==m.type(a)||a.nodeType||m.isWindow(a)||a.constructor&&!ya.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){for(var b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?xa[ta.call(a)]||"object":
typeof a},globalEval:function(a){var b;b=eval;if(a=m.trim(a))1===a.indexOf("use strict")?(b=O.createElement("script"),b.text=a,O.head.appendChild(b).parentNode.removeChild(b)):b(a)},camelCase:function(a){return a.replace(db,"ms-").replace(nb,eb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,e){var d,f=0,h=a.length;d=b(a);if(e)if(d)for(;f<h&&(d=c.apply(a[f],e),!1!==d);f++);else for(f in a){if(d=c.apply(a[f],e),!1===d)break}else if(d)for(;f<
h&&(d=c.call(a[f],f,a[f]),!1!==d);f++);else for(f in a)if(d=c.call(a[f],f,a[f]),!1===d)break;return a},trim:function(a){return null==a?"":(a+"").replace(cb,"")},makeArray:function(a,c){var e=c||[];null!=a&&(b(Object(a))?m.merge(e,"string"===typeof a?[a]:a):sa.call(e,a));return e},inArray:function(a,b,c){return null==b?-1:wa.call(b,a,c)},merge:function(a,b){for(var c=+b.length,e=0,d=a.length;e<c;e++)a[d++]=b[e];a.length=d;return a},grep:function(a,b,c){for(var e=[],d=0,f=a.length,h=!c;d<f;d++)c=!b(a[d],
d),c!==h&&e.push(a[d]);return e},map:function(a,c,e){var d,f=0,h=a.length,g=[];if(b(a))for(;f<h;f++)d=c(a[f],f,e),null!=d&&g.push(d);else for(f in a)d=c(a[f],f,e),null!=d&&g.push(d);return ra.apply([],g)},guid:1,proxy:function(a,b){var c,e;"string"===typeof b&&(c=a[b],b=a,a=c);if(m.isFunction(a))return e=Z.call(arguments,2),c=function(){return a.apply(b||this,e.concat(Z.call(arguments)))},c.guid=a.guid=a.guid||m.guid++,c},now:Date.now,support:T});m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){xa["[object "+b+"]"]=b.toLowerCase()});var Ga=function(a){function b(a,c,e,d){var w,f,G,h,g;(c?c.ownerDocument||c:D)!==Q&&M(c);c=c||Q;e=e||[];if(!a||"string"!==typeof a)return e;if(1!==(h=c.nodeType)&&9!==h)return[];if(P&&!d){if(w=na.exec(a))if(G=w[1])if(9===h)if((f=c.getElementById(G))&&f.parentNode){if(f.id===G)return e.push(f),e}else return e;else{if(c.ownerDocument&&(f=c.ownerDocument.getElementById(G))&&ca(c,f)&&f.id===G)return e.push(f),e}else{if(w[2])return T.apply(e,c.getElementsByTagName(a)),
e;if((G=w[3])&&A.getElementsByClassName&&c.getElementsByClassName)return T.apply(e,c.getElementsByClassName(G)),e}if(A.qsa&&(!S||!S.test(a))){f=w=N;G=c;g=9===h&&a;if(1===h&&"object"!==c.nodeName.toLowerCase()){h=x(a);(w=c.getAttribute("id"))?f=w.replace(pa,"\\$&"):c.setAttribute("id",f);f="[id='"+f+"'] ";for(G=h.length;G--;)h[G]=f+F(h[G]);G=ka.test(a)&&t(c.parentNode)||c;g=h.join(",")}if(g)try{return T.apply(e,G.querySelectorAll(g)),e}catch(p){}finally{w||c.removeAttribute("id")}}}return v(a.replace(Y,
"$1"),c,e,d)}function c(){function a(t,c){b.push(t+" ")>u.cacheLength&&delete a[b.shift()];return a[t+" "]=c}var b=[];return a}function e(a){a[N]=!0;return a}function d(a){var b=Q.createElement("div");try{return!!a(b)}catch(t){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function f(a,b){for(var t=a.split("|"),c=a.length;c--;)u.attrHandle[t[c]]=b}function h(a,b){var t=b&&a,c=t&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(c)return c;
if(t)for(;t=t.nextSibling;)if(t===b)return-1;return a?1:-1}function g(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function p(a){return function(b){var t=b.nodeName.toLowerCase();return("input"===t||"button"===t)&&b.type===a}}function l(a){return e(function(b){b=+b;return e(function(t,c){for(var e,d=a([],t.length,b),w=d.length;w--;)t[e=d[w]]&&(t[e]=!(c[e]=t[e]))})})}function t(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function w(){}function F(a){for(var b=
0,t=a.length,c="";b<t;b++)c+=a[b].value;return c}function K(a,b,t){var c=b.dir,e=t&&"parentNode"===c,d=W++;return b.first?function(b,t,d){for(;b=b[c];)if(1===b.nodeType||e)return a(b,t,d)}:function(b,t,w){var f,G,F=[X,d];if(w)for(;b=b[c];){if((1===b.nodeType||e)&&a(b,t,w))return!0}else for(;b=b[c];)if(1===b.nodeType||e){G=b[N]||(b[N]={});if((f=G[c])&&f[0]===X&&f[1]===d)return F[2]=f[2];G[c]=F;if(F[2]=a(b,t,w))return!0}}}function m(a){return 1<a.length?function(b,t,c){for(var e=a.length;e--;)if(!a[e](b,
t,c))return!1;return!0}:a[0]}function Ea(a,b,t,c,e){for(var d,w=[],f=0,G=a.length,F=null!=b;f<G;f++)if(d=a[f])if(!t||t(d,c,e))w.push(d),F&&b.push(f);return w}function k(a,t,c,d,w,f){d&&!d[N]&&(d=k(d));w&&!w[N]&&(w=k(w,f));return e(function(e,f,G,F){var h,g,p=[],K=[],l=f.length,m;if(!(m=e)){m=t||"*";for(var k=G.nodeType?[G]:G,Ka=[],z=0,Eb=k.length;z<Eb;z++)b(m,k[z],Ka);m=Ka}m=!a||!e&&t?m:Ea(m,p,a,G,F);k=c?w||(e?a:l||d)?[]:f:m;c&&c(m,k,G,F);if(d)for(h=Ea(k,K),d(h,[],G,F),G=h.length;G--;)if(g=h[G])k[K[G]]=
!(m[K[G]]=g);if(e){if(w||a){if(w){h=[];for(G=k.length;G--;)(g=k[G])&&h.push(m[G]=g);w(null,k=[],h,F)}for(G=k.length;G--;)(g=k[G])&&-1<(h=w?R.call(e,g):p[G])&&(e[h]=!(f[h]=g))}}else k=Ea(k===f?k.splice(l,k.length):k),w?w(null,f,k,F):T.apply(f,k)})}function z(a){var b,t,c,e=a.length,d=u.relative[a[0].type];t=d||u.relative[" "];for(var w=d?1:0,f=K(function(a){return a===b},t,!0),G=K(function(a){return-1<R.call(b,a)},t,!0),h=[function(a,t,c){return!d&&(c||t!==B)||((b=t).nodeType?f(a,t,c):G(a,t,c))}];w<
e;w++)if(t=u.relative[a[w].type])h=[K(m(h),t)];else{t=u.filter[a[w].type].apply(null,a[w].matches);if(t[N]){for(c=++w;c<e&&!u.relative[a[c].type];c++);return k(1<w&&m(h),1<w&&F(a.slice(0,w-1).concat({value:" "===a[w-2].type?"*":""})).replace(Y,"$1"),t,w<c&&z(a.slice(w,c)),c<e&&z(a=a.slice(c)),c<e&&F(a))}h.push(t)}return m(h)}function q(a,t){var c=0<t.length,d=0<a.length,w=function(e,w,f,G,F){var h,g,p,K=0,m="0",l=e&&[],k=[],Ka=B,z=e||d&&u.find.TAG("*",F),Eb=X+=null==Ka?1:Math.random()||.1,q=z.length;
for(F&&(B=w!==Q&&w);m!==q&&null!=(h=z[m]);m++){if(d&&h){for(g=0;p=a[g++];)if(p(h,w,f)){G.push(h);break}F&&(X=Eb)}c&&((h=!p&&h)&&K--,e&&l.push(h))}K+=m;if(c&&m!==K){for(g=0;p=t[g++];)p(l,k,w,f);if(e){if(0<K)for(;m--;)l[m]||k[m]||(k[m]=U.call(G));k=Ea(k)}T.apply(G,k);F&&!e&&0<k.length&&1<K+t.length&&b.uniqueSort(G)}F&&(X=Eb,B=Ka);return l};return c?e(w):w}var r,A,u,H,n,x,J,v,B,y,E,M,Q,C,P,S,ga,ba,ca,N="sizzle"+-new Date,D=a.document,X=0,W=0,I=c(),L=c(),ma=c(),ja=function(a,b){a===b&&(E=!0);return 0},
O={}.hasOwnProperty,aa=[],U=aa.pop,V=aa.push,T=aa.push,sa=aa.slice,R=aa.indexOf||function(a){for(var b=0,t=this.length;b<t;b++)if(this[b]===a)return b;return-1},oa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),Z="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oa+"))|)[\\x20\\t\\r\\n\\f]*\\]",ra=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
Z+")*)|.*)\\)|)",Y=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,wa=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ya=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,da=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,fa=new RegExp(ra),db=new RegExp("^"+oa+"$"),ea={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+Z),PSEUDO:new RegExp("^"+ra),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},xa=/^(?:input|select|textarea|button)$/i,la=/^h\d$/i,ia=/^[^{]+\{\s*\[native \w/,na=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ka=/[+~]/,pa=/'|\\/g,ta=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ha=function(a,b,t){a="0x"+b-65536;
return a!==a||t?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{T.apply(aa=sa.call(D.childNodes),D.childNodes),aa[D.childNodes.length].nodeType}catch(qa){T={apply:aa.length?function(a,b){V.apply(a,sa.call(b))}:function(a,b){for(var t=a.length,c=0;a[t++]=b[c++];);a.length=t-1}}}A=b.support={};n=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};M=b.setDocument=function(a){var b=a?a.ownerDocument||a:D;a=b.defaultView;if(b===
Q||9!==b.nodeType||!b.documentElement)return Q;Q=b;C=b.documentElement;P=!n(b);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){M()},!1):a.attachEvent&&a.attachEvent("onunload",function(){M()}));A.attributes=d(function(a){a.className="i";return!a.getAttribute("className")});A.getElementsByTagName=d(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});A.getElementsByClassName=ia.test(b.getElementsByClassName)&&d(function(a){a.innerHTML=
"<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});A.getById=d(function(a){C.appendChild(a).id=N;return!b.getElementsByName||!b.getElementsByName(N).length});A.getById?(u.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&P){var t=b.getElementById(a);return t&&t.parentNode?[t]:[]}},u.filter.ID=function(a){var b=a.replace(ta,ha);return function(a){return a.getAttribute("id")===b}}):(delete u.find.ID,u.filter.ID=function(a){var b=
a.replace(ta,ha);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});u.find.TAG=A.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var t,c=[],e=0,d=b.getElementsByTagName(a);if("*"===a){for(;t=d[e++];)1===t.nodeType&&c.push(t);return c}return d};u.find.CLASS=A.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&P)return b.getElementsByClassName(a)};
ga=[];S=[];if(A.qsa=ia.test(b.querySelectorAll))d(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";a.querySelectorAll("[msallowclip^='']").length&&S.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||S.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||S.push(":checked")}),
d(function(a){var t=b.createElement("input");t.setAttribute("type","hidden");a.appendChild(t).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&S.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||S.push(":enabled",":disabled");a.querySelectorAll("*,:x");S.push(",.*:")});(A.matchesSelector=ia.test(ba=C.matches||C.webkitMatchesSelector||C.mozMatchesSelector||C.oMatchesSelector||C.msMatchesSelector))&&d(function(a){A.disconnectedMatch=ba.call(a,"div");ba.call(a,
"[s!='']:x");ga.push("!=",ra)});S=S.length&&new RegExp(S.join("|"));ga=ga.length&&new RegExp(ga.join("|"));ca=(a=ia.test(C.compareDocumentPosition))||ia.test(C.contains)?function(a,b){var t=9===a.nodeType?a.documentElement:a,c=b&&b.parentNode;return a===c||!!(c&&1===c.nodeType&&(t.contains?t.contains(c):a.compareDocumentPosition&&a.compareDocumentPosition(c)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};ja=a?function(a,t){if(a===t)return E=!0,0;var c=!a.compareDocumentPosition-
!t.compareDocumentPosition;if(c)return c;c=(a.ownerDocument||a)===(t.ownerDocument||t)?a.compareDocumentPosition(t):1;return c&1||!A.sortDetached&&t.compareDocumentPosition(a)===c?a===b||a.ownerDocument===D&&ca(D,a)?-1:t===b||t.ownerDocument===D&&ca(D,t)?1:y?R.call(y,a)-R.call(y,t):0:c&4?-1:1}:function(a,t){if(a===t)return E=!0,0;var c,e=0;c=a.parentNode;var d=t.parentNode,w=[a],f=[t];if(!c||!d)return a===b?-1:t===b?1:c?-1:d?1:y?R.call(y,a)-R.call(y,t):0;if(c===d)return h(a,t);for(c=a;c=c.parentNode;)w.unshift(c);
for(c=t;c=c.parentNode;)f.unshift(c);for(;w[e]===f[e];)e++;return e?h(w[e],f[e]):w[e]===D?-1:f[e]===D?1:0};return b};b.matches=function(a,t){return b(a,null,null,t)};b.matchesSelector=function(a,t){(a.ownerDocument||a)!==Q&&M(a);t=t.replace(da,"='$1']");if(!(!A.matchesSelector||!P||ga&&ga.test(t)||S&&S.test(t)))try{var c=ba.call(a,t);if(c||A.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(e){}return 0<b(t,Q,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==Q&&
M(a);return ca(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==Q&&M(a);var t=u.attrHandle[b.toLowerCase()],t=t&&O.call(u.attrHandle,b.toLowerCase())?t(a,b,!P):void 0;return void 0!==t?t:A.attributes||!P?a.getAttribute(b):(t=a.getAttributeNode(b))&&t.specified?t.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,t=[],c=0,e=0;E=!A.detectDuplicates;y=!A.sortStable&&a.slice(0);a.sort(ja);if(E){for(;b=a[e++];)b===a[e]&&(c=t.push(e));
for(;c--;)a.splice(t[c],1)}y=null;return a};H=b.getText=function(a){var b,t="",c=0;b=a.nodeType;if(!b)for(;b=a[c++];)t+=H(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)t+=H(a)}else if(3===b||4===b)return a.nodeValue;return t};u=b.selectors={cacheLength:50,createPseudo:e,match:ea,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},
preFilter:{ATTR:function(a){a[1]=a[1].replace(ta,ha);a[3]=(a[3]||a[4]||a[5]||"").replace(ta,ha);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,t=!a[6]&&a[2];if(ea.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":t&&fa.test(t)&&(b=x(t,!0))&&(b=t.indexOf(")",
t.length-b)-t.length)&&(a[0]=a[0].slice(0,b),a[2]=t.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(ta,ha).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=I[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&I(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},
ATTR:function(a,t,c){return function(e){e=b.attr(e,a);if(null==e)return"!="===t;if(!t)return!0;e+="";return"="===t?e===c:"!="===t?e!==c:"^="===t?c&&0===e.indexOf(c):"*="===t?c&&-1<e.indexOf(c):"$="===t?c&&e.slice(-c.length)===c:"~="===t?-1<(" "+e+" ").indexOf(c):"|="===t?e===c||e.slice(0,c.length+1)===c+"-":!1}},CHILD:function(a,b,t,c,e){var d="nth"!==a.slice(0,3),w="last"!==a.slice(-4),f="of-type"===b;return 1===c&&0===e?function(a){return!!a.parentNode}:function(b,t,G){var h,F,g,p,K;t=d!==w?"nextSibling":
"previousSibling";var m=b.parentNode,l=f&&b.nodeName.toLowerCase();G=!G&&!f;if(m){if(d){for(;t;){for(F=b;F=F[t];)if(f?F.nodeName.toLowerCase()===l:1===F.nodeType)return!1;K=t="only"===a&&!K&&"nextSibling"}return!0}K=[w?m.firstChild:m.lastChild];if(w&&G)for(G=m[N]||(m[N]={}),h=G[a]||[],p=h[0]===X&&h[1],g=h[0]===X&&h[2],F=p&&m.childNodes[p];F=++p&&F&&F[t]||(g=p=0)||K.pop();){if(1===F.nodeType&&++g&&F===b){G[a]=[X,p,g];break}}else if(G&&(h=(b[N]||(b[N]={}))[a])&&h[0]===X)g=h[1];else for(;(F=++p&&F&&
F[t]||(g=p=0)||K.pop())&&((f?F.nodeName.toLowerCase()!==l:1!==F.nodeType)||!++g||(G&&((F[N]||(F[N]={}))[a]=[X,g]),F!==b)););g-=e;return g===c||0===g%c&&0<=g/c}}},PSEUDO:function(a,t){var c,d=u.pseudos[a]||u.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return d[N]?d(t):1<d.length?(c=[a,a,"",t],u.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,b){for(var c,e=d(a,t),w=e.length;w--;)c=R.call(a,e[w]),a[c]=!(b[c]=e[w])}):function(a){return d(a,0,c)}):d}},pseudos:{not:e(function(a){var b=
[],t=[],c=J(a.replace(Y,"$1"));return c[N]?e(function(a,b,t,e){e=c(a,null,e,[]);for(var d=a.length;d--;)if(t=e[d])a[d]=!(b[d]=t)}):function(a,e,d){b[0]=a;c(b,null,d,t);return!t.pop()}}),has:e(function(a){return function(t){return 0<b(a,t).length}}),contains:e(function(a){return function(b){return-1<(b.textContent||b.innerText||H(b)).indexOf(a)}}),lang:e(function(a){db.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(ta,ha).toLowerCase();return function(b){var t;do if(t=P?b.lang:b.getAttribute("xml:lang")||
b.getAttribute("lang"))return t=t.toLowerCase(),t===a||0===t.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var t=a.location&&a.location.hash;return t&&t.slice(1)===b.id},root:function(a){return a===C},focus:function(a){return a===Q.activeElement&&(!Q.hasFocus||Q.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!u.pseudos.empty(a)},header:function(a){return la.test(a.nodeName)},input:function(a){return xa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&
"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,t){return[0>t?t+b:t]}),even:l(function(a,b){for(var t=0;t<b;t+=2)a.push(t);return a}),odd:l(function(a,b){for(var t=1;t<b;t+=2)a.push(t);return a}),lt:l(function(a,b,t){for(b=0>t?t+b:t;0<=--b;)a.push(b);return a}),gt:l(function(a,b,t){for(t=0>t?t+b:t;++t<b;)a.push(t);return a})}};u.pseudos.nth=u.pseudos.eq;for(r in{radio:!0,checkbox:!0,
file:!0,password:!0,image:!0})u.pseudos[r]=g(r);for(r in{submit:!0,reset:!0})u.pseudos[r]=p(r);w.prototype=u.filters=u.pseudos;u.setFilters=new w;x=b.tokenize=function(a,t){var c,e,d,w,f,G,F;if(f=L[a+" "])return t?0:f.slice(0);f=a;G=[];for(F=u.preFilter;f;){if(!c||(e=wa.exec(f)))e&&(f=f.slice(e[0].length)||f),G.push(d=[]);c=!1;if(e=ya.exec(f))c=e.shift(),d.push({value:c,type:e[0].replace(Y," ")}),f=f.slice(c.length);for(w in u.filter)!(e=ea[w].exec(f))||F[w]&&!(e=F[w](e))||(c=e.shift(),d.push({value:c,
type:w,matches:e}),f=f.slice(c.length));if(!c)break}return t?f.length:f?b.error(a):L(a,G).slice(0)};J=b.compile=function(a,b){var t,c=[],e=[],d=ma[a+" "];if(!d){b||(b=x(a));for(t=b.length;t--;)d=z(b[t]),d[N]?c.push(d):e.push(d);d=ma(a,q(e,c));d.selector=a}return d};v=b.select=function(a,b,c,e){var d,w,f,G,h="function"===typeof a&&a,g=!e&&x(a=h.selector||a);c=c||[];if(1===g.length){w=g[0]=g[0].slice(0);if(2<w.length&&"ID"===(f=w[0]).type&&A.getById&&9===b.nodeType&&P&&u.relative[w[1].type]){b=(u.find.ID(f.matches[0].replace(ta,
ha),b)||[])[0];if(!b)return c;h&&(b=b.parentNode);a=a.slice(w.shift().value.length)}for(d=ea.needsContext.test(a)?0:w.length;d--;){f=w[d];if(u.relative[G=f.type])break;if(G=u.find[G])if(e=G(f.matches[0].replace(ta,ha),ka.test(w[0].type)&&t(b.parentNode)||b)){w.splice(d,1);a=e.length&&F(w);if(!a)return T.apply(c,e),c;break}}}(h||J(a,g))(e,b,!P,c,ka.test(a)&&t(b.parentNode)||b);return c};A.sortStable=N.split("").sort(ja).join("")===N;A.detectDuplicates=!!E;M();A.sortDetached=d(function(a){return a.compareDocumentPosition(Q.createElement("div"))&
1});d(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,t){if(!t)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});A.attributes&&d(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||f("value",function(a,b,t){if(!t&&"input"===a.nodeName.toLowerCase())return a.defaultValue});d(function(a){return null==a.getAttribute("disabled")})||f("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
function(a,b,t){var c;if(!t)return!0===a[b]?b.toLowerCase():(c=a.getAttributeNode(b))&&c.specified?c.value:null});return b}(c);m.find=Ga;m.expr=Ga.selectors;m.expr[":"]=m.expr.pseudos;m.unique=Ga.uniqueSort;m.text=Ga.getText;m.isXMLDoc=Ga.isXML;m.contains=Ga.contains;var ob=m.expr.match.needsContext,pb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Bb=/^.[^:#\[\.,]*$/;m.filter=function(a,b,c){var e=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===e.nodeType?m.find.matchesSelector(e,a)?[e]:[]:m.find.matches(a,m.grep(b,
function(a){return 1===a.nodeType}))};m.fn.extend({find:function(a){var b,c=this.length,e=[],d=this;if("string"!==typeof a)return this.pushStack(m(a).filter(function(){for(b=0;b<c;b++)if(m.contains(d[b],this))return!0}));for(b=0;b<c;b++)m.find(a,d[b],e);e=this.pushStack(1<c?m.unique(e):e);e.selector=this.selector?this.selector+" "+a:a;return e},filter:function(b){return this.pushStack(a(this,b||[],!1))},not:function(b){return this.pushStack(a(this,b||[],!0))},is:function(b){return!!a(this,"string"===
typeof b&&ob.test(b)?m(b):b||[],!1).length}});var Ta,Gb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(a,b){var c;if(!a)return this;if("string"===typeof a){c="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:Gb.exec(a);if(!c||!c[1]&&b)return!b||b.jquery?(b||Ta).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:O,!0)),pb.test(c[1])&&m.isPlainObject(b))for(c in b)if(m.isFunction(this[c]))this[c](b[c]);
else this.attr(c,b[c])}else(c=O.getElementById(c[2]))&&c.parentNode&&(this.length=1,this[0]=c),this.context=O,this.selector=a;return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(m.isFunction(a))return"undefined"!==typeof Ta.ready?Ta.ready(a):a(m);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return m.makeArray(a,this)}).prototype=m.fn;Ta=m(O);var Ua=/^(?:parents|prev(?:Until|All))/,fb={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,
b,c){for(var e=[],d=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(d&&m(a).is(c))break;e.push(a)}return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});m.fn.extend({has:function(a){var b=m(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(m.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,e=0,d=this.length,f=[],h=ob.test(a)||"string"!==typeof a?m(a,b||this.context):0;e<d;e++)for(c=this[e];c&&c!==
b;c=c.parentNode)if(11>c.nodeType&&(h?-1<h.index(c):1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(1<f.length?m.unique(f):f)},index:function(a){return a?"string"===typeof a?wa.call(m(a),this[0]):wa.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});m.each({parent:function(a){return(a=
a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return k(a,"nextSibling")},prev:function(a){return k(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||
{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return a.contentDocument||m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,e){var d=m.map(this,b,c);"Until"!==a.slice(-5)&&(e=c);e&&"string"===typeof e&&(d=m.filter(e,d));1<this.length&&(fb[a]||m.unique(d),Ua.test(a)&&d.reverse());return this.pushStack(d)}});var ua=/\S+/g,mb={};m.Callbacks=function(a){a="string"===typeof a?mb[a]||f(a):m.extend({},a);var b,c,e,d,h,g,p=[],l=!a.once&&[],k=function(w){b=
a.memory&&w;c=!0;g=d||0;d=0;h=p.length;for(e=!0;p&&g<h;g++)if(!1===p[g].apply(w[0],w[1])&&a.stopOnFalse){b=!1;break}e=!1;p&&(l?l.length&&k(l.shift()):b?p=[]:t.disable())},t={add:function(){if(p){var c=p.length;(function K(b){m.each(b,function(b,c){var e=m.type(c);"function"===e?a.unique&&t.has(c)||p.push(c):c&&c.length&&"string"!==e&&K(c)})})(arguments);e?h=p.length:b&&(d=c,k(b))}return this},remove:function(){p&&m.each(arguments,function(a,b){for(var t;-1<(t=m.inArray(b,p,t));)p.splice(t,1),e&&(t<=
h&&h--,t<=g&&g--)});return this},has:function(a){return a?-1<m.inArray(a,p):!(!p||!p.length)},empty:function(){p=[];h=0;return this},disable:function(){p=l=b=void 0;return this},disabled:function(){return!p},lock:function(){l=void 0;b||t.disable();return this},locked:function(){return!l},fireWith:function(a,b){!p||c&&!l||(b=b||[],b=[a,b.slice?b.slice():b],e?l.push(b):k(b));return this},fire:function(){t.fireWith(this,arguments);return this},fired:function(){return!!c}};return t};m.extend({Deferred:function(a){var b=
[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",e={state:function(){return c},always:function(){d.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var h=m.isFunction(a[b])&&a[b];d[f[1]](function(){var a=h&&h.apply(this,arguments);if(a&&m.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);
else c[f[0]+"With"](this===e?c.promise():this,h?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?m.extend(a,e):e}},d={};e.pipe=e.then;m.each(b,function(a,f){var h=f[2],G=f[3];e[f[1]]=h.add;G&&h.add(function(){c=G},b[a^1][2].disable,b[2][2].lock);d[f[0]]=function(){d[f[0]+"With"](this===d?e:this,arguments);return this};d[f[0]+"With"]=h.fireWith});e.promise(d);a&&a.call(d,d);return d},when:function(a){var b=0,c=Z.call(arguments),e=c.length,d=1!==e||a&&m.isFunction(a.promise)?
e:0,f=1===d?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this;c[a]=1<arguments.length?Z.call(arguments):e;c===g?f.notifyWith(b,c):--d||f.resolveWith(b,c)}},g,p,l;if(1<e)for(g=Array(e),p=Array(e),l=Array(e);b<e;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,l,c)).fail(f.reject).progress(h(b,p,g)):--d;d||f.resolveWith(l,c);return f.promise()}});var Va;m.fn.ready=function(a){m.ready.promise().done(a);return this};m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:
m.ready(!0)},ready:function(a){(!0===a?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==a&&0<--m.readyWait||(Va.resolveWith(O,[m]),m.fn.triggerHandler&&(m(O).triggerHandler("ready"),m(O).off("ready"))))}});m.ready.promise=function(a){Va||(Va=m.Deferred(),"complete"===O.readyState?setTimeout(m.ready):(O.addEventListener("DOMContentLoaded",d,!1),c.addEventListener("load",d,!1)));return Va.promise(a)};m.ready.promise();var za=m.access=function(a,b,c,e,d,f,h){var g=0,p=a.length,l=null==c;if("object"===m.type(c))for(g in d=
!0,c)m.access(a,b,g,c[g],!0,f,h);else if(void 0!==e&&(d=!0,m.isFunction(e)||(h=!0),l&&(h?(b.call(a,e),b=null):(l=b,b=function(a,b,c){return l.call(m(a),c)})),b))for(;g<p;g++)b(a[g],c,h?e:e.call(a[g],g,b(a[g],c)));return d?a:l?b.call(a):p?b(a[0],c):f};m.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};r.uid=1;r.accepts=m.acceptData;r.prototype={key:function(a){if(!r.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=r.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,
b)}catch(e){b[this.expando]=c,m.extend(a,b)}}this.cache[c]||(this.cache[c]={});return c},set:function(a,b,c){var e;a=this.key(a);var d=this.cache[a];if("string"===typeof b)d[b]=c;else if(m.isEmptyObject(d))m.extend(this.cache[a],b);else for(e in b)d[e]=b[e];return d},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){if(void 0===b||b&&"string"===typeof b&&void 0===c)return c=this.get(a,b),void 0!==c?c:this.get(a,m.camelCase(b));this.set(a,b,c);return void 0!==
c?c:b},remove:function(a,b){var c,e;c=this.key(a);var d=this.cache[c];if(void 0===b)this.cache[c]={};else for(m.isArray(b)?e=b.concat(b.map(m.camelCase)):(c=m.camelCase(b),b in d?e=[b,c]:(e=c,e=e in d?[e]:e.match(ua)||[])),c=e.length;c--;)delete d[e[c]]},hasData:function(a){return!m.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new r,R=new r,Cb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pa=/([A-Z])/g;m.extend({hasData:function(a){return R.hasData(a)||
L.hasData(a)},data:function(a,b,c){return R.access(a,b,c)},removeData:function(a,b){R.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}});m.fn.extend({data:function(a,b){var c,e,d,f=this[0],h=f&&f.attributes;if(void 0===a){if(this.length&&(d=R.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){for(c=h.length;c--;)h[c]&&(e=h[c].name,0===e.indexOf("data-")&&(e=m.camelCase(e.slice(5)),g(f,e,d[e])));L.set(f,"hasDataAttrs",!0)}return d}return"object"===
typeof a?this.each(function(){R.set(this,a)}):za(this,function(b){var c,e=m.camelCase(a);if(f&&void 0===b){c=R.get(f,a);if(void 0!==c)return c;c=R.get(f,e);if(void 0!==c)return c;c=g(f,e,void 0);if(void 0!==c)return c}else this.each(function(){var c=R.get(this,e);R.set(this,e,b);-1!==a.indexOf("-")&&void 0!==c&&R.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){R.remove(this,a)})}});m.extend({queue:function(a,b,c){var e;if(a)return b=(b||"fx")+
"queue",e=L.get(a,b),c&&(!e||m.isArray(c)?e=L.access(a,b,m.makeArray(c)):e.push(c)),e||[]},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),e=c.length,d=c.shift(),f=m._queueHooks(a,b),h=function(){m.dequeue(a,b)};"inprogress"===d&&(d=c.shift(),e--);d&&("fx"===b&&c.unshift("inprogress"),delete f.stop,d.call(a,h,f));!e&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:m.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}});
m.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,e=1,d=m.Deferred(),f=this,h=this.length,g=function(){--e||d.resolveWith(f,[f])};"string"!==
typeof a&&(b=a,a=void 0);for(a=a||"fx";h--;)(c=L.get(f[h],a+"queueHooks"))&&c.empty&&(e++,c.empty.add(g));g();return d.promise(b)}});var ha=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Aa=["Top","Right","Bottom","Left"],Ca=function(a,b){a=b||a;return"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},qb=/^(?:checkbox|radio)$/i;(function(){var a=O.createDocumentFragment().appendChild(O.createElement("div")),b=O.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked",
"checked");b.setAttribute("name","t");a.appendChild(b);T.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";T.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue})();T.focusinBubbles="onfocusin"in c;var Hb=/^key/,Ib=/^(?:mouse|pointer|contextmenu)|click/,rb=/^(?:focusinfocus|focusoutblur)$/,V=/^([^.]*)(?:\.(.+)|)$/;m.event={global:{},add:function(a,b,c,e,d){var f,h,g,p,l,t,w,F,K;if(l=L.get(a))for(c.handler&&(f=c,c=f.handler,d=f.selector),c.guid||(c.guid=
m.guid++),(p=l.events)||(p=l.events={}),(h=l.handle)||(h=l.handle=function(b){return"undefined"!==typeof m&&m.event.triggered!==b.type?m.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(ua)||[""],l=b.length;l--;)g=V.exec(b[l])||[],F=t=g[1],K=(g[2]||"").split(".").sort(),F&&(g=m.event.special[F]||{},F=(d?g.delegateType:g.bindType)||F,g=m.event.special[F]||{},t=m.extend({type:F,origType:t,data:e,handler:c,guid:c.guid,selector:d,needsContext:d&&m.expr.match.needsContext.test(d),namespace:K.join(".")},
f),(w=p[F])||(w=p[F]=[],w.delegateCount=0,g.setup&&!1!==g.setup.call(a,e,K,h)||a.addEventListener&&a.addEventListener(F,h,!1)),g.add&&(g.add.call(a,t),t.handler.guid||(t.handler.guid=c.guid)),d?w.splice(w.delegateCount++,0,t):w.push(t),m.event.global[F]=!0)},remove:function(a,b,c,e,d){var f,h,g,p,l,t,w,F,K,k,Ea,z=L.hasData(a)&&L.get(a);if(z&&(p=z.events)){b=(b||"").match(ua)||[""];for(l=b.length;l--;)if(g=V.exec(b[l])||[],K=Ea=g[1],k=(g[2]||"").split(".").sort(),K){w=m.event.special[K]||{};K=(e?w.delegateType:
w.bindType)||K;F=p[K]||[];g=g[2]&&new RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)");for(h=f=F.length;f--;)t=F[f],!d&&Ea!==t.origType||c&&c.guid!==t.guid||g&&!g.test(t.namespace)||e&&e!==t.selector&&("**"!==e||!t.selector)||(F.splice(f,1),t.selector&&F.delegateCount--,w.remove&&w.remove.call(a,t));h&&!F.length&&(w.teardown&&!1!==w.teardown.call(a,k,z.handle)||m.removeEvent(a,K,z.handle),delete p[K])}else for(K in p)m.event.remove(a,K+b[l],c,e,!0);m.isEmptyObject(p)&&(delete z.handle,L.remove(a,
"events"))}},trigger:function(a,b,e,d){var f,h,g,p,l,k,t=[e||O],w=ya.call(a,"type")?a.type:a;k=ya.call(a,"namespace")?a.namespace.split("."):[];h=f=e=e||O;if(3!==e.nodeType&&8!==e.nodeType&&!rb.test(w+m.event.triggered)&&(0<=w.indexOf(".")&&(k=w.split("."),w=k.shift(),k.sort()),p=0>w.indexOf(":")&&"on"+w,a=a[m.expando]?a:new m.Event(w,"object"===typeof a&&a),a.isTrigger=d?2:3,a.namespace=k.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,
a.target||(a.target=e),b=null==b?[a]:m.makeArray(b,[a]),k=m.event.special[w]||{},d||!k.trigger||!1!==k.trigger.apply(e,b))){if(!d&&!k.noBubble&&!m.isWindow(e)){g=k.delegateType||w;rb.test(g+w)||(h=h.parentNode);for(;h;h=h.parentNode)t.push(h),f=h;f===(e.ownerDocument||O)&&t.push(f.defaultView||f.parentWindow||c)}for(f=0;(h=t[f++])&&!a.isPropagationStopped();)a.type=1<f?g:k.bindType||w,(l=(L.get(h,"events")||{})[a.type]&&L.get(h,"handle"))&&l.apply(h,b),(l=p&&h[p])&&l.apply&&m.acceptData(h)&&(a.result=
l.apply(h,b),!1===a.result&&a.preventDefault());a.type=w;d||a.isDefaultPrevented()||k._default&&!1!==k._default.apply(t.pop(),b)||!m.acceptData(e)||!p||!m.isFunction(e[w])||m.isWindow(e)||((f=e[p])&&(e[p]=null),m.event.triggered=w,e[w](),m.event.triggered=void 0,f&&(e[p]=f));return a.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,d,f=[],h=Z.call(arguments);b=(L.get(this,"events")||{})[a.type]||[];var g=m.event.special[a.type]||{};h[0]=a;a.delegateTarget=this;if(!g.preDispatch||!1!==g.preDispatch.call(this,
a)){f=m.event.handlers.call(this,a,b);for(b=0;(d=f[b++])&&!a.isPropagationStopped();)for(a.currentTarget=d.elem,c=0;(e=d.handlers[c++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(e.namespace))a.handleObj=e,a.data=e.data,e=((m.event.special[e.origType]||{}).handle||e.handler).apply(d.elem,h),void 0!==e&&!1===(a.result=e)&&(a.preventDefault(),a.stopPropagation());g.postDispatch&&g.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var c,e,d,f,h=[],g=
b.delegateCount,p=a.target;if(g&&p.nodeType&&(!a.button||"click"!==a.type))for(;p!==this;p=p.parentNode||this)if(!0!==p.disabled||"click"!==a.type){e=[];for(c=0;c<g;c++)f=b[c],d=f.selector+" ",void 0===e[d]&&(e[d]=f.needsContext?0<=m(d,this).index(p):m.find(d,this,null,[p]).length),e[d]&&e.push(f);e.length&&h.push({elem:p,handlers:e})}g<b.length&&h.push({elem:this,handlers:b.slice(g)});return h},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,d=b.button;null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||O,e=c.documentElement,c=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=
b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0));a.which||void 0===d||(a.which=d&1?1:d&2?3:d&4?2:0);return a}},fix:function(a){if(a[m.expando])return a;var b,c,e;b=a.type;var d=a,f=this.fixHooks[b];f||(this.fixHooks[b]=f=Ib.test(b)?this.mouseHooks:Hb.test(b)?this.keyHooks:{});e=f.props?this.props.concat(f.props):this.props;a=new m.Event(d);for(b=e.length;b--;)c=e[b],a[c]=d[c];a.target||(a.target=O);3===a.target.nodeType&&(a.target=a.target.parentNode);return f.filter?
f.filter(a,d):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===h()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=
a.result)}}},simulate:function(a,b,c,e){a=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});e?m.event.trigger(a,null,b):m.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};m.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)};m.Event=function(a,b){if(!(this instanceof m.Event))return new m.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?
l:x):this.type=a;b&&m.extend(this,b);this.timeStamp=a&&a.timeStamp||m.now();this[m.expando]=!0};m.Event.prototype={isDefaultPrevented:x,isPropagationStopped:x,isImmediatePropagationStopped:x,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=l;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=l;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=
l;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,e=a.relatedTarget,d=a.handleObj;if(!e||e!==this&&!m.contains(this,e))a.type=d.origType,c=d.handler.apply(this,arguments),a.type=b;return c}}});T.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=
function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var e=this.ownerDocument||this,d=L.access(e,b);d||e.addEventListener(a,c,!0);L.access(e,b,(d||0)+1)},teardown:function(){var e=this.ownerDocument||this,d=L.access(e,b)-1;d?L.access(e,b,d):(e.removeEventListener(a,c,!0),L.remove(e,b))}}});m.fn.extend({on:function(a,b,c,e,d){var f,h;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=void 0);for(h in a)this.on(h,b,c,a[h],d);return this}null==c&&null==
e?(e=b,c=b=void 0):null==e&&("string"===typeof b?(e=c,c=void 0):(e=c,c=b,b=void 0));if(!1===e)e=x;else if(!e)return this;1===d&&(f=e,e=function(a){m().off(a);return f.apply(this,arguments)},e.guid=f.guid||(f.guid=m.guid++));return this.each(function(){m.event.add(this,a,e,c,b)})},one:function(a,b,c,e){return this.on(a,b,c,e,1)},off:function(a,b,c){var e;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,m(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),
this;if("object"===typeof a){for(e in a)this.off(e,b,a[e]);return this}if(!1===b||"function"===typeof b)c=b,b=void 0;!1===c&&(c=x);return this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return m.event.trigger(a,b,c,!0)}});var sb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ha=/<([\w:]+)/,Jb=/<|&#?\w+;/,Kb=/<(?:script|style|link)/i,tb=/checked\s*(?:[^=]|=\s*.checked.)/i,
gb=/^$|\/(?:java|ecma)script/i,ab=/^true\/(.*)/,Lb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ka={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ka.optgroup=ka.option;ka.tbody=ka.tfoot=ka.colgroup=ka.caption=ka.thead;ka.th=ka.td;m.extend({clone:function(a,b,c){var d,f,h,g,p=a.cloneNode(!0),l=m.contains(a.ownerDocument,
a);if(!(T.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(g=e(p),h=e(a),d=0,f=h.length;d<f;d++){var k=h[d],t=g[d],w=t.nodeName.toLowerCase();if("input"===w&&qb.test(k.type))t.checked=k.checked;else if("input"===w||"textarea"===w)t.defaultValue=k.defaultValue}if(b)if(c)for(h=h||e(a),g=g||e(p),d=0,f=h.length;d<f;d++)C(h[d],g[d]);else C(a,p);g=e(p,"script");0<g.length&&B(g,!l&&e(a,"script"));return p},buildFragment:function(a,b,c,d){for(var f,h,g,p=b.createDocumentFragment(),l=[],
k=0,t=a.length;k<t;k++)if((f=a[k])||0===f)if("object"===m.type(f))m.merge(l,f.nodeType?[f]:f);else if(Jb.test(f)){h=h||p.appendChild(b.createElement("div"));g=(Ha.exec(f)||["",""])[1].toLowerCase();g=ka[g]||ka._default;h.innerHTML=g[1]+f.replace(sb,"<$1></$2>")+g[2];for(g=g[0];g--;)h=h.lastChild;m.merge(l,h.childNodes);h=p.firstChild;h.textContent=""}else l.push(b.createTextNode(f));p.textContent="";for(k=0;f=l[k++];)if(!d||-1===m.inArray(f,d))if(a=m.contains(f.ownerDocument,f),h=e(p.appendChild(f),
"script"),a&&B(h),c)for(g=0;f=h[g++];)gb.test(f.type||"")&&c.push(f);return p},cleanData:function(a){for(var b,c,e,d,f=m.event.special,h=0;void 0!==(c=a[h]);h++){if(m.acceptData(c)&&(d=c[L.expando])&&(b=L.cache[d])){if(b.events)for(e in b.events)f[e]?m.event.remove(c,e):m.removeEvent(c,e,b.handle);L.cache[d]&&delete L.cache[d]}delete R.cache[c[R.expando]]}}});m.fn.extend({text:function(a){return za(this,function(a){return void 0===a?m.text(this):this.empty().each(function(){if(1===this.nodeType||
11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||u(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=u(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,
this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,f=0;null!=(c=d[f]);f++)b||1!==c.nodeType||m.cleanData(e(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&B(e(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(m.cleanData(e(a,!1)),a.textContent="");return this},clone:function(a,
b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return m.clone(this,a,b)})},html:function(a){return za(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"===typeof a&&!Kb.test(a)&&!ka[(Ha.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(sb,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(e(b,!1)),b.innerHTML=a);b=0}catch(f){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=
arguments[0];this.domManip(arguments,function(b){a=this.parentNode;m.cleanData(e(this));a&&a.replaceChild(b,this)});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=ra.apply([],a);var c,d,f,h,g=0,p=this.length,l=this,k=p-1,t=a[0],w=m.isFunction(t);if(w||1<p&&"string"===typeof t&&!T.checkClone&&tb.test(t))return this.each(function(c){var e=l.eq(c);w&&(a[0]=t.call(this,c,e.html()));e.domManip(a,b)});if(p&&(c=m.buildFragment(a,
this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){d=m.map(e(c,"script"),v);for(f=d.length;g<p;g++)h=c,g!==k&&(h=m.clone(h,!0,!0),f&&m.merge(d,e(h,"script"))),b.call(this[g],h,g);if(f)for(c=d[d.length-1].ownerDocument,m.map(d,q),g=0;g<f;g++)h=d[g],gb.test(h.type||"")&&!L.access(h,"globalEval")&&m.contains(c,h)&&(h.src?m._evalUrl&&m._evalUrl(h.src):m.globalEval(h.textContent.replace(Lb,"")))}return this}});m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",
insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c=[],e=m(a),d=e.length-1,f=0;f<=d;f++)a=f===d?this:this.clone(!0),m(e[f])[b](a),sa.apply(c,a.get());return this.pushStack(c)}});var Ra,Qa={},Fa=/^margin/,pa=new RegExp("^("+ha+")(?!px)[a-z%]+$","i"),Sa=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};(function(){function a(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";
h.innerHTML="";d.appendChild(f);var g=c.getComputedStyle(h,null);b="1%"!==g.top;e="4px"===g.width;d.removeChild(f)}var b,e,d=O.documentElement,f=O.createElement("div"),h=O.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",T.clearCloneStyle="content-box"===h.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",f.appendChild(h),c.getComputedStyle&&m.extend(T,{pixelPosition:function(){a();
return b},boxSizingReliable:function(){null==e&&a();return e},reliableMarginRight:function(){var a;a=h.appendChild(O.createElement("div"));a.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";a.style.marginRight=a.style.width="0";h.style.width="1px";d.appendChild(f);a=!parseFloat(c.getComputedStyle(a,null).marginRight);d.removeChild(f);return a}}))})();m.swap=function(a,b,c,e){var d,f={};for(d in b)f[d]=
a.style[d],a.style[d]=b[d];c=c.apply(a,e||[]);for(d in b)a.style[d]=f[d];return c};var ub=/^(none|table(?!-c[ea]).+)/,na=new RegExp("^("+ha+")(.*)$","i"),da=new RegExp("^([+-])=("+ha+")","i"),vb={position:"absolute",visibility:"hidden",display:"block"},hb={letterSpacing:"0",fontWeight:"400"},ia=["Webkit","O","Moz","ms"];m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=A(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,
opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var d,f,h,g=m.camelCase(b),p=a.style;b=m.cssProps[g]||(m.cssProps[g]=y(p,g));h=m.cssHooks[b]||m.cssHooks[g];if(void 0!==c)f=typeof c,"string"===f&&(d=da.exec(c))&&(c=(d[1]+1)*d[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[g]||(c+="px"),T.clearCloneStyle||""!==c||0!==b.indexOf("background")||(p[b]="inherit"),
h&&"set"in h&&void 0===(c=h.set(a,c,e))||(p[b]=c));else return h&&"get"in h&&void 0!==(d=h.get(a,!1,e))?d:p[b]}},css:function(a,b,c,e){var d,f;f=m.camelCase(b);b=m.cssProps[f]||(m.cssProps[f]=y(a.style,f));(f=m.cssHooks[b]||m.cssHooks[f])&&"get"in f&&(d=f.get(a,!0,c));void 0===d&&(d=A(a,b,e));"normal"===d&&b in hb&&(d=hb[b]);return""===c||c?(a=parseFloat(d),!0===c||m.isNumeric(a)?a||0:d):d}});m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,e){if(c)return ub.test(m.css(a,"display"))&&
0===a.offsetWidth?m.swap(a,vb,function(){return P(a,b,e)}):P(a,b,e)},set:function(a,c,e){var d=e&&Sa(a);return M(a,c,e?J(a,b,e,"border-box"===m.css(a,"boxSizing",!1,d),d):0)}}});m.cssHooks.marginRight=H(T.reliableMarginRight,function(a,b){if(b)return m.swap(a,{display:"inline-block"},A,[a,"marginRight"])});m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){var e=0,d={};for(c="string"===typeof c?c.split(" "):[c];4>e;e++)d[a+Aa[e]+b]=c[e]||c[e-2]||c[0];return d}};
Fa.test(a)||(m.cssHooks[a+b].set=M)});m.fn.extend({css:function(a,b){return za(this,function(a,b,c){var e,d={},f=0;if(m.isArray(b)){c=Sa(a);for(e=b.length;f<e;f++)d[b[f]]=m.css(a,b[f],!1,c);return d}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,1<arguments.length)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){Ca(this)?m(this).show():m(this).hide()})}});m.Tween=E;E.prototype={constructor:E,
init:function(a,b,c,e,d,f){this.elem=a;this.prop=c;this.easing=d||"swing";this.options=b;this.start=this.now=this.cur();this.end=e;this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=E.propHooks[this.prop];return a&&a.get?a.get(this):E.propHooks._default.get(this)},run:function(a){var b,c=E.propHooks[this.prop];this.pos=this.options.duration?b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,
this.now,this);c&&c.set?c.set(this):E.propHooks._default.set(this);return this}};E.prototype.init.prototype=E.prototype;E.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=m.css(a.elem,a.prop,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(m.fx.step[a.prop])m.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};E.propHooks.scrollTop=
E.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};m.fx=E.prototype.init;m.fx.step={};var Da,Wa,Mb=/^(?:toggle|show|hide)$/,D=new RegExp("^(?:([+-])=|)("+ha+")([a-z%]*)$","i"),ea=/queueHooks$/,U=[function(a,b,c){var e,d,f,h,g,p,l=this,t={},w=a.style,F=a.nodeType&&Ca(a),K=L.get(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,g=h.empty.fire,
h.empty.fire=function(){h.unqueued||g()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--;m.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[w.overflow,w.overflowX,w.overflowY],p=m.css(a,"display"),d="none"===p?L.get(a,"olddisplay")||z(a.nodeName):p,"inline"===d&&"none"===m.css(a,"float")&&(w.display="inline-block"));c.overflow&&(w.overflow="hidden",l.always(function(){w.overflow=c.overflow[0];w.overflowX=c.overflow[1];w.overflowY=
c.overflow[2]}));for(e in b)if(d=b[e],Mb.exec(d)){delete b[e];f=f||"toggle"===d;if(d===(F?"hide":"show"))if("show"===d&&K&&void 0!==K[e])F=!0;else continue;t[e]=K&&K[e]||m.style(a,e)}else p=void 0;if(m.isEmptyObject(t))"inline"===("none"===p?z(a.nodeName):p)&&(w.display=p);else for(e in K?"hidden"in K&&(F=K.hidden):K=L.access(a,"fxshow",{}),f&&(K.hidden=!F),F?m(a).show():l.done(function(){m(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in t)m.style(a,b,t[b])}),t)b=ba(F?K[e]:0,e,l),
e in K||(K[e]=b.start,F&&(b.end=b.start,b.start="width"===e||"height"===e?1:0))}],I={"*":[function(a,b){var c=this.createTween(a,b),e=c.cur(),d=D.exec(b),f=d&&d[3]||(m.cssNumber[a]?"":"px"),h=(m.cssNumber[a]||"px"!==f&&+e)&&D.exec(m.css(c.elem,a)),g=1,p=20;if(h&&h[3]!==f){f=f||h[3];d=d||[];h=+e||1;do g=g||".5",h/=g,m.style(c.elem,a,h+f);while(g!==(g=c.cur()/e)&&1!==g&&--p)}d&&(h=c.start=+h||+e||0,c.unit=f,c.end=d[1]?h+(d[1]+1)*d[2]:+d[2]);return c}]};m.Animation=m.extend(N,{tweener:function(a,b){m.isFunction(a)?
(b=a,a=["*"]):a=a.split(" ");for(var c,e=0,d=a.length;e<d;e++)c=a[e],I[c]=I[c]||[],I[c].unshift(b)},prefilter:function(a,b){b?U.unshift(a):U.push(a)}});m.speed=function(a,b,c){var e=a&&"object"===typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};e.duration=m.fx.off?0:"number"===typeof e.duration?e.duration:e.duration in m.fx.speeds?m.fx.speeds[e.duration]:m.fx.speeds._default;if(null==e.queue||!0===e.queue)e.queue="fx";e.old=e.complete;
e.complete=function(){m.isFunction(e.old)&&e.old.call(this);e.queue&&m.dequeue(this,e.queue)};return e};m.fn.extend({fadeTo:function(a,b,c,e){return this.filter(Ca).css("opacity",0).show().end().animate({opacity:b},a,c,e)},animate:function(a,b,c,e){var d=m.isEmptyObject(a),f=m.speed(b,c,e);b=function(){var b=N(this,m.extend({},a),f);(d||L.get(this,"finish"))&&b.stop(!0)};b.finish=b;return d||!1===f.queue?this.each(b):this.queue(f.queue,b)},stop:function(a,b,c){var e=function(a){var b=a.stop;delete a.stop;
b(c)};"string"!==typeof a&&(c=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,d=null!=a&&a+"queueHooks",f=m.timers,h=L.get(this);if(d)h[d]&&h[d].stop&&e(h[d]);else for(d in h)h[d]&&h[d].stop&&ea.test(d)&&e(h[d]);for(d=f.length;d--;)f[d].elem!==this||null!=a&&f[d].queue!==a||(f[d].anim.stop(c),b=!1,f.splice(d,1));!b&&c||m.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,c=L.get(this),e=c[a+"queue"];b=c[a+"queueHooks"];
var d=m.timers,f=e?e.length:0;c.finish=!0;m.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=d.length;b--;)d[b].elem===this&&d[b].queue===a&&(d[b].anim.stop(!0),d.splice(b,1));for(b=0;b<f;b++)e[b]&&e[b].finish&&e[b].finish.call(this);delete c.finish})}});m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,e,d){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(ga(b,!0),a,e,d)}});m.each({slideDown:ga("show"),slideUp:ga("hide"),slideToggle:ga("toggle"),
fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,e){return this.animate(b,a,c,e)}});m.timers=[];m.fx.tick=function(){var a,b=0,c=m.timers;for(Da=m.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||m.fx.stop();Da=void 0};m.fx.timer=function(a){m.timers.push(a);a()?m.fx.start():m.timers.pop()};m.fx.interval=13;m.fx.start=function(){Wa||(Wa=setInterval(m.fx.tick,m.fx.interval))};m.fx.stop=function(){clearInterval(Wa);
Wa=null};m.fx.speeds={slow:600,fast:200,_default:400};m.fn.delay=function(a,b){a=m.fx?m.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var e=setTimeout(b,a);c.stop=function(){clearTimeout(e)}})};(function(){var a=O.createElement("input"),b=O.createElement("select"),c=b.appendChild(O.createElement("option"));a.type="checkbox";T.checkOn=""!==a.value;T.optSelected=c.selected;b.disabled=!0;T.optDisabled=!c.disabled;a=O.createElement("input");a.value="t";a.type="radio";T.radioValue="t"===a.value})();
var Y,Ia=m.expr.attrHandle;m.fn.extend({attr:function(a,b){return za(this,m.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}});m.extend({attr:function(a,b,c){var e,d,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){if("undefined"===typeof a.getAttribute)return m.prop(a,b,c);1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),e=m.attrHooks[b]||(m.expr.match.bool.test(b)?Y:void 0));if(void 0!==c)if(null===c)m.removeAttr(a,b);else{if(e&&"set"in e&&void 0!==(d=e.set(a,
c,b)))return d;a.setAttribute(b,c+"");return c}else{if(e&&"get"in e&&null!==(d=e.get(a,b)))return d;d=m.find.attr(a,b);return null==d?void 0:d}}},removeAttr:function(a,b){var c,e,d=0,f=b&&b.match(ua);if(f&&1===a.nodeType)for(;c=f[d++];)e=m.propFix[c]||c,m.expr.match.bool.test(c)&&(a[e]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!T.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}}});Y={set:function(a,b,c){!1===b?
m.removeAttr(a,c):a.setAttribute(c,c);return c}};m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=Ia[b]||m.find.attr;Ia[b]=function(a,b,e){var d,f;e||(f=Ia[b],Ia[b]=d,d=null!=c(a,b,e)?b.toLowerCase():null,Ia[b]=f);return d}});var Nb=/^(?:input|select|textarea|button)$/i;m.fn.extend({prop:function(a,b){return za(this,m.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[m.propFix[a]||a]})}});m.extend({propFix:{"for":"htmlFor","class":"className"},
prop:function(a,b,c){var e,d,f;f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){if(f=1!==f||!m.isXMLDoc(a))b=m.propFix[b]||b,d=m.propHooks[b];return void 0!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:a[b]=c:d&&"get"in d&&null!==(e=d.get(a,b))?e:a[b]}},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||Nb.test(a.nodeName)||a.href?a.tabIndex:-1}}}});T.optSelected||(m.propHooks.selected={get:function(a){(a=a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null}});m.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){m.propFix[this.toLowerCase()]=this});var Na=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,e,d,f;b="string"===typeof a&&a;var h=0,g=this.length;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ua)||[];h<g;h++)if(c=this[h],e=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Na," "):" ")){for(f=0;d=b[f++];)0>e.indexOf(" "+d+" ")&&(e+=d+" ");e=m.trim(e);c.className!==e&&(c.className=e)}return this},
removeClass:function(a){var b,c,e,d,f;b=0===arguments.length||"string"===typeof a&&a;var h=0,g=this.length;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ua)||[];h<g;h++)if(c=this[h],e=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Na," "):"")){for(f=0;d=b[f++];)for(;0<=e.indexOf(" "+d+" ");)e=e.replace(" "+d+" "," ");e=a?m.trim(e):"";c.className!==e&&(c.className=e)}return this},toggleClass:function(a,b){var c=
typeof a;return"boolean"===typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):m.isFunction(a)?this.each(function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,e=0,d=m(this),f=a.match(ua)||[];b=f[e++];)d.hasClass(b)?d.removeClass(b):d.addClass(b);else if("undefined"===c||"boolean"===c)this.className&&L.set(this,"__className__",this.className),this.className=this.className||!1===a?"":L.get(this,"__className__")||""})},hasClass:function(a){a=
" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Na," ").indexOf(a))return!0;return!1}});var Sb=/\r/g;m.fn.extend({val:function(a){var b,c,e,d=this[0];if(arguments.length)return e=m.isFunction(a),this.each(function(c){1===this.nodeType&&(c=e?a.call(this,c,m(this).val()):a,null==c?c="":"number"===typeof c?c+="":m.isArray(c)&&(c=m.map(c,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&
"set"in b&&void 0!==b.set(this,c,"value")||(this.value=c))});if(d){if((b=m.valHooks[d.type]||m.valHooks[d.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(d,"value")))return c;c=d.value;return"string"===typeof c?c.replace(Sb,""):null==c?"":c}}});m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c=a.options,e=a.selectedIndex,d=(a="select-one"===a.type||0>e)?null:[],f=a?e+1:c.length,h=0>e?f:a?e:0;h<f;h++)if(b=
c[h],!(!b.selected&&h!==e||(T.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&m.nodeName(b.parentNode,"optgroup"))){b=m(b).val();if(a)return b;d.push(b)}return d},set:function(a,b){for(var c,e,d=a.options,f=m.makeArray(b),h=d.length;h--;)if(e=d[h],e.selected=0<=m.inArray(e.value,f))c=!0;c||(a.selectedIndex=-1);return f}}}});m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){if(m.isArray(b))return a.checked=0<=m.inArray(m(a).val(),b)}};T.checkOn||
(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,
b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,e){return this.on(b,a,c,e)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var wb=m.now(),xb=/\?/;m.parseJSON=function(a){return JSON.parse(a+"")};m.parseXML=function(a){var b,c;if(!a||"string"!==typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(e){b=void 0}b&&!b.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+
a);return b};var Ba,la,Ob=/#.*$/,yb=/([?&])_=[^&]*/,zb=/^(.*?):[ \t]*([^\r\n]*)$/mg,Pb=/^(?:GET|HEAD)$/,va=/^\/\//,Oa=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ja={},bb={},ib="*/".concat("*");try{la=location.href}catch(qa){la=O.createElement("a"),la.href="",la=la.href}Ba=Oa.exec(la.toLowerCase())||[];m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:la,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ba[1]),global:!0,processData:!0,async:!0,
contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ib,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?aa(aa(a,m.ajaxSettings),b):aa(m.ajaxSettings,
a)},ajaxPrefilter:X(Ja),ajaxTransport:X(bb),ajax:function(a,b){function c(a,b,t,h){var p,q,r,u;u=b;if(2!==A){A=2;g&&clearTimeout(g);e=void 0;f=h||"";H.readyState=0<a?4:0;h=200<=a&&300>a||304===a;if(t){r=w;for(var n=H,x,J,v,B,Ma=r.contents,y=r.dataTypes;"*"===y[0];)y.shift(),void 0===x&&(x=r.mimeType||n.getResponseHeader("Content-Type"));if(x)for(J in Ma)if(Ma[J]&&Ma[J].test(x)){y.unshift(J);break}if(y[0]in t)v=y[0];else{for(J in t){if(!y[0]||r.converters[J+" "+y[0]]){v=J;break}B||(B=J)}v=v||B}v?(v!==
y[0]&&y.unshift(v),r=t[v]):r=void 0}a:{t=w;x=r;J=H;v=h;var Fb,E,M,n={},Ma=t.dataTypes.slice();if(Ma[1])for(E in t.converters)n[E.toLowerCase()]=t.converters[E];for(B=Ma.shift();B;)if(t.responseFields[B]&&(J[t.responseFields[B]]=x),!M&&v&&t.dataFilter&&(x=t.dataFilter(x,t.dataType)),M=B,B=Ma.shift())if("*"===B)B=M;else if("*"!==M&&M!==B){E=n[M+" "+B]||n["* "+B];if(!E)for(Fb in n)if(r=Fb.split(" "),r[1]===B&&(E=n[M+" "+r[0]]||n["* "+r[0]])){!0===E?E=n[Fb]:!0!==n[Fb]&&(B=r[0],Ma.unshift(r[1]));break}if(!0!==
E)if(E&&t["throws"])x=E(x);else try{x=E(x)}catch(Q){r={state:"parsererror",error:E?Q:"No conversion from "+M+" to "+B};break a}}r={state:"success",data:x}}if(h)w.ifModified&&((u=H.getResponseHeader("Last-Modified"))&&(m.lastModified[d]=u),(u=H.getResponseHeader("etag"))&&(m.etag[d]=u)),204===a||"HEAD"===w.type?u="nocontent":304===a?u="notmodified":(u=r.state,p=r.data,q=r.error,h=!q);else if(q=u,a||!u)u="error",0>a&&(a=0);H.status=a;H.statusText=(b||u)+"";h?k.resolveWith(F,[p,u,H]):k.rejectWith(F,
[H,u,q]);H.statusCode(z);z=void 0;l&&K.trigger(h?"ajaxSuccess":"ajaxError",[H,w,h?p:q]);Ea.fireWith(F,[H,u]);l&&(K.trigger("ajaxComplete",[H,w]),--m.active||m.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);b=b||{};var e,d,f,h,g,p,l,t,w=m.ajaxSetup({},b),F=w.context||w,K=w.context&&(F.nodeType||F.jquery)?m(F):m.event,k=m.Deferred(),Ea=m.Callbacks("once memory"),z=w.statusCode||{},q={},r={},A=0,u="canceled",H={readyState:0,getResponseHeader:function(a){var b;if(2===A){if(!h)for(h={};b=
zb.exec(f);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===A?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();A||(a=r[c]=r[c]||a,q[a]=b);return this},overrideMimeType:function(a){A||(w.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>A)for(b in a)z[b]=[z[b],a[b]];else H.always(a[H.status]);return this},abort:function(a){a=a||u;e&&e.abort(a);c(0,a);return this}};k.promise(H).complete=Ea.add;H.success=H.done;
H.error=H.fail;w.url=((a||w.url||la)+"").replace(Ob,"").replace(va,Ba[1]+"//");w.type=b.method||b.type||w.method||w.type;w.dataTypes=m.trim(w.dataType||"*").toLowerCase().match(ua)||[""];null==w.crossDomain&&(p=Oa.exec(w.url.toLowerCase()),w.crossDomain=!(!p||p[1]===Ba[1]&&p[2]===Ba[2]&&(p[3]||("http:"===p[1]?"80":"443"))===(Ba[3]||("http:"===Ba[1]?"80":"443"))));w.data&&w.processData&&"string"!==typeof w.data&&(w.data=m.param(w.data,w.traditional));ma(Ja,w,b,H);if(2===A)return H;(l=w.global)&&0===
m.active++&&m.event.trigger("ajaxStart");w.type=w.type.toUpperCase();w.hasContent=!Pb.test(w.type);d=w.url;w.hasContent||(w.data&&(d=w.url+=(xb.test(d)?"&":"?")+w.data,delete w.data),!1===w.cache&&(w.url=yb.test(d)?d.replace(yb,"$1_="+wb++):d+(xb.test(d)?"&":"?")+"_="+wb++));w.ifModified&&(m.lastModified[d]&&H.setRequestHeader("If-Modified-Since",m.lastModified[d]),m.etag[d]&&H.setRequestHeader("If-None-Match",m.etag[d]));(w.data&&w.hasContent&&!1!==w.contentType||b.contentType)&&H.setRequestHeader("Content-Type",
w.contentType);H.setRequestHeader("Accept",w.dataTypes[0]&&w.accepts[w.dataTypes[0]]?w.accepts[w.dataTypes[0]]+("*"!==w.dataTypes[0]?", "+ib+"; q=0.01":""):w.accepts["*"]);for(t in w.headers)H.setRequestHeader(t,w.headers[t]);if(w.beforeSend&&(!1===w.beforeSend.call(F,H,w)||2===A))return H.abort();u="abort";for(t in{success:1,error:1,complete:1})H[t](w[t]);if(e=ma(bb,w,b,H)){H.readyState=1;l&&K.trigger("ajaxSend",[H,w]);w.async&&0<w.timeout&&(g=setTimeout(function(){H.abort("timeout")},w.timeout));
try{A=1,e.send(q,c)}catch(n){if(2>A)c(-1,n);else throw n;}}else c(-1,"No Transport");return H},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}});m.each(["get","post"],function(a,b){m[b]=function(a,c,e,d){m.isFunction(c)&&(d=d||e,e=c,c=void 0);return m.ajax({url:a,type:b,dataType:d,data:c,success:e})}});m.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){m.fn[b]=function(a){return this.on(b,
a)}});m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};m.fn.extend({wrapAll:function(a){var b;if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});this[0]&&(b=m(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this));return this},wrapInner:function(a){return m.isFunction(a)?this.each(function(b){m(this).wrapInner(a.call(this,
b))}):this.each(function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}});m.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight};m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Xa=/%20/g,La=/\[\]$/,Ya=
/\r?\n/g,Tb=/^(?:submit|button|image|reset|file)$/i,Ub=/^(?:input|select|textarea|keygen)/i;m.param=function(a,b){var c,e=[],d=function(a,b){b=m.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional);if(m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){d(this.name,this.value)});else for(c in a)W(c,a[c],b,d);return e.join("&").replace(Xa,"+")};m.fn.extend({serialize:function(){return m.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Ub.test(this.nodeName)&&!Tb.test(a)&&(this.checked||!qb.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Ya,"\r\n")}}):{name:b.name,value:c.replace(Ya,"\r\n")}}).get()}});m.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};
var Qb=0,fa={},Vb={0:200,1223:204},Za=m.ajaxSettings.xhr();if(c.ActiveXObject)m(c).on("unload",function(){for(var a in fa)fa[a]()});T.cors=!!Za&&"withCredentials"in Za;T.ajax=Za=!!Za;m.ajaxTransport(function(a){var b;if(T.cors||Za&&!a.crossDomain)return{send:function(c,e){var d,f=a.xhr(),h=++Qb;f.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(d in a.xhrFields)f[d]=a.xhrFields[d];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||
(c["X-Requested-With"]="XMLHttpRequest");for(d in c)f.setRequestHeader(d,c[d]);b=function(a){return function(){b&&(delete fa[h],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?e(f.status,f.statusText):e(Vb[f.status]||f.status,f.statusText,"string"===typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}};f.onload=b();f.onerror=b("error");b=fa[h]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(g){if(b)throw g;}},abort:function(){b&&b()}}});m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){m.globalEval(a);return a}}});m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,d){b=m("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&d("error"===a.type?404:200,a.type)});O.head.appendChild(b[0])},abort:function(){c&&c()}}}});
var Ab=[],$a=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ab.pop()||m.expando+"_"+wb++;this[a]=!0;return a}});m.ajaxPrefilter("json jsonp",function(a,b,e){var d,f,h,g=!1!==a.jsonp&&($a.test(a.url)?"url":"string"===typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&$a.test(a.data)&&"data");if(g||"jsonp"===a.dataTypes[0])return d=a.jsonpCallback=m.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g?a[g]=a[g].replace($a,"$1"+
d):!1!==a.jsonp&&(a.url+=(xb.test(a.url)?"&":"?")+a.jsonp+"="+d),a.converters["script json"]=function(){h||m.error(d+" was not called");return h[0]},a.dataTypes[0]="json",f=c[d],c[d]=function(){h=arguments},e.always(function(){c[d]=f;a[d]&&(a.jsonpCallback=b.jsonpCallback,Ab.push(d));h&&m.isFunction(f)&&f(h[0]);h=f=void 0}),"script"});m.parseHTML=function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||O;var e=pb.exec(a);c=!c&&[];if(e)return[b.createElement(e[1])];
e=m.buildFragment([a],b,c);c&&c.length&&m(c).remove();return m.merge([],e.childNodes)};var jb=m.fn.load;m.fn.load=function(a,b,c){if("string"!==typeof a&&jb)return jb.apply(this,arguments);var e,d,f,h=this,g=a.indexOf(" ");0<=g&&(e=m.trim(a.slice(g)),a=a.slice(0,g));m.isFunction(b)?(c=b,b=void 0):b&&"object"===typeof b&&(d="POST");0<h.length&&m.ajax({url:a,type:d,dataType:"html",data:b}).done(function(a){f=arguments;h.html(e?m("<div>").append(m.parseHTML(a)).find(e):a)}).complete(c&&function(a,b){h.each(c,
f||[a.responseText,b,a])});return this};m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var kb=c.document.documentElement;m.offset={setOffset:function(a,b,c){var e,d,f,h=m.css(a,"position"),g=m(a),p={};"static"===h&&(a.style.position="relative");f=g.offset();d=m.css(a,"top");e=m.css(a,"left");("absolute"===h||"fixed"===h)&&-1<(d+e).indexOf("auto")?(e=g.position(),d=e.top,e=e.left):(d=parseFloat(d)||0,e=parseFloat(e)||0);m.isFunction(b)&&(b=b.call(a,
c,f));null!=b.top&&(p.top=b.top-f.top+d);null!=b.left&&(p.left=b.left-f.left+e);"using"in b?b.using.call(a,p):g.css(p)}};m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c;c=this[0];var e={top:0,left:0},d=c&&c.ownerDocument;if(d){b=d.documentElement;if(!m.contains(b,c))return e;"undefined"!==typeof c.getBoundingClientRect&&(e=c.getBoundingClientRect());c=ja(d);return{top:e.top+c.pageYOffset-b.clientTop,left:e.left+
c.pageXOffset-b.clientLeft}}},position:function(){if(this[0]){var a,b,c=this[0],e={top:0,left:0};"fixed"===m.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(e=a.offset()),e.top+=m.css(a[0],"borderTopWidth",!0),e.left+=m.css(a[0],"borderLeftWidth",!0));return{top:b.top-e.top-m.css(c,"marginTop",!0),left:b.left-e.left-m.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||kb;a&&!m.nodeName(a,
"html")&&"static"===m.css(a,"position");)a=a.offsetParent;return a||kb})}});m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var e="pageYOffset"===b;m.fn[a]=function(d){return za(this,function(a,d,f){var h=ja(a);if(void 0===f)return h?h[b]:a[d];h?h.scrollTo(e?c.pageXOffset:f,e?f:c.pageYOffset):a[d]=f},a,d,arguments.length,null)}});m.each(["top","left"],function(a,b){m.cssHooks[b]=H(T.pixelPosition,function(a,c){if(c)return c=A(a,b),pa.test(c)?m(a).position()[b]+"px":c})});m.each({Height:"height",
Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,e){m.fn[e]=function(e,d){var f=arguments.length&&(c||"boolean"!==typeof e),h=c||(!0===e||!0===d?"margin":"border");return za(this,function(b,c,e){return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===e?m.css(b,c,h):m.style(b,c,e,h)},b,f?e:void 0,f,null)}})});m.fn.size=
function(){return this.length};m.fn.andSelf=m.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return m});var lb=c.jQuery,Wb=c.$;m.noConflict=function(a){c.$===m&&(c.$=Wb);a&&c.jQuery===m&&(c.jQuery=lb);return m};"undefined"===typeof n&&(c.jQuery=c.$=m);return m});/*
   Copyright 2008-2014 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net
*/
(function(c,n,b){(function(a){"function"===typeof define&&define.amd?define("datatables",["jquery"],a):"object"===typeof exports?a(require("jquery")):jQuery&&!jQuery.fn.dataTable&&a(jQuery)})(function(a){function k(b){var c,e,d={};a.each(b,function(a,f){(c=a.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(c[1]+" ")&&(e=a.replace(c[0],c[2].toLowerCase()),d[e]=a,"o"===c[1]&&k(b[a]))});b._hungarianMap=d}function f(c,e,d){c._hungarianMap||k(c);var h;a.each(e,function(g,p){h=c._hungarianMap[g];
h===b||!d&&e[h]!==b||("o"===h.charAt(0)?(e[h]||(e[h]={}),a.extend(!0,e[h],e[g]),f(c[h],e[h],d)):e[h]=e[g])})}function d(a){var b=D.defaults.oLanguage,c=a.sZeroRecords;!a.sEmptyTable&&c&&"No data available in table"===b.sEmptyTable&&pa(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&c&&"Loading..."===b.sLoadingRecords&&pa(a,a,"sZeroRecords","sLoadingRecords");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&Wa(a)}function r(a){qa(a,"ordering","bSort");qa(a,"orderMulti","bSortMulti");
qa(a,"orderClasses","bSortClasses");qa(a,"orderCellsTop","bSortCellsTop");qa(a,"order","aaSorting");qa(a,"orderFixed","aaSortingFixed");qa(a,"paging","bPaginate");qa(a,"pagingType","sPaginationType");qa(a,"pageLength","iDisplayLength");qa(a,"searching","bFilter");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&f(D.models.oSearch,a[b])}function g(a){qa(a,"orderable","bSortable");qa(a,"orderData","aDataSort");qa(a,"orderSequence","asSorting");qa(a,"orderDataType","sortDataType")}function l(b){b=
b.oBrowser;var c=a("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(a("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(a('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),e=c.find(".test");b.bScrollOversize=100===e[0].offsetWidth;b.bScrollbarLeft=1!==e.offset().left;c.remove()}function x(a,c,e,d,f,h){var g,p=!1;e!==b&&(g=e,p=!0);for(;d!==f;)a.hasOwnProperty(d)&&(g=p?c(g,a[d],d,a):a[d],p=!0,d+=h);return g}
function h(b,c){var e=D.defaults.column,d=b.aoColumns.length,e=a.extend({},D.models.oColumn,e,{nTh:c?c:n.createElement("th"),sTitle:e.sTitle?e.sTitle:c?c.innerHTML:"",aDataSort:e.aDataSort?e.aDataSort:[d],mData:e.mData?e.mData:d,idx:d});b.aoColumns.push(e);e=b.aoPreSearchCols;e[d]=a.extend({},D.models.oSearch,e[d]);u(b,d,null)}function u(c,e,d){e=c.aoColumns[e];var h=c.oClasses,p=a(e.nTh);if(!e.sWidthOrig){e.sWidthOrig=p.attr("width")||null;var l=(p.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);
l&&(e.sWidthOrig=l[1])}d!==b&&null!==d&&(g(d),f(D.defaults.column,d),d.mDataProp===b||d.mData||(d.mData=d.mDataProp),d.sType&&(e._sManualType=d.sType),d.className&&!d.sClass&&(d.sClass=d.className),a.extend(e,d),pa(e,d,"sWidth","sWidthOrig"),"number"===typeof d.iDataSort&&(e.aDataSort=[d.iDataSort]),pa(e,d,"aDataSort"));var k=e.mData,m=P(k),z=e.mRender?P(e.mRender):null;d=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};e._bAttrSrc=a.isPlainObject(k)&&(d(k.sort)||d(k.type)||d(k.filter));
e.fnGetData=function(a,c,e){var d=m(a,c,b,e);return z&&c?z(d,c,a,e):d};e.fnSetData=function(a,b,c){return S(k)(a,b,c)};"number"!==typeof k&&(c._rowReadObject=!0);c.oFeatures.bSort||(e.bSortable=!1,p.addClass(h.sSortableNone));c=-1!==a.inArray("asc",e.asSorting);d=-1!==a.inArray("desc",e.asSorting);e.bSortable&&(c||d)?c&&!d?(e.sSortingClass=h.sSortableAsc,e.sSortingClassJUI=h.sSortJUIAscAllowed):!c&&d?(e.sSortingClass=h.sSortableDesc,e.sSortingClassJUI=h.sSortJUIDescAllowed):(e.sSortingClass=h.sSortable,
e.sSortingClassJUI=h.sSortJUI):(e.sSortingClass=h.sSortableNone,e.sSortingClassJUI="")}function v(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Aa(a);for(var c=0,e=b.length;c<e;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;""===b.sY&&""===b.sX||Pa(a);da(a,null,"column-sizing",[a])}function q(a,b){var c=e(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function B(b,c){var d=e(b,"bVisible"),d=a.inArray(c,d);return-1!==d?d:null}function C(a){return e(a,"bVisible").length}function e(b,
c){var e=[];a.map(b.aoColumns,function(a,b){a[c]&&e.push(b)});return e}function p(a){var c=a.aoColumns,e=a.aoData,d=D.ext.type.detect,f,h,g,p,l,k,m,z,q;f=0;for(h=c.length;f<h;f++)if(m=c[f],q=[],!m.sType&&m._sManualType)m.sType=m._sManualType;else if(!m.sType){g=0;for(p=d.length;g<p;g++){l=0;for(k=e.length;l<k;l++){q[l]===b&&(q[l]=y(a,l,f,"type"));z=d[g](q[l],a);if(!z&&g!==d.length-1)break;if("html"===z)break}if(z){m.sType=z;break}}m.sType||(m.sType="string")}}function z(c,e,d,f){var g,p,l,k,m,z,q=
c.aoColumns;if(e)for(g=e.length-1;0<=g;g--){z=e[g];var r=z.targets!==b?z.targets:z.aTargets;a.isArray(r)||(r=[r]);p=0;for(l=r.length;p<l;p++)if("number"===typeof r[p]&&0<=r[p]){for(;q.length<=r[p];)h(c);f(r[p],z)}else if("number"===typeof r[p]&&0>r[p])f(q.length+r[p],z);else if("string"===typeof r[p])for(k=0,m=q.length;k<m;k++)("_all"==r[p]||a(q[k].nTh).hasClass(r[p]))&&f(k,z)}if(d)for(g=0,c=d.length;g<c;g++)f(g,d[g])}function A(b,c,e,d){var f=b.aoData.length,h=a.extend(!0,{},D.models.oRow,{src:e?
"dom":"data"});h._aData=c;b.aoData.push(h);c=b.aoColumns;for(var h=0,g=c.length;h<g;h++)e&&M(b,f,h,y(b,f,h)),c[h].sType=null;b.aiDisplayMaster.push(f);!e&&b.oFeatures.bDeferRender||N(b,f,e,d);return f}function H(b,c){var e;c instanceof a||(c=a(c));return c.map(function(a,c){e=ca(b,c);return A(b,e.data,c,e.cells)})}function y(a,c,e,d){var f=a.iDraw,h=a.aoColumns[e],g=a.aoData[c]._aData,p=h.sDefaultContent;e=h.fnGetData(g,d,{settings:a,row:c,col:e});if(e===b)return a.iDrawError!=f&&null===p&&(Fa(a,
0,"Requested unknown parameter "+("function"==typeof h.mData?"{function}":"'"+h.mData+"'")+" for row "+c,4),a.iDrawError=f),p;if((e===g||null===e)&&null!==p)e=p;else if("function"===typeof e)return e.call(g);return null===e&&"display"==d?"":e}function M(a,b,c,e){a.aoColumns[c].fnSetData(a.aoData[b]._aData,e,{settings:a,row:b,col:c})}function J(b){return a.map(b.match(/(\\.|[^\.])+/g),function(a){return a.replace(/\\./g,".")})}function P(c){if(a.isPlainObject(c)){var e={};a.each(c,function(a,b){b&&
(e[a]=P(b))});return function(a,c,d,t){var f=e[c]||e._;return f!==b?f(a,c,d,t):a}}if(null===c)return function(a){return a};if("function"===typeof c)return function(a,b,e,d){return c(a,b,e,d)};if("string"!==typeof c||-1===c.indexOf(".")&&-1===c.indexOf("[")&&-1===c.indexOf("("))return function(a,b){return a[c]};var d=function(a,c,e){var t,f;if(""!==e){f=J(e);for(var h=0,g=f.length;h<g;h++){e=f[h].match(Xa);t=f[h].match(La);if(e){f[h]=f[h].replace(Xa,"");""!==f[h]&&(a=a[f[h]]);t=[];f.splice(0,h+1);
f=f.join(".");h=0;for(g=a.length;h<g;h++)t.push(d(a[h],c,f));a=e[0].substring(1,e[0].length-1);a=""===a?t:t.join(a);break}else if(t){f[h]=f[h].replace(La,"");a=a[f[h]]();continue}if(null===a||a[f[h]]===b)return b;a=a[f[h]]}}return a};return function(a,b){return d(a,b,c)}}function S(c){if(a.isPlainObject(c))return S(c._);if(null===c)return function(){};if("function"===typeof c)return function(a,b,e){c(a,"set",b,e)};if("string"!==typeof c||-1===c.indexOf(".")&&-1===c.indexOf("[")&&-1===c.indexOf("("))return function(a,
b){a[c]=b};var e=function(a,c,d){d=J(d);var t;t=d[d.length-1];for(var f,h,g=0,p=d.length-1;g<p;g++){f=d[g].match(Xa);h=d[g].match(La);if(f){d[g]=d[g].replace(Xa,"");a[d[g]]=[];t=d.slice();t.splice(0,g+1);f=t.join(".");h=0;for(p=c.length;h<p;h++)t={},e(t,c[h],f),a[d[g]].push(t);return}h&&(d[g]=d[g].replace(La,""),a=a[d[g]](c));if(null===a[d[g]]||a[d[g]]===b)a[d[g]]={};a=a[d[g]]}if(t.match(La))a[t.replace(La,"")](c);else a[t.replace(Xa,"")]=c};return function(a,b){return e(a,b,c)}}function E(a){return va(a.aoData,
"_aData")}function Q(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0}function ga(a,c,e){for(var d=-1,f=0,h=a.length;f<h;f++)a[f]==c?d=f:a[f]>c&&a[f]--; -1!=d&&e===b&&a.splice(d,1)}function ba(a,c,e,d){var f=a.aoData[c],h,g=function(b,e){for(;b.childNodes.length;)b.removeChild(b.firstChild);b.innerHTML=y(a,c,e,"display")};if("dom"!==e&&(e&&"auto"!==e||"dom"!==f.src)){var p=f.anCells;if(p)if(d!==b)g(p[d],d);else for(e=0,h=p.length;e<h;e++)g(p[e],e)}else f._aData=ca(a,f,d,d===b?
b:f._aData).data;f._aSortData=null;f._aFilterData=null;g=a.aoColumns;if(d!==b)g[d].sType=null;else{e=0;for(h=g.length;e<h;e++)g[e].sType=null;X(f)}}function ca(c,e,d,f){var h=[],g=e.firstChild,p,l=0,k,m=c.aoColumns,z=c._rowReadObject;f=f||z?{}:[];var q=function(a,b){if("string"===typeof a){var c=a.indexOf("@");-1!==c&&(c=a.substring(c+1),S(a)(f,b.getAttribute(c)))}};c=function(c){if(d===b||d===l)p=m[l],k=a.trim(c.innerHTML),p&&p._bAttrSrc?(S(p.mData._)(f,k),q(p.mData.sort,c),q(p.mData.type,c),q(p.mData.filter,
c)):z?(p._setter||(p._setter=S(p.mData)),p._setter(f,k)):f[l]=k;l++};if(g)for(;g;){e=g.nodeName.toUpperCase();if("TD"==e||"TH"==e)c(g),h.push(g);g=g.nextSibling}else for(h=e.anCells,g=0,e=h.length;g<e;g++)c(h[g]);return{data:f,cells:h}}function N(a,b,c,e){var d=a.aoData[b],f=d._aData,h=[],g,p,l,k,m;if(null===d.nTr){g=c||n.createElement("tr");d.nTr=g;d.anCells=h;g._DT_RowIndex=b;X(d);k=0;for(m=a.aoColumns.length;k<m;k++){l=a.aoColumns[k];p=c?e[k]:n.createElement(l.sCellType);h.push(p);if(!c||l.mRender||
l.mData!==k)p.innerHTML=y(a,b,k,"display");l.sClass&&(p.className+=" "+l.sClass);l.bVisible&&!c?g.appendChild(p):!l.bVisible&&c&&p.parentNode.removeChild(p);l.fnCreatedCell&&l.fnCreatedCell.call(a.oInstance,p,y(a,b,k),f,b,k)}da(a,"aoRowCreatedCallback",null,[g,f,b])}d.nTr.setAttribute("role","row")}function X(b){var c=b.nTr,e=b._aData;if(c){e.DT_RowId&&(c.id=e.DT_RowId);if(e.DT_RowClass){var d=e.DT_RowClass.split(" ");b.__rowc=b.__rowc?ib(b.__rowc.concat(d)):d;a(c).removeClass(b.__rowc.join(" ")).addClass(e.DT_RowClass)}e.DT_RowData&&
a(c).data(e.DT_RowData)}}function ma(b){var c,e,d,f,h,g=b.nTHead,p=b.nTFoot,l=0===a("th, td",g).length,k=b.oClasses,m=b.aoColumns;l&&(f=a("<tr/>").appendTo(g));c=0;for(e=m.length;c<e;c++)h=m[c],d=a(h.nTh).addClass(h.sClass),l&&d.appendTo(f),b.oFeatures.bSort&&(d.addClass(h.sSortingClass),!1!==h.bSortable&&(d.attr("tabindex",b.iTabIndex).attr("aria-controls",b.sTableId),gb(b,h.nTh,c))),h.sTitle!=d.html()&&d.html(h.sTitle),hb(b,"header")(b,d,h,k);l&&Z(b.aoHeader,g);a(g).find(">tr").attr("role","row");
a(g).find(">tr>th, >tr>td").addClass(k.sHeaderTH);a(p).find(">tr>th, >tr>td").addClass(k.sFooterTH);if(null!==p)for(b=b.aoFooter[0],c=0,e=b.length;c<e;c++)h=m[c],h.nTf=b[c].cell,h.sClass&&a(h.nTf).addClass(h.sClass)}function aa(c,e,d){var f,h,g,p=[],l=[],k=c.aoColumns.length,m;if(e){d===b&&(d=!1);f=0;for(h=e.length;f<h;f++){p[f]=e[f].slice();p[f].nTr=e[f].nTr;for(g=k-1;0<=g;g--)c.aoColumns[g].bVisible||d||p[f].splice(g,1);l.push([])}f=0;for(h=p.length;f<h;f++){if(c=p[f].nTr)for(;g=c.firstChild;)c.removeChild(g);
g=0;for(e=p[f].length;g<e;g++)if(m=k=1,l[f][g]===b){c.appendChild(p[f][g].cell);for(l[f][g]=1;p[f+k]!==b&&p[f][g].cell==p[f+k][g].cell;)l[f+k][g]=1,k++;for(;p[f][g+m]!==b&&p[f][g].cell==p[f][g+m].cell;){for(d=0;d<k;d++)l[f+d][g+m]=1;m++}a(p[f][g].cell).attr("rowspan",k).attr("colspan",m)}}}}function W(c){var e=da(c,"aoPreDrawCallback","preDraw",[c]);if(-1!==a.inArray(!1,e))R(c,!1);else{var e=[],d=0,f=c.asStripeClasses,h=f.length,g=c.oLanguage,p=c.iInitDisplayStart,l="ssp"==ia(c),k=c.aiDisplay;c.bDrawing=
!0;p!==b&&-1!==p&&(c._iDisplayStart=l?p:p>=c.fnRecordsDisplay()?0:p,c.iInitDisplayStart=-1);var p=c._iDisplayStart,m=c.fnDisplayEnd();if(c.bDeferLoading)c.bDeferLoading=!1,c.iDraw++,R(c,!1);else if(!l)c.iDraw++;else if(!c.bDestroying&&!wa(c))return;if(0!==k.length)for(g=l?c.aoData.length:m,l=l?0:p;l<g;l++){var z=k[l],q=c.aoData[z];null===q.nTr&&N(c,z);z=q.nTr;if(0!==h){var r=f[d%h];q._sRowStripe!=r&&(a(z).removeClass(q._sRowStripe).addClass(r),q._sRowStripe=r)}da(c,"aoRowCallback",null,[z,q._aData,
d,l]);e.push(z);d++}else d=g.sZeroRecords,1==c.iDraw&&"ajax"==ia(c)?d=g.sLoadingRecords:g.sEmptyTable&&0===c.fnRecordsTotal()&&(d=g.sEmptyTable),e[0]=a("<tr/>",{"class":h?f[0]:""}).append(a("<td />",{valign:"top",colSpan:C(c),"class":c.oClasses.sRowEmpty}).html(d))[0];da(c,"aoHeaderCallback","header",[a(c.nTHead).children("tr")[0],E(c),p,m,k]);da(c,"aoFooterCallback","footer",[a(c.nTFoot).children("tr")[0],E(c),p,m,k]);f=a(c.nTBody);f.children().detach();f.append(a(e));da(c,"aoDrawCallback","draw",
[c]);c.bSorted=!1;c.bFiltered=!1;c.bDrawing=!1}}function ja(a,b){var c=a.oFeatures,e=c.bFilter;c.bSort&&Jb(a);e?O(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;W(a);a._drawHold=!1}function oa(b){var c=b.oClasses,e=a(b.nTable),e=a("<div/>").insertBefore(e),d=b.oFeatures,f=a("<div/>",{id:b.sTableId+"_wrapper","class":c.sWrapper+(b.nTFoot?"":" "+c.sNoFooter)});b.nHolding=e[0];b.nTableWrapper=f[0];b.nTableReinsertBefore=b.nTable.nextSibling;for(var h=
b.sDom.split(""),g,p,l,k,m,z,q=0;q<h.length;q++){g=null;p=h[q];if("<"==p){l=a("<div/>")[0];k=h[q+1];if("'"==k||'"'==k){m="";for(z=2;h[q+z]!=k;)m+=h[q+z],z++;"H"==m?m=c.sJUIHeader:"F"==m&&(m=c.sJUIFooter);-1!=m.indexOf(".")?(k=m.split("."),l.id=k[0].substr(1,k[0].length-1),l.className=k[1]):"#"==m.charAt(0)?l.id=m.substr(1,m.length-1):l.className=m;q+=z}f.append(l);f=a(l)}else if(">"==p)f=f.parent();else if("l"==p&&d.bPaginate&&d.bLengthChange)g=mb(b);else if("f"==p&&d.bFilter)g=T(b);else if("r"==
p&&d.bProcessing)g=L(b);else if("t"==p)g=Cb(b);else if("i"==p&&d.bInfo)g=Bb(b);else if("p"==p&&d.bPaginate)g=Va(b);else if(0!==D.ext.feature.length)for(l=D.ext.feature,z=0,k=l.length;z<k;z++)if(p==l[z].cFeature){g=l[z].fnInit(b);break}g&&(l=b.aanFeatures,l[p]||(l[p]=[]),l[p].push(g),f.append(g))}e.replaceWith(f)}function Z(b,c){var e=a(c).children("tr"),d,f,h,g,p,l,k,m,z,q;b.splice(0,b.length);h=0;for(l=e.length;h<l;h++)b.push([]);h=0;for(l=e.length;h<l;h++)for(d=e[h],f=d.firstChild;f;){if("TD"==
f.nodeName.toUpperCase()||"TH"==f.nodeName.toUpperCase()){m=1*f.getAttribute("colspan");z=1*f.getAttribute("rowspan");m=m&&0!==m&&1!==m?m:1;z=z&&0!==z&&1!==z?z:1;g=0;for(p=b[h];p[g];)g++;k=g;q=1===m?!0:!1;for(p=0;p<m;p++)for(g=0;g<z;g++)b[h+g][k+p]={cell:f,unique:q},b[h+g].nTr=d}f=f.nextSibling}}function ra(a,b,c){var e=[];c||(c=a.aoHeader,b&&(c=[],Z(c,b)));b=0;for(var d=c.length;b<d;b++)for(var f=0,h=c[b].length;f<h;f++)!c[b][f].unique||e[f]&&a.bSortCellsTop||(e[f]=c[b][f].cell);return e}function sa(b,
c,e){da(b,"aoServerParams","serverParams",[c]);if(c&&a.isArray(c)){var d={},f=/(.*?)\[\]$/;a.each(c,function(a,b){var c=b.name.match(f);c?(c=c[0],d[c]||(d[c]=[]),d[c].push(b.value)):d[b.name]=b.value});c=d}var h,g=b.ajax,p=b.oInstance;if(a.isPlainObject(g)&&g.data){h=g.data;var l=a.isFunction(h)?h(c):h;c=a.isFunction(h)&&l?l:a.extend(!0,c,l);delete g.data}l={data:c,success:function(a){var c=a.error||a.sError;c&&b.oApi._fnLog(b,0,c);b.json=a;da(b,null,"xhr",[b,a]);e(a)},dataType:"json",cache:!1,type:b.sServerMethod,
error:function(a,c,e){e=b.oApi._fnLog;"parsererror"==c?e(b,0,"Invalid JSON response",1):4===a.readyState&&e(b,0,"Ajax error",7);R(b,!1)}};b.oAjaxData=c;da(b,null,"preXhr",[b,c]);b.fnServerData?b.fnServerData.call(p,b.sAjaxSource,a.map(c,function(a,b){return{name:b,value:a}}),e,b):b.sAjaxSource||"string"===typeof g?b.jqXHR=a.ajax(a.extend(l,{url:g||b.sAjaxSource})):a.isFunction(g)?b.jqXHR=g.call(p,c,e,b):(b.jqXHR=a.ajax(a.extend(l,g)),g.data=h)}function wa(a){return a.bAjaxDataGet?(a.iDraw++,R(a,!0),
sa(a,xa(a),function(b){ta(a,b)}),!1):!0}function xa(b){var c=b.aoColumns,e=c.length,d=b.oFeatures,f=b.oPreviousSearch,h=b.aoPreSearchCols,g,p=[],l,k,m,z=Ha(b);g=b._iDisplayStart;l=!1!==d.bPaginate?b._iDisplayLength:-1;var q=function(a,b){p.push({name:a,value:b})};q("sEcho",b.iDraw);q("iColumns",e);q("sColumns",va(c,"sName").join(","));q("iDisplayStart",g);q("iDisplayLength",l);var r={draw:b.iDraw,columns:[],order:[],start:g,length:l,search:{value:f.sSearch,regex:f.bRegex}};for(g=0;g<e;g++)k=c[g],
m=h[g],l="function"==typeof k.mData?"function":k.mData,r.columns.push({data:l,name:k.sName,searchable:k.bSearchable,orderable:k.bSortable,search:{value:m.sSearch,regex:m.bRegex}}),q("mDataProp_"+g,l),d.bFilter&&(q("sSearch_"+g,m.sSearch),q("bRegex_"+g,m.bRegex),q("bSearchable_"+g,k.bSearchable)),d.bSort&&q("bSortable_"+g,k.bSortable);d.bFilter&&(q("sSearch",f.sSearch),q("bRegex",f.bRegex));d.bSort&&(a.each(z,function(a,b){r.order.push({column:b.col,dir:b.dir});q("iSortCol_"+a,b.col);q("sSortDir_"+
a,b.dir)}),q("iSortingCols",z.length));c=D.ext.legacy.ajax;return null===c?b.sAjaxSource?p:r:c?p:r}function ta(a,c){var e=function(a,e){return c[a]!==b?c[a]:c[e]},d=e("sEcho","draw"),f=e("iTotalRecords","recordsTotal"),e=e("iTotalDisplayRecords","recordsFiltered");if(d){if(1*d<a.iDraw)return;a.iDraw=1*d}Q(a);a._iRecordsTotal=parseInt(f,10);a._iRecordsDisplay=parseInt(e,10);d=ya(a,c);f=0;for(e=d.length;f<e;f++)A(a,d[f]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;W(a);a._bInitComplete||
fb(a,c);a.bAjaxDataGet=!0;R(a,!1)}function ya(c,e){var d=a.isPlainObject(c.ajax)&&c.ajax.dataSrc!==b?c.ajax.dataSrc:c.sAjaxDataProp;return"data"===d?e.aaData||e[d]:""!==d?P(d)(e):e}function T(b){var c=b.oClasses,e=b.sTableId,d=b.oLanguage,f=b.oPreviousSearch,h=b.aanFeatures,g='<input type="search" class="'+c.sFilterInput+'"/>',p=d.sSearch,p=p.match(/_INPUT_/)?p.replace("_INPUT_",g):p+g,c=a("<div/>",{id:h.f?null:e+"_filter","class":c.sFilter}).append(a("<label/>").append(p)),h=function(){var a=this.value?
this.value:"";a!=f.sSearch&&(O(b,{sSearch:a,bRegex:f.bRegex,bSmart:f.bSmart,bCaseInsensitive:f.bCaseInsensitive}),b._iDisplayStart=0,W(b))},g=null!==b.searchDelay?b.searchDelay:"ssp"===ia(b)?400:0,l=a("input",c).val(f.sSearch).attr("placeholder",d.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",g?Ca(h,g):h).bind("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",e);a(b.nTable).on("search.dt.DT",function(a,c){if(b===c)try{l[0]!==n.activeElement&&l.val(f.sSearch)}catch(e){}});
return c[0]}function O(a,c,e){var d=a.oPreviousSearch,f=a.aoPreSearchCols,h=function(a){d.sSearch=a.sSearch;d.bRegex=a.bRegex;d.bSmart=a.bSmart;d.bCaseInsensitive=a.bCaseInsensitive},g=function(a){return a.bEscapeRegex!==b?!a.bEscapeRegex:a.bRegex};p(a);if("ssp"!=ia(a)){db(a,c.sSearch,e,g(c),c.bSmart,c.bCaseInsensitive);h(c);for(c=0;c<f.length;c++)cb(a,f[c].sSearch,c,g(f[c]),f[c].bSmart,f[c].bCaseInsensitive);m(a)}else h(c);a.bFiltered=!0;da(a,null,"search",[a])}function m(a){for(var b=D.ext.search,
c=a.aiDisplay,e,d,f=0,h=b.length;f<h;f++){for(var g=[],p=0,l=c.length;p<l;p++)d=c[p],e=a.aoData[d],b[f](a,e._aFilterData,d,e._aData,p)&&g.push(d);c.length=0;c.push.apply(c,g)}}function cb(a,b,c,e,d,f){if(""!==b){var h=a.aiDisplay;e=nb(b,e,d,f);for(d=h.length-1;0<=d;d--)b=a.aoData[h[d]]._aFilterData[c],e.test(b)||h.splice(d,1)}}function db(a,b,c,e,d,f){e=nb(b,e,d,f);d=a.oPreviousSearch.sSearch;f=a.aiDisplayMaster;var h;0!==D.ext.search.length&&(c=!0);h=Ga(a);if(0>=b.length)a.aiDisplay=f.slice();else{if(h||
c||d.length>b.length||0!==b.indexOf(d)||a.bSorted)a.aiDisplay=f.slice();b=a.aiDisplay;for(c=b.length-1;0<=c;c--)e.test(a.aoData[b[c]]._sFilterRow)||b.splice(c,1)}}function nb(b,c,e,d){b=c?b:eb(b);e&&(b="^(?=.*?"+a.map(b.match(/"[^"]+"|[^ ]+/g)||"",function(a){if('"'===a.charAt(0)){var b=a.match(/^"(.*)"$/);a=b?b[1]:a}return a.replace('"',"")}).join(")(?=.*?")+").*$");return new RegExp(b,d?"i":"")}function eb(a){return a.replace(xb,"\\$1")}function Ga(a){var b=a.aoColumns,c,e,d,f,h,g,p,l,k=D.ext.type.search;
c=!1;e=0;for(f=a.aoData.length;e<f;e++)if(l=a.aoData[e],!l._aFilterData){g=[];d=0;for(h=b.length;d<h;d++)c=b[d],c.bSearchable?(p=y(a,e,d,"filter"),k[c.sType]&&(p=k[c.sType](p)),null===p&&(p=""),"string"!==typeof p&&p.toString&&(p=p.toString())):p="",p.indexOf&&-1!==p.indexOf("&")&&(Ya.innerHTML=p,p=Tb?Ya.textContent:Ya.innerText),p.replace&&(p=p.replace(/[\r\n]/g,"")),g.push(p);l._aFilterData=g;l._sFilterRow=g.join("  ");c=!0}return c}function ob(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,
caseInsensitive:a.bCaseInsensitive}}function pb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function Bb(b){var c=b.sTableId,e=b.aanFeatures.i,d=a("<div/>",{"class":b.oClasses.sInfo,id:e?null:c+"_info"});e||(b.aoDrawCallback.push({fn:Ta,sName:"information"}),d.attr("role","status").attr("aria-live","polite"),a(b.nTable).attr("aria-describedby",c+"_info"));return d[0]}function Ta(b){var c=b.aanFeatures.i;if(0!==c.length){var e=b.oLanguage,d=b._iDisplayStart+
1,f=b.fnDisplayEnd(),h=b.fnRecordsTotal(),g=b.fnRecordsDisplay(),p=g?e.sInfo:e.sInfoEmpty;g!==h&&(p+=" "+e.sInfoFiltered);p+=e.sInfoPostFix;p=Gb(b,p);e=e.fnInfoCallback;null!==e&&(p=e.call(b.oInstance,b,d,f,h,g,p));a(c).html(p)}}function Gb(a,b){var c=a.fnFormatNumber,e=a._iDisplayStart+1,d=a._iDisplayLength,f=a.fnRecordsDisplay(),h=-1===d;return b.replace(/_START_/g,c.call(a,e)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,
f)).replace(/_PAGE_/g,c.call(a,h?1:Math.ceil(e/d))).replace(/_PAGES_/g,c.call(a,h?1:Math.ceil(f/d)))}function Ua(a){var b,c,e=a.iInitDisplayStart,d=a.aoColumns,f;c=a.oFeatures;if(a.bInitialised){oa(a);ma(a);aa(a,a.aoHeader);aa(a,a.aoFooter);R(a,!0);c.bAutoWidth&&Aa(a);b=0;for(c=d.length;b<c;b++)f=d[b],f.sWidth&&(f.nTh.style.width=V(f.sWidth));ja(a);d=ia(a);"ssp"!=d&&("ajax"==d?sa(a,[],function(c){var d=ya(a,c);for(b=0;b<d.length;b++)A(a,d[b]);a.iInitDisplayStart=e;ja(a);R(a,!1);fb(a,c)},a):(R(a,!1),
fb(a)))}else setTimeout(function(){Ua(a)},200)}function fb(a,b){a._bInitComplete=!0;b&&v(a);da(a,"aoInitComplete","init",[a,b])}function ua(a,b){var c=parseInt(b,10);a._iDisplayLength=c;vb(a);da(a,null,"length",[a,c])}function mb(b){for(var c=b.oClasses,e=b.sTableId,d=b.aLengthMenu,f=a.isArray(d[0]),h=f?d[0]:d,d=f?d[1]:d,f=a("<select/>",{name:e+"_length","aria-controls":e,"class":c.sLengthSelect}),g=0,p=h.length;g<p;g++)f[0][g]=new Option(d[g],h[g]);var l=a("<div><label/></div>").addClass(c.sLength);
b.aanFeatures.l||(l[0].id=e+"_length");l.children().append(b.oLanguage.sLengthMenu.replace("_MENU_",f[0].outerHTML));a("select",l).val(b._iDisplayLength).bind("change.DT",function(c){ua(b,a(this).val());W(b)});a(b.nTable).bind("length.dt.DT",function(c,e,d){b===e&&a("select",l).val(d)});return l[0]}function Va(b){var c=b.sPaginationType,e=D.ext.pager[c],d="function"===typeof e,f=function(a){W(a)},c=a("<div/>").addClass(b.oClasses.sPaging+c)[0],h=b.aanFeatures;d||e.fnInit(b,c,f);h.p||(c.id=b.sTableId+
"_paginate",b.aoDrawCallback.push({fn:function(a){if(d){var b=a._iDisplayStart,c=a._iDisplayLength,g=a.fnRecordsDisplay(),t=-1===c,b=t?0:Math.ceil(b/c),c=t?1:Math.ceil(g/c),g=e(b,c),p,t=0;for(p=h.p.length;t<p;t++)hb(a,"pageButton")(a,h.p[t],t,g,b,c)}else e.fnUpdate(a,f)},sName:"pagination"}));return c}function za(a,b,c){var e=a._iDisplayStart,d=a._iDisplayLength,f=a.fnRecordsDisplay();0===f||-1===d?e=0:"number"===typeof b?(e=b*d,e>f&&(e=0)):"first"==b?e=0:"previous"==b?(e=0<=d?e-d:0,0>e&&(e=0)):"next"==
b?e+d<f&&(e+=d):"last"==b?e=Math.floor((f-1)/d)*d:Fa(a,0,"Unknown paging action: "+b,5);b=a._iDisplayStart!==e;a._iDisplayStart=e;b&&(da(a,null,"page",[a]),c&&W(a));return b}function L(b){return a("<div/>",{id:b.aanFeatures.r?null:b.sTableId+"_processing","class":b.oClasses.sProcessing}).html(b.oLanguage.sProcessing).insertBefore(b.nTable)[0]}function R(b,c){b.oFeatures.bProcessing&&a(b.aanFeatures.r).css("display",c?"block":"none");da(b,null,"processing",[b,c])}function Cb(b){var c=a(b.nTable);c.attr("role",
"grid");var e=b.oScroll;if(""===e.sX&&""===e.sY)return b.nTable;var d=e.sX,f=e.sY,h=b.oClasses,g=c.children("caption"),p=g.length?g[0]._captionSide:null,l=a(c[0].cloneNode(!1)),k=a(c[0].cloneNode(!1)),m=c.children("tfoot");e.sX&&"100%"===c.attr("width")&&c.removeAttr("width");m.length||(m=null);e=a("<div/>",{"class":h.sScrollWrapper}).append(a("<div/>",{"class":h.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:d?d?V(d):null:"100%"}).append(a("<div/>",{"class":h.sScrollHeadInner}).css({"box-sizing":"content-box",
width:e.sXInner||"100%"}).append(l.removeAttr("id").css("margin-left",0).append("top"===p?g:null).append(c.children("thead"))))).append(a("<div/>",{"class":h.sScrollBody}).css({overflow:"auto",height:f?V(f):null,width:d?V(d):null}).append(c));m&&e.append(a("<div/>",{"class":h.sScrollFoot}).css({overflow:"hidden",border:0,width:d?d?V(d):null:"100%"}).append(a("<div/>",{"class":h.sScrollFootInner}).append(k.removeAttr("id").css("margin-left",0).append("bottom"===p?g:null).append(c.children("tfoot")))));
var c=e.children(),z=c[0],h=c[1],q=m?c[2]:null;d&&a(h).scroll(function(a){a=this.scrollLeft;z.scrollLeft=a;m&&(q.scrollLeft=a)});b.nScrollHead=z;b.nScrollBody=h;b.nScrollFoot=q;b.aoDrawCallback.push({fn:Pa,sName:"scrolling"});return e[0]}function Pa(b){var c=b.oScroll,e=c.sX,d=c.sXInner,f=c.sY,h=c.iBarWidth,g=a(b.nScrollHead),p=g[0].style,l=g.children("div"),k=l[0].style,m=l.children("table"),l=b.nScrollBody,z=a(l),r=l.style,A=a(b.nScrollFoot).children("div"),u=A.children("table"),H=a(b.nTHead),n=
a(b.nTable),x=n[0],J=x.style,B=b.nTFoot?a(b.nTFoot):null,v=b.oBrowser,y=v.bScrollOversize,E,M,Q,C,P,S=[],ga=[],ba=[],N,ca=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};n.children("thead, tfoot").remove();P=H.clone().prependTo(n);E=H.find("tr");Q=P.find("tr");P.find("th, td").removeAttr("tabindex");B&&(C=B.clone().prependTo(n),M=B.find("tr"),C=C.find("tr"));e||(r.width="100%",g[0].style.width="100%");a.each(ra(b,P),function(a,c){N=
q(b,a);c.style.width=b.aoColumns[N].sWidth});B&&ha(function(a){a.style.width=""},C);c.bCollapse&&""!==f&&(r.height=z[0].offsetHeight+H[0].offsetHeight+"px");g=n.outerWidth();""===e?(J.width="100%",y&&(n.find("tbody").height()>l.offsetHeight||"scroll"==z.css("overflow-y"))&&(J.width=V(n.outerWidth()-h))):""!==d?J.width=V(d):g==z.width()&&z.height()<n.height()?(J.width=V(g-h),n.outerWidth()>g-h&&(J.width=V(g))):J.width=V(g);g=n.outerWidth();ha(ca,Q);ha(function(b){ba.push(b.innerHTML);S.push(V(a(b).css("width")))},
Q);ha(function(a,b){a.style.width=S[b]},E);a(Q).height(0);B&&(ha(ca,C),ha(function(b){ga.push(V(a(b).css("width")))},C),ha(function(a,b){a.style.width=ga[b]},M),a(C).height(0));ha(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+ba[b]+"</div>";a.style.width=S[b]},Q);B&&ha(function(a,b){a.innerHTML="";a.style.width=ga[b]},C);n.outerWidth()<g?(M=l.scrollHeight>l.offsetHeight||"scroll"==z.css("overflow-y")?g+h:g,y&&(l.scrollHeight>l.offsetHeight||"scroll"==
z.css("overflow-y"))&&(J.width=V(M-h)),""!==e&&""===d||Fa(b,1,"Possible column misalignment",6)):M="100%";r.width=V(M);p.width=V(M);B&&(b.nScrollFoot.style.width=V(M));!f&&y&&(r.height=V(x.offsetHeight+h));f&&c.bCollapse&&(r.height=V(f),c=e&&x.offsetWidth>l.offsetWidth?h:0,x.offsetHeight<l.offsetHeight&&(r.height=V(x.offsetHeight+c)));c=n.outerWidth();m[0].style.width=V(c);k.width=V(c);m=n.height()>l.clientHeight||"scroll"==z.css("overflow-y");v="padding"+(v.bScrollbarLeft?"Left":"Right");k[v]=m?
h+"px":"0px";B&&(u[0].style.width=V(c),A[0].style.width=V(c),A[0].style[v]=m?h+"px":"0px");z.scroll();!b.bSorted&&!b.bFiltered||b._drawHold||(l.scrollTop=0)}function ha(a,b,c){for(var e=0,d=0,f=b.length,h,g;d<f;){h=b[d].firstChild;for(g=c?c[d].firstChild:null;h;)1===h.nodeType&&(c?a(h,g,e):a(h,e),e++),h=h.nextSibling,g=c?g.nextSibling:null;d++}}function Aa(b){var d=b.nTable,f=b.aoColumns,h=b.oScroll,g=h.sY,p=h.sX,l=h.sXInner,k=f.length,h=e(b,"bVisible"),m=a("th",b.nTHead),z=d.getAttribute("width"),
q=d.parentNode,r=!1,A,u;for(A=0;A<h.length;A++)u=f[h[A]],null!==u.sWidth&&(u.sWidth=qb(u.sWidthOrig,q),r=!0);if(r||p||g||k!=C(b)||k!=m.length){k=a(d).clone().empty().css("visibility","hidden").removeAttr("id").append(a(b.nTHead).clone(!1)).append(a(b.nTFoot).clone(!1)).append(a("<tbody><tr/></tbody>"));k.find("tfoot th, tfoot td").css("width","");var H=k.find("tbody tr"),m=ra(b,k.find("thead")[0]);for(A=0;A<h.length;A++)u=f[h[A]],m[A].style.width=null!==u.sWidthOrig&&""!==u.sWidthOrig?V(u.sWidthOrig):
"";if(b.aoData.length)for(A=0;A<h.length;A++)r=h[A],u=f[r],a(Ib(b,r)).clone(!1).append(u.sContentPadding).appendTo(H);k.appendTo(q);p&&l?k.width(l):p?(k.css("width","auto"),k.width()<q.offsetWidth&&k.width(q.offsetWidth)):g?k.width(q.offsetWidth):z&&k.width(z);Hb(b,k[0]);if(p){for(A=l=0;A<h.length;A++)u=f[h[A]],g=a(m[A]).outerWidth(),l+=null===u.sWidthOrig?g:parseInt(u.sWidth,10)+g-a(m[A]).width();k.width(V(l));d.style.width=V(l)}for(A=0;A<h.length;A++)if(u=f[h[A]],g=a(m[A]).width())u.sWidth=V(g);
d.style.width=V(k.css("width"));k.remove()}else for(A=0;A<k;A++)f[A].sWidth=V(m.eq(A).width());z&&(d.style.width=V(z));!z&&!p||b._reszEvt||(a(c).bind("resize.DT-"+b.sInstance,Ca(function(){v(b)})),b._reszEvt=!0)}function Ca(a,c){var e=c!==b?c:200,d,f;return function(){var c=this,h=+new Date,g=arguments;d&&h<d+e?(clearTimeout(f),f=setTimeout(function(){d=b;a.apply(c,g)},e)):d?(d=h,a.apply(c,g)):d=h}}function qb(b,c){if(!b)return 0;var e=a("<div/>").css("width",V(b)).appendTo(c||n.body),d=e[0].offsetWidth;
e.remove();return d}function Hb(b,c){var e=b.oScroll;if(e.sX||e.sY)e=e.sX?0:e.iBarWidth,c.style.width=V(a(c).outerWidth()-e)}function Ib(b,c){var e=rb(b,c);if(0>e)return null;var d=b.aoData[e];return d.nTr?d.anCells[c]:a("<td/>").html(y(b,e,c,"display"))[0]}function rb(a,b){for(var c,e=-1,d=-1,f=0,h=a.aoData.length;f<h;f++)c=y(a,f,b,"display")+"",c=c.replace(Ub,""),c.length>e&&(e=c.length,d=f);return d}function V(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}
function sb(){if(!D.__scrollbarWidth){var b=a("<p/>").css({width:"100%",height:200,padding:0})[0],c=a("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(b).appendTo("body"),e=b.offsetWidth;c.css("overflow","scroll");b=b.offsetWidth;e===b&&(b=c[0].clientWidth);c.remove();D.__scrollbarWidth=e-b}return D.__scrollbarWidth}function Ha(c){var e,d,f=[],h=c.aoColumns,g,p,l,k;e=c.aaSortingFixed;d=a.isPlainObject(e);var m=[];g=function(b){b.length&&
!a.isArray(b[0])?m.push(b):m.push.apply(m,b)};a.isArray(e)&&g(e);d&&e.pre&&g(e.pre);g(c.aaSorting);d&&e.post&&g(e.post);for(c=0;c<m.length;c++)for(k=m[c][0],g=h[k].aDataSort,e=0,d=g.length;e<d;e++)p=g[e],l=h[p].sType||"string",m[c]._idx===b&&(m[c]._idx=a.inArray(m[c][1],h[p].asSorting)),f.push({src:k,col:p,dir:m[c][1],index:m[c]._idx,type:l,formatter:D.ext.type.order[l+"-pre"]});return f}function Jb(a){var b,c,e=[],d=D.ext.type.order,f=a.aoData,h=0,g,l=a.aiDisplayMaster,k;p(a);k=Ha(a);b=0;for(c=k.length;b<
c;b++)g=k[b],g.formatter&&h++,Lb(a,g.col);if("ssp"!=ia(a)&&0!==k.length){b=0;for(c=l.length;b<c;b++)e[l[b]]=b;h===k.length?l.sort(function(a,b){var c,d,h,g,p=k.length,t=f[a]._aSortData,l=f[b]._aSortData;for(h=0;h<p;h++)if(g=k[h],c=t[g.col],d=l[g.col],c=c<d?-1:c>d?1:0,0!==c)return"asc"===g.dir?c:-c;c=e[a];d=e[b];return c<d?-1:c>d?1:0}):l.sort(function(a,b){var c,h,g,p,t=k.length,l=f[a]._aSortData,m=f[b]._aSortData;for(g=0;g<t;g++)if(p=k[g],c=l[p.col],h=m[p.col],p=d[p.type+"-"+p.dir]||d["string-"+p.dir],
c=p(c,h),0!==c)return c;c=e[a];h=e[b];return c<h?-1:c>h?1:0})}a.bSorted=!0}function Kb(a){var b,c,e=a.aoColumns,d=Ha(a);a=a.oLanguage.oAria;for(var f=0,h=e.length;f<h;f++){c=e[f];var g=c.asSorting;b=c.sTitle.replace(/<.*?>/g,"");var p=c.nTh;p.removeAttribute("aria-sort");c.bSortable&&(0<d.length&&d[0].col==f?(p.setAttribute("aria-sort","asc"==d[0].dir?"ascending":"descending"),c=g[d[0].index+1]||g[0]):c=g[0],b+="asc"===c?a.sSortAscending:a.sSortDescending);p.setAttribute("aria-label",b)}}function tb(c,
e,d,f){var h=c.aaSorting,g=c.aoColumns[e].asSorting,p=function(c,e){var d=c._idx;d===b&&(d=a.inArray(c[1],g));return d+1<g.length?d+1:e?null:0};"number"===typeof h[0]&&(h=c.aaSorting=[h]);d&&c.oFeatures.bSortMulti?(d=a.inArray(e,va(h,"0")),-1!==d?(e=p(h[d],!0),null===e?h.splice(d,1):(h[d][1]=g[e],h[d]._idx=e)):(h.push([e,g[0],0]),h[h.length-1]._idx=0)):h.length&&h[0][0]==e?(e=p(h[0]),h.length=1,h[0][1]=g[e],h[0]._idx=e):(h.length=0,h.push([e,g[0]]),h[0]._idx=0);ja(c);"function"==typeof f&&f(c)}function gb(a,
b,c,e){var d=a.aoColumns[c];ub(b,{},function(b){!1!==d.bSortable&&(a.oFeatures.bProcessing?(R(a,!0),setTimeout(function(){tb(a,c,b.shiftKey,e);"ssp"!==ia(a)&&R(a,!1)},0)):tb(a,c,b.shiftKey,e))})}function ab(b){var c=b.aLastSort,e=b.oClasses.sSortColumn,d=Ha(b),f=b.oFeatures,h,g;if(f.bSort&&f.bSortClasses){f=0;for(h=c.length;f<h;f++)g=c[f].src,a(va(b.aoData,"anCells",g)).removeClass(e+(2>f?f+1:3));f=0;for(h=d.length;f<h;f++)g=d[f].src,a(va(b.aoData,"anCells",g)).addClass(e+(2>f?f+1:3))}b.aLastSort=
d}function Lb(a,b){var c=a.aoColumns[b],e=D.ext.order[c.sSortDataType],d;e&&(d=e.call(a.oInstance,a,b,B(a,b)));for(var f,h=D.ext.type.order[c.sType+"-pre"],g=0,p=a.aoData.length;g<p;g++)if(c=a.aoData[g],c._aSortData||(c._aSortData=[]),!c._aSortData[b]||e)f=e?d[g]:y(a,g,b,"sort"),c._aSortData[b]=h?h(f):f}function ka(b){if(b.oFeatures.bStateSave&&!b.bDestroying){var c={time:+new Date,start:b._iDisplayStart,length:b._iDisplayLength,order:a.extend(!0,[],b.aaSorting),search:ob(b.oPreviousSearch),columns:a.map(b.aoColumns,
function(a,c){return{visible:a.bVisible,search:ob(b.aoPreSearchCols[c])}})};da(b,"aoStateSaveParams","stateSaveParams",[b,c]);b.oSavedState=c;b.fnStateSaveCallback.call(b.oInstance,b,c)}}function Ra(b,c){var e,d,f=b.aoColumns;if(b.oFeatures.bStateSave){var h=b.fnStateLoadCallback.call(b.oInstance,b);if(h&&h.time&&(e=da(b,"aoStateLoadParams","stateLoadParams",[b,h]),-1===a.inArray(!1,e)&&(e=b.iStateDuration,!(0<e&&h.time<+new Date-1E3*e)&&f.length===h.columns.length))){b.oLoadedState=a.extend(!0,{},
h);b._iDisplayStart=h.start;b.iInitDisplayStart=h.start;b._iDisplayLength=h.length;b.aaSorting=[];a.each(h.order,function(a,c){b.aaSorting.push(c[0]>=f.length?[0,c[1]]:c)});a.extend(b.oPreviousSearch,pb(h.search));e=0;for(d=h.columns.length;e<d;e++){var g=h.columns[e];f[e].bVisible=g.visible;a.extend(b.aoPreSearchCols[e],pb(g.search))}da(b,"aoStateLoaded","stateLoaded",[b,h])}}}function Qa(b){var c=D.settings;b=a.inArray(b,va(c,"nTable"));return-1!==b?c[b]:null}function Fa(a,b,e,d){e="DataTables warning: "+
(null!==a?"table id="+a.sTableId+" - ":"")+e;d&&(e+=". For more information about this error, please see http://datatables.net/tn/"+d);if(b)c.console&&console.log&&console.log(e);else if(a=D.ext,"alert"==(a.sErrMode||a.errMode))alert(e);else throw Error(e);}function pa(c,e,d,f){a.isArray(d)?a.each(d,function(b,d){a.isArray(d)?pa(c,e,d[0],d[1]):pa(c,e,d)}):(f===b&&(f=d),e[d]!==b&&(c[f]=e[d]))}function Sa(b,c,e){var d,f;for(f in c)c.hasOwnProperty(f)&&(d=c[f],a.isPlainObject(d)?(a.isPlainObject(b[f])||
(b[f]={}),a.extend(!0,b[f],d)):e&&"data"!==f&&"aaData"!==f&&a.isArray(d)?b[f]=d.slice():b[f]=d);return b}function ub(b,c,e){a(b).bind("click.DT",c,function(a){b.blur();e(a)}).bind("keypress.DT",c,function(a){13===a.which&&(a.preventDefault(),e(a))}).bind("selectstart.DT",function(){return!1})}function na(a,b,c,e){c&&a[b].push({fn:c,sName:e})}function da(b,c,e,d){var f=[];c&&(f=a.map(b[c].slice().reverse(),function(a,c){return a.fn.apply(b.oInstance,d)}));null!==e&&a(b.nTable).trigger(e+".dt",d);return f}
function vb(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),e=a._iDisplayLength;b>=c&&(b=c-e);b-=b%e;if(-1===e||0>b)b=0;a._iDisplayStart=b}function hb(b,c){var e=b.renderer,d=D.ext.renderer[c];return a.isPlainObject(e)&&e[c]?d[e[c]]||d._:"string"===typeof e?d[e]||d._:d._}function ia(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function Da(a,b){var c=[],c=Yb.numbers_length,e=Math.floor(c/2);b<=c?c=Ja(0,b):a<=e?(c=Ja(0,c-2),c.push("ellipsis"),c.push(b-1)):(a>=b-1-e?c=Ja(b-
(c-2),b):(c=Ja(a-1,a+2),c.push("ellipsis"),c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0));c.DT_el="span";return c}function Wa(b){a.each({num:function(a){return Db(a,b)},"num-fmt":function(a){return Db(a,b,Ba)},"html-num":function(a){return Db(a,b,Na)},"html-num-fmt":function(a){return Db(a,b,Na,Ba)}},function(a,c){ea.type.order[a+b+"-pre"]=c;a.match(/^html\-/)&&(ea.type.search[a+b]=ea.type.search.html)})}function Mb(a){return function(){var b=[Qa(this[D.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));
return D.ext.internal[a].apply(this,b)}}var D,ea,U,I,Y,Ia={},Nb=/[\r\n]/g,Na=/<.*?>/g,Sb=/^[\w\+\-]/,wb=/[\w\+\-]$/,xb=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\|\$|\^|\-)/g,Ba=/[',$\u00a3\u20ac\u00a5%\u2009\u202F]/g,la=function(a){return a&&!0!==a&&"-"!==a?!1:!0},Ob=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},yb=function(a,b){Ia[b]||(Ia[b]=new RegExp(eb(b),"g"));return"string"===typeof a&&"."!==b?a.replace(/\./g,"").replace(Ia[b],"."):a},zb=function(a,b,c){var e="string"===
typeof a;b&&e&&(a=yb(a,b));c&&e&&(a=a.replace(Ba,""));return la(a)||!isNaN(parseFloat(a))&&isFinite(a)},Pb=function(a,b,c){return la(a)?!0:la(a)||"string"===typeof a?zb(a.replace(Na,""),b,c)?!0:null:null},va=function(a,c,e){var d=[],f=0,h=a.length;if(e!==b)for(;f<h;f++)a[f]&&a[f][c]&&d.push(a[f][c][e]);else for(;f<h;f++)a[f]&&d.push(a[f][c]);return d},Oa=function(a,c,e,d){var f=[],h=0,g=c.length;if(d!==b)for(;h<g;h++)a[c[h]][e]&&f.push(a[c[h]][e][d]);else for(;h<g;h++)f.push(a[c[h]][e]);return f},
Ja=function(a,c){var e=[],d;c===b?(c=0,d=a):(d=c,c=a);for(var f=c;f<d;f++)e.push(f);return e},bb=function(a){for(var b=[],c=0,e=a.length;c<e;c++)a[c]&&b.push(a[c]);return b},ib=function(a){var b=[],c,e,d=a.length,f,h=0;e=0;a:for(;e<d;e++){c=a[e];for(f=0;f<h;f++)if(b[f]===c)continue a;b.push(c);h++}return b},qa=function(a,c,e){a[c]!==b&&(a[e]=a[c])},Xa=/\[.*?\]$/,La=/\(\)$/,Ya=a("<div>")[0],Tb=Ya.textContent!==b,Ub=/<.*?>/g;D=function(c){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,
b){return this.api(!0).rows(a,b).data()};this.api=function(a){return a?new U(Qa(this[ea.iApiIndex])):new U(this)};this.fnAddData=function(c,e){var d=this.api(!0),f=a.isArray(c)&&(a.isArray(c[0])||a.isPlainObject(c[0]))?d.rows.add(c):d.row.add(c);(e===b||e)&&d.draw();return f.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var c=this.api(!0).columns.adjust(),e=c.settings()[0],d=e.oScroll;a===b||a?c.draw(!1):""===d.sX&&""===d.sY||Pa(e)};this.fnClearTable=function(a){var c=this.api(!0).clear();
(a===b||a)&&c.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,c,e){var d=this.api(!0);a=d.rows(a);var f=a.settings()[0],h=f.aoData[a[0][0]];a.remove();c&&c.call(this,f,h);(e===b||e)&&d.draw();return h};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(!a)};this.fnFilter=function(a,c,e,d,f,h){f=this.api(!0);null===c||c===b?f.search(a,e,d,h):f.column(c).search(a,e,d,h);f.draw()};this.fnGetData=function(a,c){var e=
this.api(!0);if(a!==b){var d=a.nodeName?a.nodeName.toLowerCase():"";return c!==b||"td"==d||"th"==d?e.cell(a,c).data():e.row(a).data()||null}return e.data().toArray()};this.fnGetNodes=function(a){var c=this.api(!0);return a!==b?c.row(a).node():c.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(a=b.cell(a).index(),[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};
this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};this.fnPageChange=function(a,c){var e=this.api(!0).page(a);(c===b||c)&&e.draw(!1)};this.fnSetColumnVis=function(a,c,e){a=this.api(!0).column(a).visible(c);(e===b||e)&&a.columns.adjust().draw()};this.fnSettings=function(){return Qa(this[ea.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,c,e,d,f){var h=
this.api(!0);e===b||null===e?h.row(c).data(a):h.cell(c,e).data(a);(f===b||f)&&h.columns.adjust();(d===b||d)&&h.draw();return 0};this.fnVersionCheck=ea.fnVersionCheck;var e=this,p=c===b,k=this.length;p&&(c={});this.oApi=this.internal=ea.internal;for(var m in D.ext.internal)m&&(this[m]=Mb(m));this.each(function(){var m={},m=1<k?Sa(m,c,!0):c,q=0,n,x=this.getAttribute("id"),J=!1,B=D.defaults;if("table"!=this.nodeName.toLowerCase())Fa(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{r(B);
g(B.column);f(B,B,!0);f(B.column,B.column,!0);f(B,m);var v=D.settings,q=0;for(n=v.length;q<n;q++){if(v[q].nTable==this){n=m.bRetrieve!==b?m.bRetrieve:B.bRetrieve;if(p||n)return v[q].oInstance;if(m.bDestroy!==b?m.bDestroy:B.bDestroy){v[q].oInstance.fnDestroy();break}else{Fa(v[q],0,"Cannot reinitialise DataTable",3);return}}if(v[q].sTableId==this.id){v.splice(q,1);break}}if(null===x||""===x)this.id=x="DataTables_Table_"+D.ext._unique++;var y=a.extend(!0,{},D.models.oSettings,{nTable:this,oApi:e.internal,
oInit:m,sDestroyWidth:a(this)[0].style.width,sInstance:x,sTableId:x});v.push(y);y.oInstance=1===e.length?e:a(this).dataTable();r(m);m.oLanguage&&d(m.oLanguage);m.aLengthMenu&&!m.iDisplayLength&&(m.iDisplayLength=a.isArray(m.aLengthMenu[0])?m.aLengthMenu[0][0]:m.aLengthMenu[0]);m=Sa(a.extend(!0,{},B),m);pa(y.oFeatures,m,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));pa(y,m,["asStripeClasses","ajax","fnServerData","fnFormatNumber",
"sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);pa(y.oScroll,m,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);
pa(y.oLanguage,m,"fnInfoCallback");na(y,"aoDrawCallback",m.fnDrawCallback,"user");na(y,"aoServerParams",m.fnServerParams,"user");na(y,"aoStateSaveParams",m.fnStateSaveParams,"user");na(y,"aoStateLoadParams",m.fnStateLoadParams,"user");na(y,"aoStateLoaded",m.fnStateLoaded,"user");na(y,"aoRowCallback",m.fnRowCallback,"user");na(y,"aoRowCreatedCallback",m.fnCreatedRow,"user");na(y,"aoHeaderCallback",m.fnHeaderCallback,"user");na(y,"aoFooterCallback",m.fnFooterCallback,"user");na(y,"aoInitComplete",m.fnInitComplete,
"user");na(y,"aoPreDrawCallback",m.fnPreDrawCallback,"user");x=y.oClasses;m.bJQueryUI?(a.extend(x,D.ext.oJUIClasses,m.oClasses),m.sDom===B.sDom&&"lfrtip"===B.sDom&&(y.sDom='<"H"lfr>t<"F"ip>'),y.renderer)?a.isPlainObject(y.renderer)&&!y.renderer.header&&(y.renderer.header="jqueryui"):y.renderer="jqueryui":a.extend(x,D.ext.classes,m.oClasses);a(this).addClass(x.sTable);if(""!==y.oScroll.sX||""!==y.oScroll.sY)y.oScroll.iBarWidth=sb();!0===y.oScroll.sX&&(y.oScroll.sX="100%");y.iInitDisplayStart===b&&
(y.iInitDisplayStart=m.iDisplayStart,y._iDisplayStart=m.iDisplayStart);null!==m.iDeferLoading&&(y.bDeferLoading=!0,q=a.isArray(m.iDeferLoading),y._iRecordsDisplay=q?m.iDeferLoading[0]:m.iDeferLoading,y._iRecordsTotal=q?m.iDeferLoading[1]:m.iDeferLoading);var E=y.oLanguage;a.extend(!0,E,m.oLanguage);""!==E.sUrl&&(a.ajax({dataType:"json",url:E.sUrl,success:function(b){d(b);f(B.oLanguage,b);a.extend(!0,E,b);Ua(y)},error:function(){Ua(y)}}),J=!0);null===m.asStripeClasses&&(y.asStripeClasses=[x.sStripeOdd,
x.sStripeEven]);var q=y.asStripeClasses,M=a("tbody tr:eq(0)",this);-1!==a.inArray(!0,a.map(q,function(a,b){return M.hasClass(a)}))&&(a("tbody tr",this).removeClass(q.join(" ")),y.asDestroyStripes=q.slice());var v=[],Q,q=this.getElementsByTagName("thead");0!==q.length&&(Z(y.aoHeader,q[0]),v=ra(y));if(null===m.aoColumns)for(Q=[],q=0,n=v.length;q<n;q++)Q.push(null);else Q=m.aoColumns;q=0;for(n=Q.length;q<n;q++)h(y,v?v[q]:null);z(y,m.aoColumnDefs,Q,function(a,b){u(y,a,b)});if(M.length){var C=function(a,
b){return a.getAttribute("data-"+b)?b:null};a.each(ca(y,M[0]).cells,function(a,c){var e=y.aoColumns[a];if(e.mData===a){var d=C(c,"sort")||C(c,"order"),f=C(c,"filter")||C(c,"search");if(null!==d||null!==f)e.mData={_:a+".display",sort:null!==d?a+".@data-"+d:b,type:null!==d?a+".@data-"+d:b,filter:null!==f?a+".@data-"+f:b},u(y,a)}})}var P=y.oFeatures;m.bStateSave&&(P.bStateSave=!0,Ra(y,m),na(y,"aoDrawCallback",ka,"state_save"));if(m.aaSorting===b)for(v=y.aaSorting,q=0,n=v.length;q<n;q++)v[q][1]=y.aoColumns[q].asSorting[0];
ab(y);P.bSort&&na(y,"aoDrawCallback",function(){if(y.bSorted){var b=Ha(y),c={};a.each(b,function(a,b){c[b.src]=b.dir});da(y,null,"order",[y,b,c]);Kb(y)}});na(y,"aoDrawCallback",function(){(y.bSorted||"ssp"===ia(y)||P.bDeferRender)&&ab(y)},"sc");l(y);q=a(this).children("caption").each(function(){this._captionSide=a(this).css("caption-side")});n=a(this).children("thead");0===n.length&&(n=a("<thead/>").appendTo(this));y.nTHead=n[0];n=a(this).children("tbody");0===n.length&&(n=a("<tbody/>").appendTo(this));
y.nTBody=n[0];n=a(this).children("tfoot");0===n.length&&0<q.length&&(""!==y.oScroll.sX||""!==y.oScroll.sY)&&(n=a("<tfoot/>").appendTo(this));0===n.length||0===n.children().length?a(this).addClass(x.sNoFooter):0<n.length&&(y.nTFoot=n[0],Z(y.aoFooter,y.nTFoot));if(m.aaData)for(q=0;q<m.aaData.length;q++)A(y,m.aaData[q]);else(y.bDeferLoading||"dom"==ia(y))&&H(y,a(y.nTBody).children("tr"));y.aiDisplay=y.aiDisplayMaster.slice();y.bInitialised=!0;!1===J&&Ua(y)}});e=null;return this};var Qb=[],fa=Array.prototype,
Vb=function(b){var c,e,d=D.settings,f=a.map(d,function(a,b){return a.nTable});if(b){if(b.nTable&&b.oApi)return[b];if(b.nodeName&&"table"===b.nodeName.toLowerCase())return c=a.inArray(b,f),-1!==c?[d[c]]:null;if(b&&"function"===typeof b.settings)return b.settings().toArray();"string"===typeof b?e=a(b):b instanceof a&&(e=b)}else return[];if(e)return e.map(function(b){c=a.inArray(this,f);return-1!==c?d[c]:null}).toArray()};U=function(b,c){if(!this instanceof U)throw"DT API must be constructed as a new object";
var e=[],d=function(a){(a=Vb(a))&&e.push.apply(e,a)};if(a.isArray(b))for(var f=0,h=b.length;f<h;f++)d(b[f]);else d(b);this.context=ib(e);c&&this.push.apply(this,c.toArray?c.toArray():c);this.selector={rows:null,cols:null,opts:null};U.extend(this,this,Qb)};D.Api=U;U.prototype={concat:fa.concat,context:[],each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new U(b[a],this[a]):null},filter:function(a){var b=[];
if(fa.filter)b=fa.filter.call(this,a,this);else for(var c=0,e=this.length;c<e;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new U(this.context,b)},flatten:function(){var a=[];return new U(this.context,a.concat.apply(a,this.toArray()))},join:fa.join,indexOf:fa.indexOf||function(a,b){for(var c=b||0,e=this.length;c<e;c++)if(this[c]===a)return c;return-1},iterator:function(a,c,e,d){var f=[],h,g,p,l,m,k=this.context,z,q,r=this.selector;"string"===typeof a&&(d=e,e=c,c=a,a=!1);g=0;for(p=k.length;g<
p;g++){var A=new U(k[g]);if("table"===c)h=e.call(A,k[g],g),h!==b&&f.push(h);else if("columns"===c||"rows"===c)h=e.call(A,k[g],this[g],g),h!==b&&f.push(h);else if("column"===c||"column-rows"===c||"row"===c||"cell"===c)for(q=this[g],"column-rows"===c&&(z=lb(k[g],r.opts)),l=0,m=q.length;l<m;l++)h=q[l],h="cell"===c?e.call(A,k[g],h.row,h.column,g,l):e.call(A,k[g],h,g,l,z),h!==b&&f.push(h)}return f.length||d?(a=new U(k,a?f.concat.apply([],f):f),c=a.selector,c.rows=r.rows,c.cols=r.cols,c.opts=r.opts,a):
this},lastIndexOf:fa.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(fa.map)b=fa.map.call(this,a,this);else for(var c=0,e=this.length;c<e;c++)b.push(a.call(this,this[c],c));return new U(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:fa.pop,push:fa.push,reduce:fa.reduce||function(a,b){return x(this,a,b,0,this.length,1)},reduceRight:fa.reduceRight||function(a,b){return x(this,a,b,this.length-
1,-1,-1)},reverse:fa.reverse,selector:null,shift:fa.shift,sort:fa.sort,splice:fa.splice,toArray:function(){return fa.slice.call(this)},to$:function(){return a(this)},toJQuery:function(){return a(this)},unique:function(){return new U(this.context,ib(this))},unshift:fa.unshift};U.extend=function(b,c,e){if(c&&(c instanceof U||c.__dt_wrapper)){var d,f,h,g=function(a,b,c){return function(){var e=b.apply(a,arguments);U.extend(e,e,c.methodExt);return e}};d=0;for(f=e.length;d<f;d++)h=e[d],c[h.name]="function"===
typeof h.val?g(b,h.val,h):a.isPlainObject(h.val)?{}:h.val,c[h.name].__dt_wrapper=!0,U.extend(b,c[h.name],h.propExt)}};U.register=I=function(b,c){if(a.isArray(b))for(var e=0,d=b.length;e<d;e++)U.register(b[e],c);else for(var f=b.split("."),h=Qb,g,p,e=0,d=f.length;e<d;e++){g=(p=-1!==f[e].indexOf("()"))?f[e].replace("()",""):f[e];var l;a:{l=0;for(var m=h.length;l<m;l++)if(h[l].name===g){l=h[l];break a}l=null}l||(l={name:g,val:{},methodExt:[],propExt:[]},h.push(l));e===d-1?l.val=c:h=p?l.methodExt:l.propExt}};
U.registerPlural=Y=function(c,e,d){U.register(c,d);U.register(e,function(){var c=d.apply(this,arguments);return c===this?this:c instanceof U?c.length?a.isArray(c[0])?new U(c.context,c[0]):c[0]:b:c})};var Za=function(b,c){if("number"===typeof b)return[c[b]];var e=a.map(c,function(a,b){return a.nTable});return a(e).filter(b).map(function(b){b=a.inArray(this,e);return c[b]}).toArray()};I("tables()",function(a){return a?new U(Za(a,this.context)):this});I("table()",function(a){a=this.tables(a);var b=a.context;
return b.length?new U(b[0]):a});Y("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});Y("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody},1)});Y("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});Y("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});Y("tables().containers()",
"table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});I("draw()",function(a){return this.iterator("table",function(b){ja(b,!1===a)})});I("page()",function(a){return a===b?this.page.info().page:this.iterator("table",function(b){za(b,a)})});I("page.info()",function(a){if(0===this.context.length)return b;a=this.context[0];var c=a._iDisplayStart,e=a._iDisplayLength,d=a.fnRecordsDisplay(),f=-1===e;return{page:f?0:Math.floor(c/e),pages:f?1:Math.ceil(d/e),
start:c,end:a.fnDisplayEnd(),length:e,recordsTotal:a.fnRecordsTotal(),recordsDisplay:d}});I("page.len()",function(a){return a===b?0!==this.context.length?this.context[0]._iDisplayLength:b:this.iterator("table",function(b){ua(b,a)})});var Ab=function(a,b,c){"ssp"==ia(a)?ja(a,b):(R(a,!0),sa(a,[],function(c){Q(a);c=ya(a,c);for(var e=0,d=c.length;e<d;e++)A(a,c[e]);ja(a,b);R(a,!1)}));if(c){var e=new U(a);e.one("draw",function(){c(e.ajax.json())})}};I("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});
I("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});I("ajax.reload()",function(a,b){return this.iterator("table",function(c){Ab(c,!1===b,a)})});I("ajax.url()",function(c){var e=this.context;if(c===b){if(0===e.length)return b;e=e[0];return e.ajax?a.isPlainObject(e.ajax)?e.ajax.url:e.ajax:e.sAjaxSource}return this.iterator("table",function(b){a.isPlainObject(b.ajax)?b.ajax.url=c:b.ajax=c})});I("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Ab(c,
!1===b,a)})});var $a=function(c,e){var d=[],f,h,g,p,l,m;f=typeof c;c&&"string"!==f&&"function"!==f&&c.length!==b||(c=[c]);g=0;for(p=c.length;g<p;g++)for(h=c[g]&&c[g].split?c[g].split(","):[c[g]],l=0,m=h.length;l<m;l++)(f=e("string"===typeof h[l]?a.trim(h[l]):h[l]))&&f.length&&d.push.apply(d,f);return d},jb=function(a){a||(a={});a.filter&&!a.search&&(a.search=a.filter);return{search:a.search||"none",order:a.order||"current",page:a.page||"all"}},kb=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=
a[b],a.length=1,a.context=[a.context[b]],a;a.length=0;return a},lb=function(b,c){var e,d,f,h=[],g=b.aiDisplay;e=b.aiDisplayMaster;var p=c.search;d=c.order;f=c.page;if("ssp"==ia(b))return"removed"===p?[]:Ja(0,e.length);if("current"==f)for(e=b._iDisplayStart,d=b.fnDisplayEnd();e<d;e++)h.push(g[e]);else if("current"==d||"applied"==d)h="none"==p?e.slice():"applied"==p?g.slice():a.map(e,function(b,c){return-1===a.inArray(b,g)?b:null});else if("index"==d||"original"==d)for(e=0,d=b.aoData.length;e<d;e++)"none"==
p?h.push(e):(f=a.inArray(e,g),(-1===f&&"removed"==p||0<=f&&"applied"==p)&&h.push(e));return h},Wb=function(b,c,e){return $a(c,function(c){var d=Ob(c);if(null!==d&&!e)return[d];var f=lb(b,e);if(null!==d&&-1!==a.inArray(d,f))return[d];if(!c)return f;if("function"===typeof c)return a.map(f,function(a){var e=b.aoData[a];return c(a,e._aData,e.nTr)?a:null});d=bb(Oa(b.aoData,f,"nTr"));return c.nodeName&&-1!==a.inArray(c,d)?[c._DT_RowIndex]:a(d).filter(c).map(function(){return this._DT_RowIndex}).toArray()})};
I("rows()",function(c,e){c===b?c="":a.isPlainObject(c)&&(e=c,c="");e=jb(e);var d=this.iterator("table",function(a){return Wb(a,c,e)},1);d.selector.rows=c;d.selector.opts=e;return d});I("rows().nodes()",function(){return this.iterator("row",function(a,c){return a.aoData[c].nTr||b},1)});I("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return Oa(a.aoData,b,"_aData")},1)});Y("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var e=b.aoData[c];
return"search"===a?e._aFilterData:e._aSortData},1)});Y("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){ba(b,c,a)})});Y("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b},1)});Y("rows().remove()","row().remove()",function(){var b=this;return this.iterator("row",function(c,e,d){var f=c.aoData;f.splice(e,1);for(var h=0,g=f.length;h<g;h++)null!==f[h].nTr&&(f[h].nTr._DT_RowIndex=h);a.inArray(e,c.aiDisplay);ga(c.aiDisplayMaster,
e);ga(c.aiDisplay,e);ga(b[d],e,!1);vb(c)})});I("rows.add()",function(a){var b=this.iterator("table",function(b){var c,e,d,f=[];e=0;for(d=a.length;e<d;e++)c=a[e],c.nodeName&&"TR"===c.nodeName.toUpperCase()?f.push(H(b,c)[0]):f.push(A(b,c));return f},1),c=this.rows(-1);c.pop();c.push.apply(c,b.toArray());return c});I("row()",function(a,b){return kb(this.rows(a,b))});I("row().data()",function(a){var c=this.context;if(a===b)return c.length&&this.length?c[0].aoData[this[0]]._aData:b;c[0].aoData[this[0]]._aData=
a;ba(c[0],this[0],"data");return this});I("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});I("row.add()",function(b){b instanceof a&&b.length&&(b=b[0]);var c=this.iterator("table",function(a){return b.nodeName&&"TR"===b.nodeName.toUpperCase()?H(a,b)[0]:A(a,b)});return this.row(c[0])});var G=function(b,c,e,d){var f=[],h=function(c,e){if(c.nodeName&&"tr"===c.nodeName.toLowerCase())f.push(c);else{var d=a("<tr><td/></tr>").addClass(e);a("td",
d).addClass(e).html(c)[0].colSpan=C(b);f.push(d[0])}};if(a.isArray(e)||e instanceof a)for(var g=0,p=e.length;g<p;g++)h(e[g],d);else h(e,d);c._details&&c._details.remove();c._details=a(f);c._detailsShow&&c._details.insertAfter(c.nTr)},Rb=function(a,c){var e=a.context;e.length&&(e=e[0].aoData[c!==b?c:a[0]],e._details&&(e._details.remove(),e._detailsShow=b,e._details=b))},Ka=function(a,b){var c=a.context;if(c.length&&a.length){var e=c[0].aoData[a[0]];e._details&&((e._detailsShow=b)?e._details.insertAfter(e.nTr):
e._details.detach(),Zb(c[0]))}},Zb=function(a){var b=new U(a),c=a.aoData;b.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<va(c,"_details").length&&(b.on("draw.dt.DT_details",function(e,d){a===d&&b.rows({page:"current"}).eq(0).each(function(a){a=c[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),b.on("column-visibility.dt.DT_details",function(b,e,d,f){if(a===e)for(e=C(e),d=0,f=c.length;d<f;d++)b=c[d],b._details&&b._details.children("td[colspan]").attr("colspan",
e)}),b.on("destroy.dt.DT_details",function(e,d){if(a===d)for(var f=0,h=c.length;f<h;f++)c[f]._details&&Rb(b,f)}))};I("row().child()",function(a,c){var e=this.context;if(a===b)return e.length&&this.length?e[0].aoData[this[0]]._details:b;!0===a?this.child.show():!1===a?Rb(this):e.length&&this.length&&G(e[0],e[0].aoData[this[0]],a,c);return this});I(["row().child.show()","row().child().show()"],function(a){Ka(this,!0);return this});I(["row().child.hide()","row().child().hide()"],function(){Ka(this,!1);
return this});I(["row().child.remove()","row().child().remove()"],function(){Rb(this);return this});I("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var $b=/^(.+):(name|visIdx|visible)$/,Xb=function(a,b,c,e,d){c=[];e=0;for(var f=d.length;e<f;e++)c.push(y(a,d[e],b));return c},ac=function(b,c,e){var d=b.aoColumns,f=va(d,"sName"),h=va(d,"nTh");return $a(c,function(c){var g=Ob(c);if(""===c)return Ja(d.length);if(null!==g)return[0<=
g?g:d.length+g];if("function"===typeof c){var p=lb(b,e);return a.map(d,function(a,e){return c(e,Xb(b,e,0,0,p),h[e])?e:null})}var l="string"===typeof c?c.match($b):"";if(l)switch(l[2]){case "visIdx":case "visible":g=parseInt(l[1],10);if(0>g){var m=a.map(d,function(a,b){return a.bVisible?b:null});return[m[m.length+g]]}return[q(b,g)];case "name":return a.map(f,function(a,b){return a===l[1]?b:null})}else return a(h).filter(c).map(function(){return a.inArray(this,h)}).toArray()})};I("columns()",function(c,
e){c===b?c="":a.isPlainObject(c)&&(e=c,c="");e=jb(e);var d=this.iterator("table",function(a){return ac(a,c,e)},1);d.selector.cols=c;d.selector.opts=e;return d});Y("columns().header()","column().header()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)});Y("columns().footer()","column().footer()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf},1)});Y("columns().data()","column().data()",function(){return this.iterator("column-rows",
Xb,1)});Y("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)});Y("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,e,d,f){return Oa(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)},1)});Y("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,e,d){return Oa(a.aoData,d,"anCells",b)},1)});Y("columns().visible()","column().visible()",
function(c,e){return this.iterator("column",function(d,f){if(c===b)return d.aoColumns[f].bVisible;var h=d.aoColumns,g=h[f],p=d.aoData,l,m,k;if(c!==b&&g.bVisible!==c){if(c){var z=a.inArray(!0,va(h,"bVisible"),f+1);l=0;for(m=p.length;l<m;l++)k=p[l].nTr,h=p[l].anCells,k&&k.insertBefore(h[f],h[z]||null)}else a(va(d.aoData,"anCells",f)).detach();g.bVisible=c;aa(d,d.aoHeader);aa(d,d.aoFooter);if(e===b||e)v(d),(d.oScroll.sX||d.oScroll.sY)&&Pa(d);da(d,null,"column-visibility",[d,f,c]);ka(d)}})});Y("columns().indexes()",
"column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?B(b,c):c},1)});I("columns.adjust()",function(){return this.iterator("table",function(a){v(a)},1)});I("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return q(c,b);if("fromData"===a||"toVisible"===a)return B(c,b)}});I("column()",function(a,b){return kb(this.columns(a,b))});var bc=function(c,e,d){var f=c.aoData,h=lb(c,d);d=bb(Oa(f,h,"anCells"));
var g=a([].concat.apply([],d)),p,l=c.aoColumns.length,m,k,z,q,r,A;return $a(e,function(e){var d="function"===typeof e;if(null===e||e===b||d){m=[];k=0;for(z=h.length;k<z;k++)for(p=h[k],q=0;q<l;q++)r={row:p,column:q},d?(A=c.aoData[p],e(r,y(c,p,q),A.anCells[q])&&m.push(r)):m.push(r);return m}return a.isPlainObject(e)?[e]:g.filter(e).map(function(b,c){p=c.parentNode._DT_RowIndex;return{row:p,column:a.inArray(c,f[p].anCells)}}).toArray()})};I("cells()",function(c,e,d){a.isPlainObject(c)&&(typeof c.row!==
b?(d=e,e=null):(d=c,c=null));a.isPlainObject(e)&&(d=e,e=null);if(null===e||e===b)return this.iterator("table",function(a){return bc(a,c,jb(d))});var f=this.columns(e,d),h=this.rows(c,d),g,p,l,m,k,z=this.iterator("table",function(a,b){g=[];p=0;for(l=h[b].length;p<l;p++)for(m=0,k=f[b].length;m<k;m++)g.push({row:h[b][p],column:f[b][m]});return g},1);a.extend(z.selector,{cols:e,rows:c,opts:d});return z});Y("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,c,e){return(a=
a.aoData[c].anCells)?a[e]:b},1)});I("cells().data()",function(){return this.iterator("cell",function(a,b,c){return y(a,b,c)},1)});Y("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,c,e){return b.aoData[c][a][e]},1)});Y("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,c,e){return y(b,c,e,a)},1)});Y("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,
b,c){return{row:b,column:c,columnVisible:B(a,c)}},1)});Y("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,e){ba(b,c,a,e)})});I("cell()",function(a,b,c){return kb(this.cells(a,b,c))});I("cell().data()",function(a){var c=this.context,e=this[0];if(a===b)return c.length&&e.length?y(c[0],e[0].row,e[0].column):b;M(c[0],e[0].row,e[0].column,a);ba(c[0],e[0].row,"data",e[0].column);return this});I("order()",function(c,e){var d=this.context;if(c===b)return 0!==
d.length?d[0].aaSorting:b;"number"===typeof c?c=[[c,e]]:a.isArray(c[0])||(c=Array.prototype.slice.call(arguments));return this.iterator("table",function(a){a.aaSorting=c.slice()})});I("order.listener()",function(a,b,c){return this.iterator("table",function(e){gb(e,a,b,c)})});I(["columns().order()","column().order()"],function(b){var c=this;return this.iterator("table",function(e,d){var f=[];a.each(c[d],function(a,c){f.push([c,b])});e.aaSorting=f})});I("search()",function(c,e,d,f){var h=this.context;
return c===b?0!==h.length?h[0].oPreviousSearch.sSearch:b:this.iterator("table",function(b){b.oFeatures.bFilter&&O(b,a.extend({},b.oPreviousSearch,{sSearch:c+"",bRegex:null===e?!1:e,bSmart:null===d?!0:d,bCaseInsensitive:null===f?!0:f}),1)})});Y("columns().search()","column().search()",function(c,e,d,f){return this.iterator("column",function(h,g){var p=h.aoPreSearchCols;if(c===b)return p[g].sSearch;h.oFeatures.bFilter&&(a.extend(p[g],{sSearch:c+"",bRegex:null===e?!1:e,bSmart:null===d?!0:d,bCaseInsensitive:null===
f?!0:f}),O(h,h.oPreviousSearch,1))})});I("state()",function(){return this.context.length?this.context[0].oSavedState:null});I("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});I("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});I("state.save()",function(){return this.iterator("table",function(a){ka(a)})});D.versionCheck=D.fnVersionCheck=function(a){var b=D.version.split(".");a=a.split(".");
for(var c,e,d=0,f=a.length;d<f;d++)if(c=parseInt(b[d],10)||0,e=parseInt(a[d],10)||0,c!==e)return c>e;return!0};D.isDataTable=D.fnIsDataTable=function(b){var c=a(b).get(0),e=!1;a.each(D.settings,function(a,b){if(b.nTable===c||b.nScrollHead===c||b.nScrollFoot===c)e=!0});return e};D.tables=D.fnTables=function(b){return a.map(D.settings,function(c){if(!b||b&&a(c.nTable).is(":visible"))return c.nTable})};D.util={throttle:Ca,escapeRegex:eb};D.camelToHungarian=f;I("$()",function(b,c){var e=this.rows(c).nodes(),
e=a(e);return a([].concat(e.filter(b).toArray(),e.find(b).toArray()))});a.each(["on","one","off"],function(b,c){I(c+"()",function(){var b=Array.prototype.slice.call(arguments);b[0].match(/\.dt\b/)||(b[0]+=".dt");var e=a(this.tables().nodes());e[c].apply(e,b);return this})});I("clear()",function(){return this.iterator("table",function(a){Q(a)})});I("settings()",function(){return new U(this.context,this.context)});I("data()",function(){return this.iterator("table",function(a){return va(a.aoData,"_aData")}).flatten()});
I("destroy()",function(b){b=b||!1;return this.iterator("table",function(e){var d=e.nTableWrapper.parentNode,f=e.oClasses,h=e.nTable,g=e.nTBody,p=e.nTHead,l=e.nTFoot,m=a(h),g=a(g),k=a(e.nTableWrapper),z=a.map(e.aoData,function(a){return a.nTr}),q;e.bDestroying=!0;da(e,"aoDestroyCallback","destroy",[e]);b||(new U(e)).columns().visible(!0);k.unbind(".DT").find(":not(tbody *)").unbind(".DT");a(c).unbind(".DT-"+e.sInstance);h!=p.parentNode&&(m.children("thead").detach(),m.append(p));l&&h!=l.parentNode&&
(m.children("tfoot").detach(),m.append(l));m.detach();k.detach();e.aaSorting=[];e.aaSortingFixed=[];ab(e);a(z).removeClass(e.asStripeClasses.join(" "));a("th, td",p).removeClass(f.sSortable+" "+f.sSortableAsc+" "+f.sSortableDesc+" "+f.sSortableNone);e.bJUI&&(a("th span."+f.sSortIcon+", td span."+f.sSortIcon,p).detach(),a("th, td",p).each(function(){var b=a("div."+f.sSortJUIWrapper,this);a(this).append(b.contents());b.detach()}));!b&&d&&d.insertBefore(h,e.nTableReinsertBefore);g.children().detach();
g.append(z);m.css("width",e.sDestroyWidth).removeClass(f.sTable);(q=e.asDestroyStripes.length)&&g.children().each(function(b){a(this).addClass(e.asDestroyStripes[b%q])});d=a.inArray(e,D.settings);-1!==d&&D.settings.splice(d,1)})});D.version="1.10.4";D.settings=[];D.models={};D.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};D.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null};D.models.oColumn={idx:null,aDataSort:null,
asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};D.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],
asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,
fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,
iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",
sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:a.extend({},D.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null};k(D.defaults);D.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,
mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};k(D.defaults.column);D.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,
bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,
nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:b,oAjaxData:b,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},
bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==ia(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==ia(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,e=this.aiDisplay.length,d=this.oFeatures,f=d.bPaginate;return d.bServerSide?!1===f||-1===a?b+e:Math.min(b+a,this._iRecordsDisplay):!f||c>e||-1===a?e:c},
oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}};D.ext=ea={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:D.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:D.version};a.extend(ea,{afnFiltering:ea.search,aTypes:ea.type.detect,ofnSearch:ea.type.search,oSort:ea.type.order,afnSortData:ea.order,aoFeatures:ea.feature,
oApi:ea.internal,oStdClasses:ea.classes,oPagination:ea.pager});a.extend(D.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",
sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",
sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});(function(){var b="",b="",c=b+"ui-state-default",e=b+"css_right ui-icon ui-icon-",b=b+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";a.extend(D.ext.oJUIClasses,D.ext.classes,{sPageButton:"fg-button ui-button "+c,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:c+
" sorting_asc",sSortDesc:c+" sorting_desc",sSortable:c+" sorting",sSortableAsc:c+" sorting_asc_disabled",sSortableDesc:c+" sorting_desc_disabled",sSortableNone:c+" sorting_disabled",sSortJUIAsc:e+"triangle-1-n",sSortJUIDesc:e+"triangle-1-s",sSortJUI:e+"carat-2-n-s",sSortJUIAscAllowed:e+"carat-1-n",sSortJUIDescAllowed:e+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+c,sScrollFoot:"dataTables_scrollFoot "+c,sHeaderTH:c,sFooterTH:c,
sJUIHeader:b+" ui-corner-tl ui-corner-tr",sJUIFooter:b+" ui-corner-bl ui-corner-br"})})();var Yb=D.ext.pager;a.extend(Yb,{simple:function(a,b){return["previous","next"]},full:function(a,b){return["first","previous","next","last"]},simple_numbers:function(a,b){return["previous",Da(a,b),"next"]},full_numbers:function(a,b){return["first","previous",Da(a,b),"next","last"]},_numbers:Da,numbers_length:7});a.extend(!0,D.ext.renderer,{pageButton:{_:function(b,c,e,d,f,h){var g=b.oClasses,p=b.oLanguage.oPaginate,
l,m,k=0,z=function(c,d){var q,r,A,u,n=function(a){za(b,a.data.action,!0)};q=0;for(r=d.length;q<r;q++)if(u=d[q],a.isArray(u))A=a("<"+(u.DT_el||"div")+"/>").appendTo(c),z(A,u);else{m=l="";switch(u){case "ellipsis":c.append("<span>&hellip;</span>");break;case "first":l=p.sFirst;m=u+(0<f?"":" "+g.sPageButtonDisabled);break;case "previous":l=p.sPrevious;m=u+(0<f?"":" "+g.sPageButtonDisabled);break;case "next":l=p.sNext;m=u+(f<h-1?"":" "+g.sPageButtonDisabled);break;case "last":l=p.sLast;m=u+(f<h-1?"":
" "+g.sPageButtonDisabled);break;default:l=u+1,m=f===u?g.sPageButtonActive:""}l&&(A=a("<a>",{"class":g.sPageButton+" "+m,"aria-controls":b.sTableId,"data-dt-idx":k,tabindex:b.iTabIndex,id:0===e&&"string"===typeof u?b.sTableId+"_"+u:null}).html(l).appendTo(c),ub(A,{action:u},n),k++)}};try{var q=a(n.activeElement).data("dt-idx");z(a(c).empty(),d);null!==q&&a(c).find("[data-dt-idx="+q+"]").focus()}catch(r){}}}});a.extend(D.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return zb(a,c)?"num"+
c:null},function(a,b){if(!(!a||a instanceof Date||Sb.test(a)&&wb.test(a)))return null;var c=Date.parse(a);return null!==c&&!isNaN(c)||la(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return zb(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c,!0)?"html-num-fmt"+c:null},function(a,b){return la(a)||"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);a.extend(D.ext.type.search,{html:function(a){return la(a)?
a:"string"===typeof a?a.replace(Nb," ").replace(Na,""):""},string:function(a){return la(a)?a:"string"===typeof a?a.replace(Nb," "):a}});var Db=function(a,b,c,e){if(0!==a&&(!a||"-"===a))return-Infinity;b&&(a=yb(a,b));a.replace&&(c&&(a=a.replace(c,"")),e&&(a=a.replace(e,"")));return 1*a};a.extend(ea.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return la(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return la(a)?"":"string"===
typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0}});Wa("");a.extend(!0,D.ext.renderer,{header:{_:function(b,c,e,d){a(b.nTable).on("order.dt.DT",function(a,f,h,g){b===f&&(a=e.idx,c.removeClass(e.sSortingClass+" "+d.sSortAsc+" "+d.sSortDesc).addClass("asc"==g[a]?d.sSortAsc:"desc"==g[a]?d.sSortDesc:e.sSortingClass))})},jqueryui:function(b,c,e,d){a("<div/>").addClass(d.sSortJUIWrapper).append(c.contents()).append(a("<span/>").addClass(d.sSortIcon+
" "+e.sSortingClassJUI)).appendTo(c);a(b.nTable).on("order.dt.DT",function(a,f,h,g){b===f&&(a=e.idx,c.removeClass(d.sSortAsc+" "+d.sSortDesc).addClass("asc"==g[a]?d.sSortAsc:"desc"==g[a]?d.sSortDesc:e.sSortingClass),c.find("span."+d.sSortIcon).removeClass(d.sSortJUIAsc+" "+d.sSortJUIDesc+" "+d.sSortJUI+" "+d.sSortJUIAscAllowed+" "+d.sSortJUIDescAllowed).addClass("asc"==g[a]?d.sSortJUIAsc:"desc"==g[a]?d.sSortJUIDesc:e.sSortingClassJUI))})}}});D.render={number:function(a,b,c,e){return{display:function(d){var f=
0>d?"-":"";d=Math.abs(parseFloat(d));var h=parseInt(d,10);d=c?b+(d-h).toFixed(c).substring(2):"";return f+(e||"")+h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+d}}}};a.extend(D.ext.internal,{_fnExternApiFunc:Mb,_fnBuildAjax:sa,_fnAjaxUpdate:wa,_fnAjaxParameters:xa,_fnAjaxUpdateDraw:ta,_fnAjaxDataSrc:ya,_fnAddColumn:h,_fnColumnOptions:u,_fnAdjustColumnSizing:v,_fnVisibleToColumnIndex:q,_fnColumnIndexToVisible:B,_fnVisbleColumns:C,_fnGetColumns:e,_fnColumnTypes:p,_fnApplyColumnDefs:z,_fnHungarianMap:k,
_fnCamelToHungarian:f,_fnLanguageCompat:d,_fnBrowserDetect:l,_fnAddData:A,_fnAddTr:H,_fnNodeToDataIndex:function(a,c){return c._DT_RowIndex!==b?c._DT_RowIndex:null},_fnNodeToColumnIndex:function(b,c,e){return a.inArray(e,b.aoData[c].anCells)},_fnGetCellData:y,_fnSetCellData:M,_fnSplitObjNotation:J,_fnGetObjectDataFn:P,_fnSetObjectDataFn:S,_fnGetDataMaster:E,_fnClearTable:Q,_fnDeleteIndex:ga,_fnInvalidate:ba,_fnGetRowElements:ca,_fnCreateTr:N,_fnBuildHead:ma,_fnDrawHead:aa,_fnDraw:W,_fnReDraw:ja,_fnAddOptionsHtml:oa,
_fnDetectHeader:Z,_fnGetUniqueThs:ra,_fnFeatureHtmlFilter:T,_fnFilterComplete:O,_fnFilterCustom:m,_fnFilterColumn:cb,_fnFilter:db,_fnFilterCreateSearch:nb,_fnEscapeRegex:eb,_fnFilterData:Ga,_fnFeatureHtmlInfo:Bb,_fnUpdateInfo:Ta,_fnInfoMacros:Gb,_fnInitialise:Ua,_fnInitComplete:fb,_fnLengthChange:ua,_fnFeatureHtmlLength:mb,_fnFeatureHtmlPaginate:Va,_fnPageChange:za,_fnFeatureHtmlProcessing:L,_fnProcessingDisplay:R,_fnFeatureHtmlTable:Cb,_fnScrollDraw:Pa,_fnApplyToChildren:ha,_fnCalculateColumnWidths:Aa,
_fnThrottle:Ca,_fnConvertToWidth:qb,_fnScrollingWidthAdjust:Hb,_fnGetWidestNode:Ib,_fnGetMaxLenString:rb,_fnStringToCss:V,_fnScrollBarWidth:sb,_fnSortFlatten:Ha,_fnSort:Jb,_fnSortAria:Kb,_fnSortListener:tb,_fnSortAttachListener:gb,_fnSortingClasses:ab,_fnSortData:Lb,_fnSaveState:ka,_fnLoadState:Ra,_fnSettingsFromNode:Qa,_fnLog:Fa,_fnMap:pa,_fnBindAction:ub,_fnCallbackReg:na,_fnCallbackFire:da,_fnLengthOverflow:vb,_fnRenderer:hb,_fnDataSource:ia,_fnRowAttributes:X,_fnCalculateEnd:function(){}});a.fn.dataTable=
D;a.fn.dataTableSettings=D.settings;a.fn.dataTableExt=D.ext;a.fn.DataTable=function(b){return a(this).dataTable(b).api()};a.each(D,function(b,c){a.fn.DataTable[b]=c});return a.fn.dataTable})})(window,document);window.TOONTALK||(window.TOONTALK={});window.TOONTALK.creators_from_json={};window.TOONTALK.widget=function(c){var n=function(b){var a=this.get_frontside&&this.get_frontside(!0);if(a)return b&&this.rerender(),a.get_element()};c.creators_from_json.top_level=function(b){b=c.widget.create_top_level_widget(b.settings);$(b.get_backside(!0).get_element()).addClass("toontalk-top-level-backside");return b};return{add_standard_widget_functionality:function(b){var a=function(){return!1};this.add_sides_functionality(b);this.runnable(b);this.stackable(b);this.animatable(b);this.has_title(b);
this.has_parent(b);this.has_description(b);this.has_listeners(b);this.droppable(b);this.erasable(b);b.is_of_type||(b.is_of_type=function(a){return this.get_type_name()===a});b.is_number||(b.is_number=a);b.is_box||(b.is_box=a);b.is_empty_hole||(b.is_empty_hole=a);b.is_scale||(b.is_scale=a);b.is_bird||(b.is_bird=a);b.is_nest||(b.is_nest=a);b.is_robot||(b.is_robot=a);b.is_element||(b.is_element=a);b.is_function_nest||(b.is_function_nest=a);b.is_top_level=a;b.is_widget=!0;return b},erasable:function(b){var a;
b.get_erased||(b.get_erased=function(){return a});b.set_erased||(b.set_erased=function(b,c){a=b;c&&this.rerender()});return b},add_sides_functionality:function(b){var a,k;b.get_frontside||(b.get_frontside=function(f){f&&!a&&(a=c.frontside.create(b));return a},b.save_dimensions=function(){return this.save_dimensions_of(this)},b.save_dimensions_of=function(a){a=a.get_size_attributes?a.get_size_attributes():a.get_frontside_element();0<a.clientWidth&&(this.saved_width=a.clientWidth);0<a.clientHeight&&
(this.saved_height=a.clientHeight);return!0},b.restore_dimensions=function(){var a;0<this.saved_width&&(this.set_size_attributes?this.set_size_attributes(this.saved_width,this.saved_height):(a=this.get_frontside_element(),$(a).css({width:this.saved_width,height:this.saved_height})),this.saved_height=this.saved_width=void 0)});b.get_backside||(b.get_backside=function(a){a&&!k&&(k=this.create_backside());return k});b.set_backside||(b.set_backside=function(a){k=a});b.forget_backside||(b.forget_backside=
function(){k=void 0});b.create_backside||(b.create_backside=function(){return c.backside.create(b)});return b},runnable:function(b){var a=!1,c=!1;b.get_running||(b.get_running=function(){var b=!1,c;a&&(c=this.get_backside_widgets(),0===c.length?a=!1:(c.some(function(a){if(a.get_widget().get_running())return b=!0}),a=b));return a},b.is_ok_to_run=function(){return c});b.set_running||(b.set_running=function(f,d){var r=a===f,g,l;c=f;r&&a||(g=this.get_backside_widgets(),a=f,this.get_backside()&&this.get_backside().run_status_changed(a),
g.forEach(function(c){l=c.get_widget();c.is_backside()&&0<=this.backside_widgets.indexOf(l)||(l.is_robot()?c.is_backside()||a&&l.get_running()||(a?(l.set_stopped(!1),l.run(b,d)):(l.set_stopped(!0),l.set_running(!1)),l.rerender()):l.set_running&&(!d&&c.is_backside()&&"top-level"!==b.get_type_name()?l.set_running(f,b):l.set_running(f)))}.bind(this)),this.walk_children&&this.walk_children(function(b){b.set_running&&b.set_running(a);return!0}),r||this.rerender())});return b},droppable:function(b){b.drop_on||
(b.drop_on=function(a,b,c,d){if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,b,c,d);console.log("No handler for drop of '"+this+"' on '"+a+"'")})},stackable:function(b){var a=!1;b.get_infinite_stack||(b.get_infinite_stack=function(){return a});b.set_infinite_stack||(b.set_infinite_stack=function(c){var f=b.get_backside_element(),d=b.get_frontside_element();a=c;f&&$(f).find(".toontalk-infinite-stack-check-box").prop("checked",c);d&&(c?$(d).addClass("toontalk-infinite-stack"):$(d).removeClass("toontalk-infinite-stack"))});
return b},animatable:function(b){var a;b.animate_to_widget||(a=function(a){var b=a.get_element();b&&(a.is_backside()||$(b).is(":visible"))||(b=c.UTILITIES.find_resource_equal_to_widget(a));return b},b.animate_to_widget=function(b,c,d,r,g){setTimeout(function(){this.animate_to_element(a(b),c,d,r,g)}.bind(this),100)});b.animate_to_element||(b.animate_to_element=function(a,b,c,r,g){var l=$(a).offset(),n=$(this.get_frontside_element()),h=$(a).is(".toontalk-top-level-backside");if(a&&$(a).is(":visible")){if(!r||
h)r=($(a).width()-n.width())*Math.random();if(!g||h)g=($(a).height()-n.height())*Math.random();l?(l.left+=r,l.top+=g):l={left:0,top:0};this.animate_to_absolute_position(l,b,c)}else b&&b()});b.animate_to_absolute_position||(b.animate_to_absolute_position=function(a,b,d){c.UTILITIES.animate_to_absolute_position(this.get_frontside_element(),a,b,d)});return b},has_title:function(b){b.get_title||(b.get_title=function(){var a=this.get_type_name(),b=this.get_backside(),f=this.get_frontside_element(),d=this.get_description(),
b=$(f).is(".toontalk-top-level-resource")?this.can_run&&this.can_run()?this.get_running()?"Click elsewhere to stop this from running. Click on it to start it up again.":"Click to start this running. Click elsewhere to stop it.":"Drag this "+a+" to a work area.":b&&b.get_element()&&$(b.get_element()).is(":visible")?d||this.get_custom_title_prefix?"":"This is "+c.UTILITIES.add_a_or_an(a):"Click to see my back side.";d&&(d="This "+a+" "+d,b=b?d+"\n"+b:d);if(this.get_erased())return this.get_title_of_erased_widget();
this.get_custom_title_prefix&&!$(f).is(".toontalk-top-level-resource")&&(b=this.get_custom_title_prefix()+"\n"+b);b=b.trim();0>".?!".indexOf(b[b.length-1])&&(b+=".");return b});return b},get_title_of_erased_widget:function(){var b=this.get_frontside_element(),a=this.get_type_name();return b&&$(b).closest(".toontalk-conditions-contents-container").is("*")?"This "+a+" has been erased so that it matches with any "+a+".":"This "+a+" has been erased. Dusty the Vacuum can restore the "+a+" to normal."},
has_parent:function(b){var a,c;b.get_parent_of_frontside=function(){return a};b.get_parent_of_backside=function(){return c};b.set_parent_of_frontside=function(b,c,k){var g=a;b&&c&&(b=b.get_backside(!0));if(a===b)return;a=b;g&&!k&&g.is_backside()&&g.get_widget().remove_backside_widget(this,!1,!0)};b.set_parent_of_backside=function(a,b,r){c&&!r&&c.is_backside()&&c.get_widget().remove_backside_widget(this,!0,!0);c=a&&b?a.get_backside(!0):a};b.closest_visible_ancestor=function(){for(var a=this;a&&!a.visible();)a=
a.is_backside()?a.get_parent_of_backside():a.get_parent_of_frontside();return a||this};b.closest_visible_ancestor_or_frontside=function(){for(var a=this,b;a&&!a.visible();)b=a,a.is_backside()?(a=a.get_parent_of_backside())||(a=b.get_widget()):a=a.get_parent_of_frontside();return a||this};b.ancestor_of_type=function(a){for(var b=this;b&&!b.is_of_type(a);)b=b.is_backside()?b.get_widget().get_parent_of_backside():b.get_parent_of_frontside();return b};b.has_ancestor=function(a){for(var b=this;b;){if(a===
b)return!0;b=b.is_backside()?b.get_widget().get_parent_of_backside():b.get_parent_of_frontside()}return!1};b.remove_from_parent_of_frontside=function(b){a&&(a.is_backside()?a.remove_backside_widget(this,!1,!b):a.removed_from_container&&a.removed_from_container(this,!1,b,void 0,!0))};return b},has_description:function(b){var a;b.get_description||(b.get_description=function(){return a});b.set_description||(b.set_description=function(b,c){if(a===b||!a&&""===b)return!1;a=b;c&&this.rerender();return!0})},
has_listeners:function(b){var a={};b.add_listener||(b.add_listener=function(b,c){var d=a[b];d?0>d.indexOf(c)&&d.push(c):a[b]=[c]});b.remove_listener||(b.remove_listener=function(b,f,d){if(b=a[b])if(f=b.indexOf(f),0<=f){b.splice(f,1);return}!d&&c.debugging&&console.log("Listener of type "+type_name+" could not be removed.")});b.get_listeners||(b.get_listeners=function(b){return a[b]})},get_full_description:function(b){var a;if(this.get_erased&&this.get_erased())return b&&"conditions"===b.role?"any "+
this.get_type_name():"erased "+this.get_type_name();a=this.get_description(b);b=this.toString(b);return a?b+" ("+a+")":b},remove:function(b){var a=this.get_backside(),c=this.get_frontside(),f=this.get_parent_of_frontside();this.get_parent_of_backside();a&&a.hide_backside();c&&(c.remove(),f&&this.remove_from_parent_of_frontside(b));this.set_running(!1);this.set_visible(!1);this.walk_children&&this.walk_children(function(a){a.remove&&a.remove();return!0})},get_frontside_element:n,get_element:n,get_backside_element:function(b){if(b=
this.get_backside&&this.get_backside(b))return b.get_element()},add_to_json:function(b,a){var c,f,d,r,g;if(b){b.view?(f=b,c=b.view,b=b.semantic):(c={},f={semantic:b,view:c});f.version=1;this.get_erased&&this.get_erased()&&(b.erased=!0);this.get_infinite_stack&&this.get_infinite_stack()&&(b.infinite_stack=!0);this.get_running&&this.get_running()&&(b.running=!0);if(!this.get_parent_of_frontside()||this.get_parent_of_frontside().is_backside())if(r=this.get_frontside_element&&this.get_frontside_element())g=
$(r).width(),$(r).is(".toontalk-plain-text-element")||0===g||(c.frontside_width=$(r).width(),c.frontside_height=$(r).height()),0!==g&&(d=$(r).position()),d&&(c.frontside_left=d.left,c.frontside_top=d.top);if(r=this.get_backside()){if(g=r.get_element())c.backside_width=$(g).width(),c.backside_height=$(g).height(),c.backside_left||(d=$(g).position(),c.backside_left=d.left,c.backside_top=d.top,"&lt;"===$(g).find(".toontalk-settings-backside-button").html()&&(c.advanced_settings_open=!0));r.get_backside_dimensions()&&
(c.backside_geometry=r.get_backside_dimensions())}!c.backside_geometry&&this.backside_geometry&&(c.backside_geometry=this.backside_geometry);c.saved_width=this.saved_width;c.saved_height=this.saved_height;b.description=this.get_description&&this.get_description();return f}console.log("get_json not defined");return{}},add_backside_widgets_to_json:function(b,a){var k=this.get_backside_widgets(),f;0<k.length&&(b.semantic.backside_widgets=c.UTILITIES.get_json_of_array(k,a),(k=this.get_backside_widgets_json_views())&&
k.forEach(function(c,k){var g;f=b.semantic.backside_widgets[k];0<=f.widget.shared_widget_index?(g=a.widgets_encountered.indexOf(a.shared_widgets[f.widget.shared_widget_index]),g=a.json_of_widgets_encountered[g].view):g=f.widget.view;f.is_backside?c.backside_left&&(g.backside_left=c.backside_left,g.backside_top=c.backside_top):c.frontside_left&&(g.frontside_left=c.frontside_left,g.frontside_top=c.frontside_top)}))},get_backside_widgets:function(){return this.backside_widgets||[]},add_backside_widget:function(b,
a){var k=this.get_backside(),f=a?b.get_backside():b;c.debugging&&b===this?c.UTILITIES.report_internal_error("Adding a widget to a list of its backside widgets!"):(this.backside_widgets?0>this.backside_widgets.indexOf(f)&&this.backside_widgets.push(f):this.backside_widgets=[f],a?b.set_parent_of_backside(this,!0):b.set_parent_of_frontside(this,!0),k.visible()&&(f.set_visible(!0),b.render()),this.get_running()&&b.set_running(!0))},remove_all_backside_widgets:function(){if(this.backside_widgets)for(;0<
this.backside_widgets.length;)this.backside_widgets[0].remove()},remove_backside_widget:function(b,a,k){this.get_backside();var f=a?b.get_backside(!0):b,d;c.debugging&&!this.backside_widgets?k?console.log("remove_backside_widget called and there are no backside_widgets"):c.UTILITIES.report_internal_error("Couldn't remove a widget from backside widgets."):(d=this.backside_widgets.indexOf(f),0>d?k?c.debugging&&console.log("Warning: Probable redundant call to remove_backside_widget"):c.UTILITIES.report_internal_error("Couldn't find a widget to remove it from backside widgets. "+
f.get_widget()+" ("+f.get_widget().debug_id+")"):(this.backside_widgets.splice(d,1),this.backside_widgets_json_views&&this.backside_widgets_json_views.splice(d,1),a?(a=b.get_parent_of_backside())&&a.get_widget()===this&&b.set_parent_of_backside(void 0,!0,!0):(a=b.get_parent_of_frontside())&&a.get_widget()===this&&b.set_parent_of_frontside(void 0,void 0,!0),f.set_visible(!1)))},set_backside_widget_sides:function(b,a){var c=this.get_backside(),f=c&&c.visible();this.backside_widgets=b;0<b.length&&(this.get_backside()?
this.get_backside().add_backside_widgets(b,a):this.backside_widgets_json_views=a,b.forEach(function(a){a.is_backside()?a.get_widget().set_parent_of_backside(this,!0):a.get_widget().set_parent_of_frontside(this,!0);a.set_visible(f)}.bind(this)))},get_backside_widgets_json_views:function(b){!this.backside_widgets_json_views&&b&&(this.backside_widgets_json_views=[]);return this.backside_widgets_json_views},can_run:function(){var b=!1,a;this.get_backside_widgets().some(function(c){a=c.get_widget();if(a.get_body&&
!a.get_body().is_empty()||a.can_run())return b=!0});return b},add_to_copy:function(b,a){var k;this.get_erased&&this.get_erased()&&(b.set_erased||c.widget.erasable(b),b.set_erased(this.get_erased()));a&&a.just_value||(k=this.get_backside_widgets(),0<k.length&&b.set_backside_widget_sides(c.UTILITIES.copy_widget_sides(k,a),this.get_backside_widgets_json_views()));b.set_visible(this.visible());return b},get_type_name:function(){return""},copy:function(){console.assert(!1,"copy not implemented")},add_copy_to_container:function(b,
a,k){b||(b=this.copy());var f=this.get_frontside_element(),d=b.get_frontside_element(),r=$(f).closest(".toontalk-backside"),g,l;0===r.length&&(r=$(".toontalk-backside"));"undefined"===typeof a&&(a=30);"undefined"===typeof k&&(k=30);g=c.UTILITIES.relative_position(f,r.get(0));l=c.UTILITIES.widget_from_jquery(r);$(d).css({width:$(f).width(),height:$(f).height(),left:g.left+a,top:g.top+k});r.get(0).appendChild(d);l&&l.add_backside_widget(b);c.robot.in_training&&c.robot.in_training.copied(this,b,!1);
return b},visible:function(){var b=this.get_frontside();return b?b.visible():!1},set_visible:function(b){var a=this.get_frontside(b);a&&a.set_visible(b)},is_backside:function(){return!1},get_parent:function(){return this.get_parent_of_frontside()},drag_started:function(b,a){c.robot.in_training&&c.robot.in_training.picked_up(this,b,a)},match:function(b){console.assert(!1,"match not implemented for "+b.toString())},removed:function(b){c.UTILITIES.report_internal_error("removed not implemented")},equals_box:function(){return!1},
equals_number:function(){return!1},open_backside:function(b){var a=this.get_backside(),k=b&&function(){setTimeout(b)},f=function(a,b){c.UTILITIES.set_timeout(function(){$(a).addClass("toontalk-side-appearing");c.UTILITIES.add_one_shot_event_handler(a,"transitionend",2500,function(){$(a).removeClass("toontalk-side-appearing");k&&k()});$(a).css({left:l,top:n,opacity:b});this.apply_backside_geometry()}.bind(this))}.bind(this),d,r,g,l,n,h,u;if(a){d=a.get_element();if($(d).is(":visible"))return c.UTILITIES.highlight_element(d,
void 0,1E3),k&&k(),a;if((a=this.get_parent_of_backside())&&a.is_backside())return a.get_widget().open_backside(b)}r=this.get_frontside_element();g=$(r).parent();a=$(r);if(a.is(".toontalk-top-level-resource"))k&&k();else{for(;0<g.length&&!g.is(".toontalk-backside");)a=g,g=g.parent();a.get(0);a=this.get_backside(!0);d=a.get_element();d.toontalk_widget=this;h=$(r).offset();(u=g.offset())||(u={left:0,top:0});$(d).css({left:h.left-u.left,top:h.top-u.top,opacity:.01});g.append(d);(g=c.UTILITIES.widget_from_jquery(g))&&
g.add_backside_widget(this,!0);l=h.left-u.left;r=this.get_size_attributes?this.get_size_attributes().clientHeight:r.offsetHeight;n=h.top-u.top+r+26;f(d,"inherit");a.render();this.backside_widgets&&this.backside_widgets.forEach(function(a){a.render();a.set_visible(!0)});return a}},apply_backside_geometry:function(){var b=this.get_backside(!0),a=b.get_element();this.backside_geometry&&a&&(c.backside.scale_backside($(a),this.backside_geometry.x_scale,this.backside_geometry.y_scale,this.backside_geometry.original_width,
this.backside_geometry.original_height),b.set_dimensions(this.backside_geometry))},top_level_widget:function(){var b;return this.is_top_level()?this:(b=c.UTILITIES.widget_from_jquery($(this.get_frontside_element()).closest(".toontalk-top-level-backside")))?b:(b=this.get_parent_of_frontside()||this.get_parent_of_backside())?b.get_widget().top_level_widget():this.create_top_level_widget()},backup_all:function(b){var a=this.top_level_widget();a&&a.save(b)},render:function(){c.DISPLAY_UPDATES.pending_update(this)},
rerender:function(){this.visible()&&this.render()},hide:function(){$(this.get_frontside_element()).hide()},close_button_ok:function(b){return"top-level"!==this.get_type_name()&&!$(b).is(".toontalk-top-level-resource")&&!$(b).closest(".toontalk-conditions-panel").is("*")},get_widget:function(){return this},add_to_top_level_backside:function(b,a){var k=this.top_level_widget(),f=b.get_frontside_element(!0);k.add_backside_widget(b);k.get_backside_element().appendChild(f);b.render();a&&c.robot.in_training&&
c.robot.in_training.dropped_on(b,k);return f},create_top_level_widget:function(b){var a=Object.create(c.widget),k=function(){return!1};b||(b={});a.is_top_level=function(){return!0};a.is_number=k;a.is_box=k;a.is_empty_hole=k;a.is_scale=k;a.is_bird=k;a.is_nest=k;a.is_robot=k;a.is_element=k;a.is_function_nest=k;a.get_json=function(a){a=this.get_backside(!0).get_element();a=document.defaultView.getComputedStyle(a,null).getPropertyValue("background-color");return{semantic:{type:"top_level",settings:b},
view:{background_color:a}}};a.get_type_name=function(){return"top-level"};a.is_of_type=function(a){return"top-level"===a};a.toString=function(){return"top level widget"};a.get_description=function(){};a.match=function(){return"matched"};a.update_display=function(){this.backside_widgets&&this.backside_widgets.forEach(function(a){a.visible()&&a.update_display()})};a.copy=function(){return this};a.visible=function(){return!0};a.get_parent_of_frontside=function(){};a.get_parent_of_backside=function(){};
a.closest_visible_ancestor=function(){return this};a.get_infinite_stack=function(){return!1};a.top_level_widget=function(){return this};a=a.add_sides_functionality(a);a=a.runnable(a);a=a.has_parent(a);a.removed_from_container=function(a,b,k,g,l){c.robot.in_training||this.remove_backside_widget(a,b,l)};a.widget_dropped_on_me=function(a,b,c,g,l){return this.get_backside().widget_dropped_on_me(a,b,c,g,l)};a.get_element=function(){return this.get_backside().get_element()};a.get_setting=function(a,d){"undefined"!==
typeof b[a]||d||(b[a]=c.DEFAULT_SETTINGS&&c.DEFAULT_SETTINGS[a]);return b[a]};a.set_setting=function(a,c){b[a]=c};a.open_settings=function(){c.SETTINGS.open(a)};a.save=function(a,b,k){var g=this.get_setting("program_name",!0),l;g&&(b||(b={}),"undefined"===typeof b.google_drive&&(b.google_drive=c.google_drive&&this.get_setting("auto_save_to_google_drive")),"undefined"===typeof b.local_storage&&(b.local_storage=this.get_setting("auto_save_to_local_storage")),a?(b.google_drive&&!this.get_setting("google_drive_unavailable")&&
(l=c.UTILITIES.get_json_top_level(this),a=c.google_drive.get_status(),"Ready"===a?(c.google_drive.upload_file(g,"json",JSON.stringify(l),k),k=void 0):c.google_drive.connection_to_google_drive_possible()&&("Need to authorize"===a?(c.UTILITIES.display_message_if_new("Unable to save to your Google Drive because you need to log in. Click on the settings icon to log in."),c.UTILITIES.display_tooltip($(".toontalk-settings-button"))):console.log("Unable to save to Google Drive because: "+a))),b.local_storage&&
(l||(l=c.UTILITIES.get_json_top_level(this)),this.save_to_local_storage(l)),k&&k()):setTimeout(function(){this.save(!0,b,k)}.bind(this),100))};a.publish=function(a,b){c.publish.publish_widget(this.get_setting("program_name"),this,b,a)};a.save_to_local_storage=function(a,b){var k=this.get_setting("program_name"),g=c.UTILITIES.local_storage_program_key(k),l=c.UTILITIES.local_storage_program_meta_data_key(k),n,h,u;b||(b=Date.now());try{h=(h=window.localStorage.getItem(l))?JSON.parse(h):{created:b},h.last_modified=
b,u=JSON.stringify(a),h.file_size=u.length,window.localStorage.setItem(l,JSON.stringify(h)),window.localStorage.setItem(g,u),window.localStorage.setItem("toontalk-last-key",g),n=c.UTILITIES.get_all_locally_stored_program_names(),0>n.indexOf(k)&&(n.push(k),c.UTILITIES.set_all_locally_stored_program_names(n))}catch(v){k="Failed to save state to local storage since it requires "+JSON.stringify(a).length+" bytes. Error message is "+v,c.UTILITIES.is_internet_explorer()?console.error(k):c.UTILITIES.display_message(k),
this.last_local_storage_error=k}};a.load=function(b,d,k){var g=this.get_setting("program_name"),l=g+".json",n=c.UTILITIES.local_storage_program_key(g),h=function(b){b?(b=JSON.parse(b),a.remove_all_backside_widgets(),c.UTILITIES.add_backside_widgets_from_json(a,b.semantic.backside_widgets),d&&d()):k&&k()},g=function(a){a?c.google_drive.download_file(a,h):h(window.localStorage.getItem(n))};b&&c.google_drive&&"Ready"===c.google_drive.get_status()?c.google_drive.get_toontalk_program_file(l,g):h(window.localStorage.getItem(n))};
a.walk_children=function(){};a.render=function(){};a.is_widget=!0;a.get_backside(!0).set_visible(!0);c.debugging&&(a.debug_id=c.UTILITIES.generate_unique_id(),a.debug_string="Top-level widget");return a}}}(window.TOONTALK);window.TOONTALK.backside=function(c){return{create:function(n){var b=Object.create(this),a=document.createElement("div"),k=$(a),f=1,d=1,r=document.createElement("div"),g=document.createElement("div"),l=n.get_help_URL&&n.get_help_URL(),x,h,u,v,q,B,C,e,p,z,A,H=function(a){a?($(r).addClass("toontalk-green-flag-active").removeClass("toontalk-green-flag-inactive"),$(g).addClass("toontalk-stop-sign-inactive").removeClass("toontalk-stop-sign-active")):($(r).addClass("toontalk-green-flag-inactive").removeClass("toontalk-green-flag-active"),
$(g).addClass("toontalk-stop-sign-active").removeClass("toontalk-stop-sign-inactive"))},y=function(){var a=k.width();k.height();var b,c,e;0===a?setTimeout(y,100):(a=$(g).width(),b=(b=$(C).width())?b+14:0,$(g).css({right:b}),$(r).css({right:b+a+6}),c=$(r).width(),p&&$(p).css({right:b+a+c+12}),x&&(e=$(p).width()||0,$(x).css({right:b+a+c+e+12})))};e=this.create_description_label(b,n);var M=function(){var a;a=n.get_running()?"To stop this click on the stop sign.":n.can_run()?"Click this to start this running.":
"There is nothing to run on this.";r.title=a},J=function(){var a;a=n.get_running()?"Click to stop this from running.":n.can_run()?"This has stopped. Click on the flag to start running it.":"There is nothing to run here.";g.title=a},P,S;c.TRANSLATION_ENABLED&&(l=c.UTILITIES.add_URL_parameter(l,"translate","1"));n.close_button_ok(a)&&(S=function(a){b.hide_backside(a);a.stopPropagation()},P=(P=n.get_description())?"the "+n.get_type_name()+" who "+P:"the "+n.get_type_name(),C=c.UTILITIES.create_close_button(S,
"Click to hide this back side of "+P+"."),a.appendChild(C));$(r).addClass("toontalk-green-flag toontalk-green-flag-inactive").click(function(a){n.can_run()?(H(!0),n.set_running(!0),J()):n.is_top_level()?c.UTILITIES.display_message("There is nothing to run."):c.UTILITIES.display_message("This "+n.get_type_name()+" has nothing to run. Add some robots on the back.")}).on("mouseenter",J);$(g).addClass("toontalk-stop-sign toontalk-stop-sign-active").click(function(a){H(!1);n.set_running(!1);M()}).on("mouseenter",
M);a.appendChild(r);a.appendChild(g);c.UTILITIES.use_custom_tooltip(r);c.UTILITIES.use_custom_tooltip(g);l&&(p=document.createElement("div"),$(p).addClass("toontalk-help-button notranslate toontalk-widget-help-button").click(function(a){z=document.createElement("iframe");$(z).addClass("toontalk-help-frame");z.src=l;document.body.appendChild(A);document.body.appendChild(z)}),p.innerHTML="i",p.translate=!1,p.title="Click to learn more about "+n.get_type_name(!0,!0)+".",A=document.createElement("div"),
$(A).addClass("toontalk-close-help-frame-button").button().click(function(a){$(z).remove();$(A).remove()}),A.innerHTML="Return to ToonTalk",a.appendChild(p));e&&a.appendChild(e);n.is_top_level()&&(x=document.createElement("div"),$(x).addClass("toontalk-settings-button").click(function(a){n.open_settings()}),x.title="Click to change settings or open a different program.",a.appendChild(x));c.UTILITIES.set_timeout(y);k.addClass("toontalk-backside toontalk-side toontalk-backside-of-"+n.get_type_name());
k.css({"z-index":c.UTILITIES.next_z_index()});b.get_element=function(){return a};b.get_widget=function(){return n};b.visible=function(){return h};b.set_visible=function(a){var b=this.get_widget().get_backside_widgets();h=a;b.forEach(function(b){b.set_visible(a);a&&b.render()})};n.get_backside||(n.get_backside=function(){return b});b.get_parent_of_backside=function(){return n.get_parent_of_backside()};b.get_parent_of_frontside=function(){return n.get_parent_of_frontside()};b.get_frontside=function(){return n.get_frontside()};
b.get_frontside_element=function(){return n.get_frontside_element()};n.removed_from_container||(n.removed_from_container=function(a,b,e,d,f){c.robot.in_training||this.remove_backside_widget(a,b,f)});b.widget_dropped_on_me=function(a,b,e,d,f){var h,g,p;b?(h=a.get_backside(!0),g=h.get_element(),h.rerender()):(h=a.get_frontside(!0),g=h.get_element(),a.rerender());h=$(g);k.append(h);this.get_widget().is_top_level()&&d&&!d.visible()&&h.addClass("toontalk-widget-added-to-backside-by-unwatched-robot");c.UTILITIES.set_position_is_absolute(g,
!0,e);c.robot.in_training&&!f&&e&&c.robot.in_training.dropped_on(a,this);b&&"top-level"!=this.get_widget().get_type_name()&&(p=a.get_backside(),a.forget_backside(),a.remove(e),a.set_backside(p));this.add_backside_widget(a,b);a.dropped_on_other&&a.dropped_on_other(this.get_widget(),!0,e,d);a.get_body&&a.get_body().is_empty()&&!a.being_trained&&setTimeout(function(){(p=a.open_backside())&&$(p.get_element()).find(".toontalk-train-backside-button").click()});e&&a.get_widget().backup_all();!this.get_widget().is_ok_to_run()||
this.get_widget().get_running()||this.get_widget().is_top_level()||this.get_widget().set_running(!0);return!0};b.add_backside_widget=function(a,b){return this.get_widget().add_backside_widget(a,b)};b.add_backside_widgets=function(a,b){0!==a.length&&c.UTILITIES.set_timeout(function(){var c,e,d=this.visible();a.forEach(function(a,f){var h=a.get_widget().get_backside();c=a.get_element();c.toontalk_widget=a.get_widget();b&&(e=b[f])&&(a.is_backside()?($(c).css({left:e.backside_left,top:e.backside_top,
width:e.backside_width,height:e.backside_height}),a.get_widget().apply_backside_geometry(),e.advanced_settings_open&&h.set_advanced_settings_showing(!0,h.get_element())):(0===e.frontside_width&&(e.frontside_width=""),0===e.frontside_height&&(e.frontside_height=""),$(c).css({left:e.frontside_left,top:e.frontside_top,width:e.frontside_width,height:e.frontside_height})));k.append(c);a.set_visible(d);a.get_widget().rerender()})}.bind(this))};b.get_backside_dimensions=function(){if(1!==f||1!==d)return{x_scale:f,
y_scale:d,original_width:u,original_height:v}};b.set_dimensions=function(a){f=a.x_scale;d=a.y_scale;u=a.original_width;v=a.original_height};b.scale_to_fit=function(a,b){var e;!u&&this.get_widget().backside_geometry&&(u=this.get_widget().backside_geometry.original_width,v=this.get_widget().backside_geometry.original_height);e=c.UTILITIES.scale_to_fit(a,b,u,v);f=e.x_scale;d=e.y_scale};b.run_status_changed=function(a){H(a)};a.toontalk_widget=n;c.UTILITIES.drag_and_drop(a);k.resizable({start:function(){q=
k.width();B=k.height();u||(u=q);v||(v=B)},resize:function(a,b){var e=b.size.width,h=b.size.height;k.is(".toontalk-top-level-backside")||(f*=e/q,d*=h/B,q=e,B=h,c.backside.scale_backside(k,f,d,u,v))},handles:"e,s,se"});a.addEventListener("mouseenter",function(a){a=n.get_frontside();var b=n.get_parent_of_backside();!a||b&&!b.get_widget().is_top_level()||c.UTILITIES.highlight_element(a.get_element())});a.addEventListener("mouseleave",function(a){n.is_top_level()||c.UTILITIES.remove_highlight()});b.update_display=
function(){b.display_updated()};b.display_updated=function(){var a=$(this.get_element());u||(u=a.width());v||(v=a.height())};n.get_backside_widgets&&(e=n.get_backside_widgets(),b.add_backside_widgets(e,n.get_backside_widgets_json_views()));c.debugging&&(a.id=n.debug_id);return b},toString:function(){return"backside of "+this.get_widget()},remove_element:function(){$(this.get_element()).remove()},create_infinite_stack_check_box:function(n,b){var a=c.UTILITIES.create_check_box(b.get_infinite_stack(),
"toontalk-infinite-stack-check-box","Copy when dragged.","Check this if you want the "+b.get_type_name()+" to be copied instead of moved.");$(a.button).click(function(k){var f=a.button.checked;b.set_infinite_stack(f);c.robot.in_training&&c.robot.in_training.edited(b,{setter_name:"set_infinite_stack",argument_1:f,toString:f?"change dragging to make a copy of ":"change dragging back to moving for ",button_selector:".toontalk-infinite-stack-check-box"});k.stopPropagation()});return a},create_description_label:function(n,
b){var a=b.get_description();if(a)return c.UTILITIES.create_text_element("Back side of a "+b.get_type_name()+" that "+a)},add_advanced_settings:function(n){var b=this.get_widget(),a=this.create_infinite_stack_check_box(this,b),k=b.get_type_name(),f=c.UTILITIES.create_text_area(b.get_description(),"toontalk-description-input","This&nbsp;"+k+"&nbsp;","Type here to provide additional information about this "+k+"."),d=$("<button>Make a sensor nest</button>").button(),r=$("<button>Make a function bird</button>").button(),
g=function(){var a=f.button.value.trim();b.set_description(a,!0)&&c.robot.in_training&&c.robot.in_training.edited(b,{setter_name:"set_description",argument_1:a,toString:"change the description to '"+a+"'' of the "+k,button_selector:".toontalk-description-input"})},l=document.createElement("table"),x=this.get_element(),h=function(a,d){var f=b.get_parent_of_frontside(),h=a.get_frontside_element(!0),g;f&&!f.is_top_level()?(f.add_backside_widget(a),g=f.get_element(),g.appendChild(h),f=$(g).offset(),f.top+=
.6*$(g).height()):(b.add_to_top_level_backside(a,!1),f=d.offset(),f.left-=120,0>f.left&&(f.left=0));c.UTILITIES.set_absolute_position($(h),f)};$(l).addClass("toontalk-advanced-setting");$(f.button).val(b.get_description());f.button.addEventListener("change",g);f.button.addEventListener("mouseout",g);d.addClass("toontalk-make-sensor_nest_button").click(function(a){a=c.sensor.create("click","which",void 0,void 0,!0,b);h(a,d);c.robot.in_training&&c.robot.in_training.created_widget(a,b,".toontalk-make-sensor_nest_button")});
d.attr("title","Click to create a nest which receives messages when events happen to this "+b.get_type_name()+".");r.addClass("toontalk-make-function_bird_button").click(function(a){a=c.bird.create_function(k);h(a,r);c.robot.in_training&&c.robot.in_training.created_widget(a,b,".toontalk-make-function_bird_button")});b.is_number()?r.attr("title","Click to get a bird that flies to functions of "+b.get_type_name(!0)+"."):(r.attr("title","There are no functions that operate on "+b.get_type_name(!0)+" (yet)."),
r.button("option","disabled",!0));l.appendChild(c.UTILITIES.create_row(f.container));l.appendChild(c.UTILITIES.create_row(d.get(0),r.get(0),a.container));x.appendChild(l);n?$(x).find(".toontalk-settings-backside-button").remove():$(x).find(".toontalk-advanced-setting").hide()},get_type_name:function(){return"the backside of "+c.UTILITIES.add_a_or_an(this.get_widget().get_type_name())},hide_backside:function(n){var b=this.get_widget(),a=b.get_frontside_element(),k=$(b.get_backside_element()),f=k.position(),
d=k.parent().closest(".toontalk-backside"),r=b.get_parent_of_backside();c.UTILITIES.remove_highlight();r&&(r.is_backside()?b.set_parent_of_backside(void 0,!0):r.removed_from_container(b,!0,n,void 0,!0),b.forget_backside&&b.forget_backside());(function(){var a=b.get_backside_widgets(),c=b.get_backside_widgets_json_views(!0),d;a.forEach(function(a,b){a.get_widget();var f;if(d=a.get_element())c[b]||(c[b]={}),a.start_position?(f=a.start_position,a.start_position=void 0):f=$(d).position(),a.is_backside()?
(c[b].backside_left=f.left,c[b].backside_top=f.top):(c[b].frontside_left=f.left,c[b].frontside_top=f.top)})})();b.backside_geometry=this.get_backside_dimensions();(function(b){var f=$(a).offset(),k=d.position(),h=function(){b.remove()};b.is(":visible")&&(b.addClass("toontalk-side-appearing"),c.UTILITIES.add_one_shot_event_handler(b.get(0),"transitionend",2500,h),k||(k={left:0,top:0}),b.css({left:f.left-k.left,top:f.top-k.top,opacity:.1}))})(k);!$(a).is(":visible")&&(f&&$(a).css({left:f.left,top:f.top}),
n=c.UTILITIES.widget_from_jquery(d))&&(n.add_backside_widget(b),d.append(a),b.render());b.backside_widgets&&b.backside_widgets.forEach(function(a){a.set_visible(!1)});if(b.on_backside_hidden)b.on_backside_hidden()},create_advanced_settings_button:function(n,b){var a=document.createElement("div"),k=$(a),f=!1;a.innerHTML="&gt;";k.addClass("toontalk-settings-backside-button");k.css({"z-index":c.UTILITIES.next_z_index()});k.click(function(a){f=!f;this.set_advanced_settings_showing(f,n.get_element(),k);
a.stopPropagation()}.bind(this));k.attr("title","Click to see the advanced settings of this "+b.get_type_name()+".");return k.get(0)},set_advanced_settings_showing:function(c,b,a){a||(a=$(b).find(".toontalk-settings-backside-button"));c?($(b).find(".toontalk-advanced-setting").show(),a.html("<"),a.attr("title","Click to hide the advanced settings.")):($(b).find(".toontalk-advanced-setting").hide(),a.html(">"),a.attr("title","Click to show the advanced settings."))},get_widgets:function(){var c=[];
$(this.get_element()).children().each(function(b,a){var k=a.toontalk_widget;k&&0>c.indexOf(k)&&c.push(k)});return c},scale_backside:function(c,b,a,k,f){var d=Math.min(1,b,a);1===b&&1===a?c.css({width:"",height:""}):c.css({transform:"scale("+d+", "+d+")","transform-origin":"top left",width:k*b/d,height:f*a/d})},render:function(){c.DISPLAY_UPDATES.pending_update(this)},rerender:function(){this.visible()&&c.DISPLAY_UPDATES.pending_update(this)},remove_backside_widget:function(c,b,a){return this.get_widget().remove_backside_widget(c,
b,a)},remove:function(){this.get_widget().remove()},is_backside:function(){return!0},get_parent:function(){return this.get_parent_of_backside()},is_of_type:function(c){return this.get_widget().is_of_type(c)},save_dimensions:function(){return!1}}}(window.TOONTALK);window.TOONTALK.frontside=function(c){return{create:function(n){var b=Object.create(this),a=document.createElement("div"),k=$(a),f=function(a){$(a.target).is(".ui-resizable-handle")||"click"===a.type&&1!==a.which||(k.is(".toontalk-top-level-resource")?n.set_running(!n.get_running()):n.get_running()&&!c.robot.in_training?c.debugging&&c.UTILITIES.display_message("Clicks on running widgets are ignored. If you wish to see its backside then stop it and click again."):n.open_backside(),a.stopPropagation())},
d;$(a).addClass("toontalk-frontside toontalk-side");a.toontalk_widget=n;c.UTILITIES.drag_and_drop(a);b.get_element=function(){return a};b.get_widget=function(){return n};b.visible=function(){return d};b.set_visible=function(a){var b;d!==a&&(d=a,b=this.get_widget(),b.walk_children&&b.walk_children(function(b){b.set_visible(a);return!0}))};a.addEventListener("click",f);a.addEventListener("touchstart",f);a.addEventListener("mouseenter",function(a){var b=n.get_backside(),d=(n.is_empty_hole()?wiget.get_parent_of_frontside():
n).get_frontside_element();b&&c.UTILITIES.highlight_element(b.get_element());$(".toontalk-wiggle").removeClass("toontalk-wiggle");$(d).is(".toontalk-top-level-resource")||$(d).addClass("toontalk-wiggle");a.stopPropagation()});a.addEventListener("mouseleave",function(a){a=n.get_backside();var b=n.is_empty_hole()?wiget.get_parent_of_frontside():n;a&&c.UTILITIES.remove_highlight();$(b.get_frontside_element()).removeClass("toontalk-wiggle")});c.debugging&&(a.id=n.debug_id);return b},update_display:function(){return this.get_widget().update_display()},
remove:function(){$(this.get_element()).remove()}}}(window.TOONTALK);(function(c){var n=180/Math.PI,b=Math.log(10),a=bigrat.fromInteger(10),k=bigrat.fromValues(1,2),f=bigrat.fromValues(-1,2),d=bigrat.fromInteger(360),r=bigrat.fromDecimal(2*Math.PI),g=Math.log10?Math.log10:function(a){return Math.log(a)/b},l=function(a){var b=bigrat.fromValues(bigrat.toBigInteger(a),1);a=bigrat.subtract(bigrat.create(),a,b);return{integer_part:b,fractional_part:a}},x=function(a){var b=l(a),e=c.number.ZERO(),d=c.number.ZERO();e.set_value(b.integer_part);d.set_value(b.fractional_part);
return c.box.create(2,!0,[e,d],"The integer and fraction parts of "+a.toString().replace(",","/"))},h=function(a,b){var c=bigrat.divide(bigrat.create(),a,b),d=l(c);return bigrat.multiply(c,d.fractional_part,b)},u=function(a){a=l(a);return bigrat.isLessThan(a.fractional_part,f)?bigrat.subtract(a.integer_part,a.integer_part,bigrat.ONE):bigrat.isLessThan(a.fractional_part,bigrat.ZERO)||bigrat.isLessThan(a.fractional_part,k)?a.integer_part:bigrat.add(a.integer_part,a.integer_part,bigrat.ONE)},v=function(a){a=
l(a);return bigrat.isLessThan(a.fractional_part,bigrat.ZERO)?bigrat.subtract(a.integer_part,a.integer_part,bigrat.ONE):a.integer_part},q=function(a){a=l(a);return bigrat.isLessThan(a.fractional_part,bigrat.ZERO)||bigrat.equals(a.fractional_part,bigrat.ZERO)?a.integer_part:bigrat.add(a.integer_part,a.integer_part,bigrat.ONE)};window.TOONTALK.number=function(){var b=Object.create(c.widget),d=function(a,b,c,e){var d="",f=100;c=50/c;b/=1+b;if(e)for(e=0;f>=c&&e<a.length;)d=d+"<span class='toontalk-digit' style='font-size:"+
f+"%'>"+a[e]+"</span>",e+=1,"-"!==a[e]&&(f*=b);else for(e=a.length-1;f>=c&&0<e;)d="<span class='toontalk-digit' style='font-size:"+f+"%'>"+a[e]+"</span>"+d,--e,"-"!==a[e]&&(f*=b);return d},e=function(a,b){var c=a/(1+a);return Math.ceil(Math.log(.5/b)/Math.log(c))},f=function(a,b,c){if(a.length<=Math.round(b))return'<span class="toontalk-digit" style="font-size:100%">'+a+"</span>";if(1>b)return"";if(5>b)return"<span style='font-size: 80%'>"+f(a,1.25*b,.8*c)+"</span>";b=b/2-1;return d(a,b,c,!0)+d(a,
b,c,!1)},h=function(b,c){bigrat.isNegative(b)&&bigrat.abs(b,b);var e;a:{e=bigrat.fromValues(b[0],1);var d=bigrat.fromValues(b[1],1),f="",h=bigrat.create(),g=bigrat.create(),p=bigrat.create();for(bigrat.multiply(e,e,a);c>f.length;){if(bigrat.isLessThan(e,d))f+="0";else if(bigrat.divide(h,e,d),g=bigrat.toBigInteger(h),f+=g.toString(),bigrat.subtract(p,h,bigrat.fromValues(g,1)),bigrat.multiply(e,p,d),bigrat.equals(e,bigrat.ZERO)){e=f=l(f);break a}bigrat.multiply(e,e,a)}e=f}return e},l=function(a){return 0<
a.length&&"0"===a.charAt(a.length-1)?l(a.substring(0,a.length-1)):a},k=function(a,b){var c=Math.min(b,a/2);return a-(c+1)},q=function(a,b){b||(b=1);if(!("number"!==typeof a&&"string"!==typeof a||"number"!==typeof b&&"string"!==typeof b))return bigrat.fromValues(a,b);var c=bigrat.create();1===b?bigrat.set(c,bigrat.toBigInteger(a.get_value()),BigInteger.ONE):a.get_value&&b.get_value?bigrat.set(c,bigrat.toBigInteger(a.get_value()),bigrat.toBigInteger(b.get_value())):bigrat.set(c,a,b);return c},r=function(a){switch(a){case "+":return"";
case "-":return"&minus;";case "*":return"&times;";case "/":return"&divide;";case "=":return"&equals;";case "^":return"^";default:return c.UTILITIES.report_internal_error("Number has an unsupported operator: "+a),""}};b.create=function(a,e,d,f,h){var g=Object.create(b),p=q(a,e);f||(f="improper_fraction");d||(d="+");g.is_number=function(){return!0};g.set_value=function(a,b){if(b||!bigrat.equals(p,a))return this.fire_value_change_listeners(p,a),p=a,this.rerender(),c.debugging&&(this.debug_string=this.toString()),
this};g.set_value_from_sub_classes=g.set_value;g.fire_value_change_listeners=function(a,b){var c=this.get_listeners("value_changed"),e;c&&(e={type:"value_changed",old_value:a,new_value:b},c.forEach(function(a){a(e)}))};g.get_value=function(){return p};g.set_value_from_decimal=function(a){this.set_value(bigrat.fromDecimal(a))};g.get_format=function(){return f};g.set_format=function(a,b){f=a;b&&this.rerender();return this};g.get_operator=function(){return d};g.set_operator=function(a,b){d=a;b&&this.rerender();
return this};g=b.add_standard_widget_functionality(g);g.set_description(h);c.debugging&&(g.debug_string=g.toString(),g.debug_id=c.UTILITIES.generate_unique_id(),p.debug_id_new=g.debug_id);return g};b.create_from_bigrat=function(a){var b=c.number.ZERO();b.set_value(a);return b};b.create_backside=function(){return c.number_backside.create(this)};b.set_from_values=function(a,b){return this.set_value(q(a,b))};b.set_numerator=function(a){return this.set_value(q(a,this.get_value()[1].toString()))};b.set_denominator=
function(a){return this.set_value(q(this.get_value()[0].toString(),a))};b.ONE=function(){return c.number.create(1)};b.ZERO=function(){return c.number.create(0)};b.copy=function(a){return this.add_to_copy(b.create(this.get_value()[0],this.get_value()[1],this.get_operator(),this.get_format(),this.get_description()),a)};b.equals=function(a){return a.equals_number&&a.equals_number(this)};b.equals_number=function(a){return bigrat.equals(this.get_value(),a.get_value())};b.compare_with=function(a){if(a.compare_with_number)return-1*
a.compare_with_number(this)};b.compare_with_number=function(a){return bigrat.equals(this.get_value(),a.get_value())?0:bigrat.isGreaterThan(this.get_value(),a.get_value())?1:-1};b.update_display=function(){var a,b,e,d,f;a=this.get_frontside(!0).get_element();$(a).is(".toontalk-conditions-contents")?b=$(a):$(a).parent().is(".toontalk-backside, .toontalk-json")?(b=$(a),f=!0):b=$(a).parent().is(".toontalk-scale-half")?$(a):$(a).parent();if($(a).is(".toontalk-carried-by-bird"))e=100,d=40;else if($(a).is(".toontalk-element-attribute"))e=
200,d=32;else{if(!b.is(":visible"))return;e=b.width();d=b.height();if(0===e||0===d)return;b.is(".toontalk-nest")&&(e*=c.nest.CONTENTS_WIDTH_FACTOR,d*=c.nest.CONTENTS_HEIGHT_FACTOR)}$(a).removeClass("toontalk-number-eighth-size-border toontalk-number-quarter-size-border toontalk-number-half-size-border toontalk-number-full-size-border");64>=e||64>=d?($(a).addClass("toontalk-number-eighth-size-border"),a.toontalk_border_size=4):128>=e||128>=d?($(a).addClass("toontalk-number-quarter-size-border"),a.toontalk_border_size=
8):256>=e||256>=d?($(a).addClass("toontalk-number-half-size-border"),a.toontalk_border_size=16):($(a).addClass("toontalk-number-full-size-border"),a.toontalk_border_size=32);b=d-2*a.toontalk_border_size;f=this.to_HTML(e/(.64*b),b,this.get_format(),!0,this.get_operator(),f);c.UTILITIES.on_a_nest_in_a_box(a)&&(e="width:"+e+"px;",b=f.indexOf('style="'),f=0<=b?f.substring(0,b+7)+e+f.substring(b+7):f);e=$(a).children(".toontalk-widget");e.is("*")?e=e.get(0):(e=document.createElement("div"),a.appendChild(e));
e.innerHTML=f;e.translate=!1;$(e).addClass("toontalk-widget notranslate");a.title=this.get_title();(a=this.get_backside())&&a.rerender()};b.to_HTML=function(b,c,l,q,A,u){var n,y,x,v,B,aa,W=!1!==q?" toontalk-top-level-number":"";u&&(W+=" toontalk-number-size-unconstrained-by-container");y=A?r(A):"";b||(b=4);c||(c=16);if(this.get_erased&&this.get_erased())return'<div class="toontalk-number toontalk-integer'+W+'" style="font-size: '+c+'px;"></div>';0<y.length&&(--b,2>b&&(c*=Math.max(1,b)/2,b=2));if(this.is_integer()&&
"scientific_notation"!==l){try{n=bigrat.toBigInteger(this.get_value()).toString()}catch(ja){console.log("Error converting number to a string: "+ja),n="0"}q=n.length;0<y.length&&q++;4>b&&q>b&&(q=Math.min(4,q),c*=b/q,b=q);return'<div class="toontalk-number toontalk-integer'+W+'" style="font-size: '+c+'px;">'+y+f(n,b,c)+"</div>"}n=' style="font-size:'+.4*c+'px;"';if("improper_fraction"===l||!l)return c='<table class="toontalk-number toontalk-improper-fraction'+W+'"'+n+'><tr class="toontalk-numerator"><td align="center" class="toontalk-number">'+
f(this.numerator_string(),2*b,c)+'</td></tr><tr class="toontalk-fraction-line-as-row"><td  class="toontalk-fraction-line-as-table-entry"><div class="toontalk-fraction-line"></div></tr><tr class="toontalk-denominator"><td align="center" class="toontalk-number">'+f(this.denominator_string(),2*b,c)+"</td></tr></table>",""===y?c:"<table class='toontalk-operator-and-fraction'"+n+"><tr><td>"+y+"</td><td>"+c+"</td></tr></table>";if("mixed_number"===l||"proper_fraction"===l){y=this.integer_part();if(y.is_zero())return this.to_HTML(b,
c,"improper_fraction",q,A);q=this.copy({just_value:!0}).subtract(y).absolute_value();return'<table class="toontalk-number toontalk-mixed-number'+W+'"'+n+'><tr><td class="toontalk-number toontalk-integer-part-of-mixed-number">'+y.to_HTML(b/2,c,"",!1,this.get_operator())+'</td><td class="toontalk-number toontalk-fraction-part-of-mixed-number">'+q.to_HTML(b/2,c,"improper_fraction",!1)+"</td></tr></table>"}if("decimal"===l)return 4>b&&(c*=Math.max(1,b)/4,b=4),'<div class="toontalk-number toontalk-decimal'+
W+'" style="font-size: '+c+'px;">'+y+this.decimal_string(b,c)+"</div>";if("scientific_notation"===l){aa=bigrat.isNegative(this.get_value());x=this.get_value();v=bigrat.abs(bigrat.create(),x);x=bigrat.isLessThan(v,bigrat.ONE);v=(x?bigrat.toBigInteger(bigrat.divide(bigrat.create(),bigrat.ONE,v)):bigrat.toBigInteger(v)).toString();x=x?-v.length:v.length-1;v=bigrat.power(bigrat.create(),a,x+1);B=bigrat.divide(bigrat.create(),this.get_value(),v);v=6+(0===x?1:Math.ceil(g(Math.abs(x)))/2);aa&&v++;if(b<v+
1)return this.to_HTML(v+1,c*b/(v+1),l,q,A,u);q=e(k(b,v),c);q=h(B,q);A=aa?"-"+q.substring(0,1):q.substring(0,1);q=q.substring(1);b=d(q,b*(1-v/b),c,!0);0<b.length&&(b="<span class='toontalk-decimal-point'>.</span>"+b);return'<table class="toontalk-number toontalk-scientific_notation'+W+'"'+n+'><tr><td class="toontalk-number toontalk-significand-of-scientific-notation"><div class="toontalk-number toontalk-decimal'+W+'" style="font-size: '+c+'px;">'+y+A+b+'</td><td class="toontalk-number toontalk-exponent-of-scientific-notation"><div style="font-size: '+
c+'px;"> &times;10<sup style="font-size: '+c/2+'px;">'+x+"</sup></div></td></tr></table>"}};b.drop_on=function(a,b,c,e){if(a.number_dropped_on_me)return a.number_dropped_on_me(this,b,c,e),!0;if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,b,c,e);console.log("No handler for drop of '"+this+"' on '"+a+"'")};b.number_dropped_on_me=function(a,b,e,d){var f,h,g,p;return a.visible()&&(e||d&&d.visible())?(d&&(a.robot_waiting_before_next_step=d),f=document.createElement("div"),$(f).addClass("toontalk-bammer-down"),
h=$(this.get_frontside_element()).closest(".toontalk-top-level-backside"),f.style.left="-10px",f.style.top=h.height()+"px",h.append(f),b=this.get_frontside_element(),g=$(b).offset(),g.left-=.75*$(f).width(),g.left+=.5*$(b).width()+.1*$(f).width(),g.top-=.5*$(b).height()+.4*$(f).height(),b=function(){this.number_dropped_on_me_semantics(a,e,d)&&d&&d.run_next_step();e&&this.backup_all();$(f).removeClass("toontalk-bammer-down");c.UTILITIES.set_timeout(function(){var a=h.offset();a||(a={left:0,top:0});
$(f).addClass("toontalk-bammer-away");g.left=a.left+h.width()-100;g.top=a.top+h.height()+100;p=function(){$(f).remove()};c.UTILITIES.animate_to_absolute_position(f,g,p);$(f).css({opacity:.01})})}.bind(this),c.UTILITIES.animate_to_absolute_position(f,g,b),$(f).css({opacity:1,"z-index":c.UTILITIES.next_z_index()+100}),this):this.number_dropped_on_me_semantics(a,e,d)};b.number_dropped_on_me_semantics=function(a,b,e){c.robot.in_training&&b&&c.robot.in_training.dropped_on(a,this);a.remove();switch(a.get_operator()){case "+":return this.add(a);
case "-":return this.subtract(a);case "*":return this.multiply(a);case "/":return this.divide(a);case "=":return this.set_value(a.get_value());case "^":return this.power(a);default:c.UTILITIES.report_internal_error("Number received a number with unsupported operator: "+a.get_operator())}};b.widget_dropped_on_me=function(a,b,c,e){return a.number_dropped_on_me?this.number_dropped_on_me(a,b,c,e):!1};b.add=function(a){this.set_value(bigrat.add(this.get_value(),this.get_value(),a.get_value()),!0);return this};
b.subtract=function(a){this.set_value(bigrat.subtract(this.get_value(),this.get_value(),a.get_value()),!0);return this};b.multiply=function(a){this.set_value(bigrat.multiply(this.get_value(),this.get_value(),a.get_value()),!0);return this};b.divide=function(a){this.set_value(bigrat.divide(this.get_value(),this.get_value(),a.get_value()),!0);return this};b.minimum=function(a){this.set_value(bigrat.min(this.get_value(),this.get_value(),a.get_value()),!0);return this};b.maximum=function(a){this.set_value(bigrat.max(this.get_value(),
this.get_value(),a.get_value()),!0);return this};b.power=function(a){this.set_value(bigrat.power(this.get_value(),this.get_value(),bigrat.toInteger(a.get_value())),!0);return this};b.absolute_value=function(){this.set_value(bigrat.abs(this.get_value(),this.get_value()),!0);return this};b.is_zero=function(){return bigrat.equals(this.get_value(),bigrat.ZERO)};b.is_negative=function(){return bigrat.isNegative(this.get_value())};b.toString=function(){return this.get_erased()?"erased number":("+"===this.get_operator()?
"":this.get_operator())+bigrat.str(this.get_value())};b.to_float=function(){return bigrat.toDecimal(this.get_value())};b.get_type_name=function(a){return a?"numbers":"number"};b.get_help_URL=function(){return"docs/manual/numbers.html"};b.get_json=function(){return{type:"number",operator:this.get_operator(),numerator:this.numerator_string(),denominator:this.denominator_string(),format:this.get_format()}};c.creators_from_json.number=function(a){return b.create(a.numerator,a.denominator,a.operator,a.format,
a.description)};b.is_integer=function(){return 0===this.get_value()[1].compare(BigInteger.ONE)||0===this.get_value()[0].compare(BigInteger.ZERO)};b.numerator=function(){var a=bigrat.create();return bigrat.set(a,this.get_value()[0],BigInteger.ONE)};b.denominator=function(){var a=bigrat.create();return bigrat.set(a,this.get_value()[1],BigInteger.ONE)};b.numerator_string=function(){return this.get_value()[0].toString()};b.denominator_string=function(){return this.get_value()[1].toString()};b.integer_part=
function(){return this.create(this)};b.decimal_string=function(a,c){if(this.is_integer())return this.numerator_string();var g=b.copy.call(this),l=g.integer_part(),q=l.toString();"0"===q&&this.is_negative()&&(q="-"+q);g=g.get_value();bigrat.subtract(g,g,l.get_value());var A=k(a,q.length),r=e(A,c),l=Math.min(q.length,a/2),g=h(g,r),g=g.length<a?g:d(g,A,c,!0);return f(q,l,c)+"<span class='toontalk-decimal-point'>.</span>"+g};b.match=function(a){return this.get_erased&&this.get_erased()?a.match_with_any_number?
a.match_with_any_number():this:a.match_with_this_number?a.match_with_this_number(this):this};b.match_with_any_number=function(){return"matched"};b.match_with_this_number=function(a){return a.equals(this)?"matched":a};b.get_custom_title_prefix=function(){return"Drop another number on me and I'll add it to my value.\nUnless its operation has been changed then I'll subtract, multiply, or divide by it instead."};return b}();window.TOONTALK.number_backside=function(){return{create:function(a){var b=c.backside.create(a),
e=b.get_element(),d=document.createElement("div"),f=a.numerator_string(),h=a.denominator_string(),g=c.UTILITIES.create_text_area(f,"toontalk-numerator-input","","Type here to edit the numerator","number"),l=c.UTILITIES.create_text_area(h,"toontalk-denominator-input","","Type here to edit the denominator","number"),k=c.UTILITIES.create_radio_button("number_format","decimal","toontalk-decimal-radio-button","Decimal number","Display number as a decimal."),q=c.UTILITIES.create_radio_button("number_format",
"proper_fraction","toontalk-proper-fraction-radio-button","Mixed number","Display number as an integer part and a proper fraction."),r=c.UTILITIES.create_radio_button("number_format","improper_fraction","toontalk-improper-fraction-radio-button","Improper fraction","Display number as a simple fraction."),u=c.UTILITIES.create_radio_button("number_format","scientific_notation","toontalk-scientific-notation-radio-button","Scientific notation","Display number as a decimal between 1 and 10 multiplied by ten to some power."),
n=c.UTILITIES.create_radio_button("operator","+","toontalk-plus-radio-button","+","Add me to what I'm dropped on."),x=c.UTILITIES.create_radio_button("operator","-","toontalk-minus-radio-button","&minus;","Subtract me from what I'm dropped on."),v=c.UTILITIES.create_radio_button("operator","*","toontalk-times-radio-button","&times;","Multiply me with what I'm dropped on."),ba=c.UTILITIES.create_radio_button("operator","/","toontalk-divide-radio-button","&divide;","Divide me into what I'm dropped on."),
ca=c.UTILITIES.create_radio_button("operator","=","toontalk-set-equal-radio-button","&equals;","Set what I'm dropped on to my value."),N=function(b){var e=g.button.value.trim(),d=l.button.value.trim(),p=function(a,b,c){if(1>a.length)return{message:"Empty "+b+" treated as 1.",replacement:"1"};if("-"===a.charAt(0)){if(c)return{message:"'-' only allowed as the first character of the "+b+". Ignoring extra '-'s.",replacement:p(a,b).replacement};a=p(a.substring(1,a.length),b,!0);a.message||(a.replacement=
"-"+a.replacement);return a}return/^\d+$/.test(a)?{replacement:a}:{message:"The "+b+" can only contain digits. '"+a+"' doesn't make sense.",replacement:a.replace(/[^\d]*/g,"")}},k;if(e!==f||d!==h)k=p(e,"numerator"),k.message&&(c.UTILITIES.display_message(k.message),e=k.replacement),"0"===d?(c.UTILITIES.display_message("It doesn't make sense for a fraction to have a denominator of 0. Resetting it to 1."),d="1"):(k=p(d,"denominator"),k.message&&(c.UTILITIES.display_message(k.message),d=k.replacement)),
a.set_from_values(e,d)&&(f=e,h=d,c.robot.in_training&&(b=b.srcElement.className.split(" ",1)[0],"toontalk-denominator-input"===b?c.robot.in_training.edited(a,{setter_name:"set_denominator",argument_1:d,toString:"by changing the value of the denominator to "+d,button_selector:"."+b}):c.robot.in_training.edited(a,{setter_name:"set_numerator",argument_1:e,toString:"by changing the value of the numerator to "+e,button_selector:"."+b})),a.rerender())},X=function(){var b=c.UTILITIES.selected_radio_button(k.button,
q.button,r.button,u.button),e=b.value;a.set_format(e,!0);c.robot.in_training&&c.robot.in_training.edited(a,{setter_name:"set_format",argument_1:e,toString:"by changing the format to "+e+" of the number",button_selector:"."+b.className.split(" ",1)[0]});a.rerender()},ma=function(){var b=c.UTILITIES.selected_radio_button(n.button,x.button,v.button,ba.button,ca.button),e=b.value;a.set_operator(e,!0);c.robot.in_training&&c.robot.in_training.edited(a,{setter_name:"set_operator",argument_1:e,toString:"by changing the operator to "+
e+" of the number",button_selector:"."+b.className.split(" ",1)[0]})},aa=c.UTILITIES.create_horizontal_table(g.container,d,l.container),W=$(c.UTILITIES.create_horizontal_table(k.container,q.container,r.container,u.container)).buttonset().get(0),ja=$(c.UTILITIES.create_horizontal_table(n.container,x.container,v.container,ba.container,ca.container)).buttonset().get(0),oa=c.backside.create_advanced_settings_button(b,a),Z=b.update_display;d.innerHTML="/";$(d).addClass("ui-widget");e.appendChild(aa);e.appendChild(oa);
g.button.addEventListener("change",N);g.button.addEventListener("mouseout",N);g.button.addEventListener("mouseenter",function(){f=g.button.value.trim()});l.button.addEventListener("change",N);l.button.addEventListener("mouseout",N);l.button.addEventListener("mouseenter",function(){h=l.button.value.trim()});k.button.addEventListener("change",X);q.button.addEventListener("change",X);r.button.addEventListener("change",X);u.button.addEventListener("change",X);switch(a.get_format()){case "decimal":c.UTILITIES.check_radio_button(k);
break;case "improper_fraction":c.UTILITIES.check_radio_button(r);break;case "mixed_number":case "proper_fraction":c.UTILITIES.check_radio_button(q);break;case "scientific_format":c.UTILITIES.check_radio_button(u)}switch(a.get_operator()){case "+":c.UTILITIES.check_radio_button(n);break;case "-":c.UTILITIES.check_radio_button(x);break;case "*":c.UTILITIES.check_radio_button(v);break;case "/":c.UTILITIES.check_radio_button(ba);break;case "=":c.UTILITIES.check_radio_button(ca)}n.button.addEventListener("change",
ma);x.button.addEventListener("change",ma);v.button.addEventListener("change",ma);ba.button.addEventListener("change",ma);ca.button.addEventListener("change",ma);b.update_display=function(){$(g.button).val(a.numerator_string());$(l.button).val(a.denominator_string());Z()};$(W).addClass("toontalk-advanced-setting");$(ja).addClass("toontalk-advanced-setting");e.appendChild(W);e.appendChild(ja);b.add_advanced_settings();return b}}}();window.TOONTALK.number.function=function(){var a=function(a,b,e,d){var f,
h;if(a.is_box())if(f=a.get_size(),1>f)c.UTILITIES.display_message("Function birds can only respond to boxes with holes.");else if(h=a.get_hole_contents(0)){if(h.is_bird()){if(b=b(h,f))d&&d.add_newly_created_widget_if_new(b),c.robot.in_training&&e&&c.robot.in_training.add_newly_created_widget_if_new(b),h.widget_dropped_on_me(b,!1,void 0,d,!0);a.remove();return b}c.UTILITIES.display_message("Function birds can only respond to boxes with a bird in the first hole. The first hole contains "+c.UTILITIES.add_a_or_an(h.get_type_name()+
"."))}else c.UTILITIES.display_message("Function birds can only respond to boxes with something in the first hole.");else c.UTILITIES.display_message("Function birds can only respond to boxes. One was given "+c.UTILITIES.add_a_or_an(a.get_type_name()))},b=function(a,b,e){if(!a)return c.UTILITIES.display_message("Birds for the "+b+" function can only respond to boxes with a number in the "+c.UTILITIES.ordinal(e)+" hole. The "+c.UTILITIES.ordinal(e)+" hole is empty."),!1;if(a.is_number())return!0;c.UTILITIES.display_message("Birds for the "+
b+" function can only respond to boxes with a number in the "+c.UTILITIES.ordinal(e)+" hole. The "+c.UTILITIES.ordinal(e)+"hole contains "+c.UTILITIES.add_a_or_an(a.get_type_name()+"."));return!1},e=function(c,e,d,f,h,g){return a(c,function(a,h){var g,p,l;if(1===h)return e();p=1;l=c.get_hole_contents(p);if(b(l,f,p)){for(p++;p<h;){g=c.get_hole_contents(p);if(!b(g,f,p))return;d.call(l,g);p++}return l}},h,g)},f=function(e,d,f,h,g,p){return a(e,function(a,g){var p,l,k;if(g<f+1)c.UTILITIES.display_message("Birds for the "+
h+" function can only respond to boxes with at least "+(f+1)+" holes. Not "+g+" holes.");else{k=[];for(l=1;l<g;){p=e.get_hole_contents(l);if(!b(p,h,l))return;k.push(p.get_value());l++}return d.apply(null,k)}},g,p)},g=function(a,b){for(var c=a.length,e=0,d=[];e<c;)d.push(b(a[e])),e++;return d},l=function(a,b){return function(){var e=c.number.ZERO();e.set_value_from_decimal(a.apply(null,g(arguments,b||bigrat.toDecimal)));return e}},k=function(a){return bigrat.toDecimal(h(a,d))},y=function(a){return bigrat.toDecimal(h(a,
r))},M=function(a){return function(){return c.number.create_from_bigrat(a.apply(null,arguments))}},J=function(){return"If you give me a box with another bird and some numbers then "+c.UTILITIES.lower_case_first_letter(this.title)+"\nOn my back side you can change me to compute other functions."},P=function(){return c.UTILITIES.add_a_or_an("'"+this.name+"' function bird")},S={},E=function(a,b,c){S[a]={name:a,respond_to_message:b,get_description:J,toString:P,title:c}};E("sum",function(a,b,d){return e(a,
c.number.ZERO,c.number.add,"sum",b,d)},"The bird will return with the sum of the numbers in the box.");E("difference",function(a,b,d){return e(a,c.number.ZERO,c.number.subtract,"difference",b,d)},"The bird will return with the result of subtracting the numbers in the box from the first number.");E("product",function(a,b,d){return e(a,c.number.ONE,c.number.multiply,"product",b,d)},"The bird will return with the product of the numbers in the box.");E("division",function(a,b,d){return e(a,c.number.ONE,
c.number.divide,"division",b,d)},"The bird will return with the result of dividing the numbers into the first number in the box.");E("modulo",function(a,b,c){return f(a,M(h),2,"modulo",b,c)},"The bird will return with the first number modulo the second number. For positive numbers this is like the remainder after division.");E("minimum",function(a,b,d){return e(a,c.number.ONE,c.number.minimum,"minimum",b,d)},"The bird will return with the smallest of the numbers in the box.");E("maximum",function(a,
b,d){return e(a,c.number.ONE,c.number.maximum,"maximum",b,d)},"The bird will return with the largest of the numbers in the box.");E("absolute value",function(a,b,e){return f(a,function(a){var b=c.number.ZERO();bigrat.abs(b.get_value(),a);return b},1,"absolute value",b,e)},"The bird will return with the positive version of the number.");E("power",function(a,b,c){return f(a,M(function(a,b){var c=bigrat.power(bigrat.create(),a,b[0].valueOf()),e=b[1].valueOf();return 1===e?c:bigrat.nthRoot(c,c,e)}),2,
"power",b,c)},"The bird will return with the first number to the power of the second number.");E("logarithm",function(a,b,c){return f(a,l(function(){return 1===arguments.length?Math.log(arguments[0]):Math.log(arguments[0])/Math.log(arguments[1])}),1,"logarithm",b,c)},"The bird will return an approximation of the logarithm number of the first number.\nIf a second number is provided then it is used as the base of the logarithm.\nIf there is no second number the logarithm is natural (the base is e).");
E("random",function(a,b,c){return f(a,l(function(){return 0===arguments.length?Math.random():1===arguments.length?Math.random()*arguments[0]:arguments[0]+Math.random()*arguments[1]}),0,"random",b,c)},"The bird will return a random number between the first and second numbers.\nIf the second number isn't provided a number less than the first number is returned.\nIf no numbers are given then the bird returns with a number between 0 and 1.");E("round",function(a,b,c){return f(a,M(u),1,"round",b,c)},"The bird will return the number rounded to the nearest integer.");
E("floor",function(a,b,c){return f(a,M(v),1,"floor",b,c)},"The bird will return the largest integer less than or equal to the number.");E("ceiling",function(a,b,c){return f(a,M(q),1,"ceiling",b,c)},"The bird will return the smallest integer greater than or equal to the number.");E("integer and fraction parts",function(a,b,c){return f(a,x,1,"integer and fraction parts",b,c)},"The bird will return with a box containing the integer part and the fraction.");E("sine",function(a,b,c){return f(a,l(function(a){return Math.sin(a/
n)},k),1,"sine",b,c)},"The bird will return with an approximation of the sine of the number (in degrees).");E("cosine",function(a,b,c){return f(a,l(function(a){return Math.cos(a/n)},k),1,"cosine",b,c)},"The bird will return with an approximation of the cosine of the number (in degrees).");E("arc tangent",function(a,b,c){return f(a,l(function(a){return n*Math.atan(a)}),1,"arc tangent",b,c)},"The bird will return with an approximation of the arc tangent (in degrees) of the number.");E("arc tangent of y and x",
function(a,b,c){return f(a,l(function(a,b){return n*Math.atan2(a,b)}),2,"arc tangent of y and x",b,c)},"The bird will return with an approximation of the arc tangent (in degrees) of the point where the first number is the y coordinate and the second one is the x.");E("sine (in radians)",function(a,b,c){return f(a,l(Math.sin,y),1,"sine (in radians)",b,c)},"The bird will return with an approximation of the sine of the number (in radians).");E("cosine (in radians)",function(a,b,c){return f(a,l(Math.cos,
y),1,"cosine (in radians)",b,c)},"The bird will return with an approximation of the cosine of the number (in radians).");E("arc tangent (in radians)",function(a,b,c){return f(a,l(Math.atan),1,"arc tangent (in radians)",b,c)},"The bird will return with an approximation of the arc tangent (in radians) of the number.");E("arc tangent of y and x (in radians)",function(a,b,c){return f(a,l(Math.atan2),2,"arc tangent of y and x (in radians)",b,c)},"The bird will return with an approximation of the arc tangent (in radians) of the point where the first number is the y coordinate and the second one is the x.");
return S}()})(window.TOONTALK);window.TOONTALK.box=function(c){var n=Object.create(c.widget);n.create=function(b,a,k,f){var d=Object.create(n),r=[],g;"undefined"===typeof a&&(a=!0);d.is_box=function(){return!0};d.get_horizontal=function(){return a};d.set_horizontal=function(b,c){a=b;c&&($(this.get_frontside_element()).children(".toontalk-side").remove(),this.rerender());return this};d.get_hole=function(a){return r[a]};d.get_hole_contents=function(a){return r[a].get_contents()};d.set_hole=function(a,b,d){r[a].set_contents(b);d&&
(b&&b.save_dimensions(),this.update_hole_display(a,b));this.rerender();c.debugging&&(this.debug_string=this.toString())};d.get_holes=function(){return r};d.temporarily_remove_contents=function(a,b){var c=this.get_index_of(a);this.temporarily_removed_contents||(this.temporarily_removed_contents=[]);this.temporarily_removed_contents[c]=a;this.set_hole(c,void 0,b);return function(){this.set_hole(c,a,b);this.temporarily_removed_contents[c]=void 0}.bind(this)};d.get_contents_temporarily_removed=function(a){if(this.temporarily_removed_contents)return this.temporarily_removed_contents[a]};
d.set_contents=function(a){a.forEach(function(a,b){r[b].set_contents(a)})};d.get_size=function(){return b};d.set_size=function(a,f){var h,g;if(b===a||0>a||isNaN(a))return!1;g=this.visible();r.length=a;if(a>b)for(h=b;h<a;h++)r[h]=c.box_hole.create(h),r[h].set_parent_of_frontside(d),r[h].set_visible(g);b=a;f&&this.rerender();c.debugging&&(this.debug_string=this.toString());return!0};d.copy=function(c){var d;c||(c={});d=r.map(function(a){if(a=a.get_contents())return a.copy(c)});d=n.create(b,a,d,this.get_description());
return this.add_to_copy(d,c)};d=d.add_standard_widget_functionality(d);for(g=0;g<b;g++)r[g]=c.box_hole.create(g),r[g].set_parent_of_frontside(d);d.set_description(f);d.set_contents(k);c.debugging&&(d.debug_string=d.toString(),d.debug_id=c.UTILITIES.generate_unique_id());return d};n.create_backside=function(){return c.box_backside.create(this)};n.equals=function(b){return b.equals_box&&this.get_type_name()===b.get_type_name()&&b.equals_box(this)};n.equals_box=function(b){var a=this.get_size(),c,f,
d;if(a!==b.get_size())return!1;for(c=0;c<a;c++)if(f=this.get_hole_contents(c),d=b.get_hole_contents(c),!f&&d||f&&!d||f&&d&&(!f.equals||!f.equals(d)))return!1;return!0};n.compare_with=function(b){if(b.compare_with_box)return-1*b.compare_with_box(this)};n.compare_with_box=function(b){var a=this.get_size(),c=b.get_size(),f,d;if(a>c)return 1;if(a<c)return-1;for(c=0;c<a;c++){f=this.get_hole_contents(c);d=b.get_hole_contents(c);if(f&&!d)return 1;if(!f&&d)return-1;if(f&&d)if(f.compare_with){if(f=f.compare_with(d),
1===f||-1===f)return f}else return}return 0};n.match=function(b){return this.get_erased&&this.get_erased()?b.match_with_any_box?b.match_with_any_box():this:b.match_with_this_box?b.match_with_this_box(this):this};n.match_with_any_box=function(){return"matched"};n.match_with_this_box=function(b){var a=this.get_size(),k=[],f,d,r;if(a!==b.get_size())return b;for(f=0;f<a;f++)if(r=b.get_hole_contents(f))if(d=this.get_hole_contents(f)){d=c.UTILITIES.match(r,d);if(d.is_widget)return d;"matched"!==d&&(k=0===
k.length?d:k.concat(d))}else if(d=this.get_contents_temporarily_removed(f))k.push(d);else return b;return 0<k.length?k:"matched"};n.toString=function(b){var a="",c=this.get_size(),f,d,r=this.get_type_name()+" that looks like ";for(f=0;f<c;f++)d=this.get_hole(f),a+=d.get_full_description(b),f<c-1&&(a+=" | ");return r+"["+a.replace(r,"")+"]"};n.get_type_name=function(b){return b?"boxes":"box"};n.get_help_URL=function(){return"docs/manual/boxes.html"};n.get_json=function(b){var a=[],k=this.get_size(),
f;for(f=0;f<k;f++)this.get_hole_contents(f)?a[f]=c.UTILITIES.get_json(this.get_hole_contents(f),b):a[f]=null;return{type:"box",size:k,contents:a,horizontal:this.get_horizontal()}};n.walk_children=function(b){var a=this.get_size(),c;for(c=0;c<a&&b(this.get_hole(c));c++);};c.creators_from_json.box=function(b,a){return n.create(b.size,b.horizontal,c.UTILITIES.create_array_from_json(b.contents,a),b.description)};n.update_display=function(){var b=this.get_frontside(!0).get_element(),a=this.get_size(),
k=function(b,d,g){var e=d.get_frontside_element(!0),p=$(b).parents(".toontalk-box-hole"),k=function(){$(b).parents(".toontalk-box-hole").children(".toontalk-nest").is("*")&&(y/=c.nest.CONTENTS_WIDTH_FACTOR,x/=c.nest.CONTENTS_HEIGHT_FACTOR)},r,n,y,x;f?(n=0,0<p.length?(y=l-2*v/a,x=h-2*v):(y=l,x=h),k(),r=y*g,1<g&&(r+=v*(g-1))):(r=0,0<p.length?(y=l-2*v,x=h-2*v/a):(y=l,x=h),k(),n=x*g,1<g&&(n+=v*(g-1)));b!==e&&($(e).css({left:0,top:0,width:"",height:""}),d.is_element()&&(p=d.get_contents(),p.set_size_attributes(y,
x,!0)),b.appendChild(e),d.get_contents().update_display());$(b).css({left:r,top:n,width:y,height:x});c.UTILITIES.has_animating_image(e)||(0<g&&($(b).removeClass("toontalk-box-eighth-size-border-left toontalk-box-quarter-size-border-left toontalk-box-half-size-border-left toontalk-box-full-size-border-left"),$(b).removeClass("toontalk-box-eighth-size-border-top toontalk-box-quarter-size-border-top toontalk-box-half-size-border-top toontalk-box-full-size-border-top"),f?$(b).addClass(u+"-left"):$(b).addClass(u+
"-top")),b.toontalk_border_size=v)},f=this.get_horizontal();$(b).is(".toontalk-box");var d=function(){var c=$(b).children(".toontalk-box-hole");c.length===a?c.each(function(a,b){var c=this.get_hole(a);c&&k(b,c,a)}.bind(this)):(c.remove(),this.get_holes().forEach(function(a,c){r=a.get_element();$(r).addClass("toontalk-hole-number-"+c);k(r,a,c);b.appendChild(r)}))}.bind(this),r,g,l,n,h,u,v;$(b).addClass("toontalk-box");$(b).removeClass("toontalk-box-eighth-size-border toontalk-box-quarter-size-border toontalk-box-half-size-border toontalk-box-full-size-border");
b.title=this.get_title();c.debugging&&(this.debug_string=this.toString());this.get_erased()?($(b).addClass("toontalk-box-erased"),$(b).children(".toontalk-side").remove()):($(b).removeClass("toontalk-box-erased"),g=$(b).width(),n=$(b).height(),f?(l=g/a,h=n):(l=g,h=n/a),32>=l||32>=h?(u="toontalk-box-eighth-size-border",v=4):64>=l||64>=h?(u="toontalk-box-quarter-size-border",v=8):128>=l||128>=h?(u="toontalk-box-half-size-border",v=16):(u="toontalk-box-full-size-border",v=32),f?l-=(a-1)*v/a:h-=(a-1)*
v/a,$(b).addClass(u),b.toontalk_border_size=v,c.UTILITIES.set_timeout(d))};n.update_hole_display=function(b,a){var c=this.get_frontside_element(),c=$(c).children(".toontalk-hole-number-"+b),f;c.empty();a&&(f=a.get_frontside_element(!0),c.append(f),$(f).css({left:0,top:0}),a.rerender())};n.drop_on=function(b,a,c,f){if(b.box_dropped_on_me)return a=b.box_dropped_on_me(this,c,f),c&&b.rerender(),a&&this.remove(),a;if(b.widget_dropped_on_me)return b.widget_dropped_on_me(this,a,c,f);console.log("No handler for drop of "+
this+" on "+b)};n.box_dropped_on_me=function(b,a){console.log("box on box not yet implemented");return!1};n.widget_dropped_on_me=function(b,a,k,f){var d=this.which_hole(k),r;if(0<=d)return r=this.get_hole(d),(d=r.get_contents())?b.drop_on(d,a,k,f):r.widget_dropped_on_me(b,a,k,f);c.UTILITIES.report_internal_error(b+" dropped on "+this+" but no event was provided.")};n.get_index_of=function(b){return b.get_parent_of_frontside().get_index()};n.removed_from_container=function(b,a,k,f,d){a=!!k;"undefined"===
typeof f&&(f=this.get_index_of(b));0<=f?(this.set_hole(f,void 0,a),a&&(this.rerender(),b.restore_dimensions())):d&&c.UTILITIES.report_internal_error("Attempted to remove "+b+" from "+this+" but not found.")};n.get_path_to=function(b,a){var k=this.get_size(),f,d;if("empty hole"===b.get_type_name()){k=b.get_parent_of_frontside();d=c.box.path.create(b.get_index());if(k===this)return d;k=this.get_path_to(k);if(!k)return;k.next=d;return k}for(f=0;f<k;f++)if(d=this.get_hole_contents(f)||this.get_contents_temporarily_removed(f)){if(b===
d||d.top_contents_is&&d.top_contents_is(b))return c.box.path.create(f);if(d.get_path_to&&(d=d.get_path_to(b,a)))return k=c.box.path.create(f),k.next=d,k}};n.element_to_highlight=function(b){b=this.which_hole(b,!0);var a;if(0>b)return this.get_frontside_element();b=this.get_hole(b);return(a=b.get_contents())?a.get_frontside_element():b.get_frontside_element()};n.which_hole=function(b){var a=this.get_horizontal(),c=this.get_frontside_element(),f=this.get_size(),d;if(0!==f&&(d=$(c).offset(),c=a?$(c).width()/
f:$(c).height()/f,d=a?d.left:d.top,b))for(b=0;b<f;b++)if(d+=c,(a?event.pageX<=d:event.pageY<=d)||b+1===f)return b};n.dereference=function(b,a,k){var f,d;if(b){f=b.get_index&&b.get_index();if(!c.debugging||"number"===typeof f){if(d=this.get_hole_contents(f)){if(d.dereference_contents&&!b.not_to_be_dereferenced)return d.dereference_contents(b,a,k);if(b.next){if(d.dereference)return d.dereference(b.next,a,k);c.UTILITIES.report_internal_error("Expected to refer to a part of "+d+" but it lacks a method to obtain "+
c.path.toString(b.next))}b.removing_widget&&("empty hole"===d.get_type_name()?c.UTILITIES.report_internal_error("Robot is trying to remove something from an empty hole. "):d.get_infinite_stack()||k.remove_from_container(d,this));return d}return this.get_hole(f)}c.UTILITIES.report_internal_error(this+" unable to dereference the path: "+c.path.toString(b))}else return this};n.path={create:function(b){return{get_index:function(){return b},toString:function(){return"scale"===this.true_type?0===b?"the left pan ":
"the right pan ":"the "+c.UTILITIES.ordinal(b)+" hole "},get_json:function(a){return{type:"box_path",index:b,true_type:this.true_type,next:this.next&&this.next.get_json(a)}}}}};n.get_custom_title_prefix=function(){return"Drop things in my holes to keep them together."};c.creators_from_json.box_path=function(b,a){var k=n.path.create(b.index);b.next&&(k.next=c.UTILITIES.create_from_json(b.next,a));b.true_type&&(k.true_type=b.true_type);return k};return n}(window.TOONTALK);
window.TOONTALK.box_backside=function(c){return{create:function(n){var b=c.backside.create(n),a=c.UTILITIES.create_text_input(n.get_size().toString(),"toontalk-box-size-input","Number of holes","Type here to edit the number of holes.",void 0,"number"),k=c.UTILITIES.create_radio_button("box_orientation","horizontal","toontalk-horizontal-radio-button","Left to right","Show box horizontally."),f=c.UTILITIES.create_radio_button("box_orientation","vertical","toontalk-vertical-radio-button","Top to bottom",
"Show box vertically."),d=function(){var b=parseInt(a.button.value.trim(),10);n.set_size(b,!0)&&c.robot.in_training&&c.robot.in_training.edited(n,{setter_name:"set_size",argument_1:b,toString:"by changing the number of holes to "+b+" of the box",button_selector:".toontalk-box-size-input"})},r=function(){var a=c.UTILITIES.selected_radio_button(k.button,f.button),b=a.value,d="horizontal"===b;n.set_horizontal(d,!0);c.robot.in_training&&c.robot.in_training.edited(n,{setter_name:"set_horizontal",argument_1:d,
toString:"by changing the orientation to "+b+" of the box",button_selector:"."+a.className.split(" ",1)[0]})},g=b.get_element(),l=c.backside.create_advanced_settings_button(b,n),x=b.update_display;a.button.addEventListener("change",d);a.button.addEventListener("mouseout",d);k.button.addEventListener("change",r);f.button.addEventListener("change",r);b.update_display=function(){a.button.value=n.get_size().toString();n.get_horizontal()?c.UTILITIES.check_radio_button(k):c.UTILITIES.check_radio_button(f);
x()};g.appendChild(a.container);g.appendChild($(c.UTILITIES.create_horizontal_table(k.container,f.container)).buttonset().get(0));g.appendChild(l);b.add_advanced_settings();b.render();return b}}}(window.TOONTALK);
window.TOONTALK.box_hole=function(c){return{create:function(n){var b=Object.create(this),a,k,f;b.is_empty_hole=function(){return!a};b.get_element=function(){f||(f=document.createElement("div"),f.className="toontalk-box-hole toontalk-frontside toontalk-side",f.toontalk_widget=b);return f};b.get_frontside=function(b){return a?a.get_frontside(b):this.get_element()};b.get_side_element=function(){return this.get_element()};b.get_frontside_element=function(b){return a?a.get_frontside_element(b):this.get_element()};
b.get_frontside=function(){return this};b.widget_dropped_on_me=function(a,b,f,l){b=this.get_parent_of_frontside();var k;c.robot.in_training&&f&&c.robot.in_training.dropped_on(a,this);f&&a.save_dimensions&&a.set_size_attributes&&(k=$(this.get_element()),a.set_size_attributes(k.width(),k.height()));this.set_contents(a);a.dropped_on_other&&a.dropped_on_other(this,!1,f,l);b.render();return!0};b.get_json=function(){return null};b.add_to_json=function(a){return a};b.copy=function(a){return c.box_hole.create(n)};
b.match=function(){return"matched"};b.get_type_name=function(b){return a?a.get_type_name(b):b?"empty holes":"empty hole"};b.is_of_type=function(b){return a?a.is_of_type(b):"empty hole"===b};b.get_index=function(){return n};b.get_contents=function(){return a};b.set_contents=function(d){var f=this.get_listeners("value_changed");f&&(a!==d&&f.forEach(function(b){b({type:"value_changed",old_value:a,new_value:d})}),a&&f.forEach(function(b){a.remove_listener("value_changed",b,!0)}),d&&f.forEach(function(a){d.add_listener("value_changed",
a)}));a&&a.set_parent_of_frontside(void 0);(a=d)?(a.set_parent_of_frontside(this),c.debugging&&(b.debug_string="A hole containing "+a),a.set_visible(k)):c.debugging&&(b.debug_string="An empty hole")};b.visible=function(){return this.get_parent_of_frontside().visible()};b.set_visible=function(b){k=b;a&&a.set_visible(b)};b.remove=function(){a&&a.remove()};b.render=function(){if(a)return a.render()};b.rerender=function(){if(a)return a.rerender()};b.set_running=function(b){a&&a.set_running(b)};b.removed_from_container=
function(b,f,g,l,k){a?(g&&a.restore_dimensions(),this.set_contents(void 0),g&&this.get_parent_of_frontside().render()):k&&c.UTILITIES.report_internal_error("Holes can't be removed from containers.")};b.temporarily_remove_contents=function(b,c){if(a)return this.get_parent_of_frontside().temporarily_remove_contents(b,c)};b.toString=function(){return a?a.toString():"_"};b.get_description=function(){return a?a.get_description():"_"};b.get_full_description=function(b){return a?a.get_full_description(b):
"_"};b.is_backside=function(){return!1};b.get_widget=function(){return this.get_parent_of_frontside()};b.is_number=function(){return a?a.is_number():!1};b.is_box=function(){return a?a.is_box():!1};b.is_scale=function(){return a?a.is_scale():!1};b.is_bird=function(){return a?a.is_bird():!1};b.is_nest=function(){return a?a.is_nest():!1};b.is_robot=function(){return a?a.is_robot():!1};b.is_element=function(){return a?a.is_element():!1};c.debugging&&(b.debug_string="An empty hole");c.widget.has_parent(b);
c.widget.has_listeners(b);return b}}}(window.TOONTALK);(function(){var c,n,b,a,k,f;window.TOONTALK.bird=function(a){var b=Object.create(a.widget),g=function(b,c,f){b.get_function_type();b=b.get_function_object();var g=Object.keys(TOONTALK.number.function),k=g.map(function(a){return TOONTALK.number.function[a].title}),g=a.UTILITIES.create_select_menu("functions",g,"toontalk-select-function","Which function should I fly to? ","Click to select the function that this bird will use when given a box.",k);c=c.get_element();b&&(g.menu.value=b.name);g.menu.addEventListener("change",
function(a){f.set_function_name(a.target.value)});c.insertBefore(g.container,c.firstChild)};b.create=function(l,k){var h=Object.create(b),u=[],v=[];c=function(a){l=a};h.is_bird=function(){return!0};h.widget_dropped_on_me=function(b,c,f,e,h){var g=c?b.get_backside():b,k,r;if(l){if(l.has_ancestor(b))return a.UTILITIES.display_message("Bird can't take its nest to its nest!"),!1;l.visible()||this.visible()||l.any_nest_copies_visible()?(b.save_dimensions(),k=this.get_frontside_element(),setTimeout(function(){$(k).removeClass("toontalk-bird-gimme")}),
b.set_visible(!0),e&&!h&&(b.robot_waiting_before_next_step=e,b.remove_from_parent_of_frontside(),e.run_next_step&&(r=function(){g.robot_waiting_before_next_step=void 0;e.run_next_step()})),l.animate_bird_delivery(g,this,r,f,e)):(l.add_to_contents(g,f,e),e&&e===g.robot_waiting_before_next_step&&(g.robot_waiting_before_next_step=void 0,e.run_next_step()))}else console.log("TODO: handle drop on a nestless bird -- just removes other?");a.robot.in_training&&f&&a.robot.in_training.dropped_on(b,this);return!0};
h.animate_delivery_to=function(b,c,f,e,h,g,k,r){var n=!!f,x=this.get_parent_of_frontside(),J=this.get_frontside_element(),P=$(J).width(),S=this.closest_visible_ancestor_or_frontside(),E=$(S.get_frontside_element()).offset(),Q=function(){var b=$(ma).offset(),c;n?this.remove():this.visible()&&(c=function(){$(J).removeClass("toontalk-bird-morph-to-static");$(J).addClass("toontalk-bird-static");x&&x.get_widget().rerender()},J.style.position=aa,b&&(E.left-=b.left,E.top-=b.top),$(J).css(E),ma&&ma.appendChild(J),
x&&(x.get_widget().is_top_level()?this.rerender():x.get_widget().rerender()),ja&&(sa.remove_backside_widget(this,!1,!0),ja(),u&&(b=u,u=[],v=[],b.forEach(function(a){a()}))),a.UTILITIES.add_animation_class(J,"toontalk-bird-morph-to-static"),a.UTILITIES.add_one_shot_event_handler(J,"animationend",1E3,c));g&&g()}.bind(this),ga=function(){ca();f.add_to_contents(b,k,r,this,!0);a.UTILITIES.set_timeout(function(){this.fly_to(E,Q)}.bind(this))}.bind(this),ba=function(b,c){this.element_to_display_when_flying=
b;c&&(this.update_display(),setTimeout(function(){c.update_display()}));b.width_before_carry=b.clientWidth;b.height_before_carry=b.clientHeight;a.UTILITIES.set_timeout(function(){$(this.element_to_display_when_flying).addClass("toontalk-carried-by-bird").css({left:"",top:"",width:"",height:"",position:""});this.update_display()}.bind(this))}.bind(this),ca=function(b){if(this.element_to_display_when_flying){var c=this.element_to_display_when_flying.width_before_carry,e=this.element_to_display_when_flying.height_before_carry;
$(this.element_to_display_when_flying).removeClass("toontalk-carried-by-bird");b?($(this.element_to_display_when_flying).css({width:c,height:e}),$(J).closest(".toontalk-top-level-backside").append(this.element_to_display_when_flying),a.UTILITIES.set_absolute_position($(this.element_to_display_when_flying),b)):$(this.element_to_display_when_flying).remove();this.element_to_display_when_flying=void 0;this.update_display()}}.bind(this),N,X,ma,aa,W,ja,oa,Z,ra,sa;f||(f=l);ra=b.get_element();ba(ra,b);c.is_function_nest()||
(X=c.get_widget().closest_visible_ancestor_or_frontside().get_widget().get_frontside_element());if(!c.visible()&&!this.visible()||!c.is_function_nest()&&!$(X).is(":visible"))f.add_to_contents(b,k,r,this,!0);else if(c.is_function_nest()||(X=c.get_widget().closest_visible_ancestor_or_frontside().get_widget().get_frontside_element(),N=$(X).offset(),W=$(f.get_frontside_element()).closest(".toontalk-top-level-backside")),W&&W.is("*")||(W=$(this.get_frontside_element()).closest(".toontalk-top-level-backside")),
(c=W.offset())||(c={left:0,top:0}),e?E={left:e+c.left,top:h+c.top}:0===E.left&&0===E.top&&(E={left:-2*P,top:c.top+W.height()/2}),N||(N={left:-2*P,top:c.top+W.height()/2}),ma=J.parentElement,P=$(J).width(),S=$(J).height(),aa=J.style.position,J.style.position="absolute",sa=this.top_level_widget(),x&&x.get_widget().temporarily_remove_contents&&(ja=x.get_widget().temporarily_remove_contents(this,!0))&&sa.add_to_top_level_backside(this),W.append(J),$(J).css({left:e||E.left-c.left,top:h||E.top-c.top,width:P,
height:S}),(oa=f.get_contents_frontside_element&&f.get_contents_frontside_element())&&f.visible()&&(!r||r.visible())){e=$(X).width();h=$(X).height();Z=$(X).offset();c.max_left=c.left+W.width();c.max_top=c.top+W.height();N.left+=e;N.top+=h;var wa={left:Math.min(Z.left+e,c.max_left-e),top:Math.min(Z.top+h,c.max_top-h)},xa={left:Math.max(Z.left-e,c.left),top:Math.max(Z.top-h,c.top)};N=function(){var a=function(){f.set_locked(!0);this.fly_to(Z,ta,300)}.bind(this);ca(wa);f.get_locked()?f.run_when_unlocked(a):
a()}.bind(this);var ta=function(){ba(oa);this.fly_to(xa,ya,300)}.bind(this),ya=function(){ca(xa);this.fly_to(wa,T,300)}.bind(this),T=function(){ba(ra,b);this.fly_to(Z,O,300)}.bind(this),O=function(){ca(Z);this.fly_to(xa,m,300)}.bind(this),m=function(){ba(oa);this.fly_to(Z,cb,300)}.bind(this),cb=function(){f.set_locked(!1);ca();f.update_display();ga()}.bind(this);this.fly_to(wa,N,300)}else this.fly_to(N,ga,300)};h.get_json=function(b){return{type:"bird",nest:l&&a.UTILITIES.get_json(l,b)}};h.copy=function(a){var b,
c;if(a)if(a.just_value)b=this.create(void 0,this.get_description());else{if(a.nests_copied&&a.nests_copied[l]){b=a.nests_copied[l][0];f.call(b);for(c=1;c<a.nests_copied[l].length;c++)n.call(a.nests_copied[l][c],b);b=this.create(b,this.get_description())}else b=this.create(l,this.get_description());a.birds_copied||(a.birds_copied={});a.birds_copied[l]||(a.birds_copied[l]=[]);a.birds_copied[l].push(b)}else b=l&&l.is_function_nest()?this.create(l.copy(),this.get_description()):this.create(l,this.get_description());
return this.add_to_copy(b,a)};h.run_when_non_empty=function(a,b){0>v.indexOf(b)&&(u.push(a),v.push(b))};h.create_backside=function(){var b=a.bird_backside.create(this);l&&l.is_function_nest()&&g(l,b,this);return b};h.get_help_URL=function(){return l&&l.is_function_nest()?"docs/manual/function-birds.html":"docs/manual/birds-nests.html"};h.is_function_bird=function(){return l&&l.is_function_nest()};h.get_custom_title_prefix=function(){var a;return l?l.is_function_nest()&&(a=l.get_function_object())?
a.get_description():"Drop something on me and I'll take it to my nest.":"This bird no longer knows where her nest is. She'll get rid of anything you give her."};h.toString=function(a){return l?l.is_function_nest()?l.get_function_object().toString():"a bird":a&&"conditions"===a.role?"any bird":"a bird without a nest"};h.set_function_name=function(b){l&&l.is_function_nest()&&l.set_function_name(b)&&(this.rerender(),a.robot.in_training&&a.robot.in_training.edited(this,{setter_name:"set_function_name",
argument_1:b,toString:"change the function bird to '"+b+"'",button_selector:".toontalk-select-function"}))};h=h.add_standard_widget_functionality(h);h.set_description(k);a.debugging&&(h.debug_id=a.UTILITIES.generate_unique_id(),h.debug_string=l?"a bird with "+l.debug_string:"a bird without a nest");return h};b.create_function=function(c,f,h){return b.create(a.nest.create_function(f,c,h||a.UTILITIES.get_first_property(a[c].function)))};b.match=function(a){return a.match_with_any_bird?a.match_with_any_bird(this):
this};b.match_with_any_bird=function(){return"matched"};b.update_display=function(){var b=this.get_frontside(!0),c=this.get_backside(),f;f=b.get_element();f.title=this.get_title();$(f).is(".toontalk-bird, .toontalk-side-animating")||($(f).addClass("toontalk-bird toontalk-bird-static"),f.addEventListener("dragover",function(b){$(f).is(".toontalk-bird-static")&&($(f).removeClass("toontalk-bird-static"),a.UTILITIES.add_animation_class(f,"toontalk-bird-gimme"))}),f.addEventListener("dragleave",function(a){$(f).is(".toontalk-bird-gimme")&&
$(f).addClass("toontalk-bird-static").removeClass("toontalk-bird-gimme")}));this.element_to_display_when_flying?f.appendChild(this.element_to_display_when_flying):$(f).children(".toontalk-side").remove();c&&c.rerender()};b.fly_to=function(b,c,f){var g=this.get_frontside_element(),k=$(g).offset(),k=Math.atan2(b.top-k.top,b.left-k.left),q="toontalk-fly-west toontalk-fly-northwest toontalk-fly-north toontalk-fly-northeast toontalk-fly-east toontalk-fly-southeast toontalk-fly-south toontalk-fly-southwest".split(" ")[Math.round(4*
(k/Math.PI+1))%8];$(g).position();a.UTILITIES.add_animation_class(g,q);this.animate_to_absolute_position(b,function(){$(g).removeClass(q);f?($(g).addClass("toontalk-bird-static"),setTimeout(c,f)):c()})};b.get_type_name=function(a,b){return a?b&&this.is_function_bird()?"function birds":"birds":"bird"};b.matching_resource=function(a){return a.get_type_name&&a.get_type_name()===this.get_type_name()};b.drop_on=function(a,b,c,d){if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,!1,c,d)};a.creators_from_json.bird=
function(b,c){return a.bird.create(a.UTILITIES.create_from_json(b.nest,c),b.description)};return b}(window.TOONTALK);window.TOONTALK.bird_backside=function(a){return{create:function(b){b=a.backside.create(b);b.add_advanced_settings(!0);return b}}}(window.TOONTALK);window.TOONTALK.nest=function(d){var r=Object.create(d.widget),g={},l={};r.create=function(l,h,u,v){var q=Object.create(r),B=[],C=[],e;h||(h=[]);n=function(c){v&&k.call(v,this);v=c;u=b.call(c);a.call(c,this)};b=function(){return u};f=function(){v&&
k.call(v,this);v=void 0;u=d.UTILITIES.generate_unique_id()};a=function(a){this[g](a)};k=function(a){this[g](a,!0)};q.is_nest=function(){return!0};q.matched_by=function(a){return 0<h.length?d.UTILITIES.match(a,h[0].get_widget()):[[this,a]]};q.run_when_non_empty=function(a,b){0>C.indexOf(b)&&(B.push(a),C.push(b))};q.add_to_contents=function(a,b,c,f,g){var l;1===h.push(a)?(0<B.length&&(l=B,B=[],C=[],l.forEach(function(a){a()})),a.set_visible(this.visible())):(a.get_widget().hide(),a.set_visible(!1));
a.is_backside()?a.get_widget().set_parent_of_backside(this):a.get_widget().set_parent_of_frontside(this);e&&!g&&(f?e.forEach(function(e){e.has_ancestor(a.get_widget())||e.animate_bird_delivery(d.UTILITIES.copy_side(a),f,void 0,b,c)}):e.forEach(function(e){e.has_ancestor(a.get_widget())||e.add_to_contents(d.UTILITIES.copy_side(a,!1,!0),b,c)}));this.rerender()};q.animate_bird_delivery=function(a,b,c,f,h){var g,l,k;b.animate_delivery_to(a,this,void 0,void 0,void 0,c,f,h);e&&(g=$(b.closest_visible_ancestor().get_widget().get_frontside_element()).closest(":visible").position(),
l=b.get_parent_of_frontside().get_element(),k=this.visible(),e.forEach(function(c){var e=d.UTILITIES.copy_side(a,!1,k),f,q;c.has_ancestor(a.get_widget())||(c.visible()||k?(f=b.copy({just_value:!0}),q=f.get_frontside_element(!0),$(l).append(q),f.animate_delivery_to(e,c,c,g.left,g.top,void 0,h)):c.add_to_contents(e,void 0,h))}))};q.get_contents_frontside_element=function(){if(0<h.length)return h[0].get_widget().get_frontside_element()};q.get_locked=function(){return this.locked_for_animating_deliveries};
q.set_locked=function(a){this.locked_for_animating_deliveries=a;!a&&this.to_run_when_unlocked&&0<this.to_run_when_unlocked.length&&this.to_run_when_unlocked.shift()()};q.run_when_unlocked=function(a){this.to_run_when_unlocked?this.to_run_when_unlocked.push(a):this.to_run_when_unlocked=[a]};q.removed_from_container=function(a,b,c,e,f){if(a=h.shift())a.is_backside()?a.get_widget().set_parent_of_backside(void 0):a.get_widget().set_parent_of_frontside(void 0);else if(f){d.UTILITIES.report_internal_error("Nothing removed from nest!");
return}this.visible()&&(a.get_widget().restore_dimensions(),0<h.length&&(h[0].set_visible(!0),$(h[0].get_element()).show()),this.render());return a};q.dereference=function(a,b,c){if(0===h.length)return{wait_until_this_nest_receives_something:this};if(h)return h[0].dereference(a,b,c);d.UTILITIES.display_message("Robot expected to find a nest something that it could get "+d.path.toString(a)+". But the nest is empty.");return this};q.dereference_contents=function(a,b,c){var e,f,g,l;return 0===h.length?
{wait_until_this_nest_receives_something:this}:a.removing_widget?(a=h[0],c.remove_from_container(a,this),this.visible()&&(g=this.get_frontside_element(),c=$(g).offset(),b=$(g).closest(".toontalk-backside-of-top-level"),(e=b.offset())||(e={left:0,top:0}),f=a.get_frontside_element(),l=$(g).width(),g=$(g).height(),$(f).css({left:.1*l+c.left-e.left,top:.1*g+c.top-e.top,width:l*d.nest.CONTENTS_WIDTH_FACTOR,height:g*d.nest.CONTENTS_HEIGHT_FACTOR}),b.append(f)),a):a.next?h[0].get_widget().dereference(a.next,
b,c):h[0].get_widget()};q.get_json=function(a){return{type:"nest",contents:d.UTILITIES.get_json_of_array(h,a),guid:u,original_nest:v&&d.UTILITIES.get_json(v,a)}};q.copy=function(a){var b,e,f;if(a&&a.just_value)return 0<h.length?h[0].get_widget().copy(a):d.nest.create(this.get_description(),[],"in a robot's condition");b=d.UTILITIES.copy_widget_sides(h,a);a?a.fresh_copy?e=d.nest.create(this.get_description(),b,u&&d.UTILITIES.generate_unique_id()):(f=v||this,a.birds_copied&&a.birds_copied[this]?(a.nests_copied&&
a.nests_copied[f]?(e=a.nests_copied[r][0].copy(),a.nests_copied[f].forEach(function(a){n.call(a,e)})):e=d.nest.create(this.get_description(),b,d.UTILITIES.generate_unique_id()),a.birds_copied[this].forEach(function(a){c.call(a,e)})):e=d.nest.create(this.get_description(),b,u,f),a.nests_copied||(a.nests_copied={}),a.nests_copied[f]?a.nests_copied[f].push(e):a.nests_copied[f]=[e]):e=d.nest.create(this.get_description(),b,u,v||this);return this.add_to_copy(e,a)};q.has_contents=function(){return 0<h.length};
q.dropped_on_other=function(a,b,c,e){var f,h,g,l,k,r,n;if(!u){u=d.UTILITIES.generate_unique_id();d.debugging&&(q.debug_string="A nest with "+u);f=d.bird.create(this);if(e){e.add_newly_created_widget(f);if(!this.visible())return;this.robot_waiting_before_next_step=e}d.robot.in_training&&c&&d.robot.in_training.add_newly_created_widget(f);this.rerender();h=this.get_frontside_element(!0);d.UTILITIES.add_animation_class(h,"toontalk-hatch-egg");k=function(){var k,q,u;if(b)k=a.get_backside();else if((u=
d.UTILITIES.widget_from_jquery($(h).closest(".toontalk-top-level-backside")))||(u=d.UTILITIES.widget_from_jquery($(a.get_widget().get_frontside_element(!0)).closest(".toontalk-top-level-backside"))),u)k=u.get_backside();else{d.UTILITIES.report_internal_error("Unable to find the top-level backside for bird to go to.");return}q=k.get_element();u=$(q).offset();g=f.get_frontside_element(!0);$(g).removeClass("toontalk-bird-static");d.UTILITIES.add_animation_class(g,"toontalk-fly-southwest");l=d.UTILITIES.relative_position(h,
q);$(g).css({left:l.left,top:l.top});d.robot.in_training&&c?k.widget_dropped_on_me(f,!1,c,void 0,!0):k.widget_dropped_on_me(f,!1,c);$(h).removeClass("toontalk-hatch-egg").addClass("toontalk-empty-nest").css({width:"",height:""});"top-level"===this.get_parent_of_frontside().get_widget().get_type_name()&&$(h).css({left:l.left-5,top:l.top+45});n=function(){$(g).removeClass("toontalk-fly-southwest");d.UTILITIES.set_timeout(function(){d.UTILITIES.add_animation_class(g,"toontalk-fly-down");r=function(){$(g).removeClass("toontalk-fly-down");
d.UTILITIES.add_animation_class(g,"toontalk-bird-morph-to-static");d.UTILITIES.add_one_shot_event_handler(g,"animationend",1E3,function(){$(g).removeClass("toontalk-bird-morph-to-static toontalk-side-animating").addClass("toontalk-bird-static")});e&&(this.robot_waiting_before_next_step=void 0,e.run_next_step());f.update_display()}.bind(this);d.UTILITIES.add_one_shot_event_handler(h,"animationend",1E3,r)}.bind(this))}.bind(this);$(g).removeClass("toontalk-bird-static");k=Math.max(10,l.left-70);q=Math.max(10,
l.top+70);f.animate_to_absolute_position({left:k+u.left,top:q+u.top},n);this.rerender()}.bind(this);d.UTILITIES.add_one_shot_event_handler(h,"animationend",2E3,k)}return!0};q.widget_dropped_on_me=function(a,b,c,e){c&&a.save_dimensions&&a.save_dimensions();0===h.length?(this.add_to_contents(b?a.get_backside():a,c,e),a.dropped_on_other?a.dropped_on_other(this,b,c,e):d.robot.in_training&&c&&d.robot.in_training.dropped_on(a,this)):a.drop_on(h[0].get_widget(),b,c,e);return!0};q.drop_on=function(a,b,c,
e){return a.widget_dropped_on_me?(a.widget_dropped_on_me(this,!1,c,e),!0):!1};q.element_to_highlight=function(){return 0===h.length?this.get_frontside_element():h[0].get_frontside_element()};q.update_display=function(){var a=this.get_frontside(!0),b=this.get_backside(),c,e,f,g,l,a=a.get_element();0<h.length?(c=h[0].get_widget(),h[0].is_backside()?(g=c.get_backside(!0),l=g.get_element(),g.update_display(),g.scale_to_fit(l,a)):(c.render(),l=h[0].get_element()),e=$(a).width(),f=$(a).height(),0<e&&0<
f&&d.UTILITIES.set_timeout(function(){for(var a=2*l.toontalk_border_size||0,b=d.nest.CONTENTS_WIDTH_FACTOR*e,h=d.nest.CONTENTS_HEIGHT_FACTOR*f;2*a>=b||2*a>=h;)a/=2;b-=a;h-=a;$(l).css({width:b,height:h,left:.1*e,top:.1*f});c.set_size_attributes&&c.set_size_attributes(b,h)},2),a.appendChild(l),$(a).addClass("toontalk-empty-nest"),h[0].is_backside()?c.set_parent_of_backside(this):c.set_parent_of_frontside(this)):(a.title=this.get_title(),u?($(a).removeClass("toontalk-nest-with-egg"),$(a).addClass("toontalk-empty-nest")):
d.UTILITIES.add_animation_class(a,"toontalk-nest-with-egg"));$(a).addClass("toontalk-nest");b&&b.rerender()};q[g]=function(a,b){if(!e){if(b)return;e=[]}b?e.splice(e.indexOf(a),1):e.push(a)};q.get_path_to=function(a,b){var c;if(0<h.length){c=h[0].get_widget();if(c===a)return d.path.to_widget_on_nest();if(c.get_path_to)return c.get_path_to(a,b)}};q.walk_children=function(a){if(0<h.length)return a(h[0])};q.top_contents_is=function(a){return 0<h.length&&h[0].get_widget()===a};q.any_nest_copies_visible=
function(){var a=!1;if(!e)return!1;e.some(function(b){b.visible()&&(a=!0)});return a};q.compare_with=function(a){if(0<h.length)return h[0].compare_with(a);if(a.compare_with_nest)return-1*a.compare_with_nest(this)};q.compare_with_nest=function(a){return 0===h.length?0:1};q.compare_with_number=function(a){return 0<h.length?h[0].compare_with(a):-1};q.compare_with_box=q.compare_with_number;q.compare_with_scale=q.compare_with_number;q=q.add_standard_widget_functionality(q);q.set_description(l);d.debugging&&
(q.debug_id=d.UTILITIES.generate_unique_id(),q.debug_string=u?"A nest with "+u:"A nest with an egg");if(v&&u)v[g](q);return q};r.create_function=function(a,b,c){var f=function(){return!1},g=d[b]&&d[b].function&&d[b].function[c],f={get_function_type:function(){return b},get_function_object:function(){return g},set_function_name:function(a){if(c===a)return!1;c=a;g=d[b]&&d[b].function&&d[b].function[c];this.add_to_contents=g.respond_to_message;return!0},is_function_nest:function(){return!0},copy:function(){return d.nest.create_function(a,
b,c)},animate_bird_delivery:function(a,b,c,d,f){b.animate_delivery_to(a,this,void 0,void 0,void 0,c,d,f)},get_json:function(a){return{type:"function_nest",function_type:b,function_name:g?g.name:d.UTILITIES.get_first_property(d[b].function)}},add_to_json:d.widget.add_to_json,get_widget:function(){return this},has_ancestor:f,visible:f,any_nest_copies_visible:f,is_backside:f};d.widget.has_parent(f);d.widget.has_description(f);d.widget.add_sides_functionality(f);f.set_description(a);g?(f.add_to_contents=
g.respond_to_message,d.debugging&&(f.debug_id=d.UTILITIES.generate_unique_id(),f.debug_string="a function nest that "+g.get_description())):d.UTILITIES.report_internal_error("Cannot create a function nest because TOONTALK."+b+"."+c+" is not defined.");return f};d.creators_from_json.function_nest=function(a,b){return d.nest.create_function(a.description,a.function_type,a.function_name)};r.create_backside=function(){return d.nest_backside.create(this)};r.match=function(a){return a.match_nest_with_nest?
a.match_nest_with_nest(this):a};r.match_nest_with_nest=function(a){return"matched"};r.toString=function(){return"a nest"};r.get_help_URL=function(){return"docs/manual/birds-nests.html"};r.get_type_name=function(a){return a?"nests":"nest"};r.matching_resource=function(a){return a.get_type_name&&a.get_type_name()===this.get_type_name()};r.get_custom_title_prefix=function(){return"Drop something on my bird and she'll take it here."};d.creators_from_json.nest=function(a,b){var c=!a.original_nest&&a.guid&&
l[a.guid];c||(c=d.nest.create(a.description,d.UTILITIES.create_array_from_json(a.contents,b),a.guid,a.original_nest&&d.UTILITIES.create_from_json(a.original_nest,b)),l[a.guid]=c);return c};r.CONTENTS_WIDTH_FACTOR=.8;r.CONTENTS_HEIGHT_FACTOR=.8;return r}(window.TOONTALK);window.TOONTALK.nest_backside=function(a){return{create:function(b){b=a.backside.create(b);b.add_advanced_settings(!0);return b}}}(window.TOONTALK)})();window.TOONTALK.scale=function(c){var n=Object.create(c.widget);n.create=function(b,a,k,f){var d=function(){k.rerender()},r,g,l;k||(k=c.box.create(2,void 0,b,a));r=k.get_json;g=k.copy;l=k.get_path_to;k.is_scale=function(){return!0};k.copy=function(a){var b;a||(a={});b=g.call(this,a);b=c.scale.create(void 0,void 0,b,a.just_value&&this.get_state());return k.add_to_copy(b,a)};k.get_json=function(a){a=r.call(this,a);a.type="scale";a.inactive_state=this.get_inactive_state();return a};k.get_path_to=function(a,
b){var c=l.call(this,a,b);c&&(c.true_type="scale");return c};k.drop_on=function(a,b,c,d){if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,b,c,d)};k.widget_dropped_on_me=function(a,b,c,d){var f=this.get_hole_contents(0),g=this.get_hole_contents(1),l;a.dropped_on_other&&a.dropped_on_other(this,!1,c,d);if(f&&!g)return this.get_hole(1).widget_dropped_on_me(a,b,c,d),!0;if(!f&&(g||!c))return this.get_hole(0).widget_dropped_on_me(a,b,c,d),!0;l=this.which_hole(c,!1);if(0===l){if(f){if(f.drop_on)return a.drop_on(f,
b,c,d);return}}else if(g){if(g.drop_on)return a.drop_on(g,b,c,d);return}this.get_hole(l).widget_dropped_on_me(a,b,c,d);return!0};k.which_hole=function(a,b){var c=$(k.get_frontside_element()),d=c.offset(),c=c.width(),d=a.clientX-(d.left+c/2),c=b?c/10:0;return-d>c?0:d>c?1:-1};k.get_inactive_state=function(){return f};k.update_display=function(){var a=this.get_frontside_element(),b=$(a),d=$(a).children(".toontalk-scale-half"),f=$(a).parent(),f=f.is(".toontalk-backside")?a:f.get(0),g=$(f).width(),l=$(f).height(),
k=function(a,b,c){var d=b.get_frontside_element(!0),f=c*g*.5,h=.5*g,k=l;b=b.get_contents();$(a).css({left:f,top:0,width:h,height:k});a!==d&&(f=0===c?-.05*g:.15*g,c="toontalk-scale-balanced"===e?.1*l:0===c&&"toontalk-scale-left_heavier"===e||1===c&&"toontalk-scale-right_heavier"===e?.25*l:1===c&&"toontalk-scale-left_heavier"===e||0===c&&"toontalk-scale-right_heavier"===e?-.1*l:.2*l,h=.4*g,k=.4*l,$(d).css({left:f,top:c,width:h,height:k}),b&&(b.set_location_attributes&&b.set_location_attributes(f,c),
b.set_size_attributes&&b.set_size_attributes(h,k)),a.appendChild(d))},e,f=c.UTILITIES.scale_to_fit(a,f,123,91);0===g&&(g=1);0===l&&(l=1);g/=f.x_scale;l/=f.y_scale;b.is(".toontalk-top-level-resource")?e="toontalk-scale-balanced":(f=this.get_state(),e="undefined"===typeof f?"toontalk-scale-unbalanced":["toontalk-scale-right_heavier","toontalk-scale-balanced","toontalk-scale-left_heavier"][f+1]);b.removeClass("toontalk-scale-balanced toontalk-scale-left_heavier toontalk-scale-right_heavier toontalk-scale-unbalanced");
b.addClass(e);b.addClass("toontalk-scale");2===d.length?d.each(function(a,b){c.UTILITIES.set_timeout(function(){k(b,this.get_hole(a),a)}.bind(this))}.bind(this)):this.get_holes().forEach(function(b,c){var e=b.get_element();0===c?$(e).addClass("toontalk-left_scale  toontalk-scale-half"):$(e).addClass("toontalk-right_scale toontalk-scale-half");k(e,b,c);a.appendChild(e)});a.title=this.get_title();c.debugging&&(this.debug_string=this.toString())};k.render=function(){c.DISPLAY_UPDATES.pending_update(this)};
k.get_type_name=function(a){return a?"scales":"scale"};k.get_help_URL=function(){return"docs/manual/scales.html"};k.toString=function(){var a=this.get_hole_contents(0),b=this.get_hole_contents(1),d,f,g;switch(this.get_state()){case -1:d="scale leaning to the right";break;case 1:d="scale leaning to the left";break;case 0:d="balanced scale";break;default:if(d="unbalanced scale",!f&&!g)return d}f=a?"contains "+c.UTILITIES.add_a_or_an(a.get_full_description()):"is empty";g=b?"contains "+c.UTILITIES.add_a_or_an(b.get_full_description()):
"is empty";return d+" and the left pan "+f+" and the right pan "+g};k.create_backside=function(){return c.scale_backside.create(this)};k.get_state=function(){var a=this.get_inactive_state(),b;if(a)return a;a=this.get_hole_contents(0);b=this.get_hole_contents(1);if(a||b)if(a){if(!b)return 1;if(a.compare_with)return a.compare_with(b)}else return-1};k.match=function(a){return a.match_with_scale?a.match_with_scale(this):this};k.match_with_scale=function(a){return this.get_state()===a.get_state()?"matched":
a};k.compare_with=function(a){if(a.compare_with_scale)return-1*a.compare_with_scale(this)};k.compare_with_scale=function(a){var b=this.get_state();a=a.get_state();return b&&!a?1:!b&&a?-1:b>a?1:b<a?-1:0};k.get_hole(0).add_listener("value_changed",d);k.get_hole(1).add_listener("value_changed",d);k.get_hole_contents(0)&&k.get_hole_contents(0).add_listener("value_changed",d);k.get_hole_contents(1)&&k.get_hole_contents(1).add_listener("value_changed",d);k.get_custom_title_prefix=function(){var a=this.get_state(),
b=this.get_hole_contents(0),c=this.get_hole_contents(1);if("undefined"===typeof a)return b&&c?"I can't compare "+b+" and "+c+".":"Use me to compare two things. Drop them in my pans.";b||(b="empty pan");c||(c="empty pan");return["The "+c+" is greater than the "+b+".","The "+c+" is equal to the "+b+".","The "+c+" is less than the "+b+"."][a+1]};c.debugging&&(k.debug_string=k.toString(),k.debug_id=c.UTILITIES.generate_unique_id());return k};c.creators_from_json.scale=function(b,a){return n.create(c.UTILITIES.create_array_from_json(b.contents,
a),b.description,void 0,b.inactive_state)};return n}(window.TOONTALK);window.TOONTALK.scale_backside=function(c){return{create:function(n){n=c.backside.create(n);n.add_advanced_settings(!0);return n}}}(window.TOONTALK);window.TOONTALK.robot=function(c){var n=Object.create(c.widget);n.create=function(b,a,k,f,d,r,g){var l=Object.create(n),x,h=!1,u,v,q;k||(k=c.actions.create());x||(x=l);l.is_robot=function(){return!0};l.get_frontside_conditions=function(){return b};l.set_frontside_conditions=function(a){b=a};l.get_backside_conditions=function(){return a};l.set_backside_conditions=function(b){(a=b)&&c.UTILITIES.available_types.forEach(function(b){a[b]&&c.widget.erasable(a[b])})};l.add_to_backside_conditions=function(b){var d,
e;if(!(0<=this.get_newly_created_widgets().indexOf(b))){e=b.get_type_name();if(a){if(a[e])return}else a={};q.some(function(a){if(a.is_of_type(e))return d=a,!0});d&&(a[e]=d,c.widget.erasable(d))}};l.get_body=function(){return k};l.running_or_waiting=function(){return u};l.set_running_or_waiting=function(a){u=a};l.stopped=function(){return v};l.set_stopped=function(a){(v=a)&&this.visible()&&$(this.get_frontside_element()).removeClass("toontalk-robot-waiting");this.get_next_robot()&&this.get_next_robot().set_stopped(a)};
l.get_animating=function(){return h};l.set_animating=function(a,b){var e=this.get_frontside_element();(h=a)?(b||(b=$(e).offset()),$(e).addClass("toontalk-robot-animating toontalk-side-animating"),$(e).css({width:"",height:"","z-index":c.UTILITIES.next_z_index()}),c.UTILITIES.set_position_relative_to_top_level_backside($(e),b),$(e).closest(".toontalk-top-level-backside").append(e)):$(e).removeClass("toontalk-robot-animating toontalk-side-animating")};l.get_thing_in_hand=function(){return d};l.set_thing_in_hand=
function(a){c.debugging&&a&&"empty hole"===a.get_type_name()?c.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):(d=a)&&!c.robot.in_training&&this.visible()&&this.update_display()};l.get_next_robot=function(){return g};l.set_next_robot=function(a){var b=this.get_backside_element();a&&a.set_first_in_team(this.get_first_in_team());!a&&g&&g.set_first_in_team(g);g=a;b&&(a=a?"When the robot can't run then this one will try: ":window.TOONTALK.robot.empty_drop_area_instructions,$(b).find(".toontalk-drop-area-instructions").get(0).innerHTML=
a)};l.get_first_in_team=function(){return x};l.set_first_in_team=function(a){x=a;g&&g.set_first_in_team(a)};l.walk_children=function(a){var b;g&&!a(g)||!(b=this.get_frontside_conditions())||b.is_top_level()||a(b)};l.get_run_once=function(){return r};l.set_run_once=function(a){r=a};l.training_started=function(){var a=this.get_context(),b;a?(this.being_trained=!0,this.set_frontside_conditions(a.copy({just_value:!0})),$("*").css({cursor:"url("+c.UTILITIES.absolute_file_path("images/RB19.32x32.PNG")+
"), default"}),this.get_frontside_element().title=this.get_title(),b=this.get_backside_element(),$(b).find(".toontalk-conditions-panel").remove(),q=c.UTILITIES.copy_widget_sides(a.get_backside_widgets(),{just_value:!0})):c.UTILITIES.report_internal_error("Robot started training but can't find its 'context'.")};l.training_finished=function(){var a=this.get_body().get_newly_created_widgets(),b,e;$("*").css({cursor:""});for(b=0;b<a.length;b++)e=a[b],"drop it on top-level"!==e.last_action&&"copy"!==e.last_action||
this.add_step(c.robot_action.create(c.newly_created_widgets_path.create(b),"add to the top-level backside"));this.rerender();this.being_trained=!1;this.get_frontside_element().title=this.get_title();this.backup_all();c.robot.in_training=void 0};g&&l.set_next_robot(g);l=l.add_standard_widget_functionality(l);l.set_description(f);c.debugging&&(l.debug_id=c.UTILITIES.generate_unique_id());return l};n.create_backside=function(){return c.robot_backside.create(this)};n.copy=function(b){var a=this.get_frontside_conditions(),
k=this.get_backside_conditions(),a=a?a.copy({just_value:!0}):void 0,f=this.get_next_robot(),f=f?f.copy(b):void 0,d;k&&(d={},c.UTILITIES.available_types.forEach(function(a){d[a]&&(d[a]=d[a].copy({just_value:!0}))}));k=this.create(a,d,this.get_body().copy(),this.get_description(),this.get_thing_in_hand(),this.get_run_once(),f);return this.add_to_copy(k,b)};n.match=function(){return"matched"};n.run=function(b,a,k){var f=this.get_frontside_conditions(),d,r,g;if(this.being_trained||!f||this.get_first_in_team().running_or_waiting())return this;
g=function(a){a.visible()&&$(a.get_frontside_element()).removeClass("toontalk-conditions-not-matched toontalk-conditions-waiting").find(".toontalk-conditions-not-matched, .toontalk-conditions-waiting").removeClass("toontalk-conditions-not-matched toontalk-conditions-waiting")};g(f);this.rerender();this.match_status=c.UTILITIES.match(f,b);"matched"===this.match_status&&(d=this.get_backside_conditions())&&(f=b.get_backside_widgets())&&f.some(function(a){var b=!a.is_backside()&&d[a.get_widget().get_type_name()];
if(b&&(g(b),a=c.UTILITIES.match(b,a.get_widget()),"matched"!==a))return this.match_status=a,!0}.bind(this));if("matched"===this.match_status)return k||(k=c.QUEUE),this.get_body().reset_newly_created_widgets(),this.get_first_in_team().set_running_or_waiting(!0),k.enqueue({robot:this,context:b,top_level_context:a,queue:k}),this.match_status;if(this.match_status.is_widget)return $(this.match_status.get_frontside_element()).addClass("toontalk-conditions-not-matched"),this.rerender(),this.get_next_robot()?
this.get_next_robot().run(b,a,k):this.match_status;this.match_status.forEach(function(a){a[1]&&$(a[1].get_frontside_element()).addClass("toontalk-conditions-waiting")});if(this.get_next_robot()){f=this.get_next_robot().run(b,a,k);if("matched"===f)return f;f.is_widget||f.forEach(function(a){0>this.match_status.indexOf(a)&&this.match_status.push(a)}.bind(this))}this.get_first_in_team()===this&&(r=function(){this.set_waiting(!1);this.run(b,a,k)}.bind(this),this.match_status.forEach(function(a){a[0]?
a[0].run_when_non_empty(r,this):a.run_when_non_empty(r,this)}.bind(this)),this.set_waiting(!0));return this.match_status};n.set_waiting=function(b){var a=this.get_frontside_element();b?(c.UTILITIES.add_animation_class(a,"toontalk-robot-waiting"),a.title="This robot is waiting for a bird to deliver something."):($(a).removeClass("toontalk-robot-waiting"),a.title=this.get_title())};n.run_actions=function(b,a,c){return this.stopped()?(this.get_first_in_team().set_running_or_waiting(!1),!1):this.visible()?
this.get_body().run_watched(b,a,c,this):this.get_body().run_unwatched(b,a,c,this)};n.picked_up=function(b,a,k){var f;this===b||b.is_top_level()||a.view.backside||(b.get_infinite_stack&&b.get_infinite_stack()?this.current_action_name="pick up a copy of":this.current_action_name="pick up",k?(f=b,a=b.copy(),a=c.path.get_path_to_resource(a)):a=c.path.get_path_to(b,this),a&&this.add_step(c.robot_action.create(a,this.current_action_name),f),b.last_action=this.current_action_name,this.current_action_name=
void 0,this.set_thing_in_hand(b))};n.dropped_on=function(b,a){var k;this!==b&&(this.current_action_name="drop it on",(k=c.path.get_path_to(a,this))&&this.add_step(c.robot_action.create(k,this.current_action_name)),b.last_action=this.current_action_name+" "+a.get_type_name(),this.current_action_name=void 0,this.set_thing_in_hand(void 0))};n.copied=function(b,a,k){this.current_action_name=k?"pick up a copy of":"copy";(b=c.path.get_path_to(b,this))&&this.add_step(c.robot_action.create(b,this.current_action_name),
a);a.last_action=this.current_action_name;this.current_action_name=void 0};n.removed=function(b){var a=this.get_context(),k;this.current_action_name="remove";(k=c.path.get_path_to(b,this))&&this.add_step(c.robot_action.create(k,this.current_action_name));b.last_action=this.current_action_name;this.current_action_name=void 0;if(a===b||b===this)this.add_to_top_level_backside(this.copy()),this.training_finished()};n.edited=function(b,a){var k;this.current_action_name="edit";(k=c.path.get_path_to(b,this))&&
this.add_step(c.robot_action.create(k,this.current_action_name,a));this.current_action_name=void 0};n.erased_widget=function(b,a){var k;this.current_action_name="erased_widget";(k=c.path.get_path_to(b,this))&&this.add_step(c.robot_action.create(k,this.current_action_name,{erased:a,toString:a?"erase":"un-erase"}));this.current_action_name=void 0};n.created_widget=function(b,a,k){this.add_newly_created_widget(b);this.add_to_top_level_backside(b,!1);this.add_step(c.robot_action.create(c.path.get_path_to_resource(b.copy()),
"add a new widget to the work space",{button_selector:k,path_to_source:c.path.get_path_to(a,this)}))};n.get_newly_created_widgets=function(){return this.get_body().get_newly_created_widgets()};n.remove_from_container=function(b,a){var k=a.get_index_of&&b.get_parent_of_frontside()&&a.get_index_of(b),f=function(){a.removed_from_container(b,!1,!0,k,!1)};this.get_animating()?c.UTILITIES.add_one_shot_event_handler(this.get_frontside_element(),"transitionend",2500,f):f();this.add_newly_created_widget_if_new(b)};
n.add_step=function(b,a){this.get_body().add_step(b,a);this.get_frontside_element().title=this.get_title()};n.get_context=function(){var b=this.get_frontside_element(),a=$(b).parent(),b=c.UTILITIES.widget_from_jquery(a);return!b&&(a=c.UTILITIES.widget_from_jquery(a.closest(".toontalk-backside-of-robot")))?a.get_context():b};n.update_display=function(){var b=this.get_frontside(!0),a=this.get_backside(),k=this.get_thing_in_hand(),f,d;c.debugging&&(this.debug_string=this.toString());f=b.get_element();
k&&(d=k.get_frontside_element());!d&&this.carrying_tool&&(d=document.createElement("div"),$(d).addClass(this.carrying_tool));f.title=this.get_title();$(f).addClass("toontalk-robot");$(f).children(".toontalk-side, .toontalk-held-by-robot").remove();d&&f.appendChild(d);this.match_status&&(this.match_status.is_widget?$(f).addClass("toontalk-side-animating toontalk-robot-not-matched"):$(f).removeClass("toontalk-robot-not-matched"));c.UTILITIES.set_timeout(function(){var a,b,c,n;d&&(n={position:"absolute"},
$(d).addClass("toontalk-held-by-robot"),a=$(d).width(),$(d).height(),b=$(f).width(),c=$(f).height(),0===a&&(a=2*b,n.width=a,n.height=c/2),n.left=(b-a)/2,n.top=c/4,$(d).css(n),k&&k.render())});a&&a.rerender()};n.add_newly_created_widget=function(b){return this.get_body().add_newly_created_widget(b)};n.add_newly_created_widget_if_new=function(b){if(b!==this.get_context())return this.get_body().add_newly_created_widget_if_new(b)};n.get_recently_created_widget=function(){var b=this.get_body().get_newly_created_widgets();
return b[b.length-1]};n.get_title=function(){var b=this.get_description();if(b)return b="This robot "+b,0>b.lastIndexOf(".")&&(b+="."),b+"\n"+this.toString();b=this.get_frontside_element();return $(b).is(".toontalk-top-level-resource")?"Drag this robot to a work area.":this.toString()};n.toString=function(b){var a,k,f,d,r,g,l;if(b&&"conditions"===b.role)return"any robot";a=this.get_frontside_conditions();if(!a)return"has yet to be trained.";k=this.get_backside_conditions();d=this.get_body();g=r="";
b=this.get_next_robot();a.is_top_level()?l="When the workspace's green flag is pressed":(a=c.UTILITIES.add_a_or_an(a.get_full_description({role:"conditions"})),l="When working on something that matches "+a);k&&(Object.keys(k).forEach(function(a){var b=k[a];b&&(l+=" and\nif on the back is "+c.UTILITIES.add_a_or_an(a)+" that matches "+c.UTILITIES.add_a_or_an(b.get_full_description({role:"conditions"})));f=!0}),f&&(l+="\n"));if(this.being_trained){if(d.is_empty())return"I'm ready to be trained. Show me what to do and then click on my 'Stop training' button.";
r="is being trained.\n";g="\n..."}d=r+l+" he will \n"+d.toString({robot:this})+g;this.match_status&&(this.match_status.is_widget?d="He isn't running because the "+this.match_status+" in his conditions (highlighted in red) doesn't match the corresponding widget. Perhaps editing his conditions will help.\n"+d:"matched"!==this.match_status&&(d="He is waiting for something to be delivered to the nest that matches the "+this.match_status[0][1]+"in his conditions (highlighted in yellow).\n"+d));b&&(d+=
"\nIf it doesn't match then the next robot will try to run.\n"+b.toString());return d};n.get_type_name=function(b){return b?"robots":"robot"};n.get_top_level_context_description=function(){var b=this.get_frontside_conditions().get_type_name();return"top-level"===b?"his workspace":"the "+b+" he's working on"};n.get_help_URL=function(){return"docs/manual/robots.html"};n.get_json=function(b){var a=this.get_frontside_conditions(),k=this.get_backside_conditions(),f,d,r;a&&(f=a.is_top_level()?{type:"top_level"}:
c.UTILITIES.get_json(a,b));k&&c.UTILITIES.available_types.forEach(function(a){k[a]&&(d||(d={}),d[a]=c.UTILITIES.get_json(k[a],b))});this.get_next_robot()&&(r=c.UTILITIES.get_json(this.get_next_robot(),b));return{type:"robot",frontside_conditions:f,backside_conditions:d,body:this.get_body().get_json(b),run_once:this.get_run_once(),next_robot:r}};c.creators_from_json.robot=function(b,a){var k,f,d;b.thing_in_hand&&(f=c.UTILITIES.create_from_json(b.thing_in_hand,a));b.next_robot&&(k=c.UTILITIES.create_from_json(b.next_robot,
a));b.backside_conditions&&(d={},c.UTILITIES.available_types.forEach(function(f){d[f]=c.UTILITIES.create_from_json(b.backside_conditions[f],a)}));return c.robot.create(c.UTILITIES.create_from_json(b.frontside_conditions||b.bubble,a),d,c.UTILITIES.create_from_json(b.body,a),b.description,f,b.run_once,k)};return n}(window.TOONTALK);
window.TOONTALK.robot_backside=function(c){var n=function(a,b,f,d){a=c.UTILITIES.create_text_element(a);var r=b.get_frontside_element(!0),g=document.createElement("div");$(r).addClass("toontalk-conditions-contents "+d);c.UTILITIES.set_timeout(function(){$(r).parent().addClass("toontalk-conditions-contents-container");$(r).css({left:"inherit",width:"inherit",height:"inherit"});b.render()});f.match_status&&(f.match_status.is_widget?$(f.match_status.get_frontside_element()).addClass("toontalk-conditions-not-matched"):
"matched"!==f.match_status&&f.match_status.forEach(function(a){$(a[1].get_frontside_element()).addClass("toontalk-conditions-waiting")}));g.appendChild(r);f=c.UTILITIES.create_horizontal_table(a,g);$(f).addClass("toontalk-conditions-panel");return f},b=function(a,b){var f=b.get_frontside_conditions(),d=b.get_backside_conditions(),r=b.visible(),g,l;f&&(f.is_top_level()?a.insertBefore(c.UTILITIES.create_text_element("This robot always runs when the workspace green flag is clicked."),a.firstChild):0===
$(a).find(".toontalk-frontside-conditions-area").length&&a.insertBefore(n("Runs only if the widget matches: ",f,b,"toontalk-frontside-conditions-area"),a.firstChild),f.set_visible(r),f.rerender());d&&Object.keys(d).forEach(function(f){if(g=d[f])l="toontalk-backside-"+f+"-conditions-area",0===$(a).find("."+l).length&&(f="bird"===f?c.UTILITIES.create_text_element("And there is a bird on the back."):n("Runs only if the "+f+" on the backside matches: ",g,b,l),a.insertBefore(f,a.firstChild.nextSibling),
g.set_visible(r),g.rerender())})};return{create:function(a){var k=c.backside.create(a),f=k.get_element(),d=c.UTILITIES.create_check_box(!a.get_run_once(),"toontalk-run-once-check-box","When finished start again","Check this if you want the robot to start over again after finishing what he was trained to do."),r=c.UTILITIES.create_drop_area(window.TOONTALK.robot.empty_drop_area_instructions),g=a.get_next_robot(),l=c.backside.create_advanced_settings_button(k,a),n=k.update_display;r.data("drop_area_owner",
a);$(d.button).click(function(b){var f=d.button.checked;a.set_run_once(!f);c.robot.in_training&&c.robot.in_training.edited(a,{setter_name:"set_run_once",argument_1:!f,toString:"change to "+(f?"run again":"run once")+" of the robot",button_selector:".toontalk-run-once-check-box"});b.stopPropagation()});g&&r.append(g.get_frontside_element(!0));r.get(0).addEventListener("drop",function(b){b=c.UTILITIES.get_dragee();(b=c.UTILITIES.widget_from_jquery(b))&&b.is_robot()&&(b.get_body().is_empty()?(b=b.open_backside(),
$(b.get_element()).find(".toontalk-train-backside-button").click()):a.set_next_robot(b))});k.update_display=function(){var b=a.get_frontside_element();b&&(b.title=a.get_title());n()};f.appendChild(this.create_train_button(k,a));f.appendChild(l);$(d.container).addClass("toontalk-advanced-setting");r.addClass("toontalk-advanced-setting");f.appendChild(d.container);f.appendChild(r.get(0));b(f,a);k.add_advanced_settings();return k},create_train_button:function(a,k){var f=a.get_element();$(f);var d=$("<button>Train</button>").button();
d.addClass("toontalk-train-backside-button");var n=!1,g=function(){n?(d.button("option","label","Stop training"),d.attr("title","Click to stop training this robot.")):k.get_body().is_empty()?(d.button("option","label","Train"),d.attr("title","Click to start training this robot.")):(d.button("option","label","Re-train"),d.attr("title","Click to start training this robot all over again."));$(f).is(":visible")&&b(f,k)};g();d.click(function(a){n=!n;g();n?(k.get_body().reset_steps(),c.robot.in_training=
k,k.training_started()):k.training_finished();a.stopPropagation()});return d.get(0)}}}(window.TOONTALK);window.TOONTALK.robot.empty_drop_area_instructions="Drop a robot here who will try to run when this robot can't run.";(function(){var c=function(c){return"rotate"===c||"skewX"===c||"skewY"===c||"transform-origin-x"===c||"transform-origin-y"===c};window.TOONTALK.element=function(n){var b=["left","top","width","height"],a=Object.create(n.widget),k=function(a,b){var c,g;if(!a)return 0;"number"===typeof a&&(g=a);0===a.length&&(g=0);if("undefined"===typeof g&&(c=a.substring(a.length-1),0<="0123456789x".indexOf(c)&&(g=parseFloat(a),isNaN(g))))return;c=g;0<=["rotate","skewX","skewY"].indexOf(b)&&(c%=360,0>c&&(c+=360));
return c};a.create=function(b,d,k,g){var l=Object.create(a),x=l.drag_started,h={},u={},v,q,B,C,e,p,z,A;d||(d=[]);l.is_element=function(){return!0};l.get_HTML=function(){return b};l.get_text=function(){var a=this.get_frontside_element().textContent;return""===a?this.get_HTML():a};l.set_HTML=function(a){var c=this.get_frontside_element();if(!c||b===a)return!1;b=a;$(c).children(":not(.ui-resizable-handle)").remove();this.rerender();return!0};l.set_text=function(a){var b=this.get_frontside_element(),
c=function(b){$(b).contents().each(function(){this.nodeType==Node.TEXT_NODE?(this.textContent=a,a=""):c(this,a)})};if(!b||a===b.textContent)return!1;c(b);return this.set_HTML(b.innerHTML)};l.get_style_attributes=function(){return d};l.set_style_attributes=function(a){d=a};l.get_attribute_widgets_in_backside_table=function(){return h};l.get_original_copies=function(){return u};l.get_pending_css=function(){return e};l.get_transform_css=function(){return p};l.add_to_css=function(a,b){c(a)?(p||(p={}),
p[a]=b):(e||(e={}),e[a]=b)};l.apply_css=function(){var a="",b,c,d,f,h,g;if(e||p)if(b=this.get_frontside_element())if($(b).is(":visible")){e&&(e.width&&(B=e.width,c=!0),e.height&&(C=e.height,c=!0));if(p){d||(d={});p.rotate&&(a+="rotate("+p.rotate+"deg)");p.skewX&&(a+="skewX("+p.skewX+"deg)");p.skewY&&(a+="skewY("+p.skewY+"deg)");if(p["transform-origin-x"]||p["transform-origin-y"])e["transform-origin"]=(p["transform-origin-x"]||0)+" "+(p["transform-origin-y"]||0);e&&e["transform-origin"]||(d["transform-origin"]=
"center center");a&&(d["-webkit-transform"]=a,d["-moz-transform"]=a,d["-ms-transform"]=a,d["o-transform"]=a,d.transform=a,$(b).children(".toontalk-element-container").css(d))}n.UTILITIES.set_timeout(function(){if(e){if(B||C)A&&A.css({width:v,height:q}),$(b).children(".toontalk-element-container").css({width:"",height:""}),c&&n.UTILITIES.run_when_dimensions_known(b,function(){n.UTILITIES.scale_element(b,B,C,v,q)}),e.width=void 0,e.height=void 0;if(e.left||e.top)e.left&&(f=$(this.get_parent_of_frontside().get_element()),
h=f.width(),e.left=(e.left%h+h)%h),e.top&&(f||(f=$(this.get_parent_of_frontside().get_element())),g=f.height(),e.top=(e.top%g+g)%g);$(b).css(e);e=void 0}}.bind(this))}else n.UTILITIES.set_timeout(function(){this.apply_css()}.bind(this),100)};l.on_update_display=function(a){z?z.push(a):z=[a]};l.fire_on_update_display_handlers=function(){z&&n.UTILITIES.set_timeout(function(){z.forEach(function(a,b){a()||z.splice(b,1)})})};l.get_image_element=function(){return A};l.set_image_element=function(a,b){A=
$(a).find("img");0===A.length?A=void 0:($(b).width(A.width()),$(b).height(A.height()))};l.get_additional_classes=function(){return g};l.set_additional_classes=function(a){g=a};l=l.add_standard_widget_functionality(l);l.drag_started=function(a,b){this.drag_x_offset=a.view.drag_x_offset;this.drag_y_offset=a.view.drag_y_offset;x.call(this,a,b)};l.update_display=function(){var a=this.get_frontside_element();this.get_backside();var b=function(a){return this.get_image_element()?"image":$(a).is(".toontalk-plain-text-element")?
"text":"element"}.bind(this);this.being_dragged||(this.get_erased&&this.get_erased()?$(a).css({opacity:0}).hide():(this.get_erased&&"0"===$(a).css("opacity")&&$(a).css({opacity:1}).show(),this.initialise_element(),n.UTILITIES.on_a_nest_in_a_box(a)&&(this.set_attribute("width",$(a).closest(".toontalk-box-hole").width(),!1),this.set_attribute("height",$(a).closest(".toontalk-box-hole").height(),!1)),"undefined"===typeof v&&n.UTILITIES.original_dimensions(this,function(a,b){v=a;q=b}),this.apply_css(),
this.fire_on_update_display_handlers(),a.title="Click to see the backside where you can place robots or change the style of this "+b(a)))};l.initialise_element=function(){var a=this.get_frontside_element(),b,c;a.children.length===$(a).children(".ui-resizable-handle").length&&(b=document.createElement("div"),$(b).addClass("toontalk-element-container"),b.innerHTML=this.get_HTML(),a.appendChild(b),this.set_image_element(b,a),$(a).addClass("toontalk-element-frontside"),"<"!==b.innerHTML.substring(0,1)&&
((c=this.get_additional_classes())&&$(b).addClass(c),$(a).addClass("ui-widget toontalk-plain-text-element")))};l.get_attribute_from_current_css=function(a){var b,c;if("width"===a&&(B||v))return B||v;if("height"===a&&(C||q))return C||q;b=this.get_frontside_element();c=b.style[a];""===c&&(c=$(b).css(a));return c?"number"===typeof c?c:c.replace("px",""):0};l.get_original_width=function(){return v};l.get_original_height=function(){return q};l.increment_width=function(a){this.set_attribute("width",(B||
v)+a)};l.increment_height=function(a){this.set_attribute("height",(C||q)+a)};l.set_description(k);n.debugging&&(l.debug_string=l.toString(),l.debug_id=n.UTILITIES.generate_unique_id());return l};a.copy=function(b){var c=a.create(this.get_HTML(),this.get_style_attributes().slice(),this.get_description());return this.add_to_copy(c,b)};a.match=function(a){return this.get_erased&&this.get_erased()?a.match_with_any_element?a.match_with_any_element():this:a.match_with_another_element_widget?a.match_with_another_element_widget(this):
this};a.match_with_any_element=function(){return"matched"};a.match_with_another_element_widget=function(a){var b;if(this.get_HTML()===a.get_HTML())return"matched";b=a.get_text();return""!==b&&b===this.get_text()?"matched":a};a.compare_with=function(a){if(a.compare_with_other_element)return a.compare_with_other_element(this)};a.compare_with_other_element=function(a){a=a.get_HTML().localeCompare(this.get_HTML());return 0>a?-1:0<a?1:a};a.create_backside=function(){return n.element_backside.create(this)};
a.get_attribute_from_pending_css=function(a){var b=this.get_pending_css();if(b&&b[a]||(b=this.get_transform_css())&&b[a])return b[a]};a.get_attribute=function(a){var b=this.get_attribute_from_pending_css(a);return"undefined"!==typeof b?b:this.get_attribute_from_current_css(a)};a.set_attribute=function(a,b,c,g){var l,x;if(!this.get_frontside(!0).get_element())return!1;l=this.get_attribute_from_pending_css(a);if(l===b)return!1;"undefined"===typeof l&&(l=this.get_attribute_from_current_css(a));x=k(b,
a);if("number"===typeof x){if(l==x)return!1;b=x}c&&n.robot.in_training&&n.robot.in_training.edited(this,{setter_name:"set_attribute",argument_1:a,argument_2:b,toString:"change the '"+a+"' style to "+b+" of",button_selector:".toontalk-element-"+a+"-attribute-input"});this.add_to_css(a,b);g&&(b=this.get_style_attributes(),0>b.indexOf(a)&&b.push(a));this.rerender();return!0};a.dropped_on_style_attribute=function(a,b,c,g){var l,k,h;if(a){l=a.toString();if(a.is_number()){k=this.get_attribute(b);if("number"===
typeof k)h=k;else if("auto"===k)switch(b){case "left":h=$(this.get_frontside_element()).offset().left;break;case "top":h=$(this.get_frontside_element()).offset().top;break;default:h=0}else h=parseFloat(k);k=a.to_float();switch(l.substring(0,1)){case "-":l=h-k;break;case "*":l=h*k;break;case "/":l=h/k;break;case "^":l=Math.pow(h,k);break;default:l=h+k}this.set_attribute(b,l,!1);(c||g&&g.visible())&&this.get_backside().render()}a.get_infinite_stack()||a.remove();n.robot.in_training&&c&&n.robot.in_training.dropped_on(a,
this.create_attribute_widget(b))}};a.get_attribute_widget_in_backside_table=function(a,b){var c=this.get_attribute_widgets_in_backside_table()[a];c||b||(c=this.create_attribute_widget(a),this.get_attribute_widgets_in_backside_table()[a]=c);return c};a.create_attribute_widget=function(a){var c=".toontalk-element-"+a+"-attribute-input",k=this.get_backside_element(),g=this.get_attribute(a),l=this,x=function(b){var c=u.get_attribute_owner(),d;b.currentTarget.toontalk_widget===c&&(d=$(c.get_frontside_element()).closest(".toontalk-top-level-backside").offset(),
d||(console.log("Unable to find top-level backside of an element for its position. Perhaps is 'visible' but not attached."),d={left:0,top:0}),b="left"===a?b.pageX-d.left-c.drag_x_offset:b.pageY-d.top-c.drag_y_offset,u.set_value_from_decimal(b),q.call(u))}.bind(this),h=function(a,b){var c=n.number.create(0,1);c.element_widget=this;c.set_value_from_decimal(b);c.set_format("decimal");c.attribute=a;c.get_type_name=function(a){return a?"element attributes":"element attribute"};B=c.toString;c.toString=
function(){return B.call(this)+" ("+this.attribute+")"};C=c.get_custom_title_prefix;c.get_custom_title_prefix=function(){return"This is the '"+this.attribute+"' attribute of "+c.element_widget+"\n"+C.call(this)};v=c.equals;c.equals=function(b){return a===b.attribute?this.equals(b.element_widget):v.call(this,b)};return c}.bind(this),u,v,q,B,C;k&&(c=$(k).find(c),0<c.length&&(c.get(0).toontalk_widget=this));u=h(a,g);(g=this.get_original_copies()[a])?g.push(u):this.get_original_copies()[a]=[u];u.set_value=
function(b){var c=l.get_original_copies()[a];b=bigrat.toDecimal(b);var d,h;this.get_attribute_owner().set_attribute(this.attribute,b)&&(h=bigrat.fromDecimal(b),c.forEach(function(a,b){d=a.set_value_from_sub_classes(h,!0)}));return d};q=u.update_display;u.update_display=function(){var a;this.get_erased()||(a=this.get_attribute_owner().get_attribute(this.attribute),u.set_value_from_decimal(a));q.call(this)};0<=b.indexOf(a)&&(this.on_update_display(function(){u.rerender();return!0}),"left"===a||"top"===
a)&&(g=this.get_frontside_element(),g.addEventListener("drag",x));u.copy=function(b){return b&&b.just_value?n.number.copy.call(this,b):this.add_to_copy(l.create_attribute_widget(a),b)};u.get_json=function(b){return{type:"attribute_number",attribute_name:a,element:n.UTILITIES.get_json(l,b)}};u.get_original_attribute_widget=function(){return l.get_original_copies()[a][0]};u.get_attribute_owner=function(){var a=function(b){if(b=b.get_parent_of_frontside())return b.is_backside()?b:a(b.get_widget())},
b=this.get_original_attribute_widget();if(b!==this)return b.get_attribute_owner();var c,b=a(this);if(!b||!b.get_widget().is_element())return l;b=b.get_widget();for(c=b.get_parent_of_backside();c&&c.get_widget().is_element();)b=c.get_widget(),c=b.get_parent_of_backside();return b};return u};n.creators_from_json.attribute_number=function(a,b){return n.UTILITIES.create_from_json(a.element,b).create_attribute_widget(a.attribute_name)};a.on_backside_hidden=function(){this.get_style_attributes().forEach(function(a){(a=
this.get_attribute_widget_in_backside_table(a,!0))&&a.set_visible(!1)}.bind(this))};a.toString=function(a){if(a&&"conditions"===a.role)a=this.get_text();else{a=this.get_HTML();var b;1<a.length&&"<"===a.charAt(0)?(b=a.indexOf(" "),a=a.substring(0,b+1)+"style='width: 50px; height: 30px;'"+a.substring(b)):a='"'+a+'"';a="the element "+a}return a};a.get_type_name=function(a){return a?"elements":"element"};a.get_help_URL=function(){return"docs/manual/elements.html"};a.get_json=function(a){var b=this.get_style_attributes(),
c=[],g=n.UTILITIES.remove_z_index(this.get_HTML()),l=encodeURIComponent(g);0===g.indexOf("<img src='data:image/")?(a.shared_html||(a.shared_html=[]),g=a.shared_html.indexOf(l),0>g&&(g=a.shared_html.push(l)-1),a={shared_html_index:g}):a=l;b.forEach(function(a){c.push(a)});return{type:"element",html:a,attributes:c,attribute_values:c.map(this.get_attribute.bind(this)),additional_classes:this.get_additional_classes()}};n.creators_from_json.element=function(b,c){var n=decodeURIComponent("string"===typeof b.html?
b.html:c.shared_html[b.html.shared_html_index]),g=a.create(n,b.attributes,b.description),l;l=c&&c.event?["left","top"]:[];b.attribute_values.forEach(function(a,c){var d=b.attributes[c];0>l.indexOf(d)&&g.add_to_css(d,k(a)||a)});b.additional_classes&&g.set_additional_classes(b.additional_classes);return g};a.create_attribute_path=function(a,b){var c=n.path.get_path_to(a.element_widget,b);return this.extend_attribute_path(c,a.attribute)};a.extend_attribute_path=function(a,b){return{dereference:function(c,
g,l){return a.dereference(g||c,void 0,l).get_attribute_widget_in_backside_table(b)},toString:function(){return"the '"+b+"' property of "+a},get_json:function(){return{type:"path_to_style_attribute",attribute:b,element_widget_path:a.get_json()}}}};n.creators_from_json.path_to_style_attribute=function(b){var c=n.UTILITIES.create_from_json(b.element_widget_path);return a.extend_attribute_path(c,b.attribute)};a.get_size_attributes=function(){return{clientWidth:this.get_attribute("width"),clientHeight:this.get_attribute("height")}};
a.set_size_attributes=function(a,b,c){c?(this.add_to_css("width",a),this.add_to_css("height",b)):(this.set_attribute("width",a),this.set_attribute("height",b));n.UTILITIES.set_timeout(function(){this.rerender()}.bind(this))};a.set_location_attributes=function(a,b){this.set_attribute("left",a);this.set_attribute("top",b)};return a}(window.TOONTALK);window.TOONTALK.element_backside=function(n){var b=function(f,d,k){var g=function(a){var b=d.get_style_attributes();0>b.indexOf(a)&&(b.push(a),"left"===
a?(a=d.get_frontside_element(),$(a).on("drag",function(a){var b=d.get_backside_element(),c=d.get_frontside_element();b&&c&&$(b).find(".toontalk-element-left-attribute-input").val(a.originalEvent.clientX)})):"top"===a&&(a=d.get_frontside_element(),$(a).on("drag",function(a){var b=d.get_backside_element(),c=d.get_frontside_element();b&&c&&$(b).find(".toontalk-element-top-attribute-input").val(a.originalEvent.clientY)})))},l=function(h,l){var v=0<=d.get_style_attributes().indexOf(h),q=n.UTILITIES.create_check_box(v,
"toontalk-style-attribute-check-box",h+"&nbsp;","Click to add or remove the '"+h+"' style attribute from the backside of this element."),v=n.UTILITIES.create_anchor_element("i",("transform-origin-x"===h||"transform-origin-y"===h?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin#":c(h)?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform#":"http://www.w3.org/community/webed/wiki/CSS/Properties/")+h),x=document.createElement("li");$(v).addClass("toontalk-help-button notranslate toontalk-attribute-help-button");
$(v).css({color:"white"});v.translate=!1;v.lang="en";q.container.appendChild(v);q.button.addEventListener("click",function(c){if(q.button.checked)g(h);else{c=d.get_style_attributes();var e=c.indexOf(h);0<=e&&(c.splice(e,1),b(f,d,k))}a(k,d,d.get_backside())});x.appendChild(q.container);l.appendChild(x)},x=function(a,b){var c,d;"string"===typeof a?l(a,b):a.label?(c=document.createElement("h3"),c.textContent=a.label,d=document.createElement("ul"),b.appendChild(c),b.appendChild(d),x(a.sub_menus,d)):a.forEach(function(a){x(a,
b)})};$(f).is(".ui-accordion")&&$(f).accordion("destroy");$(f).empty();x([{label:"Geometry attributes",sub_menus:"left top width height z-index background-position".split(" ")},{label:"Color attributes",sub_menus:["background-color","color","opacity"]},{label:"Font attributes",sub_menus:["font-size","font-weight"]},{label:"Visibility",sub_menus:["display","visibility"]},{label:"Transformations",sub_menus:["rotate","skewX","skewY","transform-origin-x","transform-origin-y"]}],f);$(f).accordion({active:0,
heightStyle:"content"});return f},a=function(a,b,c){if(c.visible()){var g=b.get_style_attributes();b.get_frontside_element();$(a).empty();g.forEach(function(g){b.get_attribute(g);var k=document.createElement("tr"),h=document.createElement("td"),u=b.get_attribute_widget_in_backside_table(g),v=u.get_frontside_element();u.set_parent_of_frontside(c,!1,!0);u.set_infinite_stack(!0);a.appendChild(k);k.appendChild(h);h.appendChild(n.UTILITIES.create_text_element(g));h=document.createElement("td");k.appendChild(h);
u.set_visible(!0);$(v).addClass("toontalk-element-attribute");h.appendChild(v);u.render()})}},k=function(a){var b=$("<button>Add or remove style attributes</button>").button();b.addClass("toontalk-show-attributes-chooser-button");b.click(function(c){$(a).is(":visible")?($(a).hide(),b.button("option","label","Add or remove style attributes"),b.attr("title","Click to add widgets for reading and writing style attributes of this element.")):($(a).show(),b.button("option","label","Hide style attributes list"),
b.attr("title","Click to hide the list of attributes that can be added or removed."))});b.attr("title","Click to add widgets for reading and writing style attributes of this element.");return b.get(0)};return{create:function(c){var d=n.backside.create(c),r=d.get_element();c.get_HTML();var g=document.createElement("table"),l=document.createElement("div"),x=k(l),h=n.backside.create_advanced_settings_button(d,c),u=n.UTILITIES.get_current_url_boolean_parameter("elementHTML",!1),v=u?"get_HTML":"get_text",
q=d.update_display,B,C;c.initialise_element();B=c[v]().trim();0<B.length&&!c.get_image_element()&&(C=n.UTILITIES.create_text_area(B,"toontalk-html-input","","Type here to edit the text."),B=function(a){a=C.button.value.trim();c.get_frontside_element();var b=u?"set_HTML":"set_text";c[b](a)&&n.robot.in_training&&n.robot.in_training.edited(c,{setter_name:b,argument_1:a,toString:"change the text to "+a+" of",button_selector:".toontalk-html-input"})},$(C.container).resizable(),$(C.container).css({width:"100%"}),
$(C.button).css({width:"100%"}),C.button.addEventListener("change",B),C.button.addEventListener("mouseout",B),r.appendChild(C.container));d.get_attributes_chooser=function(){return l};b(l,c,g);a(g,c,d);r.appendChild(l);r.appendChild(x);r.appendChild(g);r.appendChild(h);$(l).hide();$(l).addClass("toontalk-attributes-chooser");d.update_display=function(){C&&$(C.button).val(c[v]());a(g,c,d);$(l).is(":visible")&&b(l,c,g);q()};$(r).find(".toontalk-hide-backside-button").click(function(a){$(l).hide()});
d.add_advanced_settings();return d}}}(window.TOONTALK)})();window.TOONTALK.sensor=function(c){var n=Object.create(c.widget),b=function(a,b){"element"===a.get_type_name()&&(a.set_attribute("font-size",.5*$(b.get_frontside_element(!0)).height(),!1,!0),a.set_additional_classes("toontalk-string-value-from-sensor"),b.visible()&&a.rerender())};n.create=function(a,k,f,d,r,g){var l=c.nest.create(f,d,"sensor"),x=l.get_json,h=l.update_display,u=l.copy,v=function(a){var d=a[k],f=l.visible(),e=$(l.get_frontside_element()).closest(".toontalk-top-level-backside"),g;if("keyCode"===
k){if(16===d)return;d=String.fromCharCode(d);a.shiftKey||(d=d.toLowerCase())}switch(typeof d){case "number":g=c.number.create(Math.round(d),1);break;case "string":g=c.element.create(d,void 0,void 0,"toontalk-string-value-from-sensor");b(g,l);break;case "boolean":g=c.element.create(d.toString(),void 0,void 0,"toontalk-string-value-from-sensor");b(g,l);break;case "undefined":c.UTILITIES.report_internal_error("No "+k+" in sensor "+n);return}f?(a=c.bird.create(),l.add_to_top_level_backside(a),a.animate_delivery_to(g,
l,l,e.width()/2,e.height())):l.add_to_contents(g)}.bind(this);l.copy=function(b){var d;if(b&&b.just_value&&this.has_contents())return u.call(this,b);d=c.sensor.create(a,k,f,void 0,r,b?void 0:g);return l.add_to_copy(d,b)};l.get_json=function(b){var d=x.call(this,b);d.type="sensor";d.event_name=a;d.attribute=k;d.active=r;d.sensor_of=g&&c.UTILITIES.get_json(g,b);return d};l.update_display=function(){var a=$(this.get_frontside_element());h.call(this);r||a.is(".toontalk-top-level-resource")?(a.addClass("toontalk-sensor-nest"),
a.removeClass("toontalk-sensor-inactive-nest")):(a.addClass("toontalk-sensor-inactive-nest"),a.removeClass("toontalk-sensor-nest"));a.removeClass("toontalk-empty-nest")};l.get_type_name=function(a){return a?"sensors":"sensor"};l.get_help_URL=function(){return"docs/manual/sensors.html"};l.toString=function(){return"a sensor that receives the '"+k+"' attribute of "+a+" events"};l.get_active=function(){return r};l.set_active=function(b,c){if(r!==b||c)b?g?g.get_frontside_element().addEventListener(a,
v):window.addEventListener(a,v):g?g.get_frontside_element().removeEventListener(a,v):window.removeEventListener(a,v),r=b};l.set_active(r,!0);l.create_backside=function(){return c.sensor_backside.create(this)};l.get_event_name=function(){return a};l.set_event_name=function(b){var c=r;a&&r&&this.set_active(!1);a=b;c&&this.set_active(!0)};l.get_attribute=function(){return k};l.set_attribute=function(a){k=a};l.match=function(a){return this};l.set_sensor_of=function(a){g=a};l.get_custom_title_prefix=function(){return"Use this nest to receive notices of events."};
return l};c.creators_from_json.sensor=function(a,k){var f=c.UTILITIES.create_array_from_json(a.contents,k),d=c.sensor.create(a.event_name,a.attribute,a.description,f,!1);a.sensor_of?c.UTILITIES.set_timeout(function(){d.set_sensor_of(c.UTILITIES.create_from_json(a.sensor_of,k));d.set_active(a.active)}):d.set_active(a.active);0<f.length&&setTimeout(function(){f.forEach(function(a){b(a.get_widget(),d)})},500);return d};return n}(window.TOONTALK);
window.TOONTALK.sensor_backside=function(c){return{create:function(n){var b=c.UTILITIES.create_text_input(n.get_event_name(),"toontalk-sensor-event-name-input","Event name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;","Type here the event name.","https://developer.mozilla.org/en-US/docs/Web/Events/"+n.get_event_name()),a=c.UTILITIES.create_text_input(n.get_attribute(),"toontalk-sensor-event-attribute-input","Event attribute","Type here the event attribute name.","https://developer.mozilla.org/en/docs/Web/API/Event"),
k=c.UTILITIES.create_check_box(n.get_active(),"toontalk-sensor-active-check-box","Listening to events","Check the box if you want to make this sensor active."),f=c.nest_backside.create(n),d=f.get_element(),r=$(d).find(".toontalk-settings-backside-button").get(0);b.button.addEventListener("change",function(){n.set_event_name(b.button.value.trim())});a.button.addEventListener("change",function(){n.set_attribute(a.button.value.trim())});$(k.button).click(function(a){var b=k.button.checked;n.set_active(b);
c.robot.in_training&&c.robot.in_training.edited(robot,{setter_name:"set_active",argument_1:b,toString:"change to "+(b?"active":"inactive")+" of the "+n,button_selector:".toontalk-sensor-active-check-box"});n.render();a.stopPropagation()});d.insertBefore(b.container,r);d.insertBefore(a.container,r);d.insertBefore(k.container,r);return f}}}(window.TOONTALK);window.TOONTALK.tool=function(c){return{add_listeners:function(n,b){var a,k,f,d,r,g=function(b){var g=n.getBoundingClientRect();k=c.UTILITIES.get_mouse_or_first_touch_event_attribute("clientX",b)-g.left;f=c.UTILITIES.get_mouse_or_first_touch_event_attribute("clientY",b)-g.top;d=g.height;b.preventDefault();$(n).addClass("toontalk-tool-held");a=$(n).offset();document.addEventListener("mousemove",l);document.addEventListener("touchmove",l);document.addEventListener("mouseup",x);document.addEventListener("touchend",
x);c.debugging&&0===c.debugging.indexOf("touch")&&(c.debugging+="\nmouse_down at "+Date.now());$(".ui-tooltip").each(function(){$(this).hide()})},l=function(a){var b=c.UTILITIES.find_widget_on_page(a,n,k,f-d/2),g,l,x;a.preventDefault();$(".ui-tooltip").each(function(){$(this).hide()});l=h(a);x=c.UTILITIES.get_mouse_or_first_touch_event_attribute("pageX",a)-l.deltaX-k;a=c.UTILITIES.get_mouse_or_first_touch_event_attribute("pageY",a)-l.deltaY-f;n.style.left=x+"px";n.style.top=a+"px";c.debugging&&0===
c.debugging.indexOf("touch")&&(c.debugging+="\nmouse_move at "+Date.now()+" now at "+n.style.left+", "+n.style.top);if(b&&b.is_top_level())r&&(c.UTILITIES.remove_highlight(),r=void 0);else{if(b&&(g=b.get_frontside_element(),g===r))return;r=g;c.UTILITIES.highlight_element(r)}},x=function(g){var h=c.UTILITIES.find_widget_on_page(g,n,k,f-d/2),q;g.preventDefault();r&&c.UTILITIES.remove_highlight();h&&h.top_level_widget&&(q=h.top_level_widget(),b.apply_tool(h,g),q.backup_all());!h&&b.nothing_under_tool&&
b.nothing_under_tool();$(n).removeClass("toontalk-tool-held");$(n).addClass("toontalk-tool-returning");c.UTILITIES.add_one_shot_event_handler(n,"transitionend",1E3,function(){$(n).removeClass("toontalk-tool-returning")});c.UTILITIES.set_timeout(function(){n.style.left=a.left+"px";n.style.top=a.top+"px"});document.removeEventListener("mousemove",l);document.removeEventListener("touchmove",l);document.removeEventListener("mouseup",x);document.removeEventListener("touchend",x);c.debugging&&0===c.debugging.indexOf("touch")&&
(c.debugging+="\nmouse_up at "+Date.now(),alert(c.debugging),c.debugging="touch")},h=function(a){var b=0,c=0;20>a.clientX?b=-20:a.clientX+20>window.innerWidth&&(b=20);20>a.clientY?c=-20:a.clientY+20>window.innerHeight&&(c=20);window.scrollBy(b,c);return{deltaX:b,deltaY:c}};n.addEventListener("mousedown",g);n.addEventListener("touchstart",g)}}}(window.TOONTALK);window.TOONTALK.vacuum=function(c){var n=Object.create(null),b={suck:"Drag this vacuum over the thing you want to remove.\nType 'e' to switch to erasing, type 'r' to swich to restoring, or 'a' for removing all.\nOr click to switch modes.",erase:"Drag this vacuum over the thing you want to erase (or un-erase).\nType 's' to switch to sucking, type 'r' to switch to restoring, or 'a' for removing all.\nOr click to switch modes.",restore:"Drag this over the work area. Each time you release it a widget is restored.\nType 's' to switch to sucking, type 'e' to swich to erasing, or 'a' for removing all.\nOr click to switch modes.",
suck_all:"Drag this over the work area and click. Everything will be removed.\nType 'r' to switch to restoring, type 'e' to switch to erasing, or type 's' to switch to sucking.\nOr click to switch modes."},a={suck:"toontalk-vacuum-s",erase:"toontalk-vacuum-e",restore:"toontalk-vacuum-r",suck_all:"toontalk-vacuum-a"},k={suck:"erase",erase:"restore",restore:"suck_all",suck_all:"suck"};n.create=function(){var f,d,n,g=[],l=function(b){n!==b&&(n=b,$(f).removeClass(d),d=a[n],$(f).addClass(d),x())},x=function(){f.title=
"restore"===n&&0===g.length?"The vacuum is empty.\nType 's' to switch to sucking, or type 'e' to switch to erasing, or 'a' to remove all.":b[n]};return{apply_tool:function(a,b){var d=function(a){var e;a.is_backside()?a.hide_backside():(c.robot.in_training&&b&&c.robot.in_training.removed(a),a===c.robot.in_training?(a.training_finished(),a.set_run_once(!0)):(e=a.copy(),e.save_dimensions_of(a),g.push(e),a.set_running&&a.set_running(!1),a.remove(b)))},l,k;"suck"===n?a.remove&&"top-level"!==a.get_type_name()&&
d(a):"erase"===n||"restore"===n&&a.get_erased&&a.get_erased()?"top-level"!==a.get_type_name()&&(l=!a.get_erased(),a.set_erased(l,!0),c.robot.in_training&&b&&c.robot.in_training.set_erased(a,l)):"restore"===n?0<g.length&&(l=g.pop(),l.restore_dimensions(),k=a.add_to_top_level_backside(l,!0),l=$(f).offset(),l.left-=$(k).width(),c.UTILITIES.set_absolute_position($(k),l)):"suck_all"===n&&(l=a.top_level_widget(),l=l.get_backside_widgets().slice(),l.forEach(function(a){a.get_widget()!==c.robot.in_training&&
d(a)}))},nothing_under_tool:function(){l(k[n])},get_element:function(){f||(f=document.createElement("div"),$(f).addClass("toontalk-vacuum"),c.tool.add_listeners(f,this),l("suck"),document.addEventListener("keyup",function(a){a=String.fromCharCode(a.keyCode);"s"===a||"S"===a?l("suck"):"e"===a||"E"===a?l("erase"):"r"===a||"R"===a?l("restore"):"a"!==a&&"A"!==a||l("suck_all")}),x());return f}}};c.creators_from_json.vacuum=function(a,b){var k=c.vacuum.create();a.mode&&c.UTILITIES.set_timeout(function(){k.set_mode(a.mode)});
return k};return n}(window.TOONTALK);window.TOONTALK.wand=function(c){var n=Object.create(null);n.create=function(){var b;return{apply_tool:function(a){"top-level"!==a.get_type_name()&&a.add_copy_to_container()},get_element:function(){b||(b=document.createElement("div"),$(b).addClass("toontalk-wand"),b.title="Drag this magic wand over the thing you want to copy.",c.tool.add_listeners(b,this));return b}}};c.creators_from_json.wand=function(){return c.wand.create()};return n}(window.TOONTALK);window.TOONTALK.SETTINGS=function(c){var n=[],b=function(b,d,r){var g=[],l=c.UTILITIES.create_local_files_table(),x=function(d,g){var l=function(a){a||g.newPanel.appendChild(c.UTILITIES.create_text_element("Error connecting to cloud"))},k=g.newPanel.is(".dataTable");$(".dataTables_info").hide();$(".dataTables_wrapper").hide();g.newPanel.is(".toontalk-programs-in-cloud-table")?k?($("#tab-1_info").show(),$("#tab-1_wrapper").show()):a(g.newPanel,"program",b,r,l):g.newPanel.is(".toontalk-pages-in-cloud-table")?
k?($("#tab-2_info").show(),$("#tab-2_wrapper").show()):a(g.newPanel,"page",b,r,l):($("#tab-0_info").show(),$("#tab-0_wrapper").show())};g[0]="Programs stored in browser";n[0]=l;d?(g[1]="Programs in cloud",n[1]=c.UTILITIES.create_file_data_table("toontalk-programs-in-cloud-table"),g[2]="Published pages",n[2]=c.UTILITIES.create_file_data_table("toontalk-pages-in-cloud-table"),d=c.UTILITIES.create_tabs(g,n),r.appendChild(d),$(d).on("tabsactivate",x)):r.appendChild(c.UTILITIES.create_tabs(g,n));$(l).on("draw.dt",
function(){k(b,l,!1,r)})},a=function(a,b,n,g,l){c.google_drive.get_toontalk_files(!1,b,function(x){var h;"string"===typeof x?h=x:x.error&&(h=x.error.message);h?"Need to authorize"===h||"Login Required"===h?c.google_drive.authorize(l):(console.log(h),console.log("Google drive status: "+c.google_drive.get_status()),l(null)):(h="program"===b&&"toontalk-file-load-button toontalk-file-load-button-without-click-handler",c.UTILITIES.become_file_data_table(a,x.items,!0,h),a.on("draw.dt",function(){k(n,a.get(0),
!0,g)}),l(a.get(0)))})},k=function(a,b,c,g){$(b).find(".toontalk-file-load-button-without-click-handler").click(function(b){var d=function(){$(g).remove()},h=function(){a.set_setting("program_name",b.target.textContent);a.load(c,d)}.bind(this);a.save(!0,void 0,h)}).removeClass("toontalk-file-load-button-without-click-handler")};return{open:function(a){var d=document.createElement("div"),k=a.get_backside_element(),g=a.get_setting("program_name"),l=c.UTILITIES.create_text_input(g,"toontalk-program-name-input",
"Current program name:","Edit this to change the name of your program","docs/manual/settings.html"),n=c.UTILITIES.create_close_button(function(){$(d).remove()},"Click to close the settings panel."),h=c.UTILITIES.create_text_element("How should your program be saved?"),u=c.UTILITIES.create_check_box(a.get_setting("auto_save_to_google_drive"),"toontalk-save-setting","Save automatically to my Google Drive",'Check this if you want your programs automatically saved to a "ToonTalk Programs" folder in your Google Drive.'),
v=c.UTILITIES.create_check_box(a.get_setting("auto_save_to_local_storage"),"toontalk-save-setting","Save automatically to this browser's local storage","Check this if you want your programs automatically saved in this browser's local storage."),q=c.UTILITIES.create_button("Save to Google Drive now","toontalk-save-button","Click to save your program now to your Google Drive account.",function(){a.save(!0,{google_drive:!0})}),B=c.UTILITIES.create_button("Save to browser's storage now","toontalk-save-button",
"Click to save your program now to this browser's local storage.",function(){a.save(!0,{local_storage:!0})}),C=c.UTILITIES.create_button("Login to Google","toontalk-google-login-button","Click to log in to Google to authorize use of your Google Drive.",function(){c.google_drive.authorize(function(){$(C).remove()})}),e=c.UTILITIES.create_button("Publish","toontalk-publish-button","Click to publish your program by generating a Google Drive URL.",function(){c.UTILITIES.display_message("Creating your web page...");
a.publish(z,p.button.checked)}),p=c.UTILITIES.create_check_box(a.get_setting("publish_as_workspace"),"toontalk-publish-setting","As a workspace","Check this if you want to publish the workspace and its widgets. Uncheck it you wish to publish just the widgets."),z=function(b,e){var d=document.createElement("span"),g=c.google_drive.google_drive_url(b.id);c.TRANSLATION_ENABLED&&(g=c.UTILITIES.add_URL_parameter(g,"translate","1"));d.innerHTML="Published: <a href='"+g+"' target='_blank'>"+a.get_setting("program_name")+
"</a>";c.UTILITIES.display_message("Your web page is ready for you to edit. Just click on the link.");$(l.container).children("tr").append(c.UTILITIES.create_table_entry(d))},A=document.createElement("div"),H=c.google_drive&&"undefined"!==typeof gapi?c.google_drive.get_status():"Google Drive API not loaded",y=!0,M=c.UTILITIES.create_vertical_table(e,p.container);$(d).addClass("toontalk-settings-panel").css({width:$(k).width()+29,height:$(k).height()+50,left:-2,top:-25,"z-index":c.UTILITIES.next_z_index()});
d.appendChild(n);l.button.addEventListener("change",function(){var b=l.button.value.trim();g!==b&&a.save(!0,void 0,function(){g=b;a.set_setting("program_name",b);a.load(!0,function(){setTimeout(function(){$(d).css({"z-index":c.UTILITIES.next_z_index()})},500)},function(){a.save(!0,void 0,function(){$(".toontalk-settings-panel").remove();c.UTILITIES.display_message("Your program was copied and the new copy's name is '"+a.get_setting("program_name")+"'.")})})})});u.button.addEventListener("click",function(b){a.save(!0,
{auto_save_to_google_drive:v.button.checked,gooogle_drive:!0});a.set_setting("auto_save_to_google_drive",u.button.checked);u.button.checked?$(q).hide():$(q).show()});v.button.addEventListener("click",function(b){a.save(!0,{auto_save_to_local_storage:v.button.checked,local_storage:!0});a.set_setting("auto_save_to_local_storage",v.button.checked);v.button.checked?$(B).hide():$(B).show()});p.button.addEventListener("click",function(b){a.set_setting("publish_as_workspace",p.button.checked)});d.appendChild(A);
$(h).css({"font-weight":"bold","font-size":24,color:"navy"});A.appendChild(h);A.appendChild(l.container);A.appendChild(u.container);A.appendChild(v.container);u.container.appendChild(c.UTILITIES.create_space());u.container.appendChild(q);a.get_setting("auto_save_to_google_drive")&&$(q).hide();v.container.appendChild(c.UTILITIES.create_space());v.container.appendChild(B);a.get_setting("auto_save_to_local_storage")&&$(B).hide();"Need to authorize"===H?(u.container.appendChild(c.UTILITIES.create_space()),
u.container.appendChild(C)):"Authorized"!==H&&"Ready"!==H&&"Authorized but not yet ready"!==H&&(y=!1,a.set_setting("google_drive_unavailable",!0),setTimeout(function(){u.button.disabled=!0;$(e).button("option","disabled",!0);$(q).button("option","disabled",!0);u.container.title="Inactivated because attempt to connect to Google Drive returned: "+H;e.title=u.container.title;q.title=u.container.title},1));$(l.container).children("tr").append(c.UTILITIES.create_table_entry(M));b(a,y,d);k.appendChild(d)}}}(window.TOONTALK);
window.TOONTALK.DEFAULT_SETTINGS={program_name:"My first program",auto_save_to_google_drive:!0,auto_save_to_local_storage:!0};window.TOONTALK.DISPLAY_UPDATES=function(c){var n=[];return{pending_update:function(b){0<=n.indexOf(b)||n.push(b)},update_display:function(){var b,a;0!==n.length&&(b=n,a=function(b,c){$(b).children().each(function(b,k){$(k).css({"z-index":c+1});a(k,c+1)})},n=[],b.forEach(function(b){var f=b.get_frontside_element&&b.get_frontside_element(),d,n,g;b.update_display();d=$(f).parent().closest(".toontalk-side");d.is("*")&&(n=c.UTILITIES.get_style_numeric_property(f,"z-index"),g=c.UTILITIES.get_style_numeric_property(d.get(0),
"z-index"),g||(g=c.UTILITIES.next_z_index(),d.css({"z-index":g})),!n||d.is(".toontalk-top-level-backside")?(n=c.UTILITIES.next_z_index(),$(f).css({"z-index":n})):n>=g&&(n=g+1,$(f).css({"z-index":n})),a(f,n));f&&!$(f).is(".toontalk-top-level-resource, .toontalk-bird, .toontalk-nest, .toontalk-box-hole, .toontalk-plain-text-element, .toontalk-conditions-contents, .toontalk-robot, .toontalk-widget, .toontalk-held-by-robot")&&c.UTILITIES.set_timeout(function(){d.is(".toontalk-box-hole")?$(f).is(".ui-resizable")&&
$(f).resizable("destroy"):$(f).is(".ui-resizable")||c.UTILITIES.make_resizable($(f),b)})}))},run_cycle_is_over:function(){this.update_display()}}}(window.TOONTALK);window.TOONTALK.actions=function(c){c.creators_from_json.body=function(n,b){var a=c.actions.create();b.body=a;a.initialise_steps(c.UTILITIES.create_array_from_json(n.steps,b));return a};return{create:function(n){var b=Object.create(this),a=[];n||(n=[]);b.copy=function(){return c.actions.create(c.UTILITIES.copy_array(n))};b.get_steps=function(){return n};b.initialise_steps=function(a){n=a};b.is_empty=function(){return 0===n.length};b.reset_steps=function(){n=[];this.reset_newly_created_widgets()};
b.reset_newly_created_widgets=function(){a=[]};b.add_step=function(a,b){n.push(a);b&&this.add_newly_created_widget(b)};b.add_newly_created_widget_if_new=function(b){0<=a.indexOf(b)||this.add_newly_created_widget(b)};b.add_newly_created_widget=function(b){c.debugging&&0<=a.indexOf(b)?console.log("add_newly_created_widget called with not new widget."):a.push(b)};b.get_newly_created_widgets=function(){return a};b.get_path_to=function(b,f){var d,n;a.some(function(a,l){if(a===b)return d=c.newly_created_widgets_path.create(l),
!0;if(a.get_path_to&&(n=a.get_path_to(b,f)))return d=c.newly_created_widgets_path.create(l),d.next=n,!0});return d};b.dereference=function(b){c.debugging&&!a[b]&&c.UTILITIES.report_internal_error("Expected to find the "+c.UTILITIES.ordinal(b)+" newly created widget.");return a[b]};return b},run_unwatched:function(c,b,a,k,f){var d=this.get_steps();f||(f=0);k.run_next_step=function(){if(f<d.length){var r=d[f];f++;r.run_unwatched(c,b,k)}else k.get_first_in_team().set_running_or_waiting(!1),k.get_run_once()?
k.set_running(!1):k.get_first_in_team().run(c,b,a)};k.run_next_step()},run_watched:function(n,b,a,k){var f=this.get_steps(),d=k.get_frontside_element();k.get_parent_of_frontside()||(n.get_backside_element().appendChild(d),n.add_backside_widget(k),k.update_display());var r=d.parentElement,g=function(){var e=k.visible();e&&($(d).addClass("toontalk-side-animating"),c.UTILITIES.set_position_relative_to_top_level_backside($(d),x));setTimeout(function(){e&&(r.appendChild(d),c.UTILITIES.set_absolute_position($(d),
x),k.set_animating(!1));k.get_first_in_team().set_running_or_waiting(!1);k.get_run_once()?k.set_running(!1):k.stopped()||k.get_first_in_team().run(n,b,a);k.rerender()},1E3)},l=0,x=$(d).offset(),h=$(d).position(),u=$(d).width(),v=$(d).height(),q=$(d).closest(".toontalk-backside"),B=q.get(0).getBoundingClientRect(),C=$(d).closest(".toontalk-top-level-backside").offset(),e=n.get_backside();0===u&&($(d).css({width:"",height:""}),u=$(d).width(),v=$(d).height());C||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),
C={left:0,top:0});if(x.left<B.left-C.left||x.top<B.top-C.top||x.left+u>B.right+C.left||x.top+v>B.bottom+C.top)x=q.offset(),x.left+=q.width()/2,x.top+=q.height()-v;k.start_position=h;k.run_next_step=function(){e&&e.visible()?setTimeout(function(){if(l<f.length){var a=f[l];l++;a.run_watched(n,b,k);k.get_thing_in_hand()&&(k.get_thing_in_hand().save_dimensions(),k.render())}else g()},500):(k.set_animating(!1),$(d).css({width:"",height:""}),d.style.left=h.left+"px",d.style.top=h.top+"px",r.appendChild(d),
this.run_unwatched(n,b,a,k,l))}.bind(this);k.set_animating(!0,x);k.run_next_step();return!0},toString:function(c){for(var b="",a=this.get_steps().map(function(a){return a.toString(c)});""===a[a.length-1];)a.pop();a.forEach(function(c,f){b+=c;b=f===a.length-2?b+" and \n":f<a.length-2?b+", \n":b+"."});return b},get_json:function(n){return{type:"body",steps:c.UTILITIES.get_json_of_array(this.get_steps(),n)}}}}(window.TOONTALK);
window.TOONTALK.newly_created_widgets_path=function(c){c.creators_from_json.newly_created_widgets_path=function(n){return c.newly_created_widgets_path.create(n.index)};return{create:function(n){return{dereference:function(b,a,k){b=k.get_body().dereference(n);if(this.next)return c.path.dereference_path(this.next,b,a,k);this.removing_widget&&(a=b.get_parent_of_frontside())&&a.removed_from_container&&k.remove_from_container(b,a);return b},toString:function(){return"the "+c.UTILITIES.ordinal(n)+" new widget"},
get_json:function(){return{type:"newly_created_widgets_path",index:n}}}}}}(window.TOONTALK);window.TOONTALK.robot_action=function(c){var n={copy:function(a,b,c,d){d.add_newly_created_widget(a.copy());return!0},"pick up":function(a,b,c,d){d.set_thing_in_hand(a);return!0},"pick up a copy of":function(a,b,c,d){a=a.copy();d.add_newly_created_widget(a);d.set_thing_in_hand(a);return!0},"drop it on":function(a,b,d,f,k){if(a)if(b=f.get_thing_in_hand()){if(b.drop_on)return c.debugging&&b===a&&console.error("Dropping something on itself!"),b.drop_on(a,!1,void 0,f),f.set_thing_in_hand(void 0),a.visible&&
a.visible()&&a.render(),b.robot_waiting_before_next_step===f?(k&&k.running_watched||(b.robot_waiting_before_next_step=void 0),!1):!0;c.UTILITIES.report_internal_error("Thing in robot's hand ("+b+") doesn't handle 'drop_on'. Robot that "+f)}else c.UTILITIES.report_internal_error("The robot that '"+f.toString()+"' is executing drop_on but has nothing in its hand.");else c.UTILITIES.report_internal_error("The robot that '"+f.toString()+"' is executing drop_on but doesn't know where to drop what its holding")},
remove:function(a,b,c,d){a.remove();a===d&&d.set_stopped(!0);return!0},erased_widget:function(a,b,c,d,f){a.set_erased(f.erased);return!0},edit:function(a,b,d,f,k){if(a[k.setter_name])return k.argument_2?a[k.setter_name].call(a,k.argument_1,k.argument_2,a.visible()):a[k.setter_name].call(a,k.argument_1,a.visible()),!0;c.UTILITIES.report_internal_error(a+" cannot be edited.")},"add to the top-level backside":function(a,b,c,d,f){d.visible()||(d=a.get_frontside_element(!0),c=$(b.get_frontside_element()).position(),
b=$(b.get_frontside_element()).closest(".toontalk-top-level-backside").get(0)||$(d).closest(".toontalk-top-level-backside").get(0),$(d).css({left:c.left,top:c.top}),b.appendChild(d),b.toontalk_widget.add_backside_widget(a),a.animate_to_element(b));return!0},"add a new widget to the work space":function(a,b,d,f,k){b.is_top_level()?(b=f.add_to_top_level_backside(a),f=$(f.get_frontside_element()).offset(),a.update_display(),c.UTILITIES.set_position_relative_to_top_level_backside($(b),f,!0)):a.drop_on(b.get_backside(),
!1,void 0,f,!0);return!0}},b=function(a,b,c,d,f){b=d.get_thing_in_hand();d.get_frontside_element();var k=a.get_element();c=$(k).width()/2;k=$(k).height()/2;d.animate_to_widget(a,f,.25,c,k);b&&d.render()},a=function(a,b){var c=a.get_backside_element(!0);return $(c).find(b).get(0)},k=function(b,c,d,f,k,n,q,r){var C=a(b,n),e=f.get_frontside_element(),p=C&&$(C).is(":visible"),z=function(){k();$(C).addClass("ui-state-active");if(".toontalk-select-function"===n||".toontalk-box-size-input"===n)C.value=q.argument_1;
setTimeout(function(){$(C).removeClass("ui-state-active");!p&&b.get_backside()&&b.get_backside().hide_backside();f.run_next_step()},r)};c=function(){!$(C).is(":visible")&&A&&A.set_advanced_settings_showing(!0,A.get_element());f.animate_to_element(C,z,.25,0,-$(e).height())};var A;!p&&b.open_backside?A=b.open_backside(c):c()},f=function(a,b,c,d,f,k){d.get_frontside_element();d.carrying_tool=k;d.update_display();d.animate_to_element(a.get_frontside_element(),function(){d.carrying_tool=void 0;d.update_display();
f();d.run_next_step()},.25,0,0)},d=function(a,b,c,d,k){var n=a.get_parent_of_frontside();f(a,b,c,d,function(){k();n&&"top-level"!==n.get_widget().get_type_name()&&n.update_display&&n.update_display();a.render()},"toontalk-vacuum-ready-small")},r={copy:function(a,b,c,d,k){f(a,b,c,d,function(){k();a.add_copy_to_container(d.get_recently_created_widget())},"toontalk-wand-small")},"pick up":function(a,d,f,h,k){var n=a.get_frontside_element(),q=function(){k();h.run_next_step()};"empty hole"===a.get_type_name()?
c.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):a.save_dimensions()?($(n).css({width:n.offsetWidth+"px",height:n.offsetHeight+"px"}),b(a,d,f,h,q)):q()},"pick up a copy of":function(a,c,d,f,k){b(a,c,d,f,function(){k();f.get_recently_created_widget().set_visible(!0);f.update_display();f.run_next_step()})},"drop it on":function(a,d,f,h,k){var n=h.get_thing_in_hand(),q,r;n?(c.debugging&&n===a&&console.error("Dropping something on itself!"),q=$(n.get_frontside_element()),r=
function(){var a=q.offset(),b;q.removeClass("toontalk-held-by-robot");k();n.drop_on&&(q.is(":visible")||(b=$(h.get_frontside_element()).closest(".toontalk-top-level-backside"),b.append(q.get(0))),c.UTILITIES.set_absolute_position(q,a),n.restore_dimensions(),n.robot_waiting_before_next_step!==h&&(h.set_thing_in_hand(void 0),h.run_next_step()),h.rerender())},a.is_backside()&&!$(a.get_element()).is(":visible")?a.get_widget().open_backside(function(){b(a,d,f,h,function(){r();a.hide_backside()})}):b(a,
d,f,h,r)):(c.UTILITIES.report_internal_error("Expected the robot to be holding something."),console.log("The robot is "+h),b(a,d,f,h,k))},remove:d,erased_widget:d,edit:function(a,b,c,d,f,n){k(a,b,c,d,function(){a.get_backside()&&a.get_backside().update_display();f()},n.button_selector,n,1E3)},"add to the top-level backside":function(a,b,c,d,f){f();d.run_next_step()},"add a new widget to the work space":function(a,b,d,f,n,r){r&&r.button_selector?(a=c.path.dereference_path(r.path_to_source,b,d,f),k(a,
b,d,f,n,r.button_selector,r,3E3)):(n(),f.run_next_step())}};c.creators_from_json.robot_action=function(a,b){return a.additional_info?c.robot_action.create(c.path.create_from_json(a.path,b),a.action_name,c.UTILITIES.create_keys_from_json(a.additional_info,b)):c.robot_action.create(c.path.create_from_json(a.path,b),a.action_name)};return{create:function(a,b,d){var f=Object.create(this),k=n[b],v=r[b];v||(v=function(a,b,c,e,d){setTimeout(function(){continuation(a)},3E3)});a||c.UTILITIES.report_internal_error("path undefined in "+
b+" action");k||c.UTILITIES.report_internal_error("no run_function for "+b);f.run_unwatched=function(b,f,h){var e=c.path.dereference_path(a,b,f,h);if(!e)return c.UTILITIES.report_internal_error("Unable to dereference path: "+c.path.toString(a)+" in context: "+b.toString()),!1;e.wait_until_this_nest_receives_something?e.wait_until_this_nest_receives_something.run_when_non_empty(function(){this.run_unwatched(b,f,h)}.bind(this),h):k(e,b,f,h,d)&&h.run_next_step()};f.run_watched=function(b,f,h){var e=
c.path.dereference_path(a,b,f,h),p=function(){d||(d={});d.running_watched=!0;k(e,b,f,h,d)};e?e.wait_until_this_nest_receives_something?(e.wait_until_this_nest_receives_something.run_when_non_empty(function(){h.set_waiting(!1);this.run_watched(b,f,h)}.bind(this),h),h.set_waiting(!0)):(e.set_visible(!0),v(e,b,f,h,p,d)):c.UTILITIES.report_internal_error("Unable to dereference the path: "+c.path.toString(a)+" in context: "+b.toString())};f.toString=function(f){var h="";if("add a new widget to the work space"===
b)return b.replace("a new widget",c.path.toString(a));if("add to the top-level backside"===b)return"";"edit"===b&&(h=" ("+d.toString+")");return b+" "+c.path.toString(a,f)+h};f.get_json=function(f){return{type:"robot_action",action_name:b,path:c.path.get_json(a,f),additional_info:d&&c.UTILITIES.get_json_of_keys(d)}};return f}}}(window.TOONTALK);window.TOONTALK.queue=function(c){return{create:function(){var n=Object.create(this);n.to_run=c.UTILITIES.create_queue();return n},enqueue:function(n){if(c.debugging&&this.to_run.does_any_item_satisfy(function(b){return b.robot===n.robot}))console.error("The same robot is being queued twice.\nRobot is: "+n.robot.debug_id);else return this.to_run.enqueue(n)},maximum_run:50,paused:!1,run:function(){for(var n,b=Date.now()+this.maximum_run;!(this.to_run.isEmpty()||this.paused||Date.now()>=b);)n=this.to_run.dequeue(),
n.robot.run_actions(n.context,n.top_level_context,n.queue);c.DISPLAY_UPDATES.run_cycle_is_over();c.UTILITIES.set_timeout(function(){this.run()}.bind(this),this.to_run.isEmpty()?this.maximum_run:0)}}}(window.TOONTALK);window.TOONTALK.path=function(c){var n;c.creators_from_json["path.to_entire_context"]=function(){return c.path.to_entire_context()};c.creators_from_json["path.to_widget_on_nest"]=function(){return c.path.to_widget_on_nest()};c.creators_from_json["path.top_level_backside"]=function(){return c.path.top_level_backside};c.creators_from_json["path.to_backside_widget_of_context"]=function(b){return c.path.get_path_to_backside_widget_of_context(b.type_name)};c.creators_from_json["path.to_resource"]=function(b,
a){return c.path.get_path_to_resource(c.UTILITIES.create_from_json(b.resource,a))};return{get_path_to:function(b,a){var k=function(a,b){var k=b.get_context(),g=b.get_body(),l,n,h;a.is_backside()&&(h=!0,a=a.get_widget());if(k===a)return l=c.path.to_entire_context(),l.is_backside=h,l;n=a.get_type_name();if("top-level"===n)return c.path.top_level_backside;if(l=g.get_path_to(a,b))return l.is_backside=h,l;if("element attribute"===n&&a.get_original_attribute_widget()===a)return l=c.element.create_attribute_path(a,
b),l.is_backside=h,l;if(c.debugging&&!k)c.UTILITIES.report_internal_error("No context to compute the path");else{if(k.get_path_to&&(g=k.get_path_to(a,b)))return g.is_backside=h,l=c.path.to_entire_context(),l.next=g,l;k.backside_widgets.some(function(g){g=g.get_widget();var k;if(g===a||g.top_contents_is&&g.top_contents_is(a))return l=c.path.get_path_to_backside_widget_of_context(g.get_type_name()),l.is_backside=h,b.add_to_backside_conditions(g),!0;if(g.get_path_to&&(k=g.get_path_to(a,b)))return k.is_backside=
h,l=c.path.get_path_to_backside_widget_of_context(g.get_type_name()),l.next=k,b.add_to_backside_conditions(g),!0});if(l)return l.is_backside=h,l;l=c.path.get_path_to_resource(a.copy());l.is_backside=h;return l}}(b,a);k&&b.dereference_contents&&(c.path.path_end(k).not_to_be_dereferenced=!0);!k||"pick up"!==a.current_action_name&&"remove"!==a.current_action_name||(c.path.path_end(k).removing_widget=!0);return k},path_end:function(b){for(;b.next;)b=b.next;return b},dereference_path:function(b,a,c,f){var d;
b?b.dereference?d=b.dereference(a,c,f):a.dereference&&(d=a.dereference(b,c,f)):d=a;return d&&b.is_backside?d.get_backside(!0):d},continue_dereferencing_path:function(b,a,c,f){return b.next?a.dereference_contents&&!b.next.not_to_be_dereferenced?(a=a.dereference_contents(b.next,c,f))&&b.is_backside?a.get_backside(!0):a:(a=a.dereference(b.next,c,f))&&b.next.is_backside?a.get_backside(!0):a:a.dereference_contents&&!b.not_to_be_dereferenced?(a=a.dereference_contents(b,c,f))&&b.is_backside?a.get_backside(!0):
a:a},toString:function(b,a){var k="";b.is_backside&&(k="the backside of ");return b.next?(c.path.toString(b.next,a),k+c.path.toString(b.next,a).trim()+" of "+b.toString(a)):k+b.toString(a)},get_json:function(b,a){var k;if(!b.get_json)return b;k=b.get_json(a);b.next&&(k.next_path=c.path.get_json(b.next,a));b.removing_widget&&(k.removing_widget=!0);b.not_to_be_dereferenced&&(k.not_to_be_dereferenced=!0);b.is_backside&&(k.is_backside=!0);return k},to_entire_context:function(){return{dereference:function(b,
a,k){return c.path.continue_dereferencing_path(this,b,a,k)},toString:function(b){return b&&b.robot?b.robot.get_top_level_context_description():"what he's working on"},get_json:function(){return{type:"path.to_entire_context"}}}},to_widget_on_nest:function(){return{dereference:function(b,a,k){return c.path.continue_dereferencing_path(this,b,a,k)},toString:function(){return"what is on the nest"},get_json:function(){return{type:"path.to_widget_on_nest"}}}},get_path_to_resource:function(b){b=b.get_widget();
return{dereference:function(a,k,f){a=b.copy();var d,n,g;f.add_newly_created_widget(a);f.visible()&&!b.visible()&&(d=c.UTILITIES.find_resource_equal_to_widget(b))&&(g=a.get_frontside_element(),n=$(d).position(),c.UTILITIES.set_timeout(function(){$(g).css({left:n.left,top:n.top,width:d.offsetWidth,height:d.offsetHeight})}));return a},toString:function(){return c.UTILITIES.add_a_or_an(b.toString())},get_json:function(){return{type:"path.to_resource",resource:c.path.get_json(b,c.UTILITIES.fresh_json_history())}}}},
get_path_to_backside_widget_of_context:function(b){return{dereference:function(a,k,f){var d;a.backside_widgets.some(function(a){if(a.get_widget().is_of_type(b))return d=a.get_widget(),!0});if(d)return c.path.continue_dereferencing_path(this,d,k,f)},toString:function(){var a="the "+b+" on the back of what he's working on";return this.removing_widget?"what is on "+a:a},get_json:function(){return{type:"path.to_backside_widget_of_context",type_name:b}}}},create_from_json:function(b,a){var k=c.UTILITIES.create_from_json(b,
a);b.next_path&&(k.next=this.create_from_json(b.next_path,a));b.removing_widget&&(k.removing_widget=!0);b.not_to_be_dereferenced&&(k.not_to_be_dereferenced=!0);b.is_backside&&(k.is_backside=!0);return k},top_level_backside:{dereference:function(b,a,k){if(b=b.ancestor_of_type("top-level"))return b;n||(n=c.widget.create_top_level_widget());return n},toString:function(){return"the top-level backside"},get_json:function(){return{type:"path.top_level_backside"}}}}}(window.TOONTALK);window.TOONTALK.publish=function(c){var n=function(b,a,c){var f='<!DOCTYPE html>\n<html>\n<head>\n<link rel="stylesheet" media="all" href="https://toontalk.github.io/ToonTalk/toontalk.css">\n<link href="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/css/font-awesome.min.css" rel="stylesheet" type="text/css" />\n<link href="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/css/froala_editor.min.css" rel="stylesheet" type="text/css" />\n<script src="https://toontalk.github.io/ToonTalk/compile/toontalk.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/jquery-ui-1.11.2.custom/jquery-ui.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/froala_editor.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/block_styles.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/colors.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/font_family.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/font_size.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/lists.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/tables.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/video.min.js">\x3c/script>\n<title>\n'+
b+'</title>\n<link rel="shortcut icon" href="favicon.ico" />\n</head>\n<body>\n';a.forEach(function(a,b){f+='<div class="toontalk-edit" name="content">\n'+a+"\n</div>\n";c[b]&&(f+=c[b])});return f+='<script src="https://toontalk.github.io/ToonTalk/support/published_support.js">\x3c/script>\n</body>\n</html>\n'};return{publish_widget:function(b,a,k,f){var d=c.google_drive.get_status(),r=["Edit this. Select text for formatting.","And edit this."],g=function(a){(a=a&&a.items&&0<a.items.length&&a.items[0])?
f(a,h):(a=n(b,r,h),c.google_drive.upload_file(l,"html",a,f))},l,x,h;"Ready"===d?(l=a.get_setting("program_name"),k?(x=c.UTILITIES.get_json_top_level(a),a.set_setting("program_name",l+" (published version)"),h=[c.UTILITIES.toontalk_json_div(x,a)],a.set_setting("program_name",l)):(a=a.get_backside_widgets(),h=[],a.forEach(function(a,b){a.visible()&&(x=c.UTILITIES.get_json_top_level(a),h.push(c.UTILITIES.toontalk_json_div(x,a.get_widget())),1<b&&(r[b]=r[1]))}),r.push(r[1])),c.google_drive.get_toontalk_files(c.google_drive.full_file_name(l,
"page"),"page",g)):(console.log("Unable to publish to Google Drive because: "+d),f(null))},republish:function(b){c.google_drive.insert_or_update_file(void 0,b.file_id,"page",n(b.title,b.editable_contents,b.widgets_json),function(){console.log("Published page '"+b.title+"' updated.")})}}}(window.TOONTALK);function handle_client_load(){window.TOONTALK.google_drive.handle_client_load()}
window.TOONTALK.google_drive=function(c){var n=c.GOOGLE_DRIVE_CLIENT_ID||"148386604750-704q35l4gcffpj2nn3p4ivcopl81nm27.apps.googleusercontent.com",b=c.ORIGIN_FOR_GOOGLE_DRIVE||"toontalk.github.io",a="Need to authorize",k,f;return{handle_client_load:function(d){0>window.location.href.indexOf(b)?(a="Connections to Google Drive are configured for the following domain only: "+b+".\nIf you are hosting ToonTalk elsewhere you need to set TOONTALK.GOOGLE_DRIVE_CLIENT_ID and TOONTALK.ORIGIN_FOR_GOOGLE_DRIVE",d&&
d(a)):setTimeout(function(){c.google_drive.check_authorization(d)})},check_authorization:function(b){a="Awaiting authorization";gapi.auth.authorize({client_id:n,scope:"https://www.googleapis.com/auth/drive",immediate:!0},function(a){c.google_drive.handle_authorization_result(a,b)})},handle_authorization_result:function(b,f){b&&!b.error?(a="Authorized but not yet ready",gapi.client.load("drive","v2",function(){c.google_drive.get_folder_ids(function(){a="Ready"})}),f&&f()):(a="Need to authorize",f&&
f(a))},authorize:function(a){gapi.auth.authorize({client_id:n,scope:"https://www.googleapis.com/auth/drive",immediate:!1},function(b){c.google_drive.handle_authorization_result(b,a)})},get_folder_ids:function(a){c.google_drive.get_folder_id(!0,function(b){k=b;c.google_drive.get_folder_id(!1,function(b){f=b;a()})})},get_folder_id:function(a,b){var g=a?"ToonTalk Programs":"ToonTalk Pages",l=function(f){var h=function(a){a&&a.id?b(a.id):console.error("Failure to create folder '"+g+"'. Response was "+
a)};(f=f&&f.items&&0<f.items.length&&f.items[0].id)?b(f):a?c.google_drive.create_folder("ToonTalk Programs",!1,h):c.google_drive.create_folder("ToonTalk Pages",!0,h)};a&&k?b(k):!a&&f?b(f):c.google_drive.fetch_folder_id(g,l)},get_status:function(){return a},connection_to_google_drive_possible:function(){return 0!==a.indexOf("Connections to Google Drive are configured for the following domain only: ")},list_files:function(a,b){gapi.client.request({path:"/drive/v2/files",method:"GET",params:a}).execute(b)},
fetch_folder_id:function(a,b){c.google_drive.list_files({q:"mimeType = 'application/vnd.google-apps.folder' and title ='"+a+"' and trashed = false"},b)},get_toontalk_files:function(a,b,f){"undefined"===typeof gapi?f("Google Drive API not available."):(b="properties has {key='ToonTalkType' and value='"+b+"' and visibility='PUBLIC'} and trashed = false",a&&(b+=" and title='"+a+"'"),c.google_drive.list_files({q:b},f))},get_toontalk_program_file:function(a,b){c.google_drive.list_files({q:"'"+k+"' in parents and trashed = false and title='"+
a+"'"},function(a){a&&a.items&&0<a.items.length?b(a.items[0]):b(null)})},upload_file:function(a,b,f,l){var k="json"===b?"program":"page",h=a+"."+b;c.google_drive.get_toontalk_files(h,k,function(a){gapi.client.load("drive","v2",function(){var b=a&&a.items&&0<a.items.length&&a.items[0].id;l||(l=function(a){a.error&&(console.log("Google drive status: "+c.google_drive.get_status()),"Login Required"!==a.error.message&&console.log(a.error.message));console.log("File "+a.title+" ("+a.id+") "+(b?"updated":
"created"))});b?c.google_drive.insert_or_update_file(void 0,b,k,f,l):c.google_drive.insert_or_update_file(h,void 0,k,f,l)})})},full_file_name:function(a,b){return a+"."+("program"===b?"json":"html")},insert_or_update_file:function(a,b,g,l,n){var h={title:a,mimeType:"text/html"};h.parents=[{kind:"drive#fileLink",id:"program"===g?k:f}];l="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify(h)+"\r\n---------314159265358979323846\r\nContent-Type: text/html\r\n\r\n"+
l+"\r\n---------314159265358979323846--";a?(a="/upload/drive/v2/files",h="POST"):(a="/upload/drive/v2/files/"+b,h="PUT");gapi.client.request({path:a,method:h,params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="-------314159265358979323846"'},body:l}).execute(function(a){b||c.google_drive.insert_property(a.id,"ToonTalkType",g,"PUBLIC");n&&n(a)})},create_folder:function(a,b,c){gapi.client.drive.files.insert({resource:{title:a,mimeType:"application/vnd.google-apps.folder"}}).execute(b?
function(a){gapi.client.drive.permissions.insert({fileId:a.id,resource:{value:"",type:"anyone",role:"reader"}}).execute(function(b){c(a)})}:c)},download_file:function(a,b){if(a.downloadUrl){var c=gapi.auth.getToken().access_token,f=new XMLHttpRequest;f.open("GET",a.downloadUrl);f.setRequestHeader("Authorization","Bearer "+c);f.onload=function(){b(f.responseText)};f.onerror=function(){b(null)};f.send()}else b(null)},google_drive_url:function(a){return"https://googledrive.com/host/"+a+"/"},insert_property:function(a,
b,c,f){gapi.client.drive.properties.insert({fileId:a,resource:{key:b,value:c,visibility:f}}).execute(function(a){})}}}(window.TOONTALK);function googleTranslateElementInit(){new google.translate.TranslateElement({pageLanguage:"en",layout:google.translate.TranslateElement.InlineLayout.SIMPLE},"google_translate_element")}
window.TOONTALK.UTILITIES=function(c){var n,b=100,a=(new Date).getTime(),k=function(a){var b=a.indexOf("{"),c=a.lastIndexOf("}");if(!(0>b||0>c))return a.substring(b,c+1)},f=function(a,b){var d=$(b).closest(".toontalk-side"),f=c.UTILITIES.get_mouse_or_first_touch_event_attribute("clientX",a),g=c.UTILITIES.get_mouse_or_first_touch_event_attribute("clientY",a),h,l,k;$(".ui-tooltip").remove();a.dataTransfer&&a.dataTransfer.getData("text")&&0<a.dataTransfer.getData("text").length||(n=d||$(b),l=c.UTILITIES.widget_from_jquery(n),
l||(l=c.UTILITIES.widget_of_element(b),c.UTILITIES.report_internal_error("Possible bug that "+n+" doesn't have a known owner."),n=$(b)),!l.save_dimensions||l.get_parent_of_frontside()&&!l.get_parent_of_frontside().get_widget().is_top_level()||l.save_dimensions(),l.being_dragged=!0,h=n.get(0).getBoundingClientRect(),k=n.is(".toontalk-top-level-resource"),l.get_json&&(d=c.UTILITIES.get_json_top_level(l),d.view.drag_x_offset=f-h.left,d.view.drag_y_offset=g-h.top,!d.view.frontside_width&&n.parent().is(".toontalk-backside")&&
(d.view.frontside_width=n.width(),d.view.frontside_height=n.height()),n.is(".toontalk-backside")&&(d.view.backside=!0),n.data("json",d),a.dataTransfer&&(f=c.UTILITIES.toontalk_json_div(d,l),a.dataTransfer.effectAllowed=k?"copy":"move",a.dataTransfer.setData("text",f),c.UTILITIES.is_internet_explorer()||a.dataTransfer.setData("text/html",f)),l.drag_started(d,k)),n.addClass("toontalk-being-dragged"),a.stopPropagation())},d=function(a){n||(n=$(a.target).closest(".toontalk-side"));c.UTILITIES.widget_from_jquery(n).being_dragged=
void 0;if(n.is(".toontalk-frontside"))if(n.parent().is(".toontalk-backside")){var b=n.data("json");b&&n.css({width:b.view.frontside_width,height:b.view.frontside_height})}else n.parent().is(".toontalk-top-level-resource, .toontalk-drop-area, .toontalk-json")||n.is(".toontalk-carried-by-bird, .toontalk-element-attribute, .toontalk-function-bird-documentation-bird")||c.UTILITIES.has_animating_image(n.get(0))||n.css({width:"100%",height:"100%"});u();a.stopPropagation()},r=function(a,b){var d=c.UTILITIES.data_transfer_json_object(a),
f,g,h,k,q,r,v,E,B,C;!d&&n&&(d=n.data("json"));n&&n.data("json","");f=n;u();if(f||d||a.dataTransfer.files){if($(a.target).is(".toontalk-drop-area-instructions"))h=$(a.target).parent();else if($(a.target).is(".toontalk-element-attribute-input")){if(h=$(a.target).closest(".toontalk-side"),k=c.UTILITIES.widget_from_jquery(h)){g=f?c.UTILITIES.widget_from_jquery(f):c.UTILITIES.create_from_json(d);c.UTILITIES.restore_resource(f,g);k.dropped_on_style_attribute(g,a.target.name,a);a.stopPropagation();return}}else if($(a.target).is(".toontalk-drop-area"))h=
$(a.target);else{if(d&&$(a.currentTarget).is(".froala-element")){v=d;h=c.UTILITIES.create_from_json(v);k=document.createElement("div");v=v.view.backside?h.get_backside_element(!0):h.get_frontside_element(!0);d=$(b).closest(".toontalk-edit");f=c.published_support.create_editable_text();g=a.target;$(k).addClass("toontalk-json toontalk-top-level-resource toontalk-top-level-resource-container");$(v).addClass("toontalk-top-level-resource").css({position:"relative"});v.toontalk_widget=h;k.toontalk_widget=
h;k.appendChild(v);for($(k).insertAfter(d);g.nextSibling;)$(f).children(".froala-element").get(0).appendChild(g.nextSibling);$(f).insertAfter(k);h.update_display();return}h=$(a.target).closest(".toontalk-side")}if(0!==h.length&&!h.is(".toontalk-top-level-resource")){v=h.offset();c.UTILITIES.remove_highlight();k=c.UTILITIES.widget_from_jquery(h);if(f&&0<f.length&&!(k&&k.get_infinite_stack&&k.get_infinite_stack())&&(f.get(0)===h.get(0)||jQuery.contains(f.get(0),h.get(0)))){if(f.is(".toontalk-top-level-backside"))return;
h.hide();g=c.UTILITIES.get_mouse_or_first_touch_event_attribute("pageX",a);q=c.UTILITIES.get_mouse_or_first_touch_event_attribute("pageY",a);g=document.elementFromPoint(g-window.pageXOffset,q-window.pageYOffset);h.show();g&&(h=$(g).closest(".toontalk-side"),v=h.offset(),k=c.UTILITIES.widget_from_jquery(h))}d&&d.view&&d.view.drag_x_offset?(q=d.view.drag_x_offset,r=d.view.drag_y_offset):r=q=0;if(f&&0<f.length){if(!(k&&k.get_infinite_stack&&k.get_infinite_stack()||f.get(0)!==h.get(0)&&!jQuery.contains(f.get(0),
h.get(0)))){f.css({left:f.get(0).offsetLeft+(a.layerX-q),top:f.get(0).offsetTop+(a.layerY-r)});a.stopPropagation();return}E=f.is(".toontalk-backside");g=c.UTILITIES.widget_from_jquery(f);f.parent().is(".toontalk-drop-area")?(f.removeClass("toontalk-widget-in-drop_area"),f.parent().data("drop_area_owner").set_next_robot(void 0)):(B=f.parents(".toontalk-side:first"),(C=c.UTILITIES.widget_from_jquery(B))?!E&&g.get_infinite_stack&&g.get_infinite_stack()?(B=g.saved_width,C=g.saved_height,g=g.copy(),g.saved_width=
B,g.saved_height=C,B=f.width(),C=f.height(),f=$(g.get_frontside_element(!0)),h.is(".toontalk-backside")&&f.css({width:d.view.frontside_width||B,height:d.view.frontside_height||C})):C.removed_from_container&&(B.is(".toontalk-backside")?C.remove_backside_widget(g,E,!0):(C.removed_from_container(g,E,a,void 0,!0),g.restore_dimensions&&g.restore_dimensions())):c.UTILITIES.restore_resource(f,g),c.robot.in_training&&c.robot.in_training.add_newly_created_widget_if_new(g))}else{if(0<a.dataTransfer.files.length){for(d=
0;d<a.dataTransfer.files.length;d++)x(a.dataTransfer.files[d],h,k,v,a);a.stopPropagation();return}g=c.UTILITIES.create_from_json(d,{event:a});if(!g){d?c.UTILITIES.report_internal_error("Unable to construct a ToonTalk widget from the JSON."):c.debugging&&console.log("No data transfer in drop.");a.stopPropagation();return}(E=d.view.backside)?(f=$(g.get_backside_element()),f.css({width:d.view.backside_width,height:d.view.backside_height,"background-color":d.view.background_color,"border-width":d.view.border_width}),
g.apply_backside_geometry()):f=$(g.get_frontside_element())}g!==k&&l(h,f,g,k,v,a,d,q,r,E)}}else a.dataTransfer?c.UTILITIES.report_internal_error("Drop failed since unable to parse as JSON."):c.UTILITIES.report_internal_error("Drop failed since there is no event.dataTransfer"),a.stopPropagation()},g=function(a,b){var d;d=$(b).closest(".toontalk-side");var f=c.UTILITIES.get_dragee();d=!d.is("*")||d.is(".toontalk-top-level-backside")||d.closest(".toontalk-top-level-resource").is("*")||d.is(".toontalk-being-dragged")||
f&&v(d.get(0),f.get(0))?void 0:d;if(d)return c.UTILITIES.highlight_element(d.get(0),a),d.get(0)},l=function(a,b,d,f,g,h,k,l,n,q){var r=c.UTILITIES.get_mouse_or_first_touch_event_attribute("pageX",h),u=c.UTILITIES.get_mouse_or_first_touch_event_attribute("pageY",h),v,x,B,C,X;d.set_visible(!0);if(a.is(".toontalk-backside")){if(d.is_top_level()){v=k.semantic.backside_widgets;x=k.shared_widgets;B=a.get(0);h=d.get_backside_widgets().slice();h.forEach(function(a,b){var c=a.get_widget(),e,g,h,p,k,l,n;d.remove_backside_widget(c,
a.is_backside());e=0<=v[b].widget.shared_widget_index?x[v[b].widget.shared_widget_index].view:v[b].widget.view;a.is_backside()?(g=c.get_backside_element(!0),h=e.backside_left,p=e.backside_top,k=e.backside_width,l=e.backside_height):(g=c.get_frontside_element(!0),h=e.frontside_left,p=e.frontside_top,k=e.frontside_width,l=e.frontside_height);f.add_backside_widget(c,a.is_backside());B.appendChild(g);n=$(g).position();$(g).css({left:n.left+h,top:n.top+p,width:k,height:l});a.is_backside()&&(c.backside_geometry=
e.backside_geometry,c.apply_backside_geometry())}.bind(this));return}d?f.get_backside().widget_dropped_on_me(d,q,h):c.UTILITIES.report_internal_error("No source_widget");"undefined"===typeof l&&(n=l=0,setTimeout(function(){var a=d.get_HTML(),c=b.width(),e=b.height();0<=a.indexOf("data:image")?(a=Math.min(80,c)/2,c=90,90>e&&(c-=(90-e)/2)):(a=Math.min(60,c/2),c=Math.min(30,e/2));b.css({left:C-a,top:X-c})},50));C=r-(g.left+l);X=u-(g.top+n);b.css({left:C,top:X});k&&k.semantic.running&&d.set_running(!0)}else if(a.is(".toontalk-drop-area"))b.addClass("toontalk-widget-in-drop_area"),
a.append(b.get(0)),b.is(".toontalk-robot")&&a.data("drop_area_owner").set_next_robot(c.UTILITIES.widget_from_jquery(b));else{if(b.is(".toontalk-backside-of-top-level"))return;if(f||h.changedTouches)B=a.closest(".toontalk-top-level-backside").get(0),!B&&h.changedTouches&&(g=document.elementFromPoint(r-window.pageXOffset,u-window.pageYOffset),(B=$(g).is(".toontalk-top-level-backside")?g:$(g).closest(".toontalk-top-level-backside").get(0))||(B=$(".toontalk-top-level-backside").get(0)),f=c.UTILITIES.widget_of_element(B).get_backside()),
B.appendChild(b.get(0)),g=$(B).offset(),b.css({left:r-(g.left+l),top:u-(g.top+n)}),d.drop_on&&d.drop_on(f,q,h)||f.widget_dropped_on_me&&f.widget_dropped_on_me(d,q,h)||(a=a.closest(".toontalk-top-level-backside"),0<a.length&&(f=c.UTILITIES.widget_from_jquery(a))&&f.get_backside().widget_dropped_on_me(d,q,h));else{c.UTILITIES.report_internal_error("target widget missing");return}}c.UTILITIES.remove_highlight()},x=function(a,b,d,f,g){var h=new FileReader,n=0===a.type.indexOf("image"),q,r;h.onloadend=
function(){if(n)q=c.element.create("<img src='"+h.result+"' alt='"+a.name+"'/>");else{if(r=k(h.result))try{q=c.UTILITIES.create_from_json(JSON.parse(r))}catch(u){}q||(q=c.element.create(h.result))}l(b,$(q.get_frontside_element(!0)),q,d,f,g)};n?h.readAsDataURL(a):h.readAsText(a)},h=function(a){var b=document.createElement("script");b.src=a;document.body.appendChild(b)},u=function(){n&&(n.removeClass("toontalk-being-dragged"),c.UTILITIES.set_timeout(function(){n=void 0}))},v=function(a,b){if(a===b)return!0;
if(a.parentNode)return v(a.parentNode,b)},q=[],B=[],C;window.addEventListener("message",function(a){"zero-timeout-message"===a.data&&a.source===window?(a.stopPropagation(),0<q.length&&q.shift()()):a.data.editable_contents&&c.publish.republish(a.data)},!1);$(document).ready(function(){var a;c.debugging=c.UTILITIES.get_current_url_parameter("debugging");c.UTILITIES.process_json_elements();$(document).click(function(a){$(".toontalk-top-level-resource-container").each(function(a,b){var c=b.toontalk_widget;
c&&c.set_running&&c.set_running(!1)})});c.QUEUE=window.TOONTALK.queue.create();c.QUEUE.run();window.addEventListener("beforeunload",function(a){try{c.UTILITIES.backup_all_top_level_widgets(!0)}catch(b){console.log(b)}});setTimeout(function(){$("[title]").each(function(){c.UTILITIES.use_custom_tooltip(this)})});c.TRANSLATION_ENABLED=c.UTILITIES.get_current_url_boolean_parameter("translate",!1);c.TRANSLATION_ENABLED?($("a").each(function(a,b){b.href=c.UTILITIES.add_URL_parameter(b.href,"translate",
"1")}),$("#google_translate_element").is("*")||(a=document.createElement("div"),a.id="google_translate_element",document.body.insertBefore(a,document.body.firstChild)),document.head.appendChild($('<meta name="google-translate-customization" content="7e20c0dc38d147d6-a2c819007bfac9d1-gc84ee27cc12fd5d1-1b"></meta>')[0]),h("https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit")):$("#google_translate_element").remove();c.UTILITIES.add_test_all_button()});return{create_from_json:function(a,
b,d){var f=function(a,b,c){b.shared_widgets[c]=a;a.finish_create_from_json_continuation&&(a.finish_create_from_json_continuation(),a.finish_create_from_json_continuation=void 0);return a},g,h,k,l;if(a){b||(b={});a.shared_widgets&&(b.json_of_shared_widgets=a.shared_widgets,b.shared_widgets=[]);a.shared_html&&(b.shared_html=a.shared_html);if(a.widget)return(g=c.UTILITIES.create_from_json(a.widget,b))&&a.is_backside?g.get_backside(!0):g;if(b&&b.shared_widgets&&0<=a.shared_widget_index){if(d=b.shared_widgets[a.shared_widget_index])return d;
d=b.json_of_shared_widgets[a.shared_widget_index];g=c.UTILITIES.create_from_json(d,b,!0);return f(g,b,a.shared_widget_index)}(k=a.semantic)||(k=a);a=a.view;if(0<=k.shared_widget_index){if(!b.json_of_shared_widgets){c.UTILITIES.report_internal_error("JSON refers to shared widgets but they can't be found. Sorry.");return}g=c.UTILITIES.create_from_json(b.json_of_shared_widgets[k.shared_widget_index],b,!0);return f(g,b,k.shared_widget_index)}if(c.creators_from_json[k.type]){b||(b={});a?b.json_view=a:
a=b.json_view;if((g=c.creators_from_json[k.type](k,b))&&g.get_backside){k.erased&&(c.widget.erasable(g),g.set_erased(k.erased));k.infinite_stack&&g.set_infinite_stack(k.infinite_stack);if(a&&a.frontside_width)if(h=a.backside?g.get_backside(!0).get_element():g.get_frontside_element(),l={width:a.frontside_width,height:a.frontside_height},"element"===k.type)g.on_update_display(function(){$(h).css(l)});else $(h).css(l);a&&a.saved_width&&(g.saved_width=a.saved_width,g.saved_height=a.saved_height);a&&a.backside_geometry&&
(g.backside_geometry=a.backside_geometry);k.backside_widgets&&(d?g.finish_create_from_json_continuation=function(){this.add_backside_widgets_from_json(g,k.backside_widgets,b)}.bind(this):this.add_backside_widgets_from_json(g,k.backside_widgets,b))}return g}c.UTILITIES.report_internal_error("JSON type '"+k.type+"' not supported. Perhaps a JavaScript file implementing it is missing.")}},add_backside_widgets_from_json:function(a,b,c){var d;b&&(d=this.create_array_from_json(b,c),a.set_backside_widget_sides(d,
b.map(function(a){return 0<=a.widget.shared_widget_index?c.json_of_shared_widgets[a.widget.shared_widget_index].view:a.widget.view})))},create_array_from_json:function(a,b){var d=[];a.forEach(function(a,e){d[e]=a?c.UTILITIES.create_from_json(a,b):a});return d},get_json_of_array:function(a,b){var d=[];a.forEach(function(a,e){a.is_backside&&a.is_backside()?d[e]={widget:c.UTILITIES.get_json(a.get_widget(),b),is_backside:!0}:d[e]=a.get_type_name?{widget:c.UTILITIES.get_json(a,b)}:a.get_json(b)});return d},
fresh_json_history:function(){return{widgets_encountered:[],shared_widgets:[],json_of_widgets_encountered:[]}},get_json_top_level:function(a){var b=this.fresh_json_history(),d=c.UTILITIES.get_json(a,b);0<b.shared_widgets.length&&(d.shared_widgets=b.shared_widgets.map(function(f,g){var h=function(a){a=b.widgets_encountered.indexOf(a);return b.json_of_widgets_encountered[a]},k=function(a){return h(b.shared_widgets[a])},l=h(f);a===f?(l={semantic:l.semantic,view:l.view,version:l.version},d.semantic={shared_widget_index:g}):
c.UTILITIES.tree_replace_once(d.semantic,l,{shared_widget_index:g},k);return l}));d.shared_html=b.shared_html;return d},get_json:function(a,b){var d,f,g;c.debugging&&!b&&c.UTILITIES.report_internal_error("no json_history");d=b.shared_widgets.indexOf(a);if(0<=d)return{shared_widget_index:d};d=b.widgets_encountered.indexOf(a);if(0<=d)return d=c.UTILITIES.insert_ancestors_last(a,b.shared_widgets),{shared_widget_index:d};d=b.widgets_encountered.push(a)-1;g=a.is_backside();a=a.get_widget();f=a.get_json(b);
f=a.add_to_json(f,b);f.view.backside=g;b.json_of_widgets_encountered[d]=f;a.add_backside_widgets_to_json&&a.add_backside_widgets_to_json(f,b);return f},get_json_of_keys:function(a){var b={};Object.keys(a).forEach(function(c){b[c]=a[c].get_json?{json:a[c].get_json()}:a[c]});return b},create_keys_from_json:function(a,b){var d={};Object.keys(a).forEach(function(f){d[f]=a[f].json?c.UTILITIES.create_from_json(a[f].json,b):a[f]});return d},tree_replace_once:function(a,b,c,d){var f;Object.keys(a).forEach(function(g){if(f=
a[g]){if(f===b)return a[g]=c,!0;if("shared_widget_index"===g){if(this.tree_replace_once(d(f),b,c,d))return!0}else if(!(0<=["string","number","function","undefined","boolean"].indexOf(typeof f))&&this.tree_replace_once(f,b,c,d))return!0}}.bind(this));return!1},insert_ancestors_last:function(a,b){var c=-1;b.some(function(b,d){if(a.has_ancestor(b))return c=d,!0});0>c&&(c=b.length);b.splice(c,0,a);return c},toontalk_json_div:function(a,b){var d=a.view.backside,f=b.get_backside_widgets(),g=b.get_type_name(),
h=b.toString();"top-level"===g?d?(a.semantic.settings=void 0,g="a work area containing ",0===f.length?g="an empty work area":(g=1===f.length?g+"one thing: ":g+(f.length+" things: "),C=f.length,f.forEach(function(a){C--;g+=c.UTILITIES.add_a_or_an(a.get_type_name());1===C?g+=", and ":1<C&&(g+=", ")}))):g="a top-level widget":(g=c.UTILITIES.add_a_or_an(g),d&&(g="the back of "+g));return"<div class='toontalk-json'>\nThis will be replaced by "+g+".\n"+(h?h+"\n":"")+"<div style='display:none;'>"+JSON.stringify(a,
null,"  ")+"</div></div>"},copy_widgets:function(a,b){var c=[],d;for(d=0;d<a.length;d++)c[d]=a[d]&&a[d].copy(b);return c},copy_widget_sides:function(a,b){return a.map(function(a){var c=a.get_widget().copy(b);a.is_backside()&&c.get_backside();return c})},copy_array:function(a){return a.slice()},generate_unique_id:function(){a+=1;return"toontalk_id_"+a},get_style_property:function(a,b){if(a.currentStyle)return a.currentStyle[b];if(window.getComputedStyle)return document.defaultView.getComputedStyle(a,
null).getPropertyValue(b)},get_style_numeric_property:function(a,b){var c=this.get_style_property(a,b),d;return"string"===typeof c?(d=c.indexOf("px"),0<=d&&(c=c.substring(0,d)),parseInt(c,10)):c},data_transfer_json_object:function(a){var b;if(a.dataTransfer){try{b=a.dataTransfer.getData("text/html")}catch(d){b=a.dataTransfer.getData("text")}if(!b||b.match(/[\u3400-\u9FBF]/))b=a.dataTransfer.getData("text");if(b){a=k(b);if(!a)return c.UTILITIES.get_json_top_level(c.element.create(b));try{return JSON.parse(a)}catch(f){c.UTILITIES.report_internal_error("Exception parsing "+
a+"\n"+f.toString())}}}},drag_and_drop:function(a){var b;c.UTILITIES.draggable(a);c.UTILITIES.can_receive_drops(a);$(a).is(".toontalk-backside-of-top-level")||(b=$(a).is(".toontalk-top-level-resource")?0:500,c.UTILITIES.enable_touch_events(a,b))},draggable:function(a){$(a).attr("draggable",!0);a.addEventListener("dragstart",function(b){f(b,a)});a.addEventListener("dragend",function(b){d(b,a)})},can_receive_drops:function(a){var b=function(b){var f=g(b,a);f&&d!==f&&c.UTILITIES.remove_highlight(d);
d=f;b.stopPropagation()},d;a.addEventListener("dragover",function(a){b(a);a.preventDefault();return!1});a.addEventListener("drop",function(b){b.preventDefault();r(b,a);b.stopPropagation()});a.addEventListener("dragenter",b);a.addEventListener("dragleave",function(a){d&&!c.UTILITIES.inside_rectangle(a.clientX,a.clientY,d.getBoundingClientRect())&&(c.UTILITIES.remove_highlight(d),d=void 0);a.stopPropagation()})},create_drop_area:function(a){var b=document.createElement("div"),d=$(b),f=document.createElement("div");
f.innerHTML=a;$(f).addClass("toontalk-drop-area-instructions ui-widget");d.addClass("toontalk-drop-area");d.append(f);c.UTILITIES.can_receive_drops(b);return d},process_json_elements:function(){$(".toontalk-json").each(function(a,b){var d=b.textContent,f,g,h,k;if(d)if(d=d.substring(d.indexOf("{"),d.lastIndexOf("}")+1),f=JSON.parse(d),g=c.UTILITIES.create_from_json(f)){b.textContent="";if(g.get_type_name)if(g.is_top_level()){if(!c.no_local_storage&&!c.UTILITIES.get_current_url_boolean_parameter("reset",
!1)){if(f.load_most_recent_program)try{(k=window.localStorage.getItem("toontalk-last-key"))&&(h=window.localStorage.getItem(k))}catch(l){d="Error reading previous state. Error message is "+l,c.UTILITIES.is_internet_explorer()?console.error(d):c.UTILITIES.display_message(d)}h&&(f=JSON.parse(h),g=c.UTILITIES.create_from_json(f))}h=g.get_backside(!0);h=h.get_element();$(b).replaceWith(h);$(h).css({width:f.view.backside_width,height:f.view.backside_height,"background-color":f.view.background_color,"border-width":f.view.border_width})}else $(b).addClass("toontalk-top-level-resource toontalk-top-level-resource-container"),
h=g.get_frontside_element(),$(h).addClass("toontalk-top-level-resource").css({position:"relative"}),b.toontalk_widget=g,b.appendChild(h);else b.appendChild(g.get_element());g.set_active&&g.set_active(!1);g.set_visible&&g.set_visible(!0);setTimeout(function(){g.update_display&&g.update_display();f.semantic.running&&g.set_running(!0)},1)}else c.UTILITIES.report_internal_error("Could not recreate a widget from this JSON: "+d)})},set_absolute_position:function(a,b){for(var c=a.parent(),d=b.left,f=b.top,
g;c.is("*")&&!c.is("html");)g=c.position(),d-=g.left,f-=g.top,c=c.parent();a.css({left:d,top:f,position:"absolute"});a.is(".toontalk-side-animating")&&(a.get(0).style.left=d+"px",a.get(0).style.top=f+"px")},set_position_relative_to_top_level_backside:function(a,b,c){var d=a.closest(".toontalk-top-level-backside"),f=d.offset(),g,h;f||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),f={left:0,top:0});g=b.left-f.left;b=b.top-f.top;c&&(c=a.width(),f=a.height(),
h=d.width(),d=d.height(),g>h-c&&(g=h-c),0>g&&(g=0),b>d-f&&(b=d-f),0>b&&(b=0));a.css({left:g,top:b,position:"absolute"});a.is(".toontalk-side-animating")&&(a.get(0).style.left=g+"px",a.get(0).style.top=b+"px")},restore_resource:function(a,b){var d,f;a.is(".toontalk-top-level-resource")&&(d=b.copy({fresh_copy:!0}),f=d.get_frontside_element(),$(f).css({width:a.width(),height:a.height()}),a.parent().removeClass("toontalk-top-level-resource toontalk-top-level-resource-container"),a.removeClass("toontalk-top-level-resource toontalk-top-level-resource-container"),
$(f).addClass("toontalk-top-level-resource toontalk-top-level-resource-container").css({position:"relative"}),a.get(0).parentElement.appendChild(f),c.DISPLAY_UPDATES.pending_update(d),b.set_active&&(b.set_active(!0),d.set_active(!1)))},find_resource_equal_to_widget:function(a){var b;$(".toontalk-top-level-resource").each(function(d,f){var g=c.UTILITIES.widget_from_jquery($(f));if(g&&(a.equals&&a.equals(g)||a.matching_resource&&a.matching_resource(g)))return b=f,!1});return b},set_position_is_absolute:function(a,
b){var c,d;b?(c=$(a).position(),d=c.left,c=c.top,$(a).css({left:d,top:c,position:"absolute"})):a.style.position="static"},ordinal:function(a){a++;switch(a){case 1:return"first";case 2:return"second";case 3:return"third";case 4:return"fourth";case 5:return"fifth";case 6:return"sixth";case 7:return"seventh";case 8:return"eighth";case 9:return"ninth";case 10:return"tenth";default:return 1===a%10?a+"st":2===a%10?a+"nd":3===a%10?a+"rd":a+"th"}},on_a_nest_in_a_box:function(a){return $(a).closest(".toontalk-nest").is("*")&&
$(a).closest(".toontalk-box").is("*")},use_custom_tooltip:function(a){var b=$(a),d;b.tooltip({position:{my:"center bottom-20",at:"center top",using:function(a,c){var e;0>a.top&&(a.top=0,e=b.offset(),e.left<$(window).width()/2?a.left=e.left+b.width()+10:(a.left=0,d=e.left-40));$(this).css(a);$("<div>").addClass("toontalk-arrow").addClass(c.vertical).addClass(c.horizontal).appendTo(this)}},open:function(a,b){var e=b.tooltip.get(0).textContent.length;b.tooltip.get(0).innerHTML=b.tooltip.get(0).textContent.replace(/(\r\n|\n|\r)/g,
"<br>");400<e&&$(b.tooltip).css({maxWidth:Math.min(800,d||$(window).width()-100)});setTimeout(function(){$(b.tooltip).hide()},e*(c.MAXIMUM_TOOLTIP_DURATION_PER_CHARACTER||100))}})},add_one_shot_event_handler:function(a,b,c,d){var f=!1,g=function(c){f=!0;d&&d();a.removeEventListener(b,g)};a.addEventListener(b,g);setTimeout(function(){f||g()},c)},animate_to_absolute_position:function(a,b,d,f,g){var h=$(a).offset(),k=$(a).position(),l=c.UTILITIES.distance(b,h);f||(f=.5);f=Math.round(l/f);$(a).addClass("toontalk-side-animating");
a.style.transitionDuration=f+"ms";a.style.left=k.left+(b.left-h.left)+"px";a.style.top=k.top+(b.top-h.top)+"px";g||c.UTILITIES.add_one_shot_event_handler(a,"transitionend",f+500,function(){$(a).removeClass("toontalk-side-animating");a.style.transitionDuration=""});c.UTILITIES.add_one_shot_event_handler(a,"transitionend",f+500,d)},distance:function(a,b){var c=a.left-b.left,d=a.top-b.top;return Math.sqrt(c*c+d*d)},highlight_element:function(a,b,d){var f;if(a){c.UTILITIES.remove_highlight();if(!$(a).is(".toontalk-backside")&&
(f=c.UTILITIES.widget_of_element(a),!f||f.element_to_highlight&&b&&(a=f.element_to_highlight(b),!a)))return;$(a).is(".toontalk-highlight")||($(a).addClass("toontalk-highlight").css({"z-index":c.UTILITIES.next_z_index()}),d&&setTimeout(function(){c.UTILITIES.remove_highlight()},d))}},remove_highlight:function(a){a?$(a).removeClass("toontalk-highlight"):$(".toontalk-highlight").removeClass("toontalk-highlight")},cursor_of_image:function(a){var b=a.lastIndexOf(".");return 0<=b?a.substring(0,b)+".32x32"+
a.substring(b):a},inside_rectangle:function(a,b,c){return a>=c.left&&a<=c.right&&b>=c.top&&b<=c.bottom},next_z_index:function(){b++;return b},create_button:function(a,b,c,d){a=$("<button>"+a+"</button>").button();a.addClass(b).click(d).attr("title",c);return a.get(0)},create_close_button:function(a,b){var c=document.createElement("div"),d=document.createElement("div");$(c).addClass("toontalk-close-button");$(c).click(a);$(c).attr("title",b);d.innerHTML="&times;";c.appendChild(d);return c},check_radio_button:function(a){$(a.button).prop("checked",
!0);$(a.label).addClass("ui-state-active")},create_button_set:function(){var a=document.createElement("div"),b,c;for(b=0;b<arguments.length;b++)if(0<=arguments[b].length)for(c=0;c<arguments[b].length;c++)a.appendChild(arguments[b][c]);else a.appendChild(arguments[b]);$(a).buttonset();return a},create_alert_element:function(a){a=c.UTILITIES.create_text_element(a);$(a).addClass("toontalk-alert-element");return a},create_text_element:function(a){var b=document.createElement("div");b.textContent=a;$(b).addClass("ui-widget");
return b},create_space:function(){var a=document.createElement("span");a.innerHTML="&nbsp;";$(a).addClass("ui-widget");return a},create_anchor_element:function(a,b){var d=document.createElement("a");d.innerHTML=a;c.TRANSLATION_ENABLED&&(b=c.UTILITIES.add_URL_parameter(b,"translate","1"));d.href=b;d.target="_blank";return d},create_text_input:function(a,b,d,f,g,h){var k=document.createElement("input"),l;k.type="text";k.className=b;k.value=a;k.title=f;h&&(k.type=h);d?(a=document.createElement("label"),
a.innerHTML=d,k.id=c.UTILITIES.generate_unique_id(),a.htmlFor=k.id,g&&(l=c.UTILITIES.create_anchor_element("i",g),$(l).addClass("toontalk-help-button notranslate"),l.translate=!1),d=c.UTILITIES.create_horizontal_table(a,k,l),$(a).addClass("ui-widget")):d=k;$(k).button().addClass("toontalk-text-input").css({"background-color":"white"});k.addEventListener("touchstart",function(){$(k).select()});c.UTILITIES.use_custom_tooltip(k);return{container:d,button:k}},create_text_area:function(a,b,d,f,g){var h=
document.createElement("textarea");h.className=b;h.value=a;h.title=f;a=document.createElement("label");a.innerHTML=d;h.id=c.UTILITIES.generate_unique_id();a.htmlFor=h.id;d=c.UTILITIES.create_horizontal_table(a,h);$(h).button().addClass("toontalk-text-area").css({background:"white"});h.addEventListener("touchstart",function(){$(h).select()});$(a).addClass("ui-widget");c.UTILITIES.use_custom_tooltip(h);return{container:d,button:h}},create_radio_button:function(a,b,d,f,g){var h=document.createElement("div"),
k=document.createElement("input"),l=document.createElement("label");k.type="radio";k.className=d;k.name=a;k.value=b;l.innerHTML=f;k.id=c.UTILITIES.generate_unique_id();l.htmlFor=k.id;h.appendChild(k);h.appendChild(l);h.title=g;$(k).button();c.UTILITIES.use_custom_tooltip(k);return{container:h,button:k,label:l}},create_select_menu:function(a,b,d,f,g,h){var k=document.createElement("div"),l=document.createElement("select"),n=document.createElement("label");l.className=d;l.name=a;l.id=c.UTILITIES.generate_unique_id();
n.innerHTML=f;n.htmlFor=l.id;k.appendChild(n);k.appendChild(l);k.title=g;b.forEach(function(a,b){var d=document.createElement("option");d.value=a;d.innerHTML=a;h&&h[b]&&(d.title=h[b],c.UTILITIES.use_custom_tooltip(d));l.appendChild(d)});$(l).addClass("ui-widget");c.UTILITIES.use_custom_tooltip(l);return{container:k,menu:l,label:n}},create_check_box:function(a,b,d,f){var g=document.createElement("div"),h=document.createElement("input"),k=document.createElement("label");h.type="checkbox";h.className=
b;h.checked=a;k.innerHTML=d;h.id=c.UTILITIES.generate_unique_id();k.htmlFor=h.id;$(k).addClass("ui-widget");g.appendChild(h);g.appendChild(k);g.title=f;c.UTILITIES.use_custom_tooltip(h);return{container:g,button:h,label:k}},create_horizontal_table:function(){var a=document.createElement("table"),b,c,d;c=document.createElement("tr");a.appendChild(c);for(b=0;b<arguments.length;b++)arguments[b]&&(d=document.createElement("td"),c.appendChild(d),d.appendChild(arguments[b]));return a},create_vertical_table:function(){var a=
document.createElement("table"),b,d;for(b=0;b<arguments.length;b++)arguments[b]&&(d=c.UTILITIES.create_row(arguments[b]),a.appendChild(d));return a},create_row:function(){var a=document.createElement("tr"),b=document.createElement("td"),c;for(c=0;c<arguments.length;c++)a.appendChild(arguments[c]);b.appendChild(a);return a},create_table_entry:function(a){var b=document.createElement("td");b.appendChild(a);return b},selected_radio_button:function(){var a;for(a=0;a<arguments.length;a++)if(arguments[a].checked)return arguments[a]},
create_image:function(a,b){var c=document.createElement("img"),d;c.src=a;b&&$(c).addClass(b);0===a.indexOf("images/")&&(d=function(b){c.removeEventListener("error",d);c.src="http://toontalk.github.io/ToonTalk/"+a},c.addEventListener("error",d));return c},create_tabs:function(a,b){var c=document.createElement("div"),d=document.createElement("ul"),f;if(a.length!==b.length)return console.error("UTILITIES.create_tabs called with different length lists."),c;a.forEach(function(a,c){var e=document.createElement("li"),
g=document.createElement("a"),h;"string"===typeof a?(h=document.createElement("span"),h.innerHTML=a):h=a;f="tab-"+c;g.href="#"+f;g.appendChild(h);e.appendChild(g);d.appendChild(e);b[c].id=f});c.appendChild(d);b.forEach(function(a){c.appendChild(a)});$(c).tabs();return c},create_file_data_table:function(a){var b=$('<table cellpadding="0" cellspacing="0" border="0"></table>');a&&b.addClass(a);return b.get(0)},become_file_data_table:function(a,b,d,f){$(a).DataTable({data:b,autoWidth:!1,columns:[{data:"title",
title:"Name",render:function(a,b,e,g){a=d?a.substring(0,a.length-5):a;b=d?c.google_drive.google_drive_url(e.id):"Click to load this program.";if(f)return"<div class='"+f+"' title='"+b+"'id='"+e.id+"'>"+a+"</div>";c.TRANSLATION_ENABLED&&(b=c.UTILITIES.add_URL_parameter(b,"translate","1"));return"<a href='"+b+"'target='_blank' title='Click to open published page.'>"+a+"</a>"}},{data:"modifiedDate",title:"Modified",render:function(a,b,c,d){return(new Date(a)).toUTCString()}},{data:"createdDate",title:"Created",
render:function(a,b,c,d){return(new Date(a)).toUTCString()}},{data:"fileSize",title:"Size"}]});$(a).addClass("toontalk-file-table")},get_local_files_data:function(){return c.UTILITIES.get_all_locally_stored_program_names().map(function(a){var b=c.UTILITIES.get_local_storage_meta_data(a);if(b)return{title:a,modifiedDate:b.last_modified,createdDate:b.created,fileSize:b.file_size}})},create_local_files_table:function(){var a=c.UTILITIES.get_local_files_data(),b=c.UTILITIES.create_file_data_table();setTimeout(function(){c.UTILITIES.become_file_data_table(b,
a,!1,"toontalk-file-load-button toontalk-file-load-button-without-click-handler")});return b},get_dragee:function(){return n},add_URL_parameter:function(a,b,d){a=c.UTILITIES.remove_URL_parameter(a,b);var f;f=0<=a.indexOf("?")?"&":"?";return a+f+b+"="+d},remove_URL_parameter:function(a,b){var c=a.indexOf("&"+b+"="),d;0>c&&(c=a.indexOf("?"+b+"="));if(0>c)return a;d=a.indexOf("&",c+1);0>d&&(d=a.length);a=a.substring(0,c)+a.substring(d);"?"===a[a.length-1]&&(a=substring(0,a.length-1));return a},add_a_or_an:function(a,
b){var c=a.charAt(0);if("'"===c||'"'===c)c=a.charAt(1);return 0===a.indexOf("the ")||0===a.indexOf("a ")||0===a.indexOf("an ")||0===a.indexOf("any ")?a:0>"aeiou".indexOf(c)?b?"A "+a:"a "+a:b?"An "+a:"an "+a},lower_case_first_letter:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},maximum_string_length:function(a,b){var c;if(a.length<=b)return a;c=a.substring(0,Math.round(.75*b));return c+" ... "+a.substring(a.length-(b-c.length))},backup_all_top_level_widgets:function(a){$(".toontalk-top-level-backside").each(function(b,
d){c.UTILITIES.widget_of_element(d).save(a)})},make_resizable:function(a,b){var c,d;a.resizable({start:function(a,b){c=b.originalSize.width;d=b.originalSize.height},resize:function(f,g){a.is(".toontalk-element-frontside")&&(g.size.width!=c&&(b.increment_width(g.size.width-c),c=g.size.width),g.size.height!=d&&(b.increment_height(g.size.height-d),d=g.size.height));b.rerender()},handles:"n,e,s,w"})},match:function(a,b){var c=a.match(b);return c.is_widget&&b.matched_by?b.matched_by(a):c},current_URL:function(){return window.location.pathname},
absolute_file_path:function(a){var b=window.location.pathname,c=b.lastIndexOf("ToonTalk/");return 0>c?a:b.substring(0,c+9)+a},copy_side:function(a,b,c){b=a.get_widget().copy(b);var d;c&&(c=a.get_widget().get_frontside_element())&&(d=b.get_frontside_element(!0),$(d).css({width:$(c).width(),height:$(c).height()}));return a.is_backside()?b.get_backside():b},scale_to_fit:function(a,b,d,f,g){return $(b).is(".toontalk-backside")?c.UTILITIES.scale_element(a,d,f,d,f,g):c.UTILITIES.scale_element(a,$(b).width(),
$(b).height(),d,f,g)},scale_element:function(a,b,c,d,f,g){var h=function(){$(a).css({transform:"scale("+k+", "+l+")","transform-origin":"top left",width:d,height:f})},k,l;d||(d=$(a).width());f||(f=$(a).height());k=b?b/d:1;l=c?c/f:1;0===k&&(k=1);0===l&&(l=1);g?setTimeout(h,g):h();return{x_scale:k,y_scale:l}},run_when_dimensions_known:function(a,b){var d,f;$(a).width()?b():(d=function(g){setTimeout(function(){$(a).width()?(b(),a.parentElement===document.body&&(f?f.appendChild(a):$(a).remove()),$(a).removeClass("toontalk-not-observable")):
setTimeout(function(){c.UTILITIES.widget_of_element(a);1E4>g&&d(2*g)},g)})},f=a.parentElement,$(a).addClass("toontalk-not-observable"),document.body.appendChild(a),d(1))},original_dimensions:function(a,b){var d=a.get_frontside_element();d.parentElement!==document.body&&c.UTILITIES.run_when_dimensions_known(d,function(){b($(d).width(),$(d).height())})},relative_position:function(a,b){var c=$(a).offset(),d;b&&(d=$(b).offset(),c.left-=d.left,c.top-=d.top);return c},add_animation_class:function(a,b){$(a).css({width:"",
height:""}).addClass(b)},widget_from_jquery:function(a){if(0<a.length)return a.get(0).toontalk_widget},widget_of_element:function(a){return a.toontalk_widget},has_animating_image:function(a){a=$(a);return(a=a.css("animation")||a.css("webkit-animation")||a.css("moz-animation")||a.css("ms-animation")||a.css("o-animation"))&&0!==a.indexOf("none")},display_message_if_new:function(a){0>B.indexOf(a)&&(c.UTILITIES.display_message(a),B.push(a))},display_message:function(a){var b=c.UTILITIES.create_alert_element(a);
$(".toontalk-alert-element").remove();console.log(a);document.body.insertBefore(b,document.body.firstChild);setTimeout(function(){$(b).remove()},Math.max(2E3,a.length*(c.MAXIMUM_TOOLTIP_DURATION_PER_CHARACTER||100)))},display_tooltip:function(a){c.UTILITIES.use_custom_tooltip(a.get(0));a.tooltip("open")},report_internal_error:function(a){console.log(a);c.debugging&&c.UTILITIES.display_message("Error: "+a)},get_current_url_boolean_parameter:function(a,b){return 0>window.location.href.indexOf(a+"=")?
b:0<=window.location.href.indexOf(a+"=1")?!0:!1},get_current_url_parameter:function(a,b){var c=window.location.href.indexOf(a+"="),d;if(0>c)return b;c=c+a.length+1;d=window.location.href.indexOf("&",c);0>d&&(d=window.location.href.length);return window.location.href.substring(c,d)},is_browser_of_type:function(a){return 0<=window.navigator.userAgent.indexOf(a)},is_internet_explorer:function(){return c.UTILITIES.is_browser_of_type("MSIE")||c.UTILITIES.is_browser_of_type("Trident")},add_position:function(a,
b){return{left:a.left+b.left,top:a.top+b.top}},subtract_position:function(a,b){return{left:a.left-b.left,top:a.top-b.top}},remove_z_index:function(a){if(0===a.length||"<"!==a.charAt(0)||0>a.indexOf("z-index"))return a;a=$(a);a.attr("z-index","");return a.html()},add_test_all_button:function(){var a=$("#toontalk-test-all-button"),b;if(0!==a.length){a.button();b=a.get(0);b.innerHTML="Run all tests";var c=!1;a.click(function(a){c?($(".toontalk-stop-sign").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&
$(this).click()}),b.innerHTML="Run all tests"):($(".toontalk-green-flag").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&$(this).click()}),b.innerHTML="Stop all tests");c=!c})}},set_timeout:function(a,b){b?setTimeout(a,b):(q.push(a),window.postMessage("zero-timeout-message","*"))},get_first_property:function(a){return Object.keys(a)[0]},get_all_locally_stored_program_names:function(){var a=window.localStorage.getItem("toontalk-all-program-names");return a?JSON.parse(a):[]},set_all_locally_stored_program_names:function(a){window.localStorage.setItem("toontalk-all-program-names",
JSON.stringify(a))},get_local_storage_meta_data:function(a){a=c.UTILITIES.local_storage_program_meta_data_key(a);var b;try{if(b=window.localStorage.getItem(a))return JSON.parse(b)}catch(d){}},local_storage_program_key:function(a){return"toontalk-json: "+a},local_storage_program_meta_data_key:function(a){return"toontalk-meta-data: "+a},enable_editor:function(a,b,c,d){(function(a,b){var c=function(a){a.data.editor_enabled_for&&a.data.editor_enabled_for===b&&(e=!0,window.removeEventListener("message",
c))},d=function(a,b){e||setTimeout(function(){a();d(a,b)},500)},e=!1;window.addEventListener("message",c);d(a,b)})(function(){a.postMessage({save_edits_to:window.location.href,file_id:c,widgets_json:d},"*")},c)},touch_available:function(){return"ontouchstart"in window||navigator.msMaxTouchPoints},enable_touch_events:function(a,b){var h=a,k=function(b){var f;b.stopPropagation();b.preventDefault();l?(l=!1,d(b,a),f=c.UTILITIES.widget_of_element(a),c.debugging&&0===c.debugging.indexOf("touch")&&(c.debugging+=
"\ndrag ended"),f&&(r(b,a),c.debugging&&0===c.debugging.indexOf("touch")&&(c.debugging+="\ndrop happened")),c.debugging&&0===c.debugging.indexOf("touch")&&(alert(c.debugging),c.debugging="touch")):n=!0;a=h},l=!1,n=!1,q=0,u=0,v;a.addEventListener("touchstart",function(d){c.debugging&&0===c.debugging.indexOf("touch")&&(c.debugging+="\ntouch start");d.preventDefault();"TEXTAREA"===d.srcElement.tagName||"INPUT"===d.srcElement.tagName||$(d.srcElement).is(".ui-resizable-handle")?c.debugging&&0===c.debugging.indexOf("touch")&&
(c.debugging+="\ntouch start ignored due to tag name or class"):(d.stopPropagation(),c.UTILITIES.set_timeout(function(){var b=d.changedTouches[0],g,h,k;n?(n=!1,g=document.createEvent("MouseEvent"),g.initMouseEvent("click",!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null),b.target.dispatchEvent(g),c.debugging&&0===c.debugging.indexOf("touch")&&(c.debugging+="\ntouch end treated as click",alert(c.debugging),c.debugging="touch")):(l=!0,(g=c.UTILITIES.widget_of_element(a))&&g.get_infinite_stack()?
(h=g.copy(),g.add_copy_to_container(h,0,0),g.set_infinite_stack(!1),h.set_infinite_stack(!0)):$(a).is(".toontalk-top-level-resource")&&(h=g.copy(),g.add_copy_to_container(h,0,0),k=$(a).offset(),a=h.get_frontside_element(!0)),k||(k=$(a).offset()),f(d,a),q=b.clientX-k.left,u=b.clientY-k.top,c.debugging&&0===c.debugging.indexOf("touch")&&(c.debugging+="\ndrag started"))},b))},!0);a.addEventListener("touchmove",function(b){var d;b.preventDefault();if(l){d=b.changedTouches[0];c.UTILITIES.set_absolute_position($(a),
{left:d.pageX-q,top:d.pageY-u});b=c.UTILITIES.find_widget_on_page(d,a,0,0);if(v&&v!==b){var f=v.get_frontside_element();c.UTILITIES.remove_highlight(f);v=void 0}b&&(g(d,b.get_frontside_element()),v=b);c.debugging&&0===c.debugging.indexOf("touch")&&(c.debugging+="\ndragged to "+(d.pageX-q)+", "+(d.pageY-u))}else c.debugging&&0===c.debugging.indexOf("touch")&&(c.debugging+="\ntouch move ignored since drag_started not yet set. "+Date.now())},!0);a.addEventListener("touchend",k,!0);a.addEventListener("touchcancel",
k,!0)},get_mouse_or_first_touch_event_attribute:function(a,b){return b.changedTouches?b.changedTouches[0][a]:b[a]},find_widget_on_page:function(a,b,d,f){var g=c.UTILITIES.get_mouse_or_first_touch_event_attribute("pageX",a);a=c.UTILITIES.get_mouse_or_first_touch_event_attribute("pageY",a);var h;$(b).hide();d=document.elementFromPoint(g-(window.pageXOffset+d),a-(window.pageYOffset+f));for($(b).show();d&&!d.toontalk_widget&&(!$(d).is(".toontalk-backside")||$(d).is(".toontalk-top-level-backside"));)d=
d.parentNode;d&&(h=d.toontalk_widget);if(h)return h&&h.get_contents&&h.get_contents()&&(h=h.get_contents()),b=h.get_type_name(),h&&"empty hole"===b?h.get_parent_of_frontside():h},closest_top_level_backside:function(a,b){var d,f;$(".toontalk-top-level-backside").each(function(){var b=$(this).offset(),b=b.left+$(this).width()/2-a^2+(b.top+$(this).height()/2-a)^2;d?b<f&&(d=this,f=b):(d=this,f=b)});return c.UTILITIES.widget_of_element(d)},create_queue:function(){var a=[],b=0;return{getLength:function(){return a.length-
b},isEmpty:function(){return 0==a.length},enqueue:function(b){a.push(b)},dequeue:function(){var c;if(0!=a.length)return c=a[b],2*++b>=a.length&&(a=a.slice(b),b=0),c},peek:function(){return 0<a.length?a[b]:void 0},does_any_item_satisfy:function(c){var d;for(d=b;d<a.length;d++)if(c(a[d]))return!0;return!1}}}}}(window.TOONTALK);window.TOONTALK.UTILITIES.available_types="number box element robot nest sensor top-level".split(" ");
