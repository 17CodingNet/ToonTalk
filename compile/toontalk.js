'use strict';(function(b){var m;"undefined"===typeof exports?"function"===typeof define&&"object"===typeof define.amd&&define.amd?(m={},define(function(){return m})):m="undefined"!==typeof window?window:b:m=exports;(function(b){var l={greatest_common_divisor:function(a,d){if(1===d||1===a)return 1;for(var c;0!==d;){c=d;d=a%d;if(!isFinite(d))return 0;a=c}return a}};l.gcd=l.greatest_common_divisor;l.fromRandom=function(a){return Math.random()*(1<<a)>>>0};l.fromMillitime=function(){return+new Date};l.fromUnixtime=
function(){return.001*l.fromMillitime()|0};"undefined"!==typeof b&&(b.integer=l);(function(a){function d(a,b,f){if(f!==c)return a instanceof d?a:"undefined"===typeof a?e:d.parse(a);for(a=a||[];a.length&&!a[a.length-1];)--a.length;this._d=a;this._s=a.length?b||1:0}var c={};d._construct=function(a,e){return new d(a,e,c)};d.base=1E7;d.base_log10=7;var e=new d([],0,c);d.ZERO=e;var b=new d([1],1,c);d.ONE=b;var f=new d(b._d,-1,c);d.M_ONE=f;d._0=e;d._1=b;d.small=[e,b,new d([2],1,c),new d([3],1,c),new d([4],
1,c),new d([5],1,c),new d([6],1,c),new d([7],1,c),new d([8],1,c),new d([9],1,c),new d([10],1,c),new d([11],1,c),new d([12],1,c),new d([13],1,c),new d([14],1,c),new d([15],1,c),new d([16],1,c),new d([17],1,c),new d([18],1,c),new d([19],1,c),new d([20],1,c),new d([21],1,c),new d([22],1,c),new d([23],1,c),new d([24],1,c),new d([25],1,c),new d([26],1,c),new d([27],1,c),new d([28],1,c),new d([29],1,c),new d([30],1,c),new d([31],1,c),new d([32],1,c),new d([33],1,c),new d([34],1,c),new d([35],1,c),new d([36],
1,c)];d.digits="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");d.prototype.toString=function(a){a=+a||10;if(2>a||36<a)throw Error("illegal radix "+a+".");if(0===this._s)return"0";if(10===a){a=0>this._s?"-":"";a+=this._d[this._d.length-1].toString();for(var c=this._d.length-2;0<=c;c--){for(var e=this._d[c].toString();7>e.length;)e="0"+e;a+=e}return a}c=d.digits;a=d.small[a];for(var e=this._s,b=this.abs(),f=[],g;0!==b._s;)g=b.divRem(a),b=g[0],g=g[1],f.push(c[g.valueOf()]);return(0>e?"-":"")+f.reverse().join("")};
d.radixRegex=[/^$/,/^$/,/^[01]*$/,/^[012]*$/,/^[0-3]*$/,/^[0-4]*$/,/^[0-5]*$/,/^[0-6]*$/,/^[0-7]*$/,/^[0-8]*$/,/^[0-9]*$/,/^[0-9aA]*$/,/^[0-9abAB]*$/,/^[0-9abcABC]*$/,/^[0-9a-dA-D]*$/,/^[0-9a-eA-E]*$/,/^[0-9a-fA-F]*$/,/^[0-9a-gA-G]*$/,/^[0-9a-hA-H]*$/,/^[0-9a-iA-I]*$/,/^[0-9a-jA-J]*$/,/^[0-9a-kA-K]*$/,/^[0-9a-lA-L]*$/,/^[0-9a-mA-M]*$/,/^[0-9a-nA-N]*$/,/^[0-9a-oA-O]*$/,/^[0-9a-pA-P]*$/,/^[0-9a-qA-Q]*$/,/^[0-9a-rA-R]*$/,/^[0-9a-sA-S]*$/,/^[0-9a-tA-T]*$/,/^[0-9a-uA-U]*$/,/^[0-9a-vA-V]*$/,/^[0-9a-wA-W]*$/,
/^[0-9a-xA-X]*$/,/^[0-9a-yA-Y]*$/,/^[0-9a-zA-Z]*$/];d.parse=function(a,b){function f(d){d=d.replace(/\s*[*xX]\s*10\s*(\^|\*\*)\s*/,"e");return d.replace(/^([+\-])?(\d+)\.?(\d*)[eE]([+\-]?\d+)$/,function(d,a,c,e,b){b=+b;var f=0>b,g=c.length+b;d=(f?c:e).length;b=(b=Math.abs(b))>=d?b-d+f:0;d=Array(b+1).join("0");c+=e;return(a||"")+(f?c=d+c:c+=d).substr(0,g+=f?d.length:0)+(g<c.length?"."+c.substr(g):"")})}a=a.toString();if("undefined"===typeof b||10===+b)a=f(a);var g=RegExp("^([+\\-]?)("+("undefined"===
typeof b?"0[xcb]":16==b?"0x":8==b?"0c":2==b?"0b":"")+")?([0-9a-z]*)(?:\\.\\d*)?$","i").exec(a);if(g){var p=g[1]||"+",h=g[2]||"",g=g[3]||"";if("undefined"===typeof b)b="0x"===h||"0X"===h?16:"0c"===h||"0C"===h?8:"0b"===h||"0B"===h?2:10;else if(2>b||36<b)throw Error("Illegal radix "+b+".");b=+b;if(!d.radixRegex[b].test(g))throw Error("Bad digit for radix "+b);g=g.replace(/^0+/,"").split("");if(0===g.length)return e;p="-"===p?-1:1;if(10==b){for(h=[];7<=g.length;)h.push(parseInt(g.splice(g.length-d.base_log10,
d.base_log10).join(""),10));h.push(parseInt(g.join(""),10));return new d(h,p,c)}h=e;b=d.small[b];for(var k=d.small,l=0;l<g.length;l++)h=h.multiply(b).add(k[parseInt(g[l],36)]);return new d(h._d,p,c)}throw Error("Invalid BigInteger format: "+a);};d.prototype.add=function(a){if(0===this._s)return d(a);a=d(a);if(0===a._s)return this;if(this._s!==a._s)return a=a.negate(),this.subtract(a);var e=this._d;a=a._d;for(var b=e.length,f=a.length,g=Array(Math.max(b,f)+1),p=Math.min(b,f),h=0,k=0;k<p;k++)h=e[k]+
a[k]+h,g[k]=h%1E7,h=h/1E7|0;f>b&&(e=a,b=f);for(k=p;h&&k<b;k++)h=e[k]+h,g[k]=h%1E7,h=h/1E7|0;for(h&&(g[k]=h);k<b;k++)g[k]=e[k];return new d(g,this._s,c)};d.prototype.negate=function(){return new d(this._d,-this._s|0,c)};d.prototype.abs=function(){return 0>this._s?this.negate():this};d.prototype.subtract=function(a){if(0===this._s)return d(a).negate();a=d(a);if(0===a._s)return this;if(this._s!==a._s)return a=a.negate(),this.add(a);var b=this;0>this._s&&(b=new d(a._d,1,c),a=new d(this._d,1,c));var f=
b.compareAbs(a);if(0===f)return e;if(0>f){var g=a;a=b;b=g}b=b._d;a=a._d;var g=b.length,p=a.length,h=Array(g),k=0,l,q;for(l=0;l<p;l++)q=b[l]-k-a[l],0>q?(q+=1E7,k=1):k=0,h[l]=q;for(l=p;l<g;l++){q=b[l]-k;if(0>q)q+=1E7;else{h[l++]=q;break}h[l]=q}for(;l<g;l++)h[l]=b[l];return new d(h,f,c)};(function(){function a(e,b){for(var f=e._d,g=f.slice(),p=0;;){var h=(f[p]||0)+1;g[p]=h%1E7;if(9999999>=h)break;++p}return new d(g,b,c)}function e(a,b){for(var f=a._d,g=f.slice(),p=0;;){var h=(f[p]||0)-1;if(0>h)g[p]=
h+1E7;else{g[p]=h;break}++p}return new d(g,b,c)}d.prototype.next=function(){switch(this._s){case 0:return b;case -1:return e(this,-1);default:return a(this,1)}};d.prototype.prev=function(){switch(this._s){case 0:return f;case -1:return a(this,-1);default:return e(this,1)}}})();d.prototype.compareAbs=function(a){if(this===a)return 0;if(!(a instanceof d)){if(!isFinite(a))return isNaN(a)?a:-1;a=d(a)}if(0===this._s)return 0!==a._s?-1:0;if(0===a._s)return 1;var c=this._d.length,e=a._d.length;if(c<e)return-1;
if(c>e)return 1;e=this._d;a=a._d;for(c-=1;0<=c;c--)if(e[c]!==a[c])return e[c]<a[c]?-1:1;return 0};d.prototype.compare=function(a){if(this===a)return 0;a=d(a);return 0===this._s?-a._s:this._s===a._s?this.compareAbs(a)*this._s:this._s};d.prototype.isUnit=function(){return this===b||this===f||1===this._d.length&&1===this._d[0]};d.prototype.multiply=function(a){if(0===this._s)return e;a=d(a);if(0===a._s)return e;if(this.isUnit())return 0>this._s?a.negate():a;if(a.isUnit())return 0>a._s?this.negate():
this;if(this===a)return this.square();var b=this._d.length>=a._d.length,f=(b?this:a)._d,b=(b?a:this)._d,g=f.length,p=b.length,h=g+p,k=Array(h),l;for(l=0;l<h;l++)k[l]=0;for(l=0;l<p;l++){for(var h=0,q=b[l],r=g+l,m,x=l;x<r;x++)m=k[x]+q*f[x-l]+h,h=m/1E7|0,k[x]=m%1E7|0;h&&(m=k[x]+h,k[x]=m%1E7)}return new d(k,this._s*a._s,c)};d.prototype.multiplySingleDigit=function(a){if(0===a||0===this._s)return e;if(1===a)return this;var b;if(1===this._d.length)return b=this._d[0]*a,1E7<=b?new d([b%1E7|0,b/1E7|0],1,
c):new d([b],1,c);if(2===a)return this.add(this);if(this.isUnit())return new d([a],1,c);var f=this._d,g=f.length;b=g+1;for(var p=Array(b),h=0;h<b;h++)p[h]=0;for(var k=h=0;k<g;k++)b=a*f[k]+h,h=b/1E7|0,p[k]=b%1E7|0;h&&(p[k]=h);return new d(p,1,c)};d.prototype.square=function(){if(0===this._s)return e;if(this.isUnit())return b;var a=this._d,f=a.length,g=Array(f+f+1),p,h,k,l;for(l=0;l<f;l++)k=2*l,p=a[l]*a[l],h=p/1E7|0,g[k]=p%1E7,g[k+1]=h;for(l=0;l<f;l++){h=0;k=2*l+1;for(var q=l+1;q<f;q++,k++)p=a[q]*a[l]*
2+g[k]+h,h=p/1E7|0,g[k]=p%1E7;k=f+l;p=h+g[k];h=p/1E7|0;g[k]=p%1E7;g[k+1]+=h}return new d(g,1,c)};d.prototype.quotient=function(a){return this.divRem(a)[0]};d.prototype.divide=d.prototype.quotient;d.prototype.remainder=function(a){return this.divRem(a)[1]};d.prototype.divRem=function(a){a=d(a);if(0===a._s)throw Error("Divide by zero");if(0===this._s)return[e,e];if(1===a._d.length)return this.divRemSmall(a._s*a._d[0]);switch(this.compareAbs(a)){case 0:return[this._s===a._s?b:f,e];case -1:return[e,this]}var g=
this._s*a._s,p=a.abs(),h=this._d,k=h.length,l=[],q,r=new d([],0,c);for(r._s=1;k;)if(r._d.unshift(h[--k]),0>r.compareAbs(a))l.push(0);else{if(0===r._s)q=0;else{var m=r._d.length;q=p._d.length;m=1E7*r._d[m-1]+r._d[m-2];q=1E7*p._d[q-1]+p._d[q-2];r._d.length>p._d.length&&(m=1E7*(m+1));q=Math.ceil(m/q)}do{m=p.multiplySingleDigit(q);if(0>=m.compareAbs(r))break;q--}while(q);l.push(q);q&&(q=r.subtract(m),r._d=q._d.slice(),0===r._d.length&&(r._s=0))}return[new d(l.reverse(),g,c),new d(r._d,this._s,c)]};d.prototype.divRemSmall=
function(a){a=+a;if(0===a)throw Error("Divide by zero");var b=this._s*(0>a?-1:1);a=Math.abs(a);if(1>a||1E7<=a)throw Error("Argument out of range");if(0===this._s)return[e,e];if(1===a||-1===a)return[1===b?this.abs():new d(this._d,b,c),e];if(1===this._d.length){var f=new d([this._d[0]/a|0],1,c);a=new d([this._d[0]%a|0],1,c);0>b&&(f=f.negate());0>this._s&&(a=a.negate());return[f,a]}for(var g=this._d.slice(),f=Array(g.length),p=0,h=0,k=0,l;g.length;)p=1E7*p+g[g.length-1],p<a?(f[k++]=0,g.pop(),h=1E7*h+
p):(l=0===p?0:p/a|0,h=p-a*l,(f[k++]=l)?(g.pop(),p=h):g.pop());a=new d([h],1,c);0>this._s&&(a=a.negate());return[new d(f.reverse(),b,c),a]};d.prototype.isEven=function(){var a=this._d;return 0===this._s||0===a.length||0===a[0]%2};d.prototype.isOdd=function(){return!this.isEven()};d.prototype.sign=function(){return this._s};d.prototype.isPositive=function(){return 0<this._s};d.prototype.isNegative=function(){return 0>this._s};d.prototype.isZero=function(){return 0===this._s};d.prototype.exp10=function(a){a=
+a;if(0===a)return this;if(Math.abs(a)>Number(g))throw Error("exponent too large in BigInteger.exp10");if(0<a){for(var b=new d(this._d.slice(),this._s,c);7<=a;a-=7)b._d.unshift(0);if(0==a)return b;b._s=1;b=b.multiplySingleDigit(Math.pow(10,a));return 0>this._s?b.negate():b}if(-a>=7*this._d.length)return e;b=new d(this._d.slice(),this._s,c);for(a=-a;7<=a;a-=7)b._d.shift();return 0==a?b:b.divRemSmall(Math.pow(10,a))[0]};d.prototype.pow=function(a){if(this.isUnit())return 0<this._s?this:d(a).isOdd()?
this:this.negate();a=d(a);if(0===a._s)return b;if(0>a._s){if(0===this._s)throw Error("Divide by zero");return e}if(0===this._s)return e;if(a.isUnit())return this;if(0<a.compareAbs(g))throw Error("exponent too large in BigInteger.pow");for(var c=this,f=b,p=d.small[2];a.isPositive()&&(!a.isOdd()||(f=f.multiply(c),!a.isUnit()));)c=c.square(),a=a.quotient(p);return f};d.prototype.modPow=function(a,c){for(var e=b,f=this;a.isPositive();)a.isOdd()&&(e=e.multiply(f).remainder(c)),a=a.quotient(d.small[2]),
a.isPositive()&&(f=f.square().remainder(c));return e};d.prototype.log=function(){switch(this._s){case 0:return-Infinity;case -1:return NaN}var a=this._d.length;if(30>7*a)return Math.log(this.valueOf());var b=Math.ceil(30/7),e=this._d.slice(a-b);return Math.log((new d(e,1,c)).valueOf())+(a-b)*Math.log(1E7)};d.prototype.valueOf=function(){return parseInt(this.toString(),10)};d.prototype.toJSValue=function(){return parseInt(this.toString(),10)};var g=d(2147483647);d.MAX_EXP=g;(function(){function a(c){return function(a){return c.call(d(a))}}
function c(a){return function(c,b){return a.call(d(c),d(b))}}function b(a){return function(c,b,e){return a.call(d(c),d(b),d(e))}}(function(){var e,f,g="toJSValue isEven isOdd sign isZero isNegative abs isUnit square negate isPositive toString next prev log".split(" "),p="compare remainder divRem subtract add quotient divide multiply pow compareAbs".split(" "),h=["modPow"];for(e=0;e<g.length;e++)f=g[e],d[f]=a(d.prototype[f]);for(e=0;e<p.length;e++)f=p[e],d[f]=c(d.prototype[f]);for(e=0;e<h.length;e++)f=
h[e],d[f]=b(d.prototype[f]);d.exp10=function(a,c){return d(a).exp10(c)}})()})();a.BigInteger=d})("undefined"!==typeof b?b:this);var h={greatest_common_divisor:function(a,d){if(d.isUnit()||a.isUnit())return BigInteger.ONE;for(var c;!d.isZero();)c=d,d=a.remainder(d),a=c;return a},create:function(){return[0]},clone:function(a){for(var d=[],c=0,b=a.length;c<b;c++)d[c]=a[c];return d},copy:function(a,d){a=[];for(var c=0,b=d.length;c<b;c++)a[c]=d[c];return a},abs:function(a,d){a[0]=Math.abs(d[0]);return a},
str:function(a){return a[0].toString()},toInteger:function(a){return out[0]},fromInteger:function(a){return[parseInt(a)]}};h.ZERO=h.fromInteger(0);h.ONE=h.fromInteger(1);"undefined"!==typeof b&&(b.bigint=h);if(!e)var e=Array;if(!f)var f=Math.pow(2,56);if(!r)var r=16777216;var g={EPSILON:2E-16};g.MAX_LOOPS=r;g.create=function(){var a=new e(2);a[0]=0;a[1]=1;return a};g.clone=function(a){var d=new e(2);d[0]=a[0];d[1]=a[1];return d};g.fromValues=function(a,d){var c=new e(2);c[0]=a;c[1]=d;return g.normalize(c,
c)};g.copy=function(a,d){a[0]=d[0];a[1]=d[1];return a};g.set=function(a,d,c){a[0]=d;a[1]=c;return g.normalize(a,a)};g.abs=function(a,d){a[0]=Math.abs(d[0]);a[1]=d[1];return a};g.invert=function(a,d){var c=d[0];a[0]=d[1];a[1]=c;return a};g.reciprocal=g.invert;g.add=function(a,d,c){d[1]===c[1]?(a[0]=d[0]+c[0],a[1]=d[1]):(a[0]=d[0]*c[1]+c[0]*d[1],a[1]=d[1]*c[1]);return g.normalize(a,a)};g.subtract=function(a,d,c){d[1]===c[1]?(a[0]=d[0]-c[0],a[1]=d[1]):(a[0]=d[0]*c[1]-c[0]*d[1],a[1]=d[1]*c[1]);return g.normalize(a,
a)};g.sub=g.subtract;g.multiply=function(a,d,c){a[0]=d[0]*c[0];a[1]=d[1]*c[1];return g.normalize(a,a)};g.mul=g.multiply;g.mediant=function(a,d,c){a[0]=d[0]+c[0];a[1]=d[1]+c[1];return g.normalize(a,a)};g.divide=function(a,d,c){a[0]=d[0]*c[1];a[1]=d[1]*c[0];return g.normalize(a,a)};g.div=g.divide;g.equals=function(a,d){return 0===a[0]&&0===d[0]||0===a[1]&&0===d[1]?!0:a[0]===d[0]&&a[1]===d[1]};g.approximates=function(a,d){if(g.equals(a,d))return!0;var c=g.create();g.sub(c,a,d);g.abs(c,c);return g.isLessThan(c,
g.INFINITESIMAL)};g.isGreaterThan=function(a,d){return g.equals(a,d)?!1:a[0]*d[1]>d[0]*a[1]};g.isLessThan=function(a,d){return g.equals(a,d)?!1:a[0]*d[1]<d[0]*a[1]};g.isNegative=function(a){return 0>a[0]};g.min=function(a,d,c){g.isLessThan(d,c)?(a[0]=d[0],a[1]=d[1]):(a[0]=c[0],a[1]=c[1]);return a};g.max=function(a,d,c){g.isGreaterThan(d,c)?(a[0]=d[0],a[1]=d[1]):(a[0]=c[0],a[1]=c[1]);return a};g.scalar_multiply=function(a,d,c){a[0]=d[0]*c;a[1]=d[1];return g.normalize(a,a)};g.scalar_divide=function(a,
d,c){a[0]=d[0];a[1]=d[1]*c;return g.normalize(a,a)};g.normalize=function(a,d){if(isNaN(d[0])||isNaN(d[1])||0===d[0]&&0===d[1])return a[0]=0,a[1]=0,a;if(0===d[0])return a[0]=0,a[1]=1,a;if(0===d[1])return a[0]=1,a[1]=0,a;if(d[0]===d[1])return a[0]=1,a[1]=1,a;0<d[1]?(a[0]=d[0],a[1]=d[1]):(a[0]=-d[0],a[1]=-d[1]);var c=l.greatest_common_divisor(Math.abs(a[0]),a[1]);1<c&&(a[0]/=c,a[1]/=c);return a};g.opposite=function(a,d){a[0]=-d[0];a[1]=d[1];return a};g.negative=g.opposite;g.neg=g.opposite;g.power=function(a,
d,c){2===c?(a[0]=d[0]*d[0],a[1]=d[1]*d[1]):0<c?(a[0]=Math.pow(d[0],c),a[1]=Math.pow(d[1],c)):0>c?(c=Math.abs(c),a[0]=Math.pow(d[1],c),a[1]=Math.pow(d[0],c)):g.copy(a,g.ONE);return g.normalize(a,a)};g.pow=g.power;g.sqrt=function(a,d){return g.nthRoot(a,d,2)};g.nthRoot=function(a,d,c){if(g.equals(d,g.ZERO))return g.copy(a,g.ZERO);if(g.equals(d,g.ONE))return g.copy(a,g.ONE);if(g.equals(d,g.INFINITY))return g.copy(a,g.INFINITY);if(g.equals(d,g.INFINULL))return g.copy(a,g.INFINULL);var b=g.isNegative(d);
b&&(d[0]=-d[0]);a=g.copy(a,g.ONE);for(var e=[1,0,0,1],f=g.clone(g.ONE),p=g.MAX_LOOPS;!g.approximates(d,f)&&p--;)g.isLessThan(d,f)?(e[0]+=e[1],e[2]+=e[3]):(e[1]+=e[0],e[3]+=e[2]),a[0]=e[0]+e[1],a[1]=e[2]+e[3],g.pow(f,a,c);b&&(d[0]=-d[0],1===c%2&&g.neg(a,a));return a};g.dot=function(a,d){return a[0]*d[0]+a[1]*d[1]};g.str=function(a){return 1===a[1]?a[0].toString():a[0]+"/"+a[1]};g.toDecimal=function(a){return a[0]/a[1]};g.dec=g.toDecimal;g.toInteger=function(a){return Math.round(g.toDecimal(a))};g.round=
g.toInteger;g.floor=function(a){return Math.floor(g.toDecimal(a))};g.ceil=function(a){return Math.ceil(g.toDecimal(a))};g.fromInteger_copy=function(a,d){a[0]=parseInt(d);a[1]=1;return a};g.fromInteger=function(a){return g.fromInteger_copy(g.create(),a)};g.fromIntegerInverse_copy=function(a,d){a[0]=1;a[1]=parseInt(d);0>a[1]&&(a[0]=-a[0],a[1]=-a[1]);return a};g.fromIntegerInverse=function(a){return g.fromIntegerInverse_copy(g.create(),a)};g.fromDecimal=function(a){return g.fromDecimal_copy(g.create(),
a)};g.fromDecimal_copy=function(a,d){d=parseFloat(d);if(isNaN(d))return g.copy(a,g.INFINULL);if(Infinity===d)return g.copy(a,g.INFINITY);if(Math.abs(d)<g.EPSILON)return g.copy(a,g.ZERO);if(Math.abs(d-1)<g.EPSILON)return g.copy(a,g.ONE);if(Math.abs(d%1)<g.EPSILON)return g.fromInteger_copy(a,d);if(Math.abs(1/d%1)<g.EPSILON)return g.fromIntegerInverse_copy(a,Math.round(1/d));g.copy(a,g.ONE);for(var c=[1,0,0,1],b=d,e=1,f=g.MAX_LOOPS;f--&&Math.abs(d-g.toDecimal(a))>g.EPSILON;)e=Math.floor(b),a[0]=e*c[0]+
c[2],a[1]=e*c[1]+c[3],b=1/(b-e),c[2]=c[0],c[3]=c[1],c[0]=a[0],c[1]=a[1];return a};g.fromRandom=function(a){a[0]=0xfffffffffffff*Math.random()<<0;a[1]=Math.abs(0xfffffffffffff*Math.random()<<0);return g.normalize(a,a)};g.sin=function(a,d){if(0===d[1])return g.copy(a,g.ZERO);g.scalar_multiply(a,d,2);var c=g.create();g.pow(c,d,2);g.add(c,c,g.ONE);g.divide(a,a,c);return a};g.cos=function(a,d){if(0===d[1])return g.neg(a,g.ONE);var c=g.create();g.pow(c,d,2);g.sub(a,g.ONE,c);var b=g.create();g.add(b,g.ONE,
c);g.divide(a,a,b);return a};g.tan=function(a,d){g.scalar_multiply(a,d,2);var c=g.create();g.pow(c,d,2);g.scalar_multiply(c,c,2);g.add(a,a,c);g.pow(c,d,4);g.sub(c,g.ONE,c);g.divide(a,a,c);return a};g.toEgyptian=function(a){a=g.clone(a);g.abs(a,a);var d=g.floor(a);d&&g.sub(a,a,g.fromInteger(d));if(!a[0])return d.toString();d||(d="");for(var c=1,b=g.create();1!==a[0];)c++,b=g.fromValues(1,c),g.isGreaterThan(a,b)&&(d&&(d+=" + "),d+=g.str(b),g.sub(a,a,b));return a?d?d+" + "+g.str(a):g.str(a):d?d:"0"};
g.toBabylonian=function(a){var d="",c=g.toDecimal(a);a=parseInt(c);for(var c=c-a,b=0,e=0;0<a;)(b=a%60)&&(d=b+" * 60^"+e+(d?" + ":"")+d),a=(a-b)/60,e++;for(e=-1;0<c;)c*=60,b=parseInt(c+1E-13),c-=b,-1E-13>c||(b&&(d+=(d?" + ":"")+b+" * 60^"+e),e--);return d?d:"0"};g.traceSternBrocot=function(a){var d="";if(g.equals(a,g.ZERO)||g.equals(a,g.ONE)||g.equals(a,g.INFINITY)||g.equals(a,g.INFINULL))return d;if(g.equals(a,g.ZERO))return g.copy(out,g.ZERO);if(g.equals(a,g.ONE))return g.copy(out,g.ONE);if(g.equals(a,
g.INFINITY))return g.copy(out,g.INFINITY);if(g.equals(a,g.INFINULL))return g.copy(out,g.INFINULL);a=g.clone(a);g.isNegative(a)&&(a[0]=-a[0]);for(var c=g.clone(g.ONE),b=[1,0,0,1],e=0,f=0,p=g.MAX_LOOPS;!g.approximates(a,c)&&p--;)g.isLessThan(a,c)?(b[0]+=b[1],b[2]+=b[3],f++,e&&(d+="R",1!==e&&(d+=e),e=0,d+=" ")):(b[1]+=b[0],b[3]+=b[2],e++,f&&(d+="L",1!==f&&(d+=f),f=0,d+=" ")),c[0]=b[0]+b[1],c[1]=b[2]+b[3];f?(d+="L",1!==f&&(d+=f)):e&&(d+="R",1!==e&&(d+=e));0>p&&(d+="...");return d};g.toContinuedFraction=
function(a,d){d="undefined"===typeof d?65536:parseInt(d);if(g.equals(a,g.ZERO))return[0];if(g.equals(a,g.ONE))return[1];if(g.equals(a,g.NEGONE))return[-1];if(g.equals(a,g.INFINITY))return[1,0];if(g.equals(a,g.INFINULL))return[0,0];var c=g.clone(a),b=g.isNegative(c);b&&(c[0]=-c[0]);for(var e=g.clone(g.ONE),f=[1,0,0,1],p=1,h=[0],k=h.length-1;!g.equals(c,e)&&d--;)g.isLessThan(c,e)?(-1===p?h[k]++:(p=-1,h.push(1),k++),f[0]+=f[1],f[2]+=f[3]):(1===p?h[k]++:(p=1,h.push(1),k++),f[1]+=f[0],f[3]+=f[2]),e[0]=
f[0]+f[1],e[1]=f[2]+f[3];0>d?h.push(0):h[k]++;if(b)for(var l in h)h[l]=-h[l];return h};g.fromContinuedFraction=function(a,d){g.fromInteger_copy(a,d[d.length-1]);for(var c=d.length-2;-1<c;c--)g.invert(a,a),g.add(a,g.fromInteger(d[c]),a);return a};g.dump=function(a){g.create();return"rat\t"+g.str(a)+"\n~\t"+g.toDecimal(a)+"\nCF:\t["+g.toContinuedFraction(a)+"]\n"};g.ZERO=g.fromInteger(0);g.ONE=g.fromInteger(1);g.NEGONE=g.fromInteger(-1);g.INFINITY=g.fromValues(1,0);g.INFINULL=g.fromValues(0,0);g.INFINITESIMAL=
g.clone([1,f]);g.PI=g.fromValues(1320192667429,420230377710);"undefined"!==typeof b&&(b.rat=g);if(!q)var q=new BigInteger("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");if(!m)var m=1073741824;var c={EPSILON:2E-16};c.MAX_LOOPS=m;c.create=function(){var a=[];a[0]=BigInteger.ZERO;a[1]=BigInteger.ONE;return a};c.clone=function(a){var d=[];d[0]=a[0];d[1]=a[1];return d};c.fromValues=function(a,d){var b=[];b[0]=new BigInteger(a);b[1]=new BigInteger(d);return c.normalize(b,b)};c.copy=function(a,d){a[0]=d[0];a[1]=
d[1];return a};c.set=function(a,d,b){a[0]=d;a[1]=b;return c.normalize(a,a)};c.toRat=function(a,d){return g.set(a,d[0].toJSValue(),d[1].toJSValue())};c.fromRat=function(a,d){return c.set(a,BigInteger(d[0]),BigInteger(d[1]))};c.abs=function(a,d){a[0]=d[0].abs();a[1]=d[1];return a};c.invert=function(a,d){var c=d[0];a[0]=d[1];a[1]=c;return a};c.reciprocal=c.invert;c.add=function(a,d,b){0===d[1].compare(b[1])?(a[0]=d[0].add(b[0]),a[1]=d[1]):(a[0]=d[0].multiply(b[1]).add(b[0].multiply(d[1])),a[1]=d[1].multiply(b[1]));
return c.normalize(a,a)};c.subtract=function(a,d,b){0===d[1].compare(b[1])?(a[0]=d[0].subtract(b[0]),a[1]=d[1]):(a[0]=d[0].multiply(b[1]).subtract(b[0].multiply(d[1])),a[1]=d[1].multiply(b[1]));return c.normalize(a,a)};c.sub=c.subtract;c.multiply=function(a,d,b){a[0]=d[0].multiply(b[0]);a[1]=d[1].multiply(b[1]);return c.normalize(a,a)};c.mul=c.multiply;c.mediant=function(a,d,b){a[0]=d[0].add(b[0]);a[1]=d[1].add(b[1]);return c.normalize(a,a)};c.divide=function(a,d,b){a[0]=d[0].multiply(b[1]);a[1]=
d[1].multiply(b[0]);return c.normalize(a,a)};c.div=c.divide;c.equals=function(a,d){return a[0].isZero()&&d[0].isZero()||a[1].isZero()&&d[1].isZero()?!0:0===a[0].compare(d[0])&&0===a[1].compare(d[1])};c.approximates=function(a,d){if(c.equals(a,d))return!0;var b=c.create();c.sub(b,a,d);c.abs(b,b);return c.isLessThan(b,c.INFINITESIMAL)};c.isGreaterThan=function(a,d){return c.equals(a,d)?!1:0<a[0].multiply(d[1]).compare(d[0].multiply(a[1]))};c.isLessThan=function(a,d){return c.equals(a,d)?!1:0>a[0].multiply(d[1]).compare(d[0].multiply(a[1]))};
c.isNegative=function(a){return a[0].isNegative()};c.min=function(a,d,b){c.isLessThan(d,b)?(a[0]=d[0],a[1]=d[1]):(a[0]=b[0],a[1]=b[1]);return a};c.max=function(a,d,b){c.isGreaterThan(d,b)?(a[0]=d[0],a[1]=d[1]):(a[0]=b[0],a[1]=b[1]);return a};c.scalar_multiply=function(a,d,b){a[0]=d[0].multiply(b);a[1]=d[1];return c.normalize(a,a)};c.scalar_divide=function(a,d,b){a[0]=d[0];a[1]=d[1].multiply(b);return c.normalize(a,a)};c.normalize=function(a,d){if(d[0].isZero()||d[1].isZero())return d;if(0===d[0].compare(d[1]))return c.clone(c.ONE);
if(d[1].isNegative())a[0]=d[0].negate(),a[1]=d[1].negate();else if(a[0]=d[0],a[1]=d[1],a[1].isZero())return a;var b=h.greatest_common_divisor(a[0].abs(),a[1]);0<b.compare(BigInteger.ONE)&&(a[0]=a[0].quotient(b),a[1]=a[1].quotient(b));return a};c.opposite=function(a,d){a[0]=d[0].negate();a[1]=d[1];return a};c.negative=c.opposite;c.neg=c.opposite;c.power=function(a,d,b){2===b?(a[0]=d[0].square(),a[1]=d[1].square()):0<b?(a[0]=d[0].pow(b),a[1]=d[1].pow(b)):0>b?(b=Math.abs(b),a[0]=d[1].pow(b),a[1]=d[0].pow(b)):
c.copy(a,c.ONE);return a};c.pow=c.power;c.sqrt=function(a,d){return c.nthRoot(a,d,2)};c.nthRoot=function(a,d,b){if(c.equals(d,c.ZERO))return c.copy(a,c.ZERO);if(c.equals(d,c.ONE))return c.copy(a,c.ONE);if(c.equals(d,c.INFINITY))return c.copy(a,c.INFINITY);if(c.equals(d,c.INFINULL))return c.copy(a,c.INFINULL);var e=c.isNegative(d);e&&(d[0]=d[0].negate());c.copy(a,c.ONE);for(var f=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],g=c.clone(c.ONE),p=m;!c.approximates(d,g)&&p--;)c.isLessThan(d,
g)?(f[0]=f[0].add(f[1]),f[2]=f[2].add(f[3])):(f[1]=f[1].add(f[0]),f[3]=f[3].add(f[2])),a[0]=f[0].add(f[1]),a[1]=f[2].add(f[3]),c.pow(g,a,b);e&&(d[0]=d[0].negate(),1===b%2&&c.neg(a,a));return a};c.dot=function(a,d){return a[0].multiply(d[0]).add(a[1].multiply(d[1]))};c.str=function(a){return 0===a[1].compare(BigInteger.ONE)?a[0].toString():a[0].toString()+"/"+a[1].toString()};c.toDecimal=function(a){return a[0].toJSValue()/a[1].toJSValue()};c.dec=c.toDecimal;c.toInteger=function(a){return a[0].quotient(a[1]).toJSValue()};
c.round=c.toInteger;c.toBigInteger=function(a){return a[0].quotient(a[1])};c.floor=function(a){return Math.floor(c.toDecimal(a))};c.ceil=function(a){return Math.ceil(c.toDecimal(a))};c.fromInteger_copy=function(a,d){a[0]=BigInteger(d);a[1]=BigInteger.ONE;return a};c.fromInteger=function(a){return c.fromInteger_copy(c.create(),a)};c.fromIntegerInverse_copy=function(a,d){a[0]=BigInteger.ONE;a[1]=BigInteger(d);a[1].isNegative()&&(a[0]=a[0].negate(),a[1]=a[1].negate());return a};c.fromIntegerInverse=
function(a){return c.fromIntegerInverse_copy(c.create(),a)};c.fromDecimal=function(a){return c.fromDecimal_copy(c.create(),a)};c.fromDecimal_copy=function(a,d){d=parseFloat(d);if(isNaN(d))return c.copy(a,c.INFINULL);if(Infinity===d)return c.copy(a,c.INFINITY);if(Math.abs(d)<c.EPSILON)return c.copy(a,c.ZERO);if(Math.abs(d-1)<c.EPSILON)return c.copy(a,c.ONE);if(Math.abs(d%1)<c.EPSILON)return c.fromInteger_copy(a,d);if(Math.abs(1/d%1)<c.EPSILON)return c.fromIntegerInverse_copy(a,Math.round(1/d));c.copy(a,
c.ONE);for(var b=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],e=d,f=1,g=c.MAX_LOOPS;g--&&Math.abs(d-c.toDecimal(a))>c.EPSILON;)f=Math.floor(e),a[0]=BigInteger(f*b[0]+b[2]),a[1]=BigInteger(f*b[1]+b[3]),e=1/(e-f),b[2]=b[0],b[3]=b[1],b[0]=a[0],b[1]=a[1];return a};c.fromRandom=function(a){a[0]=BigInteger(0xfffffffffffff*Math.random()<<0);a[1]=BigInteger(Math.abs(0xfffffffffffff*Math.random()<<0));return c.normalize(a,a)};c.sin=function(a,d){if(d[1].isZero())return c.copy(a,c.ZERO);c.scalar_multiply(a,
d,2);var b=c.create();c.pow(b,d,2);c.add(b,b,c.ONE);c.divide(a,a,b);return a};c.cos=function(a,d){if(d[1].isZero())return c.neg(a,c.ONE);var b=c.create();c.pow(b,d,2);c.sub(a,c.ONE,b);var e=c.create();c.add(e,c.ONE,b);c.divide(a,a,e);return a};c.tan=function(a,d){c.scalar_multiply(a,d,2);var b=c.create();c.pow(b,d,2);c.scalar_multiply(b,b,2);c.add(a,a,b);c.pow(b,d,4);c.sub(b,c.ONE,b);c.divide(a,a,b);return a};c.toEgyptian=function(a){a=c.clone(a);c.abs(a,a);var d=c.floor(a);d&&c.sub(a,a,c.fromInteger(d));
if(!a[0])return d.toString();d||(d="");for(var b=1,e=c.create();1!==a[0];)b++,e=c.fromValues(1,b),c.isGreaterThan(a,e)&&(d&&(d+=" + "),d+=c.str(e),c.sub(a,a,e));return a?d?d+" + "+c.str(a):c.str(a):d?d:"0"};c.toBabylonian=function(a){var d="",b=c.toDecimal(a);a=parseInt(b);for(var b=b-a,e=0,f=0;0<a;)(e=a%60)&&(d=e+" * 60^"+f+(d?" + ":"")+d),a=(a-e)/60,f++;for(f=-1;0<b;)b*=60,e=parseInt(b+1E-13),b-=e,-1E-13>b||(e&&(d+=(d?" + ":"")+e+" * 60^"+f),f--);return d?d:"0"};c.traceSternBrocot=function(a){var d=
"";if(c.equals(a,c.ZERO)||c.equals(a,c.ONE)||c.equals(a,c.INFINITY)||c.equals(a,c.INFINULL))return d;a=c.clone(a);c.isNegative(a)&&(a[0]=a[0].negate());for(var b=c.clone(c.ONE),e=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],f=0,g=0,p=65536;!c.equals(a,b)&&p--;)c.isLessThan(a,b)?(e[0]=e[0].add(e[1]),e[2]=e[2].add(e[3]),g++,f&&(d+="R",1!==f&&(d+=f),f=0,d+=" ")):(e[1]=e[1].add(e[0]),e[3]=e[3].add(e[2]),f++,g&&(d+="L",1!==g&&(d+=g),g=0,d+=" ")),b[0]=e[0].add(e[1]),b[1]=e[2].add(e[3]);g?(d+=
"L",1!==g&&(d+=g)):f&&(d+="R",1!==f&&(d+=f));0>p&&(d+="...");return d};c.toContinuedFraction=function(a,d){d="undefined"===typeof d?65536:parseInt(d);if(c.equals(a,c.ZERO))return[0];if(c.equals(a,c.ONE))return[1];if(c.equals(a,c.NEGONE))return[-1];if(c.equals(a,c.INFINITY))return[1,0];if(c.equals(a,c.INFINULL))return[0,0];var b=c.clone(a),e=c.isNegative(b);e&&(b[0]=b[0].negate());for(var f=c.clone(c.ONE),g=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],p=1,h=[0],k=h.length-1;!c.equals(b,
f)&&d--;)c.isLessThan(b,f)?(-1===p?h[k]++:(p=-1,h.push(1),k++),g[0]=g[0].add(g[1]),g[2]=g[2].add(g[3])):(1===p?h[k]++:(p=1,h.push(1),k++),g[1]=g[1].add(g[0]),g[3]=g[3].add(g[2])),f[0]=g[0].add(g[1]),f[1]=g[2].add(g[3]);0>d?h.push(0):h[k]++;if(e)for(var l in h)h[l]=-h[l];return h};c.fromContinuedFraction=function(a,d){c.fromInteger_copy(a,d[d.length-1]);for(var b=d.length-2;-1<b;b--)c.invert(a,a),c.add(a,c.fromInteger(d[b]),a);return a};c.fromFactorial=function(a,d){if("undefined"!==typeof factorial.PREPARED[d])return c.fromInteger_copy(a,
factorial.PREPARED[d]);var b=factorial.PREPARED.length-1;for(c.fromInteger_copy(a,factorial.PREPARED[b]);b<d;)c.scalar_multiply(a,a,++b);return a};c.dump=function(a){return"bigrat\t"+c.str(a)+"\n~\t"+c.toDecimal(a)+"\nCF:\t["+c.toContinuedFraction(a)+"]\n"};c.ZERO=c.fromInteger(0);c.ONE=c.fromInteger(1);c.NEGONE=c.fromInteger(-1);c.INFINITY=c.fromValues(1,0);c.INFINULL=c.fromValues(0,0);c.INFINITESIMAL=c.clone([new BigInteger(1),q]);c.PI=c.fromValues("3141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481117450284102701938521105559644622948954930381964428810975665933446128475648233786783165271201909145648566923460348610454326648213393607260249141273724587",
"1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");"undefined"!==typeof b&&(b.bigrat=c);var p=function(a,d){this.a=g.fromValues(parseInt(a),parseInt(d))};p.prototype.toString=function(){return g.str(this.a)};p.prototype.toContinuedFraction=function(a){return g.toContinuedFraction(this.a,
a)};p.prototype.invert=function(){return g.invert(this.a)};p.prototype.reciprocal=p.prototype.invert;p.prototype.add=function(a){var d=g.create();g.add(d,this.a,a.a);return new p(d[0],d[1])};p.prototype.plus=p.prototype.add;p.prototype.subtract=function(a){var d=g.create();g.sub(d,this.a,a.a);return new p(d[0],d[1])};p.prototype.sub=p.prototype.subtract;p.prototype.minus=p.prototype.subtract;p.prototype.multiply=function(a){var d=g.create();g.mul(d,this.a,a.a);return new p(d[0],d[1])};p.prototype.mul=
p.prototype.multiply;p.prototype.times=p.prototype.multiply;p.prototype.mediant=function(a){var d=g.create();g.mediant(d,this.a,a.a);return new p(d[0],d[1])};p.prototype.divide=function(a){var d=g.create();g.div(d,this.a,a.a);return new p(d[0],d[1])};p.prototype.div=p.prototype.divide;p.prototype.divided_by=p.prototype.divide;p.prototype.power=function(a){var d=g.create();g.pow(d,this.a,a);return new p(d[0],d[1])};p.prototype.pow=p.prototype.power;p.prototype.dump=function(){return g.dump(this.a)};
p.prototype.toRat=function(){return g.clone(this.a)};p.prototype.toDecimal=function(){return g.toDecimal(this.a)};p.fromRat=function(a){var d=new p;d.a[0]=a[0];d.a[1]=a[1];return d};p.fromInteger=function(a){return p.fromRat(g.fromInteger(a))};p.fromIntegerInverse=function(a){return p.fromRat(g.fromIntegerInverse(a))};p.fromDecimal=function(a){return p.fromRat(g.fromDecimal(a))};p.fromContinuedFraction=function(a){return p.fromRat(g.fromContinuedFraction(g.create(),a))};"undefined"!==typeof b&&(b.rational=
p)})(m)})(this);(function(b,m){"object"===typeof module&&"object"===typeof module.exports?module.exports=b.document?m(b,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return m(b)}:m(b)})("undefined"!==typeof window?window:this,function(b,m){function k(a){var d=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&d?!0:"array"===c||0===d||"number"===typeof d&&0<d&&d-1 in a}function l(a,d,c){if(n.isFunction(d))return n.grep(a,function(a,b){return!!d.call(a,
b,a)!==c});if(d.nodeType)return n.grep(a,function(a){return a===d!==c});if("string"===typeof d){if(hb.test(d))return n.filter(d,a,c);d=n.filter(d,a)}return n.grep(a,function(a){return 0<=sa.call(d,a)!==c})}function h(a,d){for(;(a=a[d])&&1!==a.nodeType;);return a}function e(a){var d=Ka[a]={};n.each(a.match(Y)||[],function(a,c){d[c]=!0});return d}function f(){J.removeEventListener("DOMContentLoaded",f,!1);b.removeEventListener("load",f,!1);n.ready()}function r(){Object.defineProperty(this.cache={},
0,{get:function(){return{}}});this.expando=n.expando+Math.random()}function g(a,d,c){if(void 0===c&&1===a.nodeType)if(c="data-"+d.replace(ib,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:jb.test(c)?n.parseJSON(c):c}catch(b){}P.set(a,d,c)}else c=void 0;return c}function q(){return!0}function s(){return!1}function c(){try{return J.activeElement}catch(a){}}function p(a,d){return n.nodeName(a,"table")&&n.nodeName(11!==d.nodeType?
d:d.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function a(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function d(a){var d=kb.exec(a.type);d?a.type=d[1]:a.removeAttribute("type");return a}function u(a,d){for(var c=0,b=a.length;c<b;c++)y.set(a[c],"globalEval",!d||y.get(d[c],"globalEval"))}function C(a,d){var c,b,e,f;if(1===d.nodeType){if(y.hasData(a)&&(f=y.access(a),c=y.set(d,f),f=f.events))for(e in delete c.handle,
c.events={},f)for(c=0,b=f[e].length;c<b;c++)n.event.add(d,e,f[e][c]);P.hasData(a)&&(e=P.access(a),e=n.extend({},e),P.set(d,e))}}function x(a,d){var c=a.getElementsByTagName?a.getElementsByTagName(d||"*"):a.querySelectorAll?a.querySelectorAll(d||"*"):[];return void 0===d||d&&n.nodeName(a,d)?n.merge([a],c):c}function A(a,d){var c=n(d.createElement(a)).appendTo(d.body),e=b.getDefaultComputedStyle?b.getDefaultComputedStyle(c[0]).display:n.css(c[0],"display");c.detach();return e}function z(a){var d=J,
c=La[a];c||(c=A(a,d),"none"!==c&&c||(ta=(ta||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(d.documentElement),d=ta[0].contentDocument,d.write(),d.close(),c=A(a,d),ta.detach()),La[a]=c);return c}function w(a,d,c){var b,e,f=a.style;(c=c||ua(a))&&(e=c.getPropertyValue(d)||c[d]);c&&(""!==e||n.contains(a.ownerDocument,a)||(e=n.style(a,d)),Da.test(e)&&Ma.test(d)&&(a=f.width,d=f.minWidth,b=f.maxWidth,f.minWidth=f.maxWidth=f.width=e,e=c.width,f.width=a,f.minWidth=d,f.maxWidth=b));return void 0!==
e?e+"":e}function B(a,d){return{get:function(){if(a())delete this.get;else return(this.get=d).apply(this,arguments)}}}function G(a,d){if(d in a)return d;for(var c=d[0].toUpperCase()+d.slice(1),b=d,e=Na.length;e--;)if(d=Na[e]+c,d in a)return d;return b}function D(a,d,c){return(a=lb.exec(d))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):d}function t(a,d,c,b,e){d=c===(b?"border":"content")?4:"width"===d?1:0;for(var f=0;4>d;d+=2)"margin"===c&&(f+=n.css(a,c+ca[d],!0,e)),b?("content"===c&&(f-=n.css(a,"padding"+
ca[d],!0,e)),"margin"!==c&&(f-=n.css(a,"border"+ca[d]+"Width",!0,e))):(f+=n.css(a,"padding"+ca[d],!0,e),"padding"!==c&&(f+=n.css(a,"border"+ca[d]+"Width",!0,e)));return f}function H(a,d,c){var b=!0,e="width"===d?a.offsetWidth:a.offsetHeight,f=ua(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){e=w(a,d,f);if(0>e||null==e)e=a.style[d];if(Da.test(e))return e;b=g&&(L.boxSizingReliable()||e===a.style[d]);e=parseFloat(e)||0}return e+t(a,d,c||(g?"border":"content"),b,f)+"px"}function N(a,
d){for(var c,b,e,f=[],g=0,p=a.length;g<p;g++)b=a[g],b.style&&(f[g]=y.get(b,"olddisplay"),c=b.style.display,d?(f[g]||"none"!==c||(b.style.display=""),""===b.style.display&&oa(b)&&(f[g]=y.access(b,"olddisplay",z(b.nodeName)))):f[g]||(e=oa(b),(c&&"none"!==c||!e)&&y.set(b,"olddisplay",e?c:n.css(b,"display"))));for(g=0;g<p;g++)b=a[g],!b.style||d&&"none"!==b.style.display&&""!==b.style.display||(b.style.display=d?f[g]||"":"none");return a}function F(a,d,c,b,e){return new F.prototype.init(a,d,c,b,e)}function M(){setTimeout(function(){ja=
void 0});return ja=n.now()}function Q(a,d){var c,b=0,e={height:a};for(d=d?1:0;4>b;b+=2-d)c=ca[b],e["margin"+c]=e["padding"+c]=a;d&&(e.opacity=e.width=a);return e}function R(a,d,c){for(var b,e=(pa[d]||[]).concat(pa["*"]),f=0,g=e.length;f<g;f++)if(b=e[f].call(c,d,a))return b}function K(a,d){var c,b,e,f,g;for(c in a)if(b=n.camelCase(c),e=d[b],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==b&&(a[b]=f,delete a[c]),(g=n.cssHooks[b])&&"expand"in g)for(c in f=g.expand(f),delete a[b],f)c in a||(a[c]=f[c],d[c]=
e);else d[b]=e}function ia(a,d,c){var b,e=0,f=va.length,g=n.Deferred().always(function(){delete p.elem}),p=function(){if(b)return!1;for(var d=ja||M(),d=Math.max(0,h.startTime+h.duration-d),c=1-(d/h.duration||0),e=0,f=h.tweens.length;e<f;e++)h.tweens[e].run(c);g.notifyWith(a,[h,c,d]);if(1>c&&f)return d;g.resolveWith(a,[h]);return!1},h=g.promise({elem:a,props:n.extend({},d),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:d,originalOptions:c,startTime:ja||M(),duration:c.duration,tweens:[],
createTween:function(d,c){var b=n.Tween(a,h.opts,d,c,h.opts.specialEasing[d]||h.opts.easing);h.tweens.push(b);return b},stop:function(d){var c=0,e=d?h.tweens.length:0;if(b)return this;for(b=!0;c<e;c++)h.tweens[c].run(1);d?g.resolveWith(a,[h,d]):g.rejectWith(a,[h,d]);return this}});c=h.props;for(K(c,h.opts.specialEasing);e<f;e++)if(d=va[e].call(h,a,c,h.opts))return d;n.map(c,R,h);n.isFunction(h.opts.start)&&h.opts.start.call(a,h);n.fx.timer(n.extend(p,{elem:a,anim:h,queue:h.opts.queue}));return h.progress(h.opts.progress).done(h.opts.done,
h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function S(a){return function(d,c){"string"!==typeof d&&(c=d,d="*");var b,e=0,f=d.toLowerCase().match(Y)||[];if(n.isFunction(c))for(;b=f[e++];)"+"===b[0]?(b=b.slice(1)||"*",(a[b]=a[b]||[]).unshift(c)):(a[b]=a[b]||[]).push(c)}}function U(a,d,c,b){function e(p){var h;f[p]=!0;n.each(a[p]||[],function(a,v){var p=v(d,c,b);if("string"===typeof p&&!g&&!f[p])return d.dataTypes.unshift(p),e(p),!1;if(g)return!(h=p)});return h}var f={},g=a===Ea;return e(d.dataTypes[0])||
!f["*"]&&e("*")}function I(a,d){var c,b,e=n.ajaxSettings.flatOptions||{};for(c in d)void 0!==d[c]&&((e[c]?a:b||(b={}))[c]=d[c]);b&&n.extend(!0,a,b);return a}function Z(a,d,c,b){var e;if(n.isArray(d))n.each(d,function(d,e){c||mb.test(a)?b(a,e):Z(a+"["+("object"===typeof e?d:"")+"]",e,c,b)});else if(c||"object"!==n.type(d))b(a,d);else for(e in d)Z(a+"["+e+"]",d[e],c,b)}function aa(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}var da=[],V=da.slice,W=da.concat,wa=da.push,sa=da.indexOf,ka={},
nb=ka.toString,Fa=ka.hasOwnProperty,ob="".trim,L={},J=b.document,n=function(a,d){return new n.fn.init(a,d)},pb=/^-ms-/,qb=/-([\da-z])/gi,rb=function(a,d){return d.toUpperCase()};n.fn=n.prototype={jquery:"2.1.0",constructor:n,selector:"",length:0,toArray:function(){return V.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:V.call(this)},pushStack:function(a){a=n.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a,d){return n.each(this,
a,d)},map:function(a){return this.pushStack(n.map(this,function(d,c){return a.call(d,c,d)}))},slice:function(){return this.pushStack(V.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var d=this.length;a=+a+(0>a?d:0);return this.pushStack(0<=a&&a<d?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:wa,sort:da.sort,splice:da.splice};n.extend=n.fn.extend=function(){var a,d,c,b,e,f=arguments[0]||{},g=1,p=arguments.length,
h=!1;"boolean"===typeof f&&(h=f,f=arguments[g]||{},g++);"object"===typeof f||n.isFunction(f)||(f={});g===p&&(f=this,g--);for(;g<p;g++)if(null!=(a=arguments[g]))for(d in a)c=f[d],b=a[d],f!==b&&(h&&b&&(n.isPlainObject(b)||(e=n.isArray(b)))?(e?(e=!1,c=c&&n.isArray(c)?c:[]):c=c&&n.isPlainObject(c)?c:{},f[d]=n.extend(h,c,b)):void 0!==b&&(f[d]=b));return f};n.extend({expando:"jQuery"+("2.1.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isFunction:function(a){return"function"===
n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return 0<=a-parseFloat(a)},isPlainObject:function(a){if("object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!Fa.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}return!0},isEmptyObject:function(a){for(var d in a)return!1;return!0},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?ka[nb.call(a)]||"object":typeof a},
globalEval:function(a){var d;d=eval;if(a=n.trim(a))1===a.indexOf("use strict")?(d=J.createElement("script"),d.text=a,J.head.appendChild(d).parentNode.removeChild(d)):d(a)},camelCase:function(a){return a.replace(pb,"ms-").replace(qb,rb)},nodeName:function(a,d){return a.nodeName&&a.nodeName.toLowerCase()===d.toLowerCase()},each:function(a,d,c){var b,e=0,f=a.length;b=k(a);if(c)if(b)for(;e<f&&(b=d.apply(a[e],c),!1!==b);e++);else for(e in a){if(b=d.apply(a[e],c),!1===b)break}else if(b)for(;e<f&&(b=d.call(a[e],
e,a[e]),!1!==b);e++);else for(e in a)if(b=d.call(a[e],e,a[e]),!1===b)break;return a},trim:function(a){return null==a?"":ob.call(a)},makeArray:function(a,d){var c=d||[];null!=a&&(k(Object(a))?n.merge(c,"string"===typeof a?[a]:a):wa.call(c,a));return c},inArray:function(a,d,c){return null==d?-1:sa.call(d,a,c)},merge:function(a,d){for(var c=+d.length,b=0,e=a.length;b<c;b++)a[e++]=d[b];a.length=e;return a},grep:function(a,d,c){for(var b=[],e=0,f=a.length,g=!c;e<f;e++)c=!d(a[e],e),c!==g&&b.push(a[e]);
return b},map:function(a,d,c){var b,e=0,f=a.length,g=[];if(k(a))for(;e<f;e++)b=d(a[e],e,c),null!=b&&g.push(b);else for(e in a)b=d(a[e],e,c),null!=b&&g.push(b);return W.apply([],g)},guid:1,proxy:function(a,d){var c,b;"string"===typeof d&&(c=a[d],d=a,a=c);if(n.isFunction(a))return b=V.call(arguments,2),c=function(){return a.apply(d||this,b.concat(V.call(arguments)))},c.guid=a.guid=a.guid||n.guid++,c},now:Date.now,support:L});n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,d){ka["[object "+d+"]"]=d.toLowerCase()});var na=function(a){function d(a,c,b,e){var f,g,v,p,h;(c?c.ownerDocument||c:W)!==y&&M(c);c=c||y;b=b||[];if(!a||"string"!==typeof a)return b;if(1!==(p=c.nodeType)&&9!==p)return[];if(R&&!e){if(f=va.exec(a))if(v=f[1])if(9===p)if((g=c.getElementById(v))&&g.parentNode){if(g.id===v)return b.push(g),b}else return b;else{if(c.ownerDocument&&(g=c.ownerDocument.getElementById(v))&&L(c,g)&&g.id===v)return b.push(g),b}else{if(f[2])return U.apply(b,c.getElementsByTagName(a)),
b;if((v=f[3])&&w.getElementsByClassName&&c.getElementsByClassName)return U.apply(b,c.getElementsByClassName(v)),b}if(w.qsa&&(!K||!K.test(a))){g=f=O;v=c;h=9===p&&a;if(1===p&&"object"!==c.nodeName.toLowerCase()){p=n(a);(f=c.getAttribute("id"))?g=f.replace(xa,"\\$&"):c.setAttribute("id",g);g="[id='"+g+"'] ";for(v=p.length;v--;)p[v]=g+r(p[v]);v=ka.test(a)&&l(c.parentNode)||c;h=p.join(",")}if(h)try{return U.apply(b,v.querySelectorAll(h)),b}catch(k){}finally{f||c.removeAttribute("id")}}}var q;a:{a=a.replace(ba,
"$1");g=n(a);if(!e&&1===g.length){f=g[0]=g[0].slice(0);if(2<f.length&&"ID"===(q=f[0]).type&&w.getById&&9===c.nodeType&&R&&t.relative[f[1].type]){c=(t.find.ID(q.matches[0].replace(la,ma),c)||[])[0];if(!c){q=b;break a}a=a.slice(f.shift().value.length)}for(p=ha.needsContext.test(a)?0:f.length;p--;){q=f[p];if(t.relative[v=q.type])break;if(v=t.find[v])if(e=v(q.matches[0].replace(la,ma),ka.test(f[0].type)&&l(c.parentNode)||c)){f.splice(p,1);a=e.length&&r(f);if(!a){U.apply(b,e);q=b;break a}break}}}N(a,g)(e,
c,!R,b,ka.test(a)&&l(c.parentNode)||c);q=b}return q}function c(){function a(c,b){d.push(c+" ")>t.cacheLength&&delete a[d.shift()];return a[c+" "]=b}var d=[];return a}function b(a){a[O]=!0;return a}function e(a){var d=y.createElement("div");try{return!!a(d)}catch(c){return!1}finally{d.parentNode&&d.parentNode.removeChild(d)}}function f(a,d){for(var c=a.split("|"),b=a.length;b--;)t.attrHandle[c[b]]=d}function g(a,d){var c=d&&a,b=c&&1===a.nodeType&&1===d.nodeType&&(~d.sourceIndex||-2147483648)-(~a.sourceIndex||
-2147483648);if(b)return b;if(c)for(;c=c.nextSibling;)if(c===d)return-1;return a?1:-1}function p(a){return function(d){return"input"===d.nodeName.toLowerCase()&&d.type===a}}function h(a){return function(d){var c=d.nodeName.toLowerCase();return("input"===c||"button"===c)&&d.type===a}}function k(a){return b(function(d){d=+d;return b(function(c,b){for(var e,f=a([],c.length,d),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(b[e]=c[e]))})})}function l(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function q(){}
function n(a,c){var b,e,f,g,v,p,h;if(v=wa[a+" "])return c?0:v.slice(0);v=a;p=[];for(h=t.preFilter;v;){if(!b||(e=ja.exec(v)))e&&(v=v.slice(e[0].length)||v),p.push(f=[]);b=!1;if(e=na.exec(v))b=e.shift(),f.push({value:b,type:e[0].replace(ba," ")}),v=v.slice(b.length);for(g in t.filter)!(e=ha[g].exec(v))||h[g]&&!(e=h[g](e))||(b=e.shift(),f.push({value:b,type:g,matches:e}),v=v.slice(b.length));if(!b)break}return c?v.length:v?d.error(a):wa(a,p).slice(0)}function r(a){for(var d=0,c=a.length,b="";d<c;d++)b+=
a[d].value;return b}function u(a,d,c){var b=d.dir,e=c&&"parentNode"===b,f=P++;return d.first?function(d,c,f){for(;d=d[b];)if(1===d.nodeType||e)return a(d,c,f)}:function(d,c,g){var v,p,h=[ea,f];if(g)for(;d=d[b];){if((1===d.nodeType||e)&&a(d,c,g))return!0}else for(;d=d[b];)if(1===d.nodeType||e){p=d[O]||(d[O]={});if((v=p[b])&&v[0]===ea&&v[1]===f)return h[2]=v[2];p[b]=h;if(h[2]=a(d,c,g))return!0}}}function m(a){return 1<a.length?function(d,c,b){for(var e=a.length;e--;)if(!a[e](d,c,b))return!1;return!0}:
a[0]}function C(a,d,c,b,e){for(var f,g=[],v=0,p=a.length,h=null!=d;v<p;v++)if(f=a[v])if(!c||c(f,b,e))g.push(f),h&&d.push(v);return g}function x(a,c,e,f,g,v){f&&!f[O]&&(f=x(f));g&&!g[O]&&(g=x(g,v));return b(function(b,v,p,h){var k,l,q=[],n=[],r=v.length,u;if(!(u=b)){u=c||"*";for(var E=p.nodeType?[p]:p,m=[],ra=0,x=E.length;ra<x;ra++)d(u,E[ra],m);u=m}u=!a||!b&&c?u:C(u,q,a,p,h);E=e?g||(b?a:r||f)?[]:v:u;e&&e(u,E,p,h);if(f)for(k=C(E,n),f(k,[],p,h),p=k.length;p--;)if(l=k[p])E[n[p]]=!(u[n[p]]=l);if(b){if(g||
a){if(g){k=[];for(p=E.length;p--;)(l=E[p])&&k.push(u[p]=l);g(null,E=[],k,h)}for(p=E.length;p--;)(l=E[p])&&-1<(k=g?aa.call(b,l):q[p])&&(b[k]=!(v[k]=l))}}else E=C(E===v?E.splice(r,E.length):E),g?g(null,v,E,h):U.apply(v,E)})}function s(a){var d,c,b,e=a.length,f=t.relative[a[0].type];c=f||t.relative[" "];for(var g=f?1:0,v=u(function(a){return a===d},c,!0),p=u(function(a){return-1<aa.call(d,a)},c,!0),h=[function(a,c,b){return!f&&(b||c!==G)||((d=c).nodeType?v(a,c,b):p(a,c,b))}];g<e;g++)if(c=t.relative[a[g].type])h=
[u(m(h),c)];else{c=t.filter[a[g].type].apply(null,a[g].matches);if(c[O]){for(b=++g;b<e&&!t.relative[a[b].type];b++);return x(1<g&&m(h),1<g&&r(a.slice(0,g-1).concat({value:" "===a[g-2].type?"*":""})).replace(ba,"$1"),c,g<b&&s(a.slice(g,b)),b<e&&s(a=a.slice(b)),b<e&&r(a))}h.push(c)}return m(h)}function A(a,c){var e=0<c.length,f=0<a.length,g=function(b,g,v,p,h){var k,l,q,n=0,r="0",u=b&&[],E=[],m=G,ra=b||f&&t.find.TAG("*",h),x=ea+=null==m?1:Math.random()||.1,gb=ra.length;for(h&&(G=g!==y&&g);r!==gb&&null!=
(k=ra[r]);r++){if(f&&k){for(l=0;q=a[l++];)if(q(k,g,v)){p.push(k);break}h&&(ea=x)}e&&((k=!q&&k)&&n--,b&&u.push(k))}n+=r;if(e&&r!==n){for(l=0;q=c[l++];)q(u,E,g,v);if(b){if(0<n)for(;r--;)u[r]||E[r]||(E[r]=sa.call(p));E=C(E)}U.apply(p,E);h&&!b&&0<E.length&&1<n+c.length&&d.uniqueSort(p)}h&&(ea=x,G=m);return u};return e?b(g):g}var z,w,t,B,F,N,G,D,H,M,y,Q,R,K,I,J,L,O="sizzle"+-new Date,W=a.document,ea=0,P=0,da=c(),wa=c(),Z=c(),V=function(a,d){a===d&&(H=!0);return 0},ia={}.hasOwnProperty,S=[],sa=S.pop,X=
S.push,U=S.push,Y=S.slice,aa=S.indexOf||function(a){for(var d=0,c=this.length;d<c;d++)if(this[d]===a)return d;return-1},fa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),ga="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+fa+")|)|)[\\x20\\t\\r\\n\\f]*\\]",ca=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ga.replace(3,8)+")*)|.*)\\)|)",ba=
/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,ja=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,na=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,oa=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,pa=new RegExp(ca),qa=new RegExp("^"+fa+"$"),ha={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+ga),PSEUDO:new RegExp("^"+ca),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ta=/^(?:input|select|textarea|button)$/i,ua=/^h\d$/i,ya=/^[^{]+\{\s*\[native \w/,va=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ka=/[+~]/,xa=/'|\\/g,la=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ma=function(a,d,c){a="0x"+d-65536;
return a!==a||c?d:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{U.apply(S=Y.call(W.childNodes),W.childNodes),S[W.childNodes.length].nodeType}catch(za){U={apply:S.length?function(a,d){X.apply(a,Y.call(d))}:function(a,d){for(var c=a.length,b=0;a[c++]=d[b++];);a.length=c-1}}}w=d.support={};F=d.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};M=d.setDocument=function(a){var d=a?a.ownerDocument||a:W;a=d.defaultView;if(d===
y||9!==d.nodeType||!d.documentElement)return y;y=d;Q=d.documentElement;R=!F(d);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){M()},!1):a.attachEvent&&a.attachEvent("onunload",function(){M()}));w.attributes=e(function(a){a.className="i";return!a.getAttribute("className")});w.getElementsByTagName=e(function(a){a.appendChild(d.createComment(""));return!a.getElementsByTagName("*").length});w.getElementsByClassName=ya.test(d.getElementsByClassName)&&e(function(a){a.innerHTML=
"<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});w.getById=e(function(a){Q.appendChild(a).id=O;return!d.getElementsByName||!d.getElementsByName(O).length});w.getById?(t.find.ID=function(a,d){if("undefined"!==typeof d.getElementById&&R){var c=d.getElementById(a);return c&&c.parentNode?[c]:[]}},t.filter.ID=function(a){var d=a.replace(la,ma);return function(a){return a.getAttribute("id")===d}}):(delete t.find.ID,t.filter.ID=function(a){var d=
a.replace(la,ma);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===d}});t.find.TAG=w.getElementsByTagName?function(a,d){if("undefined"!==typeof d.getElementsByTagName)return d.getElementsByTagName(a)}:function(a,d){var c,b=[],e=0,f=d.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&b.push(c);return b}return f};t.find.CLASS=w.getElementsByClassName&&function(a,d){if("undefined"!==typeof d.getElementsByClassName&&R)return d.getElementsByClassName(a)};
I=[];K=[];if(w.qsa=ya.test(d.querySelectorAll))e(function(a){a.innerHTML="<select t=''><option selected=''></option></select>";a.querySelectorAll("[t^='']").length&&K.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||K.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||K.push(":checked")}),e(function(a){var c=d.createElement("input");
c.setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&K.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||K.push(":enabled",":disabled");a.querySelectorAll("*,:x");K.push(",.*:")});(w.matchesSelector=ya.test(J=Q.webkitMatchesSelector||Q.mozMatchesSelector||Q.oMatchesSelector||Q.msMatchesSelector))&&e(function(a){w.disconnectedMatch=J.call(a,"div");J.call(a,"[s!='']:x");I.push("!=",ca)});K=K.length&&new RegExp(K.join("|"));
I=I.length&&new RegExp(I.join("|"));L=(a=ya.test(Q.compareDocumentPosition))||ya.test(Q.contains)?function(a,d){var c=9===a.nodeType?a.documentElement:a,b=d&&d.parentNode;return a===b||!!(b&&1===b.nodeType&&(c.contains?c.contains(b):a.compareDocumentPosition&&a.compareDocumentPosition(b)&16))}:function(a,d){if(d)for(;d=d.parentNode;)if(d===a)return!0;return!1};V=a?function(a,c){if(a===c)return H=!0,0;var b=!a.compareDocumentPosition-!c.compareDocumentPosition;if(b)return b;b=(a.ownerDocument||a)===
(c.ownerDocument||c)?a.compareDocumentPosition(c):1;return b&1||!w.sortDetached&&c.compareDocumentPosition(a)===b?a===d||a.ownerDocument===W&&L(W,a)?-1:c===d||c.ownerDocument===W&&L(W,c)?1:D?aa.call(D,a)-aa.call(D,c):0:b&4?-1:1}:function(a,c){if(a===c)return H=!0,0;var b,e=0;b=a.parentNode;var f=c.parentNode,v=[a],p=[c];if(!b||!f)return a===d?-1:c===d?1:b?-1:f?1:D?aa.call(D,a)-aa.call(D,c):0;if(b===f)return g(a,c);for(b=a;b=b.parentNode;)v.unshift(b);for(b=c;b=b.parentNode;)p.unshift(b);for(;v[e]===
p[e];)e++;return e?g(v[e],p[e]):v[e]===W?-1:p[e]===W?1:0};return d};d.matches=function(a,c){return d(a,null,null,c)};d.matchesSelector=function(a,c){(a.ownerDocument||a)!==y&&M(a);c=c.replace(oa,"='$1']");if(!(!w.matchesSelector||!R||I&&I.test(c)||K&&K.test(c)))try{var b=J.call(a,c);if(b||w.disconnectedMatch||a.document&&11!==a.document.nodeType)return b}catch(e){}return 0<d(c,y,null,[a]).length};d.contains=function(a,d){(a.ownerDocument||a)!==y&&M(a);return L(a,d)};d.attr=function(a,d){(a.ownerDocument||
a)!==y&&M(a);var c=t.attrHandle[d.toLowerCase()],c=c&&ia.call(t.attrHandle,d.toLowerCase())?c(a,d,!R):void 0;return void 0!==c?c:w.attributes||!R?a.getAttribute(d):(c=a.getAttributeNode(d))&&c.specified?c.value:null};d.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};d.uniqueSort=function(a){var d,c=[],b=0,e=0;H=!w.detectDuplicates;D=!w.sortStable&&a.slice(0);a.sort(V);if(H){for(;d=a[e++];)d===a[e]&&(b=c.push(e));for(;b--;)a.splice(c[b],1)}D=null;return a};B=d.getText=
function(a){var d,c="",b=0;d=a.nodeType;if(!d)for(;d=a[b++];)c+=B(d);else if(1===d||9===d||11===d){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=B(a)}else if(3===d||4===d)return a.nodeValue;return c};t=d.selectors={cacheLength:50,createPseudo:b,match:ha,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(la,
ma);a[3]=(a[4]||a[5]||"").replace(la,ma);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||d.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&d.error(a[0]);return a},PSEUDO:function(a){var d,c=!a[5]&&a[2];if(ha.CHILD.test(a[0]))return null;a[3]&&void 0!==a[4]?a[2]=a[4]:c&&pa.test(c)&&(d=n(c,!0))&&(d=c.indexOf(")",c.length-d)-c.length)&&(a[0]=a[0].slice(0,d),a[2]=
c.slice(0,d));return a.slice(0,3)}},filter:{TAG:function(a){var d=a.replace(la,ma).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===d}},CLASS:function(a){var d=da[a+" "];return d||(d=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&da(a,function(a){return d.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,b){return function(e){e=d.attr(e,
a);if(null==e)return"!="===c;if(!c)return!0;e+="";return"="===c?e===b:"!="===c?e!==b:"^="===c?b&&0===e.indexOf(b):"*="===c?b&&-1<e.indexOf(b):"$="===c?b&&e.slice(-b.length)===b:"~="===c?-1<(" "+e+" ").indexOf(b):"|="===c?e===b||e.slice(0,b.length+1)===b+"-":!1}},CHILD:function(a,d,c,b,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),v="of-type"===d;return 1===b&&0===e?function(a){return!!a.parentNode}:function(d,c,p){var h,k,l,q,n;c=f!==g?"nextSibling":"previousSibling";var T=d.parentNode,r=v&&
d.nodeName.toLowerCase();p=!p&&!v;if(T){if(f){for(;c;){for(k=d;k=k[c];)if(v?k.nodeName.toLowerCase()===r:1===k.nodeType)return!1;n=c="only"===a&&!n&&"nextSibling"}return!0}n=[g?T.firstChild:T.lastChild];if(g&&p)for(p=T[O]||(T[O]={}),h=p[a]||[],q=h[0]===ea&&h[1],l=h[0]===ea&&h[2],k=q&&T.childNodes[q];k=++q&&k&&k[c]||(l=q=0)||n.pop();){if(1===k.nodeType&&++l&&k===d){p[a]=[ea,q,l];break}}else if(p&&(h=(d[O]||(d[O]={}))[a])&&h[0]===ea)l=h[1];else for(;(k=++q&&k&&k[c]||(l=q=0)||n.pop())&&((v?k.nodeName.toLowerCase()!==
r:1!==k.nodeType)||!++l||(p&&((k[O]||(k[O]={}))[a]=[ea,l]),k!==d)););l-=e;return l===b||0===l%b&&0<=l/b}}},PSEUDO:function(a,c){var e,f=t.pseudos[a]||t.setFilters[a.toLowerCase()]||d.error("unsupported pseudo: "+a);return f[O]?f(c):1<f.length?(e=[a,a,"",c],t.setFilters.hasOwnProperty(a.toLowerCase())?b(function(a,d){for(var b,e=f(a,c),g=e.length;g--;)b=aa.call(a,e[g]),a[b]=!(d[b]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:b(function(a){var d=[],c=[],e=N(a.replace(ba,"$1"));return e[O]?
b(function(a,d,c,b){b=e(a,null,b,[]);for(var f=a.length;f--;)if(c=b[f])a[f]=!(d[f]=c)}):function(a,b,f){d[0]=a;e(d,null,f,c);return!c.pop()}}),has:b(function(a){return function(c){return 0<d(a,c).length}}),contains:b(function(a){return function(d){return-1<(d.textContent||d.innerText||B(d)).indexOf(a)}}),lang:b(function(a){qa.test(a||"")||d.error("unsupported lang: "+a);a=a.replace(la,ma).toLowerCase();return function(d){var c;do if(c=R?d.lang:d.getAttribute("xml:lang")||d.getAttribute("lang"))return c=
c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((d=d.parentNode)&&1===d.nodeType);return!1}}),target:function(d){var c=a.location&&a.location.hash;return c&&c.slice(1)===d.id},root:function(a){return a===Q},focus:function(a){return a===y.activeElement&&(!y.hasFocus||y.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var d=a.nodeName.toLowerCase();return"input"===d&&!!a.checked||"option"===d&&
!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!t.pseudos.empty(a)},header:function(a){return ua.test(a.nodeName)},input:function(a){return ta.test(a.nodeName)},button:function(a){var d=a.nodeName.toLowerCase();return"input"===d&&"button"===a.type||"button"===d},text:function(a){var d;return"input"===a.nodeName.toLowerCase()&&"text"===
a.type&&(null==(d=a.getAttribute("type"))||"text"===d.toLowerCase())},first:k(function(){return[0]}),last:k(function(a,d){return[d-1]}),eq:k(function(a,d,c){return[0>c?c+d:c]}),even:k(function(a,d){for(var c=0;c<d;c+=2)a.push(c);return a}),odd:k(function(a,d){for(var c=1;c<d;c+=2)a.push(c);return a}),lt:k(function(a,d,c){for(d=0>c?c+d:c;0<=--d;)a.push(d);return a}),gt:k(function(a,d,c){for(c=0>c?c+d:c;++c<d;)a.push(c);return a})}};t.pseudos.nth=t.pseudos.eq;for(z in{radio:!0,checkbox:!0,file:!0,password:!0,
image:!0})t.pseudos[z]=p(z);for(z in{submit:!0,reset:!0})t.pseudos[z]=h(z);q.prototype=t.filters=t.pseudos;t.setFilters=new q;N=d.compile=function(a,d){var c,b=[],e=[],f=Z[a+" "];if(!f){d||(d=n(a));for(c=d.length;c--;)f=s(d[c]),f[O]?b.push(f):e.push(f);f=Z(a,A(e,b))}return f};w.sortStable=O.split("").sort(V).join("")===O;w.detectDuplicates=!!H;M();w.sortDetached=e(function(a){return a.compareDocumentPosition(y.createElement("div"))&1});e(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||
f("type|href|height|width",function(a,d,c){if(!c)return a.getAttribute(d,"type"===d.toLowerCase()?1:2)});w.attributes&&e(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||f("value",function(a,d,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});e(function(a){return null==a.getAttribute("disabled")})||f("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
function(a,d,c){var b;if(!c)return!0===a[d]?d.toLowerCase():(b=a.getAttributeNode(d))&&b.specified?b.value:null});return d}(b);n.find=na;n.expr=na.selectors;n.expr[":"]=n.expr.pseudos;n.unique=na.uniqueSort;n.text=na.getText;n.isXMLDoc=na.isXML;n.contains=na.contains;var Oa=n.expr.match.needsContext,Pa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,hb=/^.[^:#\[\.,]*$/;n.filter=function(a,d,c){var b=d[0];c&&(a=":not("+a+")");return 1===d.length&&1===b.nodeType?n.find.matchesSelector(b,a)?[b]:[]:n.find.matches(a,n.grep(d,
function(a){return 1===a.nodeType}))};n.fn.extend({find:function(a){var d,c=this.length,b=[],e=this;if("string"!==typeof a)return this.pushStack(n(a).filter(function(){for(d=0;d<c;d++)if(n.contains(e[d],this))return!0}));for(d=0;d<c;d++)n.find(a,e[d],b);b=this.pushStack(1<c?n.unique(b):b);b.selector=this.selector?this.selector+" "+a:a;return b},filter:function(a){return this.pushStack(l(this,a||[],!1))},not:function(a){return this.pushStack(l(this,a||[],!0))},is:function(a){return!!l(this,"string"===
typeof a&&Oa.test(a)?n(a):a||[],!1).length}});var xa,tb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(n.fn.init=function(a,d){var c;if(!a)return this;if("string"===typeof a){c="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:tb.exec(a);if(!c||!c[1]&&d)return!d||d.jquery?(d||xa).find(a):this.constructor(d).find(a);if(c[1]){if(d=d instanceof n?d[0]:d,n.merge(this,n.parseHTML(c[1],d&&d.nodeType?d.ownerDocument||d:J,!0)),Pa.test(c[1])&&n.isPlainObject(d))for(c in d)if(n.isFunction(this[c]))this[c](d[c]);
else this.attr(c,d[c])}else(c=J.getElementById(c[2]))&&c.parentNode&&(this.length=1,this[0]=c),this.context=J,this.selector=a;return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(n.isFunction(a))return"undefined"!==typeof xa.ready?xa.ready(a):a(n);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return n.makeArray(a,this)}).prototype=n.fn;xa=n(J);var ub=/^(?:parents|prev(?:Until|All))/,vb={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,
d,c){for(var b=[],e=void 0!==c;(a=a[d])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&n(a).is(c))break;b.push(a)}return b},sibling:function(a,d){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==d&&c.push(a);return c}});n.fn.extend({has:function(a){var d=n(a,this),c=d.length;return this.filter(function(){for(var a=0;a<c;a++)if(n.contains(this,d[a]))return!0})},closest:function(a,d){for(var c,b=0,e=this.length,f=[],g=Oa.test(a)||"string"!==typeof a?n(a,d||this.context):0;b<e;b++)for(c=this[b];c&&c!==
d;c=c.parentNode)if(11>c.nodeType&&(g?-1<g.index(c):1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(1<f.length?n.unique(f):f)},index:function(a){return a?"string"===typeof a?sa.call(n(a),this[0]):sa.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,d){return this.pushStack(n.unique(n.merge(this.get(),n(a,d))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});n.each({parent:function(a){return(a=
a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,d,c){return n.dir(a,"parentNode",c)},next:function(a){return h(a,"nextSibling")},prev:function(a){return h(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,d,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,d,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||
{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,d){n.fn[a]=function(c,b){var e=n.map(this,d,c);"Until"!==a.slice(-5)&&(b=c);b&&"string"===typeof b&&(e=n.filter(b,e));1<this.length&&(vb[a]||n.unique(e),ub.test(a)&&e.reverse());return this.pushStack(e)}});var Y=/\S+/g,Ka={};n.Callbacks=function(a){a="string"===typeof a?Ka[a]||e(a):n.extend({},a);var d,c,b,f,g,p,h=[],k=!a.once&&[],l=function(e){d=
a.memory&&e;c=!0;p=f||0;f=0;g=h.length;for(b=!0;h&&p<g;p++)if(!1===h[p].apply(e[0],e[1])&&a.stopOnFalse){d=!1;break}b=!1;h&&(k?k.length&&l(k.shift()):d?h=[]:q.disable())},q={add:function(){if(h){var c=h.length;(function sb(d){n.each(d,function(d,c){var b=n.type(c);"function"===b?a.unique&&q.has(c)||h.push(c):c&&c.length&&"string"!==b&&sb(c)})})(arguments);b?g=h.length:d&&(f=c,l(d))}return this},remove:function(){h&&n.each(arguments,function(a,d){for(var c;-1<(c=n.inArray(d,h,c));)h.splice(c,1),b&&
(c<=g&&g--,c<=p&&p--)});return this},has:function(a){return a?-1<n.inArray(a,h):!(!h||!h.length)},empty:function(){h=[];g=0;return this},disable:function(){h=k=d=void 0;return this},disabled:function(){return!h},lock:function(){k=void 0;d||q.disable();return this},locked:function(){return!k},fireWith:function(a,d){!h||c&&!k||(d=d||[],d=[a,d.slice?d.slice():d],b?k.push(d):l(d));return this},fire:function(){q.fireWith(this,arguments);return this},fired:function(){return!!c}};return q};n.extend({Deferred:function(a){var d=
[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",b={state:function(){return c},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(d,function(d,f){var g=n.isFunction(a[d])&&a[d];e[f[1]](function(){var a=g&&g.apply(this,arguments);if(a&&n.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);
else c[f[0]+"With"](this===b?c.promise():this,g?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?n.extend(a,b):b}},e={};b.pipe=b.then;n.each(d,function(a,f){var g=f[2],p=f[3];b[f[1]]=g.add;p&&g.add(function(){c=p},d[a^1][2].disable,d[2][2].lock);e[f[0]]=function(){e[f[0]+"With"](this===e?b:this,arguments);return this};e[f[0]+"With"]=g.fireWith});b.promise(e);a&&a.call(e,e);return e},when:function(a){var d=0,c=V.call(arguments),b=c.length,e=1!==b||a&&n.isFunction(a.promise)?
b:0,f=1===e?a:n.Deferred(),g=function(a,d,c){return function(b){d[a]=this;c[a]=1<arguments.length?V.call(arguments):b;c===p?f.notifyWith(d,c):--e||f.resolveWith(d,c)}},p,h,k;if(1<b)for(p=Array(b),h=Array(b),k=Array(b);d<b;d++)c[d]&&n.isFunction(c[d].promise)?c[d].promise().done(g(d,k,c)).fail(f.reject).progress(g(d,h,p)):--e;e||f.resolveWith(k,c);return f.promise()}});var za;n.fn.ready=function(a){n.ready.promise().done(a);return this};n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:
n.ready(!0)},ready:function(a){(!0===a?--n.readyWait:n.isReady)||(n.isReady=!0,!0!==a&&0<--n.readyWait||(za.resolveWith(J,[n]),n.fn.trigger&&n(J).trigger("ready").off("ready")))}});n.ready.promise=function(a){za||(za=n.Deferred(),"complete"===J.readyState?setTimeout(n.ready):(J.addEventListener("DOMContentLoaded",f,!1),b.addEventListener("load",f,!1)));return za.promise(a)};n.ready.promise();var fa=n.access=function(a,d,c,b,e,f,g){var p=0,h=a.length,k=null==c;if("object"===n.type(c))for(p in e=!0,
c)n.access(a,d,p,c[p],!0,f,g);else if(void 0!==b&&(e=!0,n.isFunction(b)||(g=!0),k&&(g?(d.call(a,b),d=null):(k=d,d=function(a,d,c){return k.call(n(a),c)})),d))for(;p<h;p++)d(a[p],c,g?b:b.call(a[p],p,d(a[p],c)));return e?a:k?d.call(a):h?d(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};r.uid=1;r.accepts=n.acceptData;r.prototype={key:function(a){if(!r.accepts(a))return 0;var d={},c=a[this.expando];if(!c){c=r.uid++;try{d[this.expando]={value:c},Object.defineProperties(a,
d)}catch(b){d[this.expando]=c,n.extend(a,d)}}this.cache[c]||(this.cache[c]={});return c},set:function(a,d,c){var b;a=this.key(a);var e=this.cache[a];if("string"===typeof d)e[d]=c;else if(n.isEmptyObject(e))n.extend(this.cache[a],d);else for(b in d)e[b]=d[b];return e},get:function(a,d){var c=this.cache[this.key(a)];return void 0===d?c:c[d]},access:function(a,d,c){if(void 0===d||d&&"string"===typeof d&&void 0===c)return c=this.get(a,d),void 0!==c?c:this.get(a,n.camelCase(d));this.set(a,d,c);return void 0!==
c?c:d},remove:function(a,d){var c,b;c=this.key(a);var e=this.cache[c];if(void 0===d)this.cache[c]={};else for(n.isArray(d)?b=d.concat(d.map(n.camelCase)):(c=n.camelCase(d),d in e?b=[d,c]:(b=c,b=b in e?[b]:b.match(Y)||[])),c=b.length;c--;)delete e[b[c]]},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var y=new r,P=new r,jb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ib=/([A-Z])/g;n.extend({hasData:function(a){return P.hasData(a)||
y.hasData(a)},data:function(a,d,c){return P.access(a,d,c)},removeData:function(a,d){P.remove(a,d)},_data:function(a,d,c){return y.access(a,d,c)},_removeData:function(a,d){y.remove(a,d)}});n.fn.extend({data:function(a,d){var c,b,e,f=this[0],p=f&&f.attributes;if(void 0===a){if(this.length&&(e=P.get(f),1===f.nodeType&&!y.get(f,"hasDataAttrs"))){for(c=p.length;c--;)b=p[c].name,0===b.indexOf("data-")&&(b=n.camelCase(b.slice(5)),g(f,b,e[b]));y.set(f,"hasDataAttrs",!0)}return e}return"object"===typeof a?
this.each(function(){P.set(this,a)}):fa(this,function(d){var c,b=n.camelCase(a);if(f&&void 0===d){c=P.get(f,a);if(void 0!==c)return c;c=P.get(f,b);if(void 0!==c)return c;c=g(f,b,void 0);if(void 0!==c)return c}else this.each(function(){var c=P.get(this,b);P.set(this,b,d);-1!==a.indexOf("-")&&void 0!==c&&P.set(this,a,d)})},null,d,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){P.remove(this,a)})}});n.extend({queue:function(a,d,c){var b;if(a)return d=(d||"fx")+"queue",
b=y.get(a,d),c&&(!b||n.isArray(c)?b=y.access(a,d,n.makeArray(c)):b.push(c)),b||[]},dequeue:function(a,d){d=d||"fx";var c=n.queue(a,d),b=c.length,e=c.shift(),f=n._queueHooks(a,d),g=function(){n.dequeue(a,d)};"inprogress"===e&&(e=c.shift(),b--);e&&("fx"===d&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f));!b&&f&&f.empty.fire()},_queueHooks:function(a,d){var c=d+"queueHooks";return y.get(a,c)||y.access(a,c,{empty:n.Callbacks("once memory").add(function(){y.remove(a,[d+"queue",c])})})}});n.fn.extend({queue:function(a,
d){var c=2;"string"!==typeof a&&(d=a,a="fx",c--);return arguments.length<c?n.queue(this[0],a):void 0===d?this:this.each(function(){var c=n.queue(this,a,d);n._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,d){var c,b=1,e=n.Deferred(),f=this,g=this.length,p=function(){--b||e.resolveWith(f,[f])};"string"!==typeof a&&(d=a,a=void 0);for(a=
a||"fx";g--;)(c=y.get(f[g],a+"queueHooks"))&&c.empty&&(b++,c.empty.add(p));p();return e.promise(d)}});var Aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ca=["Top","Right","Bottom","Left"],oa=function(a,d){a=d||a;return"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},Qa=/^(?:checkbox|radio)$/i;(function(){var a=J.createDocumentFragment().appendChild(J.createElement("div"));a.innerHTML="<input type='radio' checked='checked' name='t'/>";L.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;
a.innerHTML="<textarea>x</textarea>";L.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue})();L.focusinBubbles="onfocusin"in b;var wb=/^key/,xb=/^(?:mouse|contextmenu)|click/,Ra=/^(?:focusinfocus|focusoutblur)$/,Sa=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(a,d,c,b,e){var f,g,p,h,k,l,q,r,u;if(k=y.get(a))for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(h=k.events)||(h=k.events={}),(g=k.handle)||(g=k.handle=function(d){return"undefined"!==typeof n&&n.event.triggered!==
d.type?n.event.dispatch.apply(a,arguments):void 0}),d=(d||"").match(Y)||[""],k=d.length;k--;)p=Sa.exec(d[k])||[],r=l=p[1],u=(p[2]||"").split(".").sort(),r&&(p=n.event.special[r]||{},r=(e?p.delegateType:p.bindType)||r,p=n.event.special[r]||{},l=n.extend({type:r,origType:l,data:b,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:u.join(".")},f),(q=h[r])||(q=h[r]=[],q.delegateCount=0,p.setup&&!1!==p.setup.call(a,b,u,g)||a.addEventListener&&a.addEventListener(r,
g,!1)),p.add&&(p.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?q.splice(q.delegateCount++,0,l):q.push(l),n.event.global[r]=!0)},remove:function(a,d,c,b,e){var f,g,p,h,k,l,q,r,u,m,C,x=y.hasData(a)&&y.get(a);if(x&&(h=x.events)){d=(d||"").match(Y)||[""];for(k=d.length;k--;)if(p=Sa.exec(d[k])||[],u=C=p[1],m=(p[2]||"").split(".").sort(),u){q=n.event.special[u]||{};u=(b?q.delegateType:q.bindType)||u;r=h[u]||[];p=p[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)");for(g=f=r.length;f--;)l=
r[f],!e&&C!==l.origType||c&&c.guid!==l.guid||p&&!p.test(l.namespace)||b&&b!==l.selector&&("**"!==b||!l.selector)||(r.splice(f,1),l.selector&&r.delegateCount--,q.remove&&q.remove.call(a,l));g&&!r.length&&(q.teardown&&!1!==q.teardown.call(a,m,x.handle)||n.removeEvent(a,u,x.handle),delete h[u])}else for(u in h)n.event.remove(a,u+d[k],c,b,!0);n.isEmptyObject(h)&&(delete x.handle,y.remove(a,"events"))}},trigger:function(a,d,c,e){var f,g,p,h,k,l,q=[c||J],r=Fa.call(a,"type")?a.type:a;l=Fa.call(a,"namespace")?
a.namespace.split("."):[];g=f=c=c||J;if(3!==c.nodeType&&8!==c.nodeType&&!Ra.test(r+n.event.triggered)&&(0<=r.indexOf(".")&&(l=r.split("."),r=l.shift(),l.sort()),h=0>r.indexOf(":")&&"on"+r,a=a[n.expando]?a:new n.Event(r,"object"===typeof a&&a),a.isTrigger=e?2:3,a.namespace=l.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=c),d=null==d?[a]:n.makeArray(d,[a]),l=n.event.special[r]||{},e||!l.trigger||!1!==l.trigger.apply(c,
d))){if(!e&&!l.noBubble&&!n.isWindow(c)){p=l.delegateType||r;Ra.test(p+r)||(g=g.parentNode);for(;g;g=g.parentNode)q.push(g),f=g;f===(c.ownerDocument||J)&&q.push(f.defaultView||f.parentWindow||b)}for(f=0;(g=q[f++])&&!a.isPropagationStopped();)a.type=1<f?p:l.bindType||r,(k=(y.get(g,"events")||{})[a.type]&&y.get(g,"handle"))&&k.apply(g,d),(k=h&&g[h])&&k.apply&&n.acceptData(g)&&(a.result=k.apply(g,d),!1===a.result&&a.preventDefault());a.type=r;e||a.isDefaultPrevented()||l._default&&!1!==l._default.apply(q.pop(),
d)||!n.acceptData(c)||!h||!n.isFunction(c[r])||n.isWindow(c)||((f=c[h])&&(c[h]=null),n.event.triggered=r,c[r](),n.event.triggered=void 0,f&&(c[h]=f));return a.result}},dispatch:function(a){a=n.event.fix(a);var d,c,b,e,f=[],g=V.call(arguments);d=(y.get(this,"events")||{})[a.type]||[];var p=n.event.special[a.type]||{};g[0]=a;a.delegateTarget=this;if(!p.preDispatch||!1!==p.preDispatch.call(this,a)){f=n.event.handlers.call(this,a,d);for(d=0;(e=f[d++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,
c=0;(b=e.handlers[c++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(b.namespace))a.handleObj=b,a.data=b.data,b=((n.event.special[b.origType]||{}).handle||b.handler).apply(e.elem,g),void 0!==b&&!1===(a.result=b)&&(a.preventDefault(),a.stopPropagation());p.postDispatch&&p.postDispatch.call(this,a);return a.result}},handlers:function(a,d){var c,b,e,f,g=[],p=d.delegateCount,h=a.target;if(p&&h.nodeType&&(!a.button||"click"!==a.type))for(;h!==this;h=h.parentNode||this)if(!0!==
h.disabled||"click"!==a.type){b=[];for(c=0;c<p;c++)f=d[c],e=f.selector+" ",void 0===b[e]&&(b[e]=f.needsContext?0<=n(e,this).index(h):n.find(e,this,null,[h]).length),b[e]&&b.push(f);b.length&&g.push({elem:h,handlers:b})}p<d.length&&g.push({elem:this,handlers:d.slice(p)});return g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,d){null==
a.which&&(a.which=null!=d.charCode?d.charCode:d.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var c,b,e=d.button;null==a.pageX&&null!=d.clientX&&(c=a.target.ownerDocument||J,b=c.documentElement,c=c.body,a.pageX=d.clientX+(b&&b.scrollLeft||c&&c.scrollLeft||0)-(b&&b.clientLeft||c&&c.clientLeft||0),a.pageY=d.clientY+(b&&b.scrollTop||c&&c.scrollTop||0)-(b&&b.clientTop||c&&c.clientTop||0));a.which||
void 0===e||(a.which=e&1?1:e&2?3:e&4?2:0);return a}},fix:function(a){if(a[n.expando])return a;var d,c,b;d=a.type;var e=a,f=this.fixHooks[d];f||(this.fixHooks[d]=f=xb.test(d)?this.mouseHooks:wb.test(d)?this.keyHooks:{});b=f.props?this.props.concat(f.props):this.props;a=new n.Event(e);for(d=b.length;d--;)c=b[d],a[c]=e[c];a.target||(a.target=J);3===a.target.nodeType&&(a.target=a.target.parentNode);return f.filter?f.filter(a,e):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==c()&&this.focus)return this.focus(),
!1},delegateType:"focusin"},blur:{trigger:function(){if(this===c()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&n.nodeName(this,"input"))return this.click(),!1},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,d,c,b){a=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});b?n.event.trigger(a,
null,d):n.event.dispatch.call(d,a);a.isDefaultPrevented()&&c.preventDefault()}};n.removeEvent=function(a,d,c){a.removeEventListener&&a.removeEventListener(d,c,!1)};n.Event=function(a,d){if(!(this instanceof n.Event))return new n.Event(a,d);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.getPreventDefault&&a.getPreventDefault()?q:s):this.type=a;d&&n.extend(this,d);this.timeStamp=a&&a.timeStamp||n.now();this[n.expando]=!0};
n.Event.prototype={isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=q;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=q;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=q;this.stopPropagation()}};n.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,d){n.event.special[a]=
{delegateType:d,bindType:d,handle:function(a){var c,b=a.relatedTarget,e=a.handleObj;if(!b||b!==this&&!n.contains(this,b))a.type=e.origType,c=e.handler.apply(this,arguments),a.type=d;return c}}});L.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,d){var c=function(a){n.event.simulate(d,a.target,n.event.fix(a),!0)};n.event.special[d]={setup:function(){var b=this.ownerDocument||this,e=y.access(b,d);e||b.addEventListener(a,c,!0);y.access(b,d,(e||0)+1)},teardown:function(){var b=this.ownerDocument||
this,e=y.access(b,d)-1;e?y.access(b,d,e):(b.removeEventListener(a,c,!0),y.remove(b,d))}}});n.fn.extend({on:function(a,d,c,b,e){var f,g;if("object"===typeof a){"string"!==typeof d&&(c=c||d,d=void 0);for(g in a)this.on(g,d,c,a[g],e);return this}null==c&&null==b?(b=d,c=d=void 0):null==b&&("string"===typeof d?(b=c,c=void 0):(b=c,c=d,d=void 0));if(!1===b)b=s;else if(!b)return this;1===e&&(f=b,b=function(a){n().off(a);return f.apply(this,arguments)},b.guid=f.guid||(f.guid=n.guid++));return this.each(function(){n.event.add(this,
a,b,c,d)})},one:function(a,d,c,b){return this.on(a,d,c,b,1)},off:function(a,d,c){var b;if(a&&a.preventDefault&&a.handleObj)return b=a.handleObj,n(a.delegateTarget).off(b.namespace?b.origType+"."+b.namespace:b.origType,b.selector,b.handler),this;if("object"===typeof a){for(b in a)this.off(b,d,a[b]);return this}if(!1===d||"function"===typeof d)c=d,d=void 0;!1===c&&(c=s);return this.each(function(){n.event.remove(this,a,c,d)})},trigger:function(a,d){return this.each(function(){n.event.trigger(a,d,this)})},
triggerHandler:function(a,d){var c=this[0];if(c)return n.event.trigger(a,d,c,!0)}});var Ta=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ua=/<([\w:]+)/,yb=/<|&#?\w+;/,zb=/<(?:script|style|link)/i,Ab=/checked\s*(?:[^=]|=\s*.checked.)/i,Va=/^$|\/(?:java|ecma)script/i,kb=/^true\/(.*)/,Bb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,X={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,
"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};X.optgroup=X.option;X.tbody=X.tfoot=X.colgroup=X.caption=X.thead;X.th=X.td;n.extend({clone:function(a,d,c){var b,e,f,g,p=a.cloneNode(!0),h=n.contains(a.ownerDocument,a);if(!(L.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=x(p),f=x(a),b=0,e=f.length;b<e;b++){var k=f[b],l=g[b],q=l.nodeName.toLowerCase();if("input"===q&&Qa.test(k.type))l.checked=k.checked;else if("input"===
q||"textarea"===q)l.defaultValue=k.defaultValue}if(d)if(c)for(f=f||x(a),g=g||x(p),b=0,e=f.length;b<e;b++)C(f[b],g[b]);else C(a,p);g=x(p,"script");0<g.length&&u(g,!h&&x(a,"script"));return p},buildFragment:function(a,d,c,b){for(var e,f,g,p=d.createDocumentFragment(),h=[],k=0,l=a.length;k<l;k++)if((e=a[k])||0===e)if("object"===n.type(e))n.merge(h,e.nodeType?[e]:e);else if(yb.test(e)){f=f||p.appendChild(d.createElement("div"));g=(Ua.exec(e)||["",""])[1].toLowerCase();g=X[g]||X._default;f.innerHTML=g[1]+
e.replace(Ta,"<$1></$2>")+g[2];for(g=g[0];g--;)f=f.lastChild;n.merge(h,f.childNodes);f=p.firstChild;f.textContent=""}else h.push(d.createTextNode(e));p.textContent="";for(k=0;e=h[k++];)if(!b||-1===n.inArray(e,b))if(a=n.contains(e.ownerDocument,e),f=x(p.appendChild(e),"script"),a&&u(f),c)for(g=0;e=f[g++];)Va.test(e.type||"")&&c.push(e);return p},cleanData:function(a){for(var d,c,b,e,f,g,p=n.event.special,h=0;void 0!==(c=a[h]);h++){if(n.acceptData(c)&&(f=c[y.expando])&&(d=y.cache[f])){b=Object.keys(d.events||
{});if(b.length)for(g=0;void 0!==(e=b[g]);g++)p[e]?n.event.remove(c,e):n.removeEvent(c,e,d.handle);y.cache[f]&&delete y.cache[f]}delete P.cache[c[P.expando]]}}});n.fn.extend({text:function(a){return fa(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||
p(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=p(this,a);d.insertBefore(a,d.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,d){for(var c,b=a?n.filter(a,this):
this,e=0;null!=(c=b[e]);e++)d||1!==c.nodeType||n.cleanData(x(c)),c.parentNode&&(d&&n.contains(c.ownerDocument,c)&&u(x(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,d=0;null!=(a=this[d]);d++)1===a.nodeType&&(n.cleanData(x(a,!1)),a.textContent="");return this},clone:function(a,d){a=null==a?!1:a;d=null==d?a:d;return this.map(function(){return n.clone(this,a,d)})},html:function(a){return fa(this,function(a){var d=this[0]||{},c=0,b=this.length;if(void 0===a&&1===d.nodeType)return d.innerHTML;
if("string"===typeof a&&!zb.test(a)&&!X[(Ua.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ta,"<$1></$2>");try{for(;c<b;c++)d=this[c]||{},1===d.nodeType&&(n.cleanData(x(d,!1)),d.innerHTML=a);d=0}catch(e){}}d&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];this.domManip(arguments,function(d){a=this.parentNode;n.cleanData(x(this));a&&a.replaceChild(d,this)});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},
domManip:function(c,b){c=W.apply([],c);var e,f,g,p,h=0,k=this.length,l=this,q=k-1,r=c[0],u=n.isFunction(r);if(u||1<k&&"string"===typeof r&&!L.checkClone&&Ab.test(r))return this.each(function(a){var d=l.eq(a);u&&(c[0]=r.call(this,a,d.html()));d.domManip(c,b)});if(k&&(e=n.buildFragment(c,this[0].ownerDocument,!1,this),f=e.firstChild,1===e.childNodes.length&&(e=f),f)){f=n.map(x(e,"script"),a);for(g=f.length;h<k;h++)p=e,h!==q&&(p=n.clone(p,!0,!0),g&&n.merge(f,x(p,"script"))),b.call(this[h],p,h);if(g)for(e=
f[f.length-1].ownerDocument,n.map(f,d),h=0;h<g;h++)p=f[h],Va.test(p.type||"")&&!y.access(p,"globalEval")&&n.contains(e,p)&&(p.src?n._evalUrl&&n._evalUrl(p.src):n.globalEval(p.textContent.replace(Bb,"")))}return this}});n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,d){n.fn[a]=function(a){for(var c=[],b=n(a),e=b.length-1,f=0;f<=e;f++)a=f===e?this:this.clone(!0),n(b[f])[d](a),wa.apply(c,a.get());return this.pushStack(c)}});
var ta,La={},Ma=/^margin/,Da=new RegExp("^("+Aa+")(?!px)[a-z%]+$","i"),ua=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};(function(){function a(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%";e.appendChild(f);var p=b.getComputedStyle(g,null);d="1%"!==p.top;c="4px"===p.width;e.removeChild(f)}var d,c,e=J.documentElement,f=J.createElement("div"),
g=J.createElement("div");g.style.backgroundClip="content-box";g.cloneNode(!0).style.backgroundClip="";L.clearCloneStyle="content-box"===g.style.backgroundClip;f.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";f.appendChild(g);b.getComputedStyle&&n.extend(L,{pixelPosition:function(){a();return d},boxSizingReliable:function(){null==c&&a();return c},reliableMarginRight:function(){var a;a=g.appendChild(J.createElement("div"));a.style.cssText=g.style.cssText=
"padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box";a.style.marginRight=a.style.width="0";g.style.width="1px";e.appendChild(f);a=!parseFloat(b.getComputedStyle(a,null).marginRight);e.removeChild(f);g.innerHTML="";return a}})})();n.swap=function(a,d,c,b){var e,f={};for(e in d)f[e]=a.style[e],a.style[e]=d[e];c=c.apply(a,b||[]);for(e in d)a.style[e]=f[e];return c};var Cb=/^(none|table(?!-c[ea]).+)/,lb=new RegExp("^("+Aa+")(.*)$",
"i"),Db=new RegExp("^([+-])=("+Aa+")","i"),Eb={position:"absolute",visibility:"hidden",display:"block"},Wa={letterSpacing:0,fontWeight:400},Na=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(a,d){if(d){var c=w(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,d,c,b){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,
f,g,p=n.camelCase(d),h=a.style;d=n.cssProps[p]||(n.cssProps[p]=G(h,p));g=n.cssHooks[d]||n.cssHooks[p];if(void 0!==c)f=typeof c,"string"===f&&(e=Db.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,d)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[p]||(c+="px"),L.clearCloneStyle||""!==c||0!==d.indexOf("background")||(h[d]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,b))||(h[d]="",h[d]=c));else return g&&"get"in g&&void 0!==(e=g.get(a,!1,b))?e:h[d]}},css:function(a,d,c,b){var e,f;f=n.camelCase(d);
d=n.cssProps[f]||(n.cssProps[f]=G(a.style,f));(f=n.cssHooks[d]||n.cssHooks[f])&&"get"in f&&(e=f.get(a,!0,c));void 0===e&&(e=w(a,d,b));"normal"===e&&d in Wa&&(e=Wa[d]);return""===c||c?(a=parseFloat(e),!0===c||n.isNumeric(a)?a||0:e):e}});n.each(["height","width"],function(a,d){n.cssHooks[d]={get:function(a,c,b){if(c)return 0===a.offsetWidth&&Cb.test(n.css(a,"display"))?n.swap(a,Eb,function(){return H(a,d,b)}):H(a,d,b)},set:function(a,c,b){var e=b&&ua(a);return D(a,c,b?t(a,d,b,"border-box"===n.css(a,
"boxSizing",!1,e),e):0)}}});n.cssHooks.marginRight=B(L.reliableMarginRight,function(a,d){if(d)return n.swap(a,{display:"inline-block"},w,[a,"marginRight"])});n.each({margin:"",padding:"",border:"Width"},function(a,d){n.cssHooks[a+d]={expand:function(c){var b=0,e={};for(c="string"===typeof c?c.split(" "):[c];4>b;b++)e[a+ca[b]+d]=c[b]||c[b-2]||c[0];return e}};Ma.test(a)||(n.cssHooks[a+d].set=D)});n.fn.extend({css:function(a,d){return fa(this,function(a,d,c){var b,e={},f=0;if(n.isArray(d)){c=ua(a);for(b=
d.length;f<b;f++)e[d[f]]=n.css(a,d[f],!1,c);return e}return void 0!==c?n.style(a,d,c):n.css(a,d)},a,d,1<arguments.length)},show:function(){return N(this,!0)},hide:function(){return N(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){oa(this)?n(this).show():n(this).hide()})}});n.Tween=F;F.prototype={constructor:F,init:function(a,d,c,b,e,f){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=d;this.start=this.now=this.cur();this.end=b;this.unit=
f||(n.cssNumber[c]?"":"px")},cur:function(){var a=F.propHooks[this.prop];return a&&a.get?a.get(this):F.propHooks._default.get(this)},run:function(a){var d,c=F.propHooks[this.prop];this.pos=this.options.duration?d=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):d=a;this.now=(this.end-this.start)*d+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):F.propHooks._default.set(this);return this}};F.prototype.init.prototype=F.prototype;
F.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=n.css(a.elem,a.prop,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(n.fx.step[a.prop])n.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};n.easing={linear:function(a){return a},
swing:function(a){return.5-Math.cos(a*Math.PI)/2}};n.fx=F.prototype.init;n.fx.step={};var ja,Ba,Fb=/^(?:toggle|show|hide)$/,Xa=new RegExp("^(?:([+-])=|)("+Aa+")([a-z%]*)$","i"),Gb=/queueHooks$/,va=[function(a,d,c){var b,e,f,g,p,h=this,k={},l=a.style,q=a.nodeType&&oa(a),r=y.get(a,"fxshow");c.queue||(g=n._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,p=g.empty.fire,g.empty.fire=function(){g.unqueued||p()}),g.unqueued++,h.always(function(){h.always(function(){g.unqueued--;n.queue(a,"fx").length||
g.empty.fire()})}));1===a.nodeType&&("height"in d||"width"in d)&&(c.overflow=[l.overflow,l.overflowX,l.overflowY],e=n.css(a,"display"),"none"===e&&(e=z(a.nodeName)),"inline"===e&&"none"===n.css(a,"float")&&(l.display="inline-block"));c.overflow&&(l.overflow="hidden",h.always(function(){l.overflow=c.overflow[0];l.overflowX=c.overflow[1];l.overflowY=c.overflow[2]}));for(b in d)if(e=d[b],Fb.exec(e)){delete d[b];f=f||"toggle"===e;if(e===(q?"hide":"show"))if("show"===e&&r&&void 0!==r[b])q=!0;else continue;
k[b]=r&&r[b]||n.style(a,b)}if(!n.isEmptyObject(k))for(b in r?"hidden"in r&&(q=r.hidden):r=y.access(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():h.done(function(){n(a).hide()}),h.done(function(){var d;y.remove(a,"fxshow");for(d in k)n.style(a,d,k[d])}),k)d=R(q?r[b]:0,b,h),b in r||(r[b]=d.start,q&&(d.end=d.start,d.start="width"===b||"height"===b?1:0))}],pa={"*":[function(a,d){var c=this.createTween(a,d),b=c.cur(),e=Xa.exec(d),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+b)&&Xa.exec(n.css(c.elem,
a)),p=1,h=20;if(g&&g[3]!==f){f=f||g[3];e=e||[];g=+b||1;do p=p||".5",g/=p,n.style(c.elem,a,g+f);while(p!==(p=c.cur()/b)&&1!==p&&--h)}e&&(g=c.start=+g||+b||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]);return c}]};n.Animation=n.extend(ia,{tweener:function(a,d){n.isFunction(a)?(d=a,a=["*"]):a=a.split(" ");for(var c,b=0,e=a.length;b<e;b++)c=a[b],pa[c]=pa[c]||[],pa[c].unshift(d)},prefilter:function(a,d){d?va.unshift(a):va.push(a)}});n.speed=function(a,d,c){var b=a&&"object"===typeof a?n.extend({},a):{complete:c||
!c&&d||n.isFunction(a)&&a,duration:a,easing:c&&d||d&&!n.isFunction(d)&&d};b.duration=n.fx.off?0:"number"===typeof b.duration?b.duration:b.duration in n.fx.speeds?n.fx.speeds[b.duration]:n.fx.speeds._default;if(null==b.queue||!0===b.queue)b.queue="fx";b.old=b.complete;b.complete=function(){n.isFunction(b.old)&&b.old.call(this);b.queue&&n.dequeue(this,b.queue)};return b};n.fn.extend({fadeTo:function(a,d,c,b){return this.filter(oa).css("opacity",0).show().end().animate({opacity:d},a,c,b)},animate:function(a,
d,c,b){var e=n.isEmptyObject(a),f=n.speed(d,c,b);d=function(){var d=ia(this,n.extend({},a),f);(e||y.get(this,"finish"))&&d.stop(!0)};d.finish=d;return e||!1===f.queue?this.each(d):this.queue(f.queue,d)},stop:function(a,d,c){var b=function(a){var d=a.stop;delete a.stop;d(c)};"string"!==typeof a&&(c=d,d=a,a=void 0);d&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var d=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=y.get(this);if(e)g[e]&&g[e].stop&&b(g[e]);else for(e in g)g[e]&&g[e].stop&&Gb.test(e)&&
b(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),d=!1,f.splice(e,1));!d&&c||n.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var d,c=y.get(this),b=c[a+"queue"];d=c[a+"queueHooks"];var e=n.timers,f=b?b.length:0;c.finish=!0;n.queue(this,a,[]);d&&d.stop&&d.stop.call(this,!0);for(d=e.length;d--;)e[d].elem===this&&e[d].queue===a&&(e[d].anim.stop(!0),e.splice(d,1));for(d=0;d<f;d++)b[d]&&b[d].finish&&b[d].finish.call(this);delete c.finish})}});
n.each(["toggle","show","hide"],function(a,d){var c=n.fn[d];n.fn[d]=function(a,b,e){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(Q(d,!0),a,b,e)}});n.each({slideDown:Q("show"),slideUp:Q("hide"),slideToggle:Q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,d){n.fn[a]=function(a,c,b){return this.animate(d,a,c,b)}});n.timers=[];n.fx.tick=function(){var a,d=0,c=n.timers;for(ja=n.now();d<c.length;d++)a=c[d],a()||c[d]!==a||
c.splice(d--,1);c.length||n.fx.stop();ja=void 0};n.fx.timer=function(a){n.timers.push(a);a()?n.fx.start():n.timers.pop()};n.fx.interval=13;n.fx.start=function(){Ba||(Ba=setInterval(n.fx.tick,n.fx.interval))};n.fx.stop=function(){clearInterval(Ba);Ba=null};n.fx.speeds={slow:600,fast:200,_default:400};n.fn.delay=function(a,d){a=n.fx?n.fx.speeds[a]||a:a;return this.queue(d||"fx",function(d,c){var b=setTimeout(d,a);c.stop=function(){clearTimeout(b)}})};(function(){var a=J.createElement("input"),d=J.createElement("select"),
c=d.appendChild(J.createElement("option"));a.type="checkbox";L.checkOn=""!==a.value;L.optSelected=c.selected;d.disabled=!0;L.optDisabled=!c.disabled;a=J.createElement("input");a.value="t";a.type="radio";L.radioValue="t"===a.value})();var Ya,qa=n.expr.attrHandle;n.fn.extend({attr:function(a,d){return fa(this,n.attr,a,d,1<arguments.length)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}});n.extend({attr:function(a,d,c){var b,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){if("undefined"===
typeof a.getAttribute)return n.prop(a,d,c);1===f&&n.isXMLDoc(a)||(d=d.toLowerCase(),b=n.attrHooks[d]||(n.expr.match.bool.test(d)?Ya:void 0));if(void 0!==c)if(null===c)n.removeAttr(a,d);else{if(b&&"set"in b&&void 0!==(e=b.set(a,c,d)))return e;a.setAttribute(d,c+"");return c}else{if(b&&"get"in b&&null!==(e=b.get(a,d)))return e;e=n.find.attr(a,d);return null==e?void 0:e}}},removeAttr:function(a,d){var c,b,e=0,f=d&&d.match(Y);if(f&&1===a.nodeType)for(;c=f[e++];)b=n.propFix[c]||c,n.expr.match.bool.test(c)&&
(a[b]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,d){if(!L.radioValue&&"radio"===d&&n.nodeName(a,"input")){var c=a.value;a.setAttribute("type",d);c&&(a.value=c);return d}}}}});Ya={set:function(a,d,c){!1===d?n.removeAttr(a,c):a.setAttribute(c,c);return c}};n.each(n.expr.match.bool.source.match(/\w+/g),function(a,d){var c=qa[d]||n.find.attr;qa[d]=function(a,d,b){var e,f;b||(f=qa[d],qa[d]=e,e=null!=c(a,d,b)?d.toLowerCase():null,qa[d]=f);return e}});var Hb=/^(?:input|select|textarea|button)$/i;
n.fn.extend({prop:function(a,d){return fa(this,n.prop,a,d,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}});n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,d,c){var b,e,f;f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){if(f=1!==f||!n.isXMLDoc(a))d=n.propFix[d]||d,e=n.propHooks[d];return void 0!==c?e&&"set"in e&&void 0!==(b=e.set(a,c,d))?b:a[d]=c:e&&"get"in e&&null!==(b=e.get(a,d))?b:a[d]}},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||
Hb.test(a.nodeName)||a.href?a.tabIndex:-1}}}});L.optSelected||(n.propHooks.selected={get:function(a){(a=a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null}});n.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){n.propFix[this.toLowerCase()]=this});var Ga=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var d,c,b,e,f;d="string"===typeof a&&a;var g=0,p=this.length;if(n.isFunction(a))return this.each(function(d){n(this).addClass(a.call(this,
d,this.className))});if(d)for(d=(a||"").match(Y)||[];g<p;g++)if(c=this[g],b=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ga," "):" ")){for(f=0;e=d[f++];)0>b.indexOf(" "+e+" ")&&(b+=e+" ");b=n.trim(b);c.className!==b&&(c.className=b)}return this},removeClass:function(a){var d,c,b,e,f;d=0===arguments.length||"string"===typeof a&&a;var g=0,p=this.length;if(n.isFunction(a))return this.each(function(d){n(this).removeClass(a.call(this,d,this.className))});if(d)for(d=(a||"").match(Y)||[];g<
p;g++)if(c=this[g],b=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ga," "):"")){for(f=0;e=d[f++];)for(;0<=b.indexOf(" "+e+" ");)b=b.replace(" "+e+" "," ");b=a?n.trim(b):"";c.className!==b&&(c.className=b)}return this},toggleClass:function(a,d){var c=typeof a;return"boolean"===typeof d&&"string"===c?d?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,this.className,d),d)}):this.each(function(){if("string"===c)for(var d,b=0,e=n(this),
f=a.match(Y)||[];d=f[b++];)e.hasClass(d)?e.removeClass(d):e.addClass(d);else if("undefined"===c||"boolean"===c)this.className&&y.set(this,"__className__",this.className),this.className=this.className||!1===a?"":y.get(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var d=0,c=this.length;d<c;d++)if(1===this[d].nodeType&&0<=(" "+this[d].className+" ").replace(Ga," ").indexOf(a))return!0;return!1}});var Ib=/\r/g;n.fn.extend({val:function(a){var d,c,b,e=this[0];if(arguments.length)return b=
n.isFunction(a),this.each(function(c){1===this.nodeType&&(c=b?a.call(this,c,n(this).val()):a,null==c?c="":"number"===typeof c?c+="":n.isArray(c)&&(c=n.map(c,function(a){return null==a?"":a+""})),d=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&void 0!==d.set(this,c,"value")||(this.value=c))});if(e){if((d=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()])&&"get"in d&&void 0!==(c=d.get(e,"value")))return c;c=e.value;return"string"===typeof c?c.replace(Ib,""):null==
c?"":c}}});n.extend({valHooks:{select:{get:function(a){for(var d,c=a.options,b=a.selectedIndex,e=(a="select-one"===a.type||0>b)?null:[],f=a?b+1:c.length,g=0>b?f:a?b:0;g<f;g++)if(d=c[g],!(!d.selected&&g!==b||(L.optDisabled?d.disabled:null!==d.getAttribute("disabled"))||d.parentNode.disabled&&n.nodeName(d.parentNode,"optgroup"))){d=n(d).val();if(a)return d;e.push(d)}return e},set:function(a,d){for(var c,b,e=a.options,f=n.makeArray(d),g=e.length;g--;)if(b=e[g],b.selected=0<=n.inArray(n(b).val(),f))c=
!0;c||(a.selectedIndex=-1);return f}}}});n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,d){if(n.isArray(d))return a.checked=0<=n.inArray(n(a).val(),d)}};L.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,
d){n.fn[d]=function(a,c){return 0<arguments.length?this.on(d,null,a,c):this.trigger(d)}});n.fn.extend({hover:function(a,d){return this.mouseenter(a).mouseleave(d||a)},bind:function(a,d,c){return this.on(a,null,d,c)},unbind:function(a,d){return this.off(a,null,d)},delegate:function(a,d,c,b){return this.on(d,a,c,b)},undelegate:function(a,d,c){return 1===arguments.length?this.off(a,"**"):this.off(d,a||"**",c)}});var Ha=n.now(),Ia=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")};n.parseXML=function(a){var d,
c;if(!a||"string"!==typeof a)return null;try{c=new DOMParser,d=c.parseFromString(a,"text/xml")}catch(b){d=void 0}d&&!d.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+a);return d};var ba,ga,Jb=/#.*$/,Za=/([?&])_=[^&]*/,Kb=/^(.*?):[ \t]*([^\r\n]*)$/mg,Lb=/^(?:GET|HEAD)$/,Mb=/^\/\//,$a=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ab={},Ea={},bb="*/".concat("*");try{ga=location.href}catch(Ub){ga=J.createElement("a"),ga.href="",ga=ga.href}ba=$a.exec(ga.toLowerCase())||
[];n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ga,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ba[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,
"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,d){return d?I(I(a,n.ajaxSettings),d):I(n.ajaxSettings,a)},ajaxPrefilter:S(ab),ajaxTransport:S(Ea),ajax:function(a,d){function c(a,d,g,h){var l,s,A,v;v=d;if(2!==z){z=2;p&&clearTimeout(p);b=void 0;f=h||"";t.readyState=0<a?4:0;h=200<=a&&300>a||304===a;if(g){A=q;for(var w=t,E,T,B,F,N=A.contents,D=A.dataTypes;"*"===D[0];)D.shift(),void 0===E&&(E=A.mimeType||w.getResponseHeader("Content-Type"));
if(E)for(T in N)if(N[T]&&N[T].test(E)){D.unshift(T);break}if(D[0]in g)B=D[0];else{for(T in g){if(!D[0]||A.converters[T+" "+D[0]]){B=T;break}F||(F=T)}B=B||F}B?(B!==D[0]&&D.unshift(B),A=g[B]):A=void 0}a:{g=q;E=A;T=t;B=h;var G,y,H,w={},N=g.dataTypes.slice();if(N[1])for(y in g.converters)w[y.toLowerCase()]=g.converters[y];for(F=N.shift();F;)if(g.responseFields[F]&&(T[g.responseFields[F]]=E),!H&&B&&g.dataFilter&&(E=g.dataFilter(E,g.dataType)),H=F,F=N.shift())if("*"===F)F=H;else if("*"!==H&&H!==F){y=w[H+
" "+F]||w["* "+F];if(!y)for(G in w)if(A=G.split(" "),A[1]===F&&(y=w[H+" "+A[0]]||w["* "+A[0]])){!0===y?y=w[G]:!0!==w[G]&&(F=A[0],N.unshift(A[1]));break}if(!0!==y)if(y&&g["throws"])E=y(E);else try{E=y(E)}catch(M){A={state:"parsererror",error:y?M:"No conversion from "+H+" to "+F};break a}}A={state:"success",data:E}}if(h)q.ifModified&&((v=t.getResponseHeader("Last-Modified"))&&(n.lastModified[e]=v),(v=t.getResponseHeader("etag"))&&(n.etag[e]=v)),204===a||"HEAD"===q.type?v="nocontent":304===a?v="notmodified":
(v=A.state,l=A.data,s=A.error,h=!s);else if(s=v,a||!v)v="error",0>a&&(a=0);t.status=a;t.statusText=(d||v)+"";h?m.resolveWith(r,[l,v,t]):m.rejectWith(r,[t,v,s]);t.statusCode(x);x=void 0;k&&u.trigger(h?"ajaxSuccess":"ajaxError",[t,q,h?l:s]);C.fireWith(r,[t,v]);k&&(u.trigger("ajaxComplete",[t,q]),--n.active||n.event.trigger("ajaxStop"))}}"object"===typeof a&&(d=a,a=void 0);d=d||{};var b,e,f,g,p,h,k,l,q=n.ajaxSetup({},d),r=q.context||q,u=q.context&&(r.nodeType||r.jquery)?n(r):n.event,m=n.Deferred(),C=
n.Callbacks("once memory"),x=q.statusCode||{},s={},A={},z=0,w="canceled",t={readyState:0,getResponseHeader:function(a){var d;if(2===z){if(!g)for(g={};d=Kb.exec(f);)g[d[1].toLowerCase()]=d[2];d=g[a.toLowerCase()]}return null==d?null:d},getAllResponseHeaders:function(){return 2===z?f:null},setRequestHeader:function(a,d){var c=a.toLowerCase();z||(a=A[c]=A[c]||a,s[a]=d);return this},overrideMimeType:function(a){z||(q.mimeType=a);return this},statusCode:function(a){var d;if(a)if(2>z)for(d in a)x[d]=[x[d],
a[d]];else t.always(a[t.status]);return this},abort:function(a){a=a||w;b&&b.abort(a);c(0,a);return this}};m.promise(t).complete=C.add;t.success=t.done;t.error=t.fail;q.url=((a||q.url||ga)+"").replace(Jb,"").replace(Mb,ba[1]+"//");q.type=d.method||d.type||q.method||q.type;q.dataTypes=n.trim(q.dataType||"*").toLowerCase().match(Y)||[""];null==q.crossDomain&&(h=$a.exec(q.url.toLowerCase()),q.crossDomain=!(!h||h[1]===ba[1]&&h[2]===ba[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ba[3]||("http:"===ba[1]?
"80":"443"))));q.data&&q.processData&&"string"!==typeof q.data&&(q.data=n.param(q.data,q.traditional));U(ab,q,d,t);if(2===z)return t;(k=q.global)&&0===n.active++&&n.event.trigger("ajaxStart");q.type=q.type.toUpperCase();q.hasContent=!Lb.test(q.type);e=q.url;q.hasContent||(q.data&&(e=q.url+=(Ia.test(e)?"&":"?")+q.data,delete q.data),!1===q.cache&&(q.url=Za.test(e)?e.replace(Za,"$1_="+Ha++):e+(Ia.test(e)?"&":"?")+"_="+Ha++));q.ifModified&&(n.lastModified[e]&&t.setRequestHeader("If-Modified-Since",n.lastModified[e]),
n.etag[e]&&t.setRequestHeader("If-None-Match",n.etag[e]));(q.data&&q.hasContent&&!1!==q.contentType||d.contentType)&&t.setRequestHeader("Content-Type",q.contentType);t.setRequestHeader("Accept",q.dataTypes[0]&&q.accepts[q.dataTypes[0]]?q.accepts[q.dataTypes[0]]+("*"!==q.dataTypes[0]?", "+bb+"; q=0.01":""):q.accepts["*"]);for(l in q.headers)t.setRequestHeader(l,q.headers[l]);if(q.beforeSend&&(!1===q.beforeSend.call(r,t,q)||2===z))return t.abort();w="abort";for(l in{success:1,error:1,complete:1})t[l](q[l]);
if(b=U(Ea,q,d,t)){t.readyState=1;k&&u.trigger("ajaxSend",[t,q]);q.async&&0<q.timeout&&(p=setTimeout(function(){t.abort("timeout")},q.timeout));try{z=1,b.send(s,c)}catch(B){if(2>z)c(-1,B);else throw B;}}else c(-1,"No Transport");return t},getJSON:function(a,d,c){return n.get(a,d,c,"json")},getScript:function(a,d){return n.get(a,void 0,d,"script")}});n.each(["get","post"],function(a,d){n[d]=function(a,c,b,e){n.isFunction(c)&&(e=e||b,b=c,c=void 0);return n.ajax({url:a,type:d,dataType:e,data:c,success:b})}});
n.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,d){n.fn[d]=function(a){return this.on(d,a)}});n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};n.fn.extend({wrapAll:function(a){var d;if(n.isFunction(a))return this.each(function(d){n(this).wrapAll(a.call(this,d))});this[0]&&(d=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var a=this;a.firstElementChild;)a=
a.firstElementChild;return a}).append(this));return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(d){n(this).wrapInner(a.call(this,d))}):this.each(function(){var d=n(this),c=d.contents();c.length?c.wrapAll(a):d.append(a)})},wrap:function(a){var d=n.isFunction(a);return this.each(function(c){n(this).wrapAll(d?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}});n.expr.filters.hidden=
function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight};n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var Nb=/%20/g,mb=/\[\]$/,cb=/\r?\n/g,Ob=/^(?:submit|button|image|reset|file)$/i,Pb=/^(?:input|select|textarea|keygen)/i;n.param=function(a,d){var c,b=[],e=function(a,d){d=n.isFunction(d)?d():null==d?"":d;b[b.length]=encodeURIComponent(a)+"="+encodeURIComponent(d)};void 0===d&&(d=n.ajaxSettings&&n.ajaxSettings.traditional);if(n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,
function(){e(this.name,this.value)});else for(c in a)Z(c,a[c],d,e);return b.join("&").replace(Nb,"+")};n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Pb.test(this.nodeName)&&!Ob.test(a)&&(this.checked||!Qa.test(a))}).map(function(a,d){var c=n(this).val();return null==c?null:n.isArray(c)?
n.map(c,function(a){return{name:d.name,value:a.replace(cb,"\r\n")}}):{name:d.name,value:c.replace(cb,"\r\n")}}).get()}});n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Qb=0,Ca={},Rb={0:200,1223:204},ha=n.ajaxSettings.xhr();if(b.ActiveXObject)n(b).on("unload",function(){for(var a in Ca)Ca[a]()});L.cors=!!ha&&"withCredentials"in ha;L.ajax=ha=!!ha;n.ajaxTransport(function(a){var d;if(L.cors||ha&&!a.crossDomain)return{send:function(c,b){var e,f=a.xhr(),g=++Qb;f.open(a.type,
a.url,a.async,a.username,a.password);if(a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);d=function(a){return function(){d&&(delete Ca[g],d=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?b(f.status,f.statusText):b(Rb[f.status]||f.status,f.statusText,"string"===typeof f.responseText?{text:f.responseText}:void 0,
f.getAllResponseHeaders()))}};f.onload=d();f.onerror=d("error");d=Ca[g]=d("abort");f.send(a.hasContent&&a.data||null)},abort:function(){d&&d()}}});n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){n.globalEval(a);return a}}});n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});n.ajaxTransport("script",
function(a){if(a.crossDomain){var d,c;return{send:function(b,e){d=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){d.remove();c=null;a&&e("error"===a.type?404:200,a.type)});J.head.appendChild(d[0])},abort:function(){c&&c()}}}});var db=[],Ja=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=db.pop()||n.expando+"_"+Ha++;this[a]=!0;return a}});n.ajaxPrefilter("json jsonp",function(a,d,c){var e,f,g,p=!1!==a.jsonp&&(Ja.test(a.url)?
"url":"string"===typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ja.test(a.data)&&"data");if(p||"jsonp"===a.dataTypes[0])return e=a.jsonpCallback=n.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,p?a[p]=a[p].replace(Ja,"$1"+e):!1!==a.jsonp&&(a.url+=(Ia.test(a.url)?"&":"?")+a.jsonp+"="+e),a.converters["script json"]=function(){g||n.error(e+" was not called");return g[0]},a.dataTypes[0]="json",f=b[e],b[e]=function(){g=arguments},c.always(function(){b[e]=
f;a[e]&&(a.jsonpCallback=d.jsonpCallback,db.push(e));g&&n.isFunction(f)&&f(g[0]);g=f=void 0}),"script"});n.parseHTML=function(a,d,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof d&&(c=d,d=!1);d=d||J;var b=Pa.exec(a);c=!c&&[];if(b)return[d.createElement(b[1])];b=n.buildFragment([a],d,c);c&&c.length&&n(c).remove();return n.merge([],b.childNodes)};var eb=n.fn.load;n.fn.load=function(a,d,c){if("string"!==typeof a&&eb)return eb.apply(this,arguments);var b,e,f,g=this,p=a.indexOf(" ");0<=p&&
(b=a.slice(p),a=a.slice(0,p));n.isFunction(d)?(c=d,d=void 0):d&&"object"===typeof d&&(e="POST");0<g.length&&n.ajax({url:a,type:e,dataType:"html",data:d}).done(function(a){f=arguments;g.html(b?n("<div>").append(n.parseHTML(a)).find(b):a)}).complete(c&&function(a,d){g.each(c,f||[a.responseText,d,a])});return this};n.expr.filters.animated=function(a){return n.grep(n.timers,function(d){return a===d.elem}).length};var fb=b.document.documentElement;n.offset={setOffset:function(a,d,c){var b,e,f,g=n.css(a,
"position"),p=n(a),h={};"static"===g&&(a.style.position="relative");f=p.offset();e=n.css(a,"top");b=n.css(a,"left");("absolute"===g||"fixed"===g)&&-1<(e+b).indexOf("auto")?(b=p.position(),e=b.top,b=b.left):(e=parseFloat(e)||0,b=parseFloat(b)||0);n.isFunction(d)&&(d=d.call(a,c,f));null!=d.top&&(h.top=d.top-f.top+e);null!=d.left&&(h.left=d.left-f.left+b);"using"in d?d.using.call(a,h):p.css(h)}};n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(d){n.offset.setOffset(this,
a,d)});var d,c;c=this[0];var b={top:0,left:0},e=c&&c.ownerDocument;if(e){d=e.documentElement;if(!n.contains(d,c))return b;"undefined"!==typeof c.getBoundingClientRect&&(b=c.getBoundingClientRect());c=aa(e);return{top:b.top+c.pageYOffset-d.clientTop,left:b.left+c.pageXOffset-d.clientLeft}}},position:function(){if(this[0]){var a,d,c=this[0],b={top:0,left:0};"fixed"===n.css(c,"position")?d=c.getBoundingClientRect():(a=this.offsetParent(),d=this.offset(),n.nodeName(a[0],"html")||(b=a.offset()),b.top+=
n.css(a[0],"borderTopWidth",!0),b.left+=n.css(a[0],"borderLeftWidth",!0));return{top:d.top-b.top-n.css(c,"marginTop",!0),left:d.left-b.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||fb;a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position");)a=a.offsetParent;return a||fb})}});n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,d){var c="pageYOffset"===d;n.fn[a]=function(e){return fa(this,function(a,e,f){var g=aa(a);
if(void 0===f)return g?g[d]:a[e];g?g.scrollTo(c?b.pageXOffset:f,c?f:b.pageYOffset):a[e]=f},a,e,arguments.length,null)}});n.each(["top","left"],function(a,d){n.cssHooks[d]=B(L.pixelPosition,function(a,c){if(c)return c=w(a,d),Da.test(c)?n(a).position()[d]+"px":c})});n.each({Height:"height",Width:"width"},function(a,d){n.each({padding:"inner"+a,content:d,"":"outer"+a},function(c,b){n.fn[b]=function(b,e){var f=arguments.length&&(c||"boolean"!==typeof b),g=c||(!0===b||!0===e?"margin":"border");return fa(this,
function(d,c,b){return n.isWindow(d)?d.document.documentElement["client"+a]:9===d.nodeType?(c=d.documentElement,Math.max(d.body["scroll"+a],c["scroll"+a],d.body["offset"+a],c["offset"+a],c["client"+a])):void 0===b?n.css(d,c,g):n.style(d,c,b,g)},d,f?b:void 0,f,null)}})});n.fn.size=function(){return this.length};n.fn.andSelf=n.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return n});var Sb=b.jQuery,Tb=b.$;n.noConflict=function(a){b.$===n&&(b.$=Tb);a&&b.jQuery===n&&
(b.jQuery=Sb);return n};"undefined"===typeof m&&(b.jQuery=b.$=n);return n});(function(b,m){function k(e,h){var g,k;g=e.nodeName.toLowerCase();if("area"===g){g=e.parentNode;k=g.name;if(!e.href||!k||"map"!==g.nodeName.toLowerCase())return!1;g=b("img[usemap=#"+k+"]")[0];return!!g&&l(g)}return(/input|select|textarea|button|object/.test(g)?!e.disabled:"a"===g?e.href||h:h)&&l(e)}function l(e){return b.expr.filters.visible(e)&&!b(e).parents().addBack().filter(function(){return"hidden"===b.css(this,"visibility")}).length}var h=0,e=/^ui-id-\d+$/;b.ui=b.ui||{};b.extend(b.ui,{version:"1.10.4",
keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({focus:function(e){return function(h,g){return"number"===typeof h?this.each(function(){var e=this;setTimeout(function(){b(e).focus();g&&g.call(e)},h)}):e.apply(this,arguments)}}(b.fn.focus),scrollParent:function(){var e;e=
b.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.css(this,"position"))&&/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!e.length?b(document):
e},zIndex:function(e){if(e!==m)return this.css("zIndex",e);if(this.length){e=b(this[0]);for(var h;e.length&&e[0]!==document;){h=e.css("position");if("absolute"===h||"relative"===h||"fixed"===h)if(h=parseInt(e.css("zIndex"),10),!isNaN(h)&&0!==h)return h;e=e.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++h)})},removeUniqueId:function(){return this.each(function(){e.test(this.id)&&b(this).removeAttr("id")})}});b.extend(b.expr[":"],{data:b.expr.createPseudo?
b.expr.createPseudo(function(e){return function(h){return!!b.data(h,e)}}):function(e,h,g){return!!b.data(e,g[3])},focusable:function(e){return k(e,!isNaN(b.attr(e,"tabindex")))},tabbable:function(e){var h=b.attr(e,"tabindex"),g=isNaN(h);return(g||0<=h)&&k(e,!g)}});b("<a>").outerWidth(1).jquery||b.each(["Width","Height"],function(e,h){function g(c,a,d,e){b.each(k,function(){a-=parseFloat(b.css(c,"padding"+this))||0;d&&(a-=parseFloat(b.css(c,"border"+this+"Width"))||0);e&&(a-=parseFloat(b.css(c,"margin"+
this))||0)});return a}var k="Width"===h?["Left","Right"]:["Top","Bottom"],l=h.toLowerCase(),c={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+h]=function(e){return e===m?c["inner"+h].call(this):this.each(function(){b(this).css(l,g(this,e)+"px")})};b.fn["outer"+h]=function(e,a){return"number"!==typeof e?c["outer"+h].call(this,e):this.each(function(){b(this).css(l,g(this,e,!0,a)+"px")})}});b.fn.addBack||(b.fn.addBack=function(b){return this.add(null==
b?this.prevObject:this.prevObject.filter(b))});b("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(b.fn.removeData=function(e){return function(h){return arguments.length?e.call(this,b.camelCase(h)):e.call(this)}}(b.fn.removeData));b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());b.support.selectstart="onselectstart"in document.createElement("div");b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",
function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.extend(b.ui,{plugin:{add:function(e,h,g){var k;e=b.ui[e].prototype;for(k in g)e.plugins[k]=e.plugins[k]||[],e.plugins[k].push([h,g[k]])},call:function(b,e,g){var h=b.plugins[e];if(h&&b.element[0].parentNode&&11!==b.element[0].parentNode.nodeType)for(e=0;e<h.length;e++)b.options[h[e][0]]&&h[e][1].apply(b.element,g)}},hasScroll:function(e,h){if("hidden"===b(e).css("overflow"))return!1;var g=
h&&"left"===h?"scrollLeft":"scrollTop",k=!1;if(0<e[g])return!0;e[g]=1;k=0<e[g];e[g]=0;return k}})})(jQuery);
(function(b,m){var k=0,l=Array.prototype.slice,h=b.cleanData;b.cleanData=function(e){for(var f=0,k;null!=(k=e[f]);f++)try{b(k).triggerHandler("remove")}catch(g){}h(e)};b.widget=function(e,f,h){var g,k,l,c,p={},a=e.split(".")[0];e=e.split(".")[1];g=a+"-"+e;h||(h=f,f=b.Widget);b.expr[":"][g.toLowerCase()]=function(a){return!!b.data(a,g)};b[a]=b[a]||{};k=b[a][e];l=b[a][e]=function(a,c){if(!this._createWidget)return new l(a,c);arguments.length&&this._createWidget(a,c)};b.extend(l,k,{version:h.version,
_proto:b.extend({},h),_childConstructors:[]});c=new f;c.options=b.widget.extend({},c.options);b.each(h,function(a,c){b.isFunction(c)?p[a]=function(){var b=function(){return f.prototype[a].apply(this,arguments)},e=function(c){return f.prototype[a].apply(this,c)};return function(){var a=this._super,d=this._superApply,f;this._super=b;this._superApply=e;f=c.apply(this,arguments);this._super=a;this._superApply=d;return f}}():p[a]=c});l.prototype=b.widget.extend(c,{widgetEventPrefix:k?c.widgetEventPrefix||
e:e},p,{constructor:l,namespace:a,widgetName:e,widgetFullName:g});k?(b.each(k._childConstructors,function(a,c){var e=c.prototype;b.widget(e.namespace+"."+e.widgetName,l,c._proto)}),delete k._childConstructors):f._childConstructors.push(l);b.widget.bridge(e,l)};b.widget.extend=function(e){for(var f=l.call(arguments,1),h=0,g=f.length,k,s;h<g;h++)for(k in f[h])s=f[h][k],f[h].hasOwnProperty(k)&&s!==m&&(b.isPlainObject(s)?e[k]=b.isPlainObject(e[k])?b.widget.extend({},e[k],s):b.widget.extend({},s):e[k]=
s);return e};b.widget.bridge=function(e,f){var h=f.prototype.widgetFullName||e;b.fn[e]=function(g){var k="string"===typeof g,s=l.call(arguments,1),c=this;g=!k&&s.length?b.widget.extend.apply(null,[g].concat(s)):g;k?this.each(function(){var f,a=b.data(this,h);if(!a)return b.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+g+"'");if(!b.isFunction(a[g])||"_"===g.charAt(0))return b.error("no such method '"+g+"' for "+e+" widget instance");f=a[g].apply(a,s);if(f!==
a&&f!==m)return c=f&&f.jquery?c.pushStack(f.get()):f,!1}):this.each(function(){var c=b.data(this,h);c?c.option(g||{})._init():b.data(this,h,new f(g,this))});return c}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,f){f=b(f||this.defaultElement||this)[0];this.element=b(f);this.uuid=k++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},
this.options,this._getCreateOptions(),e);this.bindings=b();this.hoverable=b();this.focusable=b();f!==this&&(b.data(f,this.widgetFullName,this),this._on(!0,this.element,{remove:function(b){b.target===f&&this.destroy()}}),this.document=b(f.style?f.ownerDocument:f.document||f),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,
_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},
option:function(e,f){var h=e,g,k,l;if(0===arguments.length)return b.widget.extend({},this.options);if("string"===typeof e)if(h={},g=e.split("."),e=g.shift(),g.length){k=h[e]=b.widget.extend({},this.options[e]);for(l=0;l<g.length-1;l++)k[g[l]]=k[g[l]]||{},k=k[g[l]];e=g.pop();if(1===arguments.length)return k[e]===m?null:k[e];k[e]=f}else{if(1===arguments.length)return this.options[e]===m?null:this.options[e];h[e]=f}this._setOptions(h);return this},_setOptions:function(b){for(var f in b)this._setOption(f,
b[f]);return this},_setOption:function(b,f){this.options[b]=f;"disabled"===b&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!f).attr("aria-disabled",f),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,f,h){var g,k=this;"boolean"!==typeof e&&(h=f,f=e,e=!1);h?(f=g=b(f),this.bindings=this.bindings.add(f)):
(h=f,f=this.element,g=this.widget());b.each(h,function(h,c){function p(){if(e||!0!==k.options.disabled&&!b(this).hasClass("ui-state-disabled"))return("string"===typeof c?k[c]:c).apply(k,arguments)}"string"!==typeof c&&(p.guid=c.guid=c.guid||p.guid||b.guid++);var a=h.match(/^(\w+)\s*(.*)$/),d=a[1]+k.eventNamespace;(a=a[2])?g.delegate(a,d,p):f.bind(d,p)})},_off:function(b,f){f=(f||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;b.unbind(f).undelegate(f)},_delay:function(b,f){var h=
this;return setTimeout(function(){return("string"===typeof b?h[b]:b).apply(h,arguments)},f||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e);this._on(e,{mouseenter:function(e){b(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){b(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e);this._on(e,{focusin:function(e){b(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){b(e.currentTarget).removeClass("ui-state-focus")}})},
_trigger:function(e,f,h){var g,k=this.options[e];h=h||{};f=b.Event(f);f.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();f.target=this.element[0];if(e=f.originalEvent)for(g in e)g in f||(f[g]=e[g]);this.element.trigger(f,h);return!(b.isFunction(k)&&!1===k.apply(this.element[0],[f].concat(h))||f.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(e,f){b.Widget.prototype["_"+e]=function(h,g,k){"string"===typeof g&&(g={effect:g});var l,c=g?!0===g||"number"===
typeof g?f:g.effect||f:e;g=g||{};"number"===typeof g&&(g={duration:g});l=!b.isEmptyObject(g);g.complete=k;g.delay&&h.delay(g.delay);if(l&&b.effects&&b.effects.effect[c])h[e](g);else if(c!==e&&h[c])h[c](g.duration,g.easing,k);else h.queue(function(c){b(this)[e]();k&&k.call(h[0]);c()})}})})(jQuery);
(function(b,m){var k=!1;b(document).mouseup(function(){k=!1});b.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var k=this;this.element.bind("mousedown."+this.widgetName,function(b){return k._mouseDown(b)}).bind("click."+this.widgetName,function(h){if(!0===b.data(h.target,k.widgetName+".preventClickEvent"))return b.removeData(h.target,k.widgetName+".preventClickEvent"),h.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(l){if(!k){this._mouseStarted&&this._mouseUp(l);this._mouseDownEvent=l;var h=this,e=1===l.which,f="string"===typeof this.options.cancel&&l.target.nodeName?b(l.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(l))return!0;this.mouseDelayMet=
!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){h.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(l)&&this._mouseDelayMet(l)&&(this._mouseStarted=!1!==this._mouseStart(l),!this._mouseStarted))return l.preventDefault(),!0;!0===b.data(l.target,this.widgetName+".preventClickEvent")&&b.removeData(l.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return h._mouseMove(b)};this._mouseUpDelegate=function(b){return h._mouseUp(b)};
b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);l.preventDefault();return k=!0}},_mouseMove:function(k){if(b.ui.ie&&(!document.documentMode||9>document.documentMode)&&!k.button)return this._mouseUp(k);if(this._mouseStarted)return this._mouseDrag(k),k.preventDefault();this._mouseDistanceMet(k)&&this._mouseDelayMet(k)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,k))?this._mouseDrag(k):this._mouseUp(k));
return!this._mouseStarted},_mouseUp:function(k){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,k.target===this._mouseDownEvent.target&&b.data(k.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(k));return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},
_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(b,m){function k(a,c,b){return[parseFloat(a[0])*(p.test(a[0])?c/100:1),parseFloat(a[1])*(p.test(a[1])?b/100:1)]}function l(a){var c=a[0];return 9===c.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:b.isWindow(c)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}b.ui=b.ui||{};var h,e=Math.max,f=Math.abs,r=
Math.round,g=/left|center|right/,q=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,a=b.fn.position;b.position={scrollbarWidth:function(){if(h!==m)return h;var a,c,e=b("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");c=e.children()[0];b("body").append(e);a=c.offsetWidth;e.css("overflow","scroll");c=c.offsetWidth;a===c&&(c=e[0].clientWidth);e.remove();return h=a-c},getScrollInfo:function(a){var c=
a.isWindow||a.isDocument?"":a.element.css("overflow-x"),e=a.isWindow||a.isDocument?"":a.element.css("overflow-y"),c="scroll"===c||"auto"===c&&a.width<a.element[0].scrollWidth;return{width:"scroll"===e||"auto"===e&&a.height<a.element[0].scrollHeight?b.position.scrollbarWidth():0,height:c?b.position.scrollbarWidth():0}},getWithinInfo:function(a){a=b(a||window);var c=b.isWindow(a[0]);return{element:a,isWindow:c,isDocument:!!a[0]&&9===a[0].nodeType,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),
scrollTop:a.scrollTop(),width:c?a.width():a.outerWidth(),height:c?a.height():a.outerHeight()}}};b.fn.position=function(d){if(!d||!d.of)return a.apply(this,arguments);d=b.extend({},d);var h,p,m,A,z,w,B=b(d.of),G=b.position.getWithinInfo(d.within),D=b.position.getScrollInfo(G),t=(d.collision||"flip").split(" "),H={};w=l(B);B[0].preventDefault&&(d.at="left top");p=w.width;m=w.height;A=w.offset;z=b.extend({},A);b.each(["my","at"],function(){var a=(d[this]||"").split(" "),b,e;1===a.length&&(a=g.test(a[0])?
a.concat(["center"]):q.test(a[0])?["center"].concat(a):["center","center"]);a[0]=g.test(a[0])?a[0]:"center";a[1]=q.test(a[1])?a[1]:"center";b=s.exec(a[0]);e=s.exec(a[1]);H[this]=[b?b[0]:0,e?e[0]:0];d[this]=[c.exec(a[0])[0],c.exec(a[1])[0]]});1===t.length&&(t[1]=t[0]);"right"===d.at[0]?z.left+=p:"center"===d.at[0]&&(z.left+=p/2);"bottom"===d.at[1]?z.top+=m:"center"===d.at[1]&&(z.top+=m/2);h=k(H.at,p,m);z.left+=h[0];z.top+=h[1];return this.each(function(){var a,c,g=b(this),l=g.outerWidth(),q=g.outerHeight(),
s=parseInt(b.css(this,"marginLeft"),10)||0,w=parseInt(b.css(this,"marginTop"),10)||0,S=l+s+(parseInt(b.css(this,"marginRight"),10)||0)+D.width,U=q+w+(parseInt(b.css(this,"marginBottom"),10)||0)+D.height,I=b.extend({},z),Z=k(H.my,g.outerWidth(),g.outerHeight());"right"===d.my[0]?I.left-=l:"center"===d.my[0]&&(I.left-=l/2);"bottom"===d.my[1]?I.top-=q:"center"===d.my[1]&&(I.top-=q/2);I.left+=Z[0];I.top+=Z[1];b.support.offsetFractions||(I.left=r(I.left),I.top=r(I.top));a={marginLeft:s,marginTop:w};b.each(["left",
"top"],function(c,e){if(b.ui.position[t[c]])b.ui.position[t[c]][e](I,{targetWidth:p,targetHeight:m,elemWidth:l,elemHeight:q,collisionPosition:a,collisionWidth:S,collisionHeight:U,offset:[h[0]+Z[0],h[1]+Z[1]],my:d.my,at:d.at,within:G,elem:g})});d.using&&(c=function(a){var c=A.left-I.left,b=c+p-l,h=A.top-I.top,k=h+m-q,r={target:{element:B,left:A.left,top:A.top,width:p,height:m},element:{element:g,left:I.left,top:I.top,width:l,height:q},horizontal:0>b?"left":0<c?"right":"center",vertical:0>k?"top":0<
h?"bottom":"middle"};p<l&&f(c+b)<p&&(r.horizontal="center");m<q&&f(h+k)<m&&(r.vertical="middle");e(f(c),f(b))>e(f(h),f(k))?r.important="horizontal":r.important="vertical";d.using.call(this,a,r)});g.offset(b.extend(I,{using:c}))})};b.ui.position={fit:{left:function(a,c){var b=c.within,f=b.isWindow?b.scrollLeft:b.offset.left,g=b.width,h=a.left-c.collisionPosition.marginLeft,b=f-h,p=h+c.collisionWidth-g-f;c.collisionWidth>g?0<b&&0>=p?(f=a.left+b+c.collisionWidth-g-f,a.left+=b-f):a.left=0<p&&0>=b?f:b>
p?f+g-c.collisionWidth:f:a.left=0<b?a.left+b:0<p?a.left-p:e(a.left-h,a.left)},top:function(a,c){var b=c.within,f=b.isWindow?b.scrollTop:b.offset.top,g=c.within.height,h=a.top-c.collisionPosition.marginTop,b=f-h,p=h+c.collisionHeight-g-f;c.collisionHeight>g?0<b&&0>=p?(f=a.top+b+c.collisionHeight-g-f,a.top+=b-f):a.top=0<p&&0>=b?f:b>p?f+g-c.collisionHeight:f:a.top=0<b?a.top+b:0<p?a.top-p:e(a.top-h,a.top)}},flip:{left:function(a,c){var b=c.within,e=b.offset.left+b.scrollLeft,g=b.width,h=b.isWindow?b.scrollLeft:
b.offset.left,p=a.left-c.collisionPosition.marginLeft,b=p-h,k=p+c.collisionWidth-g-h,p="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,l="left"===c.at[0]?c.targetWidth:"right"===c.at[0]?-c.targetWidth:0,q=-2*c.offset[0];if(0>b){if(e=a.left+p+l+q+c.collisionWidth-g-e,0>e||e<f(b))a.left+=p+l+q}else 0<k&&(e=a.left-c.collisionPosition.marginLeft+p+l+q-h,0<e||f(e)<k)&&(a.left+=p+l+q)},top:function(a,c){var b=c.within,e=b.offset.top+b.scrollTop,g=b.height,h=b.isWindow?b.scrollTop:b.offset.top,
p=a.top-c.collisionPosition.marginTop,b=p-h,k=p+c.collisionHeight-g-h,p="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,l="top"===c.at[1]?c.targetHeight:"bottom"===c.at[1]?-c.targetHeight:0,q=-2*c.offset[1];0>b?(e=a.top+p+l+q+c.collisionHeight-g-e,a.top+p+l+q>b&&(0>e||e<f(b))&&(a.top+=p+l+q)):0<k&&(e=a.top-c.collisionPosition.marginTop+p+l+q-h,a.top+p+l+q>k&&(0<e||f(e)<k)&&(a.top+=p+l+q))}},flipfit:{left:function(){b.ui.position.flip.left.apply(this,arguments);b.ui.position.fit.left.apply(this,
arguments)},top:function(){b.ui.position.flip.top.apply(this,arguments);b.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,c,e,f,g=document.getElementsByTagName("body")[0];e=document.createElement("div");a=document.createElement(g?"div":"body");c={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};g&&b.extend(c,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in c)a.style[f]=c[f];a.appendChild(e);c=g||document.documentElement;c.insertBefore(a,c.firstChild);
e.style.cssText="position: absolute; left: 10.7432222px;";e=b(e).offset().left;b.support.offsetFractions=10<e&&11>e;a.innerHTML="";c.removeChild(a)})()})(jQuery);
(function(b,m){function k(b){return parseInt(b,10)||0}function l(b){return!isNaN(parseInt(b,10))}b.widget("ui.resizable",b.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var h,e,f,k,g,l=this,m=this.options;this.element.addClass("ui-resizable");
b.extend(this,{_aspectRatio:!!m.aspectRatio,aspectRatio:m.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:m.helper||m.ghost||m.animate?m.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(b("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),
left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),
this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=m.handles||(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");
if(this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),h=this.handles.split(","),this.handles={},e=0;e<h.length;e++)f=b.trim(h[e]),g="ui-resizable-"+f,k=b("<div class='ui-resizable-handle "+g+"'></div>"),k.css({zIndex:m.zIndex}),"se"===f&&k.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(k);this._renderAxis=function(c){var e,a,d;c=c||this.element;for(e in this.handles)this.handles[e].constructor===
String&&(this.handles[e]=b(this.handles[e],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(a=b(this.handles[e],this.element),d=/sw|ne|nw|se|n|s/.test(e)?a.outerHeight():a.outerWidth(),a=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),c.css(a,d),this._proportionallyResize()),b(this.handles[e])};this._renderAxis(this.element);this._handles=b(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){l.resizing||(this.className&&(k=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),l.axis=k&&k[1]?k[1]:"se")});m.autoHide&&(this._handles.hide(),b(this.element).addClass("ui-resizable-autohide").mouseenter(function(){m.disabled||(b(this).removeClass("ui-resizable-autohide"),l._handles.show())}).mouseleave(function(){m.disabled||l.resizing||(b(this).addClass("ui-resizable-autohide"),l._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();
var h,e=function(e){b(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};this.elementIsWrapper&&(e(this.element),h=this.element,this.originalElement.css({position:h.css("position"),width:h.outerWidth(),height:h.outerHeight(),top:h.css("top"),left:h.css("left")}).insertAfter(h),h.remove());this.originalElement.css("resize",this.originalResizeStyle);e(this.originalElement);
return this},_mouseCapture:function(h){var e,f,k=!1;for(e in this.handles)if(f=b(this.handles[e])[0],f===h.target||b.contains(f,h.target))k=!0;return!this.options.disabled&&k},_mouseStart:function(h){var e,f,l;l=this.options;e=this.element.position();var g=this.element;this.resizing=!0;/absolute/.test(g.css("position"))?g.css({position:"absolute",top:g.css("top"),left:g.css("left")}):g.is(".ui-draggable")&&g.css({position:"absolute",top:e.top,left:e.left});this._renderProxy();e=k(this.helper.css("left"));
f=k(this.helper.css("top"));l.containment&&(e+=b(l.containment).scrollLeft()||0,f+=b(l.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:e,top:f};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()};this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()};this.originalPosition={left:e,top:f};this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-
g.height()};this.originalMousePosition={left:h.pageX,top:h.pageY};this.aspectRatio="number"===typeof l.aspectRatio?l.aspectRatio:this.originalSize.width/this.originalSize.height||1;l=b(".ui-resizable-"+this.axis).css("cursor");b("body").css("cursor","auto"===l?this.axis+"-resize":l);g.addClass("ui-resizable-resizing");this._propagate("start",h);return!0},_mouseDrag:function(h){var e,f=this.helper,k={};e=this.originalMousePosition;var g=this.position.top,l=this.position.left,m=this.size.width,c=this.size.height,
p=this._change[this.axis];if(!p)return!1;e=p.apply(this,[h,h.pageX-e.left||0,h.pageY-e.top||0]);this._updateVirtualBoundaries(h.shiftKey);if(this._aspectRatio||h.shiftKey)e=this._updateRatio(e,h);e=this._respectSize(e,h);this._updateCache(e);this._propagate("resize",h);this.position.top!==g&&(k.top=this.position.top+"px");this.position.left!==l&&(k.left=this.position.left+"px");this.size.width!==m&&(k.width=this.size.width+"px");this.size.height!==c&&(k.height=this.size.height+"px");f.css(k);!this._helper&&
this._proportionallyResizeElements.length&&this._proportionallyResize();b.isEmptyObject(k)||this._trigger("resize",h,this.ui());return!1},_mouseStop:function(h){this.resizing=!1;var e,f,k,g=this.options;this._helper&&(e=this._proportionallyResizeElements,e=(f=e.length&&/textarea/i.test(e[0].nodeName))&&b.ui.hasScroll(e[0],"left")?0:this.sizeDiff.height,f=f?0:this.sizeDiff.width,f={width:this.helper.width()-f,height:this.helper.height()-e},e=parseInt(this.element.css("left"),10)+(this.position.left-
this.originalPosition.left)||null,k=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,g.animate||this.element.css(b.extend(f,{top:k,left:e})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!g.animate&&this._proportionallyResize());b("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",h);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(b){var e,
f,k,g;g=this.options;g={minWidth:l(g.minWidth)?g.minWidth:0,maxWidth:l(g.maxWidth)?g.maxWidth:Infinity,minHeight:l(g.minHeight)?g.minHeight:0,maxHeight:l(g.maxHeight)?g.maxHeight:Infinity};if(this._aspectRatio||b)b=g.minHeight*this.aspectRatio,f=g.minWidth/this.aspectRatio,e=g.maxHeight*this.aspectRatio,k=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),f>g.minHeight&&(g.minHeight=f),e<g.maxWidth&&(g.maxWidth=e),k<g.maxHeight&&(g.maxHeight=k);this._vBoundaries=g},_updateCache:function(b){this.offset=
this.helper.offset();l(b.left)&&(this.position.left=b.left);l(b.top)&&(this.position.top=b.top);l(b.height)&&(this.size.height=b.height);l(b.width)&&(this.size.width=b.width)},_updateRatio:function(b){var e=this.position,f=this.size,k=this.axis;l(b.height)?b.width=b.height*this.aspectRatio:l(b.width)&&(b.height=b.width/this.aspectRatio);"sw"===k&&(b.left=e.left+(f.width-b.width),b.top=null);"nw"===k&&(b.top=e.top+(f.height-b.height),b.left=e.left+(f.width-b.width));return b},_respectSize:function(b){var e=
this._vBoundaries,f=this.axis,k=l(b.width)&&e.maxWidth&&e.maxWidth<b.width,g=l(b.height)&&e.maxHeight&&e.maxHeight<b.height,q=l(b.width)&&e.minWidth&&e.minWidth>b.width,m=l(b.height)&&e.minHeight&&e.minHeight>b.height,c=this.originalPosition.left+this.originalSize.width,p=this.position.top+this.size.height,a=/sw|nw|w/.test(f),f=/nw|ne|n/.test(f);q&&(b.width=e.minWidth);m&&(b.height=e.minHeight);k&&(b.width=e.maxWidth);g&&(b.height=e.maxHeight);q&&a&&(b.left=c-e.minWidth);k&&a&&(b.left=c-e.maxWidth);
m&&f&&(b.top=p-e.minHeight);g&&f&&(b.top=p-e.maxHeight);b.width||b.height||b.left||!b.top?b.width||b.height||b.top||!b.left||(b.left=null):b.top=null;return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var b,e,f,k,g,l=this.helper||this.element;for(b=0;b<this._proportionallyResizeElements.length;b++){g=this._proportionallyResizeElements[b];if(!this.borderDif)for(this.borderDif=[],f=[g.css("borderTopWidth"),g.css("borderRightWidth"),g.css("borderBottomWidth"),g.css("borderLeftWidth")],
k=[g.css("paddingTop"),g.css("paddingRight"),g.css("paddingBottom"),g.css("paddingLeft")],e=0;e<f.length;e++)this.borderDif[e]=(parseInt(f[e],10)||0)+(parseInt(k[e],10)||0);g.css({height:l.height()-this.borderDif[0]-this.borderDif[2]||0,width:l.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var h=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||b("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++h.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(b,e){return{width:this.originalSize.width+e}},w:function(b,e){return{left:this.originalPosition.left+e,width:this.originalSize.width-e}},n:function(b,e,f){return{top:this.originalPosition.top+f,height:this.originalSize.height-f}},s:function(b,e,f){return{height:this.originalSize.height+
f}},se:function(h,e,f){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[h,e,f]))},sw:function(h,e,f){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[h,e,f]))},ne:function(h,e,f){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[h,e,f]))},nw:function(h,e,f){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[h,e,f]))}},_propagate:function(h,e){b.ui.plugin.call(this,h,[e,this.ui()]);
"resize"!==h&&this._trigger(h,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});b.ui.plugin.add("resizable","animate",{stop:function(h){var e=b(this).data("ui-resizable"),f=e.options,k=e._proportionallyResizeElements,g=k.length&&/textarea/i.test(k[0].nodeName),l=g&&b.ui.hasScroll(k[0],"left")?0:e.sizeDiff.height,g=
{width:e.size.width-(g?0:e.sizeDiff.width),height:e.size.height-l},l=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null,m=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;e.element.animate(b.extend(g,m&&l?{top:m,left:l}:{}),{duration:f.animateDuration,easing:f.animateEasing,step:function(){var c={width:parseInt(e.element.css("width"),10),height:parseInt(e.element.css("height"),10),top:parseInt(e.element.css("top"),10),left:parseInt(e.element.css("left"),
10)};k&&k.length&&b(k[0]).css({width:c.width,height:c.height});e._updateCache(c);e._propagate("resize",h)}})}});b.ui.plugin.add("resizable","containment",{start:function(){var h,e,f,l,g,q=b(this).data("ui-resizable"),m=q.element;f=q.options.containment;if(m=f instanceof b?f.get(0):/parent/.test(f)?m.parent().get(0):f)q.containerElement=b(m),/document/.test(f)||f===document?(q.containerOffset={left:0,top:0},q.containerPosition={left:0,top:0},q.parentData={element:b(document),left:0,top:0,width:b(document).width(),
height:b(document).height()||document.body.parentNode.scrollHeight}):(h=b(m),e=[],b(["Top","Right","Left","Bottom"]).each(function(c,b){e[c]=k(h.css("padding"+b))}),q.containerOffset=h.offset(),q.containerPosition=h.position(),q.containerSize={height:h.innerHeight()-e[3],width:h.innerWidth()-e[1]},f=q.containerOffset,l=q.containerSize.height,g=q.containerSize.width,g=b.ui.hasScroll(m,"left")?m.scrollWidth:g,l=b.ui.hasScroll(m)?m.scrollHeight:l,q.parentData={element:m,left:f.left,top:f.top,width:g,
height:l})},resize:function(h){var e,f,k,g,l=b(this).data("ui-resizable");e=l.options;f=l.containerOffset;k=l.position;h=l._aspectRatio||h.shiftKey;g={top:0,left:0};var m=l.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(g=f);k.left<(l._helper?f.left:0)&&(l.size.width+=l._helper?l.position.left-f.left:l.position.left-g.left,h&&(l.size.height=l.size.width/l.aspectRatio),l.position.left=e.helper?f.left:0);k.top<(l._helper?f.top:0)&&(l.size.height+=l._helper?l.position.top-f.top:
l.position.top,h&&(l.size.width=l.size.height*l.aspectRatio),l.position.top=l._helper?f.top:0);l.offset.left=l.parentData.left+l.position.left;l.offset.top=l.parentData.top+l.position.top;e=Math.abs(l.offset.left-g.left+l.sizeDiff.width);f=Math.abs((l._helper?l.offset.top-g.top:l.offset.top-f.top)+l.sizeDiff.height);k=l.containerElement.get(0)===l.element.parent().get(0);g=/relative|absolute/.test(l.containerElement.css("position"));k&&g&&(e-=Math.abs(l.parentData.left));e+l.size.width>=l.parentData.width&&
(l.size.width=l.parentData.width-e,h&&(l.size.height=l.size.width/l.aspectRatio));f+l.size.height>=l.parentData.height&&(l.size.height=l.parentData.height-f,h&&(l.size.width=l.size.height*l.aspectRatio))},stop:function(){var h=b(this).data("ui-resizable"),e=h.options,f=h.containerOffset,k=h.containerPosition,g=h.containerElement,l=b(h.helper),m=l.offset(),c=l.outerWidth()-h.sizeDiff.width,l=l.outerHeight()-h.sizeDiff.height;h._helper&&!e.animate&&/relative/.test(g.css("position"))&&b(this).css({left:m.left-
k.left-f.left,width:c,height:l});h._helper&&!e.animate&&/static/.test(g.css("position"))&&b(this).css({left:m.left-k.left-f.left,width:c,height:l})}});b.ui.plugin.add("resizable","alsoResize",{start:function(){var h=b(this).data("ui-resizable").options,e=function(e){b(e).each(function(){var e=b(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!==typeof h.alsoResize||h.alsoResize.parentNode?
e(h.alsoResize):h.alsoResize.length?(h.alsoResize=h.alsoResize[0],e(h.alsoResize)):b.each(h.alsoResize,function(b){e(b)})},resize:function(h,e){var f=b(this).data("ui-resizable"),k=f.options,g=f.originalSize,l=f.originalPosition,m={height:f.size.height-g.height||0,width:f.size.width-g.width||0,top:f.position.top-l.top||0,left:f.position.left-l.left||0},c=function(c,a){b(c).each(function(){var d=b(this),c=b(this).data("ui-resizable-alsoresize"),f={},g=a&&a.length?a:d.parents(e.originalElement[0]).length?
["width","height"]:["width","height","top","left"];b.each(g,function(a,d){var b=(c[d]||0)+(m[d]||0);b&&0<=b&&(f[d]=b||null)});d.css(f)})};"object"!==typeof k.alsoResize||k.alsoResize.nodeType?c(k.alsoResize):b.each(k.alsoResize,function(b,a){c(b,a)})},stop:function(){b(this).removeData("resizable-alsoresize")}});b.ui.plugin.add("resizable","ghost",{start:function(){var h=b(this).data("ui-resizable"),e=h.options,f=h.size;h.ghost=h.originalElement.clone();h.ghost.css({opacity:.25,display:"block",position:"relative",
height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"===typeof e.ghost?e.ghost:"");h.ghost.appendTo(h.helper)},resize:function(){var h=b(this).data("ui-resizable");h.ghost&&h.ghost.css({position:"relative",height:h.size.height,width:h.size.width})},stop:function(){var h=b(this).data("ui-resizable");h.ghost&&h.helper&&h.helper.get(0).removeChild(h.ghost.get(0))}});b.ui.plugin.add("resizable","grid",{resize:function(){var h=b(this).data("ui-resizable"),
e=h.options,f=h.size,k=h.originalSize,g=h.originalPosition,l=h.axis,m="number"===typeof e.grid?[e.grid,e.grid]:e.grid,c=m[0]||1,p=m[1]||1,a=Math.round((f.width-k.width)/c)*c,f=Math.round((f.height-k.height)/p)*p,d=k.width+a,u=k.height+f,C=e.maxWidth&&e.maxWidth<d,x=e.maxHeight&&e.maxHeight<u,A=e.minWidth&&e.minWidth>d,z=e.minHeight&&e.minHeight>u;e.grid=m;A&&(d+=c);z&&(u+=p);C&&(d-=c);x&&(u-=p);/^(se|s|e)$/.test(l)?(h.size.width=d,h.size.height=u):/^(ne)$/.test(l)?(h.size.width=d,h.size.height=u,
h.position.top=g.top-f):/^(sw)$/.test(l)?(h.size.width=d,h.size.height=u,h.position.left=g.left-a):(0<u-p?(h.size.height=u,h.position.top=g.top-f):(h.size.height=p,h.position.top=g.top+k.height-p),0<d-c?(h.size.width=d,h.position.left=g.left-a):(h.size.width=c,h.position.left=g.left+k.width-c))}})})(jQuery);
(function(b,m){var k=0,l={},h={};l.height=l.paddingTop=l.paddingBottom=l.borderTopWidth=l.borderBottomWidth="hide";h.height=h.paddingTop=h.paddingBottom=h.borderTopWidth=h.borderBottomWidth="show";b.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;
this.prevShow=this.prevHide=b();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");e.collapsible||!1!==e.active&&null!=e.active||(e.active=0);this._processPanels();0>e.active&&(e.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():b(),content:this.active.length?this.active.next():b()}},_createIcons:function(){var e=this.options.icons;e&&(b("<span>").addClass("ui-accordion-header-icon ui-icon "+
e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var b;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&
this.removeAttribute("id")});this._destroyIcons();b=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&b.css("height","")},_setOption:function(b,f){"active"===b?this._activate(f):("event"===b&&
(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(f)),this._super(b,f),"collapsible"!==b||f||!1!==this.options.active||this._activate(0),"icons"===b&&(this._destroyIcons(),f&&this._createIcons()),"disabled"===b&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!f))},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var f=b.ui.keyCode,h=this.headers.length,g=this.headers.index(e.target),k=!1;switch(e.keyCode){case f.RIGHT:case f.DOWN:k=this.headers[(g+
1)%h];break;case f.LEFT:case f.UP:k=this.headers[(g-1+h)%h];break;case f.SPACE:case f.ENTER:this._eventHandler(e);break;case f.HOME:k=this.headers[0];break;case f.END:k=this.headers[h-1]}k&&(b(e.target).attr("tabIndex",-1),b(k).attr("tabIndex",0),k.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===b.ui.keyCode.UP&&e.ctrlKey&&b(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels();!1===e.active&&!0===e.collapsible||!this.headers.length?(e.active=
!1,this.active=b()):!1===e.active?this._activate(0):this.active.length&&!b.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=b()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},
_refresh:function(){var e,f=this.options,h=f.heightStyle,g=this.element.parent(),l=this.accordionId="ui-accordion-"+(this.element.attr("id")||++k);this.active=this._findActive(f.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(e){var c=b(this),f=c.attr("id"),a=c.next(),d=a.attr("id");f||(f=l+"-header-"+e,c.attr("id",f));d||(d=l+"-panel-"+
e,a.attr("id",d));c.attr("aria-controls",d);a.attr("aria-labelledby",f)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(f.event);"fill"===h?(e=g.height(),this.element.siblings(":visible").each(function(){var f=
b(this),c=f.css("position");"absolute"!==c&&"fixed"!==c&&(e-=f.outerHeight(!0))}),this.headers.each(function(){e-=b(this).outerHeight(!0)}),this.headers.next().each(function(){b(this).height(Math.max(0,e-b(this).innerHeight()+b(this).height()))}).css("overflow","auto")):"auto"===h&&(e=0,this.headers.next().each(function(){e=Math.max(e,b(this).css("height","").height())}).height(e))},_activate:function(e){e=this._findActive(e)[0];e!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,
currentTarget:e,preventDefault:b.noop}))},_findActive:function(e){return"number"===typeof e?this.headers.eq(e):b()},_setupEvents:function(e){var f={keydown:"_keydown"};e&&b.each(e.split(" "),function(b,e){f[e]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,f);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(e){var f=this.options,h=this.active,g=b(e.currentTarget),k=
g[0]===h[0],l=k&&f.collapsible,c=l?b():g.next(),p=h.next(),c={oldHeader:h,oldPanel:p,newHeader:l?b():g,newPanel:c};e.preventDefault();k&&!f.collapsible||!1===this._trigger("beforeActivate",e,c)||(f.active=l?!1:this.headers.index(g),this.active=k?b():g,this._toggle(c),h.removeClass("ui-accordion-header-active ui-state-active"),f.icons&&h.children(".ui-accordion-header-icon").removeClass(f.icons.activeHeader).addClass(f.icons.header),k||(g.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),
f.icons&&g.children(".ui-accordion-header-icon").removeClass(f.icons.header).addClass(f.icons.activeHeader),g.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var f=e.newPanel,h=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=f;this.prevHide=h;this.options.animate?this._animate(f,h,e):(h.hide(),f.show(),this._toggleComplete(e));h.attr({"aria-hidden":"true"});h.prev().attr("aria-selected","false");f.length&&h.length?h.prev().attr({tabIndex:-1,
"aria-expanded":"false"}):f.length&&this.headers.filter(function(){return 0===b(this).attr("tabIndex")}).attr("tabIndex",-1);f.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(b,f,k){var g,q,m,c=this,p=0,a=b.length&&(!f.length||b.index()<f.index()),d=this.options.animate||{},a=a&&d.down||d,u=function(){c._toggleComplete(k)};"number"===typeof a&&(m=a);"string"===typeof a&&(q=a);q=q||a.easing||d.easing;m=m||a.duration||d.duration;
if(!f.length)return b.animate(h,m,q,u);if(!b.length)return f.animate(l,m,q,u);g=b.show().outerHeight();f.animate(l,{duration:m,easing:q,step:function(a,d){d.now=Math.round(a)}});b.hide().animate(h,{duration:m,easing:q,complete:u,step:function(a,d){d.now=Math.round(a);"height"!==d.prop?p+=d.now:"content"!==c.options.heightStyle&&(d.now=Math.round(g-f.outerHeight()-p),p=0)}})},_toggleComplete:function(b){var f=b.oldPanel;f.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");
f.length&&(f.parent()[0].className=f.parent()[0].className);this._trigger("activate",null,b)}})})(jQuery);
(function(b,m){var k,l=function(){var e=b(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},h=function(e){var f=e.name,h=e.form,g=b([]);f&&(f=f.replace(/'/g,"\\'"),g=h?b(h).find("[name='"+f+"']"):b("[name='"+f+"']",e.ownerDocument).filter(function(){return!this.form}));return g};b.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+
this.eventNamespace).bind("reset"+this.eventNamespace,l);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var e=this,f=this.options,m="checkbox"===this.type||"radio"===this.type,g=m?"":"ui-state-active";null===f.label&&(f.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);
this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){f.disabled||this===k&&b(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){f.disabled||b(this).removeClass(g)}).bind("click"+this.eventNamespace,function(b){f.disabled&&(b.preventDefault(),b.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}});
m&&this.element.bind("change"+this.eventNamespace,function(){e.refresh()});"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(f.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(f.disabled)return!1;b(this).addClass("ui-state-active");e.buttonElement.attr("aria-pressed","true");var g=e.element[0];h(g).not(g).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",
"false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(f.disabled)return!1;b(this).addClass("ui-state-active");k=this;e.document.one("mouseup",function(){k=null})}).bind("mouseup"+this.eventNamespace,function(){if(f.disabled)return!1;b(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){if(f.disabled)return!1;e.keyCode!==b.ui.keyCode.SPACE&&e.keyCode!==b.ui.keyCode.ENTER||b(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+
" blur"+this.eventNamespace,function(){b(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===b.ui.keyCode.SPACE&&b(this).click()}));this._setOption("disabled",f.disabled);this._resetButton()},_determineButtonType:function(){var b,f;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?
(b=this.element.parents().last(),f="label[for='"+this.element.attr("id")+"']",this.buttonElement=b.find(f),this.buttonElement.length||(b=b.length?b.siblings():this.element.siblings(),this.buttonElement=b.filter(f),this.buttonElement.length||(this.buttonElement=b.find(f))),this.element.addClass("ui-helper-hidden-accessible"),(b=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",b)):this.buttonElement=this.element},widget:function(){return this.buttonElement},
_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-active ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(b,f){this._super(b,
f);"disabled"===b?(this.element.prop("disabled",!!f),f&&this.buttonElement.removeClass("ui-state-focus")):this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e);"radio"===this.type?h(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",
"false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var e=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
f=b("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),h=this.options.icons,g=h.primary&&h.secondary,k=[];h.primary||h.secondary?(this.options.text&&k.push("ui-button-text-icon"+(g?"s":h.primary?"-primary":"-secondary")),h.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+h.primary+"'></span>"),h.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+h.secondary+"'></span>"),this.options.text||(k.push(g?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||e.attr("title",b.trim(f)))):k.push("ui-button-text-only");e.addClass(k.join(" "))}}});b.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,f){"disabled"===b&&this.buttons.button("option",b,f);this._super(b,f)},refresh:function(){var e=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);window.TOONTALK={};window.TOONTALK.creators_from_json={};window.TOONTALK.widget=function(b){var m=function(b){var l=this.get_frontside&&this.get_frontside(!0);if(l)return b&&this.rerender(),l.get_element()};b.creators_from_json.top_level=function(k){k=b.widget.create_top_level_widget();$(k.get_backside(!0).get_element()).addClass("toontalk-top-level-backside");return k};return{add_standard_widget_functionality:function(b){this.add_sides_functionality(b);this.runnable(b);this.stackable(b);this.animatable(b);this.has_title(b);this.has_parent(b);this.has_description(b);
this.has_listeners(b);this.erasable(b);b.is_of_type||(b.is_of_type=function(b){return this.get_type_name()===b});return b},erasable:function(b){var l;b.get_erased||(b.get_erased=function(){return l});b.set_erased||(b.set_erased=function(b,e){l=b;e&&this.rerender()});return b},add_sides_functionality:function(k){var l,h;k.get_frontside||(k.get_frontside=function(e){e&&!l&&(l=b.frontside.create(k));return l},k.save_dimensions=function(){var b;this.get_size_attributes?(b=this.get_size_attributes(),this.saved_width=
b.width,this.saved_height=b.height):(b=this.get_frontside_element(),this.saved_width=$(b).width(),this.saved_height=$(b).height())},k.restore_dimensions=function(){var b;0<this.saved_width&&(this.set_size_attributes?this.set_size_attributes(this.saved_width,this.saved_height):(b=this.get_frontside_element(),$(b).css({width:this.saved_width,height:this.saved_height}),this.saved_height=this.saved_width=void 0))});k.get_backside||(k.get_backside=function(b){b&&!h&&(h=k.create_backside());return h});
k.set_backside||(k.set_backside=function(b){h=b});k.forget_backside||(k.forget_backside=function(){h=void 0;this.get_backside_widgets().forEach(function(b){b.get_widget().forget_backside()})});k.create_backside||(k.create_backside=function(){return b.backside.create(k)});return k},runnable:function(b){var l=!1;b.get_running||(b.get_running=function(){return l});b.set_running||(b.set_running=function(h,e){var f=this.get_backside_widgets(),m;l=h;this.get_backside()&&this.get_backside().run_status_changed(l);
f.forEach(function(f){m=f.get_widget();f.is_backside()&&0<=this.backside_widgets.indexOf(m)||(m.is_of_type("robot")?f.is_backside()||l&&m.get_running()||(l?(m.set_stopped(!1),m.run(b,e)):m.set_stopped(!0),m.rerender()):m.set_running&&(!e&&f.is_backside()&&"top-level"!==b.get_type_name()?m.set_running(h,b):m.set_running(h)))}.bind(this));this.rerender()});return b},stackable:function(b){var l=!1;b.get_infinite_stack||(b.get_infinite_stack=function(){return l});b.set_infinite_stack||(b.set_infinite_stack=
function(h){var e=b.get_backside_element(),f=b.get_frontside_element();l=h;e&&$(e).find(".toontalk-infinite-stack-check-box").prop("checked",h);f&&(h?$(f).addClass("toontalk-infinite-stack"):$(f).removeClass("toontalk-infinite-stack"))});return b},animatable:function(k){var l;k.animate_to_widget||(l=function(h){var e=h.get_element();e&&$(e).is(":visible")||(e=b.UTILITIES.find_resource_equal_to_widget(h));return e},k.animate_to_widget=function(b,e,f,k,g){this.animate_to_element(l(b),e,f,k,g)});k.animate_to_element||
(k.animate_to_element=function(h,e,f,k,g){var l=$(h).offset(),m=$(this.get_frontside_element());h&&$(h).is(":visible")?(k||(k=($(h).width()-m.width())*Math.random()),g||(g=($(h).height()-m.height())*Math.random()),l?(l.left+=k,l.top+=g,b.debugging&&(0>l.left||0>l.top)&&console.log("Should this include negative values? "+l)):l={left:0,top:0},this.animate_to_absolute_position(l,e,f)):e()});k.animate_to_absolute_position||(k.animate_to_absolute_position=function(h,e,f){var k;k=this.get_frontside_element();
b.UTILITIES.animate_to_absolute_position(k,h,e,f)});return k},has_title:function(k){k.get_title||(k.get_title=function(){var k=this.get_type_name(),h=this.get_backside(),e=this.get_frontside_element(),f=this.get_description(),m;if($(e).is(".toontalk-top-level-resource"))m="Drag this "+k+" to a work area.";else if(!h||!h.get_element())m="Click to see the back side of this "+k;else if(!f)return b.UTILITIES.add_a_or_an(k,!0);f&&(f="This "+k+" "+f,m=m?f+"\n"+m:f);return m});return k},has_parent:function(b){var l,
h;b.get_parent_of_frontside=function(){return l};b.get_parent_of_backside=function(){return h};b.set_parent_of_frontside=function(b,f,h){l&&!h&&l.is_backside()&&l.get_widget().remove_backside_widget(this,!1,!0);l=b&&f?b.get_backside(!0):b};b.set_parent_of_backside=function(b,f,k){h&&!k&&h.is_backside()&&h.get_widget().remove_backside_widget(this,!0,!0);h=b&&f?b.get_backside(!0):b};b.closest_visible_ancestor=function(){for(var b=this;b&&!b.visible();)b=b.is_backside()?b.get_parent_of_backside():b.get_parent_of_frontside();
return b||this};b.ancestor_of_type=function(b){for(var f=this;f&&!f.is_of_type(b);)f=f.is_backside()?f.get_widget().get_parent_of_backside():f.get_parent_of_frontside();return f};b.has_ancestor=function(b){for(var f=this;f;){if(b===f)return!0;f=f.is_backside()?f.get_widget().get_parent_of_backside():f.get_parent_of_frontside()}return!1};b.remove_from_parent_of_frontside=function(b){l&&(l.is_backside()?l.remove_backside_widget(this,!1):l.removed_from_container&&l.removed_from_container(this,!1,b))};
return b},has_description:function(b){var l;b.get_description||(b.get_description=function(){return l});b.set_description||(b.set_description=function(b,e){if(l===b||!l&&""===b)return!1;l=b;e&&this.rerender();return!0})},has_listeners:function(k){var l={};k.add_listener||(k.add_listener=function(b,e){var f=l[b];f?0>f.indexOf(e)&&f.push(e):l[b]=[e]});k.remove_listener||(k.remove_listener=function(h,e,f){if(h=l[h])if(e=h.indexOf(e),0<=e){h.splice(e,1);return}!f&&b.debugging&&console.log("Listener of type "+
type_name+" could not be removed.")});k.get_listeners||(k.get_listeners=function(b){return l[b]})},get_full_description:function(){var b,l;if(this.get_erased&&this.get_erased())return"erased "+this.get_type_name();b=this.get_description();l=this.toString();return b?l+" ("+b+")":l},remove:function(b){var l=this.get_backside(),h=this.get_frontside(),e=this.get_parent_of_frontside(),f=this.get_parent_of_backside();l&&(l.remove_element(),f&&(l=f.is_backside()?f:f.get_backside(),l.removed_from_container&&
l.removed_from_container(this,!0,b)));h&&(h.remove(),e&&this.remove_from_parent_of_frontside(b));this.set_running(!1)},get_frontside_element:m,get_element:m,get_backside_element:function(b){if(b=this.get_backside&&this.get_backside(b))return b.get_element()},add_to_json:function(b,l){var h,e,f,m,g;if(b){b.view?(h=b.view,b=b.semantic):h={};e={semantic:b,view:h,version:1};this.get_erased&&this.get_erased()&&(b.erased=!0);this.get_infinite_stack&&this.get_infinite_stack()&&(b.infinite_stack=!0);this.get_running&&
this.get_running()&&(b.running=!0);if(!this.get_parent_of_frontside()||this.get_parent_of_frontside().is_backside())if(m=this.get_frontside_element&&this.get_frontside_element())$(m).is(".toontalk-plain-text-element")||(g=$(m).width(),0!==g&&(h.frontside_width=$(m).width(),h.frontside_height=$(m).height())),$(m).is(":visible")&&(f=$(m).position()),f&&(h.frontside_left=f.left,h.frontside_top=f.top);if(m=this.get_backside()){if(g=m.get_element())h.backside_width=$(g).width(),h.backside_height=$(g).height(),
h.backside_left||(f=$(g).position(),h.backside_left=f.left,h.backside_top=f.top,"&lt;"===$(g).find(".toontalk-settings-backside-button").html()&&(h.advanced_settings_open=!0));m.get_backside_dimensions()&&(h.backside_geometry=m.get_backside_dimensions())}!h.backside_geometry&&this.backside_geometry&&(h.backside_geometry=this.backside_geometry);h.saved_width=this.saved_width;h.saved_height=this.saved_height;b.description=this.get_description&&this.get_description();return e}console.log("get_json not defined");
return{}},add_backside_widgets_to_json:function(k,l){var h=this.get_backside_widgets(),e;0<h.length&&(k.semantic.backside_widgets=b.UTILITIES.get_json_of_array(h,l),(h=this.get_backside_widgets_json_views())&&h.forEach(function(b,h){var g;e=k.semantic.backside_widgets[h];0<=e.widget.shared_widget_index?(g=l.widgets_encountered.indexOf(l.shared_widgets[e.widget.shared_widget_index]),g=l.json_of_widgets_encountered[g].view):g=e.widget.view;e.is_backside?b.backside_left&&(g.backside_left=b.backside_left,
g.backside_top=b.backside_top):b.frontside_left&&(g.frontside_left=b.frontside_left,g.frontside_top=b.frontside_top)}))},get_backside_widgets:function(){return this.backside_widgets||[]},add_backside_widget:function(k,l){var h=this.get_backside(),e=l?k.get_backside():k;b.debugging&&k===this?b.UTILITIES.report_internal_error("Adding a widget to a list of its backside widgets!"):(this.backside_widgets?0>this.backside_widgets.indexOf(e)&&this.backside_widgets.push(e):this.backside_widgets=[e],l?k.set_parent_of_backside(this,
!0):k.set_parent_of_frontside(this,!0),e.set_visible(h.visible()),k.render())},remove_backside_widget:function(k,l,h){this.get_backside();var e=l?k.get_backside(!0):k,f;b.debugging&&!this.backside_widgets?h?console.log("remove_backside_widget called and there are no backside_widgets"):b.UTILITIES.report_internal_error("Couldn't remove a widget from backside widgets."):(f=this.backside_widgets.indexOf(e),0>f?h?b.debugging&&console.log("Warning: Probable redundant call to remove_backside_widget"):b.UTILITIES.report_internal_error("Couldn't find a widget to remove it from backside widgets. "+
e.get_widget()+" ("+e.get_widget().debug_id+")"):(this.backside_widgets.splice(f,1),this.backside_widgets_json_views&&this.backside_widgets_json_views.splice(f,1),l?(l=k.get_parent_of_backside())&&l.get_widget()===this&&k.set_parent_of_backside(void 0,!0,!0):(l=k.get_parent_of_frontside())&&l.get_widget()===this&&k.set_parent_of_frontside(void 0,void 0,!0),e.set_visible(!1)))},set_backside_widget_sides:function(b,l){var h=this.get_backside(),e=h&&h.visible();this.backside_widgets=b;0<b.length&&(this.get_backside()?
this.get_backside().add_backside_widgets(b,l):this.backside_widgets_json_views=l,b.forEach(function(b){b.is_backside()?b.get_widget().set_parent_of_backside(this,!0):b.get_widget().set_parent_of_frontside(this,!0);b.set_visible(e)}.bind(this)))},get_backside_widgets_json_views:function(b){!this.backside_widgets_json_views&&b&&(this.backside_widgets_json_views=[]);return this.backside_widgets_json_views},can_run:function(){var b=!1,l;this.get_backside_widgets().some(function(h){l=h.get_widget();if(l.get_body&&
!l.get_body().is_empty()||l.can_run())return b=!0});return b},add_to_copy:function(k,l){var h;this.get_erased&&this.get_erased()&&(k.set_erased||b.widget.erasable(k),k.set_erased(this.get_erased()));l||(h=this.get_backside_widgets(),0<h.length&&k.set_backside_widget_sides(b.UTILITIES.copy_widget_sides(h),this.get_backside_widgets_json_views()));return k},get_type_name:function(){return""},copy:function(){console.assert(!1,"copy not implemented")},add_copy_to_container:function(k){k||(k=this.copy());
var l=this.get_frontside_element(),h=k.get_frontside_element(),e=$(l).closest(".toontalk-backside"),f=b.UTILITIES.relative_position(l,e.get(0)),m=b.UTILITIES.widget_from_jquery(e);$(h).css({width:$(l).width(),height:$(l).height(),left:f.left+30,top:f.top+30});e.append(h);m&&m.add_backside_widget(k);b.robot.in_training&&b.robot.in_training.copied(this,k,!1);return k},visible:function(){var b=this.get_frontside();return b?b.visible():!1},set_visible:function(b){var l=this.get_frontside(b);l&&l.set_visible(b)},
is_backside:function(){return!1},drag_started:function(k,l){b.robot.in_training&&b.robot.in_training.picked_up(this,k,l)},match:function(b){console.assert(!1,"match not implemented for "+b.toString())},removed:function(k){b.UTILITIES.report_internal_error("removed not implemented")},equals_box:function(){return!1},equals_number:function(){return!1},match_box:function(){return"not matched"},match_number:function(){return"not matched"},open_backside:function(k){var l=this.get_backside(),h=!0,e=function(a,
e){b.UTILITIES.set_timeout(function(){$(a).addClass("toontalk-side-appearing");b.UTILITIES.add_one_shot_event_handler(a,"transitionend",2500,function(){$(a).removeClass("toontalk-side-appearing");k&&k()});$(a).css({left:s,top:c,opacity:e});this.apply_backside_geometry()}.bind(this))}.bind(this),f,m,g,q,s,c,p,a;if(l){f=l.get_element();if($(f).is(":visible"))return b.UTILITIES.highlight_element(f,1E3),l;if((m=this.get_parent_of_backside())&&m.is_backside())return m.get_widget().open_backside()}m=this.get_frontside_element();
g=$(m).parent();l=$(m);if(!l.is(".toontalk-top-level-resource")){for(;0<g.length&&!g.is(".toontalk-backside");)l=g,g=g.parent(),h=!1;q=l.get(0);l=this.get_backside(!0);f=l.get_element();f.toontalk_widget=this;p=$(m).offset();(a=g.offset())||(a={left:0,top:0});$(f).css({left:p.left-a.left,top:p.top-a.top,opacity:.01});g.append(f);(g=b.UTILITIES.widget_from_jquery(g))&&g.add_backside_widget(this,!0);h?(s=q.offsetLeft+q.offsetWidth,c=q.offsetTop):(s=p.left-a.left,c=p.top-a.top+m.offsetHeight);e(f,"inherit");
l.render();this.backside_widgets&&this.backside_widgets.forEach(function(a){a.render();a.set_visible(!0)});return l}},apply_backside_geometry:function(){var k=this.get_backside(!0),l=k.get_element();this.backside_geometry&&l&&(b.backside.scale_backside($(l),this.backside_geometry.x_scale,this.backside_geometry.y_scale,this.backside_geometry.original_width,this.backside_geometry.original_height),k.set_dimensions(this.backside_geometry))},top_level_widget:function(){var k;return this.is_of_type("top-level")?
this:(k=b.UTILITIES.widget_from_jquery($(this.get_frontside_element()).closest(".toontalk-top-level-backside")))?k:this.create_top_level_widget()},create_top_level_widget:function(){var k=Object.create(b.widget);k.get_json=function(b){b=this.get_backside(!0).get_element();return{semantic:{type:"top_level"},view:{background_color:document.defaultView.getComputedStyle(b,null).getPropertyValue("background-color")}}};k.get_type_name=function(){return"top-level"};k.is_of_type=function(b){return"top-level"===
b};k.toString=function(){return"top level widget"};k.get_description=function(){};k.match=function(){return"matched"};k.update_display=function(){this.backside_widgets&&this.backside_widgets.forEach(function(b){b.visible()&&b.update_display()})};k.copy=function(){return this};k.visible=function(){return!0};k.get_parent_of_frontside=function(){};k.get_parent_of_backside=function(){};k.closest_visible_ancestor=function(){return this};k.get_infinite_stack=function(){return!1};k=k.add_sides_functionality(k);
k=k.runnable(k);k=k.has_parent(k);k.get_backside(!0).set_visible(!0);b.debugging&&(k.debug_id=b.UTILITIES.generate_unique_id(),k.debug_string="Top-level widget");return k},add_to_top_level_backside:function(k,l){var h=this.top_level_widget(),e=k.get_frontside_element(!0);h.add_backside_widget(k);h.get_backside_element().appendChild(e);k.render();l&&b.robot.in_training&&b.robot.in_training.dropped_on(k,h);return e},backup_all:function(k){var l,h;b.no_local_storage||(l=this.top_level_widget())&&l.local_storage_key&&
(h=function(){var e=b.UTILITIES.get_json_top_level(l);try{window.localStorage.setItem(l.local_storage_key,JSON.stringify(e))}catch(f){e="Failed to save state to local storage since it requires "+JSON.stringify(e).length+" bytes. Error message is "+f,b.UTILITIES.is_internet_explorer()?console.error(e):b.UTILITIES.display_message(e)}},k&&h(),setTimeout(h,100))},render:function(){b.DISPLAY_UPDATES.pending_update(this)},rerender:function(){this.visible()&&b.DISPLAY_UPDATES.pending_update(this)},hide:function(){$(this.get_frontside_element()).hide()},
close_button_ok:function(b){return"top-level"!==this.get_type_name()&&!$(b).is(".toontalk-top-level-resource")&&!$(b).closest(".toontalk-conditions-panel").is("*")},get_widget:function(){return this}}}(window.TOONTALK);window.TOONTALK.backside=function(b){return{create:function(m){var k=Object.create(this),l=document.createElement("div"),h=$(l),e=1,f=1,r=document.createElement("div"),g=document.createElement("div"),q=m.get_help_URL&&m.get_help_URL(),s,c,p,a,d,u,C,x,A,z,w=function(a){a?($(r).addClass("toontalk-green-flag-active").removeClass("toontalk-green-flag-inactive"),$(g).addClass("toontalk-stop-sign-inactive").removeClass("toontalk-stop-sign-active")):($(r).addClass("toontalk-green-flag-inactive").removeClass("toontalk-green-flag-active"),
$(g).addClass("toontalk-stop-sign-active").removeClass("toontalk-stop-sign-inactive"))},B=function(){var a=h.width();h.height();var d,c;0===a?setTimeout(B,100):(a=$(g).width(),d=(d=$(u).width())?d+14:0,$(g).css({right:d}),$(r).css({right:d+a+6}),x&&(c=$(r).width(),$(x).css({right:d+a+c+12})))};C=this.create_description_label(k,m);var G,D;m.close_button_ok(l)&&(D=function(a){k.hide_backside(a);a.stopPropagation()},G=(G=m.get_description())?"the "+m.get_type_name()+" who "+G:"the "+m.get_type_name(),
u=b.UTILITIES.create_close_button(D,"Click to hide this back side of "+G+"."),l.appendChild(u));$(r).addClass("toontalk-green-flag toontalk-green-flag-inactive").click(function(a){m.can_run()?(w(!0),m.set_running(!0)):m.is_of_type("top-level")?b.UTILITIES.display_message("There is nothing to run."):b.UTILITIES.display_message("This "+m+" has nothing to run. Add some robots on the back.")}).on("mouseenter",function(a){a=m.get_running()?"Click to stop this from running.":m.can_run()?"This has stopped. Click on the flag to start running it.":
"There is nothing to run here.";g.title=a});$(g).addClass("toontalk-stop-sign toontalk-stop-sign-active").click(function(a){w(!1);m.set_running(!1)}).on("mouseenter",function(a){a=m.get_running()?"To stop this click on the stop sign.":m.can_run()?"Click this to start this running.":"There is nothing to run on this.";r.title=a});l.appendChild(r);l.appendChild(g);q&&(x=document.createElement("div"),$(x).addClass("toontalk-help-button toontalk-widget-help-button").click(function(a){A=document.createElement("iframe");
$(A).addClass("toontalk-help-frame");A.src=q;document.body.appendChild(A);document.body.appendChild(z)}),x.innerHTML="i",x.title="Click to learn more about "+m.get_type_name()+".",z=document.createElement("div"),$(z).addClass("toontalk-close-help-frame-button").button().click(function(a){$(A).remove();$(z).remove()}),z.innerHTML="Return to ToonTalk",l.appendChild(x));C&&l.appendChild(C);b.UTILITIES.set_timeout(B);h.addClass("toontalk-backside toontalk-side toontalk-backside-of-"+m.get_type_name());
h.css({"z-index":b.UTILITIES.next_z_index()});k.get_element=function(){return l};k.get_widget=function(){return m};k.visible=function(){return s};k.set_visible=function(a){var d=this.get_widget().get_backside_widgets();s=a;d.forEach(function(d){d.set_visible(a)})};m.get_backside||(m.get_backside=function(){return k});m.removed_from_container||(m.removed_from_container=function(a,d,c,e){b.robot.in_training||this.remove_backside_widget(a,d,e)});k.widget_dropped_on_me=function(a,d,c,e,f){var g=this.get_widget(),
p,k;d?(p=a.get_backside(!0),k=p.get_element(),p.rerender()):(p=a.get_frontside(!0),k=p.get_element(),a.rerender());p=$(k);h.append(p);this.is_of_type("top-level")?e&&!e.visible()&&p.addClass("toontalk-widget-added-to-backside-by-unwatched-robot"):c||a.animate_to_element(l);b.UTILITIES.set_position_is_absolute(k,!0,c);b.robot.in_training&&!f&&b.robot.in_training.dropped_on(a,this.get_widget());d&&"top-level"!=this.get_widget().get_type_name()&&(e=a.get_backside(),a.forget_backside(),a.remove(c),a.set_backside(e));
g.add_backside_widget(a,d);a.dropped_on_other&&a.dropped_on_other(this.get_widget(),!0,c);a.get_body&&a.get_body().is_empty()&&!a.being_trained&&(e=a.open_backside())&&$(e.get_element()).find(".toontalk-train-backside-button").click();c&&a.get_widget().backup_all();return!0};k.add_backside_widgets=function(a,d){0!==a.length&&b.UTILITIES.set_timeout(function(){var c,b,e=this.visible();a.forEach(function(a,f){var g=a.get_widget().get_backside();c=a.get_element(!0);c.toontalk_widget=a.get_widget();d&&
(b=d[f])&&(a.is_backside()?($(c).css({left:b.backside_left,top:b.backside_top,width:b.backside_width,height:b.backside_height}),a.get_widget().apply_backside_geometry(),b.advanced_settings_open&&g.set_advanced_settings_showing(!0,g.get_element())):(0===b.frontside_width&&(b.frontside_width=""),0===b.frontside_height&&(b.frontside_height=""),$(c).css({left:b.frontside_left,top:b.frontside_top,width:b.frontside_width,height:b.frontside_height})));h.append(c);a.set_visible(e);a.get_widget().rerender()})}.bind(this))};
k.get_backside_dimensions=function(){if(e)return{x_scale:e,y_scale:f,original_width:c,original_height:p}};k.set_dimensions=function(a){e=a.x_scale;f=a.y_scale;c=a.original_width;p=a.original_height};k.scale_to_fit=function(a,d){var g;!c&&this.get_widget().backside_geometry&&(c=this.get_widget().backside_geometry.original_width,p=this.get_widget().backside_geometry.original_height);g=b.UTILITIES.scale_to_fit(a,d,c,p);e=g.x_scale;f=g.y_scale};k.run_status_changed=function(a){w(a)};l.toontalk_widget=
m;b.UTILITIES.drag_and_drop(l);h.resizable({start:function(){a=h.width();d=h.height();c||(c=a);p||(p=d)},resize:function(g,k){var l=k.size.width,m=k.size.height;h.is(".toontalk-top-level-backside")||(e*=l/a,f*=m/d,a=l,d=m,b.backside.scale_backside(h,e,f,c,p))},handles:"e,s,se"});l.addEventListener("mouseenter",function(a){var d=m.get_frontside(),c=m.get_parent_of_backside();!d||c&&!c.get_widget().is_of_type("top-level")||b.UTILITIES.highlight_element(d.get_element(),a)});l.addEventListener("mouseout",
function(a){m.get_frontside()&&b.UTILITIES.remove_highlight()});k.update_display=function(){k.display_updated()};k.display_updated=function(){var a=$(this.get_element());c||(c=a.width());p||(p=a.height())};m.get_backside_widgets&&(C=m.get_backside_widgets(),k.add_backside_widgets(C,m.get_backside_widgets_json_views()));b.debugging&&(l.id=m.debug_id);return k},toString:function(){return"backside of "+this.get_widget()},remove_element:function(){$(this.get_element()).remove()},create_infinite_stack_check_box:function(m,
k){var l=b.UTILITIES.create_check_box(k.get_infinite_stack(),"toontalk-infinite-stack-check-box","Copy when dragged.","Check this if you want the "+k.get_type_name()+" to be copied instead of moved.");$(l.button).click(function(h){var e=l.button.checked;k.set_infinite_stack(e);b.robot.in_training&&b.robot.in_training.edited(k,{setter_name:"set_infinite_stack",argument_1:e,toString:e?"change dragging to make a copy of ":"change dragging back to moving for ",button_selector:".toontalk-infinite-stack-check-box"});
h.stopPropagation()});return l},create_description_label:function(m,k){var l=k.get_description();if(l)return b.UTILITIES.create_text_element("Back side of a "+k.get_type_name()+" that "+l)},add_advanced_settings:function(m){var k=this.get_widget(),l=this.create_infinite_stack_check_box(this,k),h=k.get_type_name(),e=b.UTILITIES.create_text_area(k.get_description(),"toontalk-description-input","This&nbsp;"+h+"&nbsp;","Type here to provide additional information about this "+h+"."),f=$("<button>Make a sensor</button>").button(),
r=function(){var f=e.button.value.trim();k.set_description(f,!0)&&b.robot.in_training&&b.robot.in_training.edited(k,{setter_name:"set_description",argument_1:f,toString:"change the description to '"+f+"'' of the "+h,button_selector:".toontalk-description-input"})},g=document.createElement("table"),q=this.get_element();$(g).addClass("toontalk-advanced-setting");$(e.button).val(k.get_description());e.button.addEventListener("change",r);e.button.addEventListener("mouseout",r);f.click(function(e){e=b.sensor.create("click",
"which",void 0,void 0,!0,k);var c=e.get_frontside_element(!0),g=f.offset();k.add_to_top_level_backside(e,!0);g.left-=120;b.UTILITIES.set_absolute_position($(c),g)});f.attr("title","Click to create a nest which receives messages when events happen to this "+k.get_type_name()+".");g.appendChild(b.UTILITIES.create_row(e.container));g.appendChild(b.UTILITIES.create_row(f.get(0),l.container));q.appendChild(g);m?$(q).find(".toontalk-settings-backside-button").remove():$(q).find(".toontalk-advanced-setting").hide()},
get_type_name:function(){return"the backside of "+b.UTILITIES.add_a_or_an(this.get_widget().get_type_name())},hide_backside:function(m){var k=this.get_widget(),l=k.get_frontside_element(),h=$(k.get_backside_element()),e=h.position(),f=h.parent().closest(".toontalk-backside"),r=k.get_parent_of_backside();b.UTILITIES.remove_highlight();r&&(r.is_backside()?k.set_parent_of_backside(void 0,!0):r.removed_from_container(k,!0,m,!0),k.forget_backside&&k.forget_backside());(function(){var b=k.get_backside_widgets(),
e=k.get_backside_widgets_json_views(!0),f;b.forEach(function(c,b){var a;if(f=c.get_widget().get_element())e[b]||(e[b]={}),c.start_position?(a=c.start_position,c.start_position=void 0):a=$(f).position(),c.is_backside()?(e[b].backside_left=a.left,e[b].backside_top=a.top):(e[b].frontside_left=a.left,e[b].frontside_top=a.top)})})();k.backside_geometry=this.get_backside_dimensions();(function(e){var h=$(l).offset(),k=f.position(),c=function(){e.remove()};e.is(":visible")&&(e.addClass("toontalk-side-appearing"),
b.UTILITIES.add_one_shot_event_handler(e.get(0),"transitionend",2500,c),k||(k={left:0,top:0}),e.css({left:h.left-k.left,top:h.top-k.top,opacity:.1}))})(h);$(l).is(":visible")||(e&&$(l).css({left:e.left,top:e.top}),b.UTILITIES.widget_from_jquery(f).add_backside_widget(k),f.append(l),k.render());k.backside_widgets&&k.backside_widgets.forEach(function(b){b.set_visible(!1)})},create_advanced_settings_button:function(m,k){var l=document.createElement("div"),h=$(l),e=!1;l.innerHTML="&gt;";h.addClass("toontalk-settings-backside-button");
h.css({"z-index":b.UTILITIES.next_z_index()});h.click(function(b){e=!e;this.set_advanced_settings_showing(e,m.get_element(),h);b.stopPropagation()}.bind(this));h.attr("title","Click to see the advanced settings of this "+k.get_type_name()+".");return h.get(0)},set_advanced_settings_showing:function(b,k,l){l||(l=$(k).find(".toontalk-settings-backside-button"));b?($(k).find(".toontalk-advanced-setting").show(),l.html("<"),l.attr("title","Click to hide the advanced settings.")):($(k).find(".toontalk-advanced-setting").hide(),
l.html(">"),l.attr("title","Click to show the advanced settings."))},get_widgets:function(){var b=[];$(this.get_element()).children().each(function(k,l){var h=l.toontalk_widget;h&&0>b.indexOf(h)&&b.push(h)});return b},scale_backside:function(b,k,l,h,e){var f=Math.min(1,k,l);1===k&&1===l?b.css({width:"",height:""}):b.css({transform:"scale("+f+", "+f+")","transform-origin":"top left",width:h*k/f,height:e*l/f})},render:function(){b.DISPLAY_UPDATES.pending_update(this)},rerender:function(){this.visible()&&
b.DISPLAY_UPDATES.pending_update(this)},remove_backside_widget:function(b,k,l){return this.get_widget().remove_backside_widget(b,k,l)},remove:function(){this.get_widget().remove()},is_backside:function(){return!0},is_of_type:function(b){return this.get_widget().is_of_type(b)}}}(window.TOONTALK);window.TOONTALK.frontside=function(b){return{create:function(m){var k=Object.create(this),l=document.createElement("div"),h=$(l),e;$(l).addClass("toontalk-frontside toontalk-side");l.toontalk_widget=m;b.UTILITIES.drag_and_drop(l);k.get_element=function(){return l};k.get_widget=function(){return m};k.visible=function(){return e};k.set_visible=function(b){var h=this.get_widget();e=b;h.walk_children&&h.walk_children(function(e){e.set_visible(b);return!0})};l.addEventListener("click",function(e){$(e.target).is(".ui-resizable-handle")||
1!==e.which||(h.is(".toontalk-top-level-resource")?m.set_running(!m.get_running()):m.get_running()?b.debugging&&console.log("Ignoring click on running widget."):m.open_backside(),e.stopPropagation())});l.addEventListener("mouseenter",function(e){(e=m.get_backside())&&b.UTILITIES.highlight_element(e.get_element())});l.addEventListener("mouseout",function(e){m.get_backside()&&b.UTILITIES.remove_highlight()});b.debugging&&(l.id=m.debug_id);return k},update_display:function(){return this.get_widget().update_display()},
remove:function(){$(this.get_element()).remove()}}}(window.TOONTALK);window.TOONTALK.number=function(b){var m=Object.create(b.widget),k=function(c,b,a,d){var e="",f=100;a=50/a;b/=1+b;if(d)for(d=0;f>=a&&d<c.length;)e=e+"<span class='toontalk-digit' style='font-size:"+f+"%'>"+c[d]+"</span>",d+=1,"-"!==c[d]&&(f*=b);else for(d=c.length-1;f>=a&&0<d;)e="<span class='toontalk-digit' style='font-size:"+f+"%'>"+c[d]+"</span>"+e,d-=1,"-"!==c[d]&&(f*=b);return e},l=function(c,b){var a=c/(1+c);return Math.ceil(Math.log(.5/b)/Math.log(a))},h=function(c,b,a){if(c.length<=Math.round(b))return'<span class="toontalk-digit" style="font-size:100%">'+
c+"</span>";if(1>b)return"";if(5>b)return"<span style='font-size: 80%'>"+h(c,1.25*b,.8*a)+"</span>";b=b/2-1;return k(c,b,a,!0)+k(c,b,a,!1)},e=function(b,e,a){var d="",g=new BigInteger(10),h=b.isNegative();for(h&&(b=b.abs());a>d.length;)if(b=b.multiply(g),0>b.compare(e))d+="0";else if(d+=b.divide(e).toString(),b=b.remainder(e).multiply(g),b.isZero())return h&&(d="-"+d),d=f(d);h&&(d="-"+d);return d},f=function(b){return 0<b.length&&"0"===b.charAt(b.length-1)?f(b.substring(0,b.length-1)):b},r=function(b,
e){var a=Math.min(e,b/2);return b-(a+1)},g=function(b,e){e||(e=1);if(!("number"!==typeof b&&"string"!==typeof b||"number"!==typeof e&&"string"!==typeof e))return bigrat.fromValues(b,e);var a=bigrat.create();1===e?bigrat.set(a,bigrat.toBigInteger(b.get_value()),BigInteger.ONE):b.get_value&&e.get_value?bigrat.set(a,bigrat.toBigInteger(b.get_value()),bigrat.toBigInteger(e.get_value())):bigrat.set(a,b,e);return a},q=function(c){switch(c){case "+":return"";case "-":return"&minus;";case "*":return"&times;";
case "/":return"&divide;";case "^":return"^";default:return b.UTILITIES.report_internal_error("Number has an unsupported operator: "+c),""}},s=bigrat.fromInteger(10);m.create=function(c,e,a,d,f){var h=Object.create(m),k=g(c,e);d||(d="improper_fraction");a||(a="+");h.set_value=function(a){if(!bigrat.equals(k,a))return this.fire_value_change_listeners(k,a),k=a,this.rerender(),b.debugging&&(this.debug_string=this.toString()),this};h.fire_value_change_listeners=function(a,d){var b=this.get_listeners("value_changed"),
c;b&&(c={type:"value_changed",old_value:a,new_value:d},b.forEach(function(a){a(c)}))};h.get_value=function(){return k};h.set_value_from_decimal=function(a){"number"===typeof a?this.set_value(bigrat.fromInteger(a)):this.set_value(bigrat.fromDecimal(a))};h.get_format=function(){return d};h.set_format=function(a,b){d=a;b&&this.rerender();return this};h.get_operator=function(){return a};h.set_operator=function(d,b){a=d;b&&this.rerender();return this};h=m.add_standard_widget_functionality(h);h.set_description(f);
b.debugging&&(h.debug_string=h.toString(),h.debug_id=b.UTILITIES.generate_unique_id());return h};m.create_backside=function(){return b.number_backside.create(this)};m.set_from_values=function(b,e){return this.set_value(g(b,e))};m.ONE=function(){return this.create(1)};m.ZERO=function(){return this.create(0)};m.copy=function(b){return this.add_to_copy(m.create(this.get_value()[0],this.get_value()[1],this.get_operator(),this.get_format(),this.get_description()),b)};m.is_number=function(){return!0};m.equals=
function(b){return b.equals_number&&b.equals_number(this)};m.equals_number=function(b){return bigrat.equals(this.get_value(),b.get_value())};m.compare_with=function(b){if(b.compare_with_number)return-1*b.compare_with_number(this)};m.compare_with_number=function(b){return bigrat.equals(this.get_value(),b.get_value())?0:bigrat.isGreaterThan(this.get_value(),b.get_value())?1:-1};m.update_display=function(){var c,e,a,d,f;c=this.get_frontside(!0).get_element();$(c).is(".toontalk-conditions-contents")?
e=$(c):$(c).parent().is(".toontalk-backside, .toontalk-json")?(e=$(c),f=!0):e=$(c).parent().is(".toontalk-scale-half")?$(c):$(c).parent();if($(c).is(".toontalk-carried-by-bird"))a=100,d=40;else if($(c).is(".toontalk-element-attribute"))a=200,d=32;else{if(!e.is(":visible"))return;a=e.width();d=e.height();if(0===a||0===d)return;e.is(".toontalk-nest")&&(a*=.8,d*=.8)}$(c).removeClass("toontalk-number-eighth-size-border toontalk-number-quarter-size-border toontalk-number-half-size-border toontalk-number-full-size-border");
32>=a||32>=d?($(c).addClass("toontalk-number-eighth-size-border"),c.toontalk_border_size=4):64>=a||64>=d?($(c).addClass("toontalk-number-quarter-size-border"),c.toontalk_border_size=8):128>=a||128>=d?($(c).addClass("toontalk-number-half-size-border"),c.toontalk_border_size=16):($(c).addClass("toontalk-number-full-size-border"),c.toontalk_border_size=32);e=d-2*c.toontalk_border_size;f=this.to_HTML(a/(.64*e),e,this.get_format(),!0,this.get_operator(),f);b.UTILITIES.on_a_nest_in_a_box(c)&&(a="width:"+
a+"px;",e=f.indexOf('style="'),f=0<=e?f.substring(0,e+7)+a+f.substring(e+7):f);a=$(c).children(".toontalk-widget");a.is("*")?a=a.get(0):(a=document.createElement("div"),c.appendChild(a));a.innerHTML=f;$(a).addClass("toontalk-widget");c.title=this.get_title();(c=this.get_backside())&&c.rerender()};m.to_HTML=function(b,f,a,d,g,m){var x,A,z,w,B,G,D=!1!==d?" toontalk-top-level-number":"";m&&(D+=" toontalk-number-size-unconstrained-by-container");A=g?q(g):"";b||(b=4);f||(f=16);if(this.get_erased&&this.get_erased())return'<div class="toontalk-number toontalk-integer'+
D+'" style="font-size: '+f+'px;"></div>';0<A.length&&(b-=1,2>b&&(f*=Math.max(1,b)/2,b=2));if(this.is_integer()&&"scientific_notation"!==a)return x=bigrat.toBigInteger(this.get_value()).toString(),z=x.length,0<A.length&&z++,4>b&&z>b&&(z=Math.min(4,z),f*=b/z,b=z),'<div class="toontalk-number toontalk-integer'+D+'" style="font-size: '+f+'px;">'+A+h(x,b,f)+"</div>";x=' style="font-size:'+.4*f+'px;"';if("improper_fraction"===a||!a)return f='<table class="toontalk-number toontalk-improper-fraction'+D+'"'+
x+'><tr class="toontalk-numerator"><td align="center" class="toontalk-number">'+h(this.numerator_string(),2*b,f)+'</td></tr><tr class="toontalk-fraction-line-as-row"><td  class="toontalk-fraction-line-as-table-entry"><div class="toontalk-fraction-line"></div></tr><tr class="toontalk-denominator"><td align="center" class="toontalk-number">'+h(this.denominator_string(),2*b,f)+"</td></tr></table>",""===A?f:"<table class='toontalk-operator-and-fraction'"+x+"><tr><td>"+A+"</td><td>"+f+"</td></tr></table>";
if("mixed_number"===a||"proper_fraction"===a){A=this.integer_part();if(A.is_zero())return this.to_HTML(b,f,"improper_fraction",d,g);z=this.copy().subtract(A).absolute_value();return'<table class="toontalk-number toontalk-mixed-number'+D+'"'+x+'><tr><td class="toontalk-number toontalk-integer-part-of-mixed-number">'+A.to_HTML(b/2,f,"",!1,this.get_operator())+'</td><td class="toontalk-number toontalk-fraction-part-of-mixed-number">'+z.to_HTML(b/2,f,"improper_fraction",!1)+"</td></tr></table>"}if("decimal"===
a)return 4>b&&(f*=Math.max(1,b)/4,b=4),'<div class="toontalk-number toontalk-decimal'+D+'" style="font-size: '+f+'px;">'+A+this.decimal_string(b,f)+"</div>";if("scientific_notation"===a){z=bigrat.isNegative(this.get_value());w=this.get_value();B=bigrat.abs(bigrat.create(),w);w=bigrat.isLessThan(B,bigrat.ONE);B=(w?bigrat.toBigInteger(bigrat.divide(bigrat.create(),bigrat.ONE,B)):bigrat.toBigInteger(B)).toString();w=w?-B.length:B.length-1;B=bigrat.power(bigrat.create(),s,w);G=bigrat.divide(bigrat.create(),
this.get_value(),B);B=6+(0===w?1:Math.ceil(Math.log10(Math.abs(w)))/2);z&&B++;if(b<B+1)return this.to_HTML(B+1,f*b/(B+1),a,d,g,m);d=l(r(b,B),f);d=e(G[0],G[1],d);z?(z=d.substring(0,2),d=d.substring(2)):(z=d.substring(0,1),d=d.substring(1));b=k(d,b*(1-B/b),f,!0);0<b.length&&(b="<span class='toontalk-decimal-point'>.</span>"+b);return'<table class="toontalk-number toontalk-scientific_notation'+D+'"'+x+'><tr><td class="toontalk-number toontalk-significand-of-scientific-notation"><div class="toontalk-number toontalk-decimal'+
D+'" style="font-size: '+f+'px;">'+A+z+b+'</td><td class="toontalk-number toontalk-exponent-of-scientific-notation"><div style="font-size: '+f+'px;"> &times;10<sup style="font-size: '+f/2+'px;">'+w+"</sup></div></td></tr></table>"}};m.drop_on=function(b,e,a,d){if(b.number_dropped_on_me)return b.number_dropped_on_me(this,e,a,d),!0;if(b.widget_dropped_on_me)return b.widget_dropped_on_me(this,e,a,d);console.log("No handler for drop of '"+this+"' on '"+b+"'")};m.number_dropped_on_me=function(c,e,a,d){var f,
g,h,k;return c.visible()&&(a||d&&d.visible())?(d&&(c.robot_waiting_before_next_step=d),f=document.createElement("div"),$(f).addClass("toontalk-bammer-down"),g=$(this.get_frontside_element()).closest(".toontalk-top-level-backside"),f.style.left="-10px",f.style.top=g.height()+"px",g.append(f),e=this.get_frontside_element(),h=$(e).offset(),h.left-=.75*$(f).width(),h.left+=.5*$(e).width()+.1*$(f).width(),h.top-=.5*$(e).height()+.4*$(f).height(),e=function(){this.number_dropped_on_me_semantics(c,a,d)&&
d&&d.run_next_step();$(f).removeClass("toontalk-bammer-down");b.UTILITIES.set_timeout(function(){var a=g.offset();a||(a={left:0,top:0});$(f).addClass("toontalk-bammer-away");h.left=a.left+g.width()-100;h.top=a.top+g.height()+100;k=function(){$(f).remove()};b.UTILITIES.animate_to_absolute_position(f,h,k);$(f).css({opacity:.01})})}.bind(this),b.UTILITIES.animate_to_absolute_position(f,h,e),$(f).css({opacity:1,"z-index":b.UTILITIES.next_z_index()+100}),this):this.number_dropped_on_me_semantics(c,a,d)};
m.number_dropped_on_me_semantics=function(c,e,a){b.robot.in_training&&b.robot.in_training.dropped_on(c,this);c.remove();switch(c.get_operator()){case "+":return this.add(c);case "-":return this.subtract(c);case "*":return this.multiply(c);case "/":return this.divide(c);case "^":return this.power(c);default:b.UTILITIES.report_internal_error("Number received a number with unsupported operator: "+c.get_operator())}};m.widget_dropped_on_me=function(b,e,a,d){return b.number_dropped_on_me?this.number_dropped_on_me(b,
e,a,d):!1};m.add=function(b){this.set_value(bigrat.add(bigrat.create(),this.get_value(),b.get_value()));return this};m.subtract=function(b){this.set_value(bigrat.subtract(bigrat.create(),this.get_value(),b.get_value()));return this};m.multiply=function(b){this.set_value(bigrat.multiply(bigrat.create(),this.get_value(),b.get_value()));return this};m.divide=function(b){this.set_value(bigrat.divide(bigrat.create(),this.get_value(),b.get_value()));return this};m.power=function(b){this.set_value(bigrat.power(bigrat.create(),
this.get_value(),bigrat.toInteger(b.get_value())));return this};m.absolute_value=function(){this.set_value(bigrat.abs(bigrat.create(),this.get_value()));return this};m.is_zero=function(){return bigrat.equals(this.get_value(),bigrat.ZERO)};m.is_negative=function(){return bigrat.isNegative(this.get_value())};m.toString=function(){return("+"===this.get_operator()?"":this.get_operator())+bigrat.str(this.get_value())};m.to_float=function(){return bigrat.toDecimal(this.get_value())};m.get_type_name=function(){return"number"};
m.get_help_URL=function(){return"docs/manual/numbers.html"};m.get_json=function(){return{type:"number",operator:this.get_operator(),numerator:this.numerator_string(),denominator:this.denominator_string(),format:this.get_format()}};b.creators_from_json.number=function(b){return m.create(b.numerator,b.denominator,b.operator,b.format,b.description)};m.is_integer=function(){return 0===this.get_value()[1].compare(BigInteger.ONE)||0===this.get_value()[0].compare(BigInteger.ZERO)};m.numerator=function(){var b=
bigrat.create();return bigrat.set(b,this.get_value()[0],BigInteger.ONE)};m.denominator=function(){var b=bigrat.create();return bigrat.set(b,this.get_value()[1],BigInteger.ONE)};m.numerator_string=function(){return this.get_value()[0].toString()};m.denominator_string=function(){return this.get_value()[1].toString()};m.integer_part=function(){return this.create(this)};m.decimal_string=function(b,f){if(this.is_integer())return this.numerator_string();var a=m.copy.call(this),d=a.integer_part(),g=d.toString();
"0"===g&&this.is_negative()&&(g="-"+g);var q=a.subtract(d),d=r(b,g.length),x=l(d,f),a=Math.min(g.length,b/2),q=q.absolute_value(),x=e(q.get_value()[0],q.get_value()[1],x),d=x.length<b?x:k(x,d,f,!0);return h(g,a,f)+"<span class='toontalk-decimal-point'>.</span>"+d};m.match=function(b){return this.get_erased&&this.get_erased()?b.match_with_any_number?b.match_with_any_number():"not matched":b.match_with_this_number?b.match_with_this_number(this):"not matched"};m.match_with_any_number=function(){return"matched"};
m.match_with_this_number=function(b){return b.equals(this)?"matched":"not matched"};return m}(window.TOONTALK);
window.TOONTALK.number_backside=function(b){return{create:function(m){var k=b.backside.create(m),l=k.get_element(),h=document.createElement("div"),e=m.numerator_string(),f=m.denominator_string(),r=b.UTILITIES.create_text_area(e,"toontalk-numerator-input","","Type here to edit the numerator"),g=b.UTILITIES.create_text_area(f,"toontalk-denominator-input","","Type here to edit the denominator"),q=b.UTILITIES.create_radio_button("number_format","decimal","toontalk-decimal-radio-button","Decimal number",
"Display number as a decimal."),s=b.UTILITIES.create_radio_button("number_format","proper_fraction","toontalk-proper-fraction-radio-button","Mixed number","Display number as an integer part and a proper fraction."),c=b.UTILITIES.create_radio_button("number_format","improper_fraction","toontalk-improper-fraction-radio-button","Improper fraction","Display number as a simple fraction."),p=b.UTILITIES.create_radio_button("number_format","scientific_notation","toontalk-scientific-notation-radio-button",
"Scientific notation","Display number as a decimal between 1 and 10 multiplied by ten to some power."),a=b.UTILITIES.create_radio_button("operator","+","toontalk-plus-radio-button","+","Add me to what I'm dropped on."),d=b.UTILITIES.create_radio_button("operator","-","toontalk-minus-radio-button","&minus;","Subtract me from what I'm dropped on."),u=b.UTILITIES.create_radio_button("operator","*","toontalk-times-radio-button","&times;","Multiply me with what I'm dropped on."),C=b.UTILITIES.create_radio_button("operator",
"/","toontalk-dividie-radio-button","&divide;","Divide me into what I'm dropped on."),x=b.UTILITIES.create_radio_button("operator","^","toontalk-power-radio-button","Integer power","Use me as the number of times to multiply together what I'm dropped on."),A=function(a){var d=r.button.value.trim(),c=g.button.value.trim();if(d!==e||c!==f)m.set_from_values(d,c),e=d,f=c,b.robot.in_training&&(a=a.srcElement.className.split(" ",1)[0],b.robot.in_training.edited(m,{setter_name:"set_from_values",argument_1:d,
argument_2:c,toString:"toontalk-denominator-input"===a?"change value of the denominator to "+c+" of the number":"change value of the numerator to "+d+" of the number",button_selector:"."+a}))},z=function(){var a=b.UTILITIES.selected_radio_button(q.button,s.button,c.button,p.button),d=a.value;m.set_format(d,!0);b.robot.in_training&&b.robot.in_training.edited(m,{setter_name:"set_format",argument_1:d,toString:"change the format to "+d+" of the number",button_selector:"."+a.className.split(" ",1)[0]})},
w=function(){var c=b.UTILITIES.selected_radio_button(a.button,d.button,u.button,C.button,x.button),e=c.value;m.set_operator(e,!0);b.robot.in_training&&b.robot.in_training.edited(m,{setter_name:"set_operator",argument_1:e,toString:"change the operator to "+e+" of the number",button_selector:"."+c.className.split(" ",1)[0]})},B=b.UTILITIES.create_horizontal_table(r.container,h,g.container),G=$(b.UTILITIES.create_horizontal_table(q.container,s.container,c.container,p.container)).buttonset().get(0),D=
$(b.UTILITIES.create_horizontal_table(a.container,d.container,u.container,C.container,x.container)).buttonset().get(0),t=b.backside.create_advanced_settings_button(k,m),H=k.update_display;h.innerHTML="/";$(h).addClass("ui-widget");l.appendChild(B);l.appendChild(t);r.button.addEventListener("change",A);r.button.addEventListener("mouseout",A);r.button.addEventListener("mouseenter",function(){e=r.button.value.trim();f=g.button.value.trim()});g.button.addEventListener("change",A);g.button.addEventListener("mouseout",
A);q.button.addEventListener("change",z);s.button.addEventListener("change",z);c.button.addEventListener("change",z);p.button.addEventListener("change",z);switch(m.get_format()){case "decimal":b.UTILITIES.check_radio_button(q);break;case "improper_fraction":b.UTILITIES.check_radio_button(c);break;case "mixed_number":case "proper_fraction":b.UTILITIES.check_radio_button(s);break;case "scientific_format":b.UTILITIES.check_radio_button(p)}switch(m.get_operator()){case "+":b.UTILITIES.check_radio_button(a);
break;case "-":b.UTILITIES.check_radio_button(d);break;case "*":b.UTILITIES.check_radio_button(u);break;case "/":b.UTILITIES.check_radio_button(C);break;case "^":b.UTILITIES.check_radio_button(x)}a.button.addEventListener("change",w);d.button.addEventListener("change",w);u.button.addEventListener("change",w);C.button.addEventListener("change",w);x.button.addEventListener("change",w);k.update_display=function(){$(r.button).val(m.numerator_string());$(g.button).val(m.denominator_string());H()};$(G).addClass("toontalk-advanced-setting");
$(D).addClass("toontalk-advanced-setting");l.appendChild(G);l.appendChild(D);k.add_advanced_settings();return k}}}(window.TOONTALK);window.TOONTALK.box=function(b){var m=Object.create(b.widget);m.create=function(k,l,h,e){var f=Object.create(m),r=[],g;"undefined"===typeof l&&(l=!0);f.get_horizontal=function(){return l};f.set_horizontal=function(b,e){l=b;e&&($(this.get_frontside_element()).children(".toontalk-side").remove(),this.rerender());return this};f.get_hole=function(b){return r[b]};f.get_hole_contents=function(b){return r[b].get_contents()};f.set_hole=function(e,f,c){r[e].set_contents(f);c&&(f&&f.save_dimensions(),this.update_hole_display(e,
f));this.rerender();b.debugging&&(this.debug_string=this.toString())};f.get_holes=function(){return r};f.temporarily_remove_contents=function(b,e){var c=this.get_index_of(b);this.temporarily_removed_contents||(this.temporarily_removed_contents=[]);this.temporarily_removed_contents[c]=b;this.set_hole(c,void 0,e);return function(){this.set_hole(c,b,e);this.temporarily_removed_contents[c]=void 0}.bind(this)};f.get_contents_temporarily_removed=function(b){if(this.temporarily_removed_contents)return this.temporarily_removed_contents[b]};
f.set_contents=function(b){b.forEach(function(b,c){r[c].set_contents(b)})};f.get_size=function(){return k};f.set_size=function(e,g){var c;if(k===e)return!1;r.length=e;if(e>k)for(c=k;c<e;c++)r[c]=b.box_hole.create(c),r[c].set_parent_of_frontside(f);k=e;g&&this.rerender();b.debugging&&(this.debug_string=this.toString());return!0};f.copy=function(b){var e=r.map(function(c){if(c=c.get_contents())return c.copy(b)}),e=m.create(k,l,e,this.get_description());return this.add_to_copy(e,b)};f=f.add_standard_widget_functionality(f);
for(g=0;g<k;g++)r[g]=b.box_hole.create(g),r[g].set_parent_of_frontside(f);f.set_description(e);f.set_contents(h);b.debugging&&(f.debug_string=f.toString(),f.debug_id=b.UTILITIES.generate_unique_id());return f};m.create_backside=function(){return b.box_backside.create(this)};m.equals=function(b){return b.equals_box&&b.equals_box(this)};m.equals_box=function(b){var l=this.get_size(),h,e,f;if(l!==b.get_size())return!1;for(h=0;h<l;h++)if(e=this.get_hole_contents(h),f=b.get_hole_contents(h),!e&&f||e&&
!f||e&&f&&(!e.equals||!e.equals(f)))return!1;return!0};m.compare_with=function(b){if(b.compare_with_box)return-1*b.compare_with_box(this)};m.compare_with_box=function(b){var l=this.get_size(),h=b.get_size(),e,f;if(l>h)return 1;if(l<h)return-1;for(h=0;h<l;h++){e=this.get_hole_contents(h);f=b.get_hole_contents(h);if(e&&!f)return 1;if(!e&&f)return-1;if(e&&f)if(e.compare_with){if(e=e.compare_with(f),1===e||-1===e)return e}else return}return 0};m.match=function(b){return this.get_erased&&this.get_erased()?
b.match_with_any_box?b.match_with_any_box():"not matched":b.match_with_this_box?b.match_with_this_box(this):"not matched"};m.match_with_any_box=function(){return"matched"};m.match_with_this_box=function(k){var l=this.get_size(),h=[],e,f,m;if(l!==k.get_size())return"not matched";for(e=0;e<l;e++)if(m=k.get_hole_contents(e)){f=this.get_hole_contents(e);if(!f)return"not matched";f=b.UTILITIES.match(m,f);if("not matched"===f)return"not matched";"matched"!==f&&(h=0===h.length?f:h.concat(f))}return 0<h.length?
h:"matched"};m.toString=function(){var b="",l=this.get_size(),h,e,f=this.get_type_name()+" that looks like ";for(h=0;h<l;h++)e=this.get_hole(h),b+=e.get_full_description(),h<l-1&&(b+=" | ");return f+"["+b.replace(f,"")+"]"};m.get_type_name=function(){return"box"};m.get_help_URL=function(){return"docs/manual/boxes.html"};m.get_json=function(k){var l=[],h=this.get_size(),e;for(e=0;e<h;e++)this.get_hole_contents(e)?l[e]=b.UTILITIES.get_json(this.get_hole_contents(e),k):l[e]=null;return{type:"box",size:h,
contents:l,horizontal:this.get_horizontal()}};m.walk_children=function(b){var l=this.get_size(),h;for(h=0;h<l&&b(this.get_hole(h));h++);};b.creators_from_json.box=function(k,l){return m.create(k.size,k.horizontal,b.UTILITIES.create_array_from_json(k.contents,l),k.description)};m.update_display=function(){var k=this.get_frontside(!0).get_element(),l=this.get_size(),h=function(d,f,g){var h=f.get_frontside_element(!0),k,l;e?(k=q*g,1<g&&(k+=a*(g-1)),l=0):(k=0,l=c*g,1<g&&(l+=a*(g-1)));$(d).css({left:k,
top:l,width:q,height:c});d!==h&&($(h).css({left:0,top:0,width:"",height:""}),d.appendChild(h));b.UTILITIES.has_animating_image(h)||(0<g&&($(d).removeClass("toontalk-box-eighth-size-border-left toontalk-box-quarter-size-border-left toontalk-box-half-size-border-left toontalk-box-full-size-border-left"),$(d).removeClass("toontalk-box-eighth-size-border-top toontalk-box-quarter-size-border-top toontalk-box-half-size-border-top toontalk-box-full-size-border-top"),e?$(d).addClass(p+"-left"):$(d).addClass(p+
"-top")),d.toontalk_border_size=a);f.render()},e=this.get_horizontal();$(k).is(".toontalk-box");var f=function(){var a=$(k).children(".toontalk-box-hole");a.length===l?a.each(function(a,b){h(b,this.get_hole(a),a)}.bind(this)):(a.remove(),this.get_holes().forEach(function(a,b){m=a.get_element();$(m).addClass("toontalk-hole-number-"+b);h(m,a,b);k.appendChild(m)}))}.bind(this),m,g,q,s,c,p,a;$(k).addClass("toontalk-box");$(k).removeClass("toontalk-box-eighth-size-border toontalk-box-quarter-size-border toontalk-box-half-size-border toontalk-box-full-size-border");
k.title=this.get_title();b.debugging&&(this.debug_string=this.toString());this.get_erased()?($(k).addClass("toontalk-box-erased"),$(k).children(".toontalk-side").remove()):($(k).removeClass("toontalk-box-erased"),g=$(k).width(),s=$(k).height(),e?(q=g/l,c=s):(q=g,c=s/l),32>=q||32>=c?(p="toontalk-box-eighth-size-border",a=4):64>=q||64>=c?(p="toontalk-box-quarter-size-border",a=8):128>=q||128>=c?(p="toontalk-box-half-size-border",a=16):(p="toontalk-box-full-size-border",a=32),e?q-=(l-1)*a/l:c-=(l-1)*
a/l,$(k).addClass(p),k.toontalk_border_size=a,b.UTILITIES.set_timeout(f))};m.update_hole_display=function(b,l){var h=this.get_frontside_element(),h=$(h).children(".toontalk-hole-number-"+b),e;h.empty();l&&(e=l.get_frontside_element(!0),h.append(e),$(e).css({left:0,top:0}),l.rerender())};m.drop_on=function(b,l,h){if(b.box_dropped_on_me)return l=b.box_dropped_on_me(this,h),h&&b.rerender(),this.remove(),l;if(b.widget_dropped_on_me)return b.widget_dropped_on_me(this,l,h);console.log("No handler for drop of "+
this.toString()+" on "+b.toString())};m.box_dropped_on_me=function(b,l){console.log("box on box not yet implemented");return!1};m.widget_dropped_on_me=function(k,l,h,e){var f=this.get_horizontal(),m=this.get_frontside_element(),g=this.get_size(),q,s,c;if(0!==g){s=$(m).offset();m=f?$(m).width()/g:$(m).height()/g;c=f?s.left:s.top;if(h)for(q=0;q<g;q++)if(s=this.get_hole(q),c+=m,(f?h.pageX<=c:h.pageY<=c)||q+1===g)return(f=s.get_contents())?k.drop_on(f,l,h,e):s.widget_dropped_on_me(k,l,h,e);b.UTILITIES.report_internal_error(k+
" dropped on "+this+" but no event was provided.")}};m.get_index_of=function(b){return b.get_parent_of_frontside().get_index()};m.removed_from_container=function(k,l,h,e){l=!!h;"undefined"===typeof e&&(e=this.get_index_of(k));0<=e?(this.set_hole(e,void 0,l),l&&(this.rerender(),k.restore_dimensions())):b.UTILITIES.report_internal_error("Attempted to remove "+k+" from "+this+" but not found.")};m.get_path_to=function(k,l){var h=this.get_size(),e,f;if("empty hole"===k.get_type_name())return b.box.path.create(k.get_index());
for(e=0;e<h;e++)if(f=this.get_hole_contents(e)||this.get_contents_temporarily_removed(e)){if(k===f||f.top_contents_is&&f.top_contents_is(k))return b.box.path.create(e);if(f.get_path_to&&(f=f.get_path_to(k,l)))return h=b.box.path.create(e),h.next=f,h}};m.dereference=function(k,l,h){var e,f;if(k){e=k.get_index&&k.get_index();if(!b.debugging||"number"===typeof e){if(f=this.get_hole_contents(e)){if(f.dereference_contents&&!k.not_to_be_dereferenced)return f.dereference_contents(k,l,h);if(k.next){if(f.dereference)return f.dereference(k.next,
l,h);b.UTILITIES.report_internal_error("Expected to refer to a part of "+f+" but it lacks a method to obtain "+b.path.toString(k.next))}k.removing_widget&&("empty hole"===f.get_type_name()?b.UTILITIES.report_internal_error("Robot is trying to remove something from an empty hole. "):f.get_infinite_stack()||h.remove_from_container(f,this));return f}return this.get_hole(e)}b.UTILITIES.report_internal_error(this+" unable to dereference the path: "+b.path.toString(k))}else return this};m.path={create:function(k){return{get_index:function(){return k},
toString:function(){return"scale"===this.true_type?0===k?"the left side of the scale ":"the right side of the scale ":"the "+b.UTILITIES.cardinal(k)+" hole "},get_json:function(b){return{type:"box_path",index:k,true_type:this.true_type,next:this.next&&this.next.get_json(b)}}}}};b.creators_from_json.box_path=function(k,l){var h=m.path.create(k.index);k.next&&(h.next=b.UTILITIES.create_from_json(k.next,l));k.true_type&&(h.true_type=k.true_type);return h};return m}(window.TOONTALK);
window.TOONTALK.box_backside=function(b){return{create:function(m){var k=b.backside.create(m),l=b.UTILITIES.create_text_input(m.get_size().toString(),"toontalk-box-size-input","Number of holes","Type here to edit the number of holes."),h=b.UTILITIES.create_radio_button("box_orientation","horizontal","toontalk-horizontal-radio-button","Left to right","Show box horizontally."),e=b.UTILITIES.create_radio_button("box_orientation","vertical","toontalk-vertical-radio-button","Top to bottom","Show box vertically."),
f=function(){var c=parseInt(l.button.value.trim(),10);m.set_size(c,!0)&&b.robot.in_training&&b.robot.in_training.edited(m,{setter_name:"set_size",argument_1:c,toString:"change the number of holes to "+c+" of the box",button_selector:".toontalk-box-size-input"})},r=function(){var c=b.UTILITIES.selected_radio_button(h.button,e.button),f=c.value,a="horizontal"===f;m.set_horizontal(a,!0);b.robot.in_training&&b.robot.in_training.edited(m,{setter_name:"set_horizontal",argument_1:a,toString:"change the orientation to "+
f+" of the box",button_selector:"."+c.className.split(" ",1)[0]})},g=k.get_element(),q=b.backside.create_advanced_settings_button(k,m),s=k.update_display;l.button.addEventListener("change",f);l.button.addEventListener("mouseout",f);h.button.addEventListener("change",r);e.button.addEventListener("change",r);k.update_display=function(){l.button.value=m.get_size().toString();m.get_horizontal()?b.UTILITIES.check_radio_button(h):b.UTILITIES.check_radio_button(e);s()};g.appendChild(l.container);g.appendChild($(b.UTILITIES.create_horizontal_table(h.container,
e.container)).buttonset().get(0));g.appendChild(q);k.add_advanced_settings();k.render();return k}}}(window.TOONTALK);
window.TOONTALK.box_hole=function(b){return{create:function(m){var k=Object.create(this),l,h,e;k.get_element=function(){e||(e=document.createElement("div"),e.className="toontalk-box-hole toontalk-frontside toontalk-side",e.toontalk_widget=k);return e};k.get_frontside=function(b){return l?l.get_frontside(b):this.get_element()};k.get_side_element=function(){return this.get_element()};k.get_frontside_element=function(b){return l?l.get_frontside_element(b):this.get_element()};k.get_frontside=function(){return this};
k.widget_dropped_on_me=function(e,h,g,k){h=this.get_parent_of_frontside();var l;b.robot.in_training&&b.robot.in_training.dropped_on(e,this);g&&e.save_dimensions&&(e.save_dimensions(),e.set_size_attributes&&(l=$(this.get_element()),e.set_size_attributes(l.width(),l.height())));this.set_contents(e);e.dropped_on_other&&e.dropped_on_other(this,!1,g,k);h.render();return!0};k.get_json=function(){return null};k.add_to_json=function(b){return b};k.copy=function(e){return b.box_hole.create(m)};k.match=function(){return"matched"};
k.get_type_name=function(){return"empty hole"};k.is_of_type=function(b){return"empty hole"===b};k.get_index=function(){return m};k.get_contents=function(){return l};k.set_contents=function(e){var m=this.get_listeners("value_changed");m&&(l!==e&&m.forEach(function(b){b({type:"value_changed",old_value:l,new_value:e})}),l&&m.forEach(function(b){l.remove_listener("value_changed",b,!0)}),e&&m.forEach(function(b){e.add_listener("value_changed",b)}));l&&l.set_parent_of_frontside(void 0);(l=e)?(l.set_parent_of_frontside(this),
b.debugging&&(k.debug_string="A hole containing "+l),l.set_visible(h)):b.debugging&&(k.debug_string="An empty hole")};k.visible=function(){return this.get_parent_of_frontside().visible()};k.set_visible=function(b){h=b;l&&l.set_visible(b)};k.render=function(){if(l)return l.render()};k.rerender=function(){if(l)return l.rerender()};k.removed_from_container=function(e,h,g){l?(g&&l.restore_dimensions(),this.set_contents(void 0),g&&this.get_parent_of_frontside().render()):b.UTILITIES.report_internal_error("Holes can't be removed from containers.")};
k.temporarily_remove_contents=function(b,e){if(l)return this.get_parent_of_frontside().temporarily_remove_contents(b,e)};k.toString=function(){return l?l.toString():"_"};k.get_description=function(){return l?l.get_description():"_"};k.get_full_description=function(){return l?l.get_full_description():"_"};k.is_backside=function(){return!1};k.get_widget=function(){return this};b.debugging&&(k.debug_string="An empty hole");b.widget.has_parent(k);b.widget.has_listeners(k);return k}}}(window.TOONTALK);window.TOONTALK.bird=function(b){var m=Object.create(b.widget);m.create=function(k,l){var h=Object.create(m);h.widget_dropped_on_me=function(e,f,h,g){f=f?e.get_backside():e;if(k){if(k.has_ancestor(e))return b.UTILITIES.display_message("Bird can't take its nest to its nest!"),!1;this.visible()||k.visible()||k.any_nest_copies_visible()?(e.save_dimensions(),h=this.get_frontside_element(),$(h).removeClass("toontalk-bird-gimme"),g&&(e.robot_waiting_before_next_step=g,e.remove_from_parent_of_frontside()),
k.animate_bird_delivery(f,this,g&&g.run_next_step,g)):(k.add_to_contents(f),g&&g.run_next_step())}else console.log("to do: handle drop on a nestless bird -- just removes other?");b.robot.in_training&&b.robot.in_training.dropped_on(e,this);return!0};h.animate_delivery_to=function(e,f,h,g,l,m,c){var p=!!h,a=this.get_parent_of_frontside(),d=this.get_frontside_element(),u=$(d).offset(),C=function(){var c=$(B).offset(),f;p?this.remove():(f=function(){$(d).removeClass("toontalk-bird-morph-to-static");$(d).addClass("toontalk-bird-static");
a&&a.get_widget().rerender()},d.style.position=G,c&&(u.left-=c.left,u.top-=c.top),$(d).css(u),B&&B.appendChild(d),a&&(a.get_widget().is_of_type("top-level")?this.rerender():a.get_widget().rerender()),N&&(R.remove_backside_widget(this,!1,!0),N()),b.UTILITIES.add_animation_class(d,"toontalk-bird-morph-to-static"),b.UTILITIES.add_one_shot_event_handler(d,"animationend",1E3,f),m&&(m(),e.robot_waiting_before_next_step=void 0))}.bind(this),x=function(){z();h.add_to_contents(e,this,!0);b.UTILITIES.set_timeout(function(){this.fly_to(u,
C)}.bind(this))}.bind(this),A=function(a,d){this.element_to_display_when_flying=a;d&&(this.update_display(),d.update_display());a.width_before_carry=a.clientWidth;a.height_before_carry=a.clientHeight;b.UTILITIES.set_timeout(function(){$(this.element_to_display_when_flying).addClass("toontalk-carried-by-bird").css({left:"",top:"",width:"",height:"",position:""});this.update_display()}.bind(this))}.bind(this),z=function(a){if(this.element_to_display_when_flying){var c=this.element_to_display_when_flying.width_before_carry,
e=this.element_to_display_when_flying.height_before_carry;$(this.element_to_display_when_flying).removeClass("toontalk-carried-by-bird");a?($(this.element_to_display_when_flying).css({width:c,height:e}),$(d).closest(".toontalk-top-level-backside").append(this.element_to_display_when_flying),b.UTILITIES.set_absolute_position($(this.element_to_display_when_flying),a)):$(this.element_to_display_when_flying).remove();this.element_to_display_when_flying=void 0;this.update_display()}}.bind(this),w,B,G,
D,t,H,N,F,M,Q,R,K;h||(h=k);Q=e.get_element();A(Q,e);w=f.get_widget().closest_visible_ancestor().get_widget().get_frontside_element();if(f.visible()||this.visible())if(f=$(w).offset(),H=$(h.get_frontside_element()).closest(".toontalk-top-level-backside"),H.is("*")||(H=$(this.get_frontside_element()).closest(".toontalk-top-level-backside")),(K=H.offset())||(K={left:0,top:0}),u=g?{left:g+K.left,top:l+K.top}:$(d).offset(),B=d.parentElement,D=$(d).width(),t=$(d).height(),G=d.style.position,d.style.position=
"absolute",R=this.top_level_widget(),a&&a.get_widget().temporarily_remove_contents&&(N=a.get_widget().temporarily_remove_contents(this,!0))&&R.add_to_top_level_backside(this),H.append(d),$(d).css({left:g||u.left-K.left,top:l||u.top-K.top,width:D,height:t}),(F=h.get_contents_frontside_element())&&h.visible()&&(!c||c.visible())){g=$(w).width();l=$(w).height();M=$(w).offset();K.max_left=K.left+H.width();K.max_top=K.top+H.height();f.left+=g;f.top+=l;var ia={left:Math.min(M.left+g,K.max_left-g),top:Math.min(M.top+
l,K.max_top-l)},S={left:Math.max(M.left-g,K.left),top:Math.max(M.top-l,K.top)};w=function(){var a=function(){h.set_locked(!0);this.fly_to(M,U,300)}.bind(this);z(ia);h.get_locked()?h.run_when_unlocked(a):a()}.bind(this);var U=function(){A(F);this.fly_to(S,I,300)}.bind(this),I=function(){z(S);this.fly_to(ia,Z,300)}.bind(this),Z=function(){A(Q,e);this.fly_to(M,aa,300)}.bind(this),aa=function(){z(M);this.fly_to(S,da,300)}.bind(this),da=function(){A(F);this.fly_to(M,V,300)}.bind(this),V=function(){h.set_locked(!1);
z();h.update_display();x()}.bind(this);this.fly_to(ia,w,300)}else this.fly_to(f,x,300);else h.add_to_contents(e,this,!0)};h.get_json=function(e){return{type:"bird",nest:k&&b.UTILITIES.get_json(k,e)}};h.copy=function(b){var f;f=b?this.create(void 0,this.get_description()):this.create(k,this.get_description());return this.add_to_copy(f,b)};h=h.add_standard_widget_functionality(h);h.set_description(l);b.debugging&&(h.debug_id=b.UTILITIES.generate_unique_id(),h.debug_string=k?"a bird with "+k.debug_string:
"a bird without a nest");return h};m.create_backside=function(){return b.bird_backside.create(this)};m.match=function(b){return b.match_with_any_bird?b.match_with_any_bird(this):"not matched"};m.match_with_any_bird=function(){return"matched"};m.update_display=function(){var k=this.get_frontside(!0),l=this.get_backside(),h;h=k.get_element();h.title=this.get_title();$(h).is(".toontalk-bird, .toontalk-side-animating")||($(h).addClass("toontalk-bird toontalk-bird-static"),h.addEventListener("dragover",
function(e){$(h).is(".toontalk-bird-static")&&($(h).removeClass("toontalk-bird-static"),b.UTILITIES.add_animation_class(h,"toontalk-bird-gimme"))}),h.addEventListener("dragleave",function(b){$(h).is(".toontalk-bird-gimme")&&$(h).addClass("toontalk-bird-static").removeClass("toontalk-bird-gimme")}));this.element_to_display_when_flying?h.appendChild(this.element_to_display_when_flying):$(h).children(".toontalk-side").remove();l&&l.rerender()};m.fly_to=function(k,l,h){var e=this.get_frontside_element(),
f=$(e).offset(),f=Math.atan2(k.top-f.top,k.left-f.left),m="toontalk-fly-west toontalk-fly-northwest toontalk-fly-north toontalk-fly-northeast toontalk-fly-east toontalk-fly-southeast toontalk-fly-south toontalk-fly-southwest".split(" ")[Math.round(4*(f/Math.PI+1))%8];$(e).position();b.UTILITIES.add_animation_class(e,m);this.animate_to_absolute_position(k,function(){$(e).removeClass(m);h?($(e).addClass("toontalk-bird-static"),setTimeout(l,h)):l()})};m.toString=function(){return"a bird"};m.get_type_name=
function(){return"bird"};m.get_help_URL=function(){return"docs/manual/birds-nests.html"};m.matching_resource=function(b){return b.get_type_name&&b.get_type_name()===this.get_type_name()};b.creators_from_json.bird=function(k,l){return b.bird.create(b.UTILITIES.create_from_json(k.nest,l),k.description)};m.drop_on=function(b,l,h,e){if(b.widget_dropped_on_me)return b.widget_dropped_on_me(this,!1,h,e)};return m}(window.TOONTALK);
window.TOONTALK.bird_backside=function(b){return{create:function(m){m=b.backside.create(m);m.add_advanced_settings(!0);return m}}}(window.TOONTALK);
window.TOONTALK.nest=function(b){var m=Object.create(b.widget),k={},l={};m.create=function(h,e,f,l,g){var q=Object.create(m),s;e||(e=[]);f||(f=[]);q.matched_by=function(c){return 0<e.length?b.UTILITIES.match(c,e[0].get_widget()):[this]};q.run_when_non_empty=function(b){f.push(b)};q.add_to_contents=function(c,g,a){var d;1===e.push(c)?0<f.length&&(d=f,f=[],d.forEach(function(a){$(a.robot.get_frontside_element()).removeClass("toontalk-robot-waiting");a.robot.run(a.context,a.top_level_context,a.queue)})):
c.get_widget().hide();c.is_backside()?c.get_widget().set_parent_of_backside(this):c.get_widget().set_parent_of_frontside(this);s&&!a&&(g?s.forEach(function(a){a.has_ancestor(c.get_widget())||a.animate_bird_delivery(b.UTILITIES.copy_side(c),g)}):s.forEach(function(a){a.has_ancestor(c.get_widget())||a.add_to_contents(b.UTILITIES.copy_side(c,!1,!0))}));this.rerender()};q.animate_bird_delivery=function(c,e,a,d){var f,g,h;e.animate_delivery_to(c,this,void 0,void 0,void 0,a,d);s&&(f=$(e.closest_visible_ancestor().get_widget().get_frontside_element()).closest(":visible").position(),
g=e.get_parent_of_frontside().get_element(),h=this.visible(),s.forEach(function(a){var k=b.UTILITIES.copy_side(c,!1,h),l,m;a.has_ancestor(c.get_widget())||(a.visible()||h?(l=e.copy(!0),m=l.get_frontside_element(!0),$(g).append(m),l.animate_delivery_to(k,a,a,f.left,f.top,void 0,d)):a.add_to_contents(k))}))};q.get_contents_frontside_element=function(){if(0<e.length)return e[0].get_widget().get_frontside_element()};q.get_locked=function(){return this.locked_for_animating_deliveries};q.set_locked=function(b){this.locked_for_animating_deliveries=
b;!b&&this.to_run_when_unlocked&&0<this.to_run_when_unlocked.length&&this.to_run_when_unlocked.shift()()};q.run_when_unlocked=function(b){this.to_run_when_unlocked?this.to_run_when_unlocked.push(b):this.to_run_when_unlocked=[b]};q.removed_from_container=function(c,f,a){c=e.shift();this.visible()&&(c?(c.get_widget().restore_dimensions(),c.is_backside()?c.get_widget().set_parent_of_backside(void 0):c.get_widget().set_parent_of_frontside(void 0)):b.UTILITIES.report_internal_error("Nothing removed from nest!"),
0<e.length&&(e[0].set_visible(!0),$(e[0].get_element()).show()),this.render());return c};q.dereference_contents=function(b,f,a){var d,g,h,k;return 0===e.length?this:b.removing_widget?(b=e[0],a.remove_from_container(b,this),this.visible()&&(h=this.get_frontside_element(),a=$(h).offset(),f=$(h).closest(".toontalk-backside-of-top-level"),(d=f.offset())||(d={left:0,top:0}),g=b.get_frontside_element(),k=$(h).width(),h=$(h).height(),$(g).css({left:.1*k+a.left-d.left,top:.1*h+a.top-d.top,width:.8*k,height:.8*
h}),f.append(g)),b):b.next?e[0].get_widget().dereference(b.next,f,a):e[0].get_widget()};q.get_json=function(c){var h=f&&f.map(function(a){return{robot:b.UTILITIES.get_json(a.robot,c),context:a.context&&b.UTILITIES.get_json(a.context,c),top_level_context:a.top_level_context&&b.UTILITIES.get_json(a.top_level_context,c)}});return{type:"nest",contents:b.UTILITIES.get_json_of_array(e,c),guid:l,original_nest:g&&b.UTILITIES.get_json(g,c),waiting_robots:h}};q.copy=function(c,f){var a,d;if(c)return 0<e.length?
e[0].get_widget().copy(c):b.nest.create(this.get_description(),[],[],"in a robot's condition");a=b.UTILITIES.copy_widget_sides(e);f||(d=g||this);a=b.nest.create(this.get_description(),a,[],l,d);return this.add_to_copy(a,c)};q.has_contents=function(){return 0<e.length};q.dropped_on_other=function(c,e,a,d){var f,g,h,k,m,s,B;l||(l=b.UTILITIES.generate_unique_id(),b.debugging&&(q.debug_string="A nest with "+l),f=b.bird.create(this),d&&(d.add_newly_created_widget(f),this.robot_waiting_before_next_step=
d),this.rerender(),g=this.get_frontside_element(!0),b.UTILITIES.add_animation_class(g,"toontalk-hatch-egg"),m=function(){var l,m,q;if(e)l=c.get_backside();else if((q=b.UTILITIES.widget_from_jquery($(g).closest(".toontalk-top-level-backside")))||(q=b.UTILITIES.widget_from_jquery($(c.get_widget().get_frontside_element(!0)).closest(".toontalk-top-level-backside"))),q)l=q.get_backside();else{b.UTILITIES.report_internal_error("Unable to find the top-level backside for bird to go to.");return}m=l.get_element();
q=$(m).offset();h=f.get_frontside_element(!0);$(h).removeClass("toontalk-bird-static");b.UTILITIES.add_animation_class(h,"toontalk-fly-southwest");k=b.UTILITIES.relative_position(g,m);$(h).css({left:k.left,top:k.top});b.robot.in_training?(b.robot.in_training.add_newly_created_widget(f),l.widget_dropped_on_me(f,!1,a,void 0,!0)):l.widget_dropped_on_me(f,!1,a);$(g).removeClass("toontalk-hatch-egg").addClass("toontalk-empty-nest").css({width:"",height:""});"top-level"===this.get_parent_of_frontside().get_widget().get_type_name()&&
$(g).css({left:k.left-5,top:k.top+45});B=function(){$(h).removeClass("toontalk-fly-southwest");b.UTILITIES.set_timeout(function(){b.UTILITIES.add_animation_class(h,"toontalk-fly-down");s=function(){$(h).removeClass("toontalk-fly-down");b.UTILITIES.add_animation_class(h,"toontalk-bird-morph-to-static");b.UTILITIES.add_one_shot_event_handler(h,"animationend",1E3,function(){$(h).removeClass("toontalk-bird-morph-to-static toontalk-side-animating").addClass("toontalk-bird-static")});d&&d.run_next_step();
f.update_display()};b.UTILITIES.add_one_shot_event_handler(g,"animationend",1E3,s)}.bind(this))}.bind(this);$(h).removeClass("toontalk-bird-static");l=Math.max(10,k.left-70);m=Math.max(10,k.top+70);f.animate_to_absolute_position({left:l+q.left,top:m+q.top},B);this.rerender()}.bind(this),b.UTILITIES.add_one_shot_event_handler(g,"animationend",2E3,m));return!0};q.widget_dropped_on_me=function(c,f,a,d){a&&c.save_dimensions&&c.save_dimensions();0===e.length?(this.add_to_contents(f?c.get_backside():c),
c.dropped_on_other?c.dropped_on_other(this,f,a,d):b.robot.in_training&&b.robot.in_training.dropped_on(c,this)):c.drop_on(e[0].get_widget(),f,a,d);return!0};q.drop_on=function(b,e,a,d){return b.widget_dropped_on_me?(b.widget_dropped_on_me(this,!1,a,d),!0):!1};q.element_to_highlight=function(b){return 0===e.length?this.get_frontside_element():e[0].get_frontside_element()};q.update_display=function(){var c=this.get_frontside(!0),f=this.get_backside(),a,d,g,h,k,c=c.get_element();0<e.length?(a=e[0].get_widget(),
e[0].is_backside()?(h=a.get_backside(!0),k=h.get_element(),h.update_display(),h.scale_to_fit(k,c)):(a.render(),k=e[0].get_element()),d=$(c).width(),g=$(c).height(),0<d&&0<g&&b.UTILITIES.set_timeout(function(){for(var b=2*k.toontalk_border_size||0,c=.8*d,e=.8*g;2*b>=c||2*b>=e;)b/=2;c-=b;e-=b;$(k).css({width:c,height:e,left:.1*d,top:.1*g});a.set_size_attributes&&a.set_size_attributes(c,e)},2),c.appendChild(k),$(c).addClass("toontalk-empty-nest"),e[0].is_backside()?a.set_parent_of_backside(this):a.set_parent_of_frontside(this)):
(c.title=this.get_title(),l?($(c).removeClass("toontalk-nest-with-egg"),$(c).addClass("toontalk-empty-nest")):b.UTILITIES.add_animation_class(c,"toontalk-nest-with-egg"));$(c).addClass("toontalk-nest");f&&f.rerender()};q[k]=function(b){s||(s=[]);s.push(b)};q.get_path_to=function(b,f){if(0<e.length&&e[0].get_widget().get_path_to)return e[0].get_widget().get_path_to(b,f)};q.walk_children=function(b){if(0<e.length)return b(e[0])};q.top_contents_is=function(b){return 0<e.length&&e[0].get_widget()===b};
q.any_nest_copies_visible=function(){var b=!1;if(!s)return!1;s.some(function(e){e.visible()&&(b=!0)});return b};q.compare_with=function(b){if(0<e.length)return e[0].compare_with(b);if(b.compare_with_nest)return-1*b.compare_with_nest(this)};q.compare_with_nest=function(b){return 0===e.length?0:1};q.compare_with_number=function(b){return 0<e.length?e[0].compare_with(b):-1};q.compare_with_box=q.compare_with_number;q.compare_with_scale=q.compare_with_number;q=q.add_standard_widget_functionality(q);q.set_description(h);
b.debugging&&(q.debug_id=b.UTILITIES.generate_unique_id(),q.debug_string=l?"A nest with id "+l:"A nest with an egg");if(g&&l)g[k](q);return q};m.create_backside=function(){return b.nest_backside.create(this)};m.match=function(b){return b.match_nest_with_nest?b.match_nest_with_nest(this):"not matched"};m.match_nest_with_nest=function(b){return"matched"};m.toString=function(){return"a nest"};m.get_help_URL=function(){return"docs/manual/birds-nests.html"};m.get_type_name=function(){return"nest"};m.matching_resource=
function(b){return b.get_type_name&&b.get_type_name()===this.get_type_name()};b.creators_from_json.nest=function(h,e){var f=!h.original_nest&&h.guid&&l[h.guid];f||(f=b.nest.create(h.description,b.UTILITIES.create_array_from_json(h.contents,e),void 0,h.guid,h.original_nest&&b.UTILITIES.create_from_json(h.original_nest,e)),l[h.guid]=f);return f};return m}(window.TOONTALK);window.TOONTALK.nest_backside=function(b){return{create:function(m){m=b.backside.create(m);m.add_advanced_settings(!0);return m}}}(window.TOONTALK);window.TOONTALK.scale=function(b){var m=Object.create(b.widget);m.create=function(k,l,h,e){var f=function(){h.rerender()},m=function(b){var e=$(h.get_frontside_element()),e=e.offset().left+e.width()/2;return b.clientX<e?0:1},g,q,s;h||(h=b.box.create(2,void 0,k,l));g=h.get_json;q=h.copy;s=h.get_path_to;h.copy=function(c){var e=q.call(this,c),e=b.scale.create(void 0,void 0,e,c&&this.get_state());return h.add_to_copy(e,c)};h.get_json=function(b){b=g.call(this,b);b.type="scale";b.inactive_state=this.get_inactive_state();
return b};h.get_path_to=function(b,e){var a=s.call(this,b,e);a&&(a.true_type="scale");return a};h.element_to_highlight=function(b){b=m(b);b=this.get_hole(b);var e=b.get_contents();return e?e.get_frontside_element():b.get_frontside_element()};h.drop_on=function(b,e,a,d){if(b.widget_dropped_on_me)return b.widget_dropped_on_me(this,e,a,d)};h.widget_dropped_on_me=function(b,e,a,d){var f=this.get_hole_contents(0),g=this.get_hole_contents(1),h;if(f&&!g)return this.set_hole(1,b),!0;if(!f&&g)return this.set_hole(0,
b),!0;h=m(a);if(0===h){if(f){if(f.drop_on)return b.drop_on(f,e,a,d);return}}else if(g){if(g.drop_on)return b.drop_on(g,e,a,d);return}this.set_hole(h,b,a);return!0};h.get_inactive_state=function(){return e};h.update_display=function(){var c=this.get_frontside_element(),e=$(c),a=$(c).children(".toontalk-scale-half"),d=$(c).parent(),d=d.is(".toontalk-backside")?c:d.get(0),f=$(d).width(),g=$(d).height(),h=function(a,b,d){var c=b.get_frontside_element(!0),e=d*f*.5,h=.5*f,l=g;b=b.get_contents();$(a).css({left:e,
top:0,width:h,height:l});a!==c&&(e=0===d?-.05*f:.15*f,d="toontalk-scale-balanced"===k?.1*g:0===d&&"toontalk-scale-left_heavier"===k||1===d&&"toontalk-scale-right_heavier"===k?.25*g:1===d&&"toontalk-scale-left_heavier"===k||0===d&&"toontalk-scale-right_heavier"===k?-.1*g:.2*g,h=.4*f,l=.4*g,$(c).css({left:e,top:d,width:h,height:l}),b&&(b.set_location_attributes&&b.set_location_attributes(e,d),b.set_size_attributes&&b.set_size_attributes(h,l)),a.appendChild(c))},k,d=b.UTILITIES.scale_to_fit(c,d,123,
91);0===f&&(f=1);0===g&&(g=1);f/=d.x_scale;g/=d.y_scale;e.is(".toontalk-top-level-resource")?k="toontalk-scale-balanced":(d=this.get_state(),k="undefined"===typeof d?"toontalk-scale-unbalanced":["toontalk-scale-right_heavier","toontalk-scale-balanced","toontalk-scale-left_heavier"][d+1]);e.removeClass("toontalk-scale-balanced toontalk-scale-left_heavier toontalk-scale-right_heavier toontalk-scale-unbalanced");e.addClass(k);e.addClass("toontalk-scale");2===a.length?a.each(function(a,d){b.UTILITIES.set_timeout(function(){h(d,
this.get_hole(a),a)}.bind(this))}.bind(this)):this.get_holes().forEach(function(a,b){var d=a.get_element();0===b?$(d).addClass("toontalk-left_scale  toontalk-scale-half"):$(d).addClass("toontalk-right_scale toontalk-scale-half");h(d,a,b);c.appendChild(d)});c.title=this.get_title();b.debugging&&(this.debug_string=this.toString())};h.get_type_name=function(){return"scale"};h.get_help_URL=function(){return"docs/manual/scales.html"};h.toString=function(){var c=this.get_hole(0),e=this.get_hole(1),a;switch(this.get_state()){case -1:a=
"scale leaning to the right";break;case 1:a="scale leaning to the left";break;case 0:a="balanced scale";break;default:a="unbalanced scale"}c=c?"contains "+b.UTILITIES.add_a_or_an(c.get_full_description()):"is empty";e=e?"contains "+b.UTILITIES.add_a_or_an(e.get_full_description()):"is empty";return a+" and the left pan "+c+" and the right pan "+e};h.create_backside=function(){return b.scale_backside.create(this)};h.get_state=function(){var b=this.get_inactive_state(),e;if(b)return b;b=this.get_hole_contents(0);
e=this.get_hole_contents(1);if(b||e)if(b){if(!e)return 1;if(b.compare_with)return b.compare_with(e)}else return-1};h.match=function(b){return b.match_with_scale?b.match_with_scale(this):"not matched"};h.match_with_scale=function(b){return this.get_state()===b.get_state()?"matched":"not matched"};h.compare_with=function(b){if(b.compare_with_scale)return-1*b.compare_with_scale(this)};h.compare_with_scale=function(b){var e=this.get_state();b=b.get_state();return e&&!b?1:!e&&b?-1:e>b?1:e<b?-1:0};h.get_hole(0).add_listener("value_changed",
f);h.get_hole(1).add_listener("value_changed",f);h.get_hole_contents(0)&&h.get_hole_contents(0).add_listener("value_changed",f);h.get_hole_contents(1)&&h.get_hole_contents(1).add_listener("value_changed",f);return h};b.creators_from_json.scale=function(k,l){return m.create(b.UTILITIES.create_array_from_json(k.contents,l),k.description,void 0,k.inactive_state)};return m}(window.TOONTALK);
window.TOONTALK.scale_backside=function(b){return{create:function(m){m=b.backside.create(m);m.add_advanced_settings(!0);return m}}}(window.TOONTALK);window.TOONTALK.robot=function(b){var m=Object.create(b.widget);m.create=function(k,l,h,e,f,r,g){var q=Object.create(m),s,c=!1;h||(h=b.actions.create());s||(s=q);q.get_frontside_conditions=function(){return k};q.set_frontside_conditions=function(b){k=b};q.get_backside_conditions=function(){return l};q.set_backside_conditions=function(c){(l=c)&&b.UTILITIES.available_types.forEach(function(a){l[a]&&b.widget.erasable(l[a])})};q.add_to_backside_conditions=function(c){var a=c.copy(!0);l||(l={});l[c.get_type_name()]=
a;b.widget.erasable(a)};q.get_body=function(){return h};q.get_animating=function(){return c};q.set_animating=function(e,a){var d=this.get_frontside_element();(c=e)?(a||(a=$(d).offset()),$(d).addClass("toontalk-robot-animating toontalk-side-animating"),$(d).css({width:"",height:"","z-index":b.UTILITIES.next_z_index()}),b.UTILITIES.set_position_relative_to_top_level_backside($(d),a),$(d).closest(".toontalk-top-level-backside").append(d)):$(d).removeClass("toontalk-robot-animating toontalk-side-animating")};
q.get_thing_in_hand=function(){return f};q.set_thing_in_hand=function(c){b.debugging&&c&&"empty hole"===c.get_type_name()?b.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):f=c};q.get_next_robot=function(){return g};q.set_next_robot=function(b){var a=this.get_backside_element();b&&b.set_first_in_team(this.get_first_in_team());!b&&g&&g.set_first_in_team(g);g=b;a&&(b=b?"When the robot can't run then this one will try: ":window.TOONTALK.robot.empty_drop_area_instructions,$(a).find(".toontalk-drop-area-instructions").get(0).innerHTML=
b)};q.get_first_in_team=function(){return s};q.set_first_in_team=function(b){s=b;g&&g.set_first_in_team(b)};q.walk_children=function(b){g?b(g):this.get_frontside_conditions()&&b(this.get_frontside_conditions())};q.get_run_once=function(){return r};q.set_run_once=function(b){r=b};g&&q.set_next_robot(g);q=q.add_standard_widget_functionality(q);q.set_description(e);b.debugging&&(this.debug_id=b.UTILITIES.generate_unique_id());return q};m.create_backside=function(){return b.robot_backside.create(this)};
m.copy=function(k){var l=this.get_frontside_conditions(),h=this.get_backside_conditions(),l=l?l.copy(!0):void 0,e=this.get_next_robot(),e=e?e.copy(k):void 0,f;h&&(f={},b.UTILITIES.available_types.forEach(function(b){f[b]&&(f[b]=f[b].copy(!0))}));h=this.create(l,f,this.get_body().copy(),this.get_description(),this.get_thing_in_hand(),this.get_run_once(),e);return this.add_to_copy(h,k)};m.match=function(){console.log("Robot-to-robot matching could be more sophisticated.");return"matched"};m.run=function(k,
l,h){var e=this.get_frontside_conditions(),f,m,g;if(this.being_trained||!e||this.get_animating())return"not matched";this.match_status=b.UTILITIES.match(e,k);(m=e.get_frontside_element())&&("matched"===this.match_status?$(m).removeClass("toontalk-conditions-not-matched"):$(m).addClass("toontalk-conditions-not-matched"));"matched"===this.match_status?(f=this.get_backside_conditions())&&(e=k.get_backside_widgets())&&e.some(function(e){var g=!e.is_backside()&&f[e.get_widget().get_type_name()];if(g&&
(e=b.UTILITIES.match(g,e.get_widget()),(m=g.get_frontside_element())&&("matched"===e?$(m).removeClass("toontalk-conditions-not-matched"):$(m).addClass("toontalk-conditions-not-matched")),"matched"!==e))return this.match_status=e,!0}.bind(this)):this.match_status||(this.match_status="not matched");switch(this.match_status){case "matched":return h||(h=b.QUEUE),this.get_body().reset_newly_created_widgets(),h.enqueue({robot:this,context:k,top_level_context:l,queue:h}),this.match_status;case "not matched":return this.get_next_robot()?
this.get_next_robot().run(k,l,h):this.match_status;default:if(this.get_next_robot()){e=this.get_next_robot().run(k,l,h);if("matched"===e)return e;"not matched"!=e&&e.forEach(function(b){0>this.match_status.indexOf(b)&&this.match_status.push(b)})}this.get_first_in_team()===this&&(g={robot:this,context:k,top_level_context:l,queue:h},this.match_status.forEach(function(b){b.run_when_non_empty(g)}),b.UTILITIES.add_animation_class(this.get_frontside_element(),"toontalk-robot-waiting"));return this.match_status}};
m.set_stopped=function(b){(this.stopped=b)&&this.visible()&&$(this.get_frontside_element()).removeClass("toontalk-robot-waiting");this.get_next_robot()&&this.get_next_robot().set_stopped(b)};m.run_actions=function(b,l,h){return this.stopped?!1:this.visible()?this.get_body().run_watched(b,l,h,this):this.get_body().run_unwatched(b,l,h,this)};m.picked_up=function(k,l,h){var e;this!==k&&(k.get_infinite_stack&&k.get_infinite_stack()?this.current_action_name="pick up a copy of":this.current_action_name=
"pick up",h?(e=k,l=k.copy(),l=b.path.get_path_to_resource(l)):l=b.path.get_path_to(k,this),l&&this.add_step(b.robot_action.create(l,this.current_action_name),e),k.last_action=this.current_action_name,this.current_action_name=void 0,this.set_thing_in_hand(k))};m.dropped_on=function(k,l){var h;this!==k&&(this.current_action_name="drop it on",(h=b.path.get_path_to(l,this))&&this.add_step(b.robot_action.create(h,this.current_action_name)),k.last_action=this.current_action_name+" "+l.get_type_name(),this.current_action_name=
void 0,this.set_thing_in_hand(void 0))};m.copied=function(k,l,h){this.current_action_name=h?"pick up a copy of":"copy";(k=b.path.get_path_to(k,this))&&this.add_step(b.robot_action.create(k,this.current_action_name),l);l.last_action=this.current_action_name;this.current_action_name=void 0};m.removed=function(k){var l;this.current_action_name="remove";(l=b.path.get_path_to(k,this))&&this.add_step(b.robot_action.create(l,this.current_action_name));k.last_action=this.current_action_name;this.current_action_name=
void 0};m.edited=function(k,l){var h;this.current_action_name="edit";(h=b.path.get_path_to(k,this))&&this.add_step(b.robot_action.create(h,this.current_action_name,l));this.current_action_name=void 0};m.erased_widget=function(k,l){var h;this.current_action_name="erased_widget";(h=b.path.get_path_to(k,this))&&this.add_step(b.robot_action.create(h,this.current_action_name,{erased:l,toString:l?"erase":"un-erase"}));this.current_action_name=void 0};m.remove_from_container=function(k,l){var h=l.get_index_of&&
l.get_index_of(k),e=function(){k.get_parent_of_frontside()&&l.removed_from_container(k,!1,!0,h)};this.get_animating()?b.UTILITIES.add_one_shot_event_handler(this.get_frontside_element(),"transitionend",2500,e):e();this.add_newly_created_widget(k)};m.add_step=function(b,l){this.get_body().add_step(b,l);this.get_frontside_element().title=this.get_title()};m.get_context=function(){var k=this.get_frontside_element(),l=$(k).parent(),k=b.UTILITIES.widget_from_jquery(l);return!k&&(l=b.UTILITIES.widget_from_jquery(l.closest(".toontalk-backside-of-robot")))?
l.get_context():k};m.training_started=function(){var k=this.get_context();k?(this.being_trained=!0,this.set_frontside_conditions(k.copy(!0)),$("*").css({cursor:"url("+b.UTILITIES.absolute_file_path("images/RB19.32x32.PNG")+"), default"}),this.get_frontside_element().title=this.get_title(),k=this.get_backside_element(),$(k).find(".toontalk-conditions-panel").remove()):b.UTILITIES.report_internal_error("Robot started training but can't find its 'context'.")};m.training_finished=function(){var k=this.get_body().get_newly_created_widgets(),
l,h;$("*").css({cursor:""});for(l=0;l<k.length;l++)h=k[l],"drop it on top-level"!==h.last_action&&"copy"!==h.last_action||this.add_step(b.robot_action.create(b.newly_created_widgets_path.create(l),"add to the top-level backside"));this.rerender();this.being_trained=!1;this.get_frontside_element().title=this.get_title();this.backup_all()};m.update_display=function(){var k=this.get_frontside(!0),l=this.get_backside(),h=this.get_thing_in_hand(),e,f;b.debugging&&(this.debug_string=this.toString());e=
k.get_element();h&&(f=h.get_frontside_element());!f&&this.carrying_tool&&(f=document.createElement("div"),$(f).addClass(this.carrying_tool));e.title=this.get_title();$(e).addClass("toontalk-robot");$(e).children(".toontalk-side, .toontalk-held-by-robot").remove();f&&e.appendChild(f);"not matched"===this.match_status?$(e).addClass("toontalk-side-animating toontalk-robot-not-matched"):$(e).removeClass("toontalk-robot-not-matched");b.UTILITIES.set_timeout(function(){var b,g,k,l,c;f&&(c={position:"absolute"},
$(f).addClass("toontalk-held-by-robot"),b=$(f).width(),g=$(f).height(),k=$(e).width(),l=$(e).height(),0===b&&(b=2*k,g=l/2,c.width=b,c.height=g),c.left=(k-b)/2,c.top=(l-g)/2,$(f).css(c),h&&h.render())});l&&l.rerender()};m.add_newly_created_widget=function(b){return this.get_body().add_newly_created_widget(b)};m.add_newly_created_widget_if_new=function(b){if(b!==this.get_context())return this.get_body().add_newly_created_widget_if_new(b)};m.get_recently_created_widget=function(){var b=this.get_body().get_newly_created_widgets();
return b[b.length-1]};m.get_title=function(){var b=this.get_description();if(b)return b="This robot "+b,0>b.lastIndexOf(".")&&(b+="."),b+"\n"+this.toString();b=this.get_frontside_element();return $(b).is(".toontalk-top-level-resource")?"Drag this robot to a work area.":this.toString()};m.toString=function(){var k=this.get_frontside_conditions(),l=this.get_body(),h="",e="",f=this.get_next_robot();if(!k)return"has yet to be trained.";k=k.get_full_description();this.being_trained&&(h="is being trained.\n",
e="\n...");k=b.UTILITIES.add_a_or_an(k);l=h+"When working on something that matches "+k+" he will \n"+l.toString()+e;"not matched"===this.match_status&&(l="He isn't running because his conditions don't match. Click to edit his conditions.\n"+l);f&&(l+="\nIf it doesn't match then the next robot will try to run.\n"+f.toString());return l};m.get_type_name=function(){return"robot"};m.get_help_URL=function(){return"docs/manual/robots.html"};m.get_json=function(k){var l=this.get_frontside_conditions(),
h=this.get_backside_conditions(),e,f,m;l&&(e=l.is_of_type("top-level")?{type:"top_level"}:b.UTILITIES.get_json(l,k));h&&b.UTILITIES.available_types.forEach(function(e){h[e]&&(f||(f={}),f[e]=b.UTILITIES.get_json(h[e],k))});this.get_next_robot()&&(m=b.UTILITIES.get_json(this.get_next_robot(),k));return{type:"robot",frontside_conditions:e,backside_conditions:f,body:this.get_body().get_json(k),run_once:this.get_run_once(),next_robot:m}};b.creators_from_json.robot=function(k,l){var h,e,f;k.thing_in_hand&&
(e=b.UTILITIES.create_from_json(k.thing_in_hand,l));k.next_robot&&(h=b.UTILITIES.create_from_json(k.next_robot,l));k.backside_conditions&&(f={},b.UTILITIES.available_types.forEach(function(e){f[e]=b.UTILITIES.create_from_json(k.backside_conditions[e],l)}));return b.robot.create(b.UTILITIES.create_from_json(k.frontside_conditions||k.bubble,l),f,b.UTILITIES.create_from_json(k.body,l),k.description,e,k.run_once,h)};return m}(window.TOONTALK);
window.TOONTALK.robot_backside=function(b){var m=function(k,h,e,f){k=b.UTILITIES.create_text_element(k);var m=h.get_frontside_element(!0),g=document.createElement("div");$(m).addClass("toontalk-conditions-contents "+f);b.UTILITIES.set_timeout(function(){$(m).parent().addClass("toontalk-conditions-contents-container");$(m).css({left:"inherit",width:"inherit",height:"inherit"});h.render()});"not matched"===e.match_status?$(m).addClass("toontalk-conditions-not-matched"):$(m).removeClass("toontalk-conditions-not-matched");
g.appendChild(m);e=b.UTILITIES.create_horizontal_table(k,g);$(e).addClass("toontalk-conditions-panel");return e},k=function(k,h){var e=h.get_frontside_conditions(),f=h.get_backside_conditions(),r,g;e&&0===$(k).find(".toontalk-frontside-conditions-area").length&&(k.insertBefore(m("Runs only if the widget matches: ",e,h,"toontalk-frontside-conditions-area"),k.firstChild),e.set_visible(!0),e.render());f&&Object.keys(f).forEach(function(e){if(r=f[e])g="toontalk-backside-"+e+"-conditions-area",0===$(k).find("."+
g).length&&(e="bird"===e?b.UTILITIES.create_text_element("And there is a bird on the back."):m("Runs only if the "+e+" on the backside matches: ",r,h,g),k.insertBefore(e,k.firstChild.nextSibling),r.set_visible(!0),r.render())})};return{create:function(l){var h=b.backside.create(l),e=h.get_element(),f=b.UTILITIES.create_check_box(!l.get_run_once(),"toontalk-run-once-check-box","When finished start again","Check this if you want the robot to start over again after finishing what he was trained to do."),
m=b.UTILITIES.create_drop_area(window.TOONTALK.robot.empty_drop_area_instructions),g=l.get_next_robot(),q=b.backside.create_advanced_settings_button(h,l),s=h.update_display;m.data("drop_area_owner",l);$(f.button).click(function(c){var e=f.button.checked;l.set_run_once(!e);b.robot.in_training&&b.robot.in_training.edited(l,{setter_name:"set_run_once",argument_1:!e,toString:"change to "+(e?"run again":"run once")+" of the robot",button_selector:".toontalk-run-once-check-box"});c.stopPropagation()});
g&&m.append(g.get_frontside_element(!0));m.get(0).addEventListener("drop",function(c){c=b.UTILITIES.get_dragee();(c=b.UTILITIES.widget_from_jquery(c))&&c.is_of_type("robot")&&(c=c.open_backside(),$(c.get_element()).find(".toontalk-train-backside-button").click())});h.update_display=function(){var b=l.get_frontside_element();b&&(b.title=l.get_title());s()};e.appendChild(this.create_train_button(h,l));e.appendChild(q);$(f.container).addClass("toontalk-advanced-setting");m.addClass("toontalk-advanced-setting");
e.appendChild(f.container);e.appendChild(m.get(0));k(e,l);h.add_advanced_settings();return h},create_train_button:function(l,h){var e=l.get_element();$(e);var f=$("<button>Train</button>").button();f.addClass("toontalk-train-backside-button");var m=!1,g=function(){m?(f.button("option","label","Stop training"),f.attr("title","Click to stop training this robot.")):h.get_body().is_empty()?(f.button("option","label","Train"),f.attr("title","Click to start training this robot.")):(f.button("option","label",
"Re-train"),f.attr("title","Click to start training this robot all over again."));$(e).is(":visible")&&k(e,h)};g();f.click(function(e){m=!m;g();m?(h.get_body().reset_steps(),b.robot.in_training=h,h.training_started()):(h.training_finished(),b.robot.in_training=null);e.stopPropagation()});return f.get(0)}}}(window.TOONTALK);window.TOONTALK.robot.empty_drop_area_instructions="Drop a robot here who will try to run when this robot can't run.";(function(){var b=function(b){return"rotate"===b||"skewX"===b||"skewY"===b||"transform-origin-x"===b||"transform-origin-y"===b};window.TOONTALK.element=function(m){var k=["left","top","width","height"],l=Object.create(m.widget),h=function(b,f){var h,g;"number"===typeof b&&(g=b);0===b.length&&(g=0);if("undefined"===typeof g&&(h=b.substring(b.length-1),0<="0123456789x".indexOf(h)&&(g=parseFloat(b),isNaN(g))))return;h=g;0<=["rotate","skewX","skewY"].indexOf(f)&&(h%=360,0>h&&(h+=360));return h};l.create=
function(e,f,h,g){var k=Object.create(l),s=k.drag_started,c={},p={},a,d,u,C;f||(f=[]);k.get_HTML=function(){return e};k.get_text=function(){return this.get_frontside_element().innerText};k.set_HTML=function(a){var b=this.get_frontside_element();if(!b||e===a)return!1;e=a;$(b).children(":not(.ui-resizable-handle)").remove();this.rerender();return!0};k.set_text=function(a){var b=this.get_frontside_element(),d=function(b){$(b).contents().each(function(){this.nodeType==Node.TEXT_NODE?(this.textContent=
a,a=""):d(this,a)})};if(!b||a===b.textContent)return!1;d(b);return this.set_HTML(b.innerHTML)};k.get_style_attributes=function(){return f};k.set_style_attributes=function(a){f=a};k.get_attribute_widgets=function(){return c};k.get_original_copies=function(){return p};k.get_pending_css=function(){return a};k.get_transform_css=function(){return d};k.add_to_css=function(c,e){b(c)?(d||(d={}),d[c]=e):(a||(a={}),a[c]=e)};k.apply_css=function(){var b,c,e;if((a||d)&&(b=this.get_frontside_element())&&$(b).is(":visible")){if(d){d.rotate&&
(e="rotate("+d.rotate+"deg)");d.skewX&&(e||(e=""),e+="skewX("+d.skewX+"deg)");d.skewY&&(e||(e=""),e+="skewY("+d.skewY+"deg)");if(d["transform-origin-x"]||d["transform-origin-y"])a||(a={}),a["transform-origin"]=(d["transform-origin-x"]||0)+" "+(d["transform-origin-y"]||0);e&&(a||(a={}),a["-webkit-transform"]=e,a["-moz-transform"]=e,a["-ms-transform"]=e,a["o-transform"]=e,a.transform=e)}m.UTILITIES.set_timeout(function(){a&&(a.width&&"undefined"===typeof a.height?a.height=b.clientHeight:a.height&&"undefined"===
typeof a.width&&(a.width=b.clientWidth),$(b).css(a),C&&(a.width||a.height)&&(c={},c.width=a.width,c.height=a.height,C.css(c)),a=void 0)})}};k.on_update_display=function(a){u?u.push(a):u=[a]};k.fire_on_update_display_handlers=function(){u&&m.UTILITIES.set_timeout(function(){u.forEach(function(a,b){a()||u.splice(b,1)})})};k.get_image_element=function(){return C};k.set_image_element=function(a,b){C=$(a).find("img");0===C.length?C=void 0:($(b).width(C.width()),$(b).height(C.height()))};k.get_additional_classes=
function(){return g};k.set_additional_classes=function(a){g=a};k=k.add_standard_widget_functionality(k);k.drag_started=function(a,b){this.drag_x_offset=a.view.drag_x_offset;this.drag_y_offset=a.view.drag_y_offset;s.call(this,a,b)};k.set_description(h);m.debugging&&(k.debug_string=k.toString(),k.debug_id=m.UTILITIES.generate_unique_id());return k};l.copy=function(b){var f=l.create(this.get_HTML(),this.get_style_attributes().slice(),this.get_description());return this.add_to_copy(f,b)};l.match=function(b){return this.get_erased&&
this.get_erased()?b.match_with_any_element?b.match_with_any_element():"not matched":b.match_with_this_element_widget?b.match_with_this_element_widget(this):"not matched"};l.match_with_any_element=function(){return"matched"};l.match_with_this_element_widget=function(b){return this.get_HTML()===b.get_HTML()?"matched":"not matched"};l.compare_with=function(b){if(b.compare_with_other_element)return b.compare_with_other_element(this)};l.compare_with_other_element=function(b){b=b.get_HTML().localeCompare(this.get_HTML());
return 0>b?-1:0<b?1:b};l.create_backside=function(){return m.element_backside.create(this)};l.get_attribute=function(b){var f=this.get_pending_css(),h;if(f&&f[b]||(f=this.get_transform_css())&&f[b])return f[b];f=this.get_frontside_element();h=f.style[b];""===h&&(h=$(f).css(b));return h?"number"===typeof h?h:h.replace("px",""):0};l.set_attribute=function(b,f,k,g){var l,s;if(!this.get_frontside(!0).get_element())return!1;l=this.get_attribute(b);if(l===f)return!1;if(s=h(f,b)){if(l==s)return;f=s}k&&m.robot.in_training&&
m.robot.in_training.edited(this,{setter_name:"set_attribute",argument_1:b,argument_2:f,toString:"change the '"+b+"' style to "+f+" of",button_selector:".toontalk-element-"+b+"-attribute-input"});this.add_to_css(b,f);g&&(f=this.get_style_attributes(),0>f.indexOf(b)&&f.push(b));this.rerender();return!0};l.dropped_on_style_attribute=function(b,f,h,g){var k,l,c;if(b){k=b.toString();if(b.is_of_type("number")){l=this.get_attribute(f);if("number"===typeof l)c=l;else if("auto"===l)switch(f){case "left":c=
$(this.get_frontside_element()).offset().left;break;case "top":c=$(this.get_frontside_element()).offset().top;break;default:c=0}else c=parseFloat(l);l=b.to_float();switch(k.substring(0,1)){case "-":k=c-l;break;case "*":k=c*l;break;case "/":k=c/l;break;case "^":k=Math.pow(c,l);break;default:k=c+l}this.set_attribute(f,k,!1);(h||g&&g.visible())&&this.get_backside().render()}b.get_infinite_stack()||b.remove();m.robot.in_training&&m.robot.in_training.dropped_on(b,this.create_attribute_widget(f))}};l.get_attribute_widget=
function(b){var f=this.get_attribute_widgets()[b];f||(f=this.create_attribute_widget(b),this.get_attribute_widgets()[b]=f);return f};l.create_attribute_widget=function(b){var f=".toontalk-element-"+b+"-attribute-input",h=this.get_backside_element(),g=this.get_attribute(b),l=this,s,c,p,a,d;h&&(f=$(h).find(f),0<f.length&&(f.get(0).toontalk_widget=this));s=m.number.create(0,1);s.element_widget=this;s.set_value_from_decimal(g);s.set_format("decimal");s.attribute=b;s.get_type_name=function(){return"element attribute"};
d=s.toString;s.toString=function(){return d.call(this)+" (the "+this.attribute+" attribute of "+l+")"};c=s.equals;s.equals=function(a){return b===a.attribute?this.equals(a.element_widget):c.call(this,a)};(g=this.get_original_copies()[b])?g.push(s):this.get_original_copies()[b]=[s];a=s.set_value;s.set_value=function(d){var c;l.get_original_copies()[b].forEach(function(b){c=a.call(b,d)});l.set_attribute(this.attribute,bigrat.toDecimal(d));return c};p=s.update_display;s.update_display=function(){var a;
this.get_erased()||(a=l.get_attribute(this.attribute),s.set_value_from_decimal(a));p.call(this)};0<=k.indexOf(b)&&(this.on_update_display(function(){s.update_display();return!0}),"left"!==b&&"top"!==b||this.get_frontside_element().addEventListener("drag",function(a){var d=$(l.get_frontside_element()).closest(".toontalk-top-level-backside").offset();d||(console.log("Unable to find top-level backside of an element for its position. Perhaps is 'visible' but not attached."),d={left:0,top:0});s.set_value_from_decimal("left"===
b?a.pageX-d.left-l.drag_x_offset:a.pageY-d.top-l.drag_y_offset);p.call(s)}));s.copy=function(a){return a?m.number.copy.call(this,a):this.add_to_copy(l.create_attribute_widget(b),a)};s.get_json=function(a){return{type:"attribute_number",attribute_name:b,element:m.UTILITIES.get_json(l,a)}};m.debugging&&(s.debug_id=m.UTILITIES.generate_unique_id());return s};m.creators_from_json.attribute_number=function(b,f){return m.UTILITIES.create_from_json(b.element,f).create_attribute_widget(b.attribute_name)};
l.update_display=function(){var b=this.get_frontside_element();this.get_backside();var f,h;this.being_dragged||(this.get_erased&&this.get_erased()?$(b).css({opacity:0}):(this.get_erased&&"0"===$(b).css("opacity")&&$(b).css({opacity:1}),b.children.length===$(b).children(".ui-resizable-handle").length&&(f=document.createElement("div"),f.innerHTML=this.get_HTML(),b.appendChild(f),this.set_image_element(f,b),$(b).addClass("toontalk-element-frontside"),"<"!==f.innerHTML.substring(0,1)&&((h=this.get_additional_classes())&&
$(f).addClass(h),$(b).addClass("ui-widget toontalk-plain-text-element"))),m.UTILITIES.on_a_nest_in_a_box(b)&&(this.set_attribute("width",$(b).closest(".toontalk-box-hole").width(),!1),this.set_attribute("height",$(b).closest(".toontalk-box-hole").height(),!1)),this.apply_css(),this.fire_on_update_display_handlers()))};l.toString=function(){return"element whose HTML is '"+m.UTILITIES.maximum_string_length(this.get_HTML(),40)+"'"};l.get_type_name=function(){return"element"};l.get_help_URL=function(){return"docs/manual/elements.html"};
l.get_json=function(){var b=[];this.get_style_attributes().forEach(function(f){b.push(f)});return{type:"element",html:encodeURIComponent(m.UTILITIES.remove_z_index(this.get_HTML())),attributes:b,attribute_values:b.map(this.get_attribute.bind(this)),additional_classes:this.get_additional_classes()}};m.creators_from_json.element=function(b,f){var k=l.create(decodeURIComponent(b.html),b.attributes,b.description),g;g=f&&f.event?["left","top"]:[];b.attribute_values.forEach(function(f,l){var c=b.attributes[l];
0>g.indexOf(c)&&k.add_to_css(c,h(f)||f)});b.additional_classes&&k.set_additional_classes(b.additional_classes);return k};l.create_attribute_path=function(b,f){var h=m.path.get_path_to(b.element_widget,f);return this.extend_attribute_path(h,b.attribute)};l.extend_attribute_path=function(b,f){return{dereference:function(h,g,k){return b.dereference(g||h,void 0,k).get_attribute_widget(f)},toString:function(){return"the '"+f+"' property of "+b},get_json:function(){return{type:"path_to_style_attribute",
attribute:f,element_widget_path:b.get_json()}}}};m.creators_from_json.path_to_style_attribute=function(b){var f=m.UTILITIES.create_from_json(b.element_widget_path);return l.extend_attribute_path(f,b.attribute)};l.get_size_attributes=function(){return{width:this.get_attribute("width"),height:this.get_attribute("height")}};l.set_size_attributes=function(b,f){this.set_attribute("width",b);this.set_attribute("height",f)};l.set_location_attributes=function(b,f){this.set_attribute("left",b);this.set_attribute("top",
f)};return l}(window.TOONTALK);window.TOONTALK.element_backside=function(m){var k=function(e,f,h){var g=function(b){var e=f.get_style_attributes();0>e.indexOf(b)&&(e.push(b),"left"===b?(b=f.get_frontside_element(),$(b).on("drag",function(a){var b=f.get_backside_element(),c=f.get_frontside_element();b&&c&&$(b).find(".toontalk-element-left-attribute-input").val(a.originalEvent.clientX)})):"top"===b&&(b=f.get_frontside_element(),$(b).on("drag",function(a){var b=f.get_backside_element(),c=f.get_frontside_element();
b&&c&&$(b).find(".toontalk-element-top-attribute-input").val(a.originalEvent.clientY)})))},q=function(c,p){var a=0<=f.get_style_attributes().indexOf(c),d=m.UTILITIES.create_check_box(a,"toontalk-style-attribute-check-box",c+"&nbsp;","Click to add or remove the '"+c+"' style attribute from the backside of this element."),a=m.UTILITIES.create_anchor_element("i",("transform-origin-x"===c||"transform-origin-y"===c?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin#":b(c)?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform#":
"http://www.w3.org/community/webed/wiki/CSS/Properties/")+c),q=document.createElement("li");$(a).addClass("toontalk-help-button toontalk-attribute-help-button");$(a).css({color:"white"});d.container.appendChild(a);d.button.addEventListener("click",function(a){if(d.button.checked)g(c);else{a=f.get_style_attributes();var b=a.indexOf(c);0<=b&&(a.splice(b,1),k(e,f,h))}l(h,f)});q.appendChild(d.container);p.appendChild(q)},s=function(b,e){var a,d;"string"===typeof b?q(b,e):b.label?(a=document.createElement("h3"),
a.textContent=b.label,d=document.createElement("ul"),e.appendChild(a),e.appendChild(d),s(b.sub_menus,d)):b.forEach(function(a){s(a,e)})};$(e).is(".ui-accordion")&&$(e).accordion("destroy");$(e).empty();s([{label:"Geometry attributes",sub_menus:"left top width height z-index background-position".split(" ")},{label:"Color attributes",sub_menus:["background-color","color","opacity"]},{label:"Font attributes",sub_menus:["font-size","font-weight"]},{label:"Visibility",sub_menus:["display","visibility"]},
{label:"Transformations",sub_menus:["rotate","skewX","skewY","transform-origin-x","transform-origin-y"]}],e);$(e).accordion({active:0,heightStyle:"content"});return e},l=function(b,f){var h=f.get_style_attributes();f.get_frontside_element();$(b).empty();h.forEach(function(g){f.get_attribute(g);var h=document.createElement("tr"),k=document.createElement("td"),c=f.get_attribute_widget(g),l=c.get_frontside_element();c.set_infinite_stack(!0);b.appendChild(h);h.appendChild(k);k.appendChild(m.UTILITIES.create_text_element(g));
k=document.createElement("td");h.appendChild(k);c.set_visible(!0);$(l).addClass("toontalk-element-attribute");k.appendChild(l);c.render()})},h=function(b){var f=$("<button>Add or remove style attributes</button>").button();f.addClass("toontalk-show-attributes-chooser-button");f.click(function(h){$(b).is(":visible")?($(b).hide(),f.button("option","label","Add or remove style attributes"),f.attr("title","Click to add widgets for reading and writing style attributes of this element.")):($(b).show(),
f.button("option","label","Hide style attributes list"),f.attr("title","Click to hide the list of attributes that can be added or removed."))});f.attr("title","Click to add widgets for reading and writing style attributes of this element.");return f.get(0)};return{create:function(b){var f=m.backside.create(b),r=f.get_element();b.get_HTML();var g=document.createElement("table"),q=document.createElement("div"),s=h(q),c=m.backside.create_advanced_settings_button(f,b),p=m.UTILITIES.get_current_url_boolean_parameter("elementHTML",
!1),a=p?"get_HTML":"get_text",d=f.update_display,u,C;b.update_display();u=b[a]().trim();0<u.length&&(C=m.UTILITIES.create_text_area(u,"toontalk-html-input","","Type here to edit the text."),u=function(a){a=C.button.value.trim();b.get_frontside_element();var d=p?"set_HTML":"set_text";b[d](a)&&m.robot.in_training&&m.robot.in_training.edited(b,{setter_name:d,argument_1:a,toString:"change the text to "+a+" of",button_selector:".toontalk-html-input"})},$(C.container).resizable(),$(C.container).css({width:"100%"}),
$(C.button).css({width:"100%"}),C.button.addEventListener("change",u),C.button.addEventListener("mouseout",u),r.appendChild(C.container));f.get_attributes_chooser=function(){return q};k(q,b,g);l(g,b);r.appendChild(q);r.appendChild(s);r.appendChild(g);r.appendChild(c);$(q).hide();$(q).addClass("toontalk-attributes-chooser");f.update_display=function(){C&&$(C.button).val(b[a]());l(g,b);$(q).is(":visible")&&k(q,b,g);d()};$(r).find(".toontalk-hide-backside-button").click(function(a){$(q).hide()});f.add_advanced_settings();
return f}}}(window.TOONTALK)})();window.TOONTALK.sensor=function(b){var m=Object.create(b.widget),k=function(b,h){"element"===b.get_type_name()&&(b.set_attribute("font-size",.5*$(h.get_frontside_element(!0)).height(),!1,!0),b.set_additional_classes("toontalk-string-value-from-sensor"),h.visible()&&b.rerender())};m.create=function(l,h,e,f,r,g){var q=b.nest.create(e,f,void 0,"sensor"),s=q.get_json,c=q.update_display,p=q.copy,a=function(a){var c=a[h],e=q.visible(),f=$(q.get_frontside_element()).closest(".toontalk-top-level-backside"),
g;if("keyCode"===h){if(16===c)return;c=String.fromCharCode(c);a.shiftKey||(c=c.toLowerCase())}switch(typeof c){case "number":g=b.number.create(Math.round(c),1);break;case "string":g=b.element.create(c,void 0,void 0,"toontalk-string-value-from-sensor");k(g,q);break;case "boolean":g=b.element.create(c.toString(),void 0,void 0,"toontalk-string-value-from-sensor");k(g,q);break;case "undefined":b.UTILITIES.report_internal_error("No "+h+" in sensor "+m);return}e?(a=b.bird.create(),q.add_to_top_level_backside(a),
a.animate_delivery_to(g,q,q,f.width()/2,f.height())):q.add_to_contents(g)}.bind(this);q.copy=function(a){var c;if(a&&this.has_contents())return p.call(this,!0);c=b.sensor.create(l,h,e,void 0,r,a?void 0:g);return q.add_to_copy(c,a)};q.get_json=function(a){var c=s.call(this,a);c.type="sensor";c.event_name=l;c.attribute=h;c.active=r;c.sensor_of=g&&b.UTILITIES.get_json(g,a);return c};q.update_display=function(){var a=$(this.get_frontside_element());c.call(this);r||a.is(".toontalk-top-level-resource")?
(a.addClass("toontalk-sensor-nest"),a.removeClass("toontalk-sensor-inactive-nest")):(a.addClass("toontalk-sensor-inactive-nest"),a.removeClass("toontalk-sensor-nest"));a.removeClass("toontalk-empty-nest")};q.get_type_name=function(){return"sensor"};q.get_help_URL=function(){return"docs/manual/sensors.html"};q.toString=function(){return"a sensor of "+h+" for "+l+" sensors"};q.get_active=function(){return r};q.set_active=function(b,c){if(r!==b||c)b?g?g.get_frontside_element().addEventListener(l,a):
window.addEventListener(l,a):g?g.get_frontside_element().removeEventListener(l,a):window.removeEventListener(l,a),r=b};q.set_active(r,!0);q.create_backside=function(){return b.sensor_backside.create(this)};q.get_event_name=function(){return l};q.set_event_name=function(a){var b=r;l&&r&&this.set_active(!1);l=a;b&&this.set_active(!0)};q.get_attribute=function(){return h};q.set_attribute=function(a){h=a};q.match=function(a){return"not matched"};q.set_sensor_of=function(a){g=a};return q};b.creators_from_json.sensor=
function(l,h){var e=b.UTILITIES.create_array_from_json(l.contents,h),f=b.sensor.create(l.event_name,l.attribute,l.description,e,!1);l.sensor_of?b.UTILITIES.set_timeout(function(){f.set_sensor_of(b.UTILITIES.create_from_json(l.sensor_of,h));f.set_active(l.active)}):f.set_active(l.active);0<e.length&&setTimeout(function(){e.forEach(function(b){k(b.get_widget(),f)})},500);return f};return m}(window.TOONTALK);
window.TOONTALK.sensor_backside=function(b){return{create:function(m){var k=b.UTILITIES.create_text_input(m.get_event_name(),"toontalk-sensor-event-name-input","Event name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;","Type here the event name.","https://developer.mozilla.org/en-US/docs/Web/Events/"+m.get_event_name()),l=b.UTILITIES.create_text_input(m.get_attribute(),"toontalk-sensor-event-attribute-input","Event attribute","Type here the event attribute name.","https://developer.mozilla.org/en/docs/Web/API/Event"),
h=b.UTILITIES.create_check_box(m.get_active(),"toontalk-sensor-active-check-box","Listening to events","Check the box if you want to make this sensor active."),e=b.nest_backside.create(m),f=e.get_element(),r=$(f).find(".toontalk-settings-backside-button").get(0);k.button.addEventListener("change",function(){m.set_event_name(k.button.value.trim())});l.button.addEventListener("change",function(){m.set_attribute(l.button.value.trim())});$(h.button).click(function(e){var f=h.button.checked;m.set_active(f);
b.robot.in_training&&b.robot.in_training.edited(robot,{setter_name:"set_active",argument_1:f,toString:"change to "+(f?"active":"inactive")+" of the "+m,button_selector:".toontalk-sensor-active-check-box"});m.render();e.stopPropagation()});f.insertBefore(k.container,r);f.insertBefore(l.container,r);f.insertBefore(h.container,r);return e}}}(window.TOONTALK);window.TOONTALK.tool=function(b){return{add_listeners:function(m,k){var l,h,e,f,r,g=function(c){var f=s(c),a;c.preventDefault();var d=0,g=0;20>c.clientX?d=-20:c.clientX+20>window.innerWidth&&(d=20);20>c.clientY?g=-20:c.clientY+20>window.innerHeight&&(g=20);window.scrollBy(d,g);m.style.left=c.pageX-d-h+"px";m.style.top=c.pageY-g-e+"px";if(f&&f.is_of_type("top-level"))r&&(b.UTILITIES.remove_highlight(),r=void 0);else{if(f&&(a=f.get_frontside_element(),a===r))return;r=a;b.UTILITIES.highlight_element(r)}},
q=function(c){var e=s(c);c.preventDefault();r&&b.UTILITIES.remove_highlight();e&&e.add_copy_to_container&&(k.apply_tool(e,c),e.backup_all());!e&&k.nothing_under_tool&&k.nothing_under_tool();$(m).removeClass("toontalk-tool-held");$(m).addClass("toontalk-tool-returning");b.UTILITIES.add_one_shot_event_handler(m,"transitionend",1E3,function(){$(m).removeClass("toontalk-tool-returning")});b.UTILITIES.set_timeout(function(){m.style.left=l.left+"px";m.style.top=l.top+"px"});document.removeEventListener("mousemove",
g);document.removeEventListener("mouseup",q)},s=function(b){var g;$(m).hide();b=document.elementFromPoint(b.pageX-(window.pageXOffset+h),b.pageY-(window.pageYOffset+e)+f/2);for($(m).show();b&&!b.toontalk_widget&&(!$(b).is(".toontalk-backside")||$(b).is(".toontalk-top-level-backside"));)b=b.parentNode;b&&(g=b.toontalk_widget);if(g)return b=g.get_type_name(),g&&"empty hole"===b?g.get_parent_of_frontside():g};m.addEventListener("mousedown",function(b){var k=m.getBoundingClientRect();h=b.clientX-k.left;
e=b.clientY-k.top;f=k.height;b.preventDefault();$(m).addClass("toontalk-tool-held");l=$(m).offset();document.addEventListener("mousemove",g);document.addEventListener("mouseup",q)})}}}(window.TOONTALK);window.TOONTALK.vacuum=function(b){var m=Object.create(null),k={suck:"Drag this vacuum over the thing you want to remove. Click or type 'e' to switch to erasing. Type 'r' to restore previously removed or erased things.",erase:"Drag this vacuum over the thing you want to erase (or un-erase). Type 's' to switch to sucking. Click or type 'r' to restore contents.",restore:"Drag this over the work area. Each time you release it a widget is restored. Click or type 's' to switch to sucking. Type 'e' to switch to erasing."},
l={suck:"toontalk-vacuum-s",erase:"toontalk-vacuum-e",restore:"toontalk-vacuum-r"},h={suck:"erase",erase:"restore",restore:"suck"};m.create=function(){var e,f,m,g=[],q=function(b){f!==b&&(f=b,$(e).removeClass(m),m=l[f],$(e).addClass(m),s())},s=function(){e.title="restore"===f&&0===g.length?"The vacuum is empty. Type 'r' to switch to removing. Type 'e' to switch to erasing.":k[f]};return{apply_tool:function(c,h){var a,d;"suck"===f?c.remove&&"top-level"!==c.get_type_name()&&(b.robot.in_training&&b.robot.in_training.removed(c),
c.remove(h),g.push(c)):"erase"===f?"top-level"!==c.get_type_name()&&(c.get_frontside_element(),a=!c.get_erased(),c.set_erased(a,!0),b.robot.in_training&&b.robot.in_training.set_erased(c,a)):"restore"===f&&0<g.length&&(a=g.pop(),d=c.add_to_top_level_backside(a,!0),a=$(e).offset(),a.left-=$(d).width(),b.UTILITIES.set_absolute_position($(d),a))},nothing_under_tool:function(){q(h[f])},get_element:function(){e||(e=document.createElement("div"),$(e).addClass("toontalk-vacuum"),b.tool.add_listeners(e,this),
q("suck"),document.addEventListener("keyup",function(b){b=String.fromCharCode(b.keyCode);"s"===b||"S"===b?q("suck"):"e"===b||"E"===b?q("erase"):"r"!==b&&"R"!==b||q("restore")}),s());return e}}};b.creators_from_json.vacuum=function(e,f){var h=b.vacuum.create();e.mode&&b.UTILITIES.set_timeout(function(){h.set_mode(e.mode)});return h};return m}(window.TOONTALK);window.TOONTALK.wand=function(b){var m=Object.create(null);m.create=function(){var k;return{apply_tool:function(b){"top-level"!==b.get_type_name()&&b.add_copy_to_container()},get_element:function(){k||(k=document.createElement("div"),$(k).addClass("toontalk-wand"),k.title="Drag this magic wand over the thing you want to copy.",b.tool.add_listeners(k,this));return k}}};b.creators_from_json.wand=function(){return b.wand.create()};return m}(window.TOONTALK);window.TOONTALK.DISPLAY_UPDATES=function(b){var m=[],k=0;return{pending_update:function(b){b.update_display&&(0<=m.indexOf(b)||m.push(b))},update_display:function(){var k=m,h=function(b,f){$(b).children().each(function(b,e){$(e).css({"z-index":f+1});h(e,f+1)})};m=[];0!==k.length&&k.forEach(function(e){var f=e.get_frontside_element&&e.get_frontside_element(),k,g,l;e.update_display();k=$(f).parent().closest(".toontalk-side");k.is("*")&&(g=b.UTILITIES.get_style_numeric_property(f,"z-index"),l=b.UTILITIES.get_style_numeric_property(k.get(0),
"z-index"),l||(l=b.UTILITIES.next_z_index(),k.css({"z-index":l})),!g||k.is(".toontalk-top-level-backside")?(g=b.UTILITIES.next_z_index(),$(f).css({"z-index":g})):g>=l&&(g=l+1,$(f).css({"z-index":g})),h(f,g));f&&!$(f).is(".toontalk-top-level-resource, .toontalk-bird, .toontalk-nest, .toontalk-box-hole, .toontalk-plain-text-element, .toontalk-conditions-contents, .toontalk-robot, .toontalk-widget, .toontalk-held-by-robot")&&b.UTILITIES.set_timeout(function(){k.is(".toontalk-box-hole")?$(f).is(".ui-resizable")&&
$(f).resizable("destroy"):$(f).is(".ui-resizable")||b.UTILITIES.make_resizable($(f),e)})})},run_cycle_is_over:function(){var b=Date.now();20<=b-k&&(this.update_display(),k=b)}}}(window.TOONTALK);window.TOONTALK.actions=function(b){b.creators_from_json.body=function(m){var k=b.actions.create();k.initialise_steps(b.UTILITIES.create_array_from_json(m.steps,{body:k}));return k};return{create:function(m){var k=Object.create(this),l=[];m||(m=[]);k.copy=function(){return b.actions.create(b.UTILITIES.copy_array(m))};k.get_steps=function(){return m};k.initialise_steps=function(b){m=b};k.is_empty=function(){return 0===m.length};k.reset_steps=function(){m=[];this.reset_newly_created_widgets()};k.reset_newly_created_widgets=
function(){l=[]};k.add_step=function(b,e){m.push(b);e&&this.add_newly_created_widget(e)};k.add_newly_created_widget_if_new=function(b){0<=l.indexOf(b)||this.add_newly_created_widget(b)};k.add_newly_created_widget=function(h){b.debugging&&0<=l.indexOf(h)?console.log("add_newly_created_widget called with not new widget."):l.push(h)};k.get_newly_created_widgets=function(){return l};k.get_path_to=function(h,e){var f,k;l.some(function(g,l){if(g===h)return f=b.newly_created_widgets_path.create(l),!0;if(g.get_path_to&&
(k=g.get_path_to(h,e)))return f=b.newly_created_widgets_path.create(l),f.next=k,!0});return f};k.dereference=function(h){b.debugging&&!l[h]&&b.UTILITIES.report_internal_error("Expected to find the "+(h+1)+"th newly created widget.");return l[h]};return k},run_unwatched:function(b,k,l,h,e){var f=this.get_steps();e||(e=0);h.run_next_step=function(){if(e<f.length){var r=f[e];e++;r.run_unwatched(b,k,h)}else h.get_run_once()||h.get_first_in_team().run(b,k,l)};h.run_next_step()},run_watched:function(m,
k,l,h){var e=this.get_steps(),f=h.get_frontside_element(),r=f.parentElement,g=function(){$(f).addClass("toontalk-side-animating");b.UTILITIES.set_position_relative_to_top_level_backside($(f),s);setTimeout(function(){r.appendChild(f);b.UTILITIES.set_absolute_position($(f),s);h.set_animating(!1);h.get_run_once()||h.get_first_in_team().run(m,k,l);h.render()},1E3)},q=0,s=$(f).offset(),c=$(f).position(),p=$(f).width(),a=$(f).height(),d=$(f).closest(".toontalk-backside"),u=d.get(0).getBoundingClientRect(),
C=$(f).closest(".toontalk-top-level-backside").offset(),x=m.get_backside();0===p&&($(f).css({width:"",height:""}),p=$(f).width(),a=$(f).height());C||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),C={left:0,top:0});if(s.left<u.left-C.left||s.top<u.top-C.top||s.left+p>u.right+C.left||s.top+a>u.bottom+C.top)s=d.offset(),s.left+=d.width()/2,s.top+=d.height()-a;h.start_position=c;h.run_next_step=function(){x&&x.visible()?setTimeout(function(){if(q<e.length){var a=
e[q];q++;a.run_watched(m,k,h);h.get_thing_in_hand()&&(h.get_thing_in_hand().save_dimensions(),h.render())}else g()},500):(h.set_animating(!1),$(f).css({width:"",height:""}),f.style.left=c.left+"px",f.style.top=c.top+"px",r.appendChild(f),this.run_unwatched(m,k,l,h,q))}.bind(this);h.set_animating(!0,s);h.run_next_step();return!0},toString:function(){var b="",k=this.get_steps();k.forEach(function(l,h){b+=l.toString();b=h===k.length-2?b+" and \n":h<k.length-2?b+", \n":b+"."});return b},get_json:function(m){return{type:"body",
steps:b.UTILITIES.get_json_of_array(this.get_steps(),m)}}}}(window.TOONTALK);
window.TOONTALK.newly_created_widgets_path=function(b){b.creators_from_json.newly_created_widgets_path=function(m){return b.newly_created_widgets_path.create(m.index)};return{create:function(m){return{dereference:function(k,l,h){k=h.get_body().dereference(m);return this.next?b.path.dereference_path(this.next,k,l,h):k},toString:function(){var b;switch(m){case 0:b="first";break;case 1:b="second";break;case 2:b="third";break;default:b=m+1+"th"}return"the "+b+" widget he created"},get_json:function(){return{type:"newly_created_widgets_path",
index:m}}}}}}(window.TOONTALK);window.TOONTALK.robot_action=function(b){var m={copy:function(b,e,f,c){c.add_newly_created_widget(b.copy());return!0},"pick up":function(b,e,f,c){c.set_thing_in_hand(b);return!0},"pick up a copy of":function(b,e,f,c){b=b.copy();c.add_newly_created_widget(b);c.set_thing_in_hand(b);return!0},"drop it on":function(e,f,h,c,k){if(e)if(f=c.get_thing_in_hand()){if(f.drop_on)return f.drop_on(e,!1,void 0,c),c.set_thing_in_hand(void 0),e.visible&&e.visible()&&e.render(),f.robot_waiting_before_next_step===c?
(k&&k.running_watched||(f.robot_waiting_before_next_step=void 0),!1):!0;b.UTILITIES.report_internal_error("Thing in robot's hand ("+f+") doesn't handle 'drop_on'. Robot that "+c)}else b.UTILITIES.report_internal_error("The robot that '"+c.toString()+"' is executing drop_on but has nothing in its hand.");else b.UTILITIES.report_internal_error("The robot that '"+c.toString()+"' is executing drop_on but doesn't know where to drop what its holding")},remove:function(b,e,f,c){b.remove();return!0},erased_widget:function(b,
e,f,c,h){b.set_erased(h.erased);return!0},edit:function(e,f,h,c,k){if(e[k.setter_name])return k.argument_2?e[k.setter_name].call(e,k.argument_1,k.argument_2,e.visible()):e[k.setter_name].call(e,k.argument_1,e.visible()),!0;b.UTILITIES.report_internal_error(e+" cannot be edited.")},"add to the top-level backside":function(b,e,f,c,h){c.visible()||(c=b.get_frontside_element(!0),f=$(e.get_frontside_element()).position(),e=$(e.get_frontside_element()).closest(".toontalk-top-level-backside").get(0),$(c).css({left:f.left,
top:f.top}),e.appendChild(c),e.toontalk_widget.add_backside_widget(b),b.animate_to_element(e));return!0}},k=function(b,e,f,c,h){e=c.get_thing_in_hand();c.get_frontside_element();var a=b.get_element();f=$(a).width()/2;a=$(a).height()/2;c.animate_to_widget(b,h,.25,f,a);e&&c.render()},l=function(b,e){var f=b.get_backside_element(!0);return $(f).find(e).get(0)},h=function(b,e,f,c,h,a){var d=l(b,a),k=c.get_frontside_element(),m=d&&$(d).is(":visible"),r=function(){h();$(d).addClass("ui-state-active");setTimeout(function(){$(d).removeClass("ui-state-active");
!m&&b.get_backside()&&b.get_backside().hide_backside();c.run_next_step()},500)};e=function(){c.animate_to_element(d,r,.25,0,-$(k).height())};!m&&b.open_backside?b.open_backside(e):e()},e=function(b,e,f,c,h,a){c.get_frontside_element();c.carrying_tool=a;c.update_display();c.animate_to_element(b.get_frontside_element(),function(){h();c.carrying_tool=void 0;c.update_display();c.run_next_step()},.25,0,0)},f=function(b,f,h,c,k){var a=b.get_parent_of_frontside();e(b,f,h,c,function(){k();a&&"top-level"!==
a.get_widget().get_type_name()&&a.update_display&&a.update_display();b.render()},"toontalk-vacuum-ready-small")},r={copy:function(b,f,h,c,k){e(b,f,h,c,function(){k();b.add_copy_to_container(c.get_recently_created_widget())},"toontalk-wand-small")},"pick up":function(e,f,h,c,l){var a=e.get_frontside_element(),d=function(){l();c.run_next_step()};"empty hole"===e.get_type_name()?b.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):(e.save_dimensions(),$(a).css({width:a.offsetWidth+
"px",height:a.offsetHeight+"px"}),k(e,f,h,c,d))},"pick up a copy of":function(b,e,f,c,h){k(b,e,f,c,function(){h();c.get_recently_created_widget().set_visible(!0);c.update_display();c.run_next_step()})},"drop it on":function(e,f,h,c,l){var a=c.get_thing_in_hand(),d;a?(d=$(a.get_frontside_element()),k(e,f,h,c,function(){var e=d.offset();d.removeClass("toontalk-held-by-robot");l();a.drop_on&&($(c.get_frontside_element()).closest(".toontalk-top-level-backside").append(d.get(0)),b.UTILITIES.set_absolute_position(d,
e),a.restore_dimensions(),a.robot_waiting_before_next_step===c?a.robot_waiting_before_next_step=void 0:(c.set_thing_in_hand(void 0),c.run_next_step()),c.rerender())})):(b.UTILITIES.report_internal_error("Expected the robot to be holding something."),console.log("The robot is "+c),k(e,f,h,c,l))},remove:f,erased_widget:f,edit:function(b,e,f,c,k,a){h(b,e,f,c,function(){b.get_backside()&&b.get_backside().update_display();k()},a.button_selector)},"add to the top-level backside":function(b,e,f,c,h){h();
c.run_next_step()}};b.creators_from_json.robot_action=function(e,f,h){return e.additional_info?b.robot_action.create(b.path.create_from_json(e.path,h),e.action_name,e.additional_info):b.robot_action.create(b.path.create_from_json(e.path,h),e.action_name)};return{create:function(e,f,h){var c=Object.create(this),k=m[f],a=r[f];a||(a=function(a,b,c,e,f){setTimeout(function(){continuation(a)},3E3)});e||b.UTILITIES.report_internal_error("path undefined in "+f+" action");k||b.UTILITIES.report_internal_error("no run_function for "+
f);c.run_unwatched=function(a,c,f){var l=b.path.dereference_path(e,a,c,f);if(!l)return b.UTILITIES.report_internal_error("Unable to dereference path: "+b.path.toString(e)+" in context: "+a.toString()),!1;k(l,a,c,f,h)&&f.run_next_step()};c.run_watched=function(d,c,f){var l=b.path.dereference_path(e,d,c,f),m=function(){h||(h={});h.running_watched=!0;k(l,d,c,f,h)};l?(l.set_visible(!0),a(l,d,c,f,m,h)):b.UTILITIES.report_internal_error("Unable to dereference the path: "+b.path.toString(e)+" in context: "+
d.toString())};c.toString=function(){return f+" "+b.path.toString(e)};c.get_json=function(a){return{type:"robot_action",action_name:f,path:b.path.get_json(e,a),additional_info:h}};return c}}}(window.TOONTALK);window.TOONTALK.queue=function(b){return{create:function(){var m=Object.create(this);m.to_run=b.UTILITIES.create_queue();return m},enqueue:function(m){if(b.debugging&&this.to_run.does_any_item_satisfy(function(b){return b.robot===m.robot}))console.log("The same robot is being queued twice."),console.log("Robot is "+m.robot);else return this.to_run.enqueue(m)},maximum_run:50,paused:!1,run:function(){for(var m,k=Date.now()+this.maximum_run;!(this.to_run.isEmpty()||this.paused||Date.now()>=k);)m=this.to_run.dequeue(),
m.robot.run_actions(m.context,m.top_level_context,m.queue);b.DISPLAY_UPDATES.run_cycle_is_over();b.UTILITIES.set_timeout(function(){this.run()}.bind(this),this.to_run.isEmpty()?this.maximum_run:0)}}}(window.TOONTALK);window.TOONTALK.path=function(b){b.creators_from_json["path.to_entire_context"]=function(){return b.path.to_entire_context()};b.creators_from_json["path.top_level_backside"]=function(){return b.path.top_level_backside};b.creators_from_json["path.to_backside_widget_of_context"]=function(m){return b.path.get_path_to_backside_widget_of_context(m.type_name)};b.creators_from_json["path.to_resource"]=function(m,k){return b.path.get_path_to_resource(b.UTILITIES.create_from_json(m.resource,k))};return{get_path_to:function(m,
k){var l=function(h,e){var f=e.get_context(),k=e.get_body(),g,l;if(f===h)return b.path.to_entire_context();l=h.get_type_name();if("top-level"===l)return b.path.top_level_backside;if(g=k.get_path_to(h,e))return g;if("element attribute"===l&&!h.get_parent_of_frontside())return b.element.create_attribute_path(h,e);if(f.get_path_to&&(k=f.get_path_to(h,e)))return g=b.path.to_entire_context(),g.next=k,g;f.backside_widgets.some(function(f){f=f.get_widget();var c;if(f===h||f.top_contents_is&&f.top_contents_is(h))return g=
b.path.get_path_to_backside_widget_of_context(f.get_type_name()),e.add_to_backside_conditions(f),!0;if(f.get_path_to&&(c=f.get_path_to(h,e)))return g=b.path.get_path_to_backside_widget_of_context(f.get_type_name()),g.next=c,e.add_to_backside_conditions(f),!0});return g?g:b.path.get_path_to_resource(h.copy())}(m,k);l&&m.dereference_contents&&(b.path.path_end(l).not_to_be_dereferenced=!0);!l||"pick up"!==k.current_action_name&&"remove"!==k.current_action_name||(b.path.path_end(l).removing_widget=!0);
return l},path_end:function(b){for(;b.next;)b=b.next;return b},dereference_path:function(b,k,l,h){return b?b.dereference?b.dereference(k,l,h):k.dereference(b,l,h):k},continue_dereferencing_path:function(b,k,l,h){return b.next?k.dereference_contents&&!b.next.not_to_be_dereferenced?k.dereference_contents(b.next,l,h):k.dereference(b.next,l,h):k.dereference_contents&&!b.not_to_be_dereferenced?k.dereference_contents(b,l,h):k},toString:function(m){return m.next?(b.path.toString(m.next),b.path.toString(m.next)+
"of "+m.toString()):m.toString()},get_json:function(m,k){var l;if(!m.get_json)return m;l=m.get_json(k);m.next&&(l.next_path=b.path.get_json(m.next,k));m.removing_widget&&(l.removing_widget=!0);m.not_to_be_dereferenced&&(l.not_to_be_dereferenced=!0);return l},to_entire_context:function(){return{dereference:function(m,k,l){return b.path.continue_dereferencing_path(this,m,k,l)},toString:function(){return"what he's working on"},get_json:function(){return{type:"path.to_entire_context"}}}},get_path_to_resource:function(m,
k){m=m.get_widget();return{dereference:function(k,h,e){k=m.copy();var f,r,g;e.add_newly_created_widget(k);e.visible()&&!m.visible()&&(f=b.UTILITIES.find_resource_equal_to_widget(m))&&(g=k.get_frontside_element(),r=$(f).position(),b.UTILITIES.set_timeout(function(){$(g).css({left:r.left,top:r.top,width:f.offsetWidth,height:f.offsetHeight})}));return k},toString:function(){return b.UTILITIES.add_a_or_an(m.toString())},get_json:function(){return{type:"path.to_resource",resource:b.path.get_json(m,b.UTILITIES.fresh_json_history())}}}},
get_path_to_backside_widget_of_context:function(m){return{dereference:function(k,l,h){var e;k.backside_widgets.some(function(b){if(b.get_widget().is_of_type(m))return e=b.get_widget(),!0});if(e)return b.path.continue_dereferencing_path(this,e,l,h)},toString:function(){return"the "+m+" on the back of what he's working on"},get_json:function(){return{type:"path.to_backside_widget_of_context",type_name:m}}}},create_from_json:function(m,k){var l=b.UTILITIES.create_from_json(m,k),h;m.next_path&&(h=b.UTILITIES.create_from_json(m.next_path,
k),m.next_path.removing_widget&&(h.removing_widget=!0),m.next_path.not_to_be_dereferenced&&(h.not_to_be_dereferenced=!0),l.next=h);m.removing_widget&&(l.removing_widget=!0);m.not_to_be_dereferenced&&(l.not_to_be_dereferenced=!0);return l},top_level_backside:{dereference:function(b,k,l){return b.ancestor_of_type("top-level")},toString:function(){return"the top-level backside"},get_json:function(){return{type:"path.top_level_backside"}}}}}(window.TOONTALK);window.TOONTALK.UTILITIES=function(b){var m,k=100,l=(new Date).getTime(),h,e=function(c,a){var d=c.view.backside,e=a.get_backside_widgets(),f=a.get_type_name();"top-level"===f?d?(f="a work area containing ",0===e.length?f="an empty work area":(f=1===e.length?f+"one thing: ":f+(e.length+" things: "),h=e.length,e.forEach(function(a){h--;f+=b.UTILITIES.add_a_or_an(a.get_type_name());1===h?f+=", and ":1<h&&(f+=", ")}))):f="a top-level widget":(f=b.UTILITIES.add_a_or_an(f),d&&(f="the back of "+f));return"<div class='toontalk-json'>\nThis will be replaced by "+
f+".\n<div style='display:none;'>"+JSON.stringify(c,null,"  ")+"</div></div>"},f=function(b){var a=b.indexOf("{"),d=b.lastIndexOf("}");if(!(0>a||0>d))return b.substring(a,d+1)},r=function(c,a,d,e,f,g,h,k,l,m){var q,r,s,H,N;d.set_visible(!0);if(c.is(".toontalk-backside")){if(d.is_of_type("top-level")){q=h.semantic.backside_widgets;r=h.shared_widgets;s=c.get(0);g=d.get_backside_widgets().slice();g.forEach(function(a,b){var c=a.get_widget(),f,g,h,k,l,p,m;d.remove_backside_widget(c,a.is_backside());f=
0<=q[b].widget.shared_widget_index?r[q[b].widget.shared_widget_index].view:q[b].widget.view;a.is_backside()?(g=c.get_backside_element(!0),h=f.backside_left,k=f.backside_top,l=f.backside_width,p=f.backside_height):(g=c.get_frontside_element(!0),h=f.frontside_left,k=f.frontside_top,l=f.frontside_width,p=f.frontside_height);e.add_backside_widget(c,a.is_backside());s.appendChild(g);m=$(g).position();$(g).css({left:m.left+h,top:m.top+k,width:l,height:p});a.is_backside()&&(c.backside_geometry=f.backside_geometry,
c.apply_backside_geometry())}.bind(this));return}d?e.get_backside().widget_dropped_on_me(d,m,g):b.UTILITIES.report_internal_error("No source_widget");k||(l=k=0,setTimeout(function(){var b=d.get_HTML(),c=a.width(),e=a.height();0<=b.indexOf("data:image")?(b=Math.min(80,c)/2,c=90,90>e&&(c-=(90-e)/2)):(b=Math.min(60,c/2),c=Math.min(30,e/2));a.css({left:H-b,top:N-c})},50));H=g.pageX-(f.left+k);N=g.pageY-(f.top+l);a.css({left:H,top:N});h&&h.semantic.running&&d.set_running(!0)}else if(c.is(".toontalk-drop-area"))a.addClass("toontalk-widget-in-drop_area"),
c.append(a.get(0)),a.is(".toontalk-robot")&&c.data("drop_area_owner").set_next_robot(b.UTILITIES.widget_from_jquery(a));else{if(a.is(".toontalk-backside-of-top-level"))return;if(e)s=c.closest(".toontalk-top-level-backside").get(0),s.appendChild(a.get(0)),f=$(s).offset(),a.css({left:g.pageX-(f.left+k),top:g.pageY-(f.top+l)}),d.drop_on&&d.drop_on(e,m,g)||e.widget_dropped_on_me&&e.widget_dropped_on_me(d,m,g)||(c=c.closest(".toontalk-top-level-backside"),0<c.length&&(e=b.UTILITIES.widget_from_jquery(c))&&
e.get_backside().widget_dropped_on_me(d,m,g));else{b.UTILITIES.report_internal_error("target element has no 'owner'");return}}b.UTILITIES.remove_highlight()},g=function(c,a,d,e,g){var h=new FileReader,k=0===c.type.indexOf("image"),l,m;h.onloadend=function(){if(k)l=b.element.create("<img src='"+h.result+"' alt='"+c.name+"'/>");else{if(m=f(h.result))try{l=b.UTILITIES.create_from_json(JSON.parse(m))}catch(q){}l||(l=b.element.create(h.result))}r(a,$(l.get_frontside_element(!0)),l,d,e,g)};k?h.readAsDataURL(c):
h.readAsText(c)},q=function(){m&&(m.removeClass("toontalk-being-dragged"),m.find("*").removeClass("toontalk-ignore-events"),b.UTILITIES.set_timeout(function(){m=void 0}))},s=function(b,a){if(b===a)return!0;if(b.parentNode)return s(b.parentNode,a)},c=[];window.addEventListener("message",function(b){b.source==window&&"zero-timeout-message"==b.data&&(b.stopPropagation(),0<c.length&&c.shift()())},!0);$(document).ready(function(){var c=!1,a=0;b.debugging=b.UTILITIES.get_current_url_boolean_parameter("debugging",
!1);$(".toontalk-json").each(function(d,e){var f=e.textContent,g,h,k,l;if(f)if(f=f.substring(f.indexOf("{"),f.lastIndexOf("}")+1),g=JSON.parse(f),h=b.UTILITIES.create_from_json(g)){e.textContent="";if(h.get_type_name)if(h.is_of_type("top-level")){a++;if(!b.no_local_storage){f=b.UTILITIES.current_URL();1<a&&(f+="#"+a);if(b.UTILITIES.get_current_url_boolean_parameter("reset",!1))try{window.localStorage.removeItem(f)}catch(m){b.UTILITIES.display_message("Error removing previous state. Error message is "+
m)}else{try{k=window.localStorage.getItem(f)}catch(q){l="Error reading previous state. Error message is "+q,b.UTILITIES.is_internet_explorer()?console.error(l):b.UTILITIES.display_message()}k&&(g=JSON.parse(k),h=b.UTILITIES.create_from_json(g))}h.local_storage_key=f}k=h.get_backside(!0);k=k.get_element();$(e).replaceWith(k);$(k).css({width:g.view.backside_width,height:g.view.backside_height,"background-color":g.view.background_color,"border-width":g.view.border_width});c=!0}else $(e).addClass("toontalk-top-level-resource"),
k=h.get_frontside_element(),$(k).addClass("toontalk-top-level-resource").css({position:"relative"}),e.appendChild(k);else e.appendChild(h.get_element());h.set_active&&h.set_active(!1);setTimeout(function(){h.update_display&&h.update_display();g.semantic.running&&h.set_running(!0)},1)}else b.UTILITIES.report_internal_error("Could not recreate a widget from this JSON: "+f)});c||$(document).click(function(){$(".toontalk-frontside").each(function(a,b){var c=b.toontalk_widget;c&&c.set_running&&c.set_running(!1)})});
b.QUEUE=window.TOONTALK.queue.create();b.QUEUE.run();window.addEventListener("beforeunload",function(a){b.UTILITIES.backup_all_top_level_widgets(!0)});b.UTILITIES.add_test_all_button()});return{create_from_json:function(c,a,d){var e,f,g,h;if(c){c.shared_widgets&&(a||(a={}),a.json_of_shared_widgets=c.shared_widgets,a.shared_widgets=[]);if(c.widget)return e=b.UTILITIES.create_from_json(c.widget,a),c.is_backside?e.get_backside(!0):e;if(a&&a.shared_widgets&&0<=c.shared_widget_index){if(d=a.shared_widgets[c.shared_widget_index])return d;
d=a.json_of_shared_widgets[c.shared_widget_index];e=b.UTILITIES.create_from_json(d,a,!0);a.shared_widgets[c.shared_widget_index]=e;e.finish_create_from_json_continuation&&(e.finish_create_from_json_continuation(),e.finish_create_from_json_continuation=void 0);return e}(g=c.semantic)||(g=c);c=c.view;if(0<=g.shared_widget_index)return b.UTILITIES.create_from_json(a.json_of_shared_widgets[g.shared_widget_index],a);if(b.creators_from_json[g.type]){a||(a={});c?a.json_view=c:c=a.json_view;if((e=b.creators_from_json[g.type](g,
a))&&e.get_backside){g.erased&&(b.widget.erasable(e),e.set_erased(g.erased));g.infinite_stack&&e.set_infinite_stack(g.infinite_stack);if(c&&c.frontside_width)if(f=c.backside?e.get_backside(!0).get_element():e.get_frontside_element(),h={width:c.frontside_width,height:c.frontside_height},"element"===g.type)e.on_update_display(function(){$(f).css(h)});else $(f).css(h);c&&c.saved_width&&(e.saved_width=c.saved_width,e.saved_height=c.saved_height);c&&c.backside_geometry&&(e.backside_geometry=c.backside_geometry);
g.backside_widgets&&(d?e.finish_create_from_json_continuation=function(){this.add_backside_widgets_from_json(e,g.backside_widgets,a)}.bind(this):this.add_backside_widgets_from_json(e,g.backside_widgets,a))}return e}b.UTILITIES.report_internal_error("JSON type '"+g.type+"' not supported. Perhaps a JavaScript file implementing it is missing.")}},add_backside_widgets_from_json:function(b,a,d){var c=this.create_array_from_json(a,d);b.set_backside_widget_sides(c,a.map(function(a){return 0<=a.widget.shared_widget_index?
d.json_of_shared_widgets[a.widget.shared_widget_index].view:a.widget.view}))},create_array_from_json:function(c,a){var d=[];c.forEach(function(c,e){d[e]=c?b.UTILITIES.create_from_json(c,a):c});return d},get_json_of_array:function(c,a){var d=[];c.forEach(function(c,e){c.is_backside&&c.is_backside()?d[e]={widget:b.UTILITIES.get_json(c.get_widget(),a),is_backside:!0}:d[e]=c.get_type_name?{widget:b.UTILITIES.get_json(c,a)}:c.get_json(a)});return d},fresh_json_history:function(){return{widgets_encountered:[],
shared_widgets:[],json_of_widgets_encountered:[]}},get_json_top_level:function(c){var a=this.fresh_json_history(),d=b.UTILITIES.get_json(c,a);0<a.shared_widgets.length&&(d.shared_widgets=a.shared_widgets.map(function(e,f){var g=function(b){b=a.widgets_encountered.indexOf(b);return a.json_of_widgets_encountered[b]},h=function(b){return g(a.shared_widgets[b])},k=g(e);c===e?(k={semantic:k.semantic,view:k.view,version:k.version},d.semantic={shared_widget_index:f}):b.UTILITIES.tree_replace_once(d.semantic,
k,{shared_widget_index:f},h);return k}));return d},get_json:function(c,a){var d,e;b.debugging&&!a&&b.UTILITIES.report_internal_error("no json_history");d=a.shared_widgets.indexOf(c);if(0<=d)return{shared_widget_index:d};d=a.widgets_encountered.indexOf(c);if(0<=d)return d=b.UTILITIES.insert_ancestors_last(c,a.shared_widgets),{shared_widget_index:d};d=a.widgets_encountered.push(c)-1;e=c.get_json(a);e=c.add_to_json(e,a);a.json_of_widgets_encountered[d]=e;c.add_backside_widgets_to_json&&c.add_backside_widgets_to_json(e,
a);return e},tree_replace_once:function(b,a,d,c){var e,f;for(f in b)if(b.hasOwnProperty(f)&&(e=b[f])){if(e===a)return b[f]=d,!0;if("shared_widget_index"===f){if(this.tree_replace_once(c(e),a,d,c))return!0}else if(!(0<=["string","number","function","undefined"].indexOf(typeof e))&&this.tree_replace_once(e,a,d,c))return!0}return!1},insert_ancestors_last:function(b,a){var d=-1;a.some(function(a,c){if(b.has_ancestor(a))return d=c,!0});0>d&&(d=a.length);a.splice(d,0,b);return d},copy_widgets:function(b,
a){var d=[],c;for(c=0;c<b.length;c++)d[c]=b[c]&&b[c].copy(a);return d},copy_widget_sides:function(b,a){return b.map(function(b){var c=b.get_widget().copy(a);b.is_backside()&&c.get_backside();return c})},copy_array:function(b){return b.slice()},generate_unique_id:function(){l+=1;return"toontalk_id_"+l},get_style_property:function(b,a){if(b.currentStyle)return b.currentStyle[a];if(window.getComputedStyle)return document.defaultView.getComputedStyle(b,null).getPropertyValue(a)},get_style_numeric_property:function(b,
a){var d=this.get_style_property(b,a),c;return"string"===typeof d?(c=d.indexOf("px"),0<=c&&(d=d.substring(0,c)),parseInt(d,10)):d},data_transfer_json_object:function(c){var a;if(c.dataTransfer){try{a=c.dataTransfer.getData("text/html")}catch(d){a=c.dataTransfer.getData("text")}if(!a||a.match(/[\u3400-\u9FBF]/))a=c.dataTransfer.getData("text");if(a){c=f(a);if(!c)return b.UTILITIES.get_json_top_level(b.element.create(a));try{return JSON.parse(c)}catch(e){b.UTILITIES.report_internal_error("Exception parsing "+
c+"\n"+e.toString())}}}},drag_and_drop:function(c){b.UTILITIES.draggable(c);b.UTILITIES.can_receive_drops(c)},draggable:function(c){$(c).attr("draggable",!0);c.addEventListener("dragstart",function(a){var d=$(a.target).closest(".toontalk-side"),f,g,h;a.dataTransfer.getData("text")&&0<a.dataTransfer.getData("text").length||(m=d||$(c),g=b.UTILITIES.widget_from_jquery(m),g||(g=b.UTILITIES.widget_from_jquery($element),b.UTILITIES.report_internal_error("Possible bug that "+m+" doesn't have a known owner."),
m=$(c)),g.being_dragged=!0,f=m.get(0).getBoundingClientRect(),h=m.is(".toontalk-top-level-resource"),a.dataTransfer&&g.get_json&&(a.dataTransfer.effectAllowed=h?"copy":"move",d=b.UTILITIES.get_json_top_level(g),d.view.drag_x_offset=a.clientX-f.left,d.view.drag_y_offset=a.clientY-f.top,!d.view.frontside_width&&m.parent().is(".toontalk-backside")&&(d.view.frontside_width=m.width(),d.view.frontside_height=m.height()),m.is(".toontalk-backside")&&(d.view.backside=!0),m.data("json",d),f=e(d,g),a.dataTransfer.setData("text",
f),b.UTILITIES.is_internet_explorer()||a.dataTransfer.setData("text/html",f),g.drag_started(d,h)),m.addClass("toontalk-being-dragged"),a.stopPropagation())});c.addEventListener("dragend",function(a){m||(m=$(a.target).closest(".toontalk-side"));b.UTILITIES.widget_from_jquery(m).being_dragged=void 0;if(m.is(".toontalk-frontside"))if(m.parent().is(".toontalk-backside")){var d=m.data("json");d&&(m.data("json",""),m.css({width:d.view.frontside_width,height:d.view.frontside_height}))}else m.parent().is(".toontalk-top-level-resource, .toontalk-drop-area")||
m.is(".toontalk-carried-by-bird, .toontalk-element-attribute")||b.UTILITIES.has_animating_image(m.get(0))||m.css({width:"100%",height:"100%"});q();a.stopPropagation()})},can_receive_drops:function(c){c.addEventListener("dragover",function(a){a.preventDefault();return!1});c.addEventListener("drop",function(a){var d,e,f,h,k,l,s,B,G,D,t=b.UTILITIES.data_transfer_json_object(a);a.preventDefault();$(c).find("*").removeClass("toontalk-ignore-events");d=m;q();if(d||t||a.dataTransfer.files){if($(a.target).is(".toontalk-drop-area-instructions"))f=
$(a.target).parent();else if($(a.target).is(".toontalk-element-attribute-input")){if(f=$(a.target).closest(".toontalk-side"),h=b.UTILITIES.widget_from_jquery(f)){e=d?b.UTILITIES.widget_from_jquery(d):b.UTILITIES.create_from_json(t);b.UTILITIES.restore_resource(d,e);h.dropped_on_style_attribute(e,a.target.name,a);a.stopPropagation();return}}else f=$(a.target).is(".toontalk-drop-area")?$(a.target):$(a.target).closest(".toontalk-side");if(0!==f.length&&!f.is(".toontalk-top-level-resource")){s=f.offset();
b.UTILITIES.remove_highlight();h=b.UTILITIES.widget_from_jquery(f);if(d&&0<d.length&&!(h&&h.get_infinite_stack&&h.get_infinite_stack())&&(d.get(0)===f.get(0)||jQuery.contains(d.get(0),f.get(0)))){if(d.is(".toontalk-top-level-backside"))return;f.hide();e=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset);f.show();e&&(f=$(e).closest(".toontalk-side"),s=f.offset(),h=b.UTILITIES.widget_from_jquery(f))}t&&t.view&&t.view.drag_x_offset?(k=t.view.drag_x_offset,l=t.view.drag_y_offset):
l=k=0;if(d&&0<d.length){if(!(h&&h.get_infinite_stack&&h.get_infinite_stack()||d.get(0)!==f.get(0)&&!jQuery.contains(d.get(0),f.get(0)))){d.css({left:d.get(0).offsetLeft+(a.layerX-k),top:d.get(0).offsetTop+(a.layerY-l)});a.stopPropagation();return}B=d.is(".toontalk-backside");e=b.UTILITIES.widget_from_jquery(d);d.parent().is(".toontalk-drop-area")?(d.removeClass("toontalk-widget-in-drop_area"),d.parent().data("drop_area_owner").set_next_robot(void 0)):(G=d.parents(".toontalk-side:first"),(D=b.UTILITIES.widget_from_jquery(G))?
!B&&e.get_infinite_stack&&e.get_infinite_stack()?(e=e.copy(),G=d.width(),D=d.height(),d=$(e.get_frontside_element(!0)),f.is(".toontalk-backside")&&d.css({width:t.view.frontside_width||G,height:t.view.frontside_height||D})):D.removed_from_container&&(G.is(".toontalk-backside")?D.remove_backside_widget(e,B,!0):(D.removed_from_container(e,B,a),e.restore_dimensions&&e.restore_dimensions())):b.UTILITIES.restore_resource(d,e),b.robot.in_training&&b.robot.in_training.add_newly_created_widget_if_new(e))}else{if(0<
a.dataTransfer.files.length){for(d=0;d<a.dataTransfer.files.length;d++)g(a.dataTransfer.files[d],f,h,s,a);a.stopPropagation();return}e=b.UTILITIES.create_from_json(t,{event:a});if(!e){t?b.UTILITIES.report_internal_error("Unable to construct a ToonTalk widget from the JSON."):b.debugging&&console.log("No data transfer in drop.");a.stopPropagation();return}(B=t.view.backside)?(d=$(e.get_backside_element()),d.css({width:t.view.backside_width,height:t.view.backside_height,"background-color":t.view.background_color,
"border-width":t.view.border_width}),e.apply_backside_geometry()):d=$(e.get_frontside_element())}e!==h&&r(f,d,e,h,s,a,t,k,l,B);a.stopPropagation()}}else a.dataTransfer?b.UTILITIES.report_internal_error("Drop failed since unable to parse as JSON."):b.UTILITIES.report_internal_error("Drop failed since there is no event.dataTransfer"),a.stopPropagation()});c.addEventListener("dragenter",function(a){var d=$(a.target).closest(".toontalk-side"),e=b.UTILITIES.get_dragee();d.is(".toontalk-top-level-backside")||
d.closest(".toontalk-top-level-resource").is("*")||d.is(".toontalk-being-dragged")||e&&s(d.get(0),e.get(0))||(b.UTILITIES.highlight_element(d),d.is(".toontalk-backside, .toontalk-drop-area")||"box"===b.UTILITIES.widget_from_jquery($(c)).get_type_name()||d.find(".toontalk-side").addClass("toontalk-ignore-events"));a.stopPropagation()});c.addEventListener("dragleave",function(a){a.stopPropagation()})},create_drop_area:function(c){var a=document.createElement("div"),d=$(a),e=document.createElement("div");
e.innerHTML=c;$(e).addClass("toontalk-drop-area-instructions ui-widget");d.addClass("toontalk-drop-area");d.append(e);b.UTILITIES.can_receive_drops(a);return d},set_absolute_position:function(b,a){for(var d=b.parent(),c=a.left,e=a.top,f;d.is("*")&&!d.is("html");)f=d.position(),c-=f.left,e-=f.top,d=d.parent();b.css({left:c,top:e,position:"absolute"});b.is(".toontalk-side-animating")&&(b.get(0).style.left=c+"px",b.get(0).style.top=e+"px")},set_position_relative_to_top_level_backside:function(b,a){var d=
b.closest(".toontalk-top-level-backside").offset();d||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),d={left:0,top:0});var c=a.left-d.left,d=a.top-d.top;b.css({left:c,top:d,position:"absolute"});b.is(".toontalk-side-animating")&&(b.get(0).style.left=c+"px",b.get(0).style.top=d+"px")},restore_resource:function(c,a){var d,e;c.is(".toontalk-top-level-resource")&&(d=a.copy(!1,!0),e=d.get_frontside_element(),$(e).css({width:c.width(),height:c.height()}),c.removeClass("toontalk-top-level-resource"),
$(e).addClass("toontalk-top-level-resource").css({position:"relative"}),c.get(0).parentElement.appendChild(e),b.DISPLAY_UPDATES.pending_update(d),a.set_active&&(a.set_active(!0),d.set_active(!1)))},find_resource_equal_to_widget:function(c){var a;$(".toontalk-top-level-resource").each(function(d,e){var f=$(e).children(":first"),g=b.UTILITIES.widget_from_jquery(f);if(g&&(c.equals&&c.equals(g)||c.matching_resource&&c.matching_resource(g)))return a=f.get(0),!1});return a},set_position_is_absolute:function(b,
a,d){a?(d=$(b).position(),a=d.left,d=d.top,$(b).css({left:a,top:d,position:"absolute"})):b.style.position="static"},cardinal:function(b){switch(b){case 0:return"first";case 1:return"second";case 2:return"third";default:return b+"th"}},on_a_nest_in_a_box:function(b){return $(b).closest(".toontalk-nest").is("*")&&$(b).closest(".toontalk-box").is("*")},add_one_shot_event_handler:function(b,a,d,c){var e=!1,f=function(d){e=!0;c&&c();b.removeEventListener(a,f)};b.addEventListener(a,f);setTimeout(function(){e||
f()},d)},animate_to_absolute_position:function(c,a,d,e,f){var g=$(c).offset(),h=$(c).position(),k=b.UTILITIES.distance(a,g);e||(e=.5);e=Math.round(k/e);$(c).addClass("toontalk-side-animating");c.style.transitionDuration=e+"ms";c.style.left=h.left+(a.left-g.left)+"px";c.style.top=h.top+(a.top-g.top)+"px";f||b.UTILITIES.add_one_shot_event_handler(c,"transitionend",e+500,function(){$(c).removeClass("toontalk-side-animating");c.style.transitionDuration=""});b.UTILITIES.add_one_shot_event_handler(c,"transitionend",
e+500,d)},distance:function(b,a){var d=b.left-a.left,c=b.top-a.top;return Math.sqrt(d*d+c*c)},highlight_element:function(c,a){var d;if(!$(c).is(".toontalk-highlight")&&(b.UTILITIES.remove_highlight(),d=b.UTILITIES.widget_from_jquery($(c)))){if(d.element_to_highlight&&(c=d.element_to_highlight(event),!c))return;$(c).addClass("toontalk-highlight");a&&setTimeout(function(){b.UTILITIES.remove_highlight()},a)}},remove_highlight:function(){$(".toontalk-highlight").removeClass("toontalk-highlight")},cursor_of_image:function(b){var a=
b.lastIndexOf(".");return 0<=a?b.substring(0,a)+".32x32"+b.substring(a):b},next_z_index:function(){k++;return k},create_close_button:function(b,a){var d=document.createElement("div"),c=document.createElement("div");$(d).addClass("toontalk-close-button");$(d).click(b);$(d).attr("title",a);c.innerHTML="&times;";d.appendChild(c);return d},check_radio_button:function(b){$(b.button).prop("checked",!0);$(b.label).addClass("ui-state-active")},create_button_set:function(){var b=document.createElement("div"),
a,d;for(a=0;a<arguments.length;a++)if(0<=arguments[a].length)for(d=0;d<arguments[a].length;d++)b.appendChild(arguments[a][d]);else b.appendChild(arguments[a]);$(b).buttonset();return b},create_text_element:function(b){var a=document.createElement("div");a.textContent=b;$(a).addClass("ui-widget");return a},create_anchor_element:function(b,a){var d=document.createElement("a");d.innerHTML=b;d.href=a;d.target="_blank";return d},create_text_input:function(c,a,d,e,f){var g=document.createElement("input"),
h;g.type="text";g.className=a;g.value=c;g.title=e;d?(c=document.createElement("label"),c.innerHTML=d,g.id=b.UTILITIES.generate_unique_id(),c.htmlFor=g.id,f&&(h=b.UTILITIES.create_anchor_element("i",f),$(h).addClass("toontalk-help-button")),d=b.UTILITIES.create_horizontal_table(c,g,h),$(c).addClass("ui-widget")):d=g;$(g).button().addClass("toontalk-text-input");$(g).css({"background-color":"white"});return{container:d,button:g}},create_text_area:function(c,a,d,e){var f=document.createElement("textarea");
f.className=a;f.value=c;f.title=e;c=document.createElement("label");c.innerHTML=d;f.id=b.UTILITIES.generate_unique_id();c.htmlFor=f.id;d=b.UTILITIES.create_horizontal_table(c,f);$(f).button().addClass("toontalk-text-text_area");$(f).css({background:"white"});$(c).addClass("ui-widget");return{container:d,button:f}},create_radio_button:function(c,a,d,e,f){var g=document.createElement("div"),h=document.createElement("input"),k=document.createElement("label");h.type="radio";h.className=d;h.name=c;h.value=
a;k.innerHTML=e;h.id=b.UTILITIES.generate_unique_id();k.htmlFor=h.id;g.appendChild(h);g.appendChild(k);g.title=f;$(h).button();return{container:g,button:h,label:k}},create_check_box:function(c,a,d,e){var f=document.createElement("div"),g=document.createElement("input"),h=document.createElement("label");g.type="checkbox";g.className=a;g.checked=c;h.innerHTML=d;g.id=b.UTILITIES.generate_unique_id();h.htmlFor=g.id;$(h).addClass("ui-widget");f.appendChild(g);f.appendChild(h);f.title=e;return{container:f,
button:g,label:h}},create_horizontal_table:function(){var b=document.createElement("table"),a,d,c;d=document.createElement("tr");b.appendChild(d);for(a=0;a<arguments.length;a++)arguments[a]&&(c=document.createElement("td"),d.appendChild(c),c.appendChild(arguments[a]));return b},create_vertical_table:function(){var c=document.createElement("table"),a,d;for(a=0;a<arguments.length;a++)arguments[a]&&(d=b.UTILITIES.create_row(arguments[a]),c.appendChild(d));return c},create_row:function(){var b=document.createElement("tr"),
a=document.createElement("td"),d;for(d=0;d<arguments.length;d++)b.appendChild(arguments[d]);a.appendChild(b);return b},selected_radio_button:function(){var b;for(b=0;b<arguments.length;b++)if(arguments[b].checked)return arguments[b]},create_image:function(b,a){var d=document.createElement("img"),c;d.src=b;a&&$(d).addClass(a);0===b.indexOf("images/")&&(c=function(a){d.removeEventListener("error",c);d.src="http://toontalk.github.io/ToonTalk/"+b},d.addEventListener("error",c));return d},get_dragee:function(){return m},
add_a_or_an:function(b,a){var d=b.charAt(0);return 0===b.indexOf("the ")?b:0>"aeiou".indexOf(d)?a?"A "+b:"a "+b:a?"An "+b:"an "+b},maximum_string_length:function(b,a){var d;if(b.length<=a)return b;d=b.substring(0,Math.round(.75*a));return d+" ... "+b.substring(b.length-(a-d.length))},backup_all_top_level_widgets:function(c){b.UTILITIES.get_current_url_boolean_parameter("autosave",!0)&&$(".toontalk-top-level-backside").each(function(a,d){b.UTILITIES.widget_from_jquery($(d)).backup_all(c)})},make_resizable:function(b,
a){b.resizable({resize:function(d,c){b.find("img").css({width:c.size.width,height:c.size.height});a.render()},handles:"n,e,s,w"})},match:function(b,a){var d=b.match(a);return"not matched"===d&&a.matched_by?a.matched_by(b):d},current_URL:function(){return window.location.pathname},absolute_file_path:function(b){var a=window.location.pathname,d=a.lastIndexOf("ToonTalk/");return 0>d?b:a.substring(0,d+9)+b},copy_side:function(b,a,d){a=b.get_widget().copy(a);var c;d&&(d=b.get_widget().get_frontside_element())&&
(c=a.get_frontside_element(!0),$(c).css({width:$(d).width(),height:$(d).height()}));return b.is_backside()?a.get_backside():a},scale_to_fit:function(b,a,d,c,e){var f=function(){$(b).css({transform:"scale("+h+", "+k+")","transform-origin":"top left",width:d,height:c})},g,h,k;d||(d=$(b).width());c||(c=$(b).height());$(a).is(".toontalk-backside")?k=h=1:(g=$(a).width(),a=$(a).height(),h=g/d,k=a/c,0===h&&(h=1),0===k&&(k=1));e?setTimeout(f,e):f();return{x_scale:h,y_scale:k}},relative_position:function(b,
a){var d=$(b).offset(),c;a&&(c=$(a).offset(),d.left-=c.left,d.top-=c.top);return d},add_animation_class:function(b,a){$(b).css({width:"",height:""}).addClass(a)},widget_from_jquery:function(b){if(0<b.length)return b.get(0).toontalk_widget},has_animating_image:function(b){b=$(b);return(b=b.css("animation")||b.css("webkit-animation")||b.css("moz-animation")||b.css("ms-animation")||b.css("o-animation"))&&0!==b.indexOf("none")},display_message:function(b){alert(b)},report_internal_error:function(c){console.log(c);
b.debugging&&b.UTILITIES.display_message(c)},get_current_url_boolean_parameter:function(b,a){return 0>window.location.href.indexOf(b+"=")?a:0<=window.location.href.indexOf(b+"=1")?!0:!1},is_browser_of_type:function(b){return 0<=window.navigator.userAgent.indexOf(b)},is_internet_explorer:function(){return b.UTILITIES.is_browser_of_type("MSIE")||b.UTILITIES.is_browser_of_type("Trident")},remove_z_index:function(b){if(0===b.length||"<"!==b.charAt(0)||0>b.indexOf("z-index"))return b;b=$(b);b.attr("z-index",
"");return b.html()},add_test_all_button:function(){var b=$("#toontalk-test-all-button"),a;if(0!==b.length){b.button();a=b.get(0);a.innerHTML="Run all tests";var c=!1;b.click(function(b){c?($(".toontalk-stop-sign").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&$(this).click()}),a.innerHTML="Run all tests"):($(".toontalk-green-flag").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&$(this).click()}),a.innerHTML="Stop all tests");c=!c})}},set_timeout:function(b,
a){a?setTimeout(b,a):(c.push(b),window.postMessage("zero-timeout-message","*"))},create_queue:function(){var b=[],a=0;return{getLength:function(){return b.length-a},isEmpty:function(){return 0==b.length},enqueue:function(a){b.push(a)},dequeue:function(){var c;if(0!=b.length)return c=b[a],2*++a>=b.length&&(b=b.slice(a),a=0),c},peek:function(){return 0<b.length?b[a]:void 0},does_any_item_satisfy:function(c){var e;for(e=a;e<b.length;e++)if(c(b[e]))return!0;return!1}}}}}(window.TOONTALK);
window.TOONTALK.UTILITIES.available_types="number box element robot nest sensor top-level".split(" ");
