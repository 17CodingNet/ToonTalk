'use strict';(function(g){var l;"undefined"===typeof exports?"function"===typeof define&&"object"===typeof define.amd&&define.amd?(l={},define(function(){return l})):l="undefined"!==typeof window?window:g:l=exports;(function(e){var d={greatest_common_divisor:function(a,c){if(1===c||1===a)return 1;for(var b;0!==c;){b=c;c=a%c;if(!isFinite(c))return 0;a=b}return a}};d.gcd=d.greatest_common_divisor;d.fromRandom=function(a){return Math.random()*(1<<a)>>>0};d.fromMillitime=function(){return+new Date};d.fromUnixtime=
function(){return.001*d.fromMillitime()|0};"undefined"!==typeof e&&(e.integer=d);(function(a){function c(a,f,e){if(e!==b)return a instanceof c?a:"undefined"===typeof a?d:c.parse(a);for(a=a||[];a.length&&!a[a.length-1];)--a.length;this._d=a;this._s=a.length?f||1:0}var b={};c._construct=function(a,d){return new c(a,d,b)};c.base=1E7;c.base_log10=7;var d=new c([],0,b);c.ZERO=d;var f=new c([1],1,b);c.ONE=f;var e=new c(f._d,-1,b);c.M_ONE=e;c._0=d;c._1=f;c.small=[d,f,new c([2],1,b),new c([3],1,b),new c([4],
1,b),new c([5],1,b),new c([6],1,b),new c([7],1,b),new c([8],1,b),new c([9],1,b),new c([10],1,b),new c([11],1,b),new c([12],1,b),new c([13],1,b),new c([14],1,b),new c([15],1,b),new c([16],1,b),new c([17],1,b),new c([18],1,b),new c([19],1,b),new c([20],1,b),new c([21],1,b),new c([22],1,b),new c([23],1,b),new c([24],1,b),new c([25],1,b),new c([26],1,b),new c([27],1,b),new c([28],1,b),new c([29],1,b),new c([30],1,b),new c([31],1,b),new c([32],1,b),new c([33],1,b),new c([34],1,b),new c([35],1,b),new c([36],
1,b)];c.digits="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");c.prototype.toString=function(a){a=+a||10;if(2>a||36<a)throw Error("illegal radix "+a+".");if(0===this._s)return"0";if(10===a){a=0>this._s?"-":"";a+=this._d[this._d.length-1].toString();for(var b=this._d.length-2;0<=b;b--){for(var d=this._d[b].toString();7>d.length;)d="0"+d;a+=d}return a}b=c.digits;a=c.small[a];for(var d=this._s,f=this.abs(),e=[],h;0!==f._s;)h=f.divRem(a),f=h[0],h=h[1],e.push(b[h.valueOf()]);return(0>d?"-":"")+e.reverse().join("")};
c.radixRegex=[/^$/,/^$/,/^[01]*$/,/^[012]*$/,/^[0-3]*$/,/^[0-4]*$/,/^[0-5]*$/,/^[0-6]*$/,/^[0-7]*$/,/^[0-8]*$/,/^[0-9]*$/,/^[0-9aA]*$/,/^[0-9abAB]*$/,/^[0-9abcABC]*$/,/^[0-9a-dA-D]*$/,/^[0-9a-eA-E]*$/,/^[0-9a-fA-F]*$/,/^[0-9a-gA-G]*$/,/^[0-9a-hA-H]*$/,/^[0-9a-iA-I]*$/,/^[0-9a-jA-J]*$/,/^[0-9a-kA-K]*$/,/^[0-9a-lA-L]*$/,/^[0-9a-mA-M]*$/,/^[0-9a-nA-N]*$/,/^[0-9a-oA-O]*$/,/^[0-9a-pA-P]*$/,/^[0-9a-qA-Q]*$/,/^[0-9a-rA-R]*$/,/^[0-9a-sA-S]*$/,/^[0-9a-tA-T]*$/,/^[0-9a-uA-U]*$/,/^[0-9a-vA-V]*$/,/^[0-9a-wA-W]*$/,
/^[0-9a-xA-X]*$/,/^[0-9a-yA-Y]*$/,/^[0-9a-zA-Z]*$/];c.parse=function(a,f){function e(a){a=a.replace(/\s*[*xX]\s*10\s*(\^|\*\*)\s*/,"e");return a.replace(/^([+\-])?(\d+)\.?(\d*)[eE]([+\-]?\d+)$/,function(a,c,b,d,f){f=+f;var e=0>f,h=b.length+f;a=(e?b:d).length;f=(f=Math.abs(f))>=a?f-a+e:0;a=Array(f+1).join("0");b+=d;return(c||"")+(e?b=a+b:b+=a).substr(0,h+=e?a.length:0)+(h<b.length?"."+b.substr(h):"")})}a=a.toString();if("undefined"===typeof f||10===+f)a=e(a);var h=RegExp("^([+\\-]?)("+("undefined"===
typeof f?"0[xcb]":16==f?"0x":8==f?"0c":2==f?"0b":"")+")?([0-9a-z]*)(?:\\.\\d*)?$","i").exec(a);if(h){var k=h[1]||"+",g=h[2]||"",h=h[3]||"";if("undefined"===typeof f)f="0x"===g||"0X"===g?16:"0c"===g||"0C"===g?8:"0b"===g||"0B"===g?2:10;else if(2>f||36<f)throw Error("Illegal radix "+f+".");f=+f;if(!c.radixRegex[f].test(h))throw Error("Bad digit for radix "+f);h=h.replace(/^0+/,"").split("");if(0===h.length)return d;k="-"===k?-1:1;if(10==f){for(g=[];7<=h.length;)g.push(parseInt(h.splice(h.length-c.base_log10,
c.base_log10).join(""),10));g.push(parseInt(h.join(""),10));return new c(g,k,b)}g=d;f=c.small[f];for(var n=c.small,p=0;p<h.length;p++)g=g.multiply(f).add(n[parseInt(h[p],36)]);return new c(g._d,k,b)}throw Error("Invalid BigInteger format: "+a);};c.prototype.add=function(a){if(0===this._s)return c(a);a=c(a);if(0===a._s)return this;if(this._s!==a._s)return a=a.negate(),this.subtract(a);var d=this._d;a=a._d;for(var f=d.length,e=a.length,h=Array(Math.max(f,e)+1),k=Math.min(f,e),g=0,n=0;n<k;n++)g=d[n]+
a[n]+g,h[n]=g%1E7,g=g/1E7|0;e>f&&(d=a,f=e);for(n=k;g&&n<f;n++)g=d[n]+g,h[n]=g%1E7,g=g/1E7|0;for(g&&(h[n]=g);n<f;n++)h[n]=d[n];return new c(h,this._s,b)};c.prototype.negate=function(){return new c(this._d,-this._s|0,b)};c.prototype.abs=function(){return 0>this._s?this.negate():this};c.prototype.subtract=function(a){if(0===this._s)return c(a).negate();a=c(a);if(0===a._s)return this;if(this._s!==a._s)return a=a.negate(),this.add(a);var f=this;0>this._s&&(f=new c(a._d,1,b),a=new c(this._d,1,b));var e=
f.compareAbs(a);if(0===e)return d;if(0>e){var h=a;a=f;f=h}f=f._d;a=a._d;var h=f.length,k=a.length,g=Array(h),n=0,p,y;for(p=0;p<k;p++)y=f[p]-n-a[p],0>y?(y+=1E7,n=1):n=0,g[p]=y;for(p=k;p<h;p++){y=f[p]-n;if(0>y)y+=1E7;else{g[p++]=y;break}g[p]=y}for(;p<h;p++)g[p]=f[p];return new c(g,e,b)};(function(){function a(d,f){for(var e=d._d,h=e.slice(),k=0;;){var g=(e[k]||0)+1;h[k]=g%1E7;if(9999999>=g)break;++k}return new c(h,f,b)}function d(a,f){for(var e=a._d,h=e.slice(),k=0;;){var g=(e[k]||0)-1;if(0>g)h[k]=
g+1E7;else{h[k]=g;break}++k}return new c(h,f,b)}c.prototype.next=function(){switch(this._s){case 0:return f;case -1:return d(this,-1);default:return a(this,1)}};c.prototype.prev=function(){switch(this._s){case 0:return e;case -1:return a(this,-1);default:return d(this,1)}}})();c.prototype.compareAbs=function(a){if(this===a)return 0;if(!(a instanceof c)){if(!isFinite(a))return isNaN(a)?a:-1;a=c(a)}if(0===this._s)return 0!==a._s?-1:0;if(0===a._s)return 1;var b=this._d.length,d=a._d.length;if(b<d)return-1;
if(b>d)return 1;d=this._d;a=a._d;for(--b;0<=b;b--)if(d[b]!==a[b])return d[b]<a[b]?-1:1;return 0};c.prototype.compare=function(a){if(this===a)return 0;a=c(a);return 0===this._s?-a._s:this._s===a._s?this.compareAbs(a)*this._s:this._s};c.prototype.isUnit=function(){return this===f||this===e||1===this._d.length&&1===this._d[0]};c.prototype.multiply=function(a){if(0===this._s)return d;a=c(a);if(0===a._s)return d;if(this.isUnit())return 0>this._s?a.negate():a;if(a.isUnit())return 0>a._s?this.negate():this;
if(this===a)return this.square();var f=this._d.length>=a._d.length,e=(f?this:a)._d,f=(f?a:this)._d,h=e.length,k=f.length,g=h+k,n=Array(g),p;for(p=0;p<g;p++)n[p]=0;for(p=0;p<k;p++){for(var g=0,y=f[p],l=h+p,q,r=p;r<l;r++)q=n[r]+y*e[r-p]+g,g=q/1E7|0,n[r]=q%1E7|0;g&&(q=n[r]+g,n[r]=q%1E7)}return new c(n,this._s*a._s,b)};c.prototype.multiplySingleDigit=function(a){if(0===a||0===this._s)return d;if(1===a)return this;var f;if(1===this._d.length)return f=this._d[0]*a,1E7<=f?new c([f%1E7|0,f/1E7|0],1,b):new c([f],
1,b);if(2===a)return this.add(this);if(this.isUnit())return new c([a],1,b);var e=this._d,h=e.length;f=h+1;for(var g=Array(f),k=0;k<f;k++)g[k]=0;for(var n=k=0;n<h;n++)f=a*e[n]+k,k=f/1E7|0,g[n]=f%1E7|0;k&&(g[n]=k);return new c(g,1,b)};c.prototype.square=function(){if(0===this._s)return d;if(this.isUnit())return f;var a=this._d,e=a.length,h=Array(e+e+1),k,g,n,p;for(p=0;p<e;p++)n=2*p,k=a[p]*a[p],g=k/1E7|0,h[n]=k%1E7,h[n+1]=g;for(p=0;p<e;p++){g=0;n=2*p+1;for(var l=p+1;l<e;l++,n++)k=a[l]*a[p]*2+h[n]+g,
g=k/1E7|0,h[n]=k%1E7;n=e+p;k=g+h[n];g=k/1E7|0;h[n]=k%1E7;h[n+1]+=g}return new c(h,1,b)};c.prototype.quotient=function(a){return this.divRem(a)[0]};c.prototype.divide=c.prototype.quotient;c.prototype.remainder=function(a){return this.divRem(a)[1]};c.prototype.divRem=function(a){a=c(a);if(0===a._s)throw Error("Divide by zero");if(0===this._s)return[d,d];if(1===a._d.length)return this.divRemSmall(a._s*a._d[0]);switch(this.compareAbs(a)){case 0:return[this._s===a._s?f:e,d];case -1:return[d,this]}var h=
this._s*a._s,k=a.abs(),g=this._d,n=g.length,p=[],l,q=new c([],0,b);for(q._s=1;n;)if(q._d.unshift(g[--n]),0>q.compareAbs(a))p.push(0);else{if(0===q._s)l=0;else{var r=q._d.length;l=k._d.length;r=1E7*q._d[r-1]+q._d[r-2];l=1E7*k._d[l-1]+k._d[l-2];q._d.length>k._d.length&&(r=1E7*(r+1));l=Math.ceil(r/l)}do{r=k.multiplySingleDigit(l);if(0>=r.compareAbs(q))break;l--}while(l);p.push(l);l&&(l=q.subtract(r),q._d=l._d.slice(),0===q._d.length&&(q._s=0))}return[new c(p.reverse(),h,b),new c(q._d,this._s,b)]};c.prototype.divRemSmall=
function(a){a=+a;if(0===a)throw Error("Divide by zero");var f=this._s*(0>a?-1:1);a=Math.abs(a);if(1>a||1E7<=a)throw Error("Argument out of range");if(0===this._s)return[d,d];if(1===a||-1===a)return[1===f?this.abs():new c(this._d,f,b),d];if(1===this._d.length){var e=new c([this._d[0]/a|0],1,b);a=new c([this._d[0]%a|0],1,b);0>f&&(e=e.negate());0>this._s&&(a=a.negate());return[e,a]}for(var h=this._d.slice(),e=Array(h.length),k=0,g=0,n=0,p;h.length;)k=1E7*k+h[h.length-1],k<a?(e[n++]=0,h.pop(),g=1E7*g+
k):(p=0===k?0:k/a|0,g=k-a*p,(e[n++]=p)?(h.pop(),k=g):h.pop());a=new c([g],1,b);0>this._s&&(a=a.negate());return[new c(e.reverse(),f,b),a]};c.prototype.isEven=function(){var a=this._d;return 0===this._s||0===a.length||0===a[0]%2};c.prototype.isOdd=function(){return!this.isEven()};c.prototype.sign=function(){return this._s};c.prototype.isPositive=function(){return 0<this._s};c.prototype.isNegative=function(){return 0>this._s};c.prototype.isZero=function(){return 0===this._s};c.prototype.exp10=function(a){a=
+a;if(0===a)return this;if(Math.abs(a)>Number(h))throw Error("exponent too large in BigInteger.exp10");if(0<a){for(var f=new c(this._d.slice(),this._s,b);7<=a;a-=7)f._d.unshift(0);if(0==a)return f;f._s=1;f=f.multiplySingleDigit(Math.pow(10,a));return 0>this._s?f.negate():f}if(-a>=7*this._d.length)return d;f=new c(this._d.slice(),this._s,b);for(a=-a;7<=a;a-=7)f._d.shift();return 0==a?f:f.divRemSmall(Math.pow(10,a))[0]};c.prototype.pow=function(a){if(this.isUnit())return 0<this._s?this:c(a).isOdd()?
this:this.negate();a=c(a);if(0===a._s)return f;if(0>a._s){if(0===this._s)throw Error("Divide by zero");return d}if(0===this._s)return d;if(a.isUnit())return this;if(0<a.compareAbs(h))throw Error("exponent too large in BigInteger.pow");for(var b=this,e=f,k=c.small[2];a.isPositive()&&(!a.isOdd()||(e=e.multiply(b),!a.isUnit()));)b=b.square(),a=a.quotient(k);return e};c.prototype.modPow=function(a,b){for(var d=f,e=this;a.isPositive();)a.isOdd()&&(d=d.multiply(e).remainder(b)),a=a.quotient(c.small[2]),
a.isPositive()&&(e=e.square().remainder(b));return d};c.prototype.log=function(){switch(this._s){case 0:return-Infinity;case -1:return NaN}var a=this._d.length;if(30>7*a)return Math.log(this.valueOf());var d=Math.ceil(30/7),f=this._d.slice(a-d);return Math.log((new c(f,1,b)).valueOf())+(a-d)*Math.log(1E7)};c.prototype.valueOf=function(){return parseInt(this.toString(),10)};c.prototype.toJSValue=function(){return parseInt(this.toString(),10)};var h=c(2147483647);c.MAX_EXP=h;(function(){function a(b){return function(a){return b.call(c(a))}}
function b(a){return function(b,d){return a.call(c(b),c(d))}}function d(a){return function(b,d,f){return a.call(c(b),c(d),c(f))}}(function(){var f,e,h="toJSValue isEven isOdd sign isZero isNegative abs isUnit square negate isPositive toString next prev log".split(" "),k="compare remainder divRem subtract add quotient divide multiply pow compareAbs".split(" "),g=["modPow"];for(f=0;f<h.length;f++)e=h[f],c[e]=a(c.prototype[e]);for(f=0;f<k.length;f++)e=k[f],c[e]=b(c.prototype[e]);for(f=0;f<g.length;f++)e=
g[f],c[e]=d(c.prototype[e]);c.exp10=function(a,b){return c(a).exp10(b)}})()})();a.BigInteger=c})("undefined"!==typeof e?e:this);var g={greatest_common_divisor:function(a,c){if(c.isUnit()||a.isUnit())return BigInteger.ONE;for(var b;!c.isZero();)b=c,c=a.remainder(c),a=b;return a},create:function(){return[0]},clone:function(a){for(var c=[],b=0,d=a.length;b<d;b++)c[b]=a[b];return c},copy:function(a,c){a=[];for(var b=0,d=c.length;b<d;b++)a[b]=c[b];return a},abs:function(a,c){a[0]=Math.abs(c[0]);return a},
str:function(a){return a[0].toString()},toInteger:function(a){return out[0]},fromInteger:function(a){return[parseInt(a)]}};g.ZERO=g.fromInteger(0);g.ONE=g.fromInteger(1);"undefined"!==typeof e&&(e.bigint=g);if(!n)var n=Array;if(!k)var k=Math.pow(2,56);if(!l)var l=16777216;var h={EPSILON:2E-16};h.MAX_LOOPS=l;h.create=function(){var a=new n(2);a[0]=0;a[1]=1;return a};h.clone=function(a){var c=new n(2);c[0]=a[0];c[1]=a[1];return c};h.fromValues=function(a,c){var b=new n(2);b[0]=a;b[1]=c;return h.normalize(b,
b)};h.copy=function(a,c){a[0]=c[0];a[1]=c[1];return a};h.set=function(a,c,b){a[0]=c;a[1]=b;return h.normalize(a,a)};h.abs=function(a,c){a[0]=Math.abs(c[0]);a[1]=c[1];return a};h.invert=function(a,c){var b=c[0];a[0]=c[1];a[1]=b;return a};h.reciprocal=h.invert;h.add=function(a,c,b){c[1]===b[1]?(a[0]=c[0]+b[0],a[1]=c[1]):(a[0]=c[0]*b[1]+b[0]*c[1],a[1]=c[1]*b[1]);return h.normalize(a,a)};h.subtract=function(a,c,b){c[1]===b[1]?(a[0]=c[0]-b[0],a[1]=c[1]):(a[0]=c[0]*b[1]-b[0]*c[1],a[1]=c[1]*b[1]);return h.normalize(a,
a)};h.sub=h.subtract;h.multiply=function(a,c,b){a[0]=c[0]*b[0];a[1]=c[1]*b[1];return h.normalize(a,a)};h.mul=h.multiply;h.mediant=function(a,c,b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];return h.normalize(a,a)};h.divide=function(a,c,b){a[0]=c[0]*b[1];a[1]=c[1]*b[0];return h.normalize(a,a)};h.div=h.divide;h.equals=function(a,c){return 0===a[0]&&0===c[0]||0===a[1]&&0===c[1]?!0:a[0]===c[0]&&a[1]===c[1]};h.approximates=function(a,c){if(h.equals(a,c))return!0;var b=h.create();h.sub(b,a,c);h.abs(b,b);return h.isLessThan(b,
h.INFINITESIMAL)};h.isGreaterThan=function(a,c){return h.equals(a,c)?!1:a[0]*c[1]>c[0]*a[1]};h.isLessThan=function(a,c){return h.equals(a,c)?!1:a[0]*c[1]<c[0]*a[1]};h.isNegative=function(a){return 0>a[0]};h.min=function(a,c,b){h.isLessThan(c,b)?(a[0]=c[0],a[1]=c[1]):(a[0]=b[0],a[1]=b[1]);return a};h.max=function(a,c,b){h.isGreaterThan(c,b)?(a[0]=c[0],a[1]=c[1]):(a[0]=b[0],a[1]=b[1]);return a};h.scalar_multiply=function(a,c,b){a[0]=c[0]*b;a[1]=c[1];return h.normalize(a,a)};h.scalar_divide=function(a,
c,b){a[0]=c[0];a[1]=c[1]*b;return h.normalize(a,a)};h.normalize=function(a,c){if(isNaN(c[0])||isNaN(c[1])||0===c[0]&&0===c[1])return a[0]=0,a[1]=0,a;if(0===c[0])return a[0]=0,a[1]=1,a;if(0===c[1])return a[0]=1,a[1]=0,a;if(c[0]===c[1])return a[0]=1,a[1]=1,a;0<c[1]?(a[0]=c[0],a[1]=c[1]):(a[0]=-c[0],a[1]=-c[1]);var b=d.greatest_common_divisor(Math.abs(a[0]),a[1]);1<b&&(a[0]/=b,a[1]/=b);return a};h.opposite=function(a,c){a[0]=-c[0];a[1]=c[1];return a};h.negative=h.opposite;h.neg=h.opposite;h.power=function(a,
c,b){2===b?(a[0]=c[0]*c[0],a[1]=c[1]*c[1]):0<b?(a[0]=Math.pow(c[0],b),a[1]=Math.pow(c[1],b)):0>b?(b=Math.abs(b),a[0]=Math.pow(c[1],b),a[1]=Math.pow(c[0],b)):h.copy(a,h.ONE);return h.normalize(a,a)};h.pow=h.power;h.sqrt=function(a,c){return h.nthRoot(a,c,2)};h.nthRoot=function(a,c,b){if(h.equals(c,h.ZERO))return h.copy(a,h.ZERO);if(h.equals(c,h.ONE))return h.copy(a,h.ONE);if(h.equals(c,h.INFINITY))return h.copy(a,h.INFINITY);if(h.equals(c,h.INFINULL))return h.copy(a,h.INFINULL);var d=h.isNegative(c);
d&&(c[0]=-c[0]);a=h.copy(a,h.ONE);for(var f=[1,0,0,1],e=h.clone(h.ONE),k=h.MAX_LOOPS;!h.approximates(c,e)&&k--;)h.isLessThan(c,e)?(f[0]+=f[1],f[2]+=f[3]):(f[1]+=f[0],f[3]+=f[2]),a[0]=f[0]+f[1],a[1]=f[2]+f[3],h.pow(e,a,b);d&&(c[0]=-c[0],1===b%2&&h.neg(a,a));return a};h.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]};h.str=function(a){return 1===a[1]?a[0].toString():a[0]+"/"+a[1]};h.toDecimal=function(a){return a[0]/a[1]};h.dec=h.toDecimal;h.toInteger=function(a){return Math.round(h.toDecimal(a))};h.round=
h.toInteger;h.floor=function(a){return Math.floor(h.toDecimal(a))};h.ceil=function(a){return Math.ceil(h.toDecimal(a))};h.fromInteger_copy=function(a,c){a[0]=parseInt(c);a[1]=1;return a};h.fromInteger=function(a){return h.fromInteger_copy(h.create(),a)};h.fromIntegerInverse_copy=function(a,c){a[0]=1;a[1]=parseInt(c);0>a[1]&&(a[0]=-a[0],a[1]=-a[1]);return a};h.fromIntegerInverse=function(a){return h.fromIntegerInverse_copy(h.create(),a)};h.fromDecimal=function(a){return h.fromDecimal_copy(h.create(),
a)};h.fromDecimal_copy=function(a,c){c=parseFloat(c);if(isNaN(c))return h.copy(a,h.INFINULL);if(Infinity===c)return h.copy(a,h.INFINITY);if(Math.abs(c)<h.EPSILON)return h.copy(a,h.ZERO);if(Math.abs(c-1)<h.EPSILON)return h.copy(a,h.ONE);if(Math.abs(c%1)<h.EPSILON)return h.fromInteger_copy(a,c);if(Math.abs(1/c%1)<h.EPSILON)return h.fromIntegerInverse_copy(a,Math.round(1/c));h.copy(a,h.ONE);for(var b=[1,0,0,1],f=c,d=1,e=h.MAX_LOOPS;e--&&Math.abs(c-h.toDecimal(a))>h.EPSILON;)d=Math.floor(f),a[0]=d*b[0]+
b[2],a[1]=d*b[1]+b[3],f=1/(f-d),b[2]=b[0],b[3]=b[1],b[0]=a[0],b[1]=a[1];return a};h.fromRandom=function(a){a[0]=0xfffffffffffff*Math.random()<<0;a[1]=Math.abs(0xfffffffffffff*Math.random()<<0);return h.normalize(a,a)};h.sin=function(a,c){if(0===c[1])return h.copy(a,h.ZERO);h.scalar_multiply(a,c,2);var b=h.create();h.pow(b,c,2);h.add(b,b,h.ONE);h.divide(a,a,b);return a};h.cos=function(a,c){if(0===c[1])return h.neg(a,h.ONE);var b=h.create();h.pow(b,c,2);h.sub(a,h.ONE,b);var f=h.create();h.add(f,h.ONE,
b);h.divide(a,a,f);return a};h.tan=function(a,c){h.scalar_multiply(a,c,2);var b=h.create();h.pow(b,c,2);h.scalar_multiply(b,b,2);h.add(a,a,b);h.pow(b,c,4);h.sub(b,h.ONE,b);h.divide(a,a,b);return a};h.toEgyptian=function(a){a=h.clone(a);h.abs(a,a);var c=h.floor(a);c&&h.sub(a,a,h.fromInteger(c));if(!a[0])return c.toString();c||(c="");for(var b=1,f=h.create();1!==a[0];)b++,f=h.fromValues(1,b),h.isGreaterThan(a,f)&&(c&&(c+=" + "),c+=h.str(f),h.sub(a,a,f));return a?c?c+" + "+h.str(a):h.str(a):c?c:"0"};
h.toBabylonian=function(a){var c="",b=h.toDecimal(a);a=parseInt(b);for(var b=b-a,f=0,d=0;0<a;)(f=a%60)&&(c=f+" * 60^"+d+(c?" + ":"")+c),a=(a-f)/60,d++;for(d=-1;0<b;)b*=60,f=parseInt(b+1E-13),b-=f,-1E-13>b||(f&&(c+=(c?" + ":"")+f+" * 60^"+d),d--);return c?c:"0"};h.traceSternBrocot=function(a){var c="";if(h.equals(a,h.ZERO)||h.equals(a,h.ONE)||h.equals(a,h.INFINITY)||h.equals(a,h.INFINULL))return c;if(h.equals(a,h.ZERO))return h.copy(out,h.ZERO);if(h.equals(a,h.ONE))return h.copy(out,h.ONE);if(h.equals(a,
h.INFINITY))return h.copy(out,h.INFINITY);if(h.equals(a,h.INFINULL))return h.copy(out,h.INFINULL);a=h.clone(a);h.isNegative(a)&&(a[0]=-a[0]);for(var b=h.clone(h.ONE),f=[1,0,0,1],d=0,e=0,k=h.MAX_LOOPS;!h.approximates(a,b)&&k--;)h.isLessThan(a,b)?(f[0]+=f[1],f[2]+=f[3],e++,d&&(c+="R",1!==d&&(c+=d),d=0,c+=" ")):(f[1]+=f[0],f[3]+=f[2],d++,e&&(c+="L",1!==e&&(c+=e),e=0,c+=" ")),b[0]=f[0]+f[1],b[1]=f[2]+f[3];e?(c+="L",1!==e&&(c+=e)):d&&(c+="R",1!==d&&(c+=d));0>k&&(c+="...");return c};h.toContinuedFraction=
function(a,c){c="undefined"===typeof c?65536:parseInt(c);if(h.equals(a,h.ZERO))return[0];if(h.equals(a,h.ONE))return[1];if(h.equals(a,h.NEGONE))return[-1];if(h.equals(a,h.INFINITY))return[1,0];if(h.equals(a,h.INFINULL))return[0,0];var b=h.clone(a),f=h.isNegative(b);f&&(b[0]=-b[0]);for(var d=h.clone(h.ONE),e=[1,0,0,1],k=1,g=[0],n=g.length-1;!h.equals(b,d)&&c--;)h.isLessThan(b,d)?(-1===k?g[n]++:(k=-1,g.push(1),n++),e[0]+=e[1],e[2]+=e[3]):(1===k?g[n]++:(k=1,g.push(1),n++),e[1]+=e[0],e[3]+=e[2]),d[0]=
e[0]+e[1],d[1]=e[2]+e[3];0>c?g.push(0):g[n]++;if(f)for(var p in g)g[p]=-g[p];return g};h.fromContinuedFraction=function(a,c){h.fromInteger_copy(a,c[c.length-1]);for(var b=c.length-2;-1<b;b--)h.invert(a,a),h.add(a,h.fromInteger(c[b]),a);return a};h.dump=function(a){h.create();return"rat\t"+h.str(a)+"\n~\t"+h.toDecimal(a)+"\nCF:\t["+h.toContinuedFraction(a)+"]\n"};h.ZERO=h.fromInteger(0);h.ONE=h.fromInteger(1);h.NEGONE=h.fromInteger(-1);h.INFINITY=h.fromValues(1,0);h.INFINULL=h.fromValues(0,0);h.INFINITESIMAL=
h.clone([1,k]);h.PI=h.fromValues(1320192667429,420230377710);"undefined"!==typeof e&&(e.rat=h);if(!q)var q=new BigInteger("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");if(!t)var t=1073741824;var b={EPSILON:2E-16};b.MAX_LOOPS=t;b.create=function(){var a=[];a[0]=BigInteger.ZERO;a[1]=BigInteger.ONE;return a};b.clone=function(a){var c=[];c[0]=a[0];c[1]=a[1];return c};b.fromValues=function(a,c){var f=[];f[0]=new BigInteger(a);f[1]=new BigInteger(c);return b.normalize(f,f)};b.copy=function(a,c){a[0]=c[0];a[1]=
c[1];return a};b.set=function(a,c,f){a[0]=c;a[1]=f;return b.normalize(a,a)};b.toRat=function(a,c){return h.set(a,c[0].toJSValue(),c[1].toJSValue())};b.fromRat=function(a,c){return b.set(a,BigInteger(c[0]),BigInteger(c[1]))};b.abs=function(a,c){a[0]=c[0].abs();a[1]=c[1];return a};b.invert=function(a,c){var b=c[0];a[0]=c[1];a[1]=b;return a};b.reciprocal=b.invert;b.add=function(a,c,f){0===c[1].compare(f[1])?(a[0]=c[0].add(f[0]),a[1]=c[1]):(a[0]=c[0].multiply(f[1]).add(f[0].multiply(c[1])),a[1]=c[1].multiply(f[1]));
return b.normalize(a,a)};b.subtract=function(a,c,f){0===c[1].compare(f[1])?(a[0]=c[0].subtract(f[0]),a[1]=c[1]):(a[0]=c[0].multiply(f[1]).subtract(f[0].multiply(c[1])),a[1]=c[1].multiply(f[1]));return b.normalize(a,a)};b.sub=b.subtract;b.multiply=function(a,c,f){a[0]=c[0].multiply(f[0]);a[1]=c[1].multiply(f[1]);return b.normalize(a,a)};b.mul=b.multiply;b.mediant=function(a,c,f){a[0]=c[0].add(f[0]);a[1]=c[1].add(f[1]);return b.normalize(a,a)};b.divide=function(a,c,f){a[0]=c[0].multiply(f[1]);a[1]=
c[1].multiply(f[0]);return b.normalize(a,a)};b.div=b.divide;b.equals=function(a,c){return a[0].isZero()&&c[0].isZero()||a[1].isZero()&&c[1].isZero()?!0:0===a[0].compare(c[0])&&0===a[1].compare(c[1])};b.approximates=function(a,c){if(b.equals(a,c))return!0;var f=b.create();b.sub(f,a,c);b.abs(f,f);return b.isLessThan(f,b.INFINITESIMAL)};b.isGreaterThan=function(a,c){return b.equals(a,c)?!1:0<a[0].multiply(c[1]).compare(c[0].multiply(a[1]))};b.isLessThan=function(a,c){return b.equals(a,c)?!1:0>a[0].multiply(c[1]).compare(c[0].multiply(a[1]))};
b.isNegative=function(a){return a[0].isNegative()};b.min=function(a,c,f){b.isLessThan(c,f)?(a[0]=c[0],a[1]=c[1]):(a[0]=f[0],a[1]=f[1]);return a};b.max=function(a,c,f){b.isGreaterThan(c,f)?(a[0]=c[0],a[1]=c[1]):(a[0]=f[0],a[1]=f[1]);return a};b.scalar_multiply=function(a,c,f){a[0]=c[0].multiply(f);a[1]=c[1];return b.normalize(a,a)};b.scalar_divide=function(a,c,f){a[0]=c[0];a[1]=c[1].multiply(f);return b.normalize(a,a)};b.normalize=function(a,c){if(c[0].isZero()||c[1].isZero())return c;if(0===c[0].compare(c[1]))return b.clone(b.ONE);
if(c[1].isNegative())a[0]=c[0].negate(),a[1]=c[1].negate();else if(a[0]=c[0],a[1]=c[1],a[1].isZero())return a;var f=g.greatest_common_divisor(a[0].abs(),a[1]);0<f.compare(BigInteger.ONE)&&(a[0]=a[0].quotient(f),a[1]=a[1].quotient(f));return a};b.opposite=function(a,c){a[0]=c[0].negate();a[1]=c[1];return a};b.negative=b.opposite;b.neg=b.opposite;b.power=function(a,c,f){2===f?(a[0]=c[0].square(),a[1]=c[1].square()):0<f?(a[0]=c[0].pow(f),a[1]=c[1].pow(f)):0>f?(f=Math.abs(f),a[0]=c[1].pow(f),a[1]=c[0].pow(f)):
b.copy(a,b.ONE);return a};b.pow=b.power;b.sqrt=function(a,c){return b.nthRoot(a,c,2)};b.nthRoot=function(a,c,f){if(b.equals(c,b.ZERO))return b.copy(a,b.ZERO);if(b.equals(c,b.ONE))return b.copy(a,b.ONE);if(b.equals(c,b.INFINITY))return b.copy(a,b.INFINITY);if(b.equals(c,b.INFINULL))return b.copy(a,b.INFINULL);var d=b.isNegative(c);d&&(c[0]=c[0].negate());b.copy(a,b.ONE);for(var e=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],h=b.clone(b.ONE),k=t;!b.approximates(c,h)&&k--;)b.isLessThan(c,
h)?(e[0]=e[0].add(e[1]),e[2]=e[2].add(e[3])):(e[1]=e[1].add(e[0]),e[3]=e[3].add(e[2])),a[0]=e[0].add(e[1]),a[1]=e[2].add(e[3]),b.pow(h,a,f);d&&(c[0]=c[0].negate(),1===f%2&&b.neg(a,a));return a};b.dot=function(a,c){return a[0].multiply(c[0]).add(a[1].multiply(c[1]))};b.str=function(a){return 0===a[1].compare(BigInteger.ONE)?a[0].toString():a[0].toString()+"/"+a[1].toString()};b.toDecimal=function(a){return a[0].toJSValue()/a[1].toJSValue()};b.dec=b.toDecimal;b.toInteger=function(a){return a[0].quotient(a[1]).toJSValue()};
b.round=b.toInteger;b.toBigInteger=function(a){return a[0].quotient(a[1])};b.floor=function(a){return Math.floor(b.toDecimal(a))};b.ceil=function(a){return Math.ceil(b.toDecimal(a))};b.fromInteger_copy=function(a,c){a[0]=BigInteger(c);a[1]=BigInteger.ONE;return a};b.fromInteger=function(a){return b.fromInteger_copy(b.create(),a)};b.fromIntegerInverse_copy=function(a,c){a[0]=BigInteger.ONE;a[1]=BigInteger(c);a[1].isNegative()&&(a[0]=a[0].negate(),a[1]=a[1].negate());return a};b.fromIntegerInverse=
function(a){return b.fromIntegerInverse_copy(b.create(),a)};b.fromDecimal=function(a){return b.fromDecimal_copy(b.create(),a)};b.fromDecimal_copy=function(a,c){c=parseFloat(c);if(isNaN(c))return b.copy(a,b.INFINULL);if(Infinity===c)return b.copy(a,b.INFINITY);if(Math.abs(c)<b.EPSILON)return b.copy(a,b.ZERO);if(Math.abs(c-1)<b.EPSILON)return b.copy(a,b.ONE);if(Math.abs(c%1)<b.EPSILON)return b.fromInteger_copy(a,c);if(Math.abs(1/c%1)<b.EPSILON)return b.fromIntegerInverse_copy(a,Math.round(1/c));b.copy(a,
b.ONE);for(var f=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],d=c,e=1,h=b.MAX_LOOPS;h--&&Math.abs(c-b.toDecimal(a))>b.EPSILON;)e=Math.floor(d),a[0]=BigInteger(e*f[0]+f[2]),a[1]=BigInteger(e*f[1]+f[3]),d=1/(d-e),f[2]=f[0],f[3]=f[1],f[0]=a[0],f[1]=a[1];return a};b.fromRandom=function(a){a[0]=BigInteger(0xfffffffffffff*Math.random()<<0);a[1]=BigInteger(Math.abs(0xfffffffffffff*Math.random()<<0));return b.normalize(a,a)};b.sin=function(a,c){if(c[1].isZero())return b.copy(a,b.ZERO);b.scalar_multiply(a,
c,2);var f=b.create();b.pow(f,c,2);b.add(f,f,b.ONE);b.divide(a,a,f);return a};b.cos=function(a,c){if(c[1].isZero())return b.neg(a,b.ONE);var f=b.create();b.pow(f,c,2);b.sub(a,b.ONE,f);var d=b.create();b.add(d,b.ONE,f);b.divide(a,a,d);return a};b.tan=function(a,c){b.scalar_multiply(a,c,2);var f=b.create();b.pow(f,c,2);b.scalar_multiply(f,f,2);b.add(a,a,f);b.pow(f,c,4);b.sub(f,b.ONE,f);b.divide(a,a,f);return a};b.toEgyptian=function(a){a=b.clone(a);b.abs(a,a);var c=b.floor(a);c&&b.sub(a,a,b.fromInteger(c));
if(!a[0])return c.toString();c||(c="");for(var f=1,d=b.create();1!==a[0];)f++,d=b.fromValues(1,f),b.isGreaterThan(a,d)&&(c&&(c+=" + "),c+=b.str(d),b.sub(a,a,d));return a?c?c+" + "+b.str(a):b.str(a):c?c:"0"};b.toBabylonian=function(a){var c="",f=b.toDecimal(a);a=parseInt(f);for(var f=f-a,d=0,e=0;0<a;)(d=a%60)&&(c=d+" * 60^"+e+(c?" + ":"")+c),a=(a-d)/60,e++;for(e=-1;0<f;)f*=60,d=parseInt(f+1E-13),f-=d,-1E-13>f||(d&&(c+=(c?" + ":"")+d+" * 60^"+e),e--);return c?c:"0"};b.traceSternBrocot=function(a){var c=
"";if(b.equals(a,b.ZERO)||b.equals(a,b.ONE)||b.equals(a,b.INFINITY)||b.equals(a,b.INFINULL))return c;a=b.clone(a);b.isNegative(a)&&(a[0]=a[0].negate());for(var f=b.clone(b.ONE),d=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],e=0,h=0,k=65536;!b.equals(a,f)&&k--;)b.isLessThan(a,f)?(d[0]=d[0].add(d[1]),d[2]=d[2].add(d[3]),h++,e&&(c+="R",1!==e&&(c+=e),e=0,c+=" ")):(d[1]=d[1].add(d[0]),d[3]=d[3].add(d[2]),e++,h&&(c+="L",1!==h&&(c+=h),h=0,c+=" ")),f[0]=d[0].add(d[1]),f[1]=d[2].add(d[3]);h?(c+=
"L",1!==h&&(c+=h)):e&&(c+="R",1!==e&&(c+=e));0>k&&(c+="...");return c};b.toContinuedFraction=function(a,c){c="undefined"===typeof c?65536:parseInt(c);if(b.equals(a,b.ZERO))return[0];if(b.equals(a,b.ONE))return[1];if(b.equals(a,b.NEGONE))return[-1];if(b.equals(a,b.INFINITY))return[1,0];if(b.equals(a,b.INFINULL))return[0,0];var f=b.clone(a),d=b.isNegative(f);d&&(f[0]=f[0].negate());for(var e=b.clone(b.ONE),h=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],k=1,g=[0],n=g.length-1;!b.equals(f,
e)&&c--;)b.isLessThan(f,e)?(-1===k?g[n]++:(k=-1,g.push(1),n++),h[0]=h[0].add(h[1]),h[2]=h[2].add(h[3])):(1===k?g[n]++:(k=1,g.push(1),n++),h[1]=h[1].add(h[0]),h[3]=h[3].add(h[2])),e[0]=h[0].add(h[1]),e[1]=h[2].add(h[3]);0>c?g.push(0):g[n]++;if(d)for(var p in g)g[p]=-g[p];return g};b.fromContinuedFraction=function(a,c){b.fromInteger_copy(a,c[c.length-1]);for(var f=c.length-2;-1<f;f--)b.invert(a,a),b.add(a,b.fromInteger(c[f]),a);return a};b.fromFactorial=function(a,c){if("undefined"!==typeof factorial.PREPARED[c])return b.fromInteger_copy(a,
factorial.PREPARED[c]);var f=factorial.PREPARED.length-1;for(b.fromInteger_copy(a,factorial.PREPARED[f]);f<c;)b.scalar_multiply(a,a,++f);return a};b.dump=function(a){return"bigrat\t"+b.str(a)+"\n~\t"+b.toDecimal(a)+"\nCF:\t["+b.toContinuedFraction(a)+"]\n"};b.ZERO=b.fromInteger(0);b.ONE=b.fromInteger(1);b.NEGONE=b.fromInteger(-1);b.INFINITY=b.fromValues(1,0);b.INFINULL=b.fromValues(0,0);b.INFINITESIMAL=b.clone([new BigInteger(1),q]);b.PI=b.fromValues("3141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481117450284102701938521105559644622948954930381964428810975665933446128475648233786783165271201909145648566923460348610454326648213393607260249141273724587",
"1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");"undefined"!==typeof e&&(e.bigrat=b);var f=function(a,c){this.a=h.fromValues(parseInt(a),parseInt(c))};f.prototype.toString=function(){return h.str(this.a)};f.prototype.toContinuedFraction=function(a){return h.toContinuedFraction(this.a,
a)};f.prototype.invert=function(){return h.invert(this.a)};f.prototype.reciprocal=f.prototype.invert;f.prototype.add=function(a){var c=h.create();h.add(c,this.a,a.a);return new f(c[0],c[1])};f.prototype.plus=f.prototype.add;f.prototype.subtract=function(a){var c=h.create();h.sub(c,this.a,a.a);return new f(c[0],c[1])};f.prototype.sub=f.prototype.subtract;f.prototype.minus=f.prototype.subtract;f.prototype.multiply=function(a){var c=h.create();h.mul(c,this.a,a.a);return new f(c[0],c[1])};f.prototype.mul=
f.prototype.multiply;f.prototype.times=f.prototype.multiply;f.prototype.mediant=function(a){var c=h.create();h.mediant(c,this.a,a.a);return new f(c[0],c[1])};f.prototype.divide=function(a){var c=h.create();h.div(c,this.a,a.a);return new f(c[0],c[1])};f.prototype.div=f.prototype.divide;f.prototype.divided_by=f.prototype.divide;f.prototype.power=function(a){var c=h.create();h.pow(c,this.a,a);return new f(c[0],c[1])};f.prototype.pow=f.prototype.power;f.prototype.dump=function(){return h.dump(this.a)};
f.prototype.toRat=function(){return h.clone(this.a)};f.prototype.toDecimal=function(){return h.toDecimal(this.a)};f.fromRat=function(a){var c=new f;c.a[0]=a[0];c.a[1]=a[1];return c};f.fromInteger=function(a){return f.fromRat(h.fromInteger(a))};f.fromIntegerInverse=function(a){return f.fromRat(h.fromIntegerInverse(a))};f.fromDecimal=function(a){return f.fromRat(h.fromDecimal(a))};f.fromContinuedFraction=function(a){return f.fromRat(h.fromContinuedFraction(h.create(),a))};"undefined"!==typeof e&&(e.rational=
f)})(l)})(this);(function(g,l){"object"===typeof module&&"object"===typeof module.exports?module.exports=g.document?l(g,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return l(e)}:l(g)})("undefined"!==typeof window?window:this,function(g,l){function e(a){var c=a.length,b=m.type(a);return"function"===b||m.isWindow(a)?!1:1===a.nodeType&&c?!0:"array"===b||0===c||"number"===typeof c&&0<c&&c-1 in a}function d(a,c,b){if(m.isFunction(c))return m.grep(a,function(a,z){return!!c.call(a,
z,a)!==b});if(c.nodeType)return m.grep(a,function(a){return a===c!==b});if("string"===typeof c){if(Db.test(c))return m.filter(c,a,b);c=m.filter(c,a)}return m.grep(a,function(a){return 0<=Fa.call(c,a)!==b})}function p(a,c){for(;(a=a[c])&&1!==a.nodeType;);return a}function n(a){var c=nb[a]={};m.each(a.match(ua)||[],function(a,b){c[b]=!0});return c}function k(){H.removeEventListener("DOMContentLoaded",k,!1);g.removeEventListener("load",k,!1);m.ready()}function r(){Object.defineProperty(this.cache={},
0,{get:function(){return{}}});this.expando=m.expando+Math.random()}function h(a,c,b){if(void 0===b&&1===a.nodeType)if(b="data-"+c.replace(Ra,"-$1").toLowerCase(),b=a.getAttribute(b),"string"===typeof b){try{b="true"===b?!0:"false"===b?!1:"null"===b?null:+b+""===b?+b:Eb.test(b)?m.parseJSON(b):b}catch(f){}T.set(a,c,b)}else b=void 0;return b}function q(){return!0}function t(){return!1}function b(){try{return H.activeElement}catch(a){}}function f(a,c){return m.nodeName(a,"table")&&m.nodeName(11!==c.nodeType?
c:c.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function a(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function c(a){var c=cb.exec(a.type);c?a.type=c[1]:a.removeAttribute("type");return a}function v(a,c){for(var b=0,f=a.length;b<f;b++)L.set(a[b],"globalEval",!c||L.get(c[b],"globalEval"))}function x(a,c){var b,f,d,e;if(1===c.nodeType){if(L.hasData(a)&&(e=L.access(a),b=L.set(c,e),e=e.events))for(d in delete b.handle,
b.events={},e)for(b=0,f=e[d].length;b<f;b++)m.event.add(c,d,e[d][b]);T.hasData(a)&&(d=T.access(a),d=m.extend({},d),T.set(c,d))}}function y(a,c){var b=a.getElementsByTagName?a.getElementsByTagName(c||"*"):a.querySelectorAll?a.querySelectorAll(c||"*"):[];return void 0===c||c&&m.nodeName(a,c)?m.merge([a],b):b}function D(a,c){var b,f=m(c.createElement(a)).appendTo(c.body),d=g.getDefaultComputedStyle&&(b=g.getDefaultComputedStyle(f[0]))?b.display:m.css(f[0],"display");f.detach();return d}function G(a){var c=
H,b=Sa[a];b||(b=D(a,c),"none"!==b&&b||(Ta=(Ta||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(c.documentElement),c=Ta[0].contentDocument,c.write(),c.close(),b=D(a,c),Ta.detach()),Sa[a]=b);return b}function I(a,c,b){var f,d,e=a.style;(b=b||Ua(a))&&(d=b.getPropertyValue(c)||b[c]);b&&(""!==d||m.contains(a.ownerDocument,a)||(d=m.style(a,c)),qa.test(d)&&Ga.test(c)&&(a=e.width,c=e.minWidth,f=e.maxWidth,e.minWidth=e.maxWidth=e.width=d,d=b.width,e.width=a,e.minWidth=c,e.maxWidth=f));return void 0!==
d?d+"":d}function F(a,c){return{get:function(){if(a())delete this.get;else return(this.get=c).apply(this,arguments)}}}function M(a,c){if(c in a)return c;for(var b=c[0].toUpperCase()+c.slice(1),f=c,d=ha.length;d--;)if(c=ha[d]+b,c in a)return c;return f}function K(a,c,b){return(a=ia.exec(c))?Math.max(0,a[1]-(b||0))+(a[2]||"px"):c}function J(a,c,b,f,d){c=b===(f?"border":"content")?4:"width"===c?1:0;for(var e=0;4>c;c+=2)"margin"===b&&(e+=m.css(a,b+wa[c],!0,d)),f?("content"===b&&(e-=m.css(a,"padding"+
wa[c],!0,d)),"margin"!==b&&(e-=m.css(a,"border"+wa[c]+"Width",!0,d))):(e+=m.css(a,"padding"+wa[c],!0,d),"padding"!==b&&(e+=m.css(a,"border"+wa[c]+"Width",!0,d)));return e}function S(a,c,b){var f=!0,d="width"===c?a.offsetWidth:a.offsetHeight,e=Ua(a),h="border-box"===m.css(a,"boxSizing",!1,e);if(0>=d||null==d){d=I(a,c,e);if(0>d||null==d)d=a.style[c];if(qa.test(d))return d;f=h&&(P.boxSizingReliable()||d===a.style[c]);d=parseFloat(d)||0}return d+J(a,c,b||(h?"border":"content"),f,e)+"px"}function aa(a,
c){for(var b,f,d,e=[],h=0,k=a.length;h<k;h++)f=a[h],f.style&&(e[h]=L.get(f,"olddisplay"),b=f.style.display,c?(e[h]||"none"!==b||(f.style.display=""),""===f.style.display&&ja(f)&&(e[h]=L.access(f,"olddisplay",G(f.nodeName)))):(d=ja(f),"none"===b&&d||L.set(f,"olddisplay",d?b:m.css(f,"display"))));for(h=0;h<k;h++)f=a[h],!f.style||c&&"none"!==f.style.display&&""!==f.style.display||(f.style.display=c?e[h]||"":"none");return a}function N(a,c,b,f,d){return new N.prototype.init(a,c,b,f,d)}function ca(){setTimeout(function(){ka=
void 0});return ka=m.now()}function W(a,c){var b,f=0,d={height:a};for(c=c?1:0;4>f;f+=2-c)b=wa[f],d["margin"+b]=d["padding"+b]=a;c&&(d.opacity=d.width=a);return d}function da(a,c,b){for(var f,d=(E[c]||[]).concat(E["*"]),e=0,h=d.length;e<h;e++)if(f=d[e].call(b,c,a))return f}function ta(a,c){var b,f,d,e,h;for(b in a)if(f=m.camelCase(b),d=c[f],e=a[b],m.isArray(e)&&(d=e[1],e=a[b]=e[0]),b!==f&&(a[f]=e,delete a[b]),(h=m.cssHooks[f])&&"expand"in h)for(b in e=h.expand(e),delete a[f],e)b in a||(a[b]=e[b],c[b]=
d);else c[f]=d}function Aa(a,c,b){var f,d=0,e=R.length,h=m.Deferred().always(function(){delete k.elem}),k=function(){if(f)return!1;for(var c=ka||ca(),c=Math.max(0,g.startTime+g.duration-c),u=1-(c/g.duration||0),b=0,d=g.tweens.length;b<d;b++)g.tweens[b].run(u);h.notifyWith(a,[g,u,c]);if(1>u&&d)return c;h.resolveWith(a,[g]);return!1},g=h.promise({elem:a,props:m.extend({},c),opts:m.extend(!0,{specialEasing:{}},b),originalProperties:c,originalOptions:b,startTime:ka||ca(),duration:b.duration,tweens:[],
createTween:function(c,u){var b=m.Tween(a,g.opts,c,u,g.opts.specialEasing[c]||g.opts.easing);g.tweens.push(b);return b},stop:function(c){var u=0,b=c?g.tweens.length:0;if(f)return this;for(f=!0;u<b;u++)g.tweens[u].run(1);c?h.resolveWith(a,[g,c]):h.rejectWith(a,[g,c]);return this}});b=g.props;for(ta(b,g.opts.specialEasing);d<e;d++)if(c=R[d].call(g,a,b,g.opts))return c;m.map(b,da,g);m.isFunction(g.opts.start)&&g.opts.start.call(a,g);m.fx.timer(m.extend(k,{elem:a,anim:g,queue:g.opts.queue}));return g.progress(g.opts.progress).done(g.opts.done,
g.opts.complete).fail(g.opts.fail).always(g.opts.always)}function Ba(a){return function(c,b){"string"!==typeof c&&(b=c,c="*");var f,d=0,e=c.toLowerCase().match(ua)||[];if(m.isFunction(b))for(;f=e[d++];)"+"===f[0]?(f=f.slice(1)||"*",(a[f]=a[f]||[]).unshift(b)):(a[f]=a[f]||[]).push(b)}}function na(a,c,b,f){function d(g){var k;e[g]=!0;m.each(a[g]||[],function(a,u){var z=u(c,b,f);if("string"===typeof z&&!h&&!e[z])return c.dataTypes.unshift(z),d(z),!1;if(h)return!(k=z)});return k}var e={},h=a===db;return d(c.dataTypes[0])||
!e["*"]&&d("*")}function oa(a,c){var b,f,d=m.ajaxSettings.flatOptions||{};for(b in c)void 0!==c[b]&&((d[b]?a:f||(f={}))[b]=c[b]);f&&m.extend(!0,a,f);return a}function pa(a,c,b,f){var d;if(m.isArray(c))m.each(c,function(c,d){b||Na.test(a)?f(a,d):pa(a+"["+("object"===typeof d?c:"")+"]",d,b,f)});else if(b||"object"!==m.type(c))f(a,c);else for(d in c)pa(a+"["+d+"]",c[d],b,f)}function U(a){return m.isWindow(a)?a:9===a.nodeType&&a.defaultView}var la=[],fa=la.slice,Ha=la.concat,Ca=la.push,Fa=la.indexOf,
Ia={},eb=Ia.toString,Da=Ia.hasOwnProperty,P={},H=g.document,m=function(a,c){return new m.fn.init(a,c)},Gb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Hb=/^-ms-/,ob=/-([\da-z])/gi,fb=function(a,c){return c.toUpperCase()};m.fn=m.prototype={jquery:"2.1.1",constructor:m,selector:"",length:0,toArray:function(){return fa.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:fa.call(this)},pushStack:function(a){a=m.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},
each:function(a,c){return m.each(this,a,c)},map:function(a){return this.pushStack(m.map(this,function(c,b){return a.call(c,b,c)}))},slice:function(){return this.pushStack(fa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var c=this.length;a=+a+(0>a?c:0);return this.pushStack(0<=a&&a<c?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Ca,sort:la.sort,splice:la.splice};m.extend=m.fn.extend=function(){var a,
c,b,f,d,e=arguments[0]||{},h=1,g=arguments.length,k=!1;"boolean"===typeof e&&(k=e,e=arguments[h]||{},h++);"object"===typeof e||m.isFunction(e)||(e={});h===g&&(e=this,h--);for(;h<g;h++)if(null!=(a=arguments[h]))for(c in a)b=e[c],f=a[c],e!==f&&(k&&f&&(m.isPlainObject(f)||(d=m.isArray(f)))?(d?(d=!1,b=b&&m.isArray(b)?b:[]):b=b&&m.isPlainObject(b)?b:{},e[c]=m.extend(k,b,f)):void 0!==f&&(e[c]=f));return e};m.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);
},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!m.isArray(a)&&0<=a-parseFloat(a)},isPlainObject:function(a){return"object"!==m.type(a)||a.nodeType||m.isWindow(a)||a.constructor&&!Da.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){for(var c in a)return!1;return!0},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?
Ia[eb.call(a)]||"object":typeof a},globalEval:function(a){var c;c=eval;if(a=m.trim(a))1===a.indexOf("use strict")?(c=H.createElement("script"),c.text=a,H.head.appendChild(c).parentNode.removeChild(c)):c(a)},camelCase:function(a){return a.replace(Hb,"ms-").replace(ob,fb)},nodeName:function(a,c){return a.nodeName&&a.nodeName.toLowerCase()===c.toLowerCase()},each:function(a,c,b){var f,d=0,h=a.length;f=e(a);if(b)if(f)for(;d<h&&(f=c.apply(a[d],b),!1!==f);d++);else for(d in a){if(f=c.apply(a[d],b),!1===
f)break}else if(f)for(;d<h&&(f=c.call(a[d],d,a[d]),!1!==f);d++);else for(d in a)if(f=c.call(a[d],d,a[d]),!1===f)break;return a},trim:function(a){return null==a?"":(a+"").replace(Gb,"")},makeArray:function(a,c){var b=c||[];null!=a&&(e(Object(a))?m.merge(b,"string"===typeof a?[a]:a):Ca.call(b,a));return b},inArray:function(a,c,b){return null==c?-1:Fa.call(c,a,b)},merge:function(a,c){for(var b=+c.length,f=0,d=a.length;f<b;f++)a[d++]=c[f];a.length=d;return a},grep:function(a,c,b){for(var f=[],d=0,e=a.length,
h=!b;d<e;d++)b=!c(a[d],d),b!==h&&f.push(a[d]);return f},map:function(a,c,b){var f,d=0,h=a.length,g=[];if(e(a))for(;d<h;d++)f=c(a[d],d,b),null!=f&&g.push(f);else for(d in a)f=c(a[d],d,b),null!=f&&g.push(f);return Ha.apply([],g)},guid:1,proxy:function(a,c){var b,f;"string"===typeof c&&(b=a[c],c=a,a=b);if(m.isFunction(a))return f=fa.call(arguments,2),b=function(){return a.apply(c||this,f.concat(fa.call(arguments)))},b.guid=a.guid=a.guid||m.guid++,b},now:Date.now,support:P});m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,c){Ia["[object "+c+"]"]=c.toLowerCase()});var Ja=function(a){function c(a,b,f,d){var e,w,z,h,g;(b?b.ownerDocument||b:S)!==J&&K(b);b=b||J;f=f||[];if(!a||"string"!==typeof a)return f;if(1!==(h=b.nodeType)&&9!==h)return[];if(da&&!d){if(e=xa.exec(a))if(z=e[1])if(9===h)if((w=b.getElementById(z))&&w.parentNode){if(w.id===z)return f.push(w),f}else return f;else{if(b.ownerDocument&&(w=b.ownerDocument.getElementById(z))&&L(b,w)&&w.id===z)return f.push(w),f}else{if(e[2])return V.apply(f,b.getElementsByTagName(a)),
f;if((z=e[3])&&y.getElementsByClassName&&b.getElementsByClassName)return V.apply(f,b.getElementsByClassName(z)),f}if(y.qsa&&(!W||!W.test(a))){w=e=H;z=b;g=9===h&&a;if(1===h&&"object"!==b.nodeName.toLowerCase()){h=G(a);(e=b.getAttribute("id"))?w=e.replace(za,"\\$&"):b.setAttribute("id",w);w="[id='"+w+"'] ";for(z=h.length;z--;)h[z]=w+C(h[z]);z=wa.test(a)&&u(b.parentNode)||b;g=h.join(",")}if(g)try{return V.apply(f,z.querySelectorAll(g)),f}catch(k){}finally{e||b.removeAttribute("id")}}}return F(a.replace(oa,
"$1"),b,f,d)}function b(){function a(b,u){c.push(b+" ")>x.cacheLength&&delete a[c.shift()];return a[b+" "]=u}var c=[];return a}function f(a){a[H]=!0;return a}function d(a){var c=J.createElement("div");try{return!!a(c)}catch(b){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}}function e(a,c){for(var b=a.split("|"),u=a.length;u--;)x.attrHandle[b[u]]=c}function h(a,c){var b=c&&a,u=b&&1===a.nodeType&&1===c.nodeType&&(~c.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(u)return u;
if(b)for(;b=b.nextSibling;)if(b===c)return-1;return a?1:-1}function g(a){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===a}}function k(a){return function(c){var b=c.nodeName.toLowerCase();return("input"===b||"button"===b)&&c.type===a}}function n(a){return f(function(c){c=+c;return f(function(b,u){for(var f,d=a([],b.length,c),e=d.length;e--;)b[f=d[e]]&&(b[f]=!(u[f]=b[f]))})})}function u(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function w(){}function C(a){for(var c=
0,b=a.length,u="";c<b;c++)u+=a[c].value;return u}function O(a,c,b){var u=c.dir,f=b&&"parentNode"===u,d=R++;return c.first?function(c,b,d){for(;c=c[u];)if(1===c.nodeType||f)return a(c,b,d)}:function(c,b,e){var w,z,h=[P,d];if(e)for(;c=c[u];){if((1===c.nodeType||f)&&a(c,b,e))return!0}else for(;c=c[u];)if(1===c.nodeType||f){z=c[H]||(c[H]={});if((w=z[u])&&w[0]===P&&w[1]===d)return h[2]=w[2];z[u]=h;if(h[2]=a(c,b,e))return!0}}}function p(a){return 1<a.length?function(c,b,u){for(var f=a.length;f--;)if(!a[f](c,
b,u))return!1;return!0}:a[0]}function m(a,c,b,u,f){for(var d,e=[],w=0,z=a.length,h=null!=c;w<z;w++)if(d=a[w])if(!b||b(d,u,f))e.push(d),h&&c.push(w);return e}function l(a,b,u,d,e,w){d&&!d[H]&&(d=l(d));e&&!e[H]&&(e=l(e,w));return f(function(f,w,z,h){var C,g,k=[],n=[],O=w.length,p;if(!(p=f)){p=b||"*";for(var X=z.nodeType?[z]:z,B=[],l=0,Ib=X.length;l<Ib;l++)c(p,X[l],B);p=B}p=!a||!f&&b?p:m(p,k,a,z,h);X=u?e||(f?a:O||d)?[]:w:p;u&&u(p,X,z,h);if(d)for(C=m(X,n),d(C,[],z,h),z=C.length;z--;)if(g=C[z])X[n[z]]=
!(p[n[z]]=g);if(f){if(e||a){if(e){C=[];for(z=X.length;z--;)(g=X[z])&&C.push(p[z]=g);e(null,X=[],C,h)}for(z=X.length;z--;)(g=X[z])&&-1<(C=e?Z.call(f,g):k[z])&&(f[C]=!(w[C]=g))}}else X=m(X===w?X.splice(O,X.length):X),e?e(null,w,X,h):V.apply(w,X)})}function v(a){var c,b,u,f=a.length,d=x.relative[a[0].type];b=d||x.relative[" "];for(var e=d?1:0,w=O(function(a){return a===c},b,!0),z=O(function(a){return-1<Z.call(c,a)},b,!0),h=[function(a,b,u){return!d&&(u||b!==N)||((c=b).nodeType?w(a,b,u):z(a,b,u))}];e<
f;e++)if(b=x.relative[a[e].type])h=[O(p(h),b)];else{b=x.filter[a[e].type].apply(null,a[e].matches);if(b[H]){for(u=++e;u<f&&!x.relative[a[u].type];u++);return l(1<e&&p(h),1<e&&C(a.slice(0,e-1).concat({value:" "===a[e-2].type?"*":""})).replace(oa,"$1"),b,e<u&&v(a.slice(e,u)),u<f&&v(a=a.slice(u)),u<f&&C(a))}h.push(b)}return p(h)}function q(a,b){var u=0<b.length,d=0<a.length,e=function(f,e,w,z,h){var C,g,k,n=0,O="0",p=f&&[],X=[],B=N,l=f||d&&x.find.TAG("*",h),Ib=P+=null==B?1:Math.random()||.1,v=l.length;
for(h&&(N=e!==J&&e);O!==v&&null!=(C=l[O]);O++){if(d&&C){for(g=0;k=a[g++];)if(k(C,e,w)){z.push(C);break}h&&(P=Ib)}u&&((C=!k&&C)&&n--,f&&p.push(C))}n+=O;if(u&&O!==n){for(g=0;k=b[g++];)k(p,X,e,w);if(f){if(0<n)for(;O--;)p[O]||X[O]||(X[O]=ta.call(z));X=m(X)}V.apply(z,X);h&&!f&&0<X.length&&1<n+b.length&&c.uniqueSort(z)}h&&(P=Ib,N=B);return p};return u?f(e):e}var r,y,x,t,D,G,I,F,N,M,A,K,J,ca,da,W,E,aa,L,H="sizzle"+-new Date,S=a.document,P=0,R=0,Q=b(),T=b(),na=b(),Y=function(a,c){a===c&&(A=!0);return 0},
Ba={}.hasOwnProperty,U=[],ta=U.pop,Aa=U.push,V=U.push,ba=U.slice,Z=U.indexOf||function(a){for(var c=0,b=this.length;c<b;c++)if(this[c]===a)return c;return-1},pa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),fa="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+pa+"))|)[\\x20\\t\\r\\n\\f]*\\]",ea=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
fa+")*)|.*)\\)|)",oa=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,ha=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ia=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ma=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,qa=new RegExp(ea),sa=new RegExp("^"+pa+"$"),ga={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ea),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ua=/^(?:input|select|textarea|button)$/i,va=/^h\d$/i,la=/^[^{]+\{\s*\[native \w/,xa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,wa=/[+~]/,za=/'|\\/g,ja=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ka=function(a,c,b){a="0x"+c-65536;
return a!==a||b?c:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{V.apply(U=ba.call(S.childNodes),S.childNodes),U[S.childNodes.length].nodeType}catch(Ca){V={apply:U.length?function(a,c){Aa.apply(a,ba.call(c))}:function(a,c){for(var b=a.length,u=0;a[b++]=c[u++];);a.length=b-1}}}y=c.support={};D=c.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};K=c.setDocument=function(a){var c=a?a.ownerDocument||a:S;a=c.defaultView;if(c===
J||9!==c.nodeType||!c.documentElement)return J;J=c;ca=c.documentElement;da=!D(c);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){K()},!1):a.attachEvent&&a.attachEvent("onunload",function(){K()}));y.attributes=d(function(a){a.className="i";return!a.getAttribute("className")});y.getElementsByTagName=d(function(a){a.appendChild(c.createComment(""));return!a.getElementsByTagName("*").length});y.getElementsByClassName=la.test(c.getElementsByClassName)&&d(function(a){a.innerHTML=
"<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});y.getById=d(function(a){ca.appendChild(a).id=H;return!c.getElementsByName||!c.getElementsByName(H).length});y.getById?(x.find.ID=function(a,c){if("undefined"!==typeof c.getElementById&&da){var b=c.getElementById(a);return b&&b.parentNode?[b]:[]}},x.filter.ID=function(a){var c=a.replace(ja,ka);return function(a){return a.getAttribute("id")===c}}):(delete x.find.ID,x.filter.ID=
function(a){var c=a.replace(ja,ka);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===c}});x.find.TAG=y.getElementsByTagName?function(a,c){if("undefined"!==typeof c.getElementsByTagName)return c.getElementsByTagName(a)}:function(a,c){var b,u=[],f=0,d=c.getElementsByTagName(a);if("*"===a){for(;b=d[f++];)1===b.nodeType&&u.push(b);return u}return d};x.find.CLASS=y.getElementsByClassName&&function(a,c){if("undefined"!==typeof c.getElementsByClassName&&
da)return c.getElementsByClassName(a)};E=[];W=[];if(y.qsa=la.test(c.querySelectorAll))d(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";a.querySelectorAll("[msallowclip^='']").length&&W.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||W.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||
W.push(":checked")}),d(function(a){var b=c.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&W.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||W.push(":enabled",":disabled");a.querySelectorAll("*,:x");W.push(",.*:")});(y.matchesSelector=la.test(aa=ca.matches||ca.webkitMatchesSelector||ca.mozMatchesSelector||ca.oMatchesSelector||ca.msMatchesSelector))&&d(function(a){y.disconnectedMatch=
aa.call(a,"div");aa.call(a,"[s!='']:x");E.push("!=",ea)});W=W.length&&new RegExp(W.join("|"));E=E.length&&new RegExp(E.join("|"));L=(a=la.test(ca.compareDocumentPosition))||la.test(ca.contains)?function(a,c){var b=9===a.nodeType?a.documentElement:a,u=c&&c.parentNode;return a===u||!!(u&&1===u.nodeType&&(b.contains?b.contains(u):a.compareDocumentPosition&&a.compareDocumentPosition(u)&16))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1};Y=a?function(a,b){if(a===b)return A=!0,0;var u=
!a.compareDocumentPosition-!b.compareDocumentPosition;if(u)return u;u=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;return u&1||!y.sortDetached&&b.compareDocumentPosition(a)===u?a===c||a.ownerDocument===S&&L(S,a)?-1:b===c||b.ownerDocument===S&&L(S,b)?1:M?Z.call(M,a)-Z.call(M,b):0:u&4?-1:1}:function(a,b){if(a===b)return A=!0,0;var u,f=0;u=a.parentNode;var d=b.parentNode,e=[a],w=[b];if(!u||!d)return a===c?-1:b===c?1:u?-1:d?1:M?Z.call(M,a)-Z.call(M,b):0;if(u===d)return h(a,
b);for(u=a;u=u.parentNode;)e.unshift(u);for(u=b;u=u.parentNode;)w.unshift(u);for(;e[f]===w[f];)f++;return f?h(e[f],w[f]):e[f]===S?-1:w[f]===S?1:0};return c};c.matches=function(a,b){return c(a,null,null,b)};c.matchesSelector=function(a,b){(a.ownerDocument||a)!==J&&K(a);b=b.replace(ma,"='$1']");if(!(!y.matchesSelector||!da||E&&E.test(b)||W&&W.test(b)))try{var u=aa.call(a,b);if(u||y.disconnectedMatch||a.document&&11!==a.document.nodeType)return u}catch(f){}return 0<c(b,J,null,[a]).length};c.contains=
function(a,c){(a.ownerDocument||a)!==J&&K(a);return L(a,c)};c.attr=function(a,c){(a.ownerDocument||a)!==J&&K(a);var b=x.attrHandle[c.toLowerCase()],b=b&&Ba.call(x.attrHandle,c.toLowerCase())?b(a,c,!da):void 0;return void 0!==b?b:y.attributes||!da?a.getAttribute(c):(b=a.getAttributeNode(c))&&b.specified?b.value:null};c.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};c.uniqueSort=function(a){var c,b=[],u=0,f=0;A=!y.detectDuplicates;M=!y.sortStable&&a.slice(0);a.sort(Y);
if(A){for(;c=a[f++];)c===a[f]&&(u=b.push(f));for(;u--;)a.splice(b[u],1)}M=null;return a};t=c.getText=function(a){var c,b="",u=0;c=a.nodeType;if(!c)for(;c=a[u++];)b+=t(c);else if(1===c||9===c||11===c){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)b+=t(a)}else if(3===c||4===c)return a.nodeValue;return b};x=c.selectors={cacheLength:50,createPseudo:f,match:ga,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",
first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ja,ka);a[3]=(a[3]||a[4]||a[5]||"").replace(ja,ka);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]);return a},PSEUDO:function(a){var c,b=!a[6]&&a[2];if(ga.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":b&&
qa.test(b)&&(c=G(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(a[0]=a[0].slice(0,c),a[2]=b.slice(0,c));return a.slice(0,3)}},filter:{TAG:function(a){var c=a.replace(ja,ka).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===c}},CLASS:function(a){var c=Q[a+" "];return c||(c=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&Q(a,function(a){return c.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&
a.getAttribute("class")||"")})},ATTR:function(a,b,u){return function(f){f=c.attr(f,a);if(null==f)return"!="===b;if(!b)return!0;f+="";return"="===b?f===u:"!="===b?f!==u:"^="===b?u&&0===f.indexOf(u):"*="===b?u&&-1<f.indexOf(u):"$="===b?u&&f.slice(-u.length)===u:"~="===b?-1<(" "+f+" ").indexOf(u):"|="===b?f===u||f.slice(0,u.length+1)===u+"-":!1}},CHILD:function(a,c,b,u,f){var d="nth"!==a.slice(0,3),e="last"!==a.slice(-4),w="of-type"===c;return 1===u&&0===f?function(a){return!!a.parentNode}:function(c,
b,z){var h,C,g,k,n;b=d!==e?"nextSibling":"previousSibling";var O=c.parentNode,p=w&&c.nodeName.toLowerCase();z=!z&&!w;if(O){if(d){for(;b;){for(C=c;C=C[b];)if(w?C.nodeName.toLowerCase()===p:1===C.nodeType)return!1;n=b="only"===a&&!n&&"nextSibling"}return!0}n=[e?O.firstChild:O.lastChild];if(e&&z)for(z=O[H]||(O[H]={}),h=z[a]||[],k=h[0]===P&&h[1],g=h[0]===P&&h[2],C=k&&O.childNodes[k];C=++k&&C&&C[b]||(g=k=0)||n.pop();){if(1===C.nodeType&&++g&&C===c){z[a]=[P,k,g];break}}else if(z&&(h=(c[H]||(c[H]={}))[a])&&
h[0]===P)g=h[1];else for(;(C=++k&&C&&C[b]||(g=k=0)||n.pop())&&((w?C.nodeName.toLowerCase()!==p:1!==C.nodeType)||!++g||(z&&((C[H]||(C[H]={}))[a]=[P,g]),C!==c)););g-=f;return g===u||0===g%u&&0<=g/u}}},PSEUDO:function(a,b){var u,d=x.pseudos[a]||x.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return d[H]?d(b):1<d.length?(u=[a,a,"",b],x.setFilters.hasOwnProperty(a.toLowerCase())?f(function(a,c){for(var u,f=d(a,b),e=f.length;e--;)u=Z.call(a,f[e]),a[u]=!(c[u]=f[e])}):function(a){return d(a,
0,u)}):d}},pseudos:{not:f(function(a){var c=[],b=[],u=I(a.replace(oa,"$1"));return u[H]?f(function(a,c,b,f){f=u(a,null,f,[]);for(var d=a.length;d--;)if(b=f[d])a[d]=!(c[d]=b)}):function(a,f,d){c[0]=a;u(c,null,d,b);return!b.pop()}}),has:f(function(a){return function(b){return 0<c(a,b).length}}),contains:f(function(a){return function(c){return-1<(c.textContent||c.innerText||t(c)).indexOf(a)}}),lang:f(function(a){sa.test(a||"")||c.error("unsupported lang: "+a);a=a.replace(ja,ka).toLowerCase();return function(c){var b;
do if(b=da?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return b=b.toLowerCase(),b===a||0===b.indexOf(a+"-");while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(c){var b=a.location&&a.location.hash;return b&&b.slice(1)===c.id},root:function(a){return a===ca},focus:function(a){return a===J.activeElement&&(!J.hasFocus||J.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var c=
a.nodeName.toLowerCase();return"input"===c&&!!a.checked||"option"===c&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!x.pseudos.empty(a)},header:function(a){return va.test(a.nodeName)},input:function(a){return ua.test(a.nodeName)},button:function(a){var c=a.nodeName.toLowerCase();return"input"===c&&"button"===a.type||"button"===c},
text:function(a){var c;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(c=a.getAttribute("type"))||"text"===c.toLowerCase())},first:n(function(){return[0]}),last:n(function(a,c){return[c-1]}),eq:n(function(a,c,b){return[0>b?b+c:b]}),even:n(function(a,c){for(var b=0;b<c;b+=2)a.push(b);return a}),odd:n(function(a,c){for(var b=1;b<c;b+=2)a.push(b);return a}),lt:n(function(a,c,b){for(c=0>b?b+c:b;0<=--c;)a.push(c);return a}),gt:n(function(a,c,b){for(b=0>b?b+c:b;++b<c;)a.push(b);return a})}};
x.pseudos.nth=x.pseudos.eq;for(r in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[r]=g(r);for(r in{submit:!0,reset:!0})x.pseudos[r]=k(r);w.prototype=x.filters=x.pseudos;x.setFilters=new w;G=c.tokenize=function(a,b){var u,f,d,e,w,z,h;if(w=T[a+" "])return b?0:w.slice(0);w=a;z=[];for(h=x.preFilter;w;){if(!u||(f=ha.exec(w)))f&&(w=w.slice(f[0].length)||w),z.push(d=[]);u=!1;if(f=ia.exec(w))u=f.shift(),d.push({value:u,type:f[0].replace(oa," ")}),w=w.slice(u.length);for(e in x.filter)!(f=ga[e].exec(w))||
h[e]&&!(f=h[e](f))||(u=f.shift(),d.push({value:u,type:e,matches:f}),w=w.slice(u.length));if(!u)break}return b?w.length:w?c.error(a):T(a,z).slice(0)};I=c.compile=function(a,c){var b,u=[],f=[],d=na[a+" "];if(!d){c||(c=G(a));for(b=c.length;b--;)d=v(c[b]),d[H]?u.push(d):f.push(d);d=na(a,q(f,u));d.selector=a}return d};F=c.select=function(a,c,b,f){var d,e,w,z,h="function"===typeof a&&a,g=!f&&G(a=h.selector||a);b=b||[];if(1===g.length){e=g[0]=g[0].slice(0);if(2<e.length&&"ID"===(w=e[0]).type&&y.getById&&
9===c.nodeType&&da&&x.relative[e[1].type]){c=(x.find.ID(w.matches[0].replace(ja,ka),c)||[])[0];if(!c)return b;h&&(c=c.parentNode);a=a.slice(e.shift().value.length)}for(d=ga.needsContext.test(a)?0:e.length;d--;){w=e[d];if(x.relative[z=w.type])break;if(z=x.find[z])if(f=z(w.matches[0].replace(ja,ka),wa.test(e[0].type)&&u(c.parentNode)||c)){e.splice(d,1);a=f.length&&C(e);if(!a)return V.apply(b,f),b;break}}}(h||I(a,g))(f,c,!da,b,wa.test(a)&&u(c.parentNode)||c);return b};y.sortStable=H.split("").sort(Y).join("")===
H;y.detectDuplicates=!!A;K();y.sortDetached=d(function(a){return a.compareDocumentPosition(J.createElement("div"))&1});d(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||e("type|href|height|width",function(a,c,b){if(!b)return a.getAttribute(c,"type"===c.toLowerCase()?1:2)});y.attributes&&d(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||e("value",function(a,c,b){if(!b&&"input"===a.nodeName.toLowerCase())return a.defaultValue});
d(function(a){return null==a.getAttribute("disabled")})||e("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,c,b){var u;if(!b)return!0===a[c]?c.toLowerCase():(u=a.getAttributeNode(c))&&u.specified?u.value:null});return c}(g);m.find=Ja;m.expr=Ja.selectors;m.expr[":"]=m.expr.pseudos;m.unique=Ja.uniqueSort;m.text=Ja.getText;m.isXMLDoc=Ja.isXML;m.contains=Ja.contains;var qb=m.expr.match.needsContext,rb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,
Db=/^.[^:#\[\.,]*$/;m.filter=function(a,c,b){var f=c[0];b&&(a=":not("+a+")");return 1===c.length&&1===f.nodeType?m.find.matchesSelector(f,a)?[f]:[]:m.find.matches(a,m.grep(c,function(a){return 1===a.nodeType}))};m.fn.extend({find:function(a){var c,b=this.length,f=[],d=this;if("string"!==typeof a)return this.pushStack(m(a).filter(function(){for(c=0;c<b;c++)if(m.contains(d[c],this))return!0}));for(c=0;c<b;c++)m.find(a,d[c],f);f=this.pushStack(1<b?m.unique(f):f);f.selector=this.selector?this.selector+
" "+a:a;return f},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"===typeof a&&qb.test(a)?m(a):a||[],!1).length}});var Va,Jb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(a,c){var b;if(!a)return this;if("string"===typeof a){b="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:Jb.exec(a);if(!b||!b[1]&&c)return!c||c.jquery?(c||Va).find(a):this.constructor(c).find(a);if(b[1]){if(c=
c instanceof m?c[0]:c,m.merge(this,m.parseHTML(b[1],c&&c.nodeType?c.ownerDocument||c:H,!0)),rb.test(b[1])&&m.isPlainObject(c))for(b in c)if(m.isFunction(this[b]))this[b](c[b]);else this.attr(b,c[b])}else(b=H.getElementById(b[2]))&&b.parentNode&&(this.length=1,this[0]=b),this.context=H,this.selector=a;return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(m.isFunction(a))return"undefined"!==typeof Va.ready?Va.ready(a):a(m);void 0!==a.selector&&(this.selector=a.selector,this.context=
a.context);return m.makeArray(a,this)}).prototype=m.fn;Va=m(H);var Wa=/^(?:parents|prev(?:Until|All))/,gb={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,c,b){for(var f=[],d=void 0!==b;(a=a[c])&&9!==a.nodeType;)if(1===a.nodeType){if(d&&m(a).is(b))break;f.push(a)}return f},sibling:function(a,c){for(var b=[];a;a=a.nextSibling)1===a.nodeType&&a!==c&&b.push(a);return b}});m.fn.extend({has:function(a){var c=m(a,this),b=c.length;return this.filter(function(){for(var a=0;a<b;a++)if(m.contains(this,
c[a]))return!0})},closest:function(a,c){for(var b,f=0,d=this.length,e=[],h=qb.test(a)||"string"!==typeof a?m(a,c||this.context):0;f<d;f++)for(b=this[f];b&&b!==c;b=b.parentNode)if(11>b.nodeType&&(h?-1<h.index(b):1===b.nodeType&&m.find.matchesSelector(b,a))){e.push(b);break}return this.pushStack(1<e.length?m.unique(e):e)},index:function(a){return a?"string"===typeof a?Fa.call(m(a),this[0]):Fa.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,c){return this.pushStack(m.unique(m.merge(this.get(),
m(a,c))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});m.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,c,b){return m.dir(a,"parentNode",b)},next:function(a){return p(a,"nextSibling")},prev:function(a){return p(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,
c,b){return m.dir(a,"nextSibling",b)},prevUntil:function(a,c,b){return m.dir(a,"previousSibling",b)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return a.contentDocument||m.merge([],a.childNodes)}},function(a,c){m.fn[a]=function(b,f){var d=m.map(this,c,b);"Until"!==a.slice(-5)&&(f=b);f&&"string"===typeof f&&(d=m.filter(f,d));1<this.length&&(gb[a]||m.unique(d),Wa.test(a)&&d.reverse());return this.pushStack(d)}});
var ua=/\S+/g,nb={};m.Callbacks=function(a){a="string"===typeof a?nb[a]||n(a):m.extend({},a);var c,b,f,d,e,h,g=[],k=!a.once&&[],p=function(w){c=a.memory&&w;b=!0;h=d||0;d=0;e=g.length;for(f=!0;g&&h<e;h++)if(!1===g[h].apply(w[0],w[1])&&a.stopOnFalse){c=!1;break}f=!1;g&&(k?k.length&&p(k.shift()):c?g=[]:u.disable())},u={add:function(){if(g){var b=g.length;(function O(c){m.each(c,function(c,b){var f=m.type(b);"function"===f?a.unique&&u.has(b)||g.push(b):b&&b.length&&"string"!==f&&O(b)})})(arguments);f?
e=g.length:c&&(d=b,p(c))}return this},remove:function(){g&&m.each(arguments,function(a,c){for(var b;-1<(b=m.inArray(c,g,b));)g.splice(b,1),f&&(b<=e&&e--,b<=h&&h--)});return this},has:function(a){return a?-1<m.inArray(a,g):!(!g||!g.length)},empty:function(){g=[];e=0;return this},disable:function(){g=k=c=void 0;return this},disabled:function(){return!g},lock:function(){k=void 0;c||u.disable();return this},locked:function(){return!k},fireWith:function(a,c){!g||b&&!k||(c=c||[],c=[a,c.slice?c.slice():
c],f?k.push(c):p(c));return this},fire:function(){u.fireWith(this,arguments);return this},fired:function(){return!!b}};return u};m.extend({Deferred:function(a){var c=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],b="pending",f={state:function(){return b},always:function(){d.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return m.Deferred(function(b){m.each(c,
function(c,e){var h=m.isFunction(a[c])&&a[c];d[e[1]](function(){var a=h&&h.apply(this,arguments);if(a&&m.isFunction(a.promise))a.promise().done(b.resolve).fail(b.reject).progress(b.notify);else b[e[0]+"With"](this===f?b.promise():this,h?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?m.extend(a,f):f}},d={};f.pipe=f.then;m.each(c,function(a,e){var h=e[2],z=e[3];f[e[1]]=h.add;z&&h.add(function(){b=z},c[a^1][2].disable,c[2][2].lock);d[e[0]]=function(){d[e[0]+"With"](this===
d?f:this,arguments);return this};d[e[0]+"With"]=h.fireWith});f.promise(d);a&&a.call(d,d);return d},when:function(a){var c=0,b=fa.call(arguments),f=b.length,d=1!==f||a&&m.isFunction(a.promise)?f:0,e=1===d?a:m.Deferred(),h=function(a,c,b){return function(f){c[a]=this;b[a]=1<arguments.length?fa.call(arguments):f;b===g?e.notifyWith(c,b):--d||e.resolveWith(c,b)}},g,k,n;if(1<f)for(g=Array(f),k=Array(f),n=Array(f);c<f;c++)b[c]&&m.isFunction(b[c].promise)?b[c].promise().done(h(c,n,b)).fail(e.reject).progress(h(c,
k,g)):--d;d||e.resolveWith(n,b);return e.promise()}});var Xa;m.fn.ready=function(a){m.ready.promise().done(a);return this};m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){(!0===a?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==a&&0<--m.readyWait||(Xa.resolveWith(H,[m]),m.fn.triggerHandler&&(m(H).triggerHandler("ready"),m(H).off("ready"))))}});m.ready.promise=function(a){Xa||(Xa=m.Deferred(),"complete"===H.readyState?setTimeout(m.ready):(H.addEventListener("DOMContentLoaded",
k,!1),g.addEventListener("load",k,!1)));return Xa.promise(a)};m.ready.promise();var xa=m.access=function(a,c,b,f,d,e,h){var g=0,k=a.length,n=null==b;if("object"===m.type(b))for(g in d=!0,b)m.access(a,c,g,b[g],!0,e,h);else if(void 0!==f&&(d=!0,m.isFunction(f)||(h=!0),n&&(h?(c.call(a,f),c=null):(n=c,c=function(a,c,b){return n.call(m(a),b)})),c))for(;g<k;g++)c(a[g],b,h?f:f.call(a[g],g,c(a[g],b)));return d?a:n?c.call(a):k?c(a[0],b):e};m.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};
r.uid=1;r.accepts=m.acceptData;r.prototype={key:function(a){if(!r.accepts(a))return 0;var c={},b=a[this.expando];if(!b){b=r.uid++;try{c[this.expando]={value:b},Object.defineProperties(a,c)}catch(f){c[this.expando]=b,m.extend(a,c)}}this.cache[b]||(this.cache[b]={});return b},set:function(a,c,b){var f;a=this.key(a);var d=this.cache[a];if("string"===typeof c)d[c]=b;else if(m.isEmptyObject(d))m.extend(this.cache[a],c);else for(f in c)d[f]=c[f];return d},get:function(a,c){var b=this.cache[this.key(a)];
return void 0===c?b:b[c]},access:function(a,c,b){if(void 0===c||c&&"string"===typeof c&&void 0===b)return b=this.get(a,c),void 0!==b?b:this.get(a,m.camelCase(c));this.set(a,c,b);return void 0!==b?b:c},remove:function(a,c){var b,f;b=this.key(a);var d=this.cache[b];if(void 0===c)this.cache[b]={};else for(m.isArray(c)?f=c.concat(c.map(m.camelCase)):(b=m.camelCase(c),c in d?f=[c,b]:(f=b,f=f in d?[f]:f.match(ua)||[])),b=f.length;b--;)delete d[f[b]]},hasData:function(a){return!m.isEmptyObject(this.cache[a[this.expando]]||
{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new r,T=new r,Eb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ra=/([A-Z])/g;m.extend({hasData:function(a){return T.hasData(a)||L.hasData(a)},data:function(a,c,b){return T.access(a,c,b)},removeData:function(a,c){T.remove(a,c)},_data:function(a,c,b){return L.access(a,c,b)},_removeData:function(a,c){L.remove(a,c)}});m.fn.extend({data:function(a,c){var b,f,d,e=this[0],g=e&&e.attributes;if(void 0===a){if(this.length&&(d=T.get(e),1===
e.nodeType&&!L.get(e,"hasDataAttrs"))){for(b=g.length;b--;)g[b]&&(f=g[b].name,0===f.indexOf("data-")&&(f=m.camelCase(f.slice(5)),h(e,f,d[f])));L.set(e,"hasDataAttrs",!0)}return d}return"object"===typeof a?this.each(function(){T.set(this,a)}):xa(this,function(c){var b,f=m.camelCase(a);if(e&&void 0===c){b=T.get(e,a);if(void 0!==b)return b;b=T.get(e,f);if(void 0!==b)return b;b=h(e,f,void 0);if(void 0!==b)return b}else this.each(function(){var b=T.get(this,f);T.set(this,f,c);-1!==a.indexOf("-")&&void 0!==
b&&T.set(this,a,c)})},null,c,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){T.remove(this,a)})}});m.extend({queue:function(a,c,b){var f;if(a)return c=(c||"fx")+"queue",f=L.get(a,c),b&&(!f||m.isArray(b)?f=L.access(a,c,m.makeArray(b)):f.push(b)),f||[]},dequeue:function(a,c){c=c||"fx";var b=m.queue(a,c),f=b.length,d=b.shift(),e=m._queueHooks(a,c),h=function(){m.dequeue(a,c)};"inprogress"===d&&(d=b.shift(),f--);d&&("fx"===c&&b.unshift("inprogress"),delete e.stop,d.call(a,
h,e));!f&&e&&e.empty.fire()},_queueHooks:function(a,c){var b=c+"queueHooks";return L.get(a,b)||L.access(a,b,{empty:m.Callbacks("once memory").add(function(){L.remove(a,[c+"queue",b])})})}});m.fn.extend({queue:function(a,c){var b=2;"string"!==typeof a&&(c=a,a="fx",b--);return arguments.length<b?m.queue(this[0],a):void 0===c?this:this.each(function(){var b=m.queue(this,a,c);m._queueHooks(this,a);"fx"===a&&"inprogress"!==b[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,
a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var b,f=1,d=m.Deferred(),e=this,h=this.length,g=function(){--f||d.resolveWith(e,[e])};"string"!==typeof a&&(c=a,a=void 0);for(a=a||"fx";h--;)(b=L.get(e[h],a+"queueHooks"))&&b.empty&&(f++,b.empty.add(g));g();return d.promise(c)}});var sa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wa=["Top","Right","Bottom","Left"],ja=function(a,c){a=c||a;return"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},sb=/^(?:checkbox|radio)$/i;
(function(){var a=H.createDocumentFragment().appendChild(H.createElement("div")),c=H.createElement("input");c.setAttribute("type","radio");c.setAttribute("checked","checked");c.setAttribute("name","t");a.appendChild(c);P.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";P.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue})();P.focusinBubbles="onfocusin"in g;var Kb=/^key/,Lb=/^(?:mouse|pointer|contextmenu)|click/,tb=/^(?:focusinfocus|focusoutblur)$/,
Q=/^([^.]*)(?:\.(.+)|)$/;m.event={global:{},add:function(a,c,b,f,d){var e,h,g,k,n,u,w,C,O;if(n=L.get(a))for(b.handler&&(e=b,b=e.handler,d=e.selector),b.guid||(b.guid=m.guid++),(k=n.events)||(k=n.events={}),(h=n.handle)||(h=n.handle=function(c){return"undefined"!==typeof m&&m.event.triggered!==c.type?m.event.dispatch.apply(a,arguments):void 0}),c=(c||"").match(ua)||[""],n=c.length;n--;)g=Q.exec(c[n])||[],C=u=g[1],O=(g[2]||"").split(".").sort(),C&&(g=m.event.special[C]||{},C=(d?g.delegateType:g.bindType)||
C,g=m.event.special[C]||{},u=m.extend({type:C,origType:u,data:f,handler:b,guid:b.guid,selector:d,needsContext:d&&m.expr.match.needsContext.test(d),namespace:O.join(".")},e),(w=k[C])||(w=k[C]=[],w.delegateCount=0,g.setup&&!1!==g.setup.call(a,f,O,h)||a.addEventListener&&a.addEventListener(C,h,!1)),g.add&&(g.add.call(a,u),u.handler.guid||(u.handler.guid=b.guid)),d?w.splice(w.delegateCount++,0,u):w.push(u),m.event.global[C]=!0)},remove:function(a,c,b,f,d){var e,h,g,k,n,u,w,C,O,p,pb,l=L.hasData(a)&&L.get(a);
if(l&&(k=l.events)){c=(c||"").match(ua)||[""];for(n=c.length;n--;)if(g=Q.exec(c[n])||[],O=pb=g[1],p=(g[2]||"").split(".").sort(),O){w=m.event.special[O]||{};O=(f?w.delegateType:w.bindType)||O;C=k[O]||[];g=g[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");for(h=e=C.length;e--;)u=C[e],!d&&pb!==u.origType||b&&b.guid!==u.guid||g&&!g.test(u.namespace)||f&&f!==u.selector&&("**"!==f||!u.selector)||(C.splice(e,1),u.selector&&C.delegateCount--,w.remove&&w.remove.call(a,u));h&&!C.length&&(w.teardown&&
!1!==w.teardown.call(a,p,l.handle)||m.removeEvent(a,O,l.handle),delete k[O])}else for(O in k)m.event.remove(a,O+c[n],b,f,!0);m.isEmptyObject(k)&&(delete l.handle,L.remove(a,"events"))}},trigger:function(a,c,b,f){var d,e,h,k,n,p,u=[b||H],w=Da.call(a,"type")?a.type:a;p=Da.call(a,"namespace")?a.namespace.split("."):[];e=d=b=b||H;if(3!==b.nodeType&&8!==b.nodeType&&!tb.test(w+m.event.triggered)&&(0<=w.indexOf(".")&&(p=w.split("."),w=p.shift(),p.sort()),k=0>w.indexOf(":")&&"on"+w,a=a[m.expando]?a:new m.Event(w,
"object"===typeof a&&a),a.isTrigger=f?2:3,a.namespace=p.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=b),c=null==c?[a]:m.makeArray(c,[a]),p=m.event.special[w]||{},f||!p.trigger||!1!==p.trigger.apply(b,c))){if(!f&&!p.noBubble&&!m.isWindow(b)){h=p.delegateType||w;tb.test(h+w)||(e=e.parentNode);for(;e;e=e.parentNode)u.push(e),d=e;d===(b.ownerDocument||H)&&u.push(d.defaultView||d.parentWindow||g)}for(d=0;(e=u[d++])&&
!a.isPropagationStopped();)a.type=1<d?h:p.bindType||w,(n=(L.get(e,"events")||{})[a.type]&&L.get(e,"handle"))&&n.apply(e,c),(n=k&&e[k])&&n.apply&&m.acceptData(e)&&(a.result=n.apply(e,c),!1===a.result&&a.preventDefault());a.type=w;f||a.isDefaultPrevented()||p._default&&!1!==p._default.apply(u.pop(),c)||!m.acceptData(b)||!k||!m.isFunction(b[w])||m.isWindow(b)||((d=b[k])&&(b[k]=null),m.event.triggered=w,b[w](),m.event.triggered=void 0,d&&(b[k]=d));return a.result}},dispatch:function(a){a=m.event.fix(a);
var c,b,f,d,e=[],h=fa.call(arguments);c=(L.get(this,"events")||{})[a.type]||[];var g=m.event.special[a.type]||{};h[0]=a;a.delegateTarget=this;if(!g.preDispatch||!1!==g.preDispatch.call(this,a)){e=m.event.handlers.call(this,a,c);for(c=0;(d=e[c++])&&!a.isPropagationStopped();)for(a.currentTarget=d.elem,b=0;(f=d.handlers[b++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(f.namespace))a.handleObj=f,a.data=f.data,f=((m.event.special[f.origType]||{}).handle||f.handler).apply(d.elem,
h),void 0!==f&&!1===(a.result=f)&&(a.preventDefault(),a.stopPropagation());g.postDispatch&&g.postDispatch.call(this,a);return a.result}},handlers:function(a,c){var b,f,d,e,h=[],g=c.delegateCount,k=a.target;if(g&&k.nodeType&&(!a.button||"click"!==a.type))for(;k!==this;k=k.parentNode||this)if(!0!==k.disabled||"click"!==a.type){f=[];for(b=0;b<g;b++)e=c[b],d=e.selector+" ",void 0===f[d]&&(f[d]=e.needsContext?0<=m(d,this).index(k):m.find(d,this,null,[k]).length),f[d]&&f.push(e);f.length&&h.push({elem:k,
handlers:f})}g<c.length&&h.push({elem:this,handlers:c.slice(g)});return h},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,c){null==a.which&&(a.which=null!=c.charCode?c.charCode:c.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,
c){var b,f,d=c.button;null==a.pageX&&null!=c.clientX&&(b=a.target.ownerDocument||H,f=b.documentElement,b=b.body,a.pageX=c.clientX+(f&&f.scrollLeft||b&&b.scrollLeft||0)-(f&&f.clientLeft||b&&b.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||b&&b.scrollTop||0)-(f&&f.clientTop||b&&b.clientTop||0));a.which||void 0===d||(a.which=d&1?1:d&2?3:d&4?2:0);return a}},fix:function(a){if(a[m.expando])return a;var c,b,f;c=a.type;var d=a,e=this.fixHooks[c];e||(this.fixHooks[c]=e=Lb.test(c)?this.mouseHooks:Kb.test(c)?
this.keyHooks:{});f=e.props?this.props.concat(e.props):this.props;a=new m.Event(d);for(c=f.length;c--;)b=f[c],a[b]=d[b];a.target||(a.target=H);3===a.target.nodeType&&(a.target=a.target.parentNode);return e.filter?e.filter(a,d):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==b()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===b()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&
this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,c,b,f){a=m.extend(new m.Event,b,{type:a,isSimulated:!0,originalEvent:{}});f?m.event.trigger(a,null,c):m.event.dispatch.call(c,a);a.isDefaultPrevented()&&b.preventDefault()}};m.removeEvent=function(a,c,b){a.removeEventListener&&a.removeEventListener(c,
b,!1)};m.Event=function(a,c){if(!(this instanceof m.Event))return new m.Event(a,c);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?q:t):this.type=a;c&&m.extend(this,c);this.timeStamp=a&&a.timeStamp||m.now();this[m.expando]=!0};m.Event.prototype={isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=q;a&&a.preventDefault&&
a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=q;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=q;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,c){m.event.special[a]={delegateType:c,bindType:c,handle:function(a){var b,
f=a.relatedTarget,d=a.handleObj;if(!f||f!==this&&!m.contains(this,f))a.type=d.origType,b=d.handler.apply(this,arguments),a.type=c;return b}}});P.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,c){var b=function(a){m.event.simulate(c,a.target,m.event.fix(a),!0)};m.event.special[c]={setup:function(){var f=this.ownerDocument||this,d=L.access(f,c);d||f.addEventListener(a,b,!0);L.access(f,c,(d||0)+1)},teardown:function(){var f=this.ownerDocument||this,d=L.access(f,c)-1;d?L.access(f,
c,d):(f.removeEventListener(a,b,!0),L.remove(f,c))}}});m.fn.extend({on:function(a,c,b,f,d){var e,h;if("object"===typeof a){"string"!==typeof c&&(b=b||c,c=void 0);for(h in a)this.on(h,c,b,a[h],d);return this}null==b&&null==f?(f=c,b=c=void 0):null==f&&("string"===typeof c?(f=b,b=void 0):(f=b,b=c,c=void 0));if(!1===f)f=t;else if(!f)return this;1===d&&(e=f,f=function(a){m().off(a);return e.apply(this,arguments)},f.guid=e.guid||(e.guid=m.guid++));return this.each(function(){m.event.add(this,a,f,b,c)})},
one:function(a,c,b,f){return this.on(a,c,b,f,1)},off:function(a,c,b){var f;if(a&&a.preventDefault&&a.handleObj)return f=a.handleObj,m(a.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if("object"===typeof a){for(f in a)this.off(f,c,a[f]);return this}if(!1===c||"function"===typeof c)b=c,c=void 0;!1===b&&(b=t);return this.each(function(){m.event.remove(this,a,b,c)})},trigger:function(a,c){return this.each(function(){m.event.trigger(a,c,this)})},triggerHandler:function(a,
c){var b=this[0];if(b)return m.event.trigger(a,c,b,!0)}});var ub=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ka=/<([\w:]+)/,Mb=/<|&#?\w+;/,Nb=/<(?:script|style|link)/i,vb=/checked\s*(?:[^=]|=\s*.checked.)/i,hb=/^$|\/(?:java|ecma)script/i,cb=/^true\/(.*)/,Ob=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ma.optgroup=ma.option;ma.tbody=ma.tfoot=ma.colgroup=ma.caption=ma.thead;ma.th=ma.td;m.extend({clone:function(a,c,b){var f,d,e,h,g=a.cloneNode(!0),k=m.contains(a.ownerDocument,a);if(!(P.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(h=y(g),e=y(a),f=0,d=e.length;f<d;f++){var n=e[f],u=h[f],w=u.nodeName.toLowerCase();if("input"===w&&sb.test(n.type))u.checked=n.checked;else if("input"===w||"textarea"===w)u.defaultValue=
n.defaultValue}if(c)if(b)for(e=e||y(a),h=h||y(g),f=0,d=e.length;f<d;f++)x(e[f],h[f]);else x(a,g);h=y(g,"script");0<h.length&&v(h,!k&&y(a,"script"));return g},buildFragment:function(a,c,b,f){for(var d,e,h,g=c.createDocumentFragment(),k=[],n=0,u=a.length;n<u;n++)if((d=a[n])||0===d)if("object"===m.type(d))m.merge(k,d.nodeType?[d]:d);else if(Mb.test(d)){e=e||g.appendChild(c.createElement("div"));h=(Ka.exec(d)||["",""])[1].toLowerCase();h=ma[h]||ma._default;e.innerHTML=h[1]+d.replace(ub,"<$1></$2>")+h[2];
for(h=h[0];h--;)e=e.lastChild;m.merge(k,e.childNodes);e=g.firstChild;e.textContent=""}else k.push(c.createTextNode(d));g.textContent="";for(n=0;d=k[n++];)if(!f||-1===m.inArray(d,f))if(a=m.contains(d.ownerDocument,d),e=y(g.appendChild(d),"script"),a&&v(e),b)for(h=0;d=e[h++];)hb.test(d.type||"")&&b.push(d);return g},cleanData:function(a){for(var c,b,f,d,e=m.event.special,h=0;void 0!==(b=a[h]);h++){if(m.acceptData(b)&&(d=b[L.expando])&&(c=L.cache[d])){if(c.events)for(f in c.events)e[f]?m.event.remove(b,
f):m.removeEvent(b,f,c.handle);L.cache[d]&&delete L.cache[d]}delete T.cache[b[T.expando]]}}});m.fn.extend({text:function(a){return xa(this,function(a){return void 0===a?m.text(this):this.empty().each(function(){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||f(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,
function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=f(this,a);c.insertBefore(a,c.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,c){for(var b,f=a?m.filter(a,this):this,d=0;null!=(b=f[d]);d++)c||1!==b.nodeType||m.cleanData(y(b)),b.parentNode&&
(c&&m.contains(b.ownerDocument,b)&&v(y(b,"script")),b.parentNode.removeChild(b));return this},empty:function(){for(var a,c=0;null!=(a=this[c]);c++)1===a.nodeType&&(m.cleanData(y(a,!1)),a.textContent="");return this},clone:function(a,c){a=null==a?!1:a;c=null==c?a:c;return this.map(function(){return m.clone(this,a,c)})},html:function(a){return xa(this,function(a){var c=this[0]||{},b=0,f=this.length;if(void 0===a&&1===c.nodeType)return c.innerHTML;if("string"===typeof a&&!Nb.test(a)&&!ma[(Ka.exec(a)||
["",""])[1].toLowerCase()]){a=a.replace(ub,"<$1></$2>");try{for(;b<f;b++)c=this[b]||{},1===c.nodeType&&(m.cleanData(y(c,!1)),c.innerHTML=a);c=0}catch(d){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];this.domManip(arguments,function(c){a=this.parentNode;m.cleanData(y(this));a&&a.replaceChild(c,this)});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(b,f){b=Ha.apply([],b);var d,e,h,
g,k=0,n=this.length,p=this,l=n-1,u=b[0],w=m.isFunction(u);if(w||1<n&&"string"===typeof u&&!P.checkClone&&vb.test(u))return this.each(function(a){var c=p.eq(a);w&&(b[0]=u.call(this,a,c.html()));c.domManip(b,f)});if(n&&(d=m.buildFragment(b,this[0].ownerDocument,!1,this),e=d.firstChild,1===d.childNodes.length&&(d=e),e)){e=m.map(y(d,"script"),a);for(h=e.length;k<n;k++)g=d,k!==l&&(g=m.clone(g,!0,!0),h&&m.merge(e,y(g,"script"))),f.call(this[k],g,k);if(h)for(d=e[e.length-1].ownerDocument,m.map(e,c),k=0;k<
h;k++)g=e[k],hb.test(g.type||"")&&!L.access(g,"globalEval")&&m.contains(d,g)&&(g.src?m._evalUrl&&m._evalUrl(g.src):m.globalEval(g.textContent.replace(Ob,"")))}return this}});m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){m.fn[a]=function(a){for(var b=[],f=m(a),d=f.length-1,e=0;e<=d;e++)a=e===d?this:this.clone(!0),m(f[e])[c](a),Ca.apply(b,a.get());return this.pushStack(b)}});var Ta,Sa={},Ga=/^margin/,qa=new RegExp("^("+
sa+")(?!px)[a-z%]+$","i"),Ua=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};(function(){function a(){e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";e.innerHTML="";f.appendChild(d);var h=g.getComputedStyle(e,null);c="1%"!==h.top;b="4px"===h.width;f.removeChild(d)}var c,b,f=H.documentElement,d=H.createElement("div"),e=H.createElement("div");
e.style&&(e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",P.clearCloneStyle="content-box"===e.style.backgroundClip,d.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",d.appendChild(e),g.getComputedStyle&&m.extend(P,{pixelPosition:function(){a();return c},boxSizingReliable:function(){null==b&&a();return b},reliableMarginRight:function(){var a;a=e.appendChild(H.createElement("div"));a.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";
a.style.marginRight=a.style.width="0";e.style.width="1px";f.appendChild(d);a=!parseFloat(g.getComputedStyle(a,null).marginRight);f.removeChild(d);return a}}))})();m.swap=function(a,c,b,f){var d,e={};for(d in c)e[d]=a.style[d],a.style[d]=c[d];b=b.apply(a,f||[]);for(d in c)a.style[d]=e[d];return b};var wb=/^(none|table(?!-c[ea]).+)/,ia=new RegExp("^("+sa+")(.*)$","i"),V=new RegExp("^([+-])=("+sa+")","i"),xb={position:"absolute",visibility:"hidden",display:"block"},ib={letterSpacing:"0",fontWeight:"400"},
ha=["Webkit","O","Moz","ms"];m.extend({cssHooks:{opacity:{get:function(a,c){if(c){var b=I(a,"opacity");return""===b?"1":b}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,c,b,f){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var d,e,h,g=m.camelCase(c),k=a.style;c=m.cssProps[g]||(m.cssProps[g]=M(k,g));h=m.cssHooks[c]||m.cssHooks[g];if(void 0!==
b)e=typeof b,"string"===e&&(d=V.exec(b))&&(b=(d[1]+1)*d[2]+parseFloat(m.css(a,c)),e="number"),null!=b&&b===b&&("number"!==e||m.cssNumber[g]||(b+="px"),P.clearCloneStyle||""!==b||0!==c.indexOf("background")||(k[c]="inherit"),h&&"set"in h&&void 0===(b=h.set(a,b,f))||(k[c]=b));else return h&&"get"in h&&void 0!==(d=h.get(a,!1,f))?d:k[c]}},css:function(a,c,b,f){var d,e;e=m.camelCase(c);c=m.cssProps[e]||(m.cssProps[e]=M(a.style,e));(e=m.cssHooks[c]||m.cssHooks[e])&&"get"in e&&(d=e.get(a,!0,b));void 0===
d&&(d=I(a,c,f));"normal"===d&&c in ib&&(d=ib[c]);return""===b||b?(a=parseFloat(d),!0===b||m.isNumeric(a)?a||0:d):d}});m.each(["height","width"],function(a,c){m.cssHooks[c]={get:function(a,b,f){if(b)return wb.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,xb,function(){return S(a,c,f)}):S(a,c,f)},set:function(a,b,f){var d=f&&Ua(a);return K(a,b,f?J(a,c,f,"border-box"===m.css(a,"boxSizing",!1,d),d):0)}}});m.cssHooks.marginRight=F(P.reliableMarginRight,function(a,c){if(c)return m.swap(a,{display:"inline-block"},
I,[a,"marginRight"])});m.each({margin:"",padding:"",border:"Width"},function(a,c){m.cssHooks[a+c]={expand:function(b){var f=0,d={};for(b="string"===typeof b?b.split(" "):[b];4>f;f++)d[a+wa[f]+c]=b[f]||b[f-2]||b[0];return d}};Ga.test(a)||(m.cssHooks[a+c].set=K)});m.fn.extend({css:function(a,c){return xa(this,function(a,c,b){var f,d={},e=0;if(m.isArray(c)){b=Ua(a);for(f=c.length;e<f;e++)d[c[e]]=m.css(a,c[e],!1,b);return d}return void 0!==b?m.style(a,c,b):m.css(a,c)},a,c,1<arguments.length)},show:function(){return aa(this,
!0)},hide:function(){return aa(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){ja(this)?m(this).show():m(this).hide()})}});m.Tween=N;N.prototype={constructor:N,init:function(a,c,b,f,d,e){this.elem=a;this.prop=b;this.easing=d||"swing";this.options=c;this.start=this.now=this.cur();this.end=f;this.unit=e||(m.cssNumber[b]?"":"px")},cur:function(){var a=N.propHooks[this.prop];return a&&a.get?a.get(this):N.propHooks._default.get(this)},run:function(a){var c,
b=N.propHooks[this.prop];this.pos=this.options.duration?c=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):c=a;this.now=(this.end-this.start)*c+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);b&&b.set?b.set(this):N.propHooks._default.set(this);return this}};N.prototype.init.prototype=N.prototype;N.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=m.css(a.elem,a.prop,""))&&"auto"!==a?
a:0:a.elem[a.prop]},set:function(a){if(m.fx.step[a.prop])m.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};m.fx=N.prototype.init;m.fx.step={};var ka,Ya,Pb=/^(?:toggle|show|hide)$/,
A=new RegExp("^(?:([+-])=|)("+sa+")([a-z%]*)$","i"),Z=/queueHooks$/,R=[function(a,c,b){var f,d,e,h,g,k,n=this,u={},w=a.style,C=a.nodeType&&ja(a),p=L.get(a,"fxshow");b.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,g=h.empty.fire,h.empty.fire=function(){h.unqueued||g()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--;m.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in c||"width"in c)&&(b.overflow=[w.overflow,w.overflowX,w.overflowY],k=m.css(a,
"display"),d="none"===k?L.get(a,"olddisplay")||G(a.nodeName):k,"inline"===d&&"none"===m.css(a,"float")&&(w.display="inline-block"));b.overflow&&(w.overflow="hidden",n.always(function(){w.overflow=b.overflow[0];w.overflowX=b.overflow[1];w.overflowY=b.overflow[2]}));for(f in c)if(d=c[f],Pb.exec(d)){delete c[f];e=e||"toggle"===d;if(d===(C?"hide":"show"))if("show"===d&&p&&void 0!==p[f])C=!0;else continue;u[f]=p&&p[f]||m.style(a,f)}else k=void 0;if(m.isEmptyObject(u))"inline"===("none"===k?G(a.nodeName):
k)&&(w.display=k);else for(f in p?"hidden"in p&&(C=p.hidden):p=L.access(a,"fxshow",{}),e&&(p.hidden=!C),C?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var c;L.remove(a,"fxshow");for(c in u)m.style(a,c,u[c])}),u)c=da(C?p[f]:0,f,n),f in p||(p[f]=c.start,C&&(c.end=c.start,c.start="width"===f||"height"===f?1:0))}],E={"*":[function(a,c){var b=this.createTween(a,c),f=b.cur(),d=A.exec(c),e=d&&d[3]||(m.cssNumber[a]?"":"px"),h=(m.cssNumber[a]||"px"!==e&&+f)&&A.exec(m.css(b.elem,a)),g=1,k=
20;if(h&&h[3]!==e){e=e||h[3];d=d||[];h=+f||1;do g=g||".5",h/=g,m.style(b.elem,a,h+e);while(g!==(g=b.cur()/f)&&1!==g&&--k)}d&&(h=b.start=+h||+f||0,b.unit=e,b.end=d[1]?h+(d[1]+1)*d[2]:+d[2]);return b}]};m.Animation=m.extend(Aa,{tweener:function(a,c){m.isFunction(a)?(c=a,a=["*"]):a=a.split(" ");for(var b,f=0,d=a.length;f<d;f++)b=a[f],E[b]=E[b]||[],E[b].unshift(c)},prefilter:function(a,c){c?R.unshift(a):R.push(a)}});m.speed=function(a,c,b){var f=a&&"object"===typeof a?m.extend({},a):{complete:b||!b&&
c||m.isFunction(a)&&a,duration:a,easing:b&&c||c&&!m.isFunction(c)&&c};f.duration=m.fx.off?0:"number"===typeof f.duration?f.duration:f.duration in m.fx.speeds?m.fx.speeds[f.duration]:m.fx.speeds._default;if(null==f.queue||!0===f.queue)f.queue="fx";f.old=f.complete;f.complete=function(){m.isFunction(f.old)&&f.old.call(this);f.queue&&m.dequeue(this,f.queue)};return f};m.fn.extend({fadeTo:function(a,c,b,f){return this.filter(ja).css("opacity",0).show().end().animate({opacity:c},a,b,f)},animate:function(a,
c,b,f){var d=m.isEmptyObject(a),e=m.speed(c,b,f);c=function(){var c=Aa(this,m.extend({},a),e);(d||L.get(this,"finish"))&&c.stop(!0)};c.finish=c;return d||!1===e.queue?this.each(c):this.queue(e.queue,c)},stop:function(a,c,b){var f=function(a){var c=a.stop;delete a.stop;c(b)};"string"!==typeof a&&(b=c,c=a,a=void 0);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var c=!0,d=null!=a&&a+"queueHooks",e=m.timers,h=L.get(this);if(d)h[d]&&h[d].stop&&f(h[d]);else for(d in h)h[d]&&h[d].stop&&Z.test(d)&&
f(h[d]);for(d=e.length;d--;)e[d].elem!==this||null!=a&&e[d].queue!==a||(e[d].anim.stop(b),c=!1,e.splice(d,1));!c&&b||m.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var c,b=L.get(this),f=b[a+"queue"];c=b[a+"queueHooks"];var d=m.timers,e=f?f.length:0;b.finish=!0;m.queue(this,a,[]);c&&c.stop&&c.stop.call(this,!0);for(c=d.length;c--;)d[c].elem===this&&d[c].queue===a&&(d[c].anim.stop(!0),d.splice(c,1));for(c=0;c<e;c++)f[c]&&f[c].finish&&f[c].finish.call(this);delete b.finish})}});
m.each(["toggle","show","hide"],function(a,c){var b=m.fn[c];m.fn[c]=function(a,f,d){return null==a||"boolean"===typeof a?b.apply(this,arguments):this.animate(W(c,!0),a,f,d)}});m.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,c){m.fn[a]=function(a,b,f){return this.animate(c,a,b,f)}});m.timers=[];m.fx.tick=function(){var a,c=0,b=m.timers;for(ka=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||
b.splice(c--,1);b.length||m.fx.stop();ka=void 0};m.fx.timer=function(a){m.timers.push(a);a()?m.fx.start():m.timers.pop()};m.fx.interval=13;m.fx.start=function(){Ya||(Ya=setInterval(m.fx.tick,m.fx.interval))};m.fx.stop=function(){clearInterval(Ya);Ya=null};m.fx.speeds={slow:600,fast:200,_default:400};m.fn.delay=function(a,c){a=m.fx?m.fx.speeds[a]||a:a;return this.queue(c||"fx",function(c,b){var f=setTimeout(c,a);b.stop=function(){clearTimeout(f)}})};(function(){var a=H.createElement("input"),c=H.createElement("select"),
b=c.appendChild(H.createElement("option"));a.type="checkbox";P.checkOn=""!==a.value;P.optSelected=b.selected;c.disabled=!0;P.optDisabled=!b.disabled;a=H.createElement("input");a.value="t";a.type="radio";P.radioValue="t"===a.value})();var Y,La=m.expr.attrHandle;m.fn.extend({attr:function(a,c){return xa(this,m.attr,a,c,1<arguments.length)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}});m.extend({attr:function(a,c,b){var f,d,e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if("undefined"===
typeof a.getAttribute)return m.prop(a,c,b);1===e&&m.isXMLDoc(a)||(c=c.toLowerCase(),f=m.attrHooks[c]||(m.expr.match.bool.test(c)?Y:void 0));if(void 0!==b)if(null===b)m.removeAttr(a,c);else{if(f&&"set"in f&&void 0!==(d=f.set(a,b,c)))return d;a.setAttribute(c,b+"");return b}else{if(f&&"get"in f&&null!==(d=f.get(a,c)))return d;d=m.find.attr(a,c);return null==d?void 0:d}}},removeAttr:function(a,c){var b,f,d=0,e=c&&c.match(ua);if(e&&1===a.nodeType)for(;b=e[d++];)f=m.propFix[b]||b,m.expr.match.bool.test(b)&&
(a[f]=!1),a.removeAttribute(b)},attrHooks:{type:{set:function(a,c){if(!P.radioValue&&"radio"===c&&m.nodeName(a,"input")){var b=a.value;a.setAttribute("type",c);b&&(a.value=b);return c}}}}});Y={set:function(a,c,b){!1===c?m.removeAttr(a,b):a.setAttribute(b,b);return b}};m.each(m.expr.match.bool.source.match(/\w+/g),function(a,c){var b=La[c]||m.find.attr;La[c]=function(a,c,f){var d,e;f||(e=La[c],La[c]=d,d=null!=b(a,c,f)?c.toLowerCase():null,La[c]=e);return d}});var Qb=/^(?:input|select|textarea|button)$/i;
m.fn.extend({prop:function(a,c){return xa(this,m.prop,a,c,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[m.propFix[a]||a]})}});m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,c,b){var f,d,e;e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if(e=1!==e||!m.isXMLDoc(a))c=m.propFix[c]||c,d=m.propHooks[c];return void 0!==b?d&&"set"in d&&void 0!==(f=d.set(a,b,c))?f:a[c]=b:d&&"get"in d&&null!==(f=d.get(a,c))?f:a[c]}},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||
Qb.test(a.nodeName)||a.href?a.tabIndex:-1}}}});P.optSelected||(m.propHooks.selected={get:function(a){(a=a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null}});m.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){m.propFix[this.toLowerCase()]=this});var Pa=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var c,b,f,d,e;c="string"===typeof a&&a;var h=0,g=this.length;if(m.isFunction(a))return this.each(function(c){m(this).addClass(a.call(this,
c,this.className))});if(c)for(c=(a||"").match(ua)||[];h<g;h++)if(b=this[h],f=1===b.nodeType&&(b.className?(" "+b.className+" ").replace(Pa," "):" ")){for(e=0;d=c[e++];)0>f.indexOf(" "+d+" ")&&(f+=d+" ");f=m.trim(f);b.className!==f&&(b.className=f)}return this},removeClass:function(a){var c,b,f,d,e;c=0===arguments.length||"string"===typeof a&&a;var h=0,g=this.length;if(m.isFunction(a))return this.each(function(c){m(this).removeClass(a.call(this,c,this.className))});if(c)for(c=(a||"").match(ua)||[];h<
g;h++)if(b=this[h],f=1===b.nodeType&&(b.className?(" "+b.className+" ").replace(Pa," "):"")){for(e=0;d=c[e++];)for(;0<=f.indexOf(" "+d+" ");)f=f.replace(" "+d+" "," ");f=a?m.trim(f):"";b.className!==f&&(b.className=f)}return this},toggleClass:function(a,c){var b=typeof a;return"boolean"===typeof c&&"string"===b?c?this.addClass(a):this.removeClass(a):m.isFunction(a)?this.each(function(b){m(this).toggleClass(a.call(this,b,this.className,c),c)}):this.each(function(){if("string"===b)for(var c,f=0,d=m(this),
e=a.match(ua)||[];c=e[f++];)d.hasClass(c)?d.removeClass(c):d.addClass(c);else if("undefined"===b||"boolean"===b)this.className&&L.set(this,"__className__",this.className),this.className=this.className||!1===a?"":L.get(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var c=0,b=this.length;c<b;c++)if(1===this[c].nodeType&&0<=(" "+this[c].className+" ").replace(Pa," ").indexOf(a))return!0;return!1}});var Vb=/\r/g;m.fn.extend({val:function(a){var c,b,f,d=this[0];if(arguments.length)return f=
m.isFunction(a),this.each(function(b){1===this.nodeType&&(b=f?a.call(this,b,m(this).val()):a,null==b?b="":"number"===typeof b?b+="":m.isArray(b)&&(b=m.map(b,function(a){return null==a?"":a+""})),c=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&void 0!==c.set(this,b,"value")||(this.value=b))});if(d){if((c=m.valHooks[d.type]||m.valHooks[d.nodeName.toLowerCase()])&&"get"in c&&void 0!==(b=c.get(d,"value")))return b;b=d.value;return"string"===typeof b?b.replace(Vb,""):null==
b?"":b}}});m.extend({valHooks:{option:{get:function(a){var c=m.find.attr(a,"value");return null!=c?c:m.trim(m.text(a))}},select:{get:function(a){for(var c,b=a.options,f=a.selectedIndex,d=(a="select-one"===a.type||0>f)?null:[],e=a?f+1:b.length,h=0>f?e:a?f:0;h<e;h++)if(c=b[h],!(!c.selected&&h!==f||(P.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){c=m(c).val();if(a)return c;d.push(c)}return d},set:function(a,c){for(var b,f,d=a.options,
e=m.makeArray(c),h=d.length;h--;)if(f=d[h],f.selected=0<=m.inArray(f.value,e))b=!0;b||(a.selectedIndex=-1);return e}}}});m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,c){if(m.isArray(c))return a.checked=0<=m.inArray(m(a).val(),c)}};P.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,c){m.fn[c]=function(a,b){return 0<arguments.length?this.on(c,null,a,b):this.trigger(c)}});m.fn.extend({hover:function(a,c){return this.mouseenter(a).mouseleave(c||a)},bind:function(a,c,b){return this.on(a,null,c,b)},unbind:function(a,c){return this.off(a,null,c)},delegate:function(a,c,b,f){return this.on(c,a,b,f)},undelegate:function(a,c,b){return 1===arguments.length?this.off(a,"**"):this.off(c,a||"**",b)}});var yb=m.now(),zb=/\?/;m.parseJSON=function(a){return JSON.parse(a+"")};m.parseXML=
function(a){var c,b;if(!a||"string"!==typeof a)return null;try{b=new DOMParser,c=b.parseFromString(a,"text/xml")}catch(f){c=void 0}c&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+a);return c};var za,ea,Rb=/#.*$/,Ab=/([?&])_=[^&]*/,Bb=/^(.*?):[ \t]*([^\r\n]*)$/mg,Sb=/^(?:GET|HEAD)$/,va=/^\/\//,Qa=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ma={},db={},jb="*/".concat("*");try{ea=location.href}catch(ga){ea=H.createElement("a"),ea.href="",ea=ea.href}za=Qa.exec(ea.toLowerCase())||
[];m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ea,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(za[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,
"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,c){return c?oa(oa(a,m.ajaxSettings),c):oa(m.ajaxSettings,a)},ajaxPrefilter:Ba(Ma),ajaxTransport:Ba(db),ajax:function(a,c){function b(a,c,u,h){var k,q,r,x;x=c;if(2!==y){y=2;g&&clearTimeout(g);f=void 0;e=h||"";t.readyState=0<a?4:0;h=200<=a&&300>a||304===a;if(u){r=w;for(var Ea=t,ya,D,z,ra,Oa=r.contents,G=r.dataTypes;"*"===G[0];)G.shift(),void 0===ya&&(ya=r.mimeType||Ea.getResponseHeader("Content-Type"));
if(ya)for(D in Oa)if(Oa[D]&&Oa[D].test(ya)){G.unshift(D);break}if(G[0]in u)z=G[0];else{for(D in u){if(!G[0]||r.converters[D+" "+G[0]]){z=D;break}ra||(ra=D)}z=z||ra}z?(z!==G[0]&&G.unshift(z),r=u[z]):r=void 0}a:{u=w;ya=r;D=t;z=h;var I,F,N,Ea={},Oa=u.dataTypes.slice();if(Oa[1])for(F in u.converters)Ea[F.toLowerCase()]=u.converters[F];for(ra=Oa.shift();ra;)if(u.responseFields[ra]&&(D[u.responseFields[ra]]=ya),!N&&z&&u.dataFilter&&(ya=u.dataFilter(ya,u.dataType)),N=ra,ra=Oa.shift())if("*"===ra)ra=N;else if("*"!==
N&&N!==ra){F=Ea[N+" "+ra]||Ea["* "+ra];if(!F)for(I in Ea)if(r=I.split(" "),r[1]===ra&&(F=Ea[N+" "+r[0]]||Ea["* "+r[0]])){!0===F?F=Ea[I]:!0!==Ea[I]&&(ra=r[0],Oa.unshift(r[1]));break}if(!0!==F)if(F&&u["throws"])ya=F(ya);else try{ya=F(ya)}catch(X){r={state:"parsererror",error:F?X:"No conversion from "+N+" to "+ra};break a}}r={state:"success",data:ya}}if(h)w.ifModified&&((x=t.getResponseHeader("Last-Modified"))&&(m.lastModified[d]=x),(x=t.getResponseHeader("etag"))&&(m.etag[d]=x)),204===a||"HEAD"===w.type?
x="nocontent":304===a?x="notmodified":(x=r.state,k=r.data,q=r.error,h=!q);else if(q=x,a||!x)x="error",0>a&&(a=0);t.status=a;t.statusText=(c||x)+"";h?l.resolveWith(C,[k,x,t]):l.rejectWith(C,[t,x,q]);t.statusCode(v);v=void 0;n&&p.trigger(h?"ajaxSuccess":"ajaxError",[t,w,h?k:q]);pb.fireWith(C,[t,x]);n&&(p.trigger("ajaxComplete",[t,w]),--m.active||m.event.trigger("ajaxStop"))}}"object"===typeof a&&(c=a,a=void 0);c=c||{};var f,d,e,h,g,k,n,u,w=m.ajaxSetup({},c),C=w.context||w,p=w.context&&(C.nodeType||
C.jquery)?m(C):m.event,l=m.Deferred(),pb=m.Callbacks("once memory"),v=w.statusCode||{},q={},r={},y=0,x="canceled",t={readyState:0,getResponseHeader:function(a){var c;if(2===y){if(!h)for(h={};c=Bb.exec(e);)h[c[1].toLowerCase()]=c[2];c=h[a.toLowerCase()]}return null==c?null:c},getAllResponseHeaders:function(){return 2===y?e:null},setRequestHeader:function(a,c){var b=a.toLowerCase();y||(a=r[b]=r[b]||a,q[a]=c);return this},overrideMimeType:function(a){y||(w.mimeType=a);return this},statusCode:function(a){var c;
if(a)if(2>y)for(c in a)v[c]=[v[c],a[c]];else t.always(a[t.status]);return this},abort:function(a){a=a||x;f&&f.abort(a);b(0,a);return this}};l.promise(t).complete=pb.add;t.success=t.done;t.error=t.fail;w.url=((a||w.url||ea)+"").replace(Rb,"").replace(va,za[1]+"//");w.type=c.method||c.type||w.method||w.type;w.dataTypes=m.trim(w.dataType||"*").toLowerCase().match(ua)||[""];null==w.crossDomain&&(k=Qa.exec(w.url.toLowerCase()),w.crossDomain=!(!k||k[1]===za[1]&&k[2]===za[2]&&(k[3]||("http:"===k[1]?"80":
"443"))===(za[3]||("http:"===za[1]?"80":"443"))));w.data&&w.processData&&"string"!==typeof w.data&&(w.data=m.param(w.data,w.traditional));na(Ma,w,c,t);if(2===y)return t;(n=w.global)&&0===m.active++&&m.event.trigger("ajaxStart");w.type=w.type.toUpperCase();w.hasContent=!Sb.test(w.type);d=w.url;w.hasContent||(w.data&&(d=w.url+=(zb.test(d)?"&":"?")+w.data,delete w.data),!1===w.cache&&(w.url=Ab.test(d)?d.replace(Ab,"$1_="+yb++):d+(zb.test(d)?"&":"?")+"_="+yb++));w.ifModified&&(m.lastModified[d]&&t.setRequestHeader("If-Modified-Since",
m.lastModified[d]),m.etag[d]&&t.setRequestHeader("If-None-Match",m.etag[d]));(w.data&&w.hasContent&&!1!==w.contentType||c.contentType)&&t.setRequestHeader("Content-Type",w.contentType);t.setRequestHeader("Accept",w.dataTypes[0]&&w.accepts[w.dataTypes[0]]?w.accepts[w.dataTypes[0]]+("*"!==w.dataTypes[0]?", "+jb+"; q=0.01":""):w.accepts["*"]);for(u in w.headers)t.setRequestHeader(u,w.headers[u]);if(w.beforeSend&&(!1===w.beforeSend.call(C,t,w)||2===y))return t.abort();x="abort";for(u in{success:1,error:1,
complete:1})t[u](w[u]);if(f=na(db,w,c,t)){t.readyState=1;n&&p.trigger("ajaxSend",[t,w]);w.async&&0<w.timeout&&(g=setTimeout(function(){t.abort("timeout")},w.timeout));try{y=1,f.send(q,b)}catch(D){if(2>y)b(-1,D);else throw D;}}else b(-1,"No Transport");return t},getJSON:function(a,c,b){return m.get(a,c,b,"json")},getScript:function(a,c){return m.get(a,void 0,c,"script")}});m.each(["get","post"],function(a,c){m[c]=function(a,b,f,d){m.isFunction(b)&&(d=d||f,f=b,b=void 0);return m.ajax({url:a,type:c,
dataType:d,data:b,success:f})}});m.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,c){m.fn[c]=function(a){return this.on(c,a)}});m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};m.fn.extend({wrapAll:function(a){var c;if(m.isFunction(a))return this.each(function(c){m(this).wrapAll(a.call(this,c))});this[0]&&(c=m(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var a=
this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this));return this},wrapInner:function(a){return m.isFunction(a)?this.each(function(c){m(this).wrapInner(a.call(this,c))}):this.each(function(){var c=m(this),b=c.contents();b.length?b.wrapAll(a):c.append(a)})},wrap:function(a){var c=m.isFunction(a);return this.each(function(b){m(this).wrapAll(c?a.call(this,b):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}});
m.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight};m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Za=/%20/g,Na=/\[\]$/,$a=/\r?\n/g,Wb=/^(?:submit|button|image|reset|file)$/i,Xb=/^(?:input|select|textarea|keygen)/i;m.param=function(a,c){var b,f=[],d=function(a,c){c=m.isFunction(c)?c():null==c?"":c;f[f.length]=encodeURIComponent(a)+"="+encodeURIComponent(c)};void 0===c&&(c=m.ajaxSettings&&m.ajaxSettings.traditional);if(m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,
function(){d(this.name,this.value)});else for(b in a)pa(b,a[b],c,d);return f.join("&").replace(Za,"+")};m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Xb.test(this.nodeName)&&!Wb.test(a)&&(this.checked||!sb.test(a))}).map(function(a,c){var b=m(this).val();return null==b?null:m.isArray(b)?
m.map(b,function(a){return{name:c.name,value:a.replace($a,"\r\n")}}):{name:c.name,value:b.replace($a,"\r\n")}}).get()}});m.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Tb=0,ba={},Yb={0:200,1223:204},ab=m.ajaxSettings.xhr();if(g.ActiveXObject)m(g).on("unload",function(){for(var a in ba)ba[a]()});P.cors=!!ab&&"withCredentials"in ab;P.ajax=ab=!!ab;m.ajaxTransport(function(a){var c;if(P.cors||ab&&!a.crossDomain)return{send:function(b,f){var d,e=a.xhr(),h=++Tb;e.open(a.type,
a.url,a.async,a.username,a.password);if(a.xhrFields)for(d in a.xhrFields)e[d]=a.xhrFields[d];a.mimeType&&e.overrideMimeType&&e.overrideMimeType(a.mimeType);a.crossDomain||b["X-Requested-With"]||(b["X-Requested-With"]="XMLHttpRequest");for(d in b)e.setRequestHeader(d,b[d]);c=function(a){return function(){c&&(delete ba[h],c=e.onload=e.onerror=null,"abort"===a?e.abort():"error"===a?f(e.status,e.statusText):f(Yb[e.status]||e.status,e.statusText,"string"===typeof e.responseText?{text:e.responseText}:void 0,
e.getAllResponseHeaders()))}};e.onload=c();e.onerror=c("error");c=ba[h]=c("abort");try{e.send(a.hasContent&&a.data||null)}catch(g){if(c)throw g;}},abort:function(){c&&c()}}});m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){m.globalEval(a);return a}}});m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});
m.ajaxTransport("script",function(a){if(a.crossDomain){var c,b;return{send:function(f,d){c=m("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",b=function(a){c.remove();b=null;a&&d("error"===a.type?404:200,a.type)});H.head.appendChild(c[0])},abort:function(){b&&b()}}}});var Cb=[],bb=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Cb.pop()||m.expando+"_"+yb++;this[a]=!0;return a}});m.ajaxPrefilter("json jsonp",function(a,c,b){var f,d,e,h=
!1!==a.jsonp&&(bb.test(a.url)?"url":"string"===typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&bb.test(a.data)&&"data");if(h||"jsonp"===a.dataTypes[0])return f=a.jsonpCallback=m.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,h?a[h]=a[h].replace(bb,"$1"+f):!1!==a.jsonp&&(a.url+=(zb.test(a.url)?"&":"?")+a.jsonp+"="+f),a.converters["script json"]=function(){e||m.error(f+" was not called");return e[0]},a.dataTypes[0]="json",d=g[f],g[f]=function(){e=arguments},
b.always(function(){g[f]=d;a[f]&&(a.jsonpCallback=c.jsonpCallback,Cb.push(f));e&&m.isFunction(d)&&d(e[0]);e=d=void 0}),"script"});m.parseHTML=function(a,c,b){if(!a||"string"!==typeof a)return null;"boolean"===typeof c&&(b=c,c=!1);c=c||H;var f=rb.exec(a);b=!b&&[];if(f)return[c.createElement(f[1])];f=m.buildFragment([a],c,b);b&&b.length&&m(b).remove();return m.merge([],f.childNodes)};var kb=m.fn.load;m.fn.load=function(a,c,b){if("string"!==typeof a&&kb)return kb.apply(this,arguments);var f,d,e,h=this,
g=a.indexOf(" ");0<=g&&(f=m.trim(a.slice(g)),a=a.slice(0,g));m.isFunction(c)?(b=c,c=void 0):c&&"object"===typeof c&&(d="POST");0<h.length&&m.ajax({url:a,type:d,dataType:"html",data:c}).done(function(a){e=arguments;h.html(f?m("<div>").append(m.parseHTML(a)).find(f):a)}).complete(b&&function(a,c){h.each(b,e||[a.responseText,c,a])});return this};m.expr.filters.animated=function(a){return m.grep(m.timers,function(c){return a===c.elem}).length};var lb=g.document.documentElement;m.offset={setOffset:function(a,
c,b){var f,d,e,h=m.css(a,"position"),g=m(a),k={};"static"===h&&(a.style.position="relative");e=g.offset();d=m.css(a,"top");f=m.css(a,"left");("absolute"===h||"fixed"===h)&&-1<(d+f).indexOf("auto")?(f=g.position(),d=f.top,f=f.left):(d=parseFloat(d)||0,f=parseFloat(f)||0);m.isFunction(c)&&(c=c.call(a,b,e));null!=c.top&&(k.top=c.top-e.top+d);null!=c.left&&(k.left=c.left-e.left+f);"using"in c?c.using.call(a,k):g.css(k)}};m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(c){m.offset.setOffset(this,
a,c)});var c,b;b=this[0];var f={top:0,left:0},d=b&&b.ownerDocument;if(d){c=d.documentElement;if(!m.contains(c,b))return f;"undefined"!==typeof b.getBoundingClientRect&&(f=b.getBoundingClientRect());b=U(d);return{top:f.top+b.pageYOffset-c.clientTop,left:f.left+b.pageXOffset-c.clientLeft}}},position:function(){if(this[0]){var a,c,b=this[0],f={top:0,left:0};"fixed"===m.css(b,"position")?c=b.getBoundingClientRect():(a=this.offsetParent(),c=this.offset(),m.nodeName(a[0],"html")||(f=a.offset()),f.top+=
m.css(a[0],"borderTopWidth",!0),f.left+=m.css(a[0],"borderLeftWidth",!0));return{top:c.top-f.top-m.css(b,"marginTop",!0),left:c.left-f.left-m.css(b,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||lb;a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position");)a=a.offsetParent;return a||lb})}});m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var b="pageYOffset"===c;m.fn[a]=function(f){return xa(this,function(a,f,d){var e=U(a);
if(void 0===d)return e?e[c]:a[f];e?e.scrollTo(b?g.pageXOffset:d,b?d:g.pageYOffset):a[f]=d},a,f,arguments.length,null)}});m.each(["top","left"],function(a,c){m.cssHooks[c]=F(P.pixelPosition,function(a,b){if(b)return b=I(a,c),qa.test(b)?m(a).position()[c]+"px":b})});m.each({Height:"height",Width:"width"},function(a,c){m.each({padding:"inner"+a,content:c,"":"outer"+a},function(b,f){m.fn[f]=function(f,d){var e=arguments.length&&(b||"boolean"!==typeof f),h=b||(!0===f||!0===d?"margin":"border");return xa(this,
function(c,b,f){return m.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(b=c.documentElement,Math.max(c.body["scroll"+a],b["scroll"+a],c.body["offset"+a],b["offset"+a],b["client"+a])):void 0===f?m.css(c,b,h):m.style(c,b,f,h)},c,e?f:void 0,e,null)}})});m.fn.size=function(){return this.length};m.fn.andSelf=m.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return m});var mb=g.jQuery,Zb=g.$;m.noConflict=function(a){g.$===m&&(g.$=Zb);a&&g.jQuery===m&&
(g.jQuery=mb);return m};"undefined"===typeof l&&(g.jQuery=g.$=m);return m});/*
   Copyright 2008-2014 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net
*/
(function(g,l,e){(function(d){"function"===typeof define&&define.amd?define("datatables",["jquery"],d):"object"===typeof exports?d(require("jquery")):jQuery&&!jQuery.fn.dataTable&&d(jQuery)})(function(d){function p(a){var c,b,f={};d.each(a,function(d,e){(c=d.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(c[1]+" ")&&(b=d.replace(c[0],c[2].toLowerCase()),f[b]=d,"o"===c[1]&&p(a[d]))});a._hungarianMap=f}function n(a,c,b){a._hungarianMap||p(a);var f;d.each(c,function(h,g){f=a._hungarianMap[h];
f===e||!b&&c[f]!==e||("o"===f.charAt(0)?(c[f]||(c[f]={}),d.extend(!0,c[f],c[h]),n(a[f],c[f],b)):c[f]=c[h])})}function k(a){var c=A.defaults.oLanguage,b=a.sZeroRecords;!a.sEmptyTable&&b&&"No data available in table"===c.sEmptyTable&&qa(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&b&&"Loading..."===c.sLoadingRecords&&qa(a,a,"sZeroRecords","sLoadingRecords");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&Ya(a)}function r(a){ga(a,"ordering","bSort");ga(a,"orderMulti","bSortMulti");
ga(a,"orderClasses","bSortClasses");ga(a,"orderCellsTop","bSortCellsTop");ga(a,"order","aaSorting");ga(a,"orderFixed","aaSortingFixed");ga(a,"paging","bPaginate");ga(a,"pagingType","sPaginationType");ga(a,"pageLength","iDisplayLength");ga(a,"searching","bFilter");if(a=a.aoSearchCols)for(var c=0,b=a.length;c<b;c++)a[c]&&n(A.models.oSearch,a[c])}function h(a){ga(a,"orderable","bSortable");ga(a,"orderData","aDataSort");ga(a,"orderSequence","asSorting");ga(a,"orderDataType","sortDataType")}function q(a){a=
a.oBrowser;var c=d("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(d("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(d('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),b=c.find(".test");a.bScrollOversize=100===b[0].offsetWidth;a.bScrollbarLeft=1!==b.offset().left;c.remove()}function t(a,c,b,f,d,h){var g,k=!1;b!==e&&(g=b,k=!0);for(;f!==d;)a.hasOwnProperty(f)&&(g=k?c(g,a[f],f,a):a[f],k=!0,f+=h);return g}
function b(a,c){var b=A.defaults.column,e=a.aoColumns.length,b=d.extend({},A.models.oColumn,b,{nTh:c?c:l.createElement("th"),sTitle:b.sTitle?b.sTitle:c?c.innerHTML:"",aDataSort:b.aDataSort?b.aDataSort:[e],mData:b.mData?b.mData:e,idx:e});a.aoColumns.push(b);b=a.aoPreSearchCols;b[e]=d.extend({},A.models.oSearch,b[e]);f(a,e,null)}function f(a,c,b){c=a.aoColumns[c];var f=a.oClasses,g=d(c.nTh);if(!c.sWidthOrig){c.sWidthOrig=g.attr("width")||null;var k=(g.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);
k&&(c.sWidthOrig=k[1])}b!==e&&null!==b&&(h(b),n(A.defaults.column,b),b.mDataProp===e||b.mData||(b.mData=b.mDataProp),b.sType&&(c._sManualType=b.sType),b.className&&!b.sClass&&(b.sClass=b.className),d.extend(c,b),qa(c,b,"sWidth","sWidthOrig"),"number"===typeof b.iDataSort&&(c.aDataSort=[b.iDataSort]),qa(c,b,"aDataSort"));var p=c.mData,m=S(p),l=c.mRender?S(c.mRender):null;b=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};c._bAttrSrc=d.isPlainObject(p)&&(b(p.sort)||b(p.type)||b(p.filter));
c.fnGetData=function(a,c,b){var f=m(a,c,e,b);return l&&c?l(f,c,a,b):f};c.fnSetData=function(a,c,b){return aa(p)(a,c,b)};"number"!==typeof p&&(a._rowReadObject=!0);a.oFeatures.bSort||(c.bSortable=!1,g.addClass(f.sSortableNone));a=-1!==d.inArray("asc",c.asSorting);b=-1!==d.inArray("desc",c.asSorting);c.bSortable&&(a||b)?a&&!b?(c.sSortingClass=f.sSortableAsc,c.sSortingClassJUI=f.sSortJUIAscAllowed):!a&&b?(c.sSortingClass=f.sSortableDesc,c.sSortingClassJUI=f.sSortJUIDescAllowed):(c.sSortingClass=f.sSortable,
c.sSortingClassJUI=f.sSortJUI):(c.sSortingClass=f.sSortableNone,c.sSortingClassJUI="")}function a(a){if(!1!==a.oFeatures.bAutoWidth){var c=a.aoColumns;wa(a);for(var b=0,f=c.length;b<f;b++)c[b].nTh.style.width=c[b].sWidth}c=a.oScroll;""===c.sY&&""===c.sX||Ra(a);V(a,null,"column-sizing",[a])}function c(a,c){var b=y(a,"bVisible");return"number"===typeof b[c]?b[c]:null}function v(a,c){var b=y(a,"bVisible"),b=d.inArray(c,b);return-1!==b?b:null}function x(a){return y(a,"bVisible").length}function y(a,c){var b=
[];d.map(a.aoColumns,function(a,f){a[c]&&b.push(f)});return b}function D(a){var c=a.aoColumns,b=a.aoData,f=A.ext.type.detect,d,h,g,k,n,p,m,l,r;d=0;for(h=c.length;d<h;d++)if(m=c[d],r=[],!m.sType&&m._sManualType)m.sType=m._sManualType;else if(!m.sType){g=0;for(k=f.length;g<k;g++){n=0;for(p=b.length;n<p;n++){r[n]===e&&(r[n]=M(a,n,d,"type"));l=f[g](r[n],a);if(!l&&g!==f.length-1)break;if("html"===l)break}if(l){m.sType=l;break}}m.sType||(m.sType="string")}}function G(a,c,f,h){var g,k,n,p,m,l,r=a.aoColumns;
if(c)for(g=c.length-1;0<=g;g--){l=c[g];var v=l.targets!==e?l.targets:l.aTargets;d.isArray(v)||(v=[v]);k=0;for(n=v.length;k<n;k++)if("number"===typeof v[k]&&0<=v[k]){for(;r.length<=v[k];)b(a);h(v[k],l)}else if("number"===typeof v[k]&&0>v[k])h(r.length+v[k],l);else if("string"===typeof v[k])for(p=0,m=r.length;p<m;p++)("_all"==v[k]||d(r[p].nTh).hasClass(v[k]))&&h(p,l)}if(f)for(g=0,a=f.length;g<a;g++)h(g,f[g])}function I(a,c,b,f){var e=a.aoData.length,h=d.extend(!0,{},A.models.oRow,{src:b?"dom":"data"});
h._aData=c;a.aoData.push(h);c=a.aoColumns;for(var h=0,g=c.length;h<g;h++)b&&K(a,e,h,M(a,e,h)),c[h].sType=null;a.aiDisplayMaster.push(e);!b&&a.oFeatures.bDeferRender||Aa(a,e,b,f);return e}function F(a,c){var b;c instanceof d||(c=d(c));return c.map(function(c,f){b=ta(a,f);return I(a,b.data,f,b.cells)})}function M(a,c,b,f){var d=a.iDraw,h=a.aoColumns[b],g=a.aoData[c]._aData,k=h.sDefaultContent;b=h.fnGetData(g,f,{settings:a,row:c,col:b});if(b===e)return a.iDrawError!=d&&null===k&&(Ga(a,0,"Requested unknown parameter "+
("function"==typeof h.mData?"{function}":"'"+h.mData+"'")+" for row "+c,4),a.iDrawError=d),k;if((b===g||null===b)&&null!==k)b=k;else if("function"===typeof b)return b.call(g);return null===b&&"display"==f?"":b}function K(a,c,b,f){a.aoColumns[b].fnSetData(a.aoData[c]._aData,f,{settings:a,row:c,col:b})}function J(a){return d.map(a.match(/(\\.|[^\.])+/g),function(a){return a.replace(/\\./g,".")})}function S(a){if(d.isPlainObject(a)){var c={};d.each(a,function(a,b){b&&(c[a]=S(b))});return function(a,
b,f,d){var u=c[b]||c._;return u!==e?u(a,b,f,d):a}}if(null===a)return function(a){return a};if("function"===typeof a)return function(c,b,f,d){return a(c,b,f,d)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(c,b){return c[a]};var b=function(a,c,f){var d,u;if(""!==f){u=J(f);for(var h=0,g=u.length;h<g;h++){f=u[h].match(Za);d=u[h].match(Na);if(f){u[h]=u[h].replace(Za,"");""!==u[h]&&(a=a[u[h]]);d=[];u.splice(0,h+1);u=u.join(".");h=0;for(g=a.length;h<
g;h++)d.push(b(a[h],c,u));a=f[0].substring(1,f[0].length-1);a=""===a?d:d.join(a);break}else if(d){u[h]=u[h].replace(Na,"");a=a[u[h]]();continue}if(null===a||a[u[h]]===e)return e;a=a[u[h]]}}return a};return function(c,f){return b(c,f,a)}}function aa(a){if(d.isPlainObject(a))return aa(a._);if(null===a)return function(){};if("function"===typeof a)return function(c,b,f){a(c,"set",b,f)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(c,b){c[a]=b};var c=
function(a,b,f){f=J(f);var d;d=f[f.length-1];for(var u,h,g=0,k=f.length-1;g<k;g++){u=f[g].match(Za);h=f[g].match(Na);if(u){f[g]=f[g].replace(Za,"");a[f[g]]=[];d=f.slice();d.splice(0,g+1);u=d.join(".");h=0;for(k=b.length;h<k;h++)d={},c(d,b[h],u),a[f[g]].push(d);return}h&&(f[g]=f[g].replace(Na,""),a=a[f[g]](b));if(null===a[f[g]]||a[f[g]]===e)a[f[g]]={};a=a[f[g]]}if(d.match(Na))a[d.replace(Na,"")](b);else a[d.replace(Za,"")]=b};return function(b,f){return c(b,f,a)}}function N(a){return va(a.aoData,"_aData")}
function ca(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0}function W(a,c,b){for(var f=-1,d=0,h=a.length;d<h;d++)a[d]==c?f=d:a[d]>c&&a[d]--; -1!=f&&b===e&&a.splice(f,1)}function da(a,c,b,f){var d=a.aoData[c],h,g=function(b,f){for(;b.childNodes.length;)b.removeChild(b.firstChild);b.innerHTML=M(a,c,f,"display")};if("dom"!==b&&(b&&"auto"!==b||"dom"!==d.src)){var k=d.anCells;if(k)if(f!==e)g(k[f],f);else for(b=0,h=k.length;b<h;b++)g(k[b],b)}else d._aData=ta(a,d,f,f===e?e:d._aData).data;
d._aSortData=null;d._aFilterData=null;g=a.aoColumns;if(f!==e)g[f].sType=null;else{b=0;for(h=g.length;b<h;b++)g[b].sType=null;Ba(d)}}function ta(a,c,b,f){var h=[],g=c.firstChild,k,n=0,p,m=a.aoColumns,l=a._rowReadObject;f=f||l?{}:[];var v=function(a,c){if("string"===typeof a){var b=a.indexOf("@");-1!==b&&(b=a.substring(b+1),aa(a)(f,c.getAttribute(b)))}};a=function(a){if(b===e||b===n)k=m[n],p=d.trim(a.innerHTML),k&&k._bAttrSrc?(aa(k.mData._)(f,p),v(k.mData.sort,a),v(k.mData.type,a),v(k.mData.filter,
a)):l?(k._setter||(k._setter=aa(k.mData)),k._setter(f,p)):f[n]=p;n++};if(g)for(;g;){c=g.nodeName.toUpperCase();if("TD"==c||"TH"==c)a(g),h.push(g);g=g.nextSibling}else for(h=c.anCells,g=0,c=h.length;g<c;g++)a(h[g]);return{data:f,cells:h}}function Aa(a,c,b,f){var d=a.aoData[c],e=d._aData,h=[],g,k,n,p,m;if(null===d.nTr){g=b||l.createElement("tr");d.nTr=g;d.anCells=h;g._DT_RowIndex=c;Ba(d);p=0;for(m=a.aoColumns.length;p<m;p++){n=a.aoColumns[p];k=b?f[p]:l.createElement(n.sCellType);h.push(k);if(!b||n.mRender||
n.mData!==p)k.innerHTML=M(a,c,p,"display");n.sClass&&(k.className+=" "+n.sClass);n.bVisible&&!b?g.appendChild(k):!n.bVisible&&b&&k.parentNode.removeChild(k);n.fnCreatedCell&&n.fnCreatedCell.call(a.oInstance,k,M(a,c,p),e,c,p)}V(a,"aoRowCreatedCallback",null,[g,e,c])}d.nTr.setAttribute("role","row")}function Ba(a){var c=a.nTr,b=a._aData;if(c){b.DT_RowId&&(c.id=b.DT_RowId);if(b.DT_RowClass){var f=b.DT_RowClass.split(" ");a.__rowc=a.__rowc?jb(a.__rowc.concat(f)):f;d(c).removeClass(a.__rowc.join(" ")).addClass(b.DT_RowClass)}b.DT_RowData&&
d(c).data(b.DT_RowData)}}function na(a){var c,b,f,e,h,g=a.nTHead,k=a.nTFoot,n=0===d("th, td",g).length,p=a.oClasses,m=a.aoColumns;n&&(e=d("<tr/>").appendTo(g));c=0;for(b=m.length;c<b;c++)h=m[c],f=d(h.nTh).addClass(h.sClass),n&&f.appendTo(e),a.oFeatures.bSort&&(f.addClass(h.sSortingClass),!1!==h.bSortable&&(f.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),hb(a,h.nTh,c))),h.sTitle!=f.html()&&f.html(h.sTitle),ib(a,"header")(a,f,h,p);n&&fa(a.aoHeader,g);d(g).find(">tr").attr("role","row");
d(g).find(">tr>th, >tr>td").addClass(p.sHeaderTH);d(k).find(">tr>th, >tr>td").addClass(p.sFooterTH);if(null!==k)for(a=a.aoFooter[0],c=0,b=a.length;c<b;c++)h=m[c],h.nTf=a[c].cell,h.sClass&&d(h.nTf).addClass(h.sClass)}function oa(a,c,b){var f,h,g,k=[],n=[],p=a.aoColumns.length,m;if(c){b===e&&(b=!1);f=0;for(h=c.length;f<h;f++){k[f]=c[f].slice();k[f].nTr=c[f].nTr;for(g=p-1;0<=g;g--)a.aoColumns[g].bVisible||b||k[f].splice(g,1);n.push([])}f=0;for(h=k.length;f<h;f++){if(a=k[f].nTr)for(;g=a.firstChild;)a.removeChild(g);
g=0;for(c=k[f].length;g<c;g++)if(m=p=1,n[f][g]===e){a.appendChild(k[f][g].cell);for(n[f][g]=1;k[f+p]!==e&&k[f][g].cell==k[f+p][g].cell;)n[f+p][g]=1,p++;for(;k[f][g+m]!==e&&k[f][g].cell==k[f][g+m].cell;){for(b=0;b<p;b++)n[f+b][g+m]=1;m++}d(k[f][g].cell).attr("rowspan",p).attr("colspan",m)}}}}function pa(a){var c=V(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==d.inArray(!1,c))T(a,!1);else{var c=[],b=0,f=a.asStripeClasses,h=f.length,g=a.oLanguage,k=a.iInitDisplayStart,n="ssp"==ha(a),p=a.aiDisplay;a.bDrawing=
!0;k!==e&&-1!==k&&(a._iDisplayStart=n?k:k>=a.fnRecordsDisplay()?0:k,a.iInitDisplayStart=-1);var k=a._iDisplayStart,m=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,T(a,!1);else if(!n)a.iDraw++;else if(!a.bDestroying&&!Fa(a))return;if(0!==p.length)for(g=n?a.aoData.length:m,n=n?0:k;n<g;n++){var l=p[n],v=a.aoData[l];null===v.nTr&&Aa(a,l);l=v.nTr;if(0!==h){var r=f[b%h];v._sRowStripe!=r&&(d(l).removeClass(v._sRowStripe).addClass(r),v._sRowStripe=r)}V(a,"aoRowCallback",null,[l,v._aData,
b,n]);c.push(l);b++}else b=g.sZeroRecords,1==a.iDraw&&"ajax"==ha(a)?b=g.sLoadingRecords:g.sEmptyTable&&0===a.fnRecordsTotal()&&(b=g.sEmptyTable),c[0]=d("<tr/>",{"class":h?f[0]:""}).append(d("<td />",{valign:"top",colSpan:x(a),"class":a.oClasses.sRowEmpty}).html(b))[0];V(a,"aoHeaderCallback","header",[d(a.nTHead).children("tr")[0],N(a),k,m,p]);V(a,"aoFooterCallback","footer",[d(a.nTFoot).children("tr")[0],N(a),k,m,p]);f=d(a.nTBody);f.children().detach();f.append(d(c));V(a,"aoDrawCallback","draw",[a]);
a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function U(a,c){var b=a.oFeatures,f=b.bFilter;b.bSort&&Mb(a);f?H(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==c&&(a._iDisplayStart=0);a._drawHold=c;pa(a);a._drawHold=!1}function la(a){var c=a.oClasses,b=d(a.nTable),b=d("<div/>").insertBefore(b),f=a.oFeatures,e=d("<div/>",{id:a.sTableId+"_wrapper","class":c.sWrapper+(a.nTFoot?"":" "+c.sNoFooter)});a.nHolding=b[0];a.nTableWrapper=e[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var h=
a.sDom.split(""),g,k,n,p,m,l,v=0;v<h.length;v++){g=null;k=h[v];if("<"==k){n=d("<div/>")[0];p=h[v+1];if("'"==p||'"'==p){m="";for(l=2;h[v+l]!=p;)m+=h[v+l],l++;"H"==m?m=c.sJUIHeader:"F"==m&&(m=c.sJUIFooter);-1!=m.indexOf(".")?(p=m.split("."),n.id=p[0].substr(1,p[0].length-1),n.className=p[1]):"#"==m.charAt(0)?n.id=m.substr(1,m.length-1):n.className=m;v+=l}e.append(n);e=d(n)}else if(">"==k)e=e.parent();else if("l"==k&&f.bPaginate&&f.bLengthChange)g=nb(a);else if("f"==k&&f.bFilter)g=P(a);else if("r"==
k&&f.bProcessing)g=L(a);else if("t"==k)g=Eb(a);else if("i"==k&&f.bInfo)g=Db(a);else if("p"==k&&f.bPaginate)g=Xa(a);else if(0!==A.ext.feature.length)for(n=A.ext.feature,l=0,p=n.length;l<p;l++)if(k==n[l].cFeature){g=n[l].fnInit(a);break}g&&(n=a.aanFeatures,n[k]||(n[k]=[]),n[k].push(g),e.append(g))}b.replaceWith(e)}function fa(a,c){var b=d(c).children("tr"),f,e,h,g,k,n,p,m,l,v;a.splice(0,a.length);h=0;for(n=b.length;h<n;h++)a.push([]);h=0;for(n=b.length;h<n;h++)for(f=b[h],e=f.firstChild;e;){if("TD"==
e.nodeName.toUpperCase()||"TH"==e.nodeName.toUpperCase()){m=1*e.getAttribute("colspan");l=1*e.getAttribute("rowspan");m=m&&0!==m&&1!==m?m:1;l=l&&0!==l&&1!==l?l:1;g=0;for(k=a[h];k[g];)g++;p=g;v=1===m?!0:!1;for(k=0;k<m;k++)for(g=0;g<l;g++)a[h+g][p+k]={cell:e,unique:v},a[h+g].nTr=f}e=e.nextSibling}}function Ha(a,c,b){var f=[];b||(b=a.aoHeader,c&&(b=[],fa(b,c)));c=0;for(var d=b.length;c<d;c++)for(var e=0,h=b[c].length;e<h;e++)!b[c][e].unique||f[e]&&a.bSortCellsTop||(f[e]=b[c][e].cell);return f}function Ca(a,
c,b){V(a,"aoServerParams","serverParams",[c]);if(c&&d.isArray(c)){var f={},e=/(.*?)\[\]$/;d.each(c,function(a,c){var b=c.name.match(e);b?(b=b[0],f[b]||(f[b]=[]),f[b].push(c.value)):f[c.name]=c.value});c=f}var h,g=a.ajax,k=a.oInstance;if(d.isPlainObject(g)&&g.data){h=g.data;var n=d.isFunction(h)?h(c):h;c=d.isFunction(h)&&n?n:d.extend(!0,c,n);delete g.data}n={data:c,success:function(c){var f=c.error||c.sError;f&&a.oApi._fnLog(a,0,f);a.json=c;V(a,null,"xhr",[a,c]);b(c)},dataType:"json",cache:!1,type:a.sServerMethod,
error:function(c,b,f){f=a.oApi._fnLog;"parsererror"==b?f(a,0,"Invalid JSON response",1):4===c.readyState&&f(a,0,"Ajax error",7);T(a,!1)}};a.oAjaxData=c;V(a,null,"preXhr",[a,c]);a.fnServerData?a.fnServerData.call(k,a.sAjaxSource,d.map(c,function(a,c){return{name:c,value:a}}),b,a):a.sAjaxSource||"string"===typeof g?a.jqXHR=d.ajax(d.extend(n,{url:g||a.sAjaxSource})):d.isFunction(g)?a.jqXHR=g.call(k,c,b,a):(a.jqXHR=d.ajax(d.extend(n,g)),g.data=h)}function Fa(a){return a.bAjaxDataGet?(a.iDraw++,T(a,!0),
Ca(a,Ia(a),function(c){eb(a,c)}),!1):!0}function Ia(a){var c=a.aoColumns,b=c.length,f=a.oFeatures,e=a.oPreviousSearch,h=a.aoPreSearchCols,g,k=[],n,p,m,l=Ka(a);g=a._iDisplayStart;n=!1!==f.bPaginate?a._iDisplayLength:-1;var v=function(a,c){k.push({name:a,value:c})};v("sEcho",a.iDraw);v("iColumns",b);v("sColumns",va(c,"sName").join(","));v("iDisplayStart",g);v("iDisplayLength",n);var r={draw:a.iDraw,columns:[],order:[],start:g,length:n,search:{value:e.sSearch,regex:e.bRegex}};for(g=0;g<b;g++)p=c[g],
m=h[g],n="function"==typeof p.mData?"function":p.mData,r.columns.push({data:n,name:p.sName,searchable:p.bSearchable,orderable:p.bSortable,search:{value:m.sSearch,regex:m.bRegex}}),v("mDataProp_"+g,n),f.bFilter&&(v("sSearch_"+g,m.sSearch),v("bRegex_"+g,m.bRegex),v("bSearchable_"+g,p.bSearchable)),f.bSort&&v("bSortable_"+g,p.bSortable);f.bFilter&&(v("sSearch",e.sSearch),v("bRegex",e.bRegex));f.bSort&&(d.each(l,function(a,c){r.order.push({column:c.col,dir:c.dir});v("iSortCol_"+a,c.col);v("sSortDir_"+
a,c.dir)}),v("iSortingCols",l.length));c=A.ext.legacy.ajax;return null===c?a.sAjaxSource?k:r:c?k:r}function eb(a,c){var b=function(a,b){return c[a]!==e?c[a]:c[b]},f=b("sEcho","draw"),d=b("iTotalRecords","recordsTotal"),b=b("iTotalDisplayRecords","recordsFiltered");if(f){if(1*f<a.iDraw)return;a.iDraw=1*f}ca(a);a._iRecordsTotal=parseInt(d,10);a._iRecordsDisplay=parseInt(b,10);f=Da(a,c);d=0;for(b=f.length;d<b;d++)I(a,f[d]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;pa(a);a._bInitComplete||
gb(a,c);a.bAjaxDataGet=!0;T(a,!1)}function Da(a,c){var b=d.isPlainObject(a.ajax)&&a.ajax.dataSrc!==e?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===b?c.aaData||c[b]:""!==b?S(b)(c):c}function P(a){var c=a.oClasses,b=a.sTableId,f=a.oLanguage,e=a.oPreviousSearch,h=a.aanFeatures,g='<input type="search" class="'+c.sFilterInput+'"/>',k=f.sSearch,k=k.match(/_INPUT_/)?k.replace("_INPUT_",g):k+g,c=d("<div/>",{id:h.f?null:b+"_filter","class":c.sFilter}).append(d("<label/>").append(k)),h=function(){var c=this.value?
this.value:"";c!=e.sSearch&&(H(a,{sSearch:c,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),a._iDisplayStart=0,pa(a))},g=null!==a.searchDelay?a.searchDelay:"ssp"===ha(a)?400:0,n=d("input",c).val(e.sSearch).attr("placeholder",f.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",g?ja(h,g):h).bind("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",b);d(a.nTable).on("search.dt.DT",function(c,b){if(a===b)try{n[0]!==l.activeElement&&n.val(e.sSearch)}catch(f){}});
return c[0]}function H(a,c,b){var f=a.oPreviousSearch,d=a.aoPreSearchCols,h=function(a){f.sSearch=a.sSearch;f.bRegex=a.bRegex;f.bSmart=a.bSmart;f.bCaseInsensitive=a.bCaseInsensitive},g=function(a){return a.bEscapeRegex!==e?!a.bEscapeRegex:a.bRegex};D(a);if("ssp"!=ha(a)){Hb(a,c.sSearch,b,g(c),c.bSmart,c.bCaseInsensitive);h(c);for(c=0;c<d.length;c++)Gb(a,d[c].sSearch,c,g(d[c]),d[c].bSmart,d[c].bCaseInsensitive);m(a)}else h(c);a.bFiltered=!0;V(a,null,"search",[a])}function m(a){for(var c=A.ext.search,
b=a.aiDisplay,f,d,e=0,h=c.length;e<h;e++){for(var g=[],k=0,n=b.length;k<n;k++)d=b[k],f=a.aoData[d],c[e](a,f._aFilterData,d,f._aData,k)&&g.push(d);b.length=0;b.push.apply(b,g)}}function Gb(a,c,b,f,d,e){if(""!==c){var h=a.aiDisplay;f=ob(c,f,d,e);for(d=h.length-1;0<=d;d--)c=a.aoData[h[d]]._aFilterData[b],f.test(c)||h.splice(d,1)}}function Hb(a,c,b,f,d,e){f=ob(c,f,d,e);d=a.oPreviousSearch.sSearch;e=a.aiDisplayMaster;var h;0!==A.ext.search.length&&(b=!0);h=Ja(a);if(0>=c.length)a.aiDisplay=e.slice();else{if(h||
b||d.length>c.length||0!==c.indexOf(d)||a.bSorted)a.aiDisplay=e.slice();c=a.aiDisplay;for(b=c.length-1;0<=b;b--)f.test(a.aoData[c[b]]._sFilterRow)||c.splice(b,1)}}function ob(a,c,b,f){a=c?a:fb(a);b&&(a="^(?=.*?"+d.map(a.match(/"[^"]+"|[^ ]+/g)||"",function(a){if('"'===a.charAt(0)){var c=a.match(/^"(.*)"$/);a=c?c[1]:a}return a.replace('"',"")}).join(")(?=.*?")+").*$");return new RegExp(a,f?"i":"")}function fb(a){return a.replace(zb,"\\$1")}function Ja(a){var c=a.aoColumns,b,f,d,e,h,g,k,n,p=A.ext.type.search;
b=!1;f=0;for(e=a.aoData.length;f<e;f++)if(n=a.aoData[f],!n._aFilterData){g=[];d=0;for(h=c.length;d<h;d++)b=c[d],b.bSearchable?(k=M(a,f,d,"filter"),p[b.sType]&&(k=p[b.sType](k)),null===k&&(k=""),"string"!==typeof k&&k.toString&&(k=k.toString())):k="",k.indexOf&&-1!==k.indexOf("&")&&($a.innerHTML=k,k=Wb?$a.textContent:$a.innerText),k.replace&&(k=k.replace(/[\r\n]/g,"")),g.push(k);n._aFilterData=g;n._sFilterRow=g.join("  ");b=!0}return b}function qb(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,
caseInsensitive:a.bCaseInsensitive}}function rb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function Db(a){var c=a.sTableId,b=a.aanFeatures.i,f=d("<div/>",{"class":a.oClasses.sInfo,id:b?null:c+"_info"});b||(a.aoDrawCallback.push({fn:Va,sName:"information"}),f.attr("role","status").attr("aria-live","polite"),d(a.nTable).attr("aria-describedby",c+"_info"));return f[0]}function Va(a){var c=a.aanFeatures.i;if(0!==c.length){var b=a.oLanguage,f=a._iDisplayStart+
1,e=a.fnDisplayEnd(),h=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),k=g?b.sInfo:b.sInfoEmpty;g!==h&&(k+=" "+b.sInfoFiltered);k+=b.sInfoPostFix;k=Jb(a,k);b=b.fnInfoCallback;null!==b&&(k=b.call(a.oInstance,a,f,e,h,g,k));d(c).html(k)}}function Jb(a,c){var b=a.fnFormatNumber,f=a._iDisplayStart+1,d=a._iDisplayLength,e=a.fnRecordsDisplay(),h=-1===d;return c.replace(/_START_/g,b.call(a,f)).replace(/_END_/g,b.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,b.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,b.call(a,
e)).replace(/_PAGE_/g,b.call(a,h?1:Math.ceil(f/d))).replace(/_PAGES_/g,b.call(a,h?1:Math.ceil(e/d)))}function Wa(a){var c,b,f=a.iInitDisplayStart,d=a.aoColumns,e;b=a.oFeatures;if(a.bInitialised){la(a);na(a);oa(a,a.aoHeader);oa(a,a.aoFooter);T(a,!0);b.bAutoWidth&&wa(a);c=0;for(b=d.length;c<b;c++)e=d[c],e.sWidth&&(e.nTh.style.width=Q(e.sWidth));U(a);d=ha(a);"ssp"!=d&&("ajax"==d?Ca(a,[],function(b){var d=Da(a,b);for(c=0;c<d.length;c++)I(a,d[c]);a.iInitDisplayStart=f;U(a);T(a,!1);gb(a,b)},a):(T(a,!1),
gb(a)))}else setTimeout(function(){Wa(a)},200)}function gb(c,b){c._bInitComplete=!0;b&&a(c);V(c,"aoInitComplete","init",[c,b])}function ua(a,c){var b=parseInt(c,10);a._iDisplayLength=b;xb(a);V(a,null,"length",[a,b])}function nb(a){for(var c=a.oClasses,b=a.sTableId,f=a.aLengthMenu,e=d.isArray(f[0]),h=e?f[0]:f,f=e?f[1]:f,e=d("<select/>",{name:b+"_length","aria-controls":b,"class":c.sLengthSelect}),g=0,k=h.length;g<k;g++)e[0][g]=new Option(f[g],h[g]);var n=d("<div><label/></div>").addClass(c.sLength);
a.aanFeatures.l||(n[0].id=b+"_length");n.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",e[0].outerHTML));d("select",n).val(a._iDisplayLength).bind("change.DT",function(c){ua(a,d(this).val());pa(a)});d(a.nTable).bind("length.dt.DT",function(c,b,f){a===b&&d("select",n).val(f)});return n[0]}function Xa(a){var c=a.sPaginationType,b=A.ext.pager[c],f="function"===typeof b,e=function(a){pa(a)},c=d("<div/>").addClass(a.oClasses.sPaging+c)[0],h=a.aanFeatures;f||b.fnInit(a,c,e);h.p||(c.id=a.sTableId+
"_paginate",a.aoDrawCallback.push({fn:function(a){if(f){var c=a._iDisplayStart,d=a._iDisplayLength,g=a.fnRecordsDisplay(),k=-1===d,c=k?0:Math.ceil(c/d),d=k?1:Math.ceil(g/d),g=b(c,d),u,k=0;for(u=h.p.length;k<u;k++)ib(a,"pageButton")(a,h.p[k],k,g,c,d)}else b.fnUpdate(a,e)},sName:"pagination"}));return c}function xa(a,c,b){var f=a._iDisplayStart,d=a._iDisplayLength,e=a.fnRecordsDisplay();0===e||-1===d?f=0:"number"===typeof c?(f=c*d,f>e&&(f=0)):"first"==c?f=0:"previous"==c?(f=0<=d?f-d:0,0>f&&(f=0)):"next"==
c?f+d<e&&(f+=d):"last"==c?f=Math.floor((e-1)/d)*d:Ga(a,0,"Unknown paging action: "+c,5);c=a._iDisplayStart!==f;a._iDisplayStart=f;c&&(V(a,null,"page",[a]),b&&pa(a));return c}function L(a){return d("<div/>",{id:a.aanFeatures.r?null:a.sTableId+"_processing","class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function T(a,c){a.oFeatures.bProcessing&&d(a.aanFeatures.r).css("display",c?"block":"none");V(a,null,"processing",[a,c])}function Eb(a){var c=d(a.nTable);c.attr("role",
"grid");var b=a.oScroll;if(""===b.sX&&""===b.sY)return a.nTable;var f=b.sX,e=b.sY,h=a.oClasses,g=c.children("caption"),k=g.length?g[0]._captionSide:null,n=d(c[0].cloneNode(!1)),p=d(c[0].cloneNode(!1)),m=c.children("tfoot");b.sX&&"100%"===c.attr("width")&&c.removeAttr("width");m.length||(m=null);b=d("<div/>",{"class":h.sScrollWrapper}).append(d("<div/>",{"class":h.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:f?f?Q(f):null:"100%"}).append(d("<div/>",{"class":h.sScrollHeadInner}).css({"box-sizing":"content-box",
width:b.sXInner||"100%"}).append(n.removeAttr("id").css("margin-left",0).append("top"===k?g:null).append(c.children("thead"))))).append(d("<div/>",{"class":h.sScrollBody}).css({overflow:"auto",height:e?Q(e):null,width:f?Q(f):null}).append(c));m&&b.append(d("<div/>",{"class":h.sScrollFoot}).css({overflow:"hidden",border:0,width:f?f?Q(f):null:"100%"}).append(d("<div/>",{"class":h.sScrollFootInner}).append(p.removeAttr("id").css("margin-left",0).append("bottom"===k?g:null).append(c.children("tfoot")))));
var c=b.children(),l=c[0],h=c[1],v=m?c[2]:null;f&&d(h).scroll(function(a){a=this.scrollLeft;l.scrollLeft=a;m&&(v.scrollLeft=a)});a.nScrollHead=l;a.nScrollBody=h;a.nScrollFoot=v;a.aoDrawCallback.push({fn:Ra,sName:"scrolling"});return b[0]}function Ra(a){var b=a.oScroll,f=b.sX,e=b.sXInner,h=b.sY,g=b.iBarWidth,k=d(a.nScrollHead),n=k[0].style,p=k.children("div"),m=p[0].style,l=p.children("table"),p=a.nScrollBody,v=d(p),r=p.style,q=d(a.nScrollFoot).children("div"),y=q.children("table"),x=d(a.nTHead),t=
d(a.nTable),D=t[0],G=D.style,I=a.nTFoot?d(a.nTFoot):null,F=a.oBrowser,N=F.bScrollOversize,M,z,A,K,J,ca=[],W=[],da=[],H,E=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};t.children("thead, tfoot").remove();J=x.clone().prependTo(t);M=x.find("tr");A=J.find("tr");J.find("th, td").removeAttr("tabindex");I&&(K=I.clone().prependTo(t),z=I.find("tr"),K=K.find("tr"));f||(r.width="100%",k[0].style.width="100%");d.each(Ha(a,J),function(b,f){H=
c(a,b);f.style.width=a.aoColumns[H].sWidth});I&&sa(function(a){a.style.width=""},K);b.bCollapse&&""!==h&&(r.height=v[0].offsetHeight+x[0].offsetHeight+"px");k=t.outerWidth();""===f?(G.width="100%",N&&(t.find("tbody").height()>p.offsetHeight||"scroll"==v.css("overflow-y"))&&(G.width=Q(t.outerWidth()-g))):""!==e?G.width=Q(e):k==v.width()&&v.height()<t.height()?(G.width=Q(k-g),t.outerWidth()>k-g&&(G.width=Q(k))):G.width=Q(k);k=t.outerWidth();sa(E,A);sa(function(a){da.push(a.innerHTML);ca.push(Q(d(a).css("width")))},
A);sa(function(a,c){a.style.width=ca[c]},M);d(A).height(0);I&&(sa(E,K),sa(function(a){W.push(Q(d(a).css("width")))},K),sa(function(a,c){a.style.width=W[c]},z),d(K).height(0));sa(function(a,c){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+da[c]+"</div>";a.style.width=ca[c]},A);I&&sa(function(a,c){a.innerHTML="";a.style.width=W[c]},K);t.outerWidth()<k?(z=p.scrollHeight>p.offsetHeight||"scroll"==v.css("overflow-y")?k+g:k,N&&(p.scrollHeight>p.offsetHeight||"scroll"==
v.css("overflow-y"))&&(G.width=Q(z-g)),""!==f&&""===e||Ga(a,1,"Possible column misalignment",6)):z="100%";r.width=Q(z);n.width=Q(z);I&&(a.nScrollFoot.style.width=Q(z));!h&&N&&(r.height=Q(D.offsetHeight+g));h&&b.bCollapse&&(r.height=Q(h),b=f&&D.offsetWidth>p.offsetWidth?g:0,D.offsetHeight<p.offsetHeight&&(r.height=Q(D.offsetHeight+b)));b=t.outerWidth();l[0].style.width=Q(b);m.width=Q(b);l=t.height()>p.clientHeight||"scroll"==v.css("overflow-y");F="padding"+(F.bScrollbarLeft?"Left":"Right");m[F]=l?
g+"px":"0px";I&&(y[0].style.width=Q(b),q[0].style.width=Q(b),q[0].style[F]=l?g+"px":"0px");v.scroll();!a.bSorted&&!a.bFiltered||a._drawHold||(p.scrollTop=0)}function sa(a,c,b){for(var f=0,d=0,e=c.length,h,g;d<e;){h=c[d].firstChild;for(g=b?b[d].firstChild:null;h;)1===h.nodeType&&(b?a(h,g,f):a(h,f),f++),h=h.nextSibling,g=b?g.nextSibling:null;d++}}function wa(c){var b=c.nTable,f=c.aoColumns,e=c.oScroll,h=e.sY,k=e.sX,n=e.sXInner,p=f.length,e=y(c,"bVisible"),m=d("th",c.nTHead),l=b.getAttribute("width"),
v=b.parentNode,r=!1,q,t;for(q=0;q<e.length;q++)t=f[e[q]],null!==t.sWidth&&(t.sWidth=sb(t.sWidthOrig,v),r=!0);if(r||k||h||p!=x(c)||p!=m.length){p=d(b).clone().empty().css("visibility","hidden").removeAttr("id").append(d(c.nTHead).clone(!1)).append(d(c.nTFoot).clone(!1)).append(d("<tbody><tr/></tbody>"));p.find("tfoot th, tfoot td").css("width","");var D=p.find("tbody tr"),m=Ha(c,p.find("thead")[0]);for(q=0;q<e.length;q++)t=f[e[q]],m[q].style.width=null!==t.sWidthOrig&&""!==t.sWidthOrig?Q(t.sWidthOrig):
"";if(c.aoData.length)for(q=0;q<e.length;q++)r=e[q],t=f[r],d(Lb(c,r)).clone(!1).append(t.sContentPadding).appendTo(D);p.appendTo(v);k&&n?p.width(n):k?(p.css("width","auto"),p.width()<v.offsetWidth&&p.width(v.offsetWidth)):h?p.width(v.offsetWidth):l&&p.width(l);Kb(c,p[0]);if(k){for(q=n=0;q<e.length;q++)t=f[e[q]],h=d(m[q]).outerWidth(),n+=null===t.sWidthOrig?h:parseInt(t.sWidth,10)+h-d(m[q]).width();p.width(Q(n));b.style.width=Q(n)}for(q=0;q<e.length;q++)if(t=f[e[q]],h=d(m[q]).width())t.sWidth=Q(h);
b.style.width=Q(p.css("width"));p.remove()}else for(q=0;q<p;q++)f[q].sWidth=Q(m.eq(q).width());l&&(b.style.width=Q(l));!l&&!k||c._reszEvt||(d(g).bind("resize.DT-"+c.sInstance,ja(function(){a(c)})),c._reszEvt=!0)}function ja(a,c){var b=c!==e?c:200,f,d;return function(){var c=this,h=+new Date,g=arguments;f&&h<f+b?(clearTimeout(d),d=setTimeout(function(){f=e;a.apply(c,g)},b)):f?(f=h,a.apply(c,g)):f=h}}function sb(a,c){if(!a)return 0;var b=d("<div/>").css("width",Q(a)).appendTo(c||l.body),f=b[0].offsetWidth;
b.remove();return f}function Kb(a,c){var b=a.oScroll;if(b.sX||b.sY)b=b.sX?0:b.iBarWidth,c.style.width=Q(d(c).outerWidth()-b)}function Lb(a,c){var b=tb(a,c);if(0>b)return null;var f=a.aoData[b];return f.nTr?f.anCells[c]:d("<td/>").html(M(a,b,c,"display"))[0]}function tb(a,c){for(var b,f=-1,d=-1,e=0,h=a.aoData.length;e<h;e++)b=M(a,e,c,"display")+"",b=b.replace(Xb,""),b.length>f&&(f=b.length,d=e);return d}function Q(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}
function ub(){if(!A.__scrollbarWidth){var a=d("<p/>").css({width:"100%",height:200,padding:0})[0],c=d("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(a).appendTo("body"),b=a.offsetWidth;c.css("overflow","scroll");a=a.offsetWidth;b===a&&(a=c[0].clientWidth);c.remove();A.__scrollbarWidth=b-a}return A.__scrollbarWidth}function Ka(a){var c,b,f=[],h=a.aoColumns,g,k,n,p;c=a.aaSortingFixed;b=d.isPlainObject(c);var m=[];g=function(a){a.length&&
!d.isArray(a[0])?m.push(a):m.push.apply(m,a)};d.isArray(c)&&g(c);b&&c.pre&&g(c.pre);g(a.aaSorting);b&&c.post&&g(c.post);for(a=0;a<m.length;a++)for(p=m[a][0],g=h[p].aDataSort,c=0,b=g.length;c<b;c++)k=g[c],n=h[k].sType||"string",m[a]._idx===e&&(m[a]._idx=d.inArray(m[a][1],h[k].asSorting)),f.push({src:p,col:k,dir:m[a][1],index:m[a]._idx,type:n,formatter:A.ext.type.order[n+"-pre"]});return f}function Mb(a){var c,b,f=[],d=A.ext.type.order,e=a.aoData,h=0,g,k=a.aiDisplayMaster,n;D(a);n=Ka(a);c=0;for(b=n.length;c<
b;c++)g=n[c],g.formatter&&h++,Ob(a,g.col);if("ssp"!=ha(a)&&0!==n.length){c=0;for(b=k.length;c<b;c++)f[k[c]]=c;h===n.length?k.sort(function(a,c){var b,d,h,g,k=n.length,u=e[a]._aSortData,p=e[c]._aSortData;for(h=0;h<k;h++)if(g=n[h],b=u[g.col],d=p[g.col],b=b<d?-1:b>d?1:0,0!==b)return"asc"===g.dir?b:-b;b=f[a];d=f[c];return b<d?-1:b>d?1:0}):k.sort(function(a,c){var b,h,g,k,u=n.length,p=e[a]._aSortData,m=e[c]._aSortData;for(g=0;g<u;g++)if(k=n[g],b=p[k.col],h=m[k.col],k=d[k.type+"-"+k.dir]||d["string-"+k.dir],
b=k(b,h),0!==b)return b;b=f[a];h=f[c];return b<h?-1:b>h?1:0})}a.bSorted=!0}function Nb(a){var c,b,f=a.aoColumns,d=Ka(a);a=a.oLanguage.oAria;for(var e=0,h=f.length;e<h;e++){b=f[e];var g=b.asSorting;c=b.sTitle.replace(/<.*?>/g,"");var k=b.nTh;k.removeAttribute("aria-sort");b.bSortable&&(0<d.length&&d[0].col==e?(k.setAttribute("aria-sort","asc"==d[0].dir?"ascending":"descending"),b=g[d[0].index+1]||g[0]):b=g[0],c+="asc"===b?a.sSortAscending:a.sSortDescending);k.setAttribute("aria-label",c)}}function vb(a,
c,b,f){var h=a.aaSorting,g=a.aoColumns[c].asSorting,k=function(a,c){var b=a._idx;b===e&&(b=d.inArray(a[1],g));return b+1<g.length?b+1:c?null:0};"number"===typeof h[0]&&(h=a.aaSorting=[h]);b&&a.oFeatures.bSortMulti?(b=d.inArray(c,va(h,"0")),-1!==b?(c=k(h[b],!0),null===c?h.splice(b,1):(h[b][1]=g[c],h[b]._idx=c)):(h.push([c,g[0],0]),h[h.length-1]._idx=0)):h.length&&h[0][0]==c?(c=k(h[0]),h.length=1,h[0][1]=g[c],h[0]._idx=c):(h.length=0,h.push([c,g[0]]),h[0]._idx=0);U(a);"function"==typeof f&&f(a)}function hb(a,
c,b,f){var d=a.aoColumns[b];wb(c,{},function(c){!1!==d.bSortable&&(a.oFeatures.bProcessing?(T(a,!0),setTimeout(function(){vb(a,b,c.shiftKey,f);"ssp"!==ha(a)&&T(a,!1)},0)):vb(a,b,c.shiftKey,f))})}function cb(a){var c=a.aLastSort,b=a.oClasses.sSortColumn,f=Ka(a),e=a.oFeatures,h,g;if(e.bSort&&e.bSortClasses){e=0;for(h=c.length;e<h;e++)g=c[e].src,d(va(a.aoData,"anCells",g)).removeClass(b+(2>e?e+1:3));e=0;for(h=f.length;e<h;e++)g=f[e].src,d(va(a.aoData,"anCells",g)).addClass(b+(2>e?e+1:3))}a.aLastSort=
f}function Ob(a,c){var b=a.aoColumns[c],f=A.ext.order[b.sSortDataType],d;f&&(d=f.call(a.oInstance,a,c,v(a,c)));for(var e,h=A.ext.type.order[b.sType+"-pre"],g=0,k=a.aoData.length;g<k;g++)if(b=a.aoData[g],b._aSortData||(b._aSortData=[]),!b._aSortData[c]||f)e=f?d[g]:M(a,g,c,"sort"),b._aSortData[c]=h?h(e):e}function ma(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var c={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:d.extend(!0,[],a.aaSorting),search:qb(a.oPreviousSearch),columns:d.map(a.aoColumns,
function(c,b){return{visible:c.bVisible,search:qb(a.aoPreSearchCols[b])}})};V(a,"aoStateSaveParams","stateSaveParams",[a,c]);a.oSavedState=c;a.fnStateSaveCallback.call(a.oInstance,a,c)}}function Ta(a,c){var b,f,e=a.aoColumns;if(a.oFeatures.bStateSave){var h=a.fnStateLoadCallback.call(a.oInstance,a);if(h&&h.time&&(b=V(a,"aoStateLoadParams","stateLoadParams",[a,h]),-1===d.inArray(!1,b)&&(b=a.iStateDuration,!(0<b&&h.time<+new Date-1E3*b)&&e.length===h.columns.length))){a.oLoadedState=d.extend(!0,{},
h);a._iDisplayStart=h.start;a.iInitDisplayStart=h.start;a._iDisplayLength=h.length;a.aaSorting=[];d.each(h.order,function(c,b){a.aaSorting.push(b[0]>=e.length?[0,b[1]]:b)});d.extend(a.oPreviousSearch,rb(h.search));b=0;for(f=h.columns.length;b<f;b++){var g=h.columns[b];e[b].bVisible=g.visible;d.extend(a.aoPreSearchCols[b],rb(g.search))}V(a,"aoStateLoaded","stateLoaded",[a,h])}}}function Sa(a){var c=A.settings;a=d.inArray(a,va(c,"nTable"));return-1!==a?c[a]:null}function Ga(a,c,b,f){b="DataTables warning: "+
(null!==a?"table id="+a.sTableId+" - ":"")+b;f&&(b+=". For more information about this error, please see http://datatables.net/tn/"+f);if(c)g.console&&console.log&&console.log(b);else if(a=A.ext,"alert"==(a.sErrMode||a.errMode))alert(b);else throw Error(b);}function qa(a,c,b,f){d.isArray(b)?d.each(b,function(b,f){d.isArray(f)?qa(a,c,f[0],f[1]):qa(a,c,f)}):(f===e&&(f=b),c[b]!==e&&(a[f]=c[b]))}function Ua(a,c,b){var f,e;for(e in c)c.hasOwnProperty(e)&&(f=c[e],d.isPlainObject(f)?(d.isPlainObject(a[e])||
(a[e]={}),d.extend(!0,a[e],f)):b&&"data"!==e&&"aaData"!==e&&d.isArray(f)?a[e]=f.slice():a[e]=f);return a}function wb(a,c,b){d(a).bind("click.DT",c,function(c){a.blur();b(c)}).bind("keypress.DT",c,function(a){13===a.which&&(a.preventDefault(),b(a))}).bind("selectstart.DT",function(){return!1})}function ia(a,c,b,f){b&&a[c].push({fn:b,sName:f})}function V(a,c,b,f){var e=[];c&&(e=d.map(a[c].slice().reverse(),function(c,b){return c.fn.apply(a.oInstance,f)}));null!==b&&d(a.nTable).trigger(b+".dt",f);return e}
function xb(a){var c=a._iDisplayStart,b=a.fnDisplayEnd(),f=a._iDisplayLength;c>=b&&(c=b-f);c-=c%f;if(-1===f||0>c)c=0;a._iDisplayStart=c}function ib(a,c){var b=a.renderer,f=A.ext.renderer[c];return d.isPlainObject(b)&&b[c]?f[b[c]]||f._:"string"===typeof b?f[b]||f._:f._}function ha(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function ka(a,c){var b=[],b=ac.numbers_length,f=Math.floor(b/2);c<=b?b=Ma(0,c):a<=f?(b=Ma(0,b-2),b.push("ellipsis"),b.push(c-1)):(a>=c-1-f?b=Ma(c-
(b-2),c):(b=Ma(a-1,a+2),b.push("ellipsis"),b.push(c-1)),b.splice(0,0,"ellipsis"),b.splice(0,0,0));b.DT_el="span";return b}function Ya(a){d.each({num:function(c){return Fb(c,a)},"num-fmt":function(c){return Fb(c,a,za)},"html-num":function(c){return Fb(c,a,Pa)},"html-num-fmt":function(c){return Fb(c,a,Pa,za)}},function(c,b){Z.type.order[c+a+"-pre"]=b;c.match(/^html\-/)&&(Z.type.search[c+a]=Z.type.search.html)})}function Pb(a){return function(){var c=[Sa(this[A.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));
return A.ext.internal[a].apply(this,c)}}var A,Z,R,E,Y,La={},Qb=/[\r\n]/g,Pa=/<.*?>/g,Vb=/^[\w\+\-]/,yb=/[\w\+\-]$/,zb=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\|\$|\^|\-)/g,za=/[',$\u00a3\u20ac\u00a5%\u2009\u202F]/g,ea=function(a){return a&&!0!==a&&"-"!==a?!1:!0},Rb=function(a){var c=parseInt(a,10);return!isNaN(c)&&isFinite(a)?c:null},Ab=function(a,c){La[c]||(La[c]=new RegExp(fb(c),"g"));return"string"===typeof a&&"."!==c?a.replace(/\./g,"").replace(La[c],"."):a},Bb=function(a,c,b){var f="string"===
typeof a;c&&f&&(a=Ab(a,c));b&&f&&(a=a.replace(za,""));return ea(a)||!isNaN(parseFloat(a))&&isFinite(a)},Sb=function(a,c,b){return ea(a)?!0:ea(a)||"string"===typeof a?Bb(a.replace(Pa,""),c,b)?!0:null:null},va=function(a,c,b){var f=[],d=0,h=a.length;if(b!==e)for(;d<h;d++)a[d]&&a[d][c]&&f.push(a[d][c][b]);else for(;d<h;d++)a[d]&&f.push(a[d][c]);return f},Qa=function(a,c,b,f){var d=[],h=0,g=c.length;if(f!==e)for(;h<g;h++)a[c[h]][b]&&d.push(a[c[h]][b][f]);else for(;h<g;h++)d.push(a[c[h]][b]);return d},
Ma=function(a,c){var b=[],f;c===e?(c=0,f=a):(f=c,c=a);for(var d=c;d<f;d++)b.push(d);return b},db=function(a){for(var c=[],b=0,f=a.length;b<f;b++)a[b]&&c.push(a[b]);return c},jb=function(a){var c=[],b,f,d=a.length,e,h=0;f=0;a:for(;f<d;f++){b=a[f];for(e=0;e<h;e++)if(c[e]===b)continue a;c.push(b);h++}return c},ga=function(a,c,b){a[c]!==e&&(a[b]=a[c])},Za=/\[.*?\]$/,Na=/\(\)$/,$a=d("<div>")[0],Wb=$a.textContent!==e,Xb=/<.*?>/g;A=function(a){this.$=function(a,c){return this.api(!0).$(a,c)};this._=function(a,
c){return this.api(!0).rows(a,c).data()};this.api=function(a){return a?new R(Sa(this[Z.iApiIndex])):new R(this)};this.fnAddData=function(a,c){var b=this.api(!0),f=d.isArray(a)&&(d.isArray(a[0])||d.isPlainObject(a[0]))?b.rows.add(a):b.row.add(a);(c===e||c)&&b.draw();return f.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var c=this.api(!0).columns.adjust(),b=c.settings()[0],f=b.oScroll;a===e||a?c.draw(!1):""===f.sX&&""===f.sY||Ra(b)};this.fnClearTable=function(a){var c=this.api(!0).clear();
(a===e||a)&&c.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,c,b){var f=this.api(!0);a=f.rows(a);var d=a.settings()[0],h=d.aoData[a[0][0]];a.remove();c&&c.call(this,d,h);(b===e||b)&&f.draw();return h};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(!a)};this.fnFilter=function(a,c,b,f,d,h){d=this.api(!0);null===c||c===e?d.search(a,b,f,h):d.column(c).search(a,b,f,h);d.draw()};this.fnGetData=function(a,c){var b=
this.api(!0);if(a!==e){var f=a.nodeName?a.nodeName.toLowerCase():"";return c!==e||"td"==f||"th"==f?b.cell(a,c).data():b.row(a).data()||null}return b.data().toArray()};this.fnGetNodes=function(a){var c=this.api(!0);return a!==e?c.row(a).node():c.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var c=this.api(!0),b=a.nodeName.toUpperCase();return"TR"==b?c.row(a).index():"TD"==b||"TH"==b?(a=c.cell(a).index(),[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};
this.fnOpen=function(a,c,b){return this.api(!0).row(a).child(c,b).show().child()[0]};this.fnPageChange=function(a,c){var b=this.api(!0).page(a);(c===e||c)&&b.draw(!1)};this.fnSetColumnVis=function(a,c,b){a=this.api(!0).column(a).visible(c);(b===e||b)&&a.columns.adjust().draw()};this.fnSettings=function(){return Sa(this[Z.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=function(a,c,b){this.api(!0).order.listener(a,c,b)};this.fnUpdate=function(a,c,b,f,d){var h=
this.api(!0);b===e||null===b?h.row(c).data(a):h.cell(c,b).data(a);(d===e||d)&&h.columns.adjust();(f===e||f)&&h.draw();return 0};this.fnVersionCheck=Z.fnVersionCheck;var c=this,g=a===e,p=this.length;g&&(a={});this.oApi=this.internal=Z.internal;for(var m in A.ext.internal)m&&(this[m]=Pb(m));this.each(function(){var m={},m=1<p?Ua(m,a,!0):a,l=0,v,y=this.getAttribute("id"),x=!1,t=A.defaults;if("table"!=this.nodeName.toLowerCase())Ga(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{r(t);
h(t.column);n(t,t,!0);n(t.column,t.column,!0);n(t,m);var D=A.settings,l=0;for(v=D.length;l<v;l++){if(D[l].nTable==this){v=m.bRetrieve!==e?m.bRetrieve:t.bRetrieve;if(g||v)return D[l].oInstance;if(m.bDestroy!==e?m.bDestroy:t.bDestroy){D[l].oInstance.fnDestroy();break}else{Ga(D[l],0,"Cannot reinitialise DataTable",3);return}}if(D[l].sTableId==this.id){D.splice(l,1);break}}if(null===y||""===y)this.id=y="DataTables_Table_"+A.ext._unique++;var B=d.extend(!0,{},A.models.oSettings,{nTable:this,oApi:c.internal,
oInit:m,sDestroyWidth:d(this)[0].style.width,sInstance:y,sTableId:y});D.push(B);B.oInstance=1===c.length?c:d(this).dataTable();r(m);m.oLanguage&&k(m.oLanguage);m.aLengthMenu&&!m.iDisplayLength&&(m.iDisplayLength=d.isArray(m.aLengthMenu[0])?m.aLengthMenu[0][0]:m.aLengthMenu[0]);m=Ua(d.extend(!0,{},t),m);qa(B.oFeatures,m,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));qa(B,m,["asStripeClasses","ajax","fnServerData","fnFormatNumber",
"sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);qa(B.oScroll,m,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);
qa(B.oLanguage,m,"fnInfoCallback");ia(B,"aoDrawCallback",m.fnDrawCallback,"user");ia(B,"aoServerParams",m.fnServerParams,"user");ia(B,"aoStateSaveParams",m.fnStateSaveParams,"user");ia(B,"aoStateLoadParams",m.fnStateLoadParams,"user");ia(B,"aoStateLoaded",m.fnStateLoaded,"user");ia(B,"aoRowCallback",m.fnRowCallback,"user");ia(B,"aoRowCreatedCallback",m.fnCreatedRow,"user");ia(B,"aoHeaderCallback",m.fnHeaderCallback,"user");ia(B,"aoFooterCallback",m.fnFooterCallback,"user");ia(B,"aoInitComplete",m.fnInitComplete,
"user");ia(B,"aoPreDrawCallback",m.fnPreDrawCallback,"user");y=B.oClasses;m.bJQueryUI?(d.extend(y,A.ext.oJUIClasses,m.oClasses),m.sDom===t.sDom&&"lfrtip"===t.sDom&&(B.sDom='<"H"lfr>t<"F"ip>'),B.renderer)?d.isPlainObject(B.renderer)&&!B.renderer.header&&(B.renderer.header="jqueryui"):B.renderer="jqueryui":d.extend(y,A.ext.classes,m.oClasses);d(this).addClass(y.sTable);if(""!==B.oScroll.sX||""!==B.oScroll.sY)B.oScroll.iBarWidth=ub();!0===B.oScroll.sX&&(B.oScroll.sX="100%");B.iInitDisplayStart===e&&
(B.iInitDisplayStart=m.iDisplayStart,B._iDisplayStart=m.iDisplayStart);null!==m.iDeferLoading&&(B.bDeferLoading=!0,l=d.isArray(m.iDeferLoading),B._iRecordsDisplay=l?m.iDeferLoading[0]:m.iDeferLoading,B._iRecordsTotal=l?m.iDeferLoading[1]:m.iDeferLoading);var N=B.oLanguage;d.extend(!0,N,m.oLanguage);""!==N.sUrl&&(d.ajax({dataType:"json",url:N.sUrl,success:function(a){k(a);n(t.oLanguage,a);d.extend(!0,N,a);Wa(B)},error:function(){Wa(B)}}),x=!0);null===m.asStripeClasses&&(B.asStripeClasses=[y.sStripeOdd,
y.sStripeEven]);var l=B.asStripeClasses,M=d("tbody tr:eq(0)",this);-1!==d.inArray(!0,d.map(l,function(a,c){return M.hasClass(a)}))&&(d("tbody tr",this).removeClass(l.join(" ")),B.asDestroyStripes=l.slice());var D=[],z,l=this.getElementsByTagName("thead");0!==l.length&&(fa(B.aoHeader,l[0]),D=Ha(B));if(null===m.aoColumns)for(z=[],l=0,v=D.length;l<v;l++)z.push(null);else z=m.aoColumns;l=0;for(v=z.length;l<v;l++)b(B,D?D[l]:null);G(B,m.aoColumnDefs,z,function(a,c){f(B,a,c)});if(M.length){var K=function(a,
c){return a.getAttribute("data-"+c)?c:null};d.each(ta(B,M[0]).cells,function(a,c){var b=B.aoColumns[a];if(b.mData===a){var d=K(c,"sort")||K(c,"order"),h=K(c,"filter")||K(c,"search");if(null!==d||null!==h)b.mData={_:a+".display",sort:null!==d?a+".@data-"+d:e,type:null!==d?a+".@data-"+d:e,filter:null!==h?a+".@data-"+h:e},f(B,a)}})}var J=B.oFeatures;m.bStateSave&&(J.bStateSave=!0,Ta(B,m),ia(B,"aoDrawCallback",ma,"state_save"));if(m.aaSorting===e)for(D=B.aaSorting,l=0,v=D.length;l<v;l++)D[l][1]=B.aoColumns[l].asSorting[0];
cb(B);J.bSort&&ia(B,"aoDrawCallback",function(){if(B.bSorted){var a=Ka(B),c={};d.each(a,function(a,b){c[b.src]=b.dir});V(B,null,"order",[B,a,c]);Nb(B)}});ia(B,"aoDrawCallback",function(){(B.bSorted||"ssp"===ha(B)||J.bDeferRender)&&cb(B)},"sc");q(B);l=d(this).children("caption").each(function(){this._captionSide=d(this).css("caption-side")});v=d(this).children("thead");0===v.length&&(v=d("<thead/>").appendTo(this));B.nTHead=v[0];v=d(this).children("tbody");0===v.length&&(v=d("<tbody/>").appendTo(this));
B.nTBody=v[0];v=d(this).children("tfoot");0===v.length&&0<l.length&&(""!==B.oScroll.sX||""!==B.oScroll.sY)&&(v=d("<tfoot/>").appendTo(this));0===v.length||0===v.children().length?d(this).addClass(y.sNoFooter):0<v.length&&(B.nTFoot=v[0],fa(B.aoFooter,B.nTFoot));if(m.aaData)for(l=0;l<m.aaData.length;l++)I(B,m.aaData[l]);else(B.bDeferLoading||"dom"==ha(B))&&F(B,d(B.nTBody).children("tr"));B.aiDisplay=B.aiDisplayMaster.slice();B.bInitialised=!0;!1===x&&Wa(B)}});c=null;return this};var Tb=[],ba=Array.prototype,
Yb=function(a){var c,b,f=A.settings,e=d.map(f,function(a,c){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&"table"===a.nodeName.toLowerCase())return c=d.inArray(a,e),-1!==c?[f[c]]:null;if(a&&"function"===typeof a.settings)return a.settings().toArray();"string"===typeof a?b=d(a):a instanceof d&&(b=a)}else return[];if(b)return b.map(function(a){c=d.inArray(this,e);return-1!==c?f[c]:null}).toArray()};R=function(a,c){if(!this instanceof R)throw"DT API must be constructed as a new object";
var b=[],f=function(a){(a=Yb(a))&&b.push.apply(b,a)};if(d.isArray(a))for(var e=0,h=a.length;e<h;e++)f(a[e]);else f(a);this.context=jb(b);c&&this.push.apply(this,c.toArray?c.toArray():c);this.selector={rows:null,cols:null,opts:null};R.extend(this,this,Tb)};A.Api=R;R.prototype={concat:ba.concat,context:[],each:function(a){for(var c=0,b=this.length;c<b;c++)a.call(this,this[c],c,this);return this},eq:function(a){var c=this.context;return c.length>a?new R(c[a],this[a]):null},filter:function(a){var c=[];
if(ba.filter)c=ba.filter.call(this,a,this);else for(var b=0,f=this.length;b<f;b++)a.call(this,this[b],b,this)&&c.push(this[b]);return new R(this.context,c)},flatten:function(){var a=[];return new R(this.context,a.concat.apply(a,this.toArray()))},join:ba.join,indexOf:ba.indexOf||function(a,c){for(var b=c||0,f=this.length;b<f;b++)if(this[b]===a)return b;return-1},iterator:function(a,c,b,f){var d=[],h,g,k,n,p,m=this.context,l,v,r=this.selector;"string"===typeof a&&(f=b,b=c,c=a,a=!1);g=0;for(k=m.length;g<
k;g++){var q=new R(m[g]);if("table"===c)h=b.call(q,m[g],g),h!==e&&d.push(h);else if("columns"===c||"rows"===c)h=b.call(q,m[g],this[g],g),h!==e&&d.push(h);else if("column"===c||"column-rows"===c||"row"===c||"cell"===c)for(v=this[g],"column-rows"===c&&(l=mb(m[g],r.opts)),n=0,p=v.length;n<p;n++)h=v[n],h="cell"===c?b.call(q,m[g],h.row,h.column,g,n):b.call(q,m[g],h,g,n,l),h!==e&&d.push(h)}return d.length||f?(a=new R(m,a?d.concat.apply([],d):d),c=a.selector,c.rows=r.rows,c.cols=r.cols,c.opts=r.opts,a):
this},lastIndexOf:ba.lastIndexOf||function(a,c){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var c=[];if(ba.map)c=ba.map.call(this,a,this);else for(var b=0,f=this.length;b<f;b++)c.push(a.call(this,this[b],b));return new R(this.context,c)},pluck:function(a){return this.map(function(c){return c[a]})},pop:ba.pop,push:ba.push,reduce:ba.reduce||function(a,c){return t(this,a,c,0,this.length,1)},reduceRight:ba.reduceRight||function(a,c){return t(this,a,c,this.length-
1,-1,-1)},reverse:ba.reverse,selector:null,shift:ba.shift,sort:ba.sort,splice:ba.splice,toArray:function(){return ba.slice.call(this)},to$:function(){return d(this)},toJQuery:function(){return d(this)},unique:function(){return new R(this.context,jb(this))},unshift:ba.unshift};R.extend=function(a,c,b){if(c&&(c instanceof R||c.__dt_wrapper)){var f,e,h,g=function(a,c,b){return function(){var f=c.apply(a,arguments);R.extend(f,f,b.methodExt);return f}};f=0;for(e=b.length;f<e;f++)h=b[f],c[h.name]="function"===
typeof h.val?g(a,h.val,h):d.isPlainObject(h.val)?{}:h.val,c[h.name].__dt_wrapper=!0,R.extend(a,c[h.name],h.propExt)}};R.register=E=function(a,c){if(d.isArray(a))for(var b=0,f=a.length;b<f;b++)R.register(a[b],c);else for(var e=a.split("."),h=Tb,g,k,b=0,f=e.length;b<f;b++){g=(k=-1!==e[b].indexOf("()"))?e[b].replace("()",""):e[b];var n;a:{n=0;for(var p=h.length;n<p;n++)if(h[n].name===g){n=h[n];break a}n=null}n||(n={name:g,val:{},methodExt:[],propExt:[]},h.push(n));b===f-1?n.val=c:h=k?n.methodExt:n.propExt}};
R.registerPlural=Y=function(a,c,b){R.register(a,b);R.register(c,function(){var a=b.apply(this,arguments);return a===this?this:a instanceof R?a.length?d.isArray(a[0])?new R(a.context,a[0]):a[0]:e:a})};var ab=function(a,c){if("number"===typeof a)return[c[a]];var b=d.map(c,function(a,c){return a.nTable});return d(b).filter(a).map(function(a){a=d.inArray(this,b);return c[a]}).toArray()};E("tables()",function(a){return a?new R(ab(a,this.context)):this});E("table()",function(a){a=this.tables(a);var c=a.context;
return c.length?new R(c[0]):a});Y("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});Y("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody},1)});Y("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});Y("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});Y("tables().containers()",
"table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});E("draw()",function(a){return this.iterator("table",function(c){U(c,!1===a)})});E("page()",function(a){return a===e?this.page.info().page:this.iterator("table",function(c){xa(c,a)})});E("page.info()",function(a){if(0===this.context.length)return e;a=this.context[0];var c=a._iDisplayStart,b=a._iDisplayLength,f=a.fnRecordsDisplay(),d=-1===b;return{page:d?0:Math.floor(c/b),pages:d?1:Math.ceil(f/b),
start:c,end:a.fnDisplayEnd(),length:b,recordsTotal:a.fnRecordsTotal(),recordsDisplay:f}});E("page.len()",function(a){return a===e?0!==this.context.length?this.context[0]._iDisplayLength:e:this.iterator("table",function(c){ua(c,a)})});var Cb=function(a,c,b){"ssp"==ha(a)?U(a,c):(T(a,!0),Ca(a,[],function(b){ca(a);b=Da(a,b);for(var f=0,d=b.length;f<d;f++)I(a,b[f]);U(a,c);T(a,!1)}));if(b){var f=new R(a);f.one("draw",function(){b(f.ajax.json())})}};E("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});
E("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});E("ajax.reload()",function(a,c){return this.iterator("table",function(b){Cb(b,!1===c,a)})});E("ajax.url()",function(a){var c=this.context;if(a===e){if(0===c.length)return e;c=c[0];return c.ajax?d.isPlainObject(c.ajax)?c.ajax.url:c.ajax:c.sAjaxSource}return this.iterator("table",function(c){d.isPlainObject(c.ajax)?c.ajax.url=a:c.ajax=a})});E("ajax.url().load()",function(a,c){return this.iterator("table",function(b){Cb(b,
!1===c,a)})});var bb=function(a,c){var b=[],f,h,g,k,n,p;f=typeof a;a&&"string"!==f&&"function"!==f&&a.length!==e||(a=[a]);g=0;for(k=a.length;g<k;g++)for(h=a[g]&&a[g].split?a[g].split(","):[a[g]],n=0,p=h.length;n<p;n++)(f=c("string"===typeof h[n]?d.trim(h[n]):h[n]))&&f.length&&b.push.apply(b,f);return b},kb=function(a){a||(a={});a.filter&&!a.search&&(a.search=a.filter);return{search:a.search||"none",order:a.order||"current",page:a.page||"all"}},lb=function(a){for(var c=0,b=a.length;c<b;c++)if(0<a[c].length)return a[0]=
a[c],a.length=1,a.context=[a.context[c]],a;a.length=0;return a},mb=function(a,c){var b,f,e,h=[],g=a.aiDisplay;b=a.aiDisplayMaster;var k=c.search;f=c.order;e=c.page;if("ssp"==ha(a))return"removed"===k?[]:Ma(0,b.length);if("current"==e)for(b=a._iDisplayStart,f=a.fnDisplayEnd();b<f;b++)h.push(g[b]);else if("current"==f||"applied"==f)h="none"==k?b.slice():"applied"==k?g.slice():d.map(b,function(a,c){return-1===d.inArray(a,g)?a:null});else if("index"==f||"original"==f)for(b=0,f=a.aoData.length;b<f;b++)"none"==
k?h.push(b):(e=d.inArray(b,g),(-1===e&&"removed"==k||0<=e&&"applied"==k)&&h.push(b));return h},Zb=function(a,c,b){return bb(c,function(c){var f=Rb(c);if(null!==f&&!b)return[f];var e=mb(a,b);if(null!==f&&-1!==d.inArray(f,e))return[f];if(!c)return e;if("function"===typeof c)return d.map(e,function(b){var f=a.aoData[b];return c(b,f._aData,f.nTr)?b:null});f=db(Qa(a.aoData,e,"nTr"));return c.nodeName&&-1!==d.inArray(c,f)?[c._DT_RowIndex]:d(f).filter(c).map(function(){return this._DT_RowIndex}).toArray()})};
E("rows()",function(a,c){a===e?a="":d.isPlainObject(a)&&(c=a,a="");c=kb(c);var b=this.iterator("table",function(b){return Zb(b,a,c)},1);b.selector.rows=a;b.selector.opts=c;return b});E("rows().nodes()",function(){return this.iterator("row",function(a,c){return a.aoData[c].nTr||e},1)});E("rows().data()",function(){return this.iterator(!0,"rows",function(a,c){return Qa(a.aoData,c,"_aData")},1)});Y("rows().cache()","row().cache()",function(a){return this.iterator("row",function(c,b){var f=c.aoData[b];
return"search"===a?f._aFilterData:f._aSortData},1)});Y("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(c,b){da(c,b,a)})});Y("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,c){return c},1)});Y("rows().remove()","row().remove()",function(){var a=this;return this.iterator("row",function(c,b,f){var e=c.aoData;e.splice(b,1);for(var h=0,g=e.length;h<g;h++)null!==e[h].nTr&&(e[h].nTr._DT_RowIndex=h);d.inArray(b,c.aiDisplay);W(c.aiDisplayMaster,
b);W(c.aiDisplay,b);W(a[f],b,!1);xb(c)})});E("rows.add()",function(a){var c=this.iterator("table",function(c){var b,f,d,e=[];f=0;for(d=a.length;f<d;f++)b=a[f],b.nodeName&&"TR"===b.nodeName.toUpperCase()?e.push(F(c,b)[0]):e.push(I(c,b));return e},1),b=this.rows(-1);b.pop();b.push.apply(b,c.toArray());return b});E("row()",function(a,c){return lb(this.rows(a,c))});E("row().data()",function(a){var c=this.context;if(a===e)return c.length&&this.length?c[0].aoData[this[0]]._aData:e;c[0].aoData[this[0]]._aData=
a;da(c[0],this[0],"data");return this});E("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});E("row.add()",function(a){a instanceof d&&a.length&&(a=a[0]);var c=this.iterator("table",function(c){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?F(c,a)[0]:I(c,a)});return this.row(c[0])});var z=function(a,c,b,f){var e=[],h=function(c,b){if(c.nodeName&&"tr"===c.nodeName.toLowerCase())e.push(c);else{var f=d("<tr><td/></tr>").addClass(b);d("td",
f).addClass(b).html(c)[0].colSpan=x(a);e.push(f[0])}};if(d.isArray(b)||b instanceof d)for(var g=0,k=b.length;g<k;g++)h(b[g],f);else h(b,f);c._details&&c._details.remove();c._details=d(e);c._detailsShow&&c._details.insertAfter(c.nTr)},Ub=function(a,c){var b=a.context;b.length&&(b=b[0].aoData[c!==e?c:a[0]],b._details&&(b._details.remove(),b._detailsShow=e,b._details=e))},X=function(a,c){var b=a.context;if(b.length&&a.length){var f=b[0].aoData[a[0]];f._details&&((f._detailsShow=c)?f._details.insertAfter(f.nTr):
f._details.detach(),bc(b[0]))}},bc=function(a){var c=new R(a),b=a.aoData;c.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<va(b,"_details").length&&(c.on("draw.dt.DT_details",function(f,d){a===d&&c.rows({page:"current"}).eq(0).each(function(a){a=b[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),c.on("column-visibility.dt.DT_details",function(c,f,d,e){if(a===f)for(f=x(f),d=0,e=b.length;d<e;d++)c=b[d],c._details&&c._details.children("td[colspan]").attr("colspan",
f)}),c.on("destroy.dt.DT_details",function(f,d){if(a===d)for(var e=0,h=b.length;e<h;e++)b[e]._details&&Ub(c,e)}))};E("row().child()",function(a,c){var b=this.context;if(a===e)return b.length&&this.length?b[0].aoData[this[0]]._details:e;!0===a?this.child.show():!1===a?Ub(this):b.length&&this.length&&z(b[0],b[0].aoData[this[0]],a,c);return this});E(["row().child.show()","row().child().show()"],function(a){X(this,!0);return this});E(["row().child.hide()","row().child().hide()"],function(){X(this,!1);
return this});E(["row().child.remove()","row().child().remove()"],function(){Ub(this);return this});E("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var cc=/^(.+):(name|visIdx|visible)$/,$b=function(a,c,b,f,d){b=[];f=0;for(var e=d.length;f<e;f++)b.push(M(a,d[f],c));return b},dc=function(a,b,f){var e=a.aoColumns,h=va(e,"sName"),g=va(e,"nTh");return bb(b,function(b){var k=Rb(b);if(""===b)return Ma(e.length);if(null!==k)return[0<=
k?k:e.length+k];if("function"===typeof b){var n=mb(a,f);return d.map(e,function(c,f){return b(f,$b(a,f,0,0,n),g[f])?f:null})}var p="string"===typeof b?b.match(cc):"";if(p)switch(p[2]){case "visIdx":case "visible":k=parseInt(p[1],10);if(0>k){var m=d.map(e,function(a,c){return a.bVisible?c:null});return[m[m.length+k]]}return[c(a,k)];case "name":return d.map(h,function(a,c){return a===p[1]?c:null})}else return d(g).filter(b).map(function(){return d.inArray(this,g)}).toArray()})};E("columns()",function(a,
c){a===e?a="":d.isPlainObject(a)&&(c=a,a="");c=kb(c);var b=this.iterator("table",function(b){return dc(b,a,c)},1);b.selector.cols=a;b.selector.opts=c;return b});Y("columns().header()","column().header()",function(a,c){return this.iterator("column",function(a,c){return a.aoColumns[c].nTh},1)});Y("columns().footer()","column().footer()",function(a,c){return this.iterator("column",function(a,c){return a.aoColumns[c].nTf},1)});Y("columns().data()","column().data()",function(){return this.iterator("column-rows",
$b,1)});Y("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,c){return a.aoColumns[c].mData},1)});Y("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(c,b,f,d,e){return Qa(c.aoData,e,"search"===a?"_aFilterData":"_aSortData",b)},1)});Y("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,c,b,f,d){return Qa(a.aoData,d,"anCells",c)},1)});Y("columns().visible()","column().visible()",
function(c,b){return this.iterator("column",function(f,h){if(c===e)return f.aoColumns[h].bVisible;var g=f.aoColumns,k=g[h],n=f.aoData,p,m,l;if(c!==e&&k.bVisible!==c){if(c){var v=d.inArray(!0,va(g,"bVisible"),h+1);p=0;for(m=n.length;p<m;p++)l=n[p].nTr,g=n[p].anCells,l&&l.insertBefore(g[h],g[v]||null)}else d(va(f.aoData,"anCells",h)).detach();k.bVisible=c;oa(f,f.aoHeader);oa(f,f.aoFooter);if(b===e||b)a(f),(f.oScroll.sX||f.oScroll.sY)&&Ra(f);V(f,null,"column-visibility",[f,h,c]);ma(f)}})});Y("columns().indexes()",
"column().index()",function(a){return this.iterator("column",function(c,b){return"visible"===a?v(c,b):b},1)});E("columns.adjust()",function(){return this.iterator("table",function(c){a(c)},1)});E("column.index()",function(a,b){if(0!==this.context.length){var f=this.context[0];if("fromVisible"===a||"toData"===a)return c(f,b);if("fromData"===a||"toVisible"===a)return v(f,b)}});E("column()",function(a,c){return lb(this.columns(a,c))});var ec=function(a,c,b){var f=a.aoData,h=mb(a,b);b=db(Qa(f,h,"anCells"));
var g=d([].concat.apply([],b)),k,n=a.aoColumns.length,p,m,l,v,r,q;return bb(c,function(c){var b="function"===typeof c;if(null===c||c===e||b){p=[];m=0;for(l=h.length;m<l;m++)for(k=h[m],v=0;v<n;v++)r={row:k,column:v},b?(q=a.aoData[k],c(r,M(a,k,v),q.anCells[v])&&p.push(r)):p.push(r);return p}return d.isPlainObject(c)?[c]:g.filter(c).map(function(a,c){k=c.parentNode._DT_RowIndex;return{row:k,column:d.inArray(c,f[k].anCells)}}).toArray()})};E("cells()",function(a,c,b){d.isPlainObject(a)&&(typeof a.row!==
e?(b=c,c=null):(b=a,a=null));d.isPlainObject(c)&&(b=c,c=null);if(null===c||c===e)return this.iterator("table",function(c){return ec(c,a,kb(b))});var f=this.columns(c,b),h=this.rows(a,b),g,k,n,p,m,l=this.iterator("table",function(a,c){g=[];k=0;for(n=h[c].length;k<n;k++)for(p=0,m=f[c].length;p<m;p++)g.push({row:h[c][k],column:f[c][p]});return g},1);d.extend(l.selector,{cols:c,rows:a,opts:b});return l});Y("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,c,b){return(a=
a.aoData[c].anCells)?a[b]:e},1)});E("cells().data()",function(){return this.iterator("cell",function(a,c,b){return M(a,c,b)},1)});Y("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(c,b,f){return c.aoData[b][a][f]},1)});Y("cells().render()","cell().render()",function(a){return this.iterator("cell",function(c,b,f){return M(c,b,f,a)},1)});Y("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,
c,b){return{row:c,column:b,columnVisible:v(a,b)}},1)});Y("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(c,b,f){da(c,b,a,f)})});E("cell()",function(a,c,b){return lb(this.cells(a,c,b))});E("cell().data()",function(a){var c=this.context,b=this[0];if(a===e)return c.length&&b.length?M(c[0],b[0].row,b[0].column):e;K(c[0],b[0].row,b[0].column,a);da(c[0],b[0].row,"data",b[0].column);return this});E("order()",function(a,c){var b=this.context;if(a===e)return 0!==
b.length?b[0].aaSorting:e;"number"===typeof a?a=[[a,c]]:d.isArray(a[0])||(a=Array.prototype.slice.call(arguments));return this.iterator("table",function(c){c.aaSorting=a.slice()})});E("order.listener()",function(a,c,b){return this.iterator("table",function(f){hb(f,a,c,b)})});E(["columns().order()","column().order()"],function(a){var c=this;return this.iterator("table",function(b,f){var e=[];d.each(c[f],function(c,b){e.push([b,a])});b.aaSorting=e})});E("search()",function(a,c,b,f){var h=this.context;
return a===e?0!==h.length?h[0].oPreviousSearch.sSearch:e:this.iterator("table",function(e){e.oFeatures.bFilter&&H(e,d.extend({},e.oPreviousSearch,{sSearch:a+"",bRegex:null===c?!1:c,bSmart:null===b?!0:b,bCaseInsensitive:null===f?!0:f}),1)})});Y("columns().search()","column().search()",function(a,c,b,f){return this.iterator("column",function(h,g){var k=h.aoPreSearchCols;if(a===e)return k[g].sSearch;h.oFeatures.bFilter&&(d.extend(k[g],{sSearch:a+"",bRegex:null===c?!1:c,bSmart:null===b?!0:b,bCaseInsensitive:null===
f?!0:f}),H(h,h.oPreviousSearch,1))})});E("state()",function(){return this.context.length?this.context[0].oSavedState:null});E("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});E("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});E("state.save()",function(){return this.iterator("table",function(a){ma(a)})});A.versionCheck=A.fnVersionCheck=function(a){var c=A.version.split(".");a=a.split(".");
for(var b,f,d=0,e=a.length;d<e;d++)if(b=parseInt(c[d],10)||0,f=parseInt(a[d],10)||0,b!==f)return b>f;return!0};A.isDataTable=A.fnIsDataTable=function(a){var c=d(a).get(0),b=!1;d.each(A.settings,function(a,f){if(f.nTable===c||f.nScrollHead===c||f.nScrollFoot===c)b=!0});return b};A.tables=A.fnTables=function(a){return d.map(A.settings,function(c){if(!a||a&&d(c.nTable).is(":visible"))return c.nTable})};A.util={throttle:ja,escapeRegex:fb};A.camelToHungarian=n;E("$()",function(a,c){var b=this.rows(c).nodes(),
b=d(b);return d([].concat(b.filter(a).toArray(),b.find(a).toArray()))});d.each(["on","one","off"],function(a,c){E(c+"()",function(){var a=Array.prototype.slice.call(arguments);a[0].match(/\.dt\b/)||(a[0]+=".dt");var b=d(this.tables().nodes());b[c].apply(b,a);return this})});E("clear()",function(){return this.iterator("table",function(a){ca(a)})});E("settings()",function(){return new R(this.context,this.context)});E("data()",function(){return this.iterator("table",function(a){return va(a.aoData,"_aData")}).flatten()});
E("destroy()",function(a){a=a||!1;return this.iterator("table",function(c){var b=c.nTableWrapper.parentNode,f=c.oClasses,e=c.nTable,h=c.nTBody,k=c.nTHead,n=c.nTFoot,p=d(e),h=d(h),m=d(c.nTableWrapper),l=d.map(c.aoData,function(a){return a.nTr}),v;c.bDestroying=!0;V(c,"aoDestroyCallback","destroy",[c]);a||(new R(c)).columns().visible(!0);m.unbind(".DT").find(":not(tbody *)").unbind(".DT");d(g).unbind(".DT-"+c.sInstance);e!=k.parentNode&&(p.children("thead").detach(),p.append(k));n&&e!=n.parentNode&&
(p.children("tfoot").detach(),p.append(n));p.detach();m.detach();c.aaSorting=[];c.aaSortingFixed=[];cb(c);d(l).removeClass(c.asStripeClasses.join(" "));d("th, td",k).removeClass(f.sSortable+" "+f.sSortableAsc+" "+f.sSortableDesc+" "+f.sSortableNone);c.bJUI&&(d("th span."+f.sSortIcon+", td span."+f.sSortIcon,k).detach(),d("th, td",k).each(function(){var a=d("div."+f.sSortJUIWrapper,this);d(this).append(a.contents());a.detach()}));!a&&b&&b.insertBefore(e,c.nTableReinsertBefore);h.children().detach();
h.append(l);p.css("width",c.sDestroyWidth).removeClass(f.sTable);(v=c.asDestroyStripes.length)&&h.children().each(function(a){d(this).addClass(c.asDestroyStripes[a%v])});b=d.inArray(c,A.settings);-1!==b&&A.settings.splice(b,1)})});A.version="1.10.4";A.settings=[];A.models={};A.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};A.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null};A.models.oColumn={idx:null,aDataSort:null,
asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};A.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],
asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,
fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(c){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,c){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(c))}catch(b){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,
iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",
sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:d.extend({},A.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null};p(A.defaults);A.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,
mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};p(A.defaults.column);A.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,
bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,
nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:e,oAjaxData:e,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},
bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==ha(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==ha(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,c=this._iDisplayStart,b=c+a,f=this.aiDisplay.length,d=this.oFeatures,e=d.bPaginate;return d.bServerSide?!1===e||-1===a?c+f:Math.min(c+a,this._iRecordsDisplay):!e||b>f||-1===a?f:b},
oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}};A.ext=Z={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:A.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:A.version};d.extend(Z,{afnFiltering:Z.search,aTypes:Z.type.detect,ofnSearch:Z.type.search,oSort:Z.type.order,afnSortData:Z.order,aoFeatures:Z.feature,
oApi:Z.internal,oStdClasses:Z.classes,oPagination:Z.pager});d.extend(A.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",
sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",
sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});(function(){var a="",a="",c=a+"ui-state-default",b=a+"css_right ui-icon ui-icon-",a=a+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";d.extend(A.ext.oJUIClasses,A.ext.classes,{sPageButton:"fg-button ui-button "+c,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:c+
" sorting_asc",sSortDesc:c+" sorting_desc",sSortable:c+" sorting",sSortableAsc:c+" sorting_asc_disabled",sSortableDesc:c+" sorting_desc_disabled",sSortableNone:c+" sorting_disabled",sSortJUIAsc:b+"triangle-1-n",sSortJUIDesc:b+"triangle-1-s",sSortJUI:b+"carat-2-n-s",sSortJUIAscAllowed:b+"carat-1-n",sSortJUIDescAllowed:b+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+c,sScrollFoot:"dataTables_scrollFoot "+c,sHeaderTH:c,sFooterTH:c,
sJUIHeader:a+" ui-corner-tl ui-corner-tr",sJUIFooter:a+" ui-corner-bl ui-corner-br"})})();var ac=A.ext.pager;d.extend(ac,{simple:function(a,c){return["previous","next"]},full:function(a,c){return["first","previous","next","last"]},simple_numbers:function(a,c){return["previous",ka(a,c),"next"]},full_numbers:function(a,c){return["first","previous",ka(a,c),"next","last"]},_numbers:ka,numbers_length:7});d.extend(!0,A.ext.renderer,{pageButton:{_:function(a,c,b,f,e,h){var g=a.oClasses,k=a.oLanguage.oPaginate,
n,p,m=0,v=function(c,f){var l,r,q,y,x=function(c){xa(a,c.data.action,!0)};l=0;for(r=f.length;l<r;l++)if(y=f[l],d.isArray(y))q=d("<"+(y.DT_el||"div")+"/>").appendTo(c),v(q,y);else{p=n="";switch(y){case "ellipsis":c.append("<span>&hellip;</span>");break;case "first":n=k.sFirst;p=y+(0<e?"":" "+g.sPageButtonDisabled);break;case "previous":n=k.sPrevious;p=y+(0<e?"":" "+g.sPageButtonDisabled);break;case "next":n=k.sNext;p=y+(e<h-1?"":" "+g.sPageButtonDisabled);break;case "last":n=k.sLast;p=y+(e<h-1?"":
" "+g.sPageButtonDisabled);break;default:n=y+1,p=e===y?g.sPageButtonActive:""}n&&(q=d("<a>",{"class":g.sPageButton+" "+p,"aria-controls":a.sTableId,"data-dt-idx":m,tabindex:a.iTabIndex,id:0===b&&"string"===typeof y?a.sTableId+"_"+y:null}).html(n).appendTo(c),wb(q,{action:y},x),m++)}};try{var r=d(l.activeElement).data("dt-idx");v(d(c).empty(),f);null!==r&&d(c).find("[data-dt-idx="+r+"]").focus()}catch(q){}}}});d.extend(A.ext.type.detect,[function(a,c){var b=c.oLanguage.sDecimal;return Bb(a,b)?"num"+
b:null},function(a,c){if(!(!a||a instanceof Date||Vb.test(a)&&yb.test(a)))return null;var b=Date.parse(a);return null!==b&&!isNaN(b)||ea(a)?"date":null},function(a,c){var b=c.oLanguage.sDecimal;return Bb(a,b,!0)?"num-fmt"+b:null},function(a,c){var b=c.oLanguage.sDecimal;return Sb(a,b)?"html-num"+b:null},function(a,c){var b=c.oLanguage.sDecimal;return Sb(a,b,!0)?"html-num-fmt"+b:null},function(a,c){return ea(a)||"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);d.extend(A.ext.type.search,{html:function(a){return ea(a)?
a:"string"===typeof a?a.replace(Qb," ").replace(Pa,""):""},string:function(a){return ea(a)?a:"string"===typeof a?a.replace(Qb," "):a}});var Fb=function(a,c,b,f){if(0!==a&&(!a||"-"===a))return-Infinity;c&&(a=Ab(a,c));a.replace&&(b&&(a=a.replace(b,"")),f&&(a=a.replace(f,"")));return 1*a};d.extend(Z.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return ea(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return ea(a)?"":"string"===
typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,c){return a<c?-1:a>c?1:0},"string-desc":function(a,c){return a<c?1:a>c?-1:0}});Ya("");d.extend(!0,A.ext.renderer,{header:{_:function(a,c,b,f){d(a.nTable).on("order.dt.DT",function(d,e,h,g){a===e&&(d=b.idx,c.removeClass(b.sSortingClass+" "+f.sSortAsc+" "+f.sSortDesc).addClass("asc"==g[d]?f.sSortAsc:"desc"==g[d]?f.sSortDesc:b.sSortingClass))})},jqueryui:function(a,c,b,f){d("<div/>").addClass(f.sSortJUIWrapper).append(c.contents()).append(d("<span/>").addClass(f.sSortIcon+
" "+b.sSortingClassJUI)).appendTo(c);d(a.nTable).on("order.dt.DT",function(d,e,h,g){a===e&&(d=b.idx,c.removeClass(f.sSortAsc+" "+f.sSortDesc).addClass("asc"==g[d]?f.sSortAsc:"desc"==g[d]?f.sSortDesc:b.sSortingClass),c.find("span."+f.sSortIcon).removeClass(f.sSortJUIAsc+" "+f.sSortJUIDesc+" "+f.sSortJUI+" "+f.sSortJUIAscAllowed+" "+f.sSortJUIDescAllowed).addClass("asc"==g[d]?f.sSortJUIAsc:"desc"==g[d]?f.sSortJUIDesc:b.sSortingClassJUI))})}}});A.render={number:function(a,c,b,f){return{display:function(d){var e=
0>d?"-":"";d=Math.abs(parseFloat(d));var h=parseInt(d,10);d=b?c+(d-h).toFixed(b).substring(2):"";return e+(f||"")+h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+d}}}};d.extend(A.ext.internal,{_fnExternApiFunc:Pb,_fnBuildAjax:Ca,_fnAjaxUpdate:Fa,_fnAjaxParameters:Ia,_fnAjaxUpdateDraw:eb,_fnAjaxDataSrc:Da,_fnAddColumn:b,_fnColumnOptions:f,_fnAdjustColumnSizing:a,_fnVisibleToColumnIndex:c,_fnColumnIndexToVisible:v,_fnVisbleColumns:x,_fnGetColumns:y,_fnColumnTypes:D,_fnApplyColumnDefs:G,_fnHungarianMap:p,
_fnCamelToHungarian:n,_fnLanguageCompat:k,_fnBrowserDetect:q,_fnAddData:I,_fnAddTr:F,_fnNodeToDataIndex:function(a,c){return c._DT_RowIndex!==e?c._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,c,b){return d.inArray(b,a.aoData[c].anCells)},_fnGetCellData:M,_fnSetCellData:K,_fnSplitObjNotation:J,_fnGetObjectDataFn:S,_fnSetObjectDataFn:aa,_fnGetDataMaster:N,_fnClearTable:ca,_fnDeleteIndex:W,_fnInvalidate:da,_fnGetRowElements:ta,_fnCreateTr:Aa,_fnBuildHead:na,_fnDrawHead:oa,_fnDraw:pa,_fnReDraw:U,
_fnAddOptionsHtml:la,_fnDetectHeader:fa,_fnGetUniqueThs:Ha,_fnFeatureHtmlFilter:P,_fnFilterComplete:H,_fnFilterCustom:m,_fnFilterColumn:Gb,_fnFilter:Hb,_fnFilterCreateSearch:ob,_fnEscapeRegex:fb,_fnFilterData:Ja,_fnFeatureHtmlInfo:Db,_fnUpdateInfo:Va,_fnInfoMacros:Jb,_fnInitialise:Wa,_fnInitComplete:gb,_fnLengthChange:ua,_fnFeatureHtmlLength:nb,_fnFeatureHtmlPaginate:Xa,_fnPageChange:xa,_fnFeatureHtmlProcessing:L,_fnProcessingDisplay:T,_fnFeatureHtmlTable:Eb,_fnScrollDraw:Ra,_fnApplyToChildren:sa,
_fnCalculateColumnWidths:wa,_fnThrottle:ja,_fnConvertToWidth:sb,_fnScrollingWidthAdjust:Kb,_fnGetWidestNode:Lb,_fnGetMaxLenString:tb,_fnStringToCss:Q,_fnScrollBarWidth:ub,_fnSortFlatten:Ka,_fnSort:Mb,_fnSortAria:Nb,_fnSortListener:vb,_fnSortAttachListener:hb,_fnSortingClasses:cb,_fnSortData:Ob,_fnSaveState:ma,_fnLoadState:Ta,_fnSettingsFromNode:Sa,_fnLog:Ga,_fnMap:qa,_fnBindAction:wb,_fnCallbackReg:ia,_fnCallbackFire:V,_fnLengthOverflow:xb,_fnRenderer:ib,_fnDataSource:ha,_fnRowAttributes:Ba,_fnCalculateEnd:function(){}});
d.fn.dataTable=A;d.fn.dataTableSettings=A.settings;d.fn.dataTableExt=A.ext;d.fn.DataTable=function(a){return d(this).dataTable(a).api()};d.each(A,function(a,c){d.fn.DataTable[a]=c});return d.fn.dataTable})})(window,document);window.TOONTALK||(window.TOONTALK={});window.TOONTALK.creators_from_json={};window.TOONTALK.widget=function(g){var l=function(e){var d=this.get_frontside&&this.get_frontside(!0);if(d)return e&&this.rerender(),d.get_element()};g.creators_from_json.top_level=function(e){e=g.widget.create_top_level_widget(e.settings);$(e.get_backside(!0).get_element()).addClass("toontalk-top-level-backside");return e};return{add_standard_widget_functionality:function(e){this.add_sides_functionality(e);this.runnable(e);this.stackable(e);this.animatable(e);this.has_title(e);this.has_parent(e);
this.has_description(e);this.has_listeners(e);this.erasable(e);e.is_of_type||(e.is_of_type=function(d){return this.get_type_name()===d});e.is_widget=!0;return e},erasable:function(e){var d;e.get_erased||(e.get_erased=function(){return d});e.set_erased||(e.set_erased=function(e,g){d=e;g&&this.rerender()});return e},add_sides_functionality:function(e){var d,p;e.get_frontside||(e.get_frontside=function(n){n&&!d&&(d=g.frontside.create(e));return d},e.save_dimensions=function(){var d;this.get_size_attributes?
(d=this.get_size_attributes(),this.saved_width=d.width,this.saved_height=d.height):(d=this.get_frontside_element(),this.saved_width=$(d).width(),this.saved_height=$(d).height())},e.restore_dimensions=function(){var d;0<this.saved_width&&(this.set_size_attributes?this.set_size_attributes(this.saved_width,this.saved_height):(d=this.get_frontside_element(),$(d).css({width:this.saved_width,height:this.saved_height})),this.saved_height=this.saved_width=void 0)});e.get_backside||(e.get_backside=function(d){d&&
!p&&(p=e.create_backside());return p});e.set_backside||(e.set_backside=function(d){p=d});e.forget_backside||(e.forget_backside=function(){p=void 0});e.create_backside||(e.create_backside=function(){return g.backside.create(e)});return e},runnable:function(e){var d=!1;e.get_running||(e.get_running=function(){return d});e.set_running||(e.set_running=function(g,n){var k,l;d===g&&d||(k=this.get_backside_widgets(),d=g,this.get_backside()&&this.get_backside().run_status_changed(d),k.forEach(function(h){l=
h.get_widget();h.is_backside()&&0<=this.backside_widgets.indexOf(l)||(l.is_of_type("robot")?h.is_backside()||d&&l.get_running()||(d?(l.set_stopped(!1),l.run(e,n)):l.set_stopped(!0),l.rerender()):l.set_running&&(!n&&h.is_backside()&&"top-level"!==e.get_type_name()?l.set_running(g,e):l.set_running(g)))}.bind(this)),this.walk_children&&this.walk_children(function(e){e.set_running&&e.set_running(d);return!0}),this.rerender())});return e},stackable:function(e){var d=!1;e.get_infinite_stack||(e.get_infinite_stack=
function(){return d});e.set_infinite_stack||(e.set_infinite_stack=function(g){var n=e.get_backside_element(),k=e.get_frontside_element();d=g;n&&$(n).find(".toontalk-infinite-stack-check-box").prop("checked",g);k&&(g?$(k).addClass("toontalk-infinite-stack"):$(k).removeClass("toontalk-infinite-stack"))});return e},animatable:function(e){var d;e.animate_to_widget||(d=function(d){var e=d.get_element();e&&$(e).is(":visible")||(e=g.UTILITIES.find_resource_equal_to_widget(d));return e},e.animate_to_widget=
function(e,g,k,l,h){this.animate_to_element(d(e),g,k,l,h)});e.animate_to_element||(e.animate_to_element=function(d,e,k,l,h){var q=$(d).offset(),t=$(this.get_frontside_element());d&&$(d).is(":visible")?(l||(l=($(d).width()-t.width())*Math.random()),h||(h=($(d).height()-t.height())*Math.random()),q?(q.left+=l,q.top+=h,g.debugging&&(0>q.left||0>q.top)&&console.log("Should this include negative values? "+q)):q={left:0,top:0},this.animate_to_absolute_position(q,e,k)):e()});e.animate_to_absolute_position||
(e.animate_to_absolute_position=function(d,e,k){var l;l=this.get_frontside_element();g.UTILITIES.animate_to_absolute_position(l,d,e,k)});return e},has_title:function(e){e.get_title||(e.get_title=function(){var d=this.get_type_name(),e=this.get_backside(),n=this.get_frontside_element(),k=this.get_description(),e=$(n).is(".toontalk-top-level-resource")?this.can_run&&this.can_run()?this.get_running()?"Click elsewhere to stop this from running. Click on it to start it up again.":"Click to start this running. Click elsewhere to stop it.":
"Drag this "+d+" to a work area.":e&&e.get_element()&&$(e.get_element()).is(":visible")?k||this.get_custom_title_prefix?"":"This is "+g.UTILITIES.add_a_or_an(d):"Click to see the back side of this "+d;k&&(k="This "+d+" "+k,e=e?k+"\n"+e:k);this.get_custom_title_prefix&&(e=this.get_custom_title_prefix()+" "+e);e=e.trim();0>".?!".indexOf(e[e.length-1])&&(e+=".");return e});return e},has_parent:function(e){var d,g;e.get_parent_of_frontside=function(){return d};e.get_parent_of_backside=function(){return g};
e.set_parent_of_frontside=function(e,g,p){d&&!p&&d.is_backside()&&d.get_widget().remove_backside_widget(this,!1,!0);d=e&&g?e.get_backside(!0):e};e.set_parent_of_backside=function(d,e,l){g&&!l&&g.is_backside()&&g.get_widget().remove_backside_widget(this,!0,!0);g=d&&e?d.get_backside(!0):d};e.closest_visible_ancestor=function(){for(var d=this;d&&!d.visible();)d=d.is_backside()?d.get_parent_of_backside():d.get_parent_of_frontside();return d||this};e.closest_visible_ancestor_or_frontside=function(){for(var d=
this,e;d&&!d.visible();)e=d,d.is_backside()?(d=d.get_parent_of_backside())||(d=e.get_widget()):d=d.get_parent_of_frontside();return d||this};e.ancestor_of_type=function(d){for(var e=this;e&&!e.is_of_type(d);)e=e.is_backside()?e.get_widget().get_parent_of_backside():e.get_parent_of_frontside();return e};e.has_ancestor=function(d){for(var e=this;e;){if(d===e)return!0;e=e.is_backside()?e.get_widget().get_parent_of_backside():e.get_parent_of_frontside()}return!1};e.remove_from_parent_of_frontside=function(e){d&&
(d.is_backside()?d.remove_backside_widget(this,!1):d.removed_from_container&&d.removed_from_container(this,!1,e))};return e},has_description:function(e){var d;e.get_description||(e.get_description=function(){return d});e.set_description||(e.set_description=function(e,g){if(d===e||!d&&""===e)return!1;d=e;g&&this.rerender();return!0})},has_listeners:function(e){var d={};e.add_listener||(e.add_listener=function(e,g){var k=d[e];k?0>k.indexOf(g)&&k.push(g):d[e]=[g]});e.remove_listener||(e.remove_listener=
function(e,n,k){if(e=d[e])if(n=e.indexOf(n),0<=n){e.splice(n,1);return}!k&&g.debugging&&console.log("Listener of type "+type_name+" could not be removed.")});e.get_listeners||(e.get_listeners=function(e){return d[e]})},get_full_description:function(){var e,d;if(this.get_erased&&this.get_erased())return"erased "+this.get_type_name();e=this.get_description();d=this.toString();return e?d+" ("+e+")":d},remove:function(e){var d=this.get_backside(),g=this.get_frontside(),n=this.get_parent_of_frontside(),
k=this.get_parent_of_backside();d&&(d.remove_element(),k&&(d=k.is_backside()?k:k.get_backside(),d.get_widget().removed_from_container&&d.get_widget().removed_from_container(this,!0,e)));g&&(g.remove(),n&&this.remove_from_parent_of_frontside(e));this.set_running(!1)},get_frontside_element:l,get_element:l,get_backside_element:function(e){if(e=this.get_backside&&this.get_backside(e))return e.get_element()},add_to_json:function(e,d){var g,n,k,l,h;if(e){e.view?(n=e,g=e.view,e=e.semantic):(g={},n={semantic:e,
view:g});n.version=1;this.get_erased&&this.get_erased()&&(e.erased=!0);this.get_infinite_stack&&this.get_infinite_stack()&&(e.infinite_stack=!0);this.get_running&&this.get_running()&&(e.running=!0);if(!this.get_parent_of_frontside()||this.get_parent_of_frontside().is_backside())if(l=this.get_frontside_element&&this.get_frontside_element())$(l).is(".toontalk-plain-text-element")||(h=$(l).width(),0!==h&&(g.frontside_width=$(l).width(),g.frontside_height=$(l).height())),$(l).is(":visible")&&(k=$(l).position()),
k&&(g.frontside_left=k.left,g.frontside_top=k.top);if(l=this.get_backside()){if(h=l.get_element())g.backside_width=$(h).width(),g.backside_height=$(h).height(),g.backside_left||(k=$(h).position(),g.backside_left=k.left,g.backside_top=k.top,"&lt;"===$(h).find(".toontalk-settings-backside-button").html()&&(g.advanced_settings_open=!0));l.get_backside_dimensions()&&(g.backside_geometry=l.get_backside_dimensions())}!g.backside_geometry&&this.backside_geometry&&(g.backside_geometry=this.backside_geometry);
g.saved_width=this.saved_width;g.saved_height=this.saved_height;e.description=this.get_description&&this.get_description();return n}console.log("get_json not defined");return{}},add_backside_widgets_to_json:function(e,d){var p=this.get_backside_widgets(),n;0<p.length&&(e.semantic.backside_widgets=g.UTILITIES.get_json_of_array(p,d),(p=this.get_backside_widgets_json_views())&&p.forEach(function(g,p){var h;n=e.semantic.backside_widgets[p];0<=n.widget.shared_widget_index?(h=d.widgets_encountered.indexOf(d.shared_widgets[n.widget.shared_widget_index]),
h=d.json_of_widgets_encountered[h].view):h=n.widget.view;n.is_backside?g.backside_left&&(h.backside_left=g.backside_left,h.backside_top=g.backside_top):g.frontside_left&&(h.frontside_left=g.frontside_left,h.frontside_top=g.frontside_top)}))},get_backside_widgets:function(){return this.backside_widgets||[]},add_backside_widget:function(e,d){var p=this.get_backside(),n=d?e.get_backside():e;g.debugging&&e===this?g.UTILITIES.report_internal_error("Adding a widget to a list of its backside widgets!"):
(this.backside_widgets?0>this.backside_widgets.indexOf(n)&&this.backside_widgets.push(n):this.backside_widgets=[n],d?e.set_parent_of_backside(this,!0):e.set_parent_of_frontside(this,!0),n.set_visible(p.visible()),this.get_running()&&e.set_running(!0),e.render())},remove_all_backside_widgets:function(){if(this.backside_widgets)for(;0<this.backside_widgets.length;)this.backside_widgets[0].remove()},remove_backside_widget:function(e,d,p){this.get_backside();var n=d?e.get_backside(!0):e,k;g.debugging&&
!this.backside_widgets?p?console.log("remove_backside_widget called and there are no backside_widgets"):g.UTILITIES.report_internal_error("Couldn't remove a widget from backside widgets."):(k=this.backside_widgets.indexOf(n),0>k?p?g.debugging&&console.log("Warning: Probable redundant call to remove_backside_widget"):g.UTILITIES.report_internal_error("Couldn't find a widget to remove it from backside widgets. "+n.get_widget()+" ("+n.get_widget().debug_id+")"):(this.backside_widgets.splice(k,1),this.backside_widgets_json_views&&
this.backside_widgets_json_views.splice(k,1),d?(d=e.get_parent_of_backside())&&d.get_widget()===this&&e.set_parent_of_backside(void 0,!0,!0):(d=e.get_parent_of_frontside())&&d.get_widget()===this&&e.set_parent_of_frontside(void 0,void 0,!0),n.set_visible(!1)))},set_backside_widget_sides:function(e,d){var g=this.get_backside(),n=g&&g.visible();this.backside_widgets=e;0<e.length&&(this.get_backside()?this.get_backside().add_backside_widgets(e,d):this.backside_widgets_json_views=d,e.forEach(function(d){d.is_backside()?
d.get_widget().set_parent_of_backside(this,!0):d.get_widget().set_parent_of_frontside(this,!0);d.set_visible(n)}.bind(this)))},get_backside_widgets_json_views:function(e){!this.backside_widgets_json_views&&e&&(this.backside_widgets_json_views=[]);return this.backside_widgets_json_views},can_run:function(){var e=!1,d;this.get_backside_widgets().some(function(g){d=g.get_widget();if(d.get_body&&!d.get_body().is_empty()||d.can_run())return e=!0});return e},add_to_copy:function(e,d){var p;this.get_erased&&
this.get_erased()&&(e.set_erased||g.widget.erasable(e),e.set_erased(this.get_erased()));d||(p=this.get_backside_widgets(),0<p.length&&e.set_backside_widget_sides(g.UTILITIES.copy_widget_sides(p,d),this.get_backside_widgets_json_views()));e.set_visible(this.visible());return e},get_type_name:function(){return""},copy:function(){console.assert(!1,"copy not implemented")},add_copy_to_container:function(e){e||(e=this.copy({}));var d=this.get_frontside_element(),p=e.get_frontside_element(),n=$(d).closest(".toontalk-backside"),
k,l;0===n.length&&(n=$(".toontalk-backside"));k=g.UTILITIES.relative_position(d,n.get(0));l=g.UTILITIES.widget_from_jquery(n);$(p).css({width:$(d).width(),height:$(d).height(),left:k.left+30,top:k.top+30});n.append(p);l&&l.add_backside_widget(e);g.robot.in_training&&g.robot.in_training.copied(this,e,!1);return e},visible:function(){var e=this.get_frontside();return e?e.visible():!1},set_visible:function(e){var d=this.get_frontside(e);d&&d.set_visible(e)},is_backside:function(){return!1},get_parent:function(){return this.get_parent_of_frontside()},
drag_started:function(e,d){g.robot.in_training&&g.robot.in_training.picked_up(this,e,d)},match:function(e){console.assert(!1,"match not implemented for "+e.toString())},removed:function(e){g.UTILITIES.report_internal_error("removed not implemented")},equals_box:function(){return!1},equals_number:function(){return!1},open_backside:function(e){var d=this.get_backside(),p=function(b,a){g.UTILITIES.set_timeout(function(){$(b).addClass("toontalk-side-appearing");g.UTILITIES.add_one_shot_event_handler(b,
"transitionend",2500,function(){$(b).removeClass("toontalk-side-appearing");e&&e()});$(b).css({left:h,top:q,opacity:a});this.apply_backside_geometry()}.bind(this))}.bind(this),n,k,l,h,q,t,b;if(d){n=d.get_element();if($(n).is(":visible"))return g.UTILITIES.highlight_element(n,void 0,1E3),d;if((k=this.get_parent_of_backside())&&k.is_backside())return k.get_widget().open_backside()}k=this.get_frontside_element();l=$(k).parent();d=$(k);if(!d.is(".toontalk-top-level-resource")){for(;0<l.length&&!l.is(".toontalk-backside");)d=
l,l=l.parent();d.get(0);d=this.get_backside(!0);n=d.get_element();n.toontalk_widget=this;t=$(k).offset();(b=l.offset())||(b={left:0,top:0});$(n).css({left:t.left-b.left,top:t.top-b.top,opacity:.01});l.append(n);(l=g.UTILITIES.widget_from_jquery(l))&&l.add_backside_widget(this,!0);h=t.left-b.left;q=t.top-b.top+k.offsetHeight+26;p(n,"inherit");d.render();this.backside_widgets&&this.backside_widgets.forEach(function(b){b.render();b.set_visible(!0)});return d}},apply_backside_geometry:function(){var e=
this.get_backside(!0),d=e.get_element();this.backside_geometry&&d&&(g.backside.scale_backside($(d),this.backside_geometry.x_scale,this.backside_geometry.y_scale,this.backside_geometry.original_width,this.backside_geometry.original_height),e.set_dimensions(this.backside_geometry))},top_level_widget:function(){var e;return this.is_of_type("top-level")?this:(e=g.UTILITIES.widget_from_jquery($(this.get_frontside_element()).closest(".toontalk-top-level-backside")))?e:(e=this.get_parent_of_frontside()||
this.get_parent_of_backside())?e.get_widget().top_level_widget():this.create_top_level_widget()},backup_all:function(e){var d=this.top_level_widget();d&&d.save(e)},render:function(){g.DISPLAY_UPDATES.pending_update(this)},rerender:function(){this.visible()&&g.DISPLAY_UPDATES.pending_update(this)},hide:function(){$(this.get_frontside_element()).hide()},close_button_ok:function(e){return"top-level"!==this.get_type_name()&&!$(e).is(".toontalk-top-level-resource")&&!$(e).closest(".toontalk-conditions-panel").is("*")},
get_widget:function(){return this},add_to_top_level_backside:function(e,d){var p=this.top_level_widget(),n=e.get_frontside_element(!0);p.add_backside_widget(e);p.get_backside_element().appendChild(n);e.render();d&&g.robot.in_training&&g.robot.in_training.dropped_on(e,p);return n},create_top_level_widget:function(e){var d=Object.create(g.widget);e||(e={});d.get_json=function(d){d=this.get_backside(!0).get_element();d=document.defaultView.getComputedStyle(d,null).getPropertyValue("background-color");
return{semantic:{type:"top_level",settings:e},view:{background_color:d}}};d.get_type_name=function(){return"top-level"};d.is_of_type=function(d){return"top-level"===d};d.toString=function(){return"top level widget"};d.get_description=function(){};d.match=function(){return"matched"};d.update_display=function(){this.backside_widgets&&this.backside_widgets.forEach(function(d){d.visible()&&d.update_display()})};d.copy=function(){return this};d.visible=function(){return!0};d.get_parent_of_frontside=function(){};
d.get_parent_of_backside=function(){};d.closest_visible_ancestor=function(){return this};d.get_infinite_stack=function(){return!1};d.top_level_widget=function(){return this};d=d.add_sides_functionality(d);d=d.runnable(d);d=d.has_parent(d);d.get_setting=function(d){"undefined"===typeof e[d]&&(e[d]=g.DEFAULT_SETTINGS&&g.DEFAULT_SETTINGS[d]);return e[d]};d.set_setting=function(d,g){e[d]=g};d.open_settings=function(){g.SETTINGS.open(d)};d.save=function(d,e,k){var l;e||(e={});"undefined"===typeof e.google_drive&&
(e.google_drive=g.google_drive&&this.get_setting("auto_save_to_google_drive"));"undefined"===typeof e.local_storage&&(e.local_storage=this.get_setting("auto_save_to_local_storage"));d?(e.google_drive&&(l=g.UTILITIES.get_json_top_level(this),d=g.google_drive.get_status(),"Ready"===d?(g.google_drive.upload_file(this.get_setting("program_name"),"json",JSON.stringify(l),k),k=void 0):g.google_drive.connection_to_google_drive_possible()&&console.log("Unable to save to Google Drive because: "+d)),e.local_storage&&
(l||(l=g.UTILITIES.get_json_top_level(this)),this.save_to_local_storage(l)),k&&k()):setTimeout(function(){this.save(!0,e,k)}.bind(this),100)};d.publish=function(d,e){g.publish.publish_widget(this.get_setting("program_name"),this,e,d)};d.save_to_local_storage=function(d,e){var k=this.get_setting("program_name"),l=g.UTILITIES.local_storage_program_key(k),h=g.UTILITIES.local_storage_program_meta_data_key(k),q,t,b;e||(e=Date.now());try{t=(t=window.localStorage.getItem(h))?JSON.parse(t):{created:e},t.last_modified=
e,b=JSON.stringify(d),t.file_size=b.length,window.localStorage.setItem(h,JSON.stringify(t)),window.localStorage.setItem(l,b),window.localStorage.setItem("toontalk-last-key",l),q=g.UTILITIES.get_all_locally_stored_program_names(),0>q.indexOf(k)&&(q.push(k),g.UTILITIES.set_all_locally_stored_program_names(q))}catch(f){k="Failed to save state to local storage since it requires "+JSON.stringify(d).length+" bytes. Error message is "+f,g.UTILITIES.is_internet_explorer()?console.error(k):g.UTILITIES.display_message(k),
this.last_local_storage_error=k}};d.load=function(e,n){var k=this.get_setting("program_name"),l=k+".json",h=g.UTILITIES.local_storage_program_key(k),q=function(e){e&&(e=JSON.parse(e),d.remove_all_backside_widgets(),g.UTILITIES.add_backside_widgets_from_json(d,e.semantic.backside_widgets),n&&n())},k=function(d){d?g.google_drive.download_file(d,q):q(window.localStorage.getItem(h))};e&&g.google_drive&&"Ready"===g.google_drive.get_status()?g.google_drive.get_toontalk_program_file(l,k):q(window.localStorage.getItem(h))};
d.walk_children=function(){};d.is_widget=!0;d.get_backside(!0).set_visible(!0);g.debugging&&(d.debug_id=g.UTILITIES.generate_unique_id(),d.debug_string="Top-level widget");return d}}}(window.TOONTALK);window.TOONTALK.backside=function(g){return{create:function(l){var e=Object.create(this),d=document.createElement("div"),p=$(d),n=1,k=1,r=document.createElement("div"),h=document.createElement("div"),q=l.get_help_URL&&l.get_help_URL(),t,b,f,a,c,v,x,y,D,G,I,F=function(a){a?($(r).addClass("toontalk-green-flag-active").removeClass("toontalk-green-flag-inactive"),$(h).addClass("toontalk-stop-sign-inactive").removeClass("toontalk-stop-sign-active")):($(r).addClass("toontalk-green-flag-inactive").removeClass("toontalk-green-flag-active"),
$(h).addClass("toontalk-stop-sign-active").removeClass("toontalk-stop-sign-inactive"))},M=function(){var a=p.width();p.height();var c,b,f;0===a?setTimeout(M,100):(a=$(h).width(),c=(c=$(x).width())?c+14:0,$(h).css({right:c}),$(r).css({right:c+a+6}),b=$(r).width(),D&&$(D).css({right:c+a+b+12}),t&&(f=$(D).width()||0,$(t).css({right:c+a+b+f+12})))};y=this.create_description_label(e,l);var K=function(){var a;a=l.get_running()?"To stop this click on the stop sign.":l.can_run()?"Click this to start this running.":
"There is nothing to run on this.";r.title=a},J=function(){var a;a=l.get_running()?"Click to stop this from running.":l.can_run()?"This has stopped. Click on the flag to start running it.":"There is nothing to run here.";h.title=a},S,aa;g.TRANSLATION_ENABLED&&(q=g.UTILITIES.add_URL_parameter(q,"translate","1"));l.close_button_ok(d)&&(aa=function(a){e.hide_backside(a);a.stopPropagation()},S=(S=l.get_description())?"the "+l.get_type_name()+" who "+S:"the "+l.get_type_name(),x=g.UTILITIES.create_close_button(aa,
"Click to hide this back side of "+S+"."),d.appendChild(x));$(r).addClass("toontalk-green-flag toontalk-green-flag-inactive").click(function(a){l.can_run()?(F(!0),l.set_running(!0),J()):l.is_of_type("top-level")?g.UTILITIES.display_message("There is nothing to run."):g.UTILITIES.display_message("This "+l.get_type_name()+" has nothing to run. Add some robots on the back.")}).on("mouseenter",J);$(h).addClass("toontalk-stop-sign toontalk-stop-sign-active").click(function(a){F(!1);l.set_running(!1);K()}).on("mouseenter",
K);d.appendChild(r);d.appendChild(h);q&&(D=document.createElement("div"),$(D).addClass("toontalk-help-button notranslate toontalk-widget-help-button").click(function(a){G=document.createElement("iframe");$(G).addClass("toontalk-help-frame");G.src=q;document.body.appendChild(I);document.body.appendChild(G)}),D.innerHTML="i",D.translate=!1,D.title="Click to learn more about "+l.get_type_name()+".",I=document.createElement("div"),$(I).addClass("toontalk-close-help-frame-button").button().click(function(a){$(G).remove();
$(I).remove()}),I.innerHTML="Return to ToonTalk",d.appendChild(D));y&&d.appendChild(y);l.is_of_type("top-level")&&(t=document.createElement("div"),$(t).addClass("toontalk-settings-button").click(function(a){l.open_settings()}),t.title="Click to change settings or open a different program.",d.appendChild(t));g.UTILITIES.set_timeout(M);p.addClass("toontalk-backside toontalk-side toontalk-backside-of-"+l.get_type_name());p.css({"z-index":g.UTILITIES.next_z_index()});e.get_element=function(){return d};
e.get_widget=function(){return l};e.visible=function(){return b};e.set_visible=function(a){var c=this.get_widget().get_backside_widgets();b=a;c.forEach(function(c){c.set_visible(a)})};l.get_backside||(l.get_backside=function(){return e});e.get_parent_of_backside=function(){return l.get_parent_of_backside()};e.get_parent_of_frontside=function(){return l.get_parent_of_frontside()};e.get_frontside=function(){return l.get_frontside()};e.get_frontside_element=function(){return l.get_frontside_element()};
l.removed_from_container||(l.removed_from_container=function(a,c,b,f){g.robot.in_training||this.remove_backside_widget(a,c,f)});e.widget_dropped_on_me=function(a,c,b,f,e){var h=this.get_widget(),k,n;c?(k=a.get_backside(!0),n=k.get_element(),k.rerender()):(k=a.get_frontside(!0),n=k.get_element(),a.rerender());k=$(n);p.append(k);this.is_of_type("top-level")?f&&!f.visible()&&k.addClass("toontalk-widget-added-to-backside-by-unwatched-robot"):b||a.animate_to_element(d);g.UTILITIES.set_position_is_absolute(n,
!0,b);g.robot.in_training&&!e&&b&&g.robot.in_training.dropped_on(a,this.get_widget());c&&"top-level"!=this.get_widget().get_type_name()&&(f=a.get_backside(),a.forget_backside(),a.remove(b),a.set_backside(f));h.add_backside_widget(a,c);a.dropped_on_other&&a.dropped_on_other(this.get_widget(),!0,b);a.get_body&&a.get_body().is_empty()&&!a.being_trained&&(f=a.open_backside())&&$(f.get_element()).find(".toontalk-train-backside-button").click();b&&a.get_widget().backup_all();return!0};e.add_backside_widgets=
function(a,c){0!==a.length&&g.UTILITIES.set_timeout(function(){var b,f,d=this.visible();a.forEach(function(a,e){var h=a.get_widget().get_backside();b=a.get_element(!0);b.toontalk_widget=a.get_widget();c&&(f=c[e])&&(a.is_backside()?($(b).css({left:f.backside_left,top:f.backside_top,width:f.backside_width,height:f.backside_height}),a.get_widget().apply_backside_geometry(),f.advanced_settings_open&&h.set_advanced_settings_showing(!0,h.get_element())):(0===f.frontside_width&&(f.frontside_width=""),0===
f.frontside_height&&(f.frontside_height=""),$(b).css({left:f.frontside_left,top:f.frontside_top,width:f.frontside_width,height:f.frontside_height})));p.append(b);a.set_visible(d);a.get_widget().rerender()})}.bind(this))};e.get_backside_dimensions=function(){if(n)return{x_scale:n,y_scale:k,original_width:f,original_height:a}};e.set_dimensions=function(c){n=c.x_scale;k=c.y_scale;f=c.original_width;a=c.original_height};e.scale_to_fit=function(c,b){var d;!f&&this.get_widget().backside_geometry&&(f=this.get_widget().backside_geometry.original_width,
a=this.get_widget().backside_geometry.original_height);d=g.UTILITIES.scale_to_fit(c,b,f,a);n=d.x_scale;k=d.y_scale};e.run_status_changed=function(a){F(a)};d.toontalk_widget=l;g.UTILITIES.drag_and_drop(d);p.resizable({start:function(){c=p.width();v=p.height();f||(f=c);a||(a=v)},resize:function(b,d){var e=d.size.width,h=d.size.height;p.is(".toontalk-top-level-backside")||(n*=e/c,k*=h/v,c=e,v=h,g.backside.scale_backside(p,n,k,f,a))},handles:"e,s,se"});d.addEventListener("mouseenter",function(a){var c=
l.get_frontside(),b=l.get_parent_of_backside();!c||b&&!b.get_widget().is_of_type("top-level")||g.UTILITIES.highlight_element(c.get_element(),a)});d.addEventListener("mouseleave",function(a){l.is_of_type("top-level")||g.UTILITIES.remove_highlight()});e.update_display=function(){e.display_updated()};e.display_updated=function(){var c=$(this.get_element());f||(f=c.width());a||(a=c.height())};l.get_backside_widgets&&(y=l.get_backside_widgets(),e.add_backside_widgets(y,l.get_backside_widgets_json_views()));
g.debugging&&(d.id=l.debug_id);return e},toString:function(){return"backside of "+this.get_widget()},remove_element:function(){$(this.get_element()).remove()},create_infinite_stack_check_box:function(l,e){var d=g.UTILITIES.create_check_box(e.get_infinite_stack(),"toontalk-infinite-stack-check-box","Copy when dragged.","Check this if you want the "+e.get_type_name()+" to be copied instead of moved.");$(d.button).click(function(p){var n=d.button.checked;e.set_infinite_stack(n);g.robot.in_training&&
g.robot.in_training.edited(e,{setter_name:"set_infinite_stack",argument_1:n,toString:n?"change dragging to make a copy of ":"change dragging back to moving for ",button_selector:".toontalk-infinite-stack-check-box"});p.stopPropagation()});return d},create_description_label:function(l,e){var d=e.get_description();if(d)return g.UTILITIES.create_text_element("Back side of a "+e.get_type_name()+" that "+d)},add_advanced_settings:function(l){var e=this.get_widget(),d=this.create_infinite_stack_check_box(this,
e),p=e.get_type_name(),n=g.UTILITIES.create_text_area(e.get_description(),"toontalk-description-input","This&nbsp;"+p+"&nbsp;","Type here to provide additional information about this "+p+"."),k=$("<button>Make a sensor</button>").button(),r=function(){var d=n.button.value.trim();e.set_description(d,!0)&&g.robot.in_training&&g.robot.in_training.edited(e,{setter_name:"set_description",argument_1:d,toString:"change the description to '"+d+"'' of the "+p,button_selector:".toontalk-description-input"})},
h=document.createElement("table"),q=this.get_element();$(h).addClass("toontalk-advanced-setting");$(n.button).val(e.get_description());n.button.addEventListener("change",r);n.button.addEventListener("mouseout",r);k.click(function(d){d=g.sensor.create("click","which",void 0,void 0,!0,e);var b=d.get_frontside_element(!0),f=k.offset();e.add_to_top_level_backside(d,!0);f.left-=120;g.UTILITIES.set_absolute_position($(b),f)});k.attr("title","Click to create a nest which receives messages when events happen to this "+
e.get_type_name()+".");h.appendChild(g.UTILITIES.create_row(n.container));h.appendChild(g.UTILITIES.create_row(k.get(0),d.container));q.appendChild(h);l?$(q).find(".toontalk-settings-backside-button").remove():$(q).find(".toontalk-advanced-setting").hide()},get_type_name:function(){return"the backside of "+g.UTILITIES.add_a_or_an(this.get_widget().get_type_name())},hide_backside:function(l){var e=this.get_widget(),d=e.get_frontside_element(),p=$(e.get_backside_element()),n=p.position(),k=p.parent().closest(".toontalk-backside"),
r=e.get_parent_of_backside();g.UTILITIES.remove_highlight();r&&(r.is_backside()?e.set_parent_of_backside(void 0,!0):r.removed_from_container(e,!0,l,!0),e.forget_backside&&e.forget_backside());(function(){var d=e.get_backside_widgets(),g=e.get_backside_widgets_json_views(!0),k;d.forEach(function(b,f){b.get_widget();var a;if(k=b.get_element())g[f]||(g[f]={}),b.start_position?(a=b.start_position,b.start_position=void 0):a=$(k).position(),b.is_backside()?(g[f].backside_left=a.left,g[f].backside_top=a.top):
(g[f].frontside_left=a.left,g[f].frontside_top=a.top)})})();e.backside_geometry=this.get_backside_dimensions();(function(e){var n=$(d).offset(),p=k.position(),b=function(){e.remove()};e.is(":visible")&&(e.addClass("toontalk-side-appearing"),g.UTILITIES.add_one_shot_event_handler(e.get(0),"transitionend",2500,b),p||(p={left:0,top:0}),e.css({left:n.left-p.left,top:n.top-p.top,opacity:.1}))})(p);$(d).is(":visible")||(n&&$(d).css({left:n.left,top:n.top}),g.UTILITIES.widget_from_jquery(k).add_backside_widget(e),
k.append(d),e.render());e.backside_widgets&&e.backside_widgets.forEach(function(d){d.set_visible(!1)})},create_advanced_settings_button:function(l,e){var d=document.createElement("div"),p=$(d),n=!1;d.innerHTML="&gt;";p.addClass("toontalk-settings-backside-button");p.css({"z-index":g.UTILITIES.next_z_index()});p.click(function(d){n=!n;this.set_advanced_settings_showing(n,l.get_element(),p);d.stopPropagation()}.bind(this));p.attr("title","Click to see the advanced settings of this "+e.get_type_name()+
".");return p.get(0)},set_advanced_settings_showing:function(g,e,d){d||(d=$(e).find(".toontalk-settings-backside-button"));g?($(e).find(".toontalk-advanced-setting").show(),d.html("<"),d.attr("title","Click to hide the advanced settings.")):($(e).find(".toontalk-advanced-setting").hide(),d.html(">"),d.attr("title","Click to show the advanced settings."))},get_widgets:function(){var g=[];$(this.get_element()).children().each(function(e,d){var p=d.toontalk_widget;p&&0>g.indexOf(p)&&g.push(p)});return g},
scale_backside:function(g,e,d,p,n){var k=Math.min(1,e,d);1===e&&1===d?g.css({width:"",height:""}):g.css({transform:"scale("+k+", "+k+")","transform-origin":"top left",width:p*e/k,height:n*d/k})},render:function(){g.DISPLAY_UPDATES.pending_update(this)},rerender:function(){this.visible()&&g.DISPLAY_UPDATES.pending_update(this)},remove_backside_widget:function(g,e,d){return this.get_widget().remove_backside_widget(g,e,d)},remove:function(){this.get_widget().remove()},is_backside:function(){return!0},
get_parent:function(){return this.get_parent_of_backside()},is_of_type:function(g){return this.get_widget().is_of_type(g)}}}(window.TOONTALK);window.TOONTALK.frontside=function(g){return{create:function(l){var e=Object.create(this),d=document.createElement("div"),p=$(d),n;$(d).addClass("toontalk-frontside toontalk-side");d.toontalk_widget=l;g.UTILITIES.drag_and_drop(d);e.get_element=function(){return d};e.get_widget=function(){return l};e.visible=function(){return n};e.set_visible=function(d){var e=this.get_widget();n=d;e.walk_children&&e.walk_children(function(e){e.set_visible(d);return!0})};d.addEventListener("click",function(d){$(d.target).is(".ui-resizable-handle")||
1!==d.which||(p.is(".toontalk-top-level-resource")?l.set_running(!l.get_running()):l.get_running()?g.debugging&&console.log("Ignoring click on running widget."):l.open_backside(),d.stopPropagation())});d.addEventListener("mouseenter",function(d){var e=l.get_backside();e&&g.UTILITIES.highlight_element(e.get_element(),d)});d.addEventListener("mouseleave",function(d){l.get_backside()&&g.UTILITIES.remove_highlight()});g.debugging&&(d.id=l.debug_id);return e},update_display:function(){return this.get_widget().update_display()},
remove:function(){$(this.get_element()).remove()}}}(window.TOONTALK);window.TOONTALK.number=function(g){var l=Object.create(g.widget),e=function(b,f,a,c){var d="",e=100;a=50/a;f/=1+f;if(c)for(c=0;e>=a&&c<b.length;)d=d+"<span class='toontalk-digit' style='font-size:"+e+"%'>"+b[c]+"</span>",c+=1,"-"!==b[c]&&(e*=f);else for(c=b.length-1;e>=a&&0<c;)d="<span class='toontalk-digit' style='font-size:"+e+"%'>"+b[c]+"</span>"+d,--c,"-"!==b[c]&&(e*=f);return d},d=function(b,f){var a=b/(1+b);return Math.ceil(Math.log(.5/f)/Math.log(a))},p=function(b,f,a){if(b.length<=Math.round(f))return'<span class="toontalk-digit" style="font-size:100%">'+
b+"</span>";if(1>f)return"";if(5>f)return"<span style='font-size: 80%'>"+p(b,1.25*f,.8*a)+"</span>";f=f/2-1;return e(b,f,a,!0)+e(b,f,a,!1)},n=function(b,f,a){var c="",d=new BigInteger(10),e=b.isNegative();for(e&&(b=b.abs());a>c.length;)if(b=b.multiply(d),0>b.compare(f))c+="0";else if(c+=b.divide(f).toString(),b=b.remainder(f).multiply(d),b.isZero())return e&&(c="-"+c),c=k(c);e&&(c="-"+c);return c},k=function(b){return 0<b.length&&"0"===b.charAt(b.length-1)?k(b.substring(0,b.length-1)):b},r=function(b,
f){var a=Math.min(f,b/2);return b-(a+1)},h=function(b,f){f||(f=1);if(!("number"!==typeof b&&"string"!==typeof b||"number"!==typeof f&&"string"!==typeof f))return bigrat.fromValues(b,f);var a=bigrat.create();1===f?bigrat.set(a,bigrat.toBigInteger(b.get_value()),BigInteger.ONE):b.get_value&&f.get_value?bigrat.set(a,bigrat.toBigInteger(b.get_value()),bigrat.toBigInteger(f.get_value())):bigrat.set(a,b,f);return a},q=function(b){switch(b){case "+":return"";case "-":return"&minus;";case "*":return"&times;";
case "/":return"&divide;";case "^":return"^";default:return g.UTILITIES.report_internal_error("Number has an unsupported operator: "+b),""}},t=bigrat.fromInteger(10);l.create=function(b,f,a,c,d){var e=Object.create(l),k=h(b,f);c||(c="improper_fraction");a||(a="+");e.set_value=function(a){if(!bigrat.equals(k,a))return this.fire_value_change_listeners(k,a),k=a,this.rerender(),g.debugging&&(this.debug_string=this.toString()),this};e.set_value_from_sub_classes=e.set_value;e.fire_value_change_listeners=
function(a,c){var b=this.get_listeners("value_changed"),f;b&&(f={type:"value_changed",old_value:a,new_value:c},b.forEach(function(a){a(f)}))};e.get_value=function(){return k};e.set_value_from_decimal=function(a){"number"===typeof a?this.set_value(bigrat.fromInteger(a)):this.set_value(bigrat.fromDecimal(a))};e.get_format=function(){return c};e.set_format=function(a,b){c=a;b&&this.rerender();return this};e.get_operator=function(){return a};e.set_operator=function(c,b){a=c;b&&this.rerender();return this};
e=l.add_standard_widget_functionality(e);e.set_description(d);g.debugging&&(e.debug_string=e.toString(),e.debug_id=g.UTILITIES.generate_unique_id(),k.debug_id_new=e.debug_id);return e};l.create_backside=function(){return g.number_backside.create(this)};l.set_from_values=function(b,f){return this.set_value(h(b,f))};l.ONE=function(){return this.create(1)};l.ZERO=function(){return this.create(0)};l.copy=function(b){return this.add_to_copy(l.create(this.get_value()[0],this.get_value()[1],this.get_operator(),
this.get_format(),this.get_description()),b)};l.is_number=function(){return!0};l.equals=function(b){return b.equals_number&&b.equals_number(this)};l.equals_number=function(b){return bigrat.equals(this.get_value(),b.get_value())};l.compare_with=function(b){if(b.compare_with_number)return-1*b.compare_with_number(this)};l.compare_with_number=function(b){return bigrat.equals(this.get_value(),b.get_value())?0:bigrat.isGreaterThan(this.get_value(),b.get_value())?1:-1};l.update_display=function(){var b,
f,a,c,d;b=this.get_frontside(!0).get_element();$(b).is(".toontalk-conditions-contents")?f=$(b):$(b).parent().is(".toontalk-backside, .toontalk-json")?(f=$(b),d=!0):f=$(b).parent().is(".toontalk-scale-half")?$(b):$(b).parent();if($(b).is(".toontalk-carried-by-bird"))a=100,c=40;else if($(b).is(".toontalk-element-attribute"))a=200,c=32;else{if(!f.is(":visible"))return;a=f.width();c=f.height();if(0===a||0===c)return;f.is(".toontalk-nest")&&(a*=.8,c*=.8)}$(b).removeClass("toontalk-number-eighth-size-border toontalk-number-quarter-size-border toontalk-number-half-size-border toontalk-number-full-size-border");
32>=a||32>=c?($(b).addClass("toontalk-number-eighth-size-border"),b.toontalk_border_size=4):64>=a||64>=c?($(b).addClass("toontalk-number-quarter-size-border"),b.toontalk_border_size=8):128>=a||128>=c?($(b).addClass("toontalk-number-half-size-border"),b.toontalk_border_size=16):($(b).addClass("toontalk-number-full-size-border"),b.toontalk_border_size=32);f=c-2*b.toontalk_border_size;d=this.to_HTML(a/(.64*f),f,this.get_format(),!0,this.get_operator(),d);g.UTILITIES.on_a_nest_in_a_box(b)&&(a="width:"+
a+"px;",f=d.indexOf('style="'),d=0<=f?d.substring(0,f+7)+a+d.substring(f+7):d);a=$(b).children(".toontalk-widget");a.is("*")?a=a.get(0):(a=document.createElement("div"),b.appendChild(a));a.innerHTML=d;a.translate=!1;$(a).addClass("toontalk-widget notranslate");b.title=this.get_title();(b=this.get_backside())&&b.rerender()};l.to_HTML=function(b,f,a,c,h,g){var k,l,G,I,F,M,K=!1!==c?" toontalk-top-level-number":"";g&&(K+=" toontalk-number-size-unconstrained-by-container");l=h?q(h):"";b||(b=4);f||(f=16);
if(this.get_erased&&this.get_erased())return'<div class="toontalk-number toontalk-integer'+K+'" style="font-size: '+f+'px;"></div>';0<l.length&&(--b,2>b&&(f*=Math.max(1,b)/2,b=2));if(this.is_integer()&&"scientific_notation"!==a)return k=bigrat.toBigInteger(this.get_value()).toString(),G=k.length,0<l.length&&G++,4>b&&G>b&&(G=Math.min(4,G),f*=b/G,b=G),'<div class="toontalk-number toontalk-integer'+K+'" style="font-size: '+f+'px;">'+l+p(k,b,f)+"</div>";k=' style="font-size:'+.4*f+'px;"';if("improper_fraction"===
a||!a)return f='<table class="toontalk-number toontalk-improper-fraction'+K+'"'+k+'><tr class="toontalk-numerator"><td align="center" class="toontalk-number">'+p(this.numerator_string(),2*b,f)+'</td></tr><tr class="toontalk-fraction-line-as-row"><td  class="toontalk-fraction-line-as-table-entry"><div class="toontalk-fraction-line"></div></tr><tr class="toontalk-denominator"><td align="center" class="toontalk-number">'+p(this.denominator_string(),2*b,f)+"</td></tr></table>",""===l?f:"<table class='toontalk-operator-and-fraction'"+
k+"><tr><td>"+l+"</td><td>"+f+"</td></tr></table>";if("mixed_number"===a||"proper_fraction"===a){l=this.integer_part();if(l.is_zero())return this.to_HTML(b,f,"improper_fraction",c,h);G=this.copy({just_value:!0}).subtract(l).absolute_value();return'<table class="toontalk-number toontalk-mixed-number'+K+'"'+k+'><tr><td class="toontalk-number toontalk-integer-part-of-mixed-number">'+l.to_HTML(b/2,f,"",!1,this.get_operator())+'</td><td class="toontalk-number toontalk-fraction-part-of-mixed-number">'+
G.to_HTML(b/2,f,"improper_fraction",!1)+"</td></tr></table>"}if("decimal"===a)return 4>b&&(f*=Math.max(1,b)/4,b=4),'<div class="toontalk-number toontalk-decimal'+K+'" style="font-size: '+f+'px;">'+l+this.decimal_string(b,f)+"</div>";if("scientific_notation"===a){G=bigrat.isNegative(this.get_value());I=this.get_value();F=bigrat.abs(bigrat.create(),I);I=bigrat.isLessThan(F,bigrat.ONE);F=(I?bigrat.toBigInteger(bigrat.divide(bigrat.create(),bigrat.ONE,F)):bigrat.toBigInteger(F)).toString();I=I?-F.length:
F.length-1;F=bigrat.power(bigrat.create(),t,I);M=bigrat.divide(bigrat.create(),this.get_value(),F);F=6+(0===I?1:Math.ceil(Math.log10(Math.abs(I)))/2);G&&F++;if(b<F+1)return this.to_HTML(F+1,f*b/(F+1),a,c,h,g);c=d(r(b,F),f);c=n(M[0],M[1],c);G?(G=c.substring(0,2),c=c.substring(2)):(G=c.substring(0,1),c=c.substring(1));b=e(c,b*(1-F/b),f,!0);0<b.length&&(b="<span class='toontalk-decimal-point'>.</span>"+b);return'<table class="toontalk-number toontalk-scientific_notation'+K+'"'+k+'><tr><td class="toontalk-number toontalk-significand-of-scientific-notation"><div class="toontalk-number toontalk-decimal'+
K+'" style="font-size: '+f+'px;">'+l+G+b+'</td><td class="toontalk-number toontalk-exponent-of-scientific-notation"><div style="font-size: '+f+'px;"> &times;10<sup style="font-size: '+f/2+'px;">'+I+"</sup></div></td></tr></table>"}};l.drop_on=function(b,f,a,c){if(b.number_dropped_on_me)return b.number_dropped_on_me(this,f,a,c),!0;if(b.widget_dropped_on_me)return b.widget_dropped_on_me(this,f,a,c);console.log("No handler for drop of '"+this+"' on '"+b+"'")};l.number_dropped_on_me=function(b,f,a,c){var d,
e,h,k;return b.visible()&&(a||c&&c.visible())?(c&&(b.robot_waiting_before_next_step=c),d=document.createElement("div"),$(d).addClass("toontalk-bammer-down"),e=$(this.get_frontside_element()).closest(".toontalk-top-level-backside"),d.style.left="-10px",d.style.top=e.height()+"px",e.append(d),f=this.get_frontside_element(),h=$(f).offset(),h.left-=.75*$(d).width(),h.left+=.5*$(f).width()+.1*$(d).width(),h.top-=.5*$(f).height()+.4*$(d).height(),f=function(){this.number_dropped_on_me_semantics(b,a,c)&&
c&&c.run_next_step();a&&this.backup_all();$(d).removeClass("toontalk-bammer-down");g.UTILITIES.set_timeout(function(){var a=e.offset();a||(a={left:0,top:0});$(d).addClass("toontalk-bammer-away");h.left=a.left+e.width()-100;h.top=a.top+e.height()+100;k=function(){$(d).remove()};g.UTILITIES.animate_to_absolute_position(d,h,k);$(d).css({opacity:.01})})}.bind(this),g.UTILITIES.animate_to_absolute_position(d,h,f),$(d).css({opacity:1,"z-index":g.UTILITIES.next_z_index()+100}),this):this.number_dropped_on_me_semantics(b,
a,c)};l.number_dropped_on_me_semantics=function(b,f,a){g.robot.in_training&&f&&g.robot.in_training.dropped_on(b,this);b.remove();switch(b.get_operator()){case "+":return this.add(b);case "-":return this.subtract(b);case "*":return this.multiply(b);case "/":return this.divide(b);case "^":return this.power(b);default:g.UTILITIES.report_internal_error("Number received a number with unsupported operator: "+b.get_operator())}};l.widget_dropped_on_me=function(b,f,a,c){return b.number_dropped_on_me?this.number_dropped_on_me(b,
f,a,c):!1};l.add=function(b){this.set_value(bigrat.add(bigrat.create(),this.get_value(),b.get_value()));return this};l.subtract=function(b){this.set_value(bigrat.subtract(bigrat.create(),this.get_value(),b.get_value()));return this};l.multiply=function(b){this.set_value(bigrat.multiply(bigrat.create(),this.get_value(),b.get_value()));return this};l.divide=function(b){this.set_value(bigrat.divide(bigrat.create(),this.get_value(),b.get_value()));return this};l.power=function(b){this.set_value(bigrat.power(bigrat.create(),
this.get_value(),bigrat.toInteger(b.get_value())));return this};l.absolute_value=function(){this.set_value(bigrat.abs(bigrat.create(),this.get_value()));return this};l.is_zero=function(){return bigrat.equals(this.get_value(),bigrat.ZERO)};l.is_negative=function(){return bigrat.isNegative(this.get_value())};l.toString=function(){return("+"===this.get_operator()?"":this.get_operator())+bigrat.str(this.get_value())};l.to_float=function(){return bigrat.toDecimal(this.get_value())};l.get_type_name=function(){return"number"};
l.get_help_URL=function(){return"docs/manual/numbers.html"};l.get_json=function(){return{type:"number",operator:this.get_operator(),numerator:this.numerator_string(),denominator:this.denominator_string(),format:this.get_format()}};g.creators_from_json.number=function(b){return l.create(b.numerator,b.denominator,b.operator,b.format,b.description)};l.is_integer=function(){return 0===this.get_value()[1].compare(BigInteger.ONE)||0===this.get_value()[0].compare(BigInteger.ZERO)};l.numerator=function(){var b=
bigrat.create();return bigrat.set(b,this.get_value()[0],BigInteger.ONE)};l.denominator=function(){var b=bigrat.create();return bigrat.set(b,this.get_value()[1],BigInteger.ONE)};l.numerator_string=function(){return this.get_value()[0].toString()};l.denominator_string=function(){return this.get_value()[1].toString()};l.integer_part=function(){return this.create(this)};l.decimal_string=function(b,f){if(this.is_integer())return this.numerator_string();var a=l.copy.call(this),c=a.integer_part(),h=c.toString();
"0"===h&&this.is_negative()&&(h="-"+h);var g=a.subtract(c),c=r(b,h.length),k=d(c,f),a=Math.min(h.length,b/2),g=g.absolute_value(),k=n(g.get_value()[0],g.get_value()[1],k),c=k.length<b?k:e(k,c,f,!0);return p(h,a,f)+"<span class='toontalk-decimal-point'>.</span>"+c};l.match=function(b){return this.get_erased&&this.get_erased()?b.match_with_any_number?b.match_with_any_number():this:b.match_with_this_number?b.match_with_this_number(this):this};l.match_with_any_number=function(){return"matched"};l.match_with_this_number=
function(b){return b.equals(this)?"matched":b};l.get_custom_title_prefix=function(){return"Drop another number on me and I'll add it to my value (unless it has been changed so that I'll subtract, multiply, or divide instead)."};return l}(window.TOONTALK);
window.TOONTALK.number_backside=function(g){return{create:function(l){var e=g.backside.create(l),d=e.get_element(),p=document.createElement("div"),n=l.numerator_string(),k=l.denominator_string(),r=g.UTILITIES.create_text_area(n,"toontalk-numerator-input","","Type here to edit the numerator"),h=g.UTILITIES.create_text_area(k,"toontalk-denominator-input","","Type here to edit the denominator"),q=g.UTILITIES.create_radio_button("number_format","decimal","toontalk-decimal-radio-button","Decimal number",
"Display number as a decimal."),t=g.UTILITIES.create_radio_button("number_format","proper_fraction","toontalk-proper-fraction-radio-button","Mixed number","Display number as an integer part and a proper fraction."),b=g.UTILITIES.create_radio_button("number_format","improper_fraction","toontalk-improper-fraction-radio-button","Improper fraction","Display number as a simple fraction."),f=g.UTILITIES.create_radio_button("number_format","scientific_notation","toontalk-scientific-notation-radio-button",
"Scientific notation","Display number as a decimal between 1 and 10 multiplied by ten to some power."),a=g.UTILITIES.create_radio_button("operator","+","toontalk-plus-radio-button","+","Add me to what I'm dropped on."),c=g.UTILITIES.create_radio_button("operator","-","toontalk-minus-radio-button","&minus;","Subtract me from what I'm dropped on."),v=g.UTILITIES.create_radio_button("operator","*","toontalk-times-radio-button","&times;","Multiply me with what I'm dropped on."),x=g.UTILITIES.create_radio_button("operator",
"/","toontalk-dividie-radio-button","&divide;","Divide me into what I'm dropped on."),y=g.UTILITIES.create_radio_button("operator","^","toontalk-power-radio-button","Integer power","Use me as the number of times to multiply together what I'm dropped on."),D=function(a){var c=r.button.value.trim(),b=h.button.value.trim();if(c!==n||b!==k)l.set_from_values(c,b),n=c,k=b,g.robot.in_training&&(a=a.srcElement.className.split(" ",1)[0],g.robot.in_training.edited(l,{setter_name:"set_from_values",argument_1:c,
argument_2:b,toString:"toontalk-denominator-input"===a?"change value of the denominator to "+b+" of the number":"change value of the numerator to "+c+" of the number",button_selector:"."+a}))},G=function(){var a=g.UTILITIES.selected_radio_button(q.button,t.button,b.button,f.button),c=a.value;l.set_format(c,!0);g.robot.in_training&&g.robot.in_training.edited(l,{setter_name:"set_format",argument_1:c,toString:"change the format to "+c+" of the number",button_selector:"."+a.className.split(" ",1)[0]})},
I=function(){var b=g.UTILITIES.selected_radio_button(a.button,c.button,v.button,x.button,y.button),f=b.value;l.set_operator(f,!0);g.robot.in_training&&g.robot.in_training.edited(l,{setter_name:"set_operator",argument_1:f,toString:"change the operator to "+f+" of the number",button_selector:"."+b.className.split(" ",1)[0]})},F=g.UTILITIES.create_horizontal_table(r.container,p,h.container),M=$(g.UTILITIES.create_horizontal_table(q.container,t.container,b.container,f.container)).buttonset().get(0),K=
$(g.UTILITIES.create_horizontal_table(a.container,c.container,v.container,x.container,y.container)).buttonset().get(0),J=g.backside.create_advanced_settings_button(e,l),S=e.update_display;p.innerHTML="/";$(p).addClass("ui-widget");d.appendChild(F);d.appendChild(J);r.button.addEventListener("change",D);r.button.addEventListener("mouseout",D);r.button.addEventListener("mouseenter",function(){n=r.button.value.trim();k=h.button.value.trim()});h.button.addEventListener("change",D);h.button.addEventListener("mouseout",
D);q.button.addEventListener("change",G);t.button.addEventListener("change",G);b.button.addEventListener("change",G);f.button.addEventListener("change",G);switch(l.get_format()){case "decimal":g.UTILITIES.check_radio_button(q);break;case "improper_fraction":g.UTILITIES.check_radio_button(b);break;case "mixed_number":case "proper_fraction":g.UTILITIES.check_radio_button(t);break;case "scientific_format":g.UTILITIES.check_radio_button(f)}switch(l.get_operator()){case "+":g.UTILITIES.check_radio_button(a);
break;case "-":g.UTILITIES.check_radio_button(c);break;case "*":g.UTILITIES.check_radio_button(v);break;case "/":g.UTILITIES.check_radio_button(x);break;case "^":g.UTILITIES.check_radio_button(y)}a.button.addEventListener("change",I);c.button.addEventListener("change",I);v.button.addEventListener("change",I);x.button.addEventListener("change",I);y.button.addEventListener("change",I);e.update_display=function(){$(r.button).val(l.numerator_string());$(h.button).val(l.denominator_string());S()};$(M).addClass("toontalk-advanced-setting");
$(K).addClass("toontalk-advanced-setting");d.appendChild(M);d.appendChild(K);e.add_advanced_settings();return e}}}(window.TOONTALK);window.TOONTALK.box=function(g){var l=Object.create(g.widget);l.create=function(e,d,p,n){var k=Object.create(l),r=[],h;"undefined"===typeof d&&(d=!0);k.get_horizontal=function(){return d};k.set_horizontal=function(e,h){d=e;h&&($(this.get_frontside_element()).children(".toontalk-side").remove(),this.rerender());return this};k.get_hole=function(d){return r[d]};k.get_hole_contents=function(d){return r[d].get_contents()};k.set_hole=function(d,e,b){r[d].set_contents(e);b&&(e&&e.save_dimensions(),this.update_hole_display(d,
e));this.rerender();g.debugging&&(this.debug_string=this.toString())};k.get_holes=function(){return r};k.temporarily_remove_contents=function(d,e){var b=this.get_index_of(d);this.temporarily_removed_contents||(this.temporarily_removed_contents=[]);this.temporarily_removed_contents[b]=d;this.set_hole(b,void 0,e);return function(){this.set_hole(b,d,e);this.temporarily_removed_contents[b]=void 0}.bind(this)};k.get_contents_temporarily_removed=function(d){if(this.temporarily_removed_contents)return this.temporarily_removed_contents[d]};
k.set_contents=function(d){d.forEach(function(d,b){r[b].set_contents(d)})};k.get_size=function(){return e};k.set_size=function(d,h){var b;if(e===d)return!1;r.length=d;if(d>e)for(b=e;b<d;b++)r[b]=g.box_hole.create(b),r[b].set_parent_of_frontside(k);e=d;h&&this.rerender();g.debugging&&(this.debug_string=this.toString());return!0};k.copy=function(h){var g=r.map(function(b){if(b=b.get_contents())return b.copy(h)}),g=l.create(e,d,g,this.get_description());return this.add_to_copy(g,h)};k=k.add_standard_widget_functionality(k);
for(h=0;h<e;h++)r[h]=g.box_hole.create(h),r[h].set_parent_of_frontside(k);k.set_description(n);k.set_contents(p);g.debugging&&(k.debug_string=k.toString(),k.debug_id=g.UTILITIES.generate_unique_id());return k};l.create_backside=function(){return g.box_backside.create(this)};l.equals=function(e){return e.equals_box&&e.equals_box(this)};l.equals_box=function(e){var d=this.get_size(),g,n,k;if(d!==e.get_size())return!1;for(g=0;g<d;g++)if(n=this.get_hole_contents(g),k=e.get_hole_contents(g),!n&&k||n&&
!k||n&&k&&(!n.equals||!n.equals(k)))return!1;return!0};l.compare_with=function(e){if(e.compare_with_box)return-1*e.compare_with_box(this)};l.compare_with_box=function(e){var d=this.get_size(),g=e.get_size(),n,k;if(d>g)return 1;if(d<g)return-1;for(g=0;g<d;g++){n=this.get_hole_contents(g);k=e.get_hole_contents(g);if(n&&!k)return 1;if(!n&&k)return-1;if(n&&k)if(n.compare_with){if(n=n.compare_with(k),1===n||-1===n)return n}else return}return 0};l.match=function(e){return this.get_erased&&this.get_erased()?
e.match_with_any_box?e.match_with_any_box():this:e.match_with_this_box?e.match_with_this_box(this):this};l.match_with_any_box=function(){return"matched"};l.match_with_this_box=function(e){var d=this.get_size(),p=[],n,k,l;if(d!==e.get_size())return e;for(n=0;n<d;n++)if(l=e.get_hole_contents(n)){k=this.get_hole_contents(n);if(!k)return e;k=g.UTILITIES.match(l,k);if(k.is_widget)return k;"matched"!==k&&(p=0===p.length?k:p.concat(k))}return 0<p.length?p:"matched"};l.toString=function(){var e="",d=this.get_size(),
g,n,k=this.get_type_name()+" that looks like ";for(g=0;g<d;g++)n=this.get_hole(g),e+=n.get_full_description(),g<d-1&&(e+=" | ");return k+"["+e.replace(k,"")+"]"};l.get_type_name=function(){return"box"};l.get_help_URL=function(){return"docs/manual/boxes.html"};l.get_json=function(e){var d=[],p=this.get_size(),n;for(n=0;n<p;n++)this.get_hole_contents(n)?d[n]=g.UTILITIES.get_json(this.get_hole_contents(n),e):d[n]=null;return{type:"box",size:p,contents:d,horizontal:this.get_horizontal()}};l.walk_children=
function(e){var d=this.get_size(),g;for(g=0;g<d&&e(this.get_hole(g));g++);};g.creators_from_json.box=function(e,d){return l.create(e.size,e.horizontal,g.UTILITIES.create_array_from_json(e.contents,d),e.description)};l.update_display=function(){var e=this.get_frontside(!0).get_element(),d=this.get_size(),p=function(c,d,e){var h=d.get_frontside_element(!0),k,l;n?(k=q*e,1<e&&(k+=a*(e-1)),l=0):(k=0,l=b*e,1<e&&(l+=a*(e-1)));$(c).css({left:k,top:l,width:q,height:b});c!==h&&($(h).css({left:0,top:0,width:"",
height:""}),c.appendChild(h));g.UTILITIES.has_animating_image(h)||(0<e&&($(c).removeClass("toontalk-box-eighth-size-border-left toontalk-box-quarter-size-border-left toontalk-box-half-size-border-left toontalk-box-full-size-border-left"),$(c).removeClass("toontalk-box-eighth-size-border-top toontalk-box-quarter-size-border-top toontalk-box-half-size-border-top toontalk-box-full-size-border-top"),n?$(c).addClass(f+"-left"):$(c).addClass(f+"-top")),c.toontalk_border_size=a);d.render()},n=this.get_horizontal();
$(e).is(".toontalk-box");var k=function(){var a=$(e).children(".toontalk-box-hole");a.length===d?a.each(function(a,c){p(c,this.get_hole(a),a)}.bind(this)):(a.remove(),this.get_holes().forEach(function(a,c){l=a.get_element();$(l).addClass("toontalk-hole-number-"+c);p(l,a,c);e.appendChild(l)}))}.bind(this),l,h,q,t,b,f,a;$(e).addClass("toontalk-box");$(e).removeClass("toontalk-box-eighth-size-border toontalk-box-quarter-size-border toontalk-box-half-size-border toontalk-box-full-size-border");e.title=
this.get_title();g.debugging&&(this.debug_string=this.toString());this.get_erased()?($(e).addClass("toontalk-box-erased"),$(e).children(".toontalk-side").remove()):($(e).removeClass("toontalk-box-erased"),h=$(e).width(),t=$(e).height(),n?(q=h/d,b=t):(q=h,b=t/d),32>=q||32>=b?(f="toontalk-box-eighth-size-border",a=4):64>=q||64>=b?(f="toontalk-box-quarter-size-border",a=8):128>=q||128>=b?(f="toontalk-box-half-size-border",a=16):(f="toontalk-box-full-size-border",a=32),n?q-=(d-1)*a/d:b-=(d-1)*a/d,$(e).addClass(f),
e.toontalk_border_size=a,g.UTILITIES.set_timeout(k))};l.update_hole_display=function(e,d){var g=this.get_frontside_element(),g=$(g).children(".toontalk-hole-number-"+e),n;g.empty();d&&(n=d.get_frontside_element(!0),g.append(n),$(n).css({left:0,top:0}),d.rerender())};l.drop_on=function(e,d,g){if(e.box_dropped_on_me)return d=e.box_dropped_on_me(this,g),g&&e.rerender(),this.remove(),d;if(e.widget_dropped_on_me)return e.widget_dropped_on_me(this,d,g);console.log("No handler for drop of "+this+" on "+
e)};l.box_dropped_on_me=function(e,d){console.log("box on box not yet implemented");return!1};l.widget_dropped_on_me=function(e,d,l,n){var k=this.get_horizontal(),r=this.get_frontside_element(),h=this.get_size(),q,t,b;if(0!==h){t=$(r).offset();r=k?$(r).width()/h:$(r).height()/h;b=k?t.left:t.top;if(l)for(q=0;q<h;q++)if(t=this.get_hole(q),b+=r,(k?l.pageX<=b:l.pageY<=b)||q+1===h)return(k=t.get_contents())?e.drop_on(k,d,l,n):t.widget_dropped_on_me(e,d,l,n);g.UTILITIES.report_internal_error(e+" dropped on "+
this+" but no event was provided.")}};l.get_index_of=function(e){return e.get_parent_of_frontside().get_index()};l.removed_from_container=function(e,d,l,n){d=!!l;"undefined"===typeof n&&(n=this.get_index_of(e));0<=n?(this.set_hole(n,void 0,d),d&&(this.rerender(),e.restore_dimensions())):g.UTILITIES.report_internal_error("Attempted to remove "+e+" from "+this+" but not found.")};l.get_path_to=function(e,d){var l=this.get_size(),n,k;if("empty hole"===e.get_type_name()){l=e.get_parent_of_frontside();
k=g.box.path.create(e.get_index());if(l===this)return k;l=this.get_path_to(l);l.next=k;return l}for(n=0;n<l;n++)if(k=this.get_hole_contents(n)||this.get_contents_temporarily_removed(n)){if(e===k||k.top_contents_is&&k.top_contents_is(e))return g.box.path.create(n);if(k.get_path_to&&(k=k.get_path_to(e,d)))return l=g.box.path.create(n),l.next=k,l}};l.dereference=function(e,d,l){var n,k;if(e){n=e.get_index&&e.get_index();if(!g.debugging||"number"===typeof n){if(k=this.get_hole_contents(n)){if(k.dereference_contents&&
!e.not_to_be_dereferenced)return k.dereference_contents(e,d,l);if(e.next){if(k.dereference)return k.dereference(e.next,d,l);g.UTILITIES.report_internal_error("Expected to refer to a part of "+k+" but it lacks a method to obtain "+g.path.toString(e.next))}e.removing_widget&&("empty hole"===k.get_type_name()?g.UTILITIES.report_internal_error("Robot is trying to remove something from an empty hole. "):k.get_infinite_stack()||l.remove_from_container(k,this));return k}return this.get_hole(n)}g.UTILITIES.report_internal_error(this+
" unable to dereference the path: "+g.path.toString(e))}else return this};l.path={create:function(e){return{get_index:function(){return e},toString:function(){return"scale"===this.true_type?0===e?"the left side of the scale ":"the right side of the scale ":"the "+g.UTILITIES.cardinal(e)+" hole "},get_json:function(d){return{type:"box_path",index:e,true_type:this.true_type,next:this.next&&this.next.get_json(d)}}}}};l.get_custom_title_prefix=function(){return"Drop things in my holes to keep them for later."};
g.creators_from_json.box_path=function(e,d){var p=l.path.create(e.index);e.next&&(p.next=g.UTILITIES.create_from_json(e.next,d));e.true_type&&(p.true_type=e.true_type);return p};return l}(window.TOONTALK);
window.TOONTALK.box_backside=function(g){return{create:function(l){var e=g.backside.create(l),d=g.UTILITIES.create_text_input(l.get_size().toString(),"toontalk-box-size-input","Number of holes","Type here to edit the number of holes."),p=g.UTILITIES.create_radio_button("box_orientation","horizontal","toontalk-horizontal-radio-button","Left to right","Show box horizontally."),n=g.UTILITIES.create_radio_button("box_orientation","vertical","toontalk-vertical-radio-button","Top to bottom","Show box vertically."),
k=function(){var b=parseInt(d.button.value.trim(),10);l.set_size(b,!0)&&g.robot.in_training&&g.robot.in_training.edited(l,{setter_name:"set_size",argument_1:b,toString:"change the number of holes to "+b+" of the box",button_selector:".toontalk-box-size-input"})},r=function(){var b=g.UTILITIES.selected_radio_button(p.button,n.button),f=b.value,a="horizontal"===f;l.set_horizontal(a,!0);g.robot.in_training&&g.robot.in_training.edited(l,{setter_name:"set_horizontal",argument_1:a,toString:"change the orientation to "+
f+" of the box",button_selector:"."+b.className.split(" ",1)[0]})},h=e.get_element(),q=g.backside.create_advanced_settings_button(e,l),t=e.update_display;d.button.addEventListener("change",k);d.button.addEventListener("mouseout",k);p.button.addEventListener("change",r);n.button.addEventListener("change",r);e.update_display=function(){d.button.value=l.get_size().toString();l.get_horizontal()?g.UTILITIES.check_radio_button(p):g.UTILITIES.check_radio_button(n);t()};h.appendChild(d.container);h.appendChild($(g.UTILITIES.create_horizontal_table(p.container,
n.container)).buttonset().get(0));h.appendChild(q);e.add_advanced_settings();e.render();return e}}}(window.TOONTALK);
window.TOONTALK.box_hole=function(g){return{create:function(l){var e=Object.create(this),d,p,n;e.get_element=function(){n||(n=document.createElement("div"),n.className="toontalk-box-hole toontalk-frontside toontalk-side",n.toontalk_widget=e);return n};e.get_frontside=function(e){return d?d.get_frontside(e):this.get_element()};e.get_side_element=function(){return this.get_element()};e.get_frontside_element=function(e){return d?d.get_frontside_element(e):this.get_element()};e.get_frontside=function(){return this};
e.widget_dropped_on_me=function(d,e,h,n){e=this.get_parent_of_frontside();var l;g.robot.in_training&&h&&g.robot.in_training.dropped_on(d,this);h&&d.save_dimensions&&(d.save_dimensions(),d.set_size_attributes&&(l=$(this.get_element()),d.set_size_attributes(l.width(),l.height())));this.set_contents(d);d.dropped_on_other&&d.dropped_on_other(this,!1,h,n);e.render();return!0};e.get_json=function(){return null};e.add_to_json=function(d){return d};e.copy=function(d){return g.box_hole.create(l)};e.match=
function(){return"matched"};e.get_type_name=function(){return"empty hole"};e.is_of_type=function(d){return"empty hole"===d};e.get_index=function(){return l};e.get_contents=function(){return d};e.set_contents=function(k){var n=this.get_listeners("value_changed");n&&(d!==k&&n.forEach(function(e){e({type:"value_changed",old_value:d,new_value:k})}),d&&n.forEach(function(e){d.remove_listener("value_changed",e,!0)}),k&&n.forEach(function(d){k.add_listener("value_changed",d)}));d&&d.set_parent_of_frontside(void 0);
(d=k)?(d.set_parent_of_frontside(this),g.debugging&&(e.debug_string="A hole containing "+d),d.set_visible(p)):g.debugging&&(e.debug_string="An empty hole")};e.visible=function(){return this.get_parent_of_frontside().visible()};e.set_visible=function(e){p=e;d&&d.set_visible(e)};e.render=function(){if(d)return d.render()};e.rerender=function(){if(d)return d.rerender()};e.set_running=function(e){d&&d.set_running(e)};e.removed_from_container=function(e,n,h){d?(h&&d.restore_dimensions(),this.set_contents(void 0),
h&&this.get_parent_of_frontside().render()):g.UTILITIES.report_internal_error("Holes can't be removed from containers.")};e.temporarily_remove_contents=function(e,g){if(d)return this.get_parent_of_frontside().temporarily_remove_contents(e,g)};e.toString=function(){return d?d.toString():"_"};e.get_description=function(){return d?d.get_description():"_"};e.get_full_description=function(){return d?d.get_full_description():"_"};e.is_backside=function(){return!1};e.get_widget=function(){return this};g.debugging&&
(e.debug_string="An empty hole");g.widget.has_parent(e);g.widget.has_listeners(e);return e}}}(window.TOONTALK);(function(){var g,l,e,d,p,n;window.TOONTALK.bird=function(d){var e=Object.create(d.widget);e.create=function(h,p){var t=Object.create(e);g=function(b){h=b};t.widget_dropped_on_me=function(b,f,a,c){f=f?b.get_backside():b;var e;if(h){if(h.has_ancestor(b))return d.UTILITIES.display_message("Bird can't take its nest to its nest!"),!1;this.visible()||h.visible()||h.any_nest_copies_visible()?(b.save_dimensions(),e=this.get_frontside_element(),$(e).removeClass("toontalk-bird-gimme"),c&&(b.robot_waiting_before_next_step=
c,b.remove_from_parent_of_frontside()),h.animate_bird_delivery(f,this,c&&c.run_next_step,c)):(h.add_to_contents(f),c&&c.run_next_step())}else console.log("to do: handle drop on a nestless bird -- just removes other?");d.robot.in_training&&a&&d.robot.in_training.dropped_on(b,this);return!0};t.animate_delivery_to=function(b,f,a,c,e,g,n){var l=!!a,p=this.get_parent_of_frontside(),q=this.get_frontside_element(),r=this.closest_visible_ancestor_or_frontside(),t=$(r.get_frontside_element()).offset(),K=function(){var a=
$(N).offset(),c;l?this.remove():(c=function(){$(q).removeClass("toontalk-bird-morph-to-static");$(q).addClass("toontalk-bird-static");p&&p.get_widget().rerender()},q.style.position=ca,a&&(t.left-=a.left,t.top-=a.top),$(q).css(t),N&&N.appendChild(q),p&&(p.get_widget().is_of_type("top-level")?this.rerender():p.get_widget().rerender()),Aa&&(pa.remove_backside_widget(this,!1,!0),Aa()),d.UTILITIES.add_animation_class(q,"toontalk-bird-morph-to-static"),d.UTILITIES.add_one_shot_event_handler(q,"animationend",
1E3,c),g&&(g(),b.robot_waiting_before_next_step=void 0))}.bind(this),J=function(){aa();a.add_to_contents(b,this,!0);d.UTILITIES.set_timeout(function(){this.fly_to(t,K)}.bind(this))}.bind(this),S=function(a,c){this.element_to_display_when_flying=a;c&&(this.update_display(),c.update_display());a.width_before_carry=a.clientWidth;a.height_before_carry=a.clientHeight;d.UTILITIES.set_timeout(function(){$(this.element_to_display_when_flying).addClass("toontalk-carried-by-bird").css({left:"",top:"",width:"",
height:"",position:""});this.update_display()}.bind(this))}.bind(this),aa=function(a){if(this.element_to_display_when_flying){var c=this.element_to_display_when_flying.width_before_carry,b=this.element_to_display_when_flying.height_before_carry;$(this.element_to_display_when_flying).removeClass("toontalk-carried-by-bird");a?($(this.element_to_display_when_flying).css({width:c,height:b}),$(q).closest(".toontalk-top-level-backside").append(this.element_to_display_when_flying),d.UTILITIES.set_absolute_position($(this.element_to_display_when_flying),
a)):$(this.element_to_display_when_flying).remove();this.element_to_display_when_flying=void 0;this.update_display()}}.bind(this),N,ca,W,da,ta,Aa,Ba,na,oa,pa,U;a||(a=h);oa=b.get_element();S(oa,b);r=f.get_widget().closest_visible_ancestor().get_widget().get_frontside_element();if(f.visible()||this.visible())if(f=$(r).offset(),ta=$(a.get_frontside_element()).closest(".toontalk-top-level-backside"),ta.is("*")||(ta=$(this.get_frontside_element()).closest(".toontalk-top-level-backside")),(U=ta.offset())||
(U={left:0,top:0}),c&&(t={left:c+U.left,top:e+U.top}),N=q.parentElement,W=$(q).width(),da=$(q).height(),ca=q.style.position,q.style.position="absolute",pa=this.top_level_widget(),p&&p.get_widget().temporarily_remove_contents&&(Aa=p.get_widget().temporarily_remove_contents(this,!0))&&pa.add_to_top_level_backside(this),ta.append(q),$(q).css({left:c||t.left-U.left,top:e||t.top-U.top,width:W,height:da}),(Ba=a.get_contents_frontside_element())&&a.visible()&&(!n||n.visible())){c=$(r).width();e=$(r).height();
na=$(r).offset();U.max_left=U.left+ta.width();U.max_top=U.top+ta.height();f.left+=c;f.top+=e;var la={left:Math.min(na.left+c,U.max_left-c),top:Math.min(na.top+e,U.max_top-e)},fa={left:Math.max(na.left-c,U.left),top:Math.max(na.top-e,U.top)},r=function(){var c=function(){a.set_locked(!0);this.fly_to(na,Ha,300)}.bind(this);aa(la);a.get_locked()?a.run_when_unlocked(c):c()}.bind(this),Ha=function(){S(Ba);this.fly_to(fa,Ca,300)}.bind(this),Ca=function(){aa(fa);this.fly_to(la,Fa,300)}.bind(this),Fa=function(){S(oa,
b);this.fly_to(na,Ia,300)}.bind(this),Ia=function(){aa(na);this.fly_to(fa,eb,300)}.bind(this),eb=function(){S(Ba);this.fly_to(na,Da,300)}.bind(this),Da=function(){a.set_locked(!1);aa();a.update_display();J()}.bind(this);this.fly_to(la,r,300)}else this.fly_to(f,J,300);else a.add_to_contents(b,this,!0)};t.get_json=function(b){return{type:"bird",nest:h&&d.UTILITIES.get_json(h,b)}};t.copy=function(b){var f,a;if(b.just_value)f=this.create(void 0,this.get_description());else{if(b.nests_copied&&b.nests_copied[h]){f=
b.nests_copied[h][0];n.call(f);for(a=1;a<b.nests_copied[h].length;a++)l.call(b.nests_copied[h][a],f);f=this.create(f,this.get_description())}else f=this.create(h,this.get_description());b.birds_copied||(b.birds_copied={});b.birds_copied[h]||(b.birds_copied[h]=[]);b.birds_copied[h].push(f)}return this.add_to_copy(f,b)};t=t.add_standard_widget_functionality(t);t.set_description(p);d.debugging&&(t.debug_id=d.UTILITIES.generate_unique_id(),t.debug_string=h?"a bird with "+h.debug_string:"a bird without a nest");
return t};e.create_backside=function(){return d.bird_backside.create(this)};e.match=function(d){return d.match_with_any_bird?d.match_with_any_bird(this):this};e.match_with_any_bird=function(){return"matched"};e.update_display=function(){var e=this.get_frontside(!0),g=this.get_backside(),n;n=e.get_element();n.title=this.get_title();$(n).is(".toontalk-bird, .toontalk-side-animating")||($(n).addClass("toontalk-bird toontalk-bird-static"),n.addEventListener("dragover",function(b){$(n).is(".toontalk-bird-static")&&
($(n).removeClass("toontalk-bird-static"),d.UTILITIES.add_animation_class(n,"toontalk-bird-gimme"))}),n.addEventListener("dragleave",function(b){$(n).is(".toontalk-bird-gimme")&&$(n).addClass("toontalk-bird-static").removeClass("toontalk-bird-gimme")}));this.element_to_display_when_flying?n.appendChild(this.element_to_display_when_flying):$(n).children(".toontalk-side").remove();g&&g.rerender()};e.fly_to=function(e,g,n){var b=this.get_frontside_element(),f=$(b).offset(),f=Math.atan2(e.top-f.top,e.left-
f.left),a="toontalk-fly-west toontalk-fly-northwest toontalk-fly-north toontalk-fly-northeast toontalk-fly-east toontalk-fly-southeast toontalk-fly-south toontalk-fly-southwest".split(" ")[Math.round(4*(f/Math.PI+1))%8];$(b).position();d.UTILITIES.add_animation_class(b,a);this.animate_to_absolute_position(e,function(){$(b).removeClass(a);n?($(b).addClass("toontalk-bird-static"),setTimeout(g,n)):g()})};e.toString=function(){return"a bird"};e.get_type_name=function(){return"bird"};e.get_help_URL=function(){return"docs/manual/birds-nests.html"};
e.matching_resource=function(d){return d.get_type_name&&d.get_type_name()===this.get_type_name()};d.creators_from_json.bird=function(e,g){return d.bird.create(d.UTILITIES.create_from_json(e.nest,g),e.description)};e.drop_on=function(d,e,g,b){if(d.widget_dropped_on_me)return d.widget_dropped_on_me(this,!1,g,b)};e.get_custom_title_prefix=function(){return"Drop something on me and I'll take it to my nest."};return e}(window.TOONTALK);window.TOONTALK.bird_backside=function(d){return{create:function(e){e=
d.backside.create(e);e.add_advanced_settings(!0);return e}}}(window.TOONTALK);window.TOONTALK.nest=function(k){var r=Object.create(k.widget),h={},q={};r.create=function(q,b,f,a,c){var v=Object.create(r),x;b||(b=[]);f||(f=[]);l=function(b){c&&p.call(c,this);c=b;a=e.call(b);d.call(b,this)};e=function(){return a};n=function(){c&&p.call(c,this);c=void 0;a=k.UTILITIES.generate_unique_id()};d=function(a){this[h](a)};p=function(a){this[h](a,!0)};v.matched_by=function(a){return 0<b.length?k.UTILITIES.match(a,
b[0].get_widget()):[[this,a]]};v.run_when_non_empty=function(a){f.push(a)};v.add_to_contents=function(a,c,d){var e;1===b.push(a)?0<f.length&&(e=f,f=[],e.forEach(function(a){$(a.robot.get_frontside_element()).removeClass("toontalk-robot-waiting");a.robot.run(a.context,a.top_level_context,a.queue)})):a.get_widget().hide();a.is_backside()?a.get_widget().set_parent_of_backside(this):a.get_widget().set_parent_of_frontside(this);x&&!d&&(c?x.forEach(function(b){b.has_ancestor(a.get_widget())||b.animate_bird_delivery(k.UTILITIES.copy_side(a),
c)}):x.forEach(function(c){c.has_ancestor(a.get_widget())||c.add_to_contents(k.UTILITIES.copy_side(a,!1,!0))}));this.rerender()};v.animate_bird_delivery=function(a,c,b,f){var d,e,h;c.animate_delivery_to(a,this,void 0,void 0,void 0,b,f);x&&(d=$(c.closest_visible_ancestor().get_widget().get_frontside_element()).closest(":visible").position(),e=c.get_parent_of_frontside().get_element(),h=this.visible(),x.forEach(function(b){var g=k.UTILITIES.copy_side(a,!1,h),n,l;b.has_ancestor(a.get_widget())||(b.visible()||
h?(n=c.copy({just_value:!0}),l=n.get_frontside_element(!0),$(e).append(l),n.animate_delivery_to(g,b,b,d.left,d.top,void 0,f)):b.add_to_contents(g))}))};v.get_contents_frontside_element=function(){if(0<b.length)return b[0].get_widget().get_frontside_element()};v.get_locked=function(){return this.locked_for_animating_deliveries};v.set_locked=function(a){this.locked_for_animating_deliveries=a;!a&&this.to_run_when_unlocked&&0<this.to_run_when_unlocked.length&&this.to_run_when_unlocked.shift()()};v.run_when_unlocked=
function(a){this.to_run_when_unlocked?this.to_run_when_unlocked.push(a):this.to_run_when_unlocked=[a]};v.removed_from_container=function(a,c,f){a=b.shift();this.visible()&&(a?(a.get_widget().restore_dimensions(),a.is_backside()?a.get_widget().set_parent_of_backside(void 0):a.get_widget().set_parent_of_frontside(void 0)):k.UTILITIES.report_internal_error("Nothing removed from nest!"),0<b.length&&(b[0].set_visible(!0),$(b[0].get_element()).show()),this.render());return a};v.dereference_contents=function(a,
c,f){var d,e,h,g;return 0===b.length?this:a.removing_widget?(a=b[0],f.remove_from_container(a,this),this.visible()&&(h=this.get_frontside_element(),f=$(h).offset(),c=$(h).closest(".toontalk-backside-of-top-level"),(d=c.offset())||(d={left:0,top:0}),e=a.get_frontside_element(),g=$(h).width(),h=$(h).height(),$(e).css({left:.1*g+f.left-d.left,top:.1*h+f.top-d.top,width:.8*g,height:.8*h}),c.append(e)),a):a.next?b[0].get_widget().dereference(a.next,c,f):b[0].get_widget()};v.get_json=function(d){var e=
f&&f.map(function(a){return{robot:k.UTILITIES.get_json(a.robot,d),context:a.context&&k.UTILITIES.get_json(a.context,d),top_level_context:a.top_level_context&&k.UTILITIES.get_json(a.top_level_context,d)}});return{type:"nest",contents:k.UTILITIES.get_json_of_array(b,d),guid:a,original_nest:c&&k.UTILITIES.get_json(c,d),waiting_robots:e}};v.copy=function(f){var d,e,h;if(f.just_value)return 0<b.length?b[0].get_widget().copy(f):k.nest.create(this.get_description(),[],[],"in a robot's condition");d=k.UTILITIES.copy_widget_sides(b,
f);f.fresh_copy?e=k.nest.create(this.get_description(),d,[],a&&k.UTILITIES.generate_unique_id()):(h=c||this,f.birds_copied&&f.birds_copied[this]?(f.nests_copied&&f.nests_copied[h]?(e=f.nests_copied[r][0].copy({}),f.nests_copied[h].forEach(function(a){l.call(a,e)})):e=k.nest.create(this.get_description(),d,[],k.UTILITIES.generate_unique_id()),f.birds_copied[this].forEach(function(a){g.call(a,e)})):e=k.nest.create(this.get_description(),d,[],a,h),f.nests_copied||(f.nests_copied={}),f.nests_copied[h]?
f.nests_copied[h].push(e):f.nests_copied[h]=[e]);return this.add_to_copy(e,f)};v.has_contents=function(){return 0<b.length};v.dropped_on_other=function(c,b,f,d){var e,h,g,n,l,p,q;a||(a=k.UTILITIES.generate_unique_id(),k.debugging&&(v.debug_string="A nest with "+a),e=k.bird.create(this),d&&(d.add_newly_created_widget(e),this.robot_waiting_before_next_step=d),this.rerender(),h=this.get_frontside_element(!0),k.UTILITIES.add_animation_class(h,"toontalk-hatch-egg"),l=function(){var a,l,v;if(b)a=c.get_backside();
else if((v=k.UTILITIES.widget_from_jquery($(h).closest(".toontalk-top-level-backside")))||(v=k.UTILITIES.widget_from_jquery($(c.get_widget().get_frontside_element(!0)).closest(".toontalk-top-level-backside"))),v)a=v.get_backside();else{k.UTILITIES.report_internal_error("Unable to find the top-level backside for bird to go to.");return}l=a.get_element();v=$(l).offset();g=e.get_frontside_element(!0);$(g).removeClass("toontalk-bird-static");k.UTILITIES.add_animation_class(g,"toontalk-fly-southwest");
n=k.UTILITIES.relative_position(h,l);$(g).css({left:n.left,top:n.top});k.robot.in_training&&f?(k.robot.in_training.add_newly_created_widget(e),a.widget_dropped_on_me(e,!1,f,void 0,!0)):a.widget_dropped_on_me(e,!1,f);$(h).removeClass("toontalk-hatch-egg").addClass("toontalk-empty-nest").css({width:"",height:""});"top-level"===this.get_parent_of_frontside().get_widget().get_type_name()&&$(h).css({left:n.left-5,top:n.top+45});q=function(){$(g).removeClass("toontalk-fly-southwest");k.UTILITIES.set_timeout(function(){k.UTILITIES.add_animation_class(g,
"toontalk-fly-down");p=function(){$(g).removeClass("toontalk-fly-down");k.UTILITIES.add_animation_class(g,"toontalk-bird-morph-to-static");k.UTILITIES.add_one_shot_event_handler(g,"animationend",1E3,function(){$(g).removeClass("toontalk-bird-morph-to-static toontalk-side-animating").addClass("toontalk-bird-static")});d&&d.run_next_step();e.update_display()};k.UTILITIES.add_one_shot_event_handler(h,"animationend",1E3,p)}.bind(this))}.bind(this);$(g).removeClass("toontalk-bird-static");a=Math.max(10,
n.left-70);l=Math.max(10,n.top+70);e.animate_to_absolute_position({left:a+v.left,top:l+v.top},q);this.rerender()}.bind(this),k.UTILITIES.add_one_shot_event_handler(h,"animationend",2E3,l));return!0};v.widget_dropped_on_me=function(a,c,f,d){f&&a.save_dimensions&&a.save_dimensions();0===b.length?(this.add_to_contents(c?a.get_backside():a),a.dropped_on_other?a.dropped_on_other(this,c,f,d):k.robot.in_training&&f&&k.robot.in_training.dropped_on(a,this)):a.drop_on(b[0].get_widget(),c,f,d);return!0};v.drop_on=
function(a,c,b,f){return a.widget_dropped_on_me?(a.widget_dropped_on_me(this,!1,b,f),!0):!1};v.element_to_highlight=function(){return 0===b.length?this.get_frontside_element():b[0].get_frontside_element()};v.update_display=function(){var c=this.get_frontside(!0),f=this.get_backside(),d,e,h,g,n,c=c.get_element();0<b.length?(d=b[0].get_widget(),b[0].is_backside()?(g=d.get_backside(!0),n=g.get_element(),g.update_display(),g.scale_to_fit(n,c)):(d.render(),n=b[0].get_element()),e=$(c).width(),h=$(c).height(),
0<e&&0<h&&k.UTILITIES.set_timeout(function(){for(var a=2*n.toontalk_border_size||0,c=.8*e,b=.8*h;2*a>=c||2*a>=b;)a/=2;c-=a;b-=a;$(n).css({width:c,height:b,left:.1*e,top:.1*h});d.set_size_attributes&&d.set_size_attributes(c,b)},2),c.appendChild(n),$(c).addClass("toontalk-empty-nest"),b[0].is_backside()?d.set_parent_of_backside(this):d.set_parent_of_frontside(this)):(c.title=this.get_title(),a?($(c).removeClass("toontalk-nest-with-egg"),$(c).addClass("toontalk-empty-nest")):k.UTILITIES.add_animation_class(c,
"toontalk-nest-with-egg"));$(c).addClass("toontalk-nest");f&&f.rerender()};v[h]=function(a,c){if(!x){if(c)return;x=[]}c?x.splice(x.indexOf(a),1):x.push(a)};v.get_path_to=function(a,c){if(0<b.length){if(b[0].get_widget().get_path_to)return b[0].get_widget().get_path_to(a,c);if(b[0].get_widget()===a)return k.path.to_entire_context()}};v.walk_children=function(a){if(0<b.length)return a(b[0])};v.top_contents_is=function(a){return 0<b.length&&b[0].get_widget()===a};v.any_nest_copies_visible=function(){var a=
!1;if(!x)return!1;x.some(function(c){c.visible()&&(a=!0)});return a};v.compare_with=function(a){if(0<b.length)return b[0].compare_with(a);if(a.compare_with_nest)return-1*a.compare_with_nest(this)};v.compare_with_nest=function(a){return 0===b.length?0:1};v.compare_with_number=function(a){return 0<b.length?b[0].compare_with(a):-1};v.compare_with_box=v.compare_with_number;v.compare_with_scale=v.compare_with_number;v=v.add_standard_widget_functionality(v);v.set_description(q);k.debugging&&(v.debug_id=
k.UTILITIES.generate_unique_id(),v.debug_string=a?"A nest with "+a:"A nest with an egg");if(c&&a)c[h](v);return v};r.create_backside=function(){return k.nest_backside.create(this)};r.match=function(d){return d.match_nest_with_nest?d.match_nest_with_nest(this):d};r.match_nest_with_nest=function(d){return"matched"};r.toString=function(){return"a nest"};r.get_help_URL=function(){return"docs/manual/birds-nests.html"};r.get_type_name=function(){return"nest"};r.matching_resource=function(d){return d.get_type_name&&
d.get_type_name()===this.get_type_name()};r.get_custom_title_prefix=function(){return"Drop something on my bird and she'll take it here."};k.creators_from_json.nest=function(d,b){var f=!d.original_nest&&d.guid&&q[d.guid];f||(f=k.nest.create(d.description,k.UTILITIES.create_array_from_json(d.contents,b),void 0,d.guid,d.original_nest&&k.UTILITIES.create_from_json(d.original_nest,b)),q[d.guid]=f);return f};return r}(window.TOONTALK);window.TOONTALK.nest_backside=function(d){return{create:function(e){e=
d.backside.create(e);e.add_advanced_settings(!0);return e}}}(window.TOONTALK)})();window.TOONTALK.scale=function(g){var l=Object.create(g.widget);l.create=function(e,d,l,n){var k=function(){l.rerender()},r=function(b,f){var a=$(l.get_frontside_element()),c=a.offset(),a=a.width(),c=b.clientX-(c.left+a/2),a=f?a/10:0;return-c>a?0:c>a?1:-1},h,q,t;l||(l=g.box.create(2,void 0,e,d));h=l.get_json;q=l.copy;t=l.get_path_to;l.copy=function(b){var f=q.call(this,b),f=g.scale.create(void 0,void 0,f,b&&this.get_state());return l.add_to_copy(f,b)};l.get_json=function(b){b=h.call(this,b);b.type=
"scale";b.inactive_state=this.get_inactive_state();return b};l.get_path_to=function(b,f){var a=t.call(this,b,f);a&&(a.true_type="scale");return a};l.element_to_highlight=function(b){b=r(b,!0);var f;if(0>b)return this.get_frontside_element();b=this.get_hole(b);return(f=b.get_contents())?f.get_frontside_element():b.get_frontside_element()};l.drop_on=function(b,f,a,c){if(b.widget_dropped_on_me)return b.widget_dropped_on_me(this,f,a,c)};l.widget_dropped_on_me=function(b,f,a,c){var d=this.get_hole_contents(0),
e=this.get_hole_contents(1),h;if(d&&!e)return this.set_hole(1,b),!0;if(!d&&e)return this.set_hole(0,b),!0;h=r(a,!1);if(0===h){if(d){if(d.drop_on)return b.drop_on(d,f,a,c);return}}else if(e){if(e.drop_on)return b.drop_on(e,f,a,c);return}this.set_hole(h,b,a);return!0};l.get_inactive_state=function(){return n};l.update_display=function(){var b=this.get_frontside_element(),f=$(b),a=$(b).children(".toontalk-scale-half"),c=$(b).parent(),c=c.is(".toontalk-backside")?b:c.get(0),d=$(c).width(),e=$(c).height(),
h=function(a,c,b){var f=c.get_frontside_element(!0),h=b*d*.5,g=.5*d,n=e;c=c.get_contents();$(a).css({left:h,top:0,width:g,height:n});a!==f&&(h=0===b?-.05*d:.15*d,b="toontalk-scale-balanced"===k?.1*e:0===b&&"toontalk-scale-left_heavier"===k||1===b&&"toontalk-scale-right_heavier"===k?.25*e:1===b&&"toontalk-scale-left_heavier"===k||0===b&&"toontalk-scale-right_heavier"===k?-.1*e:.2*e,g=.4*d,n=.4*e,$(f).css({left:h,top:b,width:g,height:n}),c&&(c.set_location_attributes&&c.set_location_attributes(h,b),
c.set_size_attributes&&c.set_size_attributes(g,n)),a.appendChild(f))},k,c=g.UTILITIES.scale_to_fit(b,c,123,91);0===d&&(d=1);0===e&&(e=1);d/=c.x_scale;e/=c.y_scale;f.is(".toontalk-top-level-resource")?k="toontalk-scale-balanced":(c=this.get_state(),k="undefined"===typeof c?"toontalk-scale-unbalanced":["toontalk-scale-right_heavier","toontalk-scale-balanced","toontalk-scale-left_heavier"][c+1]);f.removeClass("toontalk-scale-balanced toontalk-scale-left_heavier toontalk-scale-right_heavier toontalk-scale-unbalanced");
f.addClass(k);f.addClass("toontalk-scale");2===a.length?a.each(function(a,c){g.UTILITIES.set_timeout(function(){h(c,this.get_hole(a),a)}.bind(this))}.bind(this)):this.get_holes().forEach(function(a,c){var f=a.get_element();0===c?$(f).addClass("toontalk-left_scale  toontalk-scale-half"):$(f).addClass("toontalk-right_scale toontalk-scale-half");h(f,a,c);b.appendChild(f)});b.title=this.get_title();g.debugging&&(this.debug_string=this.toString())};l.get_type_name=function(){return"scale"};l.get_help_URL=
function(){return"docs/manual/scales.html"};l.toString=function(){var b=this.get_hole(0),f=this.get_hole(1),a;switch(this.get_state()){case -1:a="scale leaning to the right";break;case 1:a="scale leaning to the left";break;case 0:a="balanced scale";break;default:a="unbalanced scale"}b=b?"contains "+g.UTILITIES.add_a_or_an(b.get_full_description()):"is empty";f=f?"contains "+g.UTILITIES.add_a_or_an(f.get_full_description()):"is empty";return a+" and the left pan "+b+" and the right pan "+f};l.create_backside=
function(){return g.scale_backside.create(this)};l.get_state=function(){var b=this.get_inactive_state(),f;if(b)return b;b=this.get_hole_contents(0);f=this.get_hole_contents(1);if(b||f)if(b){if(!f)return 1;if(b.compare_with)return b.compare_with(f)}else return-1};l.match=function(b){return b.match_with_scale?b.match_with_scale(this):this};l.match_with_scale=function(b){return this.get_state()===b.get_state()?"matched":b};l.compare_with=function(b){if(b.compare_with_scale)return-1*b.compare_with_scale(this)};
l.compare_with_scale=function(b){var f=this.get_state();b=b.get_state();return f&&!b?1:!f&&b?-1:f>b?1:f<b?-1:0};l.get_hole(0).add_listener("value_changed",k);l.get_hole(1).add_listener("value_changed",k);l.get_hole_contents(0)&&l.get_hole_contents(0).add_listener("value_changed",k);l.get_hole_contents(1)&&l.get_hole_contents(1).add_listener("value_changed",k);l.get_custom_title_prefix=function(){return"Use me to compare two things."};return l};g.creators_from_json.scale=function(e,d){return l.create(g.UTILITIES.create_array_from_json(e.contents,
d),e.description,void 0,e.inactive_state)};return l}(window.TOONTALK);window.TOONTALK.scale_backside=function(g){return{create:function(l){l=g.backside.create(l);l.add_advanced_settings(!0);return l}}}(window.TOONTALK);window.TOONTALK.robot=function(g){var l=Object.create(g.widget);l.create=function(e,d,p,n,k,r,h){var q=Object.create(l),t,b=!1;p||(p=g.actions.create());t||(t=q);q.get_frontside_conditions=function(){return e};q.set_frontside_conditions=function(b){e=b};q.get_backside_conditions=function(){return d};q.set_backside_conditions=function(b){(d=b)&&g.UTILITIES.available_types.forEach(function(a){d[a]&&g.widget.erasable(d[a])})};q.add_to_backside_conditions=function(b){var a=b.copy({just_value:!0});d||
(d={});d[b.get_type_name()]=a;g.widget.erasable(a)};q.get_body=function(){return p};q.get_animating=function(){return b};q.set_animating=function(f,a){var c=this.get_frontside_element();(b=f)?(a||(a=$(c).offset()),$(c).addClass("toontalk-robot-animating toontalk-side-animating"),$(c).css({width:"",height:"","z-index":g.UTILITIES.next_z_index()}),g.UTILITIES.set_position_relative_to_top_level_backside($(c),a),$(c).closest(".toontalk-top-level-backside").append(c)):$(c).removeClass("toontalk-robot-animating toontalk-side-animating")};
q.get_thing_in_hand=function(){return k};q.set_thing_in_hand=function(b){g.debugging&&b&&"empty hole"===b.get_type_name()?g.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):k=b};q.get_next_robot=function(){return h};q.set_next_robot=function(b){var a=this.get_backside_element();b&&b.set_first_in_team(this.get_first_in_team());!b&&h&&h.set_first_in_team(h);h=b;a&&(b=b?"When the robot can't run then this one will try: ":window.TOONTALK.robot.empty_drop_area_instructions,$(a).find(".toontalk-drop-area-instructions").get(0).innerHTML=
b)};q.get_first_in_team=function(){return t};q.set_first_in_team=function(b){t=b;h&&h.set_first_in_team(b)};q.walk_children=function(b){(!h||b(h))&&this.get_frontside_conditions()&&b(this.get_frontside_conditions())};q.get_run_once=function(){return r};q.set_run_once=function(b){r=b};h&&q.set_next_robot(h);q=q.add_standard_widget_functionality(q);q.set_description(n);g.debugging&&(this.debug_id=g.UTILITIES.generate_unique_id());return q};l.create_backside=function(){return g.robot_backside.create(this)};
l.copy=function(e){var d=this.get_frontside_conditions(),l=this.get_backside_conditions(),d=d?d.copy({just_value:!0}):void 0,n=this.get_next_robot(),n=n?n.copy(e):void 0,k;l&&(k={},g.UTILITIES.available_types.forEach(function(d){k[d]&&(k[d]=k[d].copy({just_value:!0}))}));l=this.create(d,k,this.get_body().copy(),this.get_description(),this.get_thing_in_hand(),this.get_run_once(),n);return this.add_to_copy(l,e)};l.match=function(){console.log("Robot-to-robot matching could be more sophisticated.");
return"matched"};l.run=function(e,d,l){var n=this.get_frontside_conditions(),k=function(d){d.visible()&&$(d.get_frontside_element()).removeClass("toontalk-conditions-not-matched toontalk-conditions-waiting").find(".toontalk-conditions-not-matched, .toontalk-conditions-waiting").removeClass("toontalk-conditions-not-matched toontalk-conditions-waiting")},r,h;if(this.being_trained||!n||this.get_animating())return this;k(n);this.rerender();this.match_status=g.UTILITIES.match(n,e);"matched"===this.match_status&&
(r=this.get_backside_conditions())&&(n=e.get_backside_widgets())&&n.some(function(d){var e=!d.is_backside()&&r[d.get_widget().get_type_name()];if(e&&(k(e),d=g.UTILITIES.match(e,d.get_widget()),"matched"!==d))return this.match_status=d,!0}.bind(this));if("matched"===this.match_status)return l||(l=g.QUEUE),this.get_body().reset_newly_created_widgets(),l.enqueue({robot:this,context:e,top_level_context:d,queue:l}),this.match_status;if(this.match_status.is_widget)return $(this.match_status.get_frontside_element()).addClass("toontalk-conditions-not-matched"),
this.rerender(),this.get_next_robot()?this.get_next_robot().run(e,d,l):this.match_status;this.match_status.forEach(function(d){$(d[1].get_frontside_element()).addClass("toontalk-conditions-waiting")});if(this.get_next_robot()){n=this.get_next_robot().run(e,d,l);if("matched"===n)return n;n.is_widget||n.forEach(function(d){0>this.match_status.indexOf(d)&&this.match_status.push(d)})}this.get_first_in_team()===this&&(h={robot:this,context:e,top_level_context:d,queue:l},this.match_status.forEach(function(d){d[0].run_when_non_empty(h)}),
g.UTILITIES.add_animation_class(this.get_frontside_element(),"toontalk-robot-waiting"));return this.match_status};l.set_stopped=function(e){(this.stopped=e)&&this.visible()&&$(this.get_frontside_element()).removeClass("toontalk-robot-waiting");this.get_next_robot()&&this.get_next_robot().set_stopped(e)};l.run_actions=function(e,d,g){return this.stopped?!1:this.visible()?this.get_body().run_watched(e,d,g,this):this.get_body().run_unwatched(e,d,g,this)};l.picked_up=function(e,d,l){var n;this!==e&&(e.get_infinite_stack&&
e.get_infinite_stack()?this.current_action_name="pick up a copy of":this.current_action_name="pick up",l?(n=e,d=e.copy({}),d=g.path.get_path_to_resource(d)):d=g.path.get_path_to(e,this),d&&this.add_step(g.robot_action.create(d,this.current_action_name),n),e.last_action=this.current_action_name,this.current_action_name=void 0,this.set_thing_in_hand(e))};l.dropped_on=function(e,d){var l;this!==e&&(this.current_action_name="drop it on",(l=g.path.get_path_to(d,this))&&this.add_step(g.robot_action.create(l,
this.current_action_name)),e.last_action=this.current_action_name+" "+d.get_type_name(),this.current_action_name=void 0,this.set_thing_in_hand(void 0))};l.copied=function(e,d,l){this.current_action_name=l?"pick up a copy of":"copy";(e=g.path.get_path_to(e,this))&&this.add_step(g.robot_action.create(e,this.current_action_name),d);d.last_action=this.current_action_name;this.current_action_name=void 0};l.removed=function(e){var d;this.current_action_name="remove";(d=g.path.get_path_to(e,this))&&this.add_step(g.robot_action.create(d,
this.current_action_name));e.last_action=this.current_action_name;this.current_action_name=void 0};l.edited=function(e,d){var l;this.current_action_name="edit";(l=g.path.get_path_to(e,this))&&this.add_step(g.robot_action.create(l,this.current_action_name,d));this.current_action_name=void 0};l.erased_widget=function(e,d){var l;this.current_action_name="erased_widget";(l=g.path.get_path_to(e,this))&&this.add_step(g.robot_action.create(l,this.current_action_name,{erased:d,toString:d?"erase":"un-erase"}));
this.current_action_name=void 0};l.remove_from_container=function(e,d){var l=d.get_index_of&&d.get_index_of(e),n=function(){e.get_parent_of_frontside()&&d.removed_from_container(e,!1,!0,l)};this.get_animating()?g.UTILITIES.add_one_shot_event_handler(this.get_frontside_element(),"transitionend",2500,n):n();this.add_newly_created_widget(e)};l.add_step=function(e,d){this.get_body().add_step(e,d);this.get_frontside_element().title=this.get_title()};l.get_context=function(){var e=this.get_frontside_element(),
d=$(e).parent(),e=g.UTILITIES.widget_from_jquery(d);return!e&&(d=g.UTILITIES.widget_from_jquery(d.closest(".toontalk-backside-of-robot")))?d.get_context():e};l.training_started=function(){var e=this.get_context();e?(this.being_trained=!0,this.set_frontside_conditions(e.copy({just_value:!0})),$("*").css({cursor:"url("+g.UTILITIES.absolute_file_path("images/RB19.32x32.PNG")+"), default"}),this.get_frontside_element().title=this.get_title(),e=this.get_backside_element(),$(e).find(".toontalk-conditions-panel").remove()):
g.UTILITIES.report_internal_error("Robot started training but can't find its 'context'.")};l.training_finished=function(){var e=this.get_body().get_newly_created_widgets(),d,l;$("*").css({cursor:""});for(d=0;d<e.length;d++)l=e[d],"drop it on top-level"!==l.last_action&&"copy"!==l.last_action||this.add_step(g.robot_action.create(g.newly_created_widgets_path.create(d),"add to the top-level backside"));this.rerender();this.being_trained=!1;this.get_frontside_element().title=this.get_title();this.backup_all()};
l.update_display=function(){var e=this.get_frontside(!0),d=this.get_backside(),l=this.get_thing_in_hand(),n,k;g.debugging&&(this.debug_string=this.toString());n=e.get_element();l&&(k=l.get_frontside_element());!k&&this.carrying_tool&&(k=document.createElement("div"),$(k).addClass(this.carrying_tool));n.title=this.get_title();$(n).addClass("toontalk-robot");$(n).children(".toontalk-side, .toontalk-held-by-robot").remove();k&&n.appendChild(k);this.match_status&&(this.match_status.is_widget?$(n).addClass("toontalk-side-animating toontalk-robot-not-matched"):
$(n).removeClass("toontalk-robot-not-matched"));g.UTILITIES.set_timeout(function(){var d,e,g,t,b;k&&(b={position:"absolute"},$(k).addClass("toontalk-held-by-robot"),d=$(k).width(),e=$(k).height(),g=$(n).width(),t=$(n).height(),0===d&&(d=2*g,e=t/2,b.width=d,b.height=e),b.left=(g-d)/2,b.top=(t-e)/2,$(k).css(b),l&&l.render())});d&&d.rerender()};l.add_newly_created_widget=function(e){return this.get_body().add_newly_created_widget(e)};l.add_newly_created_widget_if_new=function(e){if(e!==this.get_context())return this.get_body().add_newly_created_widget_if_new(e)};
l.get_recently_created_widget=function(){var e=this.get_body().get_newly_created_widgets();return e[e.length-1]};l.get_title=function(){var e=this.get_description();if(e)return e="This robot "+e,0>e.lastIndexOf(".")&&(e+="."),e+"\n"+this.toString();e=this.get_frontside_element();return $(e).is(".toontalk-top-level-resource")?"Drag this robot to a work area.":this.toString()};l.toString=function(){var e=this.get_frontside_conditions(),d=this.get_body(),l="",n="",k=this.get_next_robot();if(!e)return"has yet to be trained.";
e=e.get_full_description();this.being_trained&&(l="is being trained.\n",n="\n...");e=g.UTILITIES.add_a_or_an(e);d=l+"When working on something that matches "+e+" he will \n"+d.toString()+n;this.match_status&&(this.match_status.is_widget?d="He isn't running because the "+this.match_status+" in his conditions (highlighted in red) doesn't match the corresponding widget. Perhaps editing his conditions will help.\n"+d:"matched"!==this.match_status&&(d="He is waiting for something to be delivered to the nest that matches the "+
this.match_status[0][1]+"in his conditions (highlighted in yellow).\n"+d));k&&(d+="\nIf it doesn't match then the next robot will try to run.\n"+k.toString());return d};l.get_type_name=function(){return"robot"};l.get_help_URL=function(){return"docs/manual/robots.html"};l.get_json=function(e){var d=this.get_frontside_conditions(),l=this.get_backside_conditions(),n,k,r;d&&(n=d.is_of_type("top-level")?{type:"top_level"}:g.UTILITIES.get_json(d,e));l&&g.UTILITIES.available_types.forEach(function(d){l[d]&&
(k||(k={}),k[d]=g.UTILITIES.get_json(l[d],e))});this.get_next_robot()&&(r=g.UTILITIES.get_json(this.get_next_robot(),e));return{type:"robot",frontside_conditions:n,backside_conditions:k,body:this.get_body().get_json(e),run_once:this.get_run_once(),next_robot:r}};g.creators_from_json.robot=function(e,d){var l,n,k;e.thing_in_hand&&(n=g.UTILITIES.create_from_json(e.thing_in_hand,d));e.next_robot&&(l=g.UTILITIES.create_from_json(e.next_robot,d));e.backside_conditions&&(k={},g.UTILITIES.available_types.forEach(function(n){k[n]=
g.UTILITIES.create_from_json(e.backside_conditions[n],d)}));return g.robot.create(g.UTILITIES.create_from_json(e.frontside_conditions||e.bubble,d),k,g.UTILITIES.create_from_json(e.body,d),e.description,n,e.run_once,l)};return l}(window.TOONTALK);
window.TOONTALK.robot_backside=function(g){var l=function(d,e,n,k){d=g.UTILITIES.create_text_element(d);var l=e.get_frontside_element(!0),h=document.createElement("div");$(l).addClass("toontalk-conditions-contents "+k);g.UTILITIES.set_timeout(function(){$(l).parent().addClass("toontalk-conditions-contents-container");$(l).css({left:"inherit",width:"inherit",height:"inherit"});e.render()});n.match_status&&(n.match_status.is_widget?$(n.match_status.get_frontside_element()).addClass("toontalk-conditions-not-matched"):
"matched"!==n.match_status&&n.match_status.forEach(function(d){$(d[1].get_frontside_element()).addClass("toontalk-conditions-waiting")}));h.appendChild(l);n=g.UTILITIES.create_horizontal_table(d,h);$(n).addClass("toontalk-conditions-panel");return n},e=function(d,e){var n=e.get_frontside_conditions(),k=e.get_backside_conditions(),r,h;n&&0===$(d).find(".toontalk-frontside-conditions-area").length&&(d.insertBefore(l("Runs only if the widget matches: ",n,e,"toontalk-frontside-conditions-area"),d.firstChild),
n.set_visible(!0),n.render());k&&Object.keys(k).forEach(function(n){if(r=k[n])h="toontalk-backside-"+n+"-conditions-area",0===$(d).find("."+h).length&&(n="bird"===n?g.UTILITIES.create_text_element("And there is a bird on the back."):l("Runs only if the "+n+" on the backside matches: ",r,e,h),d.insertBefore(n,d.firstChild.nextSibling),r.set_visible(!0),r.render())})};return{create:function(d){var l=g.backside.create(d),n=l.get_element(),k=g.UTILITIES.create_check_box(!d.get_run_once(),"toontalk-run-once-check-box",
"When finished start again","Check this if you want the robot to start over again after finishing what he was trained to do."),r=g.UTILITIES.create_drop_area(window.TOONTALK.robot.empty_drop_area_instructions),h=d.get_next_robot(),q=g.backside.create_advanced_settings_button(l,d),t=l.update_display;r.data("drop_area_owner",d);$(k.button).click(function(b){var f=k.button.checked;d.set_run_once(!f);g.robot.in_training&&g.robot.in_training.edited(d,{setter_name:"set_run_once",argument_1:!f,toString:"change to "+
(f?"run again":"run once")+" of the robot",button_selector:".toontalk-run-once-check-box"});b.stopPropagation()});h&&r.append(h.get_frontside_element(!0));r.get(0).addEventListener("drop",function(b){b=g.UTILITIES.get_dragee();(b=g.UTILITIES.widget_from_jquery(b))&&b.is_of_type("robot")&&(b=b.open_backside(),$(b.get_element()).find(".toontalk-train-backside-button").click())});l.update_display=function(){var b=d.get_frontside_element();b&&(b.title=d.get_title());t()};n.appendChild(this.create_train_button(l,
d));n.appendChild(q);$(k.container).addClass("toontalk-advanced-setting");r.addClass("toontalk-advanced-setting");n.appendChild(k.container);n.appendChild(r.get(0));e(n,d);l.add_advanced_settings();return l},create_train_button:function(d,l){var n=d.get_element();$(n);var k=$("<button>Train</button>").button();k.addClass("toontalk-train-backside-button");var r=!1,h=function(){r?(k.button("option","label","Stop training"),k.attr("title","Click to stop training this robot.")):l.get_body().is_empty()?
(k.button("option","label","Train"),k.attr("title","Click to start training this robot.")):(k.button("option","label","Re-train"),k.attr("title","Click to start training this robot all over again."));$(n).is(":visible")&&e(n,l)};h();k.click(function(d){r=!r;h();r?(l.get_body().reset_steps(),g.robot.in_training=l,l.training_started()):(l.training_finished(),g.robot.in_training=null);d.stopPropagation()});return k.get(0)}}}(window.TOONTALK);window.TOONTALK.robot.empty_drop_area_instructions="Drop a robot here who will try to run when this robot can't run.";(function(){var g=function(g){return"rotate"===g||"skewX"===g||"skewY"===g||"transform-origin-x"===g||"transform-origin-y"===g};window.TOONTALK.element=function(l){var e=["left","top","width","height"],d=Object.create(l.widget),p=function(d,e){var g,h;"number"===typeof d&&(h=d);0===d.length&&(h=0);if("undefined"===typeof h&&(g=d.substring(d.length-1),0<="0123456789x".indexOf(g)&&(h=parseFloat(d),isNaN(h))))return;g=h;0<=["rotate","skewX","skewY"].indexOf(e)&&(g%=360,0>g&&(g+=360));return g};d.create=
function(e,k,p,h){var q=Object.create(d),t=q.drag_started,b={},f={},a,c,v,x;k||(k=[]);q.get_HTML=function(){return e};q.get_text=function(){return this.get_frontside_element().innerText};q.set_HTML=function(a){var c=this.get_frontside_element();if(!c||e===a)return!1;e=a;$(c).children(":not(.ui-resizable-handle)").remove();this.rerender();return!0};q.set_text=function(a){var c=this.get_frontside_element(),b=function(c){$(c).contents().each(function(){this.nodeType==Node.TEXT_NODE?(this.textContent=
a,a=""):b(this,a)})};if(!c||a===c.textContent)return!1;b(c);return this.set_HTML(c.innerHTML)};q.get_style_attributes=function(){return k};q.set_style_attributes=function(a){k=a};q.get_attribute_widgets=function(){return b};q.get_original_copies=function(){return f};q.get_pending_css=function(){return a};q.get_transform_css=function(){return c};q.add_to_css=function(b,f){g(b)?(c||(c={}),c[b]=f):(a||(a={}),a[b]=f)};q.apply_css=function(){var b,f;if(a||c)if(b=this.get_frontside_element())if($(b).is(":visible")){if(c){c.rotate&&
(f="rotate("+c.rotate+"deg)");c.skewX&&(f||(f=""),f+="skewX("+c.skewX+"deg)");c.skewY&&(f||(f=""),f+="skewY("+c.skewY+"deg)");if(c["transform-origin-x"]||c["transform-origin-y"])a||(a={}),a["transform-origin"]=(c["transform-origin-x"]||0)+" "+(c["transform-origin-y"]||0);f&&(a||(a={}),a["-webkit-transform"]=f,a["-moz-transform"]=f,a["-ms-transform"]=f,a["o-transform"]=f,a.transform=f)}l.UTILITIES.set_timeout(function(){a&&(a.width&&"undefined"===typeof a.height?a.height=b.clientHeight:a.height&&"undefined"===
typeof a.width&&(a.width=b.clientWidth),$(b).css(a),x&&(a.width||a.height)&&x.css({width:a.width,height:a.height}),a=void 0)})}else l.UTILITIES.set_timeout(function(){this.apply_css()}.bind(this),100)};q.on_update_display=function(a){v?v.push(a):v=[a]};q.fire_on_update_display_handlers=function(){v&&l.UTILITIES.set_timeout(function(){v.forEach(function(a,c){a()||v.splice(c,1)})})};q.get_image_element=function(){return x};q.set_image_element=function(a,c){x=$(a).find("img");0===x.length?x=void 0:($(c).width(x.width()),
$(c).height(x.height()))};q.get_additional_classes=function(){return h};q.set_additional_classes=function(a){h=a};q=q.add_standard_widget_functionality(q);q.drag_started=function(a,c){this.drag_x_offset=a.view.drag_x_offset;this.drag_y_offset=a.view.drag_y_offset;t.call(this,a,c)};q.set_description(p);l.debugging&&(q.debug_string=q.toString(),q.debug_id=l.UTILITIES.generate_unique_id());return q};d.copy=function(e){var g=d.create(this.get_HTML(),this.get_style_attributes().slice(),this.get_description());
return this.add_to_copy(g,e)};d.match=function(d){return this.get_erased&&this.get_erased()?d.match_with_any_element?d.match_with_any_element():this:d.match_with_another_element_widget?d.match_with_another_element_widget(this):this};d.match_with_any_element=function(){return"matched"};d.match_with_another_element_widget=function(d){return this.get_HTML()===d.get_HTML()?"matched":d};d.compare_with=function(d){if(d.compare_with_other_element)return d.compare_with_other_element(this)};d.compare_with_other_element=
function(d){d=d.get_HTML().localeCompare(this.get_HTML());return 0>d?-1:0<d?1:d};d.create_backside=function(){return l.element_backside.create(this)};d.get_attribute_from_pending_css=function(d){var e=this.get_pending_css();if(e&&e[d]||(e=this.get_transform_css())&&e[d])return e[d]};d.get_attribute_from_current_css=function(d){var e=this.get_frontside_element(),g=e.style[d];""===g&&(g=$(e).css(d));return g?"number"===typeof g?g:g.replace("px",""):0};d.get_attribute=function(d){var e=this.get_attribute_from_pending_css(d);
return"undefined"!==typeof e?e:this.get_attribute_from_current_css(d)};d.set_attribute=function(d,e,g,h){var q,t;if(!this.get_frontside(!0).get_element())return!1;q=this.get_attribute_from_pending_css(d);if(q===e)return!1;"undefined"===typeof q&&(q=this.get_attribute_from_current_css(d));t=p(e,d);if("number"===typeof t){if(q==t)return!0;e=t}g&&l.robot.in_training&&l.robot.in_training.edited(this,{setter_name:"set_attribute",argument_1:d,argument_2:e,toString:"change the '"+d+"' style to "+e+" of",
button_selector:".toontalk-element-"+d+"-attribute-input"});this.add_to_css(d,e);h&&(e=this.get_style_attributes(),0>e.indexOf(d)&&e.push(d));this.rerender();return!0};d.dropped_on_style_attribute=function(d,e,g,h){var p,t,b;if(d){p=d.toString();if(d.is_of_type("number")){t=this.get_attribute(e);if("number"===typeof t)b=t;else if("auto"===t)switch(e){case "left":b=$(this.get_frontside_element()).offset().left;break;case "top":b=$(this.get_frontside_element()).offset().top;break;default:b=0}else b=
parseFloat(t);t=d.to_float();switch(p.substring(0,1)){case "-":p=b-t;break;case "*":p=b*t;break;case "/":p=b/t;break;case "^":p=Math.pow(b,t);break;default:p=b+t}this.set_attribute(e,p,!1);(g||h&&h.visible())&&this.get_backside().render()}d.get_infinite_stack()||d.remove();l.robot.in_training&&g&&l.robot.in_training.dropped_on(d,this.create_attribute_widget(e))}};d.get_attribute_widget=function(d){var e=this.get_attribute_widgets()[d];e||(e=this.create_attribute_widget(d),this.get_attribute_widgets()[d]=
e);return e};d.create_attribute_widget=function(d){var g=".toontalk-element-"+d+"-attribute-input",p=this.get_backside_element(),h=this.get_attribute(d),q=this,t=function(c){var f=b.get_attribute_owner(),e;c.currentTarget.toontalk_widget===f&&(e=$(f.get_frontside_element()).closest(".toontalk-top-level-backside").offset(),e||(console.log("Unable to find top-level backside of an element for its position. Perhaps is 'visible' but not attached."),e={left:0,top:0}),c="left"===d?c.pageX-e.left-f.drag_x_offset:
c.pageY-e.top-f.drag_y_offset,b.set_value_from_decimal(c),a.call(b))}.bind(this),b,f,a,c;p&&(g=$(p).find(g),0<g.length&&(g.get(0).toontalk_widget=this));b=l.number.create(0,1);b.element_widget=this;b.set_value_from_decimal(h);b.set_format("decimal");b.attribute=d;b.get_type_name=function(){return"element attribute"};c=b.toString;b.toString=function(){return c.call(this)+" ("+this.attribute+")"};f=b.equals;b.equals=function(a){return d===a.attribute?this.equals(a.element_widget):f.call(this,a)};(h=
this.get_original_copies()[d])?h.push(b):this.get_original_copies()[d]=[b];b.set_value=function(a){var c=q.get_original_copies()[d],b;this.get_attribute_owner().set_attribute(this.attribute,bigrat.toDecimal(a))&&c.forEach(function(c,f){b=c.set_value_from_sub_classes(a)});return b};a=b.update_display;b.update_display=function(){var c;this.get_erased()||(c=this.get_attribute_owner().get_attribute(this.attribute),b.set_value_from_decimal(c));a.call(this)};0<=e.indexOf(d)&&(this.on_update_display(function(){b.update_display();
return!0}),"left"===d||"top"===d)&&(h=this.get_frontside_element(),h.addEventListener("drag",t));b.copy=function(a){return a.just_value?l.number.copy.call(this,a):this.add_to_copy(q.create_attribute_widget(d),a)};b.get_json=function(a){return{type:"attribute_number",attribute_name:d,element:l.UTILITIES.get_json(q,a)}};b.get_original_attribute_widget=function(){return q.get_original_copies()[d][0]};b.get_attribute_owner=function(){var a=function(c){if(c=c.get_parent_of_frontside())return c.is_backside()?
c:a(c.get_widget())},c=this.get_original_attribute_widget();if(c!==this)return c.get_attribute_owner();var b,c=a(this);if(!c||!c.is_of_type("element"))return q;c=c.get_widget();for(b=c.get_parent_of_backside();b&&b.is_of_type("element");)c=b.get_widget(),b=c.get_parent_of_backside();return c};return b};l.creators_from_json.attribute_number=function(d,e){return l.UTILITIES.create_from_json(d.element,e).create_attribute_widget(d.attribute_name)};d.update_display=function(){var d=this.get_frontside_element();
this.get_backside();var e=function(d){return this.get_image_element()?"image":$(d).is(".toontalk-plain-text-element")?"text":"element"}.bind(this),g,h;this.being_dragged||(this.get_erased&&this.get_erased()?$(d).css({opacity:0}):(this.get_erased&&"0"===$(d).css("opacity")&&$(d).css({opacity:1}),d.children.length===$(d).children(".ui-resizable-handle").length&&(g=document.createElement("div"),g.innerHTML=this.get_HTML(),d.appendChild(g),this.set_image_element(g,d),$(d).addClass("toontalk-element-frontside"),
"<"!==g.innerHTML.substring(0,1)&&((h=this.get_additional_classes())&&$(g).addClass(h),$(d).addClass("ui-widget toontalk-plain-text-element"))),l.UTILITIES.on_a_nest_in_a_box(d)&&(this.set_attribute("width",$(d).closest(".toontalk-box-hole").width(),!1),this.set_attribute("height",$(d).closest(".toontalk-box-hole").height(),!1)),this.apply_css(),this.fire_on_update_display_handlers(),d.title="Click to see the backside where you can place robots or change the style of this "+e(d)))};d.toString=function(){var d=
"element whose HTML is '"+l.UTILITIES.maximum_string_length(this.get_HTML(),40)+"'";l.debugging&&(d+=" ("+this.debug_id+")");return d};d.get_type_name=function(){return"element"};d.get_help_URL=function(){return"docs/manual/elements.html"};d.get_json=function(d){var e=this.get_style_attributes(),g=[],h=l.UTILITIES.remove_z_index(this.get_HTML()),p=encodeURIComponent(h);0===h.indexOf("<img src='data:image/")?(d.shared_html||(d.shared_html=[]),h=d.shared_html.indexOf(p),0>h&&(h=d.shared_html.push(p)-
1),d={shared_html_index:h}):d=p;e.forEach(function(d){g.push(d)});return{type:"element",html:d,attributes:g,attribute_values:g.map(this.get_attribute.bind(this)),additional_classes:this.get_additional_classes()}};l.creators_from_json.element=function(e,g){var l=decodeURIComponent("string"===typeof e.html?e.html:g.shared_html[e.html.shared_html_index]),h=d.create(l,e.attributes,e.description),q;q=g&&g.event?["left","top"]:[];e.attribute_values.forEach(function(d,b){var f=e.attributes[b];0>q.indexOf(f)&&
h.add_to_css(f,p(d)||d)});e.additional_classes&&h.set_additional_classes(e.additional_classes);return h};d.create_attribute_path=function(d,e){var g=l.path.get_path_to(d.element_widget,e);return this.extend_attribute_path(g,d.attribute)};d.extend_attribute_path=function(d,e){return{dereference:function(g,h,l){return d.dereference(h||g,void 0,l).get_attribute_widget(e)},toString:function(){return"the '"+e+"' property of "+d},get_json:function(){return{type:"path_to_style_attribute",attribute:e,element_widget_path:d.get_json()}}}};
l.creators_from_json.path_to_style_attribute=function(e){var g=l.UTILITIES.create_from_json(e.element_widget_path);return d.extend_attribute_path(g,e.attribute)};d.get_size_attributes=function(){return{width:this.get_attribute("width"),height:this.get_attribute("height")}};d.set_size_attributes=function(d,e){this.set_attribute("width",d);this.set_attribute("height",e);l.UTILITIES.set_timeout(function(){this.rerender()}.bind(this))};d.set_location_attributes=function(d,e){this.set_attribute("left",
d);this.set_attribute("top",e)};return d}(window.TOONTALK);window.TOONTALK.element_backside=function(l){var e=function(n,k,p){var h=function(b){var f=k.get_style_attributes();0>f.indexOf(b)&&(f.push(b),"left"===b?(b=k.get_frontside_element(),$(b).on("drag",function(a){var c=k.get_backside_element(),b=k.get_frontside_element();c&&b&&$(c).find(".toontalk-element-left-attribute-input").val(a.originalEvent.clientX)})):"top"===b&&(b=k.get_frontside_element(),$(b).on("drag",function(a){var c=k.get_backside_element(),
b=k.get_frontside_element();c&&b&&$(c).find(".toontalk-element-top-attribute-input").val(a.originalEvent.clientY)})))},q=function(b,f){var a=0<=k.get_style_attributes().indexOf(b),c=l.UTILITIES.create_check_box(a,"toontalk-style-attribute-check-box",b+"&nbsp;","Click to add or remove the '"+b+"' style attribute from the backside of this element."),a=l.UTILITIES.create_anchor_element("i",("transform-origin-x"===b||"transform-origin-y"===b?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin#":
g(b)?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform#":"http://www.w3.org/community/webed/wiki/CSS/Properties/")+b),v=document.createElement("li");$(a).addClass("toontalk-help-button notranslate toontalk-attribute-help-button");$(a).css({color:"white"});a.translate=!1;a.lang="en";c.container.appendChild(a);c.button.addEventListener("click",function(a){if(c.button.checked)h(b);else{a=k.get_style_attributes();var f=a.indexOf(b);0<=f&&(a.splice(f,1),e(n,k,p))}d(p,k,k.get_backside())});v.appendChild(c.container);
f.appendChild(v)},t=function(b,f){var a,c;"string"===typeof b?q(b,f):b.label?(a=document.createElement("h3"),a.textContent=b.label,c=document.createElement("ul"),f.appendChild(a),f.appendChild(c),t(b.sub_menus,c)):b.forEach(function(a){t(a,f)})};$(n).is(".ui-accordion")&&$(n).accordion("destroy");$(n).empty();t([{label:"Geometry attributes",sub_menus:"left top width height z-index background-position".split(" ")},{label:"Color attributes",sub_menus:["background-color","color","opacity"]},{label:"Font attributes",
sub_menus:["font-size","font-weight"]},{label:"Visibility",sub_menus:["display","visibility"]},{label:"Transformations",sub_menus:["rotate","skewX","skewY","transform-origin-x","transform-origin-y"]}],n);$(n).accordion({active:0,heightStyle:"content"});return n},d=function(d,e,g){var h=e.get_style_attributes();e.get_frontside_element();$(d).empty();h.forEach(function(h){e.get_attribute(h);var p=document.createElement("tr"),b=document.createElement("td"),f=e.get_attribute_widget(h),a=f.get_frontside_element();
f.set_parent_of_frontside(g,!1,!0);f.set_infinite_stack(!0);d.appendChild(p);p.appendChild(b);b.appendChild(l.UTILITIES.create_text_element(h));b=document.createElement("td");p.appendChild(b);f.set_visible(!0);$(a).addClass("toontalk-element-attribute");b.appendChild(a);f.render()})},p=function(d){var e=$("<button>Add or remove style attributes</button>").button();e.addClass("toontalk-show-attributes-chooser-button");e.click(function(g){$(d).is(":visible")?($(d).hide(),e.button("option","label","Add or remove style attributes"),
e.attr("title","Click to add widgets for reading and writing style attributes of this element.")):($(d).show(),e.button("option","label","Hide style attributes list"),e.attr("title","Click to hide the list of attributes that can be added or removed."))});e.attr("title","Click to add widgets for reading and writing style attributes of this element.");return e.get(0)};return{create:function(g){var k=l.backside.create(g),r=k.get_element();g.get_HTML();var h=document.createElement("table"),q=document.createElement("div"),
t=p(q),b=l.backside.create_advanced_settings_button(k,g),f=l.UTILITIES.get_current_url_boolean_parameter("elementHTML",!1),a=f?"get_HTML":"get_text",c=k.update_display,v,x;g.update_display();v=g[a]().trim();0<v.length&&(x=l.UTILITIES.create_text_area(v,"toontalk-html-input","","Type here to edit the text."),v=function(a){a=x.button.value.trim();g.get_frontside_element();var c=f?"set_HTML":"set_text";g[c](a)&&l.robot.in_training&&l.robot.in_training.edited(g,{setter_name:c,argument_1:a,toString:"change the text to "+
a+" of",button_selector:".toontalk-html-input"})},$(x.container).resizable(),$(x.container).css({width:"100%"}),$(x.button).css({width:"100%"}),x.button.addEventListener("change",v),x.button.addEventListener("mouseout",v),r.appendChild(x.container));k.get_attributes_chooser=function(){return q};e(q,g,h);d(h,g,k);r.appendChild(q);r.appendChild(t);r.appendChild(h);r.appendChild(b);$(q).hide();$(q).addClass("toontalk-attributes-chooser");k.update_display=function(){x&&$(x.button).val(g[a]());d(h,g,k);
$(q).is(":visible")&&e(q,g,h);c()};$(r).find(".toontalk-hide-backside-button").click(function(a){$(q).hide()});k.add_advanced_settings();return k}}}(window.TOONTALK)})();window.TOONTALK.sensor=function(g){var l=Object.create(g.widget),e=function(d,e){"element"===d.get_type_name()&&(d.set_attribute("font-size",.5*$(e.get_frontside_element(!0)).height(),!1,!0),d.set_additional_classes("toontalk-string-value-from-sensor"),e.visible()&&d.rerender())};l.create=function(d,p,n,k,r,h){var q=g.nest.create(n,k,void 0,"sensor"),t=q.get_json,b=q.update_display,f=q.copy,a=function(a){var b=a[p],f=q.visible(),d=$(q.get_frontside_element()).closest(".toontalk-top-level-backside"),
h;if("keyCode"===p){if(16===b)return;b=String.fromCharCode(b);a.shiftKey||(b=b.toLowerCase())}switch(typeof b){case "number":h=g.number.create(Math.round(b),1);break;case "string":h=g.element.create(b,void 0,void 0,"toontalk-string-value-from-sensor");e(h,q);break;case "boolean":h=g.element.create(b.toString(),void 0,void 0,"toontalk-string-value-from-sensor");e(h,q);break;case "undefined":g.UTILITIES.report_internal_error("No "+p+" in sensor "+l);return}f?(a=g.bird.create(),q.add_to_top_level_backside(a),
a.animate_delivery_to(h,q,q,d.width()/2,d.height())):q.add_to_contents(h)}.bind(this);q.copy=function(a){var b;if(a.just_value&&this.has_contents())return f.call(this,a);b=g.sensor.create(d,p,n,void 0,r,a?void 0:h);return q.add_to_copy(b,a)};q.get_json=function(a){var b=t.call(this,a);b.type="sensor";b.event_name=d;b.attribute=p;b.active=r;b.sensor_of=h&&g.UTILITIES.get_json(h,a);return b};q.update_display=function(){var a=$(this.get_frontside_element());b.call(this);r||a.is(".toontalk-top-level-resource")?
(a.addClass("toontalk-sensor-nest"),a.removeClass("toontalk-sensor-inactive-nest")):(a.addClass("toontalk-sensor-inactive-nest"),a.removeClass("toontalk-sensor-nest"));a.removeClass("toontalk-empty-nest")};q.get_type_name=function(){return"sensor"};q.get_help_URL=function(){return"docs/manual/sensors.html"};q.toString=function(){return"a sensor of "+p+" for "+d+" sensors"};q.get_active=function(){return r};q.set_active=function(c,b){if(r!==c||b)c?h?h.get_frontside_element().addEventListener(d,a):
window.addEventListener(d,a):h?h.get_frontside_element().removeEventListener(d,a):window.removeEventListener(d,a),r=c};q.set_active(r,!0);q.create_backside=function(){return g.sensor_backside.create(this)};q.get_event_name=function(){return d};q.set_event_name=function(a){var b=r;d&&r&&this.set_active(!1);d=a;b&&this.set_active(!0)};q.get_attribute=function(){return p};q.set_attribute=function(a){p=a};q.match=function(a){return this};q.set_sensor_of=function(a){h=a};q.get_custom_title_prefix=function(){return"Use this nest to receive notices of events."};
return q};g.creators_from_json.sensor=function(d,l){var n=g.UTILITIES.create_array_from_json(d.contents,l),k=g.sensor.create(d.event_name,d.attribute,d.description,n,!1);d.sensor_of?g.UTILITIES.set_timeout(function(){k.set_sensor_of(g.UTILITIES.create_from_json(d.sensor_of,l));k.set_active(d.active)}):k.set_active(d.active);0<n.length&&setTimeout(function(){n.forEach(function(d){e(d.get_widget(),k)})},500);return k};return l}(window.TOONTALK);
window.TOONTALK.sensor_backside=function(g){return{create:function(l){var e=g.UTILITIES.create_text_input(l.get_event_name(),"toontalk-sensor-event-name-input","Event name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;","Type here the event name.","https://developer.mozilla.org/en-US/docs/Web/Events/"+l.get_event_name()),d=g.UTILITIES.create_text_input(l.get_attribute(),"toontalk-sensor-event-attribute-input","Event attribute","Type here the event attribute name.","https://developer.mozilla.org/en/docs/Web/API/Event"),
p=g.UTILITIES.create_check_box(l.get_active(),"toontalk-sensor-active-check-box","Listening to events","Check the box if you want to make this sensor active."),n=g.nest_backside.create(l),k=n.get_element(),r=$(k).find(".toontalk-settings-backside-button").get(0);e.button.addEventListener("change",function(){l.set_event_name(e.button.value.trim())});d.button.addEventListener("change",function(){l.set_attribute(d.button.value.trim())});$(p.button).click(function(d){var e=p.button.checked;l.set_active(e);
g.robot.in_training&&g.robot.in_training.edited(robot,{setter_name:"set_active",argument_1:e,toString:"change to "+(e?"active":"inactive")+" of the "+l,button_selector:".toontalk-sensor-active-check-box"});l.render();d.stopPropagation()});k.insertBefore(e.container,r);k.insertBefore(d.container,r);k.insertBefore(p.container,r);return n}}}(window.TOONTALK);window.TOONTALK.tool=function(g){return{add_listeners:function(l,e){var d,p,n,k,r,h=function(b){var f=t(b),a,c={};b.preventDefault();var d=0,e=0;20>b.clientX?d=-20:b.clientX+20>window.innerWidth&&(d=20);20>b.clientY?e=-20:b.clientY+20>window.innerHeight&&(e=20);window.scrollBy(d,e);c.clientX=b.pageX-d-p;c.clientY=b.pageY-e-n;l.style.left=c.clientX+"px";l.style.top=c.clientY+"px";if(f&&f.is_of_type("top-level"))r&&(g.UTILITIES.remove_highlight(),r=void 0);else{if(f&&(a=f.get_frontside_element(),a===
r))return;r=a;g.UTILITIES.highlight_element(r,c)}},q=function(b){var f=t(b),a;b.preventDefault();r&&g.UTILITIES.remove_highlight();f&&f.add_copy_to_container&&(a=f.top_level_widget(),e.apply_tool(f,b),a.backup_all());!f&&e.nothing_under_tool&&e.nothing_under_tool();$(l).removeClass("toontalk-tool-held");$(l).addClass("toontalk-tool-returning");g.UTILITIES.add_one_shot_event_handler(l,"transitionend",1E3,function(){$(l).removeClass("toontalk-tool-returning")});g.UTILITIES.set_timeout(function(){l.style.left=
d.left+"px";l.style.top=d.top+"px"});document.removeEventListener("mousemove",h);document.removeEventListener("mouseup",q)},t=function(b){var f;$(l).hide();b=document.elementFromPoint(b.pageX-(window.pageXOffset+p),b.pageY-(window.pageYOffset+n)+k/2);for($(l).show();b&&!b.toontalk_widget&&(!$(b).is(".toontalk-backside")||$(b).is(".toontalk-top-level-backside"));)b=b.parentNode;b&&(f=b.toontalk_widget);if(f)return b=f.get_type_name(),f&&"empty hole"===b?f.get_parent_of_frontside():f};l.addEventListener("mousedown",
function(b){var f=l.getBoundingClientRect();p=b.clientX-f.left;n=b.clientY-f.top;k=f.height;b.preventDefault();$(l).addClass("toontalk-tool-held");d=$(l).offset();document.addEventListener("mousemove",h);document.addEventListener("mouseup",q)})}}}(window.TOONTALK);window.TOONTALK.vacuum=function(g){var l=Object.create(null),e={suck:"Drag this vacuum over the thing you want to remove. Click or type 'e' to switch to erasing. Type 'r' to restore previously removed or erased things.",erase:"Drag this vacuum over the thing you want to erase (or un-erase). Type 's' to switch to sucking. Click or type 'r' to restore contents.",restore:"Drag this over the work area. Each time you release it a widget is restored. Click or type 's' to switch to sucking. Type 'e' to switch to erasing."},
d={suck:"toontalk-vacuum-s",erase:"toontalk-vacuum-e",restore:"toontalk-vacuum-r"},p={suck:"erase",erase:"restore",restore:"suck"};l.create=function(){var l,k,r,h=[],q=function(b){k!==b&&(k=b,$(l).removeClass(r),r=d[k],$(l).addClass(r),t())},t=function(){l.title="restore"===k&&0===h.length?"The vacuum is empty. Type 'r' to switch to removing. Type 'e' to switch to erasing.":e[k]};return{apply_tool:function(b,f){var a,c;"suck"===k?b.remove&&"top-level"!==b.get_type_name()&&(g.robot.in_training&&f&&
g.robot.in_training.removed(b),b.remove(f),h.push(b)):"erase"===k?"top-level"!==b.get_type_name()&&(b.get_frontside_element(),a=!b.get_erased(),b.set_erased(a,!0),g.robot.in_training&&f&&g.robot.in_training.set_erased(b,a)):"restore"===k&&0<h.length&&(a=h.pop(),c=b.add_to_top_level_backside(a,!0),a=$(l).offset(),a.left-=$(c).width(),g.UTILITIES.set_absolute_position($(c),a))},nothing_under_tool:function(){q(p[k])},get_element:function(){l||(l=document.createElement("div"),$(l).addClass("toontalk-vacuum"),
g.tool.add_listeners(l,this),q("suck"),document.addEventListener("keyup",function(b){b=String.fromCharCode(b.keyCode);"s"===b||"S"===b?q("suck"):"e"===b||"E"===b?q("erase"):"r"!==b&&"R"!==b||q("restore")}),t());return l}}};g.creators_from_json.vacuum=function(d,e){var l=g.vacuum.create();d.mode&&g.UTILITIES.set_timeout(function(){l.set_mode(d.mode)});return l};return l}(window.TOONTALK);window.TOONTALK.wand=function(g){var l=Object.create(null);l.create=function(){var e;return{apply_tool:function(d){"top-level"!==d.get_type_name()&&d.add_copy_to_container()},get_element:function(){e||(e=document.createElement("div"),$(e).addClass("toontalk-wand"),e.title="Drag this magic wand over the thing you want to copy.",g.tool.add_listeners(e,this));return e}}};g.creators_from_json.wand=function(){return g.wand.create()};return l}(window.TOONTALK);window.TOONTALK.SETTINGS=function(g){var l=function(l,n,k){var r=[],h=[],q=n?1:0,t=g.UTILITIES.create_local_files_table(l);r[q]="Programs stored in browser";d(l,t,!1,k);h[q]=t;n?(e("program",l,k,function(b){r[0]="Programs in cloud";h[0]=b||g.UTILITIES.create_text_element("Error connecting");h[2]&&k.appendChild(g.UTILITIES.create_tabs(r,h))}),e("page",l,k,function(b){r[2]="Published pages";h[2]=b||g.UTILITIES.create_text_element("Error connecting");h[0]&&k.appendChild(g.UTILITIES.create_tabs(r,h))})):
k.appendChild(g.UTILITIES.create_tabs(r,h))},e=function(e,l,k,r){g.google_drive.get_toontalk_files(!1,e,function(h){var q;"string"===typeof h?q=h:h.error&&(q=h.error.message);q?"Need to authorize"===q||"Login Required"===q?g.google_drive.authorize(r):(console.log(q),console.log("Google drive status: "+g.google_drive.get_status()),r(null)):(q="program"===e&&"toontalk-file-load-button",h=g.UTILITIES.create_file_data_table(h.items,!0,q),d(l,h,!0,k),r(h))})},d=function(d,e,g,l){$(e).find(".toontalk-file-load-button").click(function(e){var n=
function(){$(l).remove()},t=function(){d.set_setting("program_name",e.target.innerText);d.load(g,n)}.bind(this);d.save(!0,void 0,t)})};return{open:function(d){var e=document.createElement("div"),k=d.get_backside_element(),r=d.get_setting("program_name"),h=g.UTILITIES.create_text_input(r,"toontalk-program-name-input","Current program name:","Edit this to change the name of your program","docs/manual/settings.html"),q=g.UTILITIES.create_close_button(function(){$(e).remove()},"Click to close the settings panel."),
t=g.UTILITIES.create_text_element("How should your program be saved?"),b=g.UTILITIES.create_check_box(d.get_setting("auto_save_to_google_drive"),"toontalk-save-setting","Save automatically to my Google Drive",'Check this if you want your programs automatically saved to a "ToonTalk Programs" folder in your Google Drive.'),f=g.UTILITIES.create_check_box(d.get_setting("auto_save_to_local_storage"),"toontalk-save-setting","Save automatically to this browser's local storage","Check this if you want your programs automatically saved in this browser's local storage."),
a=g.UTILITIES.create_button("Save to Google Drive now","toontalk-save-button","Click to save your program now to your Google Drive account.",function(){d.save(!0,{google_drive:!0})}),c=g.UTILITIES.create_button("Save to browser's storage now","toontalk-save-button","Click to save your program now to this browser's local storage.",function(){d.save(!0,{local_storage:!0})}),v=g.UTILITIES.create_button("Login to Google","toontalk-google-login-button","Click to log in to Google to authorize use of your Google Drive.",
function(){g.google_drive.authorize(function(){$(v).remove()})}),x=g.UTILITIES.create_button("Publish","toontalk-publish-button","Click to publish your program by generating a Google Drive URL.",function(){d.publish(D,y.button.checked)}),y=g.UTILITIES.create_check_box(d.get_setting("publish_as_workspace"),"toontalk-publish-setting","As a workspace","Check this if you want to publish the workspace and its widgets. Uncheck it you wish to publish just the widgets."),D=function(a,c){var b=document.createElement("span"),
f=g.google_drive.google_drive_url(a.id);g.TRANSLATION_ENABLED&&(f=g.UTILITIES.add_URL_parameter(f,"translate","1"));b.innerHTML="Published: <a href='"+f+"' target='_blank'>"+d.get_setting("program_name")+"</a>";$(h.container).children("tr").append(g.UTILITIES.create_table_entry(b))},G=document.createElement("div"),I=g.google_drive&&"undefined"!==typeof gapi?g.google_drive.get_status():"Google Drive API not loaded",F=!0,M=g.UTILITIES.create_vertical_table(x,y.container);$(e).addClass("toontalk-settings-panel").css({width:$(k).width()+
29,height:$(k).height()+50,left:-2,top:-25,"z-index":g.UTILITIES.next_z_index()});e.appendChild(q);h.button.addEventListener("change",function(){var a=h.button.value.trim();r!==a&&d.save(!0,void 0,function(){r=a;d.set_setting("program_name",a);d.load(!0,function(){setTimeout(function(){$(e).css({"z-index":g.UTILITIES.next_z_index()})},500)})})});b.button.addEventListener("click",function(c){d.save(!0,{auto_save_to_google_drive:f.button.checked,gooogle_drive:!0});d.set_setting("auto_save_to_google_drive",
b.button.checked);b.button.checked?$(a).hide():$(a).show()});f.button.addEventListener("click",function(a){d.save(!0,{auto_save_to_local_storage:f.button.checked,local_storage:!0});d.set_setting("auto_save_to_local_storage",f.button.checked);f.button.checked?$(c).hide():$(c).show()});y.button.addEventListener("click",function(a){d.set_setting("publish_as_workspace",y.button.checked)});e.appendChild(G);$(t).css({"font-weight":"bold","font-size":24,color:"navy"});G.appendChild(t);G.appendChild(h.container);
G.appendChild(b.container);G.appendChild(f.container);b.container.appendChild(g.UTILITIES.create_space());b.container.appendChild(a);d.get_setting("auto_save_to_google_drive")&&$(a).hide();f.container.appendChild(g.UTILITIES.create_space());f.container.appendChild(c);d.get_setting("auto_save_to_local_storage")&&$(c).hide();"Need to authorize"===I?(b.container.appendChild(g.UTILITIES.create_space()),b.container.appendChild(v)):"Authorized"!==I&&"Ready"!==I&&"Authorized but not yet ready"!==I&&(F=!1,
setTimeout(function(){b.button.disabled=!0;$(x).button("option","disabled",!0);$(a).button("option","disabled",!0);b.container.title="Inactived because attempt to connect to Google Drive returned: "+I;x.title=b.container.title;a.title=b.container.title},1));$(h.container).children("tr").append(g.UTILITIES.create_table_entry(M));l(d,F,e);k.appendChild(e)}}}(window.TOONTALK);window.TOONTALK.DEFAULT_SETTINGS={program_name:"My first program",auto_save_to_google_drive:!0,auto_save_to_local_storage:!0};window.TOONTALK.DISPLAY_UPDATES=function(g){var l=[],e=0;return{pending_update:function(d){d.update_display&&(0<=l.indexOf(d)||l.push(d))},update_display:function(){var d=l,e=function(d,g){$(d).children().each(function(d,h){$(h).css({"z-index":g+1});e(h,g+1)})};l=[];0!==d.length&&d.forEach(function(d){var k=d.get_frontside_element&&d.get_frontside_element(),l,h,q;d.update_display();l=$(k).parent().closest(".toontalk-side");l.is("*")&&(h=g.UTILITIES.get_style_numeric_property(k,"z-index"),q=g.UTILITIES.get_style_numeric_property(l.get(0),
"z-index"),q||(q=g.UTILITIES.next_z_index(),l.css({"z-index":q})),!h||l.is(".toontalk-top-level-backside")?(h=g.UTILITIES.next_z_index(),$(k).css({"z-index":h})):h>=q&&(h=q+1,$(k).css({"z-index":h})),e(k,h));k&&!$(k).is(".toontalk-top-level-resource, .toontalk-bird, .toontalk-nest, .toontalk-box-hole, .toontalk-plain-text-element, .toontalk-conditions-contents, .toontalk-robot, .toontalk-widget, .toontalk-held-by-robot")&&g.UTILITIES.set_timeout(function(){l.is(".toontalk-box-hole")?$(k).is(".ui-resizable")&&
$(k).resizable("destroy"):$(k).is(".ui-resizable")||g.UTILITIES.make_resizable($(k),d)})})},run_cycle_is_over:function(){var d=Date.now();20<=d-e&&(this.update_display(),e=d)}}}(window.TOONTALK);window.TOONTALK.actions=function(g){g.creators_from_json.body=function(l,e){var d=g.actions.create();e.body=d;d.initialise_steps(g.UTILITIES.create_array_from_json(l.steps,e));return d};return{create:function(l){var e=Object.create(this),d=[];l||(l=[]);e.copy=function(){return g.actions.create(g.UTILITIES.copy_array(l))};e.get_steps=function(){return l};e.initialise_steps=function(d){l=d};e.is_empty=function(){return 0===l.length};e.reset_steps=function(){l=[];this.reset_newly_created_widgets()};
e.reset_newly_created_widgets=function(){d=[]};e.add_step=function(d,e){l.push(d);e&&this.add_newly_created_widget(e)};e.add_newly_created_widget_if_new=function(e){0<=d.indexOf(e)||this.add_newly_created_widget(e)};e.add_newly_created_widget=function(e){g.debugging&&0<=d.indexOf(e)?console.log("add_newly_created_widget called with not new widget."):d.push(e)};e.get_newly_created_widgets=function(){return d};e.get_path_to=function(e,l){var k,r;d.some(function(d,q){if(d===e)return k=g.newly_created_widgets_path.create(q),
!0;if(d.get_path_to&&(r=d.get_path_to(e,l)))return k=g.newly_created_widgets_path.create(q),k.next=r,!0});return k};e.dereference=function(e){g.debugging&&!d[e]&&g.UTILITIES.report_internal_error("Expected to find the "+(e+1)+"th newly created widget.");return d[e]};return e},run_unwatched:function(g,e,d,p,n){var k=this.get_steps();n||(n=0);p.run_next_step=function(){if(n<k.length){var r=k[n];n++;r.run_unwatched(g,e,p)}else p.get_run_once()||p.get_first_in_team().run(g,e,d)};p.run_next_step()},run_watched:function(l,
e,d,p){var n=this.get_steps(),k=p.get_frontside_element(),r=k.parentElement,h=function(){$(k).addClass("toontalk-side-animating");g.UTILITIES.set_position_relative_to_top_level_backside($(k),t);setTimeout(function(){r.appendChild(k);g.UTILITIES.set_absolute_position($(k),t);p.set_animating(!1);p.get_run_once()||p.get_first_in_team().run(l,e,d);p.render()},1E3)},q=0,t=$(k).offset(),b=$(k).position(),f=$(k).width(),a=$(k).height(),c=$(k).closest(".toontalk-backside"),v=c.get(0).getBoundingClientRect(),
x=$(k).closest(".toontalk-top-level-backside").offset(),y=l.get_backside();0===f&&($(k).css({width:"",height:""}),f=$(k).width(),a=$(k).height());x||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),x={left:0,top:0});if(t.left<v.left-x.left||t.top<v.top-x.top||t.left+f>v.right+x.left||t.top+a>v.bottom+x.top)t=c.offset(),t.left+=c.width()/2,t.top+=c.height()-a;p.start_position=b;p.run_next_step=function(){y&&y.visible()?setTimeout(function(){if(q<n.length){var a=
n[q];q++;a.run_watched(l,e,p);p.get_thing_in_hand()&&(p.get_thing_in_hand().save_dimensions(),p.render())}else h()},500):(p.set_animating(!1),$(k).css({width:"",height:""}),k.style.left=b.left+"px",k.style.top=b.top+"px",r.appendChild(k),this.run_unwatched(l,e,d,p,q))}.bind(this);p.set_animating(!0,t);p.run_next_step();return!0},toString:function(){var g="",e=this.get_steps();e.forEach(function(d,p){g+=d.toString();g=p===e.length-2?g+" and \n":p<e.length-2?g+", \n":g+"."});return g},get_json:function(l){return{type:"body",
steps:g.UTILITIES.get_json_of_array(this.get_steps(),l)}}}}(window.TOONTALK);
window.TOONTALK.newly_created_widgets_path=function(g){g.creators_from_json.newly_created_widgets_path=function(l){return g.newly_created_widgets_path.create(l.index)};return{create:function(l){return{dereference:function(e,d,p){e=p.get_body().dereference(l);return this.next?g.path.dereference_path(this.next,e,d,p):e},toString:function(){var e;switch(l){case 0:e="first";break;case 1:e="second";break;case 2:e="third";break;default:e=l+1+"th"}return"the "+e+" widget he created"},get_json:function(){return{type:"newly_created_widgets_path",
index:l}}}}}}(window.TOONTALK);window.TOONTALK.robot_action=function(g){var l={copy:function(d,e,g,b){b.add_newly_created_widget(d.copy({}));return!0},"pick up":function(d,e,g,b){b.set_thing_in_hand(d);return!0},"pick up a copy of":function(d,e,g,b){d=d.copy({});b.add_newly_created_widget(d);b.set_thing_in_hand(d);return!0},"drop it on":function(d,e,k,b,f){if(d)if(e=b.get_thing_in_hand()){if(e.drop_on)return e.drop_on(d,!1,void 0,b),b.set_thing_in_hand(void 0),d.visible&&d.visible()&&d.render(),e.robot_waiting_before_next_step===
b?(f&&f.running_watched||(e.robot_waiting_before_next_step=void 0),!1):!0;g.UTILITIES.report_internal_error("Thing in robot's hand ("+e+") doesn't handle 'drop_on'. Robot that "+b)}else g.UTILITIES.report_internal_error("The robot that '"+b.toString()+"' is executing drop_on but has nothing in its hand.");else g.UTILITIES.report_internal_error("The robot that '"+b.toString()+"' is executing drop_on but doesn't know where to drop what its holding")},remove:function(d,e,g,b){d.remove();return!0},erased_widget:function(d,
e,g,b,f){d.set_erased(f.erased);return!0},edit:function(d,e,k,b,f){if(d[f.setter_name])return f.argument_2?d[f.setter_name].call(d,f.argument_1,f.argument_2,d.visible()):d[f.setter_name].call(d,f.argument_1,d.visible()),!0;g.UTILITIES.report_internal_error(d+" cannot be edited.")},"add to the top-level backside":function(d,e,g,b,f){b.visible()||(b=d.get_frontside_element(!0),g=$(e.get_frontside_element()).position(),e=$(e.get_frontside_element()).closest(".toontalk-top-level-backside").get(0),$(b).css({left:g.left,
top:g.top}),e.appendChild(b),e.toontalk_widget.add_backside_widget(d),d.animate_to_element(e));return!0}},e=function(d,e,g,b,f){e=b.get_thing_in_hand();b.get_frontside_element();var a=d.get_element();g=$(a).width()/2;a=$(a).height()/2;b.animate_to_widget(d,f,.25,g,a);e&&b.render()},d=function(d,e){var g=d.get_backside_element(!0);return $(g).find(e).get(0)},p=function(e,g,k,b,f,a){var c=d(e,a),l=b.get_frontside_element(),n=c&&$(c).is(":visible"),p=function(){f();$(c).addClass("ui-state-active");setTimeout(function(){$(c).removeClass("ui-state-active");
!n&&e.get_backside()&&e.get_backside().hide_backside();b.run_next_step()},500)};g=function(){b.animate_to_element(c,p,.25,0,-$(l).height())};!n&&e.open_backside?e.open_backside(g):g()},n=function(d,e,g,b,f,a){b.get_frontside_element();b.carrying_tool=a;b.update_display();b.animate_to_element(d.get_frontside_element(),function(){f();b.carrying_tool=void 0;b.update_display();b.run_next_step()},.25,0,0)},k=function(d,e,g,b,f){var a=d.get_parent_of_frontside();n(d,e,g,b,function(){f();a&&"top-level"!==
a.get_widget().get_type_name()&&a.update_display&&a.update_display();d.render()},"toontalk-vacuum-ready-small")},r={copy:function(d,e,g,b,f){n(d,e,g,b,function(){f();d.add_copy_to_container(b.get_recently_created_widget())},"toontalk-wand-small")},"pick up":function(d,k,l,b,f){var a=d.get_frontside_element(),c=function(){f();b.run_next_step()};"empty hole"===d.get_type_name()?g.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):(d.save_dimensions(),$(a).css({width:a.offsetWidth+
"px",height:a.offsetHeight+"px"}),e(d,k,l,b,c))},"pick up a copy of":function(d,g,k,b,f){e(d,g,k,b,function(){f();b.get_recently_created_widget().set_visible(!0);b.update_display();b.run_next_step()})},"drop it on":function(d,k,l,b,f){var a=b.get_thing_in_hand(),c;a?(c=$(a.get_frontside_element()),e(d,k,l,b,function(){var d=c.offset();c.removeClass("toontalk-held-by-robot");f();a.drop_on&&($(b.get_frontside_element()).closest(".toontalk-top-level-backside").append(c.get(0)),g.UTILITIES.set_absolute_position(c,
d),a.restore_dimensions(),a.robot_waiting_before_next_step===b?a.robot_waiting_before_next_step=void 0:(b.set_thing_in_hand(void 0),b.run_next_step()),b.rerender())})):(g.UTILITIES.report_internal_error("Expected the robot to be holding something."),console.log("The robot is "+b),e(d,k,l,b,f))},remove:k,erased_widget:k,edit:function(d,e,g,b,f,a){p(d,e,g,b,function(){d.get_backside()&&d.get_backside().update_display();f()},a.button_selector)},"add to the top-level backside":function(d,e,g,b,f){f();
b.run_next_step()}};g.creators_from_json.robot_action=function(d,e){return d.additional_info?g.robot_action.create(g.path.create_from_json(d.path,e),d.action_name,d.additional_info):g.robot_action.create(g.path.create_from_json(d.path,e),d.action_name)};return{create:function(d,e,k){var b=Object.create(this),f=l[e],a=r[e];a||(a=function(a,b,f,d,e){setTimeout(function(){continuation(a)},3E3)});d||g.UTILITIES.report_internal_error("path undefined in "+e+" action");f||g.UTILITIES.report_internal_error("no run_function for "+
e);b.run_unwatched=function(a,b,e){var l=g.path.dereference_path(d,a,b,e);if(!l)return g.UTILITIES.report_internal_error("Unable to dereference path: "+g.path.toString(d)+" in context: "+a.toString()),!1;f(l,a,b,e,k)&&e.run_next_step()};b.run_watched=function(c,b,e){var l=g.path.dereference_path(d,c,b,e),n=function(){k||(k={});k.running_watched=!0;f(l,c,b,e,k)};l?(l.set_visible(!0),a(l,c,b,e,n,k)):g.UTILITIES.report_internal_error("Unable to dereference the path: "+g.path.toString(d)+" in context: "+
c.toString())};b.toString=function(){return e+" "+g.path.toString(d)};b.get_json=function(a){return{type:"robot_action",action_name:e,path:g.path.get_json(d,a),additional_info:k}};return b}}}(window.TOONTALK);window.TOONTALK.queue=function(g){return{create:function(){var l=Object.create(this);l.to_run=g.UTILITIES.create_queue();return l},enqueue:function(l){if(g.debugging&&this.to_run.does_any_item_satisfy(function(e){return e.robot===l.robot}))console.log("The same robot is being queued twice."),console.log("Robot is "+l.robot);else return this.to_run.enqueue(l)},maximum_run:50,paused:!1,run:function(){for(var l,e=Date.now()+this.maximum_run;!(this.to_run.isEmpty()||this.paused||Date.now()>=e);)l=this.to_run.dequeue(),
l.robot.run_actions(l.context,l.top_level_context,l.queue);g.DISPLAY_UPDATES.run_cycle_is_over();g.UTILITIES.set_timeout(function(){this.run()}.bind(this),this.to_run.isEmpty()?this.maximum_run:0)}}}(window.TOONTALK);window.TOONTALK.path=function(g){g.creators_from_json["path.to_entire_context"]=function(){return g.path.to_entire_context()};g.creators_from_json["path.top_level_backside"]=function(){return g.path.top_level_backside};g.creators_from_json["path.to_backside_widget_of_context"]=function(l){return g.path.get_path_to_backside_widget_of_context(l.type_name)};g.creators_from_json["path.to_resource"]=function(l,e){return g.path.get_path_to_resource(g.UTILITIES.create_from_json(l.resource,e))};return{get_path_to:function(l,
e){var d=function(d,e){var k=e.get_context(),l=e.get_body(),h,q;if(k===d)return g.path.to_entire_context();q=d.get_type_name();if("top-level"===q)return g.path.top_level_backside;if(h=l.get_path_to(d,e))return h;if("element attribute"===q&&d.get_original_attribute_widget()===d)return g.element.create_attribute_path(d,e);if(k.get_path_to&&(l=k.get_path_to(d,e)))return h=g.path.to_entire_context(),h.next=l,h;k.backside_widgets.some(function(k){k=k.get_widget();var b;if(k===d||k.top_contents_is&&k.top_contents_is(d))return h=
g.path.get_path_to_backside_widget_of_context(k.get_type_name()),e.add_to_backside_conditions(k),!0;if(k.get_path_to&&(b=k.get_path_to(d,e)))return h=g.path.get_path_to_backside_widget_of_context(k.get_type_name()),h.next=b,e.add_to_backside_conditions(k),!0});return h?h:g.path.get_path_to_resource(d.copy({}))}(l,e);d&&l.dereference_contents&&(g.path.path_end(d).not_to_be_dereferenced=!0);!d||"pick up"!==e.current_action_name&&"remove"!==e.current_action_name||(g.path.path_end(d).removing_widget=
!0);return d},path_end:function(g){for(;g.next;)g=g.next;return g},dereference_path:function(g,e,d,p){return g?g.dereference?g.dereference(e,d,p):e.dereference(g,d,p):e},continue_dereferencing_path:function(g,e,d,p){return g.next?e.dereference_contents&&!g.next.not_to_be_dereferenced?e.dereference_contents(g.next,d,p):e.dereference(g.next,d,p):e.dereference_contents&&!g.not_to_be_dereferenced?e.dereference_contents(g,d,p):e},toString:function(l){return l.next?(g.path.toString(l.next),g.path.toString(l.next)+
"of "+l.toString()):l.toString()},get_json:function(l,e){var d;if(!l.get_json)return l;d=l.get_json(e);l.next&&(d.next_path=g.path.get_json(l.next,e));l.removing_widget&&(d.removing_widget=!0);l.not_to_be_dereferenced&&(d.not_to_be_dereferenced=!0);return d},to_entire_context:function(){return{dereference:function(l,e,d){return g.path.continue_dereferencing_path(this,l,e,d)},toString:function(){return"what he's working on"},get_json:function(){return{type:"path.to_entire_context"}}}},get_path_to_resource:function(l,
e){l=l.get_widget();return{dereference:function(d,e,n){d=l.copy({});var k,r,h;n.add_newly_created_widget(d);n.visible()&&!l.visible()&&(k=g.UTILITIES.find_resource_equal_to_widget(l))&&(h=d.get_frontside_element(),r=$(k).position(),g.UTILITIES.set_timeout(function(){$(h).css({left:r.left,top:r.top,width:k.offsetWidth,height:k.offsetHeight})}));return d},toString:function(){return g.UTILITIES.add_a_or_an(l.toString())},get_json:function(){return{type:"path.to_resource",resource:g.path.get_json(l,g.UTILITIES.fresh_json_history())}}}},
get_path_to_backside_widget_of_context:function(l){return{dereference:function(e,d,p){var n;e.backside_widgets.some(function(d){if(d.get_widget().is_of_type(l))return n=d.get_widget(),!0});if(n)return g.path.continue_dereferencing_path(this,n,d,p)},toString:function(){return"the "+l+" on the back of what he's working on"},get_json:function(){return{type:"path.to_backside_widget_of_context",type_name:l}}}},create_from_json:function(l,e){var d=g.UTILITIES.create_from_json(l,e),p;l.next_path&&(p=g.UTILITIES.create_from_json(l.next_path,
e),l.next_path.removing_widget&&(p.removing_widget=!0),l.next_path.not_to_be_dereferenced&&(p.not_to_be_dereferenced=!0),d.next=p);l.removing_widget&&(d.removing_widget=!0);l.not_to_be_dereferenced&&(d.not_to_be_dereferenced=!0);return d},top_level_backside:{dereference:function(g,e,d){return g.ancestor_of_type("top-level")},toString:function(){return"the top-level backside"},get_json:function(){return{type:"path.top_level_backside"}}}}}(window.TOONTALK);window.TOONTALK.publish=function(g){var l=function(e,d,g){var l='<!DOCTYPE html>\n<html>\n<head>\n<link rel="stylesheet" media="all" href="https://toontalk.github.io/ToonTalk/toontalk.css">\n<link href="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/css/font-awesome.min.css" rel="stylesheet" type="text/css" />\n<link href="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/css/froala_editor.min.css" rel="stylesheet" type="text/css" />\n<script src="https://toontalk.github.io/ToonTalk/compile/toontalk.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/jquery-ui-1.11.2.custom/jquery-ui.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/froala_editor.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/block_styles.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/colors.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/font_family.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/font_size.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/lists.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/tables.min.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/video.min.js">\x3c/script>\n<title>\n'+
e+'</title>\n<link rel="shortcut icon" href="favicon.ico" />\n</head>\n<body>\n';d.forEach(function(d,e){l+='<div class="toontalk-edit" name="content">\n'+d+"\n</div>\n";g[e]&&(l+=g[e])});return l+='<script src="https://toontalk.github.io/ToonTalk/support/published_support.js">\x3c/script>\n</body>\n</html>\n'};return{publish_widget:function(e,d,p,n){var k=g.google_drive.get_status(),r=["Edit this. Select text for formatting.","And edit this."],h=function(f){(f=f&&f.items&&0<f.items.length&&f.items[0])?
n(f,b):(contents=l(e,r,b),g.google_drive.upload_file(q,"html",contents,n))},q,t,b;"Ready"===k?(q=d.get_setting("program_name"),p?(t=g.UTILITIES.get_json_top_level(d),d.set_setting("program_name",q+" (published version)"),b=[g.UTILITIES.toontalk_json_div(t,d)],d.set_setting("program_name",q)):(d=d.get_backside_widgets(),b=[],d.forEach(function(f,a){f.visible()&&(t=g.UTILITIES.get_json_top_level(f),b.push(g.UTILITIES.toontalk_json_div(t,f)),1<a&&(r[a]=r[1]))}),r.push(r[1])),g.google_drive.get_toontalk_files(g.google_drive.full_file_name(q,
"page"),"page",h)):(console.log("Unable to publish to Google Drive because: "+k),n(null))},republish:function(e){g.google_drive.insert_or_update_file(void 0,e.file_id,"page",l(e.title,e.editable_contents,e.widgets_json),function(){console.log("Published page '"+e.title+"' updated.")})}}}(window.TOONTALK);function handle_client_load(){window.TOONTALK.google_drive.handle_client_load()}
window.TOONTALK.google_drive=function(g){var l=g.GOOGLE_DRIVE_CLIENT_ID||"148386604750-704q35l4gcffpj2nn3p4ivcopl81nm27.apps.googleusercontent.com",e=g.ORIGIN_FOR_GOOGLE_DRIVE||"toontalk.github.io",d="Need to authorize",p,n;return{handle_client_load:function(k){0>window.location.href.indexOf(e)?(d="Connections to Google Drive are configured for the following domain only: "+e+".\nIf you are hosting ToonTalk elsewhere you need to set TOONTALK.GOOGLE_DRIVE_CLIENT_ID and TOONTALK.ORIGIN_FOR_GOOGLE_DRIVE",k&&
k(d)):setTimeout(function(){g.google_drive.check_authorization(k)})},check_authorization:function(e){d="Awaiting authorization";gapi.auth.authorize({client_id:l,scope:"https://www.googleapis.com/auth/drive",immediate:!0},function(d){g.google_drive.handle_authorization_result(d,e)})},handle_authorization_result:function(e,l){e&&!e.error?(d="Authorized but not yet ready",gapi.client.load("drive","v2",function(){g.google_drive.get_folder_ids(function(){d="Ready"})}),l&&l()):(d="Need to authorize",l&&
l(d))},authorize:function(d){gapi.auth.authorize({client_id:l,scope:"https://www.googleapis.com/auth/drive",immediate:!1},function(e){g.google_drive.handle_authorization_result(e,d)})},get_folder_ids:function(d){g.google_drive.get_folder_id(!0,function(e){p=e;g.google_drive.get_folder_id(!1,function(e){n=e;d()})})},get_folder_id:function(d,e){var h=d?"ToonTalk Programs":"ToonTalk Pages",l=function(l){var b=function(b){b&&b.id?e(b.id):console.error("Failure to create folder '"+h+"'. Response was "+
b)};(l=l&&l.items&&0<l.items.length&&l.items[0].id)?e(l):d?g.google_drive.create_folder("ToonTalk Programs",!1,b):g.google_drive.create_folder("ToonTalk Pages",!0,b)};d&&p?e(p):!d&&n?e(n):g.google_drive.fetch_folder_id(h,l)},get_status:function(){return d},connection_to_google_drive_possible:function(){return 0!==d.indexOf("Connections to Google Drive are configured for the following domain only: ")},list_files:function(d,e){gapi.client.request({path:"/drive/v2/files",method:"GET",params:d}).execute(e)},
fetch_folder_id:function(d,e){g.google_drive.list_files({q:"mimeType = 'application/vnd.google-apps.folder' and title ='"+d+"' and trashed = false"},e)},get_toontalk_files:function(d,e,h){"undefined"===typeof gapi?h("Google Drive API not available."):(e="properties has {key='ToonTalkType' and value='"+e+"' and visibility='PUBLIC'} and trashed = false",d&&(e+=" and title='"+d+"'"),g.google_drive.list_files({q:e},h))},get_toontalk_program_file:function(d,e){g.google_drive.list_files({q:"'"+p+"' in parents and trashed = false and title='"+
d+"'"},function(d){d&&d.items&&0<d.items.length?e(d.items[0]):e(null)})},upload_file:function(d,e,h,l){var n="json"===e?"program":"page",b=d+"."+e;g.google_drive.get_toontalk_files(b,n,function(f){gapi.client.load("drive","v2",function(){var a=f&&f.items&&0<f.items.length&&f.items[0].id;l||(l=function(c){c.error&&(console.log("Google drive status: "+g.google_drive.get_status()),"Login Required"!==c.error.message&&console.log(c.error.message));console.log("File "+c.title+" ("+c.id+") "+(a?"updated":
"created"))});a?g.google_drive.insert_or_update_file(void 0,a,n,h,l):g.google_drive.insert_or_update_file(b,void 0,n,h,l)})})},full_file_name:function(d,e){return d+"."+("program"===e?"json":"html")},insert_or_update_file:function(d,e,h,l,t){var b={title:d,mimeType:"text/html"};b.parents=[{kind:"drive#fileLink",id:"program"===h?p:n}];l="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify(b)+"\r\n---------314159265358979323846\r\nContent-Type: text/html\r\n\r\n"+
l+"\r\n---------314159265358979323846--";d?(d="/upload/drive/v2/files",b="POST"):(d="/upload/drive/v2/files/"+e,b="PUT");gapi.client.request({path:d,method:b,params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="-------314159265358979323846"'},body:l}).execute(function(b){e||g.google_drive.insert_property(b.id,"ToonTalkType",h,"PUBLIC");t&&t(b)})},create_folder:function(d,e,g){gapi.client.drive.files.insert({resource:{title:d,mimeType:"application/vnd.google-apps.folder"}}).execute(e?
function(d){gapi.client.drive.permissions.insert({fileId:d.id,resource:{value:"",type:"anyone",role:"reader"}}).execute(function(e){g(d)})}:g)},download_file:function(d,e){if(d.downloadUrl){var g=gapi.auth.getToken().access_token,l=new XMLHttpRequest;l.open("GET",d.downloadUrl);l.setRequestHeader("Authorization","Bearer "+g);l.onload=function(){e(l.responseText)};l.onerror=function(){e(null)};l.send()}else e(null)},google_drive_url:function(d){return"https://googledrive.com/host/"+d+"/"},insert_property:function(d,
e,g,l){gapi.client.drive.properties.insert({fileId:d,resource:{key:e,value:g,visibility:l}}).execute(function(d){})}}}(window.TOONTALK);function googleTranslateElementInit(){new google.translate.TranslateElement({pageLanguage:"en",layout:google.translate.TranslateElement.InlineLayout.SIMPLE},"google_translate_element")}
window.TOONTALK.UTILITIES=function(g){var l,e=100,d=(new Date).getTime(),p,n=function(b){var a=b.indexOf("{"),c=b.lastIndexOf("}");if(!(0>a||0>c))return b.substring(a,c+1)},k=function(b,a,c,d,e,h,k,l,n,p){var q,r,t,S,aa;c.set_visible(!0);if(b.is(".toontalk-backside")){if(c.is_of_type("top-level")){q=k.semantic.backside_widgets;r=k.shared_widgets;t=b.get(0);h=c.get_backside_widgets().slice();h.forEach(function(a,b){var f=a.get_widget(),e,g,h,k,l,n,p;c.remove_backside_widget(f,a.is_backside());e=0<=
q[b].widget.shared_widget_index?r[q[b].widget.shared_widget_index].view:q[b].widget.view;a.is_backside()?(g=f.get_backside_element(!0),h=e.backside_left,k=e.backside_top,l=e.backside_width,n=e.backside_height):(g=f.get_frontside_element(!0),h=e.frontside_left,k=e.frontside_top,l=e.frontside_width,n=e.frontside_height);d.add_backside_widget(f,a.is_backside());t.appendChild(g);p=$(g).position();$(g).css({left:p.left+h,top:p.top+k,width:l,height:n});a.is_backside()&&(f.backside_geometry=e.backside_geometry,
f.apply_backside_geometry())}.bind(this));return}c?d.get_backside().widget_dropped_on_me(c,p,h):g.UTILITIES.report_internal_error("No source_widget");l||(n=l=0,setTimeout(function(){var b=c.get_HTML(),d=a.width(),f=a.height();0<=b.indexOf("data:image")?(b=Math.min(80,d)/2,d=90,90>f&&(d-=(90-f)/2)):(b=Math.min(60,d/2),d=Math.min(30,f/2));a.css({left:S-b,top:aa-d})},50));S=h.pageX-(e.left+l);aa=h.pageY-(e.top+n);a.css({left:S,top:aa});k&&k.semantic.running&&c.set_running(!0)}else if(b.is(".toontalk-drop-area"))a.addClass("toontalk-widget-in-drop_area"),
b.append(a.get(0)),a.is(".toontalk-robot")&&b.data("drop_area_owner").set_next_robot(g.UTILITIES.widget_from_jquery(a));else{if(a.is(".toontalk-backside-of-top-level"))return;if(d)t=b.closest(".toontalk-top-level-backside").get(0),t.appendChild(a.get(0)),e=$(t).offset(),a.css({left:h.pageX-(e.left+l),top:h.pageY-(e.top+n)}),c.drop_on&&c.drop_on(d,p,h)||d.widget_dropped_on_me&&d.widget_dropped_on_me(c,p,h)||(b=b.closest(".toontalk-top-level-backside"),0<b.length&&(d=g.UTILITIES.widget_from_jquery(b))&&
d.get_backside().widget_dropped_on_me(c,p,h));else{g.UTILITIES.report_internal_error("target element has no 'owner'");return}}g.UTILITIES.remove_highlight()},r=function(b,a,c,d,e){var h=new FileReader,l=0===b.type.indexOf("image"),p,q;h.onloadend=function(){if(l)p=g.element.create("<img src='"+h.result+"' alt='"+b.name+"'/>");else{if(q=n(h.result))try{p=g.UTILITIES.create_from_json(JSON.parse(q))}catch(r){}p||(p=g.element.create(h.result))}k(a,$(p.get_frontside_element(!0)),p,c,d,e)};l?h.readAsDataURL(b):
h.readAsText(b)},h=function(b){var a=document.createElement("script");a.src=b;document.body.appendChild(a)},q=function(){l&&(l.removeClass("toontalk-being-dragged"),l.find("*").removeClass("toontalk-ignore-events"),g.UTILITIES.set_timeout(function(){l=void 0}))},t=function(b,a){if(b===a)return!0;if(b.parentNode)return t(b.parentNode,a)},b=[];window.addEventListener("message",function(d){d.source===window&&"zero-timeout-message"===d.data?(d.stopPropagation(),0<b.length&&b.shift()()):d.data.editable_contents&&
g.publish.republish(d.data)},!1);$(document).ready(function(){var b;g.debugging=g.UTILITIES.get_current_url_boolean_parameter("debugging",!1);g.UTILITIES.process_json_elements();$(document).click(function(a){$(".toontalk-top-level-resource-container").each(function(a,b){var d=b.toontalk_widget;d&&d.set_running&&d.set_running(!1)})});g.QUEUE=window.TOONTALK.queue.create();g.QUEUE.run();window.addEventListener("beforeunload",function(a){g.UTILITIES.backup_all_top_level_widgets(!0)});$(document).tooltip();
g.TRANSLATION_ENABLED=g.UTILITIES.get_current_url_boolean_parameter("translate",!1);g.TRANSLATION_ENABLED?($("a").each(function(a,c){c.href=g.UTILITIES.add_URL_parameter(c.href,"translate","1")}),$("#google_translate_element").is("*")||(b=document.createElement("div"),b.id="google_translate_element",document.body.insertBefore(b,document.body.firstChild)),document.head.appendChild($('<meta name="google-translate-customization" content="7e20c0dc38d147d6-a2c819007bfac9d1-gc84ee27cc12fd5d1-1b"></meta>')[0]),
h("https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit")):$("#google_translate_element").remove();g.UTILITIES.add_test_all_button()});return{create_from_json:function(b,a,c){var d=function(a,c,b){c.shared_widgets[b]=a;a.finish_create_from_json_continuation&&(a.finish_create_from_json_continuation(),a.finish_create_from_json_continuation=void 0);return a},e,h,k,l;if(b){a||(a={});b.shared_widgets&&(a.json_of_shared_widgets=b.shared_widgets,a.shared_widgets=[]);b.shared_html&&
(a.shared_html=b.shared_html);if(b.widget)return e=g.UTILITIES.create_from_json(b.widget,a),b.is_backside?e.get_backside(!0):e;if(a&&a.shared_widgets&&0<=b.shared_widget_index){if(c=a.shared_widgets[b.shared_widget_index])return c;c=a.json_of_shared_widgets[b.shared_widget_index];e=g.UTILITIES.create_from_json(c,a,!0);return d(e,a,b.shared_widget_index)}(k=b.semantic)||(k=b);b=b.view;if(0<=k.shared_widget_index)return e=g.UTILITIES.create_from_json(a.json_of_shared_widgets[k.shared_widget_index],
a,!0),d(e,a,k.shared_widget_index);if(g.creators_from_json[k.type]){a||(a={});b?a.json_view=b:b=a.json_view;if((e=g.creators_from_json[k.type](k,a))&&e.get_backside){k.erased&&(g.widget.erasable(e),e.set_erased(k.erased));k.infinite_stack&&e.set_infinite_stack(k.infinite_stack);if(b&&b.frontside_width)if(h=b.backside?e.get_backside(!0).get_element():e.get_frontside_element(),l={width:b.frontside_width,height:b.frontside_height},"element"===k.type)e.on_update_display(function(){$(h).css(l)});else $(h).css(l);
b&&b.saved_width&&(e.saved_width=b.saved_width,e.saved_height=b.saved_height);b&&b.backside_geometry&&(e.backside_geometry=b.backside_geometry);k.backside_widgets&&(c?e.finish_create_from_json_continuation=function(){this.add_backside_widgets_from_json(e,k.backside_widgets,a)}.bind(this):this.add_backside_widgets_from_json(e,k.backside_widgets,a))}return e}g.UTILITIES.report_internal_error("JSON type '"+k.type+"' not supported. Perhaps a JavaScript file implementing it is missing.")}},add_backside_widgets_from_json:function(b,
a,c){var d;a&&(d=this.create_array_from_json(a,c),b.set_backside_widget_sides(d,a.map(function(a){return 0<=a.widget.shared_widget_index?c.json_of_shared_widgets[a.widget.shared_widget_index].view:a.widget.view})))},create_array_from_json:function(b,a){var c=[];b.forEach(function(b,d){c[d]=b?g.UTILITIES.create_from_json(b,a):b});return c},get_json_of_array:function(b,a){var c=[];b.forEach(function(b,d){b.is_backside&&b.is_backside()?c[d]={widget:g.UTILITIES.get_json(b.get_widget(),a),is_backside:!0}:
c[d]=b.get_type_name?{widget:g.UTILITIES.get_json(b,a)}:b.get_json(a)});return c},fresh_json_history:function(){return{widgets_encountered:[],shared_widgets:[],json_of_widgets_encountered:[]}},get_json_top_level:function(b){var a=this.fresh_json_history(),c=g.UTILITIES.get_json(b,a);0<a.shared_widgets.length&&(c.shared_widgets=a.shared_widgets.map(function(d,e){var h=function(c){c=a.widgets_encountered.indexOf(c);return a.json_of_widgets_encountered[c]},k=function(c){return h(a.shared_widgets[c])},
l=h(d);b===d?(l={semantic:l.semantic,view:l.view,version:l.version},c.semantic={shared_widget_index:e}):g.UTILITIES.tree_replace_once(c.semantic,l,{shared_widget_index:e},k);return l}));c.shared_html=a.shared_html;return c},get_json:function(b,a){var c,d;g.debugging&&!a&&g.UTILITIES.report_internal_error("no json_history");c=a.shared_widgets.indexOf(b);if(0<=c)return{shared_widget_index:c};c=a.widgets_encountered.indexOf(b);if(0<=c)return c=g.UTILITIES.insert_ancestors_last(b,a.shared_widgets),{shared_widget_index:c};
c=a.widgets_encountered.push(b)-1;d=b.get_json(a);d=b.add_to_json(d,a);a.json_of_widgets_encountered[c]=d;b.add_backside_widgets_to_json&&b.add_backside_widgets_to_json(d,a);return d},tree_replace_once:function(b,a,c,d){var e,g;for(g in b)if(b.hasOwnProperty(g)&&(e=b[g])){if(e===a)return b[g]=c,!0;if("shared_widget_index"===g){if(this.tree_replace_once(d(e),a,c,d))return!0}else if(!(0<=["string","number","function","undefined"].indexOf(typeof e))&&this.tree_replace_once(e,a,c,d))return!0}return!1},
insert_ancestors_last:function(b,a){var c=-1;a.some(function(a,d){if(b.has_ancestor(a))return c=d,!0});0>c&&(c=a.length);a.splice(c,0,b);return c},toontalk_json_div:function(b,a){var c=b.view.backside,d=a.get_backside_widgets(),e=a.get_type_name();"top-level"===e?c?(e="a work area containing ",0===d.length?e="an empty work area":(e=1===d.length?e+"one thing: ":e+(d.length+" things: "),p=d.length,d.forEach(function(a){p--;e+=g.UTILITIES.add_a_or_an(a.get_type_name());1===p?e+=", and ":1<p&&(e+=", ")}))):
e="a top-level widget":(e=g.UTILITIES.add_a_or_an(e),c&&(e="the back of "+e));return"<div class='toontalk-json'>\nThis will be replaced by "+e+".\n<div style='display:none;'>"+JSON.stringify(b,null,"  ")+"</div></div>"},copy_widgets:function(b,a){var c=[],d;for(d=0;d<b.length;d++)c[d]=b[d]&&b[d].copy(a);return c},copy_widget_sides:function(b,a){return b.map(function(c){var b=c.get_widget().copy(a);c.is_backside()&&b.get_backside();return b})},copy_array:function(b){return b.slice()},generate_unique_id:function(){d+=
1;return"toontalk_id_"+d},get_style_property:function(b,a){if(b.currentStyle)return b.currentStyle[a];if(window.getComputedStyle)return document.defaultView.getComputedStyle(b,null).getPropertyValue(a)},get_style_numeric_property:function(b,a){var c=this.get_style_property(b,a),d;return"string"===typeof c?(d=c.indexOf("px"),0<=d&&(c=c.substring(0,d)),parseInt(c,10)):c},data_transfer_json_object:function(b){var a;if(b.dataTransfer){try{a=b.dataTransfer.getData("text/html")}catch(c){a=b.dataTransfer.getData("text")}if(!a||
a.match(/[\u3400-\u9FBF]/))a=b.dataTransfer.getData("text");if(a){b=n(a);if(!b)return g.UTILITIES.get_json_top_level(g.element.create(a));try{return JSON.parse(b)}catch(d){g.UTILITIES.report_internal_error("Exception parsing "+b+"\n"+d.toString())}}}},drag_and_drop:function(b){g.UTILITIES.draggable(b);g.UTILITIES.can_receive_drops(b)},draggable:function(b){$(b).attr("draggable",!0);b.addEventListener("dragstart",function(a){var c=$(a.target).closest(".toontalk-side"),d,e,h;a.dataTransfer.getData("text")&&
0<a.dataTransfer.getData("text").length||(l=c||$(b),e=g.UTILITIES.widget_from_jquery(l),e||(e=g.UTILITIES.widget_from_jquery($element),g.UTILITIES.report_internal_error("Possible bug that "+l+" doesn't have a known owner."),l=$(b)),e.being_dragged=!0,d=l.get(0).getBoundingClientRect(),h=l.is(".toontalk-top-level-resource"),a.dataTransfer&&e.get_json&&(a.dataTransfer.effectAllowed=h?"copy":"move",c=g.UTILITIES.get_json_top_level(e),c.view.drag_x_offset=a.clientX-d.left,c.view.drag_y_offset=a.clientY-
d.top,!c.view.frontside_width&&l.parent().is(".toontalk-backside")&&(c.view.frontside_width=l.width(),c.view.frontside_height=l.height()),l.is(".toontalk-backside")&&(c.view.backside=!0),l.data("json",c),d=g.UTILITIES.toontalk_json_div(c,e),a.dataTransfer.setData("text",d),g.UTILITIES.is_internet_explorer()||a.dataTransfer.setData("text/html",d),e.drag_started(c,h)),l.addClass("toontalk-being-dragged"),a.stopPropagation())});b.addEventListener("dragend",function(a){l||(l=$(a.target).closest(".toontalk-side"));
g.UTILITIES.widget_from_jquery(l).being_dragged=void 0;if(l.is(".toontalk-frontside"))if(l.parent().is(".toontalk-backside")){var c=l.data("json");c&&(l.data("json",""),l.css({width:c.view.frontside_width,height:c.view.frontside_height}))}else l.parent().is(".toontalk-top-level-resource, .toontalk-drop-area")||l.is(".toontalk-carried-by-bird, .toontalk-element-attribute")||g.UTILITIES.has_animating_image(l.get(0))||l.css({width:"100%",height:"100%"});q();a.stopPropagation()})},can_receive_drops:function(b){b.addEventListener("dragover",
function(a){a.preventDefault();return!1});b.addEventListener("drop",function(a){var c,d,e,h,n,p,t,F,M,K,J=g.UTILITIES.data_transfer_json_object(a);a.preventDefault();$(b).find("*").removeClass("toontalk-ignore-events");c=l;q();if(c||J||a.dataTransfer.files){if($(a.target).is(".toontalk-drop-area-instructions"))e=$(a.target).parent();else if($(a.target).is(".toontalk-element-attribute-input")){if(e=$(a.target).closest(".toontalk-side"),h=g.UTILITIES.widget_from_jquery(e)){d=c?g.UTILITIES.widget_from_jquery(c):
g.UTILITIES.create_from_json(J);g.UTILITIES.restore_resource(c,d);h.dropped_on_style_attribute(d,a.target.name,a);a.stopPropagation();return}}else e=$(a.target).is(".toontalk-drop-area")?$(a.target):$(a.target).closest(".toontalk-side");if(0!==e.length&&!e.is(".toontalk-top-level-resource")){t=e.offset();g.UTILITIES.remove_highlight();h=g.UTILITIES.widget_from_jquery(e);if(c&&0<c.length&&!(h&&h.get_infinite_stack&&h.get_infinite_stack())&&(c.get(0)===e.get(0)||jQuery.contains(c.get(0),e.get(0)))){if(c.is(".toontalk-top-level-backside"))return;
e.hide();d=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset);e.show();d&&(e=$(d).closest(".toontalk-side"),t=e.offset(),h=g.UTILITIES.widget_from_jquery(e))}J&&J.view&&J.view.drag_x_offset?(n=J.view.drag_x_offset,p=J.view.drag_y_offset):p=n=0;if(c&&0<c.length){if(!(h&&h.get_infinite_stack&&h.get_infinite_stack()||c.get(0)!==e.get(0)&&!jQuery.contains(c.get(0),e.get(0)))){c.css({left:c.get(0).offsetLeft+(a.layerX-n),top:c.get(0).offsetTop+(a.layerY-p)});a.stopPropagation();
return}F=c.is(".toontalk-backside");d=g.UTILITIES.widget_from_jquery(c);c.parent().is(".toontalk-drop-area")?(c.removeClass("toontalk-widget-in-drop_area"),c.parent().data("drop_area_owner").set_next_robot(void 0)):(M=c.parents(".toontalk-side:first"),(K=g.UTILITIES.widget_from_jquery(M))?!F&&d.get_infinite_stack&&d.get_infinite_stack()?(d=d.copy({}),M=c.width(),K=c.height(),c=$(d.get_frontside_element(!0)),e.is(".toontalk-backside")&&c.css({width:J.view.frontside_width||M,height:J.view.frontside_height||
K})):K.removed_from_container&&(M.is(".toontalk-backside")?K.remove_backside_widget(d,F,!0):(K.removed_from_container(d,F,a),d.restore_dimensions&&d.restore_dimensions())):g.UTILITIES.restore_resource(c,d),g.robot.in_training&&g.robot.in_training.add_newly_created_widget_if_new(d))}else{if(0<a.dataTransfer.files.length){for(c=0;c<a.dataTransfer.files.length;c++)r(a.dataTransfer.files[c],e,h,t,a);a.stopPropagation();return}d=g.UTILITIES.create_from_json(J,{event:a});if(!d){J?g.UTILITIES.report_internal_error("Unable to construct a ToonTalk widget from the JSON."):
g.debugging&&console.log("No data transfer in drop.");a.stopPropagation();return}(F=J.view.backside)?(c=$(d.get_backside_element()),c.css({width:J.view.backside_width,height:J.view.backside_height,"background-color":J.view.background_color,"border-width":J.view.border_width}),d.apply_backside_geometry()):c=$(d.get_frontside_element())}d!==h&&k(e,c,d,h,t,a,J,n,p,F);a.stopPropagation()}}else a.dataTransfer?g.UTILITIES.report_internal_error("Drop failed since unable to parse as JSON."):g.UTILITIES.report_internal_error("Drop failed since there is no event.dataTransfer"),
a.stopPropagation()});b.addEventListener("dragenter",function(a){var c=$(a.target).closest(".toontalk-side"),d=g.UTILITIES.get_dragee();c.is(".toontalk-top-level-backside")||c.closest(".toontalk-top-level-resource").is("*")||c.is(".toontalk-being-dragged")||d&&t(c.get(0),d.get(0))||(g.UTILITIES.highlight_element(c,a),c.is(".toontalk-backside, .toontalk-drop-area")||"box"===g.UTILITIES.widget_from_jquery($(b)).get_type_name()||c.find(".toontalk-side").addClass("toontalk-ignore-events"));a.stopPropagation()});
b.addEventListener("dragleave",function(a){a.stopPropagation()})},create_drop_area:function(b){var a=document.createElement("div"),c=$(a),d=document.createElement("div");d.innerHTML=b;$(d).addClass("toontalk-drop-area-instructions ui-widget");c.addClass("toontalk-drop-area");c.append(d);g.UTILITIES.can_receive_drops(a);return c},process_json_elements:function(){$(".toontalk-json").each(function(b,a){var c=a.textContent,d,e,h,k;if(c)if(c=c.substring(c.indexOf("{"),c.lastIndexOf("}")+1),d=JSON.parse(c),
e=g.UTILITIES.create_from_json(d)){a.textContent="";if(e.get_type_name)if(e.is_of_type("top-level")){if(!g.no_local_storage&&!g.UTILITIES.get_current_url_boolean_parameter("reset",!1)){if(d.load_most_recent_program)try{(k=window.localStorage.getItem("toontalk-last-key"))&&(h=window.localStorage.getItem(k))}catch(l){c="Error reading previous state. Error message is "+l,g.UTILITIES.is_internet_explorer()?console.error(c):g.UTILITIES.display_message()}h&&(d=JSON.parse(h),e=g.UTILITIES.create_from_json(d))}h=
e.get_backside(!0);h=h.get_element();$(a).replaceWith(h);$(h).css({width:d.view.backside_width,height:d.view.backside_height,"background-color":d.view.background_color,"border-width":d.view.border_width})}else $(a).addClass("toontalk-top-level-resource toontalk-top-level-resource-container"),h=e.get_frontside_element(),$(h).addClass("toontalk-top-level-resource").css({position:"relative"}),a.toontalk_widget=e,a.appendChild(h);else a.appendChild(e.get_element());e.set_active&&e.set_active(!1);e.set_visible&&
e.set_visible(!0);setTimeout(function(){e.update_display&&e.update_display();d.semantic.running&&e.set_running(!0)},1)}else g.UTILITIES.report_internal_error("Could not recreate a widget from this JSON: "+c)})},set_absolute_position:function(b,a){for(var c=b.parent(),d=a.left,e=a.top,g;c.is("*")&&!c.is("html");)g=c.position(),d-=g.left,e-=g.top,c=c.parent();b.css({left:d,top:e,position:"absolute"});b.is(".toontalk-side-animating")&&(b.get(0).style.left=d+"px",b.get(0).style.top=e+"px")},set_position_relative_to_top_level_backside:function(b,
a){var c=b.closest(".toontalk-top-level-backside").offset();c||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),c={left:0,top:0});var d=a.left-c.left,c=a.top-c.top;b.css({left:d,top:c,position:"absolute"});b.is(".toontalk-side-animating")&&(b.get(0).style.left=d+"px",b.get(0).style.top=c+"px")},restore_resource:function(b,a){var c,d;b.is(".toontalk-top-level-resource")&&(c=a.copy({fresh_copy:!0}),d=c.get_frontside_element(),$(d).css({width:b.width(),height:b.height()}),
b.parent().removeClass("toontalk-top-level-resource toontalk-top-level-resource-container"),b.removeClass("toontalk-top-level-resource toontalk-top-level-resource-container"),$(d).addClass("toontalk-top-level-resource toontalk-top-level-resource-container").css({position:"relative"}),b.get(0).parentElement.appendChild(d),g.DISPLAY_UPDATES.pending_update(c),a.set_active&&(a.set_active(!0),c.set_active(!1)))},find_resource_equal_to_widget:function(b){var a;$(".toontalk-top-level-resource").each(function(c,
d){var e=$(d).children(":first"),h=g.UTILITIES.widget_from_jquery(e);if(h&&(b.equals&&b.equals(h)||b.matching_resource&&b.matching_resource(h)))return a=e.get(0),!1});return a},set_position_is_absolute:function(b,a,c){a?(c=$(b).position(),a=c.left,c=c.top,$(b).css({left:a,top:c,position:"absolute"})):b.style.position="static"},cardinal:function(b){switch(b){case 0:return"first";case 1:return"second";case 2:return"third";default:return b+"th"}},on_a_nest_in_a_box:function(b){return $(b).closest(".toontalk-nest").is("*")&&
$(b).closest(".toontalk-box").is("*")},add_one_shot_event_handler:function(b,a,c,d){var e=!1,g=function(c){e=!0;d&&d();b.removeEventListener(a,g)};b.addEventListener(a,g);setTimeout(function(){e||g()},c)},animate_to_absolute_position:function(b,a,c,d,e){var h=$(b).offset(),k=$(b).position(),l=g.UTILITIES.distance(a,h);d||(d=.5);d=Math.round(l/d);$(b).addClass("toontalk-side-animating");b.style.transitionDuration=d+"ms";b.style.left=k.left+(a.left-h.left)+"px";b.style.top=k.top+(a.top-h.top)+"px";
e||g.UTILITIES.add_one_shot_event_handler(b,"transitionend",d+500,function(){$(b).removeClass("toontalk-side-animating");b.style.transitionDuration=""});g.UTILITIES.add_one_shot_event_handler(b,"transitionend",d+500,c)},distance:function(b,a){var c=b.left-a.left,d=b.top-a.top;return Math.sqrt(c*c+d*d)},highlight_element:function(b,a,c){var d;if(!$(b).is(".toontalk-highlight")&&(g.UTILITIES.remove_highlight(),d=g.UTILITIES.widget_from_jquery($(b)))){if(d.element_to_highlight&&a&&(b=d.element_to_highlight(a),
!b))return;$(b).addClass("toontalk-highlight").css({"z-index":g.UTILITIES.next_z_index()});c&&setTimeout(function(){g.UTILITIES.remove_highlight()},c)}},remove_highlight:function(){$(".toontalk-highlight").removeClass("toontalk-highlight")},cursor_of_image:function(b){var a=b.lastIndexOf(".");return 0<=a?b.substring(0,a)+".32x32"+b.substring(a):b},next_z_index:function(){e++;return e},create_button:function(b,a,c,d){b=$("<button>"+b+"</button>").button();b.addClass(a).click(d).attr("title",c);return b.get(0)},
create_close_button:function(b,a){var c=document.createElement("div"),d=document.createElement("div");$(c).addClass("toontalk-close-button");$(c).click(b);$(c).attr("title",a);d.innerHTML="&times;";c.appendChild(d);return c},check_radio_button:function(b){$(b.button).prop("checked",!0);$(b.label).addClass("ui-state-active")},create_button_set:function(){var b=document.createElement("div"),a,c;for(a=0;a<arguments.length;a++)if(0<=arguments[a].length)for(c=0;c<arguments[a].length;c++)b.appendChild(arguments[a][c]);
else b.appendChild(arguments[a]);$(b).buttonset();return b},create_text_element:function(b){var a=document.createElement("div");a.textContent=b;$(a).addClass("ui-widget");return a},create_space:function(){var b=document.createElement("span");b.innerHTML="&nbsp;";$(b).addClass("ui-widget");return b},create_anchor_element:function(b,a){var c=document.createElement("a");c.innerHTML=b;g.TRANSLATION_ENABLED&&(a=g.UTILITIES.add_URL_parameter(a,"translate","1"));c.href=a;c.target="_blank";return c},create_text_input:function(b,
a,c,d,e){var h=document.createElement("input"),k;h.type="text";h.className=a;h.value=b;h.title=d;c?(b=document.createElement("label"),b.innerHTML=c,h.id=g.UTILITIES.generate_unique_id(),b.htmlFor=h.id,e&&(k=g.UTILITIES.create_anchor_element("i",e),$(k).addClass("toontalk-help-button notranslate"),k.translate=!1),c=g.UTILITIES.create_horizontal_table(b,h,k),$(b).addClass("ui-widget")):c=h;$(h).button().addClass("toontalk-text-input");$(h).css({"background-color":"white"});return{container:c,button:h}},
create_text_area:function(b,a,c,d){var e=document.createElement("textarea");e.className=a;e.value=b;e.title=d;b=document.createElement("label");b.innerHTML=c;e.id=g.UTILITIES.generate_unique_id();b.htmlFor=e.id;c=g.UTILITIES.create_horizontal_table(b,e);$(e).button().addClass("toontalk-text-text_area");$(e).css({background:"white"});$(b).addClass("ui-widget");return{container:c,button:e}},create_radio_button:function(b,a,c,d,e){var h=document.createElement("div"),k=document.createElement("input"),
l=document.createElement("label");k.type="radio";k.className=c;k.name=b;k.value=a;l.innerHTML=d;k.id=g.UTILITIES.generate_unique_id();l.htmlFor=k.id;h.appendChild(k);h.appendChild(l);h.title=e;$(k).button();return{container:h,button:k,label:l}},create_check_box:function(b,a,c,d){var e=document.createElement("div"),h=document.createElement("input"),k=document.createElement("label");h.type="checkbox";h.className=a;h.checked=b;k.innerHTML=c;h.id=g.UTILITIES.generate_unique_id();k.htmlFor=h.id;$(k).addClass("ui-widget");
e.appendChild(h);e.appendChild(k);e.title=d;return{container:e,button:h,label:k}},create_horizontal_table:function(){var b=document.createElement("table"),a,c,d;c=document.createElement("tr");b.appendChild(c);for(a=0;a<arguments.length;a++)arguments[a]&&(d=document.createElement("td"),c.appendChild(d),d.appendChild(arguments[a]));return b},create_vertical_table:function(){var b=document.createElement("table"),a,c;for(a=0;a<arguments.length;a++)arguments[a]&&(c=g.UTILITIES.create_row(arguments[a]),
b.appendChild(c));return b},create_row:function(){var b=document.createElement("tr"),a=document.createElement("td"),c;for(c=0;c<arguments.length;c++)b.appendChild(arguments[c]);a.appendChild(b);return b},create_table_entry:function(b){var a=document.createElement("td");a.appendChild(b);return a},selected_radio_button:function(){var b;for(b=0;b<arguments.length;b++)if(arguments[b].checked)return arguments[b]},create_image:function(b,a){var c=document.createElement("img"),d;c.src=b;a&&$(c).addClass(a);
0===b.indexOf("images/")&&(d=function(a){c.removeEventListener("error",d);c.src="http://toontalk.github.io/ToonTalk/"+b},c.addEventListener("error",d));return c},create_tabs:function(b,a){var c=document.createElement("div"),d=document.createElement("ul"),e;if(b.length!==a.length)return console.error("UTILITIES.create_tabs called with different length lists."),c;b.forEach(function(c,b){var f=document.createElement("li"),g=document.createElement("a"),h;"string"===typeof c?(h=document.createElement("span"),
h.innerHTML=c):h=c;e="tab-"+b;g.href="#"+e;g.appendChild(h);f.appendChild(g);d.appendChild(f);a[b].id=e});c.appendChild(d);a.forEach(function(a){c.appendChild(a)});$(c).tabs();return c},create_file_data_table:function(b,a,c){var d=document.createElement("table");$(d).DataTable({data:b,columns:[{data:"title",title:"Name",render:function(b,d,e,f){b=a?b.substring(0,b.length-5):b;d=a?g.google_drive.google_drive_url(e.id):"Click to load this program.";if(c)return"<div class='"+c+"' title='"+d+"'id='"+
e.id+"'>"+b+"</div>";g.TRANSLATION_ENABLED&&(d=g.UTILITIES.add_URL_parameter(d,"translate","1"));return"<a href='"+d+"'target='_blank' title='Click to open published page.'>"+b+"</a>"}},{data:"modifiedDate",title:"Modified",render:function(a,c,b,d){return(new Date(a)).toUTCString()}},{data:"createdDate",title:"Created",render:function(a,c,b,d){return(new Date(a)).toUTCString()}},{data:"fileSize",title:"Size"}]});$(d).addClass("toontalk-file-table");return d},create_local_files_table:function(b){b=
g.UTILITIES.get_all_locally_stored_program_names().map(function(a){var c=g.UTILITIES.get_local_storage_meta_data(a);if(c)return{title:a,modifiedDate:c.last_modified,createdDate:c.created,fileSize:c.file_size}});return g.UTILITIES.create_file_data_table(b,!1,"toontalk-file-load-button")},get_dragee:function(){return l},add_URL_parameter:function(b,a,c){b=g.UTILITIES.remove_URL_parameter(b,a);var d;d=0<=b.indexOf("?")?"&":"?";return b+d+a+"="+c},remove_URL_parameter:function(b,a){var c=b.indexOf("&"+
a+"="),d;0>c&&(c=b.indexOf("?"+a+"="));if(0>c)return b;d=b.indexOf("&",c+1);0>d&&(d=b.length);b=b.substring(0,c)+b.substring(d);"?"===b[b.length-1]&&(b=substring(0,b.length-1));return b},add_a_or_an:function(b,a){var c=b.charAt(0);return 0===b.indexOf("the ")?b:0>"aeiou".indexOf(c)?a?"A "+b:"a "+b:a?"An "+b:"an "+b},maximum_string_length:function(b,a){var c;if(b.length<=a)return b;c=b.substring(0,Math.round(.75*a));return c+" ... "+b.substring(b.length-(a-c.length))},backup_all_top_level_widgets:function(b){$(".toontalk-top-level-backside").each(function(a,
c){g.UTILITIES.widget_from_jquery($(c)).save(b)})},make_resizable:function(b,a){b.resizable({resize:function(c,d){b.find("img").css({width:d.size.width,height:d.size.height});a.render()},handles:"n,e,s,w"})},match:function(b,a){var c=b.match(a);return c.is_widget&&a.matched_by?a.matched_by(b):c},current_URL:function(){return window.location.pathname},absolute_file_path:function(b){var a=window.location.pathname,c=a.lastIndexOf("ToonTalk/");return 0>c?b:a.substring(0,c+9)+b},copy_side:function(b,a,
c){a=b.get_widget().copy(a);var d;c&&(c=b.get_widget().get_frontside_element())&&(d=a.get_frontside_element(!0),$(d).css({width:$(c).width(),height:$(c).height()}));return b.is_backside()?a.get_backside():a},scale_to_fit:function(b,a,c,d,e){var g=function(){$(b).css({transform:"scale("+k+", "+l+")","transform-origin":"top left",width:c,height:d})},h,k,l;c||(c=$(b).width());d||(d=$(b).height());$(a).is(".toontalk-backside")?l=k=1:(h=$(a).width(),a=$(a).height(),k=h/c,l=a/d,0===k&&(k=1),0===l&&(l=1));
e?setTimeout(g,e):g();return{x_scale:k,y_scale:l}},relative_position:function(b,a){var c=$(b).offset(),d;a&&(d=$(a).offset(),c.left-=d.left,c.top-=d.top);return c},add_animation_class:function(b,a){$(b).css({width:"",height:""}).addClass(a)},widget_from_jquery:function(b){if(0<b.length)return b.get(0).toontalk_widget},has_animating_image:function(b){b=$(b);return(b=b.css("animation")||b.css("webkit-animation")||b.css("moz-animation")||b.css("ms-animation")||b.css("o-animation"))&&0!==b.indexOf("none")},
display_message:function(b){console.error(b);alert(b)},report_internal_error:function(b){console.log(b);g.debugging&&g.UTILITIES.display_message(b)},get_current_url_boolean_parameter:function(b,a){return 0>window.location.href.indexOf(b+"=")?a:0<=window.location.href.indexOf(b+"=1")?!0:!1},is_browser_of_type:function(b){return 0<=window.navigator.userAgent.indexOf(b)},is_internet_explorer:function(){return g.UTILITIES.is_browser_of_type("MSIE")||g.UTILITIES.is_browser_of_type("Trident")},remove_z_index:function(b){if(0===
b.length||"<"!==b.charAt(0)||0>b.indexOf("z-index"))return b;b=$(b);b.attr("z-index","");return b.html()},add_test_all_button:function(){var b=$("#toontalk-test-all-button"),a;if(0!==b.length){b.button();a=b.get(0);a.innerHTML="Run all tests";var c=!1;b.click(function(b){c?($(".toontalk-stop-sign").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&$(this).click()}),a.innerHTML="Run all tests"):($(".toontalk-green-flag").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&
$(this).click()}),a.innerHTML="Stop all tests");c=!c})}},set_timeout:function(d,a){a?setTimeout(d,a):(b.push(d),window.postMessage("zero-timeout-message","*"))},get_all_locally_stored_program_names:function(){var b=window.localStorage.getItem("toontalk-all-program-names");return b?JSON.parse(b):[]},set_all_locally_stored_program_names:function(b){window.localStorage.setItem("toontalk-all-program-names",JSON.stringify(b))},get_local_storage_meta_data:function(b){b=g.UTILITIES.local_storage_program_meta_data_key(b);
var a;try{if(a=window.localStorage.getItem(b))return JSON.parse(a)}catch(c){}},local_storage_program_key:function(b){return"toontalk-json: "+b},local_storage_program_meta_data_key:function(b){return"toontalk-meta-data: "+b},enable_editor:function(b,a,c,d){(function(a,b){var c=function(a){a.data.editor_enabled_for&&a.data.editor_enabled_for===b&&(e=!0,window.removeEventListener("message",c))},d=function(a,b){e||setTimeout(function(){a();d(a,b)},500)},e=!1;window.addEventListener("message",c);d(a,b)})(function(){b.postMessage({save_edits_to:window.location.href,
file_id:c,widgets_json:d},"*")},c)},create_queue:function(){var b=[],a=0;return{getLength:function(){return b.length-a},isEmpty:function(){return 0==b.length},enqueue:function(a){b.push(a)},dequeue:function(){var c;if(0!=b.length)return c=b[a],2*++a>=b.length&&(b=b.slice(a),a=0),c},peek:function(){return 0<b.length?b[a]:void 0},does_any_item_satisfy:function(c){var d;for(d=a;d<b.length;d++)if(c(b[d]))return!0;return!1}}}}}(window.TOONTALK);window.TOONTALK.UTILITIES.available_types="number box element robot nest sensor top-level".split(" ");
