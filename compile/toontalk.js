'use strict';(function(b){var l;"undefined"===typeof exports?"function"===typeof define&&"object"===typeof define.amd&&define.amd?(l={},define(function(){return l})):l="undefined"!==typeof window?window:b:l=exports;(function(b){var k={greatest_common_divisor:function(e,n){if(1===n||1===e)return 1;for(var a;0!==n;){a=n;n=e%n;if(!isFinite(n))return 0;e=a}return e}};k.gcd=k.greatest_common_divisor;k.fromRandom=function(e){return Math.random()*(1<<e)>>>0};k.fromMillitime=function(){return+new Date};k.fromUnixtime=
function(){return.001*k.fromMillitime()|0};"undefined"!==typeof b&&(b.integer=k);(function(e){function n(e,b,f){if(f!==a)return e instanceof n?e:"undefined"===typeof e?c:n.parse(e);for(e=e||[];e.length&&!e[e.length-1];)--e.length;this._d=e;this._s=e.length?b||1:0}var a={};n._construct=function(e,c){return new n(e,c,a)};n.base=1E7;n.base_log10=7;var c=new n([],0,a);n.ZERO=c;var b=new n([1],1,a);n.ONE=b;var f=new n(b._d,-1,a);n.M_ONE=f;n._0=c;n._1=b;n.small=[c,b,new n([2],1,a),new n([3],1,a),new n([4],
1,a),new n([5],1,a),new n([6],1,a),new n([7],1,a),new n([8],1,a),new n([9],1,a),new n([10],1,a),new n([11],1,a),new n([12],1,a),new n([13],1,a),new n([14],1,a),new n([15],1,a),new n([16],1,a),new n([17],1,a),new n([18],1,a),new n([19],1,a),new n([20],1,a),new n([21],1,a),new n([22],1,a),new n([23],1,a),new n([24],1,a),new n([25],1,a),new n([26],1,a),new n([27],1,a),new n([28],1,a),new n([29],1,a),new n([30],1,a),new n([31],1,a),new n([32],1,a),new n([33],1,a),new n([34],1,a),new n([35],1,a),new n([36],
1,a)];n.digits="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");n.prototype.toString=function(a){a=+a||10;if(2>a||36<a)throw Error("illegal radix "+a+".");if(0===this._s)return"0";if(10===a){a=0>this._s?"-":"";a+=this._d[this._d.length-1].toString();for(var e=this._d.length-2;0<=e;e--){for(var c=this._d[e].toString();7>c.length;)c="0"+c;a+=c}return a}e=n.digits;a=n.small[a];for(var c=this._s,b=this.abs(),f=[],d;0!==b._s;)d=b.divRem(a),b=d[0],d=d[1],f.push(e[d.valueOf()]);return(0>c?"-":"")+f.reverse().join("")};
n.radixRegex=[/^$/,/^$/,/^[01]*$/,/^[012]*$/,/^[0-3]*$/,/^[0-4]*$/,/^[0-5]*$/,/^[0-6]*$/,/^[0-7]*$/,/^[0-8]*$/,/^[0-9]*$/,/^[0-9aA]*$/,/^[0-9abAB]*$/,/^[0-9abcABC]*$/,/^[0-9a-dA-D]*$/,/^[0-9a-eA-E]*$/,/^[0-9a-fA-F]*$/,/^[0-9a-gA-G]*$/,/^[0-9a-hA-H]*$/,/^[0-9a-iA-I]*$/,/^[0-9a-jA-J]*$/,/^[0-9a-kA-K]*$/,/^[0-9a-lA-L]*$/,/^[0-9a-mA-M]*$/,/^[0-9a-nA-N]*$/,/^[0-9a-oA-O]*$/,/^[0-9a-pA-P]*$/,/^[0-9a-qA-Q]*$/,/^[0-9a-rA-R]*$/,/^[0-9a-sA-S]*$/,/^[0-9a-tA-T]*$/,/^[0-9a-uA-U]*$/,/^[0-9a-vA-V]*$/,/^[0-9a-wA-W]*$/,
/^[0-9a-xA-X]*$/,/^[0-9a-yA-Y]*$/,/^[0-9a-zA-Z]*$/];n.parse=function(e,b){function f(a){a=a.replace(/\s*[*xX]\s*10\s*(\^|\*\*)\s*/,"e");return a.replace(/^([+\-])?(\d+)\.?(\d*)[eE]([+\-]?\d+)$/,function(a,e,n,b,c){c=+c;var d=0>c,f=n.length+c;a=(d?n:b).length;c=(c=Math.abs(c))>=a?c-a+d:0;a=Array(c+1).join("0");n+=b;return(e||"")+(d?n=a+n:n+=a).substr(0,f+=d?a.length:0)+(f<n.length?"."+n.substr(f):"")})}e=e.toString();if("undefined"===typeof b||10===+b)e=f(e);var d=RegExp("^([+\\-]?)("+("undefined"===
typeof b?"0[xcb]":16==b?"0x":8==b?"0c":2==b?"0b":"")+")?([0-9a-z]*)(?:\\.\\d*)?$","i").exec(e);if(d){var g=d[1]||"+",h=d[2]||"",d=d[3]||"";if("undefined"===typeof b)b="0x"===h||"0X"===h?16:"0c"===h||"0C"===h?8:"0b"===h||"0B"===h?2:10;else if(2>b||36<b)throw Error("Illegal radix "+b+".");b=+b;if(!n.radixRegex[b].test(d))throw Error("Bad digit for radix "+b);d=d.replace(/^0+/,"").split("");if(0===d.length)return c;g="-"===g?-1:1;if(10==b){for(h=[];7<=d.length;)h.push(parseInt(d.splice(d.length-n.base_log10,
n.base_log10).join(""),10));h.push(parseInt(d.join(""),10));return new n(h,g,a)}h=c;b=n.small[b];for(var q=n.small,k=0;k<d.length;k++)h=h.multiply(b).add(q[parseInt(d[k],36)]);return new n(h._d,g,a)}throw Error("Invalid BigInteger format: "+e);};n.prototype.add=function(e){if(0===this._s)return n(e);e=n(e);if(0===e._s)return this;if(this._s!==e._s)return e=e.negate(),this.subtract(e);var c=this._d;e=e._d;for(var b=c.length,d=e.length,f=Array(Math.max(b,d)+1),g=Math.min(b,d),h=0,q=0;q<g;q++)h=c[q]+
e[q]+h,f[q]=h%1E7,h=h/1E7|0;d>b&&(c=e,b=d);for(q=g;h&&q<b;q++)h=c[q]+h,f[q]=h%1E7,h=h/1E7|0;for(h&&(f[q]=h);q<b;q++)f[q]=c[q];return new n(f,this._s,a)};n.prototype.negate=function(){return new n(this._d,-this._s|0,a)};n.prototype.abs=function(){return 0>this._s?this.negate():this};n.prototype.subtract=function(e){if(0===this._s)return n(e).negate();e=n(e);if(0===e._s)return this;if(this._s!==e._s)return e=e.negate(),this.add(e);var b=this;0>this._s&&(b=new n(e._d,1,a),e=new n(this._d,1,a));var f=
b.compareAbs(e);if(0===f)return c;if(0>f){var d=e;e=b;b=d}b=b._d;e=e._d;var d=b.length,g=e.length,h=Array(d),q=0,k,p;for(k=0;k<g;k++)p=b[k]-q-e[k],0>p?(p+=1E7,q=1):q=0,h[k]=p;for(k=g;k<d;k++){p=b[k]-q;if(0>p)p+=1E7;else{h[k++]=p;break}h[k]=p}for(;k<d;k++)h[k]=b[k];return new n(h,f,a)};(function(){function e(b,c){for(var d=b._d,f=d.slice(),g=0;;){var h=(d[g]||0)+1;f[g]=h%1E7;if(9999999>=h)break;++g}return new n(f,c,a)}function c(e,b){for(var d=e._d,f=d.slice(),g=0;;){var h=(d[g]||0)-1;if(0>h)f[g]=
h+1E7;else{f[g]=h;break}++g}return new n(f,b,a)}n.prototype.next=function(){switch(this._s){case 0:return b;case -1:return c(this,-1);default:return e(this,1)}};n.prototype.prev=function(){switch(this._s){case 0:return f;case -1:return e(this,-1);default:return c(this,1)}}})();n.prototype.compareAbs=function(e){if(this===e)return 0;if(!(e instanceof n)){if(!isFinite(e))return isNaN(e)?e:-1;e=n(e)}if(0===this._s)return 0!==e._s?-1:0;if(0===e._s)return 1;var a=this._d.length,b=e._d.length;if(a<b)return-1;
if(a>b)return 1;b=this._d;e=e._d;for(a-=1;0<=a;a--)if(b[a]!==e[a])return b[a]<e[a]?-1:1;return 0};n.prototype.compare=function(e){if(this===e)return 0;e=n(e);return 0===this._s?-e._s:this._s===e._s?this.compareAbs(e)*this._s:this._s};n.prototype.isUnit=function(){return this===b||this===f||1===this._d.length&&1===this._d[0]};n.prototype.multiply=function(e){if(0===this._s)return c;e=n(e);if(0===e._s)return c;if(this.isUnit())return 0>this._s?e.negate():e;if(e.isUnit())return 0>e._s?this.negate():
this;if(this===e)return this.square();var b=this._d.length>=e._d.length,d=(b?this:e)._d,b=(b?e:this)._d,f=d.length,g=b.length,h=f+g,q=Array(h),k;for(k=0;k<h;k++)q[k]=0;for(k=0;k<g;k++){for(var h=0,p=b[k],r=f+k,l,s=k;s<r;s++)l=q[s]+p*d[s-k]+h,h=l/1E7|0,q[s]=l%1E7|0;h&&(l=q[s]+h,q[s]=l%1E7)}return new n(q,this._s*e._s,a)};n.prototype.multiplySingleDigit=function(e){if(0===e||0===this._s)return c;if(1===e)return this;var b;if(1===this._d.length)return b=this._d[0]*e,1E7<=b?new n([b%1E7|0,b/1E7|0],1,
a):new n([b],1,a);if(2===e)return this.add(this);if(this.isUnit())return new n([e],1,a);var d=this._d,f=d.length;b=f+1;for(var g=Array(b),h=0;h<b;h++)g[h]=0;for(var q=h=0;q<f;q++)b=e*d[q]+h,h=b/1E7|0,g[q]=b%1E7|0;h&&(g[q]=h);return new n(g,1,a)};n.prototype.square=function(){if(0===this._s)return c;if(this.isUnit())return b;var e=this._d,d=e.length,f=Array(d+d+1),g,h,q,k;for(k=0;k<d;k++)q=2*k,g=e[k]*e[k],h=g/1E7|0,f[q]=g%1E7,f[q+1]=h;for(k=0;k<d;k++){h=0;q=2*k+1;for(var p=k+1;p<d;p++,q++)g=e[p]*e[k]*
2+f[q]+h,h=g/1E7|0,f[q]=g%1E7;q=d+k;g=h+f[q];h=g/1E7|0;f[q]=g%1E7;f[q+1]+=h}return new n(f,1,a)};n.prototype.quotient=function(e){return this.divRem(e)[0]};n.prototype.divide=n.prototype.quotient;n.prototype.remainder=function(e){return this.divRem(e)[1]};n.prototype.divRem=function(e){e=n(e);if(0===e._s)throw Error("Divide by zero");if(0===this._s)return[c,c];if(1===e._d.length)return this.divRemSmall(e._s*e._d[0]);switch(this.compareAbs(e)){case 0:return[this._s===e._s?b:f,c];case -1:return[c,this]}var d=
this._s*e._s,g=e.abs(),h=this._d,q=h.length,k=[],p,r=new n([],0,a);for(r._s=1;q;)if(r._d.unshift(h[--q]),0>r.compareAbs(e))k.push(0);else{if(0===r._s)p=0;else{var l=r._d.length;p=g._d.length;l=1E7*r._d[l-1]+r._d[l-2];p=1E7*g._d[p-1]+g._d[p-2];r._d.length>g._d.length&&(l=1E7*(l+1));p=Math.ceil(l/p)}do{l=g.multiplySingleDigit(p);if(0>=l.compareAbs(r))break;p--}while(p);k.push(p);p&&(p=r.subtract(l),r._d=p._d.slice(),0===r._d.length&&(r._s=0))}return[new n(k.reverse(),d,a),new n(r._d,this._s,a)]};n.prototype.divRemSmall=
function(e){e=+e;if(0===e)throw Error("Divide by zero");var b=this._s*(0>e?-1:1);e=Math.abs(e);if(1>e||1E7<=e)throw Error("Argument out of range");if(0===this._s)return[c,c];if(1===e||-1===e)return[1===b?this.abs():new n(this._d,b,a),c];if(1===this._d.length){var f=new n([this._d[0]/e|0],1,a);e=new n([this._d[0]%e|0],1,a);0>b&&(f=f.negate());0>this._s&&(e=e.negate());return[f,e]}for(var d=this._d.slice(),f=Array(d.length),g=0,h=0,q=0,k;d.length;)g=1E7*g+d[d.length-1],g<e?(f[q++]=0,d.pop(),h=1E7*h+
g):(k=0===g?0:g/e|0,h=g-e*k,(f[q++]=k)?(d.pop(),g=h):d.pop());e=new n([h],1,a);0>this._s&&(e=e.negate());return[new n(f.reverse(),b,a),e]};n.prototype.isEven=function(){var e=this._d;return 0===this._s||0===e.length||0===e[0]%2};n.prototype.isOdd=function(){return!this.isEven()};n.prototype.sign=function(){return this._s};n.prototype.isPositive=function(){return 0<this._s};n.prototype.isNegative=function(){return 0>this._s};n.prototype.isZero=function(){return 0===this._s};n.prototype.exp10=function(e){e=
+e;if(0===e)return this;if(Math.abs(e)>Number(d))throw Error("exponent too large in BigInteger.exp10");if(0<e){for(var b=new n(this._d.slice(),this._s,a);7<=e;e-=7)b._d.unshift(0);if(0==e)return b;b._s=1;b=b.multiplySingleDigit(Math.pow(10,e));return 0>this._s?b.negate():b}if(-e>=7*this._d.length)return c;b=new n(this._d.slice(),this._s,a);for(e=-e;7<=e;e-=7)b._d.shift();return 0==e?b:b.divRemSmall(Math.pow(10,e))[0]};n.prototype.pow=function(e){if(this.isUnit())return 0<this._s?this:n(e).isOdd()?
this:this.negate();e=n(e);if(0===e._s)return b;if(0>e._s){if(0===this._s)throw Error("Divide by zero");return c}if(0===this._s)return c;if(e.isUnit())return this;if(0<e.compareAbs(d))throw Error("exponent too large in BigInteger.pow");for(var a=this,f=b,g=n.small[2];e.isPositive()&&(!e.isOdd()||(f=f.multiply(a),!e.isUnit()));)a=a.square(),e=e.quotient(g);return f};n.prototype.modPow=function(e,a){for(var c=b,f=this;e.isPositive();)e.isOdd()&&(c=c.multiply(f).remainder(a)),e=e.quotient(n.small[2]),
e.isPositive()&&(f=f.square().remainder(a));return c};n.prototype.log=function(){switch(this._s){case 0:return-Infinity;case -1:return NaN}var e=this._d.length;if(30>7*e)return Math.log(this.valueOf());var b=Math.ceil(30/7),c=this._d.slice(e-b);return Math.log((new n(c,1,a)).valueOf())+(e-b)*Math.log(1E7)};n.prototype.valueOf=function(){return parseInt(this.toString(),10)};n.prototype.toJSValue=function(){return parseInt(this.toString(),10)};var d=n(2147483647);n.MAX_EXP=d;(function(){function e(a){return function(e){return a.call(n(e))}}
function a(e){return function(a,b){return e.call(n(a),n(b))}}function b(e){return function(a,b,c){return e.call(n(a),n(b),n(c))}}(function(){var c,f,d="toJSValue isEven isOdd sign isZero isNegative abs isUnit square negate isPositive toString next prev log".split(" "),g="compare remainder divRem subtract add quotient divide multiply pow compareAbs".split(" "),h=["modPow"];for(c=0;c<d.length;c++)f=d[c],n[f]=e(n.prototype[f]);for(c=0;c<g.length;c++)f=g[c],n[f]=a(n.prototype[f]);for(c=0;c<h.length;c++)f=
h[c],n[f]=b(n.prototype[f]);n.exp10=function(e,a){return n(e).exp10(a)}})()})();e.BigInteger=n})("undefined"!==typeof b?b:this);var g={greatest_common_divisor:function(e,a){if(a.isUnit()||e.isUnit())return BigInteger.ONE;for(var b;!a.isZero();)b=a,a=e.remainder(a),e=b;return e},create:function(){return[0]},clone:function(e){for(var a=[],b=0,c=e.length;b<c;b++)a[b]=e[b];return a},copy:function(e,a){e=[];for(var b=0,c=a.length;b<c;b++)e[b]=a[b];return e},abs:function(e,a){e[0]=Math.abs(a[0]);return e},
str:function(e){return e[0].toString()},toInteger:function(e){return out[0]},fromInteger:function(e){return[parseInt(e)]}};g.ZERO=g.fromInteger(0);g.ONE=g.fromInteger(1);"undefined"!==typeof b&&(b.bigint=g);if(!c)var c=Array;if(!d)var d=Math.pow(2,56);if(!r)var r=16777216;var f={EPSILON:2E-16};f.MAX_LOOPS=r;f.create=function(){var e=new c(2);e[0]=0;e[1]=1;return e};f.clone=function(e){var a=new c(2);a[0]=e[0];a[1]=e[1];return a};f.fromValues=function(e,a){var b=new c(2);b[0]=e;b[1]=a;return f.normalize(b,
b)};f.copy=function(e,a){e[0]=a[0];e[1]=a[1];return e};f.set=function(e,a,b){e[0]=a;e[1]=b;return f.normalize(e,e)};f.abs=function(e,a){e[0]=Math.abs(a[0]);e[1]=a[1];return e};f.invert=function(e,a){var b=a[0];e[0]=a[1];e[1]=b;return e};f.reciprocal=f.invert;f.add=function(e,a,b){a[1]===b[1]?(e[0]=a[0]+b[0],e[1]=a[1]):(e[0]=a[0]*b[1]+b[0]*a[1],e[1]=a[1]*b[1]);return f.normalize(e,e)};f.subtract=function(e,a,b){a[1]===b[1]?(e[0]=a[0]-b[0],e[1]=a[1]):(e[0]=a[0]*b[1]-b[0]*a[1],e[1]=a[1]*b[1]);return f.normalize(e,
e)};f.sub=f.subtract;f.multiply=function(e,a,b){e[0]=a[0]*b[0];e[1]=a[1]*b[1];return f.normalize(e,e)};f.mul=f.multiply;f.mediant=function(e,a,b){e[0]=a[0]+b[0];e[1]=a[1]+b[1];return f.normalize(e,e)};f.divide=function(e,a,b){e[0]=a[0]*b[1];e[1]=a[1]*b[0];return f.normalize(e,e)};f.div=f.divide;f.equals=function(e,a){return 0===e[0]&&0===a[0]||0===e[1]&&0===a[1]?!0:e[0]===a[0]&&e[1]===a[1]};f.approximates=function(e,a){if(f.equals(e,a))return!0;var b=f.create();f.sub(b,e,a);f.abs(b,b);return f.isLessThan(b,
f.INFINITESIMAL)};f.isGreaterThan=function(e,a){return f.equals(e,a)?!1:e[0]*a[1]>a[0]*e[1]};f.isLessThan=function(e,a){return f.equals(e,a)?!1:e[0]*a[1]<a[0]*e[1]};f.isNegative=function(e){return 0>e[0]};f.min=function(e,a,b){f.isLessThan(a,b)?(e[0]=a[0],e[1]=a[1]):(e[0]=b[0],e[1]=b[1]);return e};f.max=function(e,a,b){f.isGreaterThan(a,b)?(e[0]=a[0],e[1]=a[1]):(e[0]=b[0],e[1]=b[1]);return e};f.scalar_multiply=function(e,a,b){e[0]=a[0]*b;e[1]=a[1];return f.normalize(e,e)};f.scalar_divide=function(e,
a,b){e[0]=a[0];e[1]=a[1]*b;return f.normalize(e,e)};f.normalize=function(e,a){if(isNaN(a[0])||isNaN(a[1])||0===a[0]&&0===a[1])return e[0]=0,e[1]=0,e;if(0===a[0])return e[0]=0,e[1]=1,e;if(0===a[1])return e[0]=1,e[1]=0,e;if(a[0]===a[1])return e[0]=1,e[1]=1,e;0<a[1]?(e[0]=a[0],e[1]=a[1]):(e[0]=-a[0],e[1]=-a[1]);var b=k.greatest_common_divisor(Math.abs(e[0]),e[1]);1<b&&(e[0]/=b,e[1]/=b);return e};f.opposite=function(e,a){e[0]=-a[0];e[1]=a[1];return e};f.negative=f.opposite;f.neg=f.opposite;f.power=function(e,
a,b){2===b?(e[0]=a[0]*a[0],e[1]=a[1]*a[1]):0<b?(e[0]=Math.pow(a[0],b),e[1]=Math.pow(a[1],b)):0>b?(b=Math.abs(b),e[0]=Math.pow(a[1],b),e[1]=Math.pow(a[0],b)):f.copy(e,f.ONE);return f.normalize(e,e)};f.pow=f.power;f.sqrt=function(e,a){return f.nthRoot(e,a,2)};f.nthRoot=function(e,a,b){if(f.equals(a,f.ZERO))return f.copy(e,f.ZERO);if(f.equals(a,f.ONE))return f.copy(e,f.ONE);if(f.equals(a,f.INFINITY))return f.copy(e,f.INFINITY);if(f.equals(a,f.INFINULL))return f.copy(e,f.INFINULL);var c=f.isNegative(a);
c&&(a[0]=-a[0]);e=f.copy(e,f.ONE);for(var d=[1,0,0,1],g=f.clone(f.ONE),h=f.MAX_LOOPS;!f.approximates(a,g)&&h--;)f.isLessThan(a,g)?(d[0]+=d[1],d[2]+=d[3]):(d[1]+=d[0],d[3]+=d[2]),e[0]=d[0]+d[1],e[1]=d[2]+d[3],f.pow(g,e,b);c&&(a[0]=-a[0],1===b%2&&f.neg(e,e));return e};f.dot=function(a,n){return a[0]*n[0]+a[1]*n[1]};f.str=function(a){return 1===a[1]?a[0].toString():a[0]+"/"+a[1]};f.toDecimal=function(a){return a[0]/a[1]};f.dec=f.toDecimal;f.toInteger=function(a){return Math.round(f.toDecimal(a))};f.round=
f.toInteger;f.floor=function(a){return Math.floor(f.toDecimal(a))};f.ceil=function(a){return Math.ceil(f.toDecimal(a))};f.fromInteger_copy=function(a,n){a[0]=parseInt(n);a[1]=1;return a};f.fromInteger=function(a){return f.fromInteger_copy(f.create(),a)};f.fromIntegerInverse_copy=function(a,n){a[0]=1;a[1]=parseInt(n);0>a[1]&&(a[0]=-a[0],a[1]=-a[1]);return a};f.fromIntegerInverse=function(a){return f.fromIntegerInverse_copy(f.create(),a)};f.fromDecimal=function(a){return f.fromDecimal_copy(f.create(),
a)};f.fromDecimal_copy=function(a,n){n=parseFloat(n);if(isNaN(n))return f.copy(a,f.INFINULL);if(Infinity===n)return f.copy(a,f.INFINITY);if(Math.abs(n)<f.EPSILON)return f.copy(a,f.ZERO);if(Math.abs(n-1)<f.EPSILON)return f.copy(a,f.ONE);if(Math.abs(n%1)<f.EPSILON)return f.fromInteger_copy(a,n);if(Math.abs(1/n%1)<f.EPSILON)return f.fromIntegerInverse_copy(a,Math.round(1/n));f.copy(a,f.ONE);for(var b=[1,0,0,1],c=n,d=1,g=f.MAX_LOOPS;g--&&Math.abs(n-f.toDecimal(a))>f.EPSILON;)d=Math.floor(c),a[0]=d*b[0]+
b[2],a[1]=d*b[1]+b[3],c=1/(c-d),b[2]=b[0],b[3]=b[1],b[0]=a[0],b[1]=a[1];return a};f.fromRandom=function(a){a[0]=0xfffffffffffff*Math.random()<<0;a[1]=Math.abs(0xfffffffffffff*Math.random()<<0);return f.normalize(a,a)};f.sin=function(a,n){if(0===n[1])return f.copy(a,f.ZERO);f.scalar_multiply(a,n,2);var b=f.create();f.pow(b,n,2);f.add(b,b,f.ONE);f.divide(a,a,b);return a};f.cos=function(a,n){if(0===n[1])return f.neg(a,f.ONE);var b=f.create();f.pow(b,n,2);f.sub(a,f.ONE,b);var c=f.create();f.add(c,f.ONE,
b);f.divide(a,a,c);return a};f.tan=function(a,n){f.scalar_multiply(a,n,2);var b=f.create();f.pow(b,n,2);f.scalar_multiply(b,b,2);f.add(a,a,b);f.pow(b,n,4);f.sub(b,f.ONE,b);f.divide(a,a,b);return a};f.toEgyptian=function(a){a=f.clone(a);f.abs(a,a);var n=f.floor(a);n&&f.sub(a,a,f.fromInteger(n));if(!a[0])return n.toString();n||(n="");for(var b=1,c=f.create();1!==a[0];)b++,c=f.fromValues(1,b),f.isGreaterThan(a,c)&&(n&&(n+=" + "),n+=f.str(c),f.sub(a,a,c));return a?n?n+" + "+f.str(a):f.str(a):n?n:"0"};
f.toBabylonian=function(a){var n="",b=f.toDecimal(a);a=parseInt(b);for(var b=b-a,c=0,d=0;0<a;)(c=a%60)&&(n=c+" * 60^"+d+(n?" + ":"")+n),a=(a-c)/60,d++;for(d=-1;0<b;)b*=60,c=parseInt(b+1E-13),b-=c,-1E-13>b||(c&&(n+=(n?" + ":"")+c+" * 60^"+d),d--);return n?n:"0"};f.traceSternBrocot=function(a){var n="";if(f.equals(a,f.ZERO)||f.equals(a,f.ONE)||f.equals(a,f.INFINITY)||f.equals(a,f.INFINULL))return n;if(f.equals(a,f.ZERO))return f.copy(out,f.ZERO);if(f.equals(a,f.ONE))return f.copy(out,f.ONE);if(f.equals(a,
f.INFINITY))return f.copy(out,f.INFINITY);if(f.equals(a,f.INFINULL))return f.copy(out,f.INFINULL);a=f.clone(a);f.isNegative(a)&&(a[0]=-a[0]);for(var b=f.clone(f.ONE),c=[1,0,0,1],d=0,g=0,h=f.MAX_LOOPS;!f.approximates(a,b)&&h--;)f.isLessThan(a,b)?(c[0]+=c[1],c[2]+=c[3],g++,d&&(n+="R",1!==d&&(n+=d),d=0,n+=" ")):(c[1]+=c[0],c[3]+=c[2],d++,g&&(n+="L",1!==g&&(n+=g),g=0,n+=" ")),b[0]=c[0]+c[1],b[1]=c[2]+c[3];g?(n+="L",1!==g&&(n+=g)):d&&(n+="R",1!==d&&(n+=d));0>h&&(n+="...");return n};f.toContinuedFraction=
function(a,b){b="undefined"===typeof b?65536:parseInt(b);if(f.equals(a,f.ZERO))return[0];if(f.equals(a,f.ONE))return[1];if(f.equals(a,f.NEGONE))return[-1];if(f.equals(a,f.INFINITY))return[1,0];if(f.equals(a,f.INFINULL))return[0,0];var c=f.clone(a),d=f.isNegative(c);d&&(c[0]=-c[0]);for(var g=f.clone(f.ONE),h=[1,0,0,1],q=1,k=[0],p=k.length-1;!f.equals(c,g)&&b--;)f.isLessThan(c,g)?(-1===q?k[p]++:(q=-1,k.push(1),p++),h[0]+=h[1],h[2]+=h[3]):(1===q?k[p]++:(q=1,k.push(1),p++),h[1]+=h[0],h[3]+=h[2]),g[0]=
h[0]+h[1],g[1]=h[2]+h[3];0>b?k.push(0):k[p]++;if(d)for(var r in k)k[r]=-k[r];return k};f.fromContinuedFraction=function(a,b){f.fromInteger_copy(a,b[b.length-1]);for(var c=b.length-2;-1<c;c--)f.invert(a,a),f.add(a,f.fromInteger(b[c]),a);return a};f.dump=function(a){f.create();return"rat\t"+f.str(a)+"\n~\t"+f.toDecimal(a)+"\nCF:\t["+f.toContinuedFraction(a)+"]\n"};f.ZERO=f.fromInteger(0);f.ONE=f.fromInteger(1);f.NEGONE=f.fromInteger(-1);f.INFINITY=f.fromValues(1,0);f.INFINULL=f.fromValues(0,0);f.INFINITESIMAL=
f.clone([1,d]);f.PI=f.fromValues(1320192667429,420230377710);"undefined"!==typeof b&&(b.rat=f);if(!p)var p=new BigInteger("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");if(!l)var l=1073741824;var a={EPSILON:2E-16};a.MAX_LOOPS=l;a.create=function(){var a=[];a[0]=BigInteger.ZERO;a[1]=BigInteger.ONE;return a};a.clone=function(a){var b=[];b[0]=a[0];b[1]=a[1];return b};a.fromValues=function(e,b){var c=[];c[0]=new BigInteger(e);c[1]=new BigInteger(b);return a.normalize(c,c)};a.copy=function(a,b){a[0]=b[0];a[1]=
b[1];return a};a.set=function(e,b,c){e[0]=b;e[1]=c;return a.normalize(e,e)};a.toRat=function(a,b){return f.set(a,b[0].toJSValue(),b[1].toJSValue())};a.fromRat=function(e,b){return a.set(e,BigInteger(b[0]),BigInteger(b[1]))};a.abs=function(a,b){a[0]=b[0].abs();a[1]=b[1];return a};a.invert=function(a,b){var c=b[0];a[0]=b[1];a[1]=c;return a};a.reciprocal=a.invert;a.add=function(e,b,c){0===b[1].compare(c[1])?(e[0]=b[0].add(c[0]),e[1]=b[1]):(e[0]=b[0].multiply(c[1]).add(c[0].multiply(b[1])),e[1]=b[1].multiply(c[1]));
return a.normalize(e,e)};a.subtract=function(e,b,c){0===b[1].compare(c[1])?(e[0]=b[0].subtract(c[0]),e[1]=b[1]):(e[0]=b[0].multiply(c[1]).subtract(c[0].multiply(b[1])),e[1]=b[1].multiply(c[1]));return a.normalize(e,e)};a.sub=a.subtract;a.multiply=function(e,b,c){e[0]=b[0].multiply(c[0]);e[1]=b[1].multiply(c[1]);return a.normalize(e,e)};a.mul=a.multiply;a.mediant=function(e,b,c){e[0]=b[0].add(c[0]);e[1]=b[1].add(c[1]);return a.normalize(e,e)};a.divide=function(e,b,c){e[0]=b[0].multiply(c[1]);e[1]=
b[1].multiply(c[0]);return a.normalize(e,e)};a.div=a.divide;a.equals=function(a,b){return a[0].isZero()&&b[0].isZero()||a[1].isZero()&&b[1].isZero()?!0:0===a[0].compare(b[0])&&0===a[1].compare(b[1])};a.approximates=function(e,b){if(a.equals(e,b))return!0;var c=a.create();a.sub(c,e,b);a.abs(c,c);return a.isLessThan(c,a.INFINITESIMAL)};a.isGreaterThan=function(e,b){return a.equals(e,b)?!1:0<e[0].multiply(b[1]).compare(b[0].multiply(e[1]))};a.isLessThan=function(e,b){return a.equals(e,b)?!1:0>e[0].multiply(b[1]).compare(b[0].multiply(e[1]))};
a.isNegative=function(a){return a[0].isNegative()};a.min=function(e,b,c){a.isLessThan(b,c)?(e[0]=b[0],e[1]=b[1]):(e[0]=c[0],e[1]=c[1]);return e};a.max=function(e,b,c){a.isGreaterThan(b,c)?(e[0]=b[0],e[1]=b[1]):(e[0]=c[0],e[1]=c[1]);return e};a.scalar_multiply=function(e,b,c){e[0]=b[0].multiply(c);e[1]=b[1];return a.normalize(e,e)};a.scalar_divide=function(e,b,c){e[0]=b[0];e[1]=b[1].multiply(c);return a.normalize(e,e)};a.normalize=function(e,b){if(b[0].isZero()||b[1].isZero())return b;if(0===b[0].compare(b[1]))return a.clone(a.ONE);
if(b[1].isNegative())e[0]=b[0].negate(),e[1]=b[1].negate();else if(e[0]=b[0],e[1]=b[1],e[1].isZero())return e;var c=g.greatest_common_divisor(e[0].abs(),e[1]);0<c.compare(BigInteger.ONE)&&(e[0]=e[0].quotient(c),e[1]=e[1].quotient(c));return e};a.opposite=function(a,b){a[0]=b[0].negate();a[1]=b[1];return a};a.negative=a.opposite;a.neg=a.opposite;a.power=function(e,b,c){2===c?(e[0]=b[0].square(),e[1]=b[1].square()):0<c?(e[0]=b[0].pow(c),e[1]=b[1].pow(c)):0>c?(c=Math.abs(c),e[0]=b[1].pow(c),e[1]=b[0].pow(c)):
a.copy(e,a.ONE);return e};a.pow=a.power;a.sqrt=function(e,b){return a.nthRoot(e,b,2)};a.nthRoot=function(e,b,c){if(a.equals(b,a.ZERO))return a.copy(e,a.ZERO);if(a.equals(b,a.ONE))return a.copy(e,a.ONE);if(a.equals(b,a.INFINITY))return a.copy(e,a.INFINITY);if(a.equals(b,a.INFINULL))return a.copy(e,a.INFINULL);var d=a.isNegative(b);d&&(b[0]=b[0].negate());a.copy(e,a.ONE);for(var f=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],g=a.clone(a.ONE),h=l;!a.approximates(b,g)&&h--;)a.isLessThan(b,
g)?(f[0]=f[0].add(f[1]),f[2]=f[2].add(f[3])):(f[1]=f[1].add(f[0]),f[3]=f[3].add(f[2])),e[0]=f[0].add(f[1]),e[1]=f[2].add(f[3]),a.pow(g,e,c);d&&(b[0]=b[0].negate(),1===c%2&&a.neg(e,e));return e};a.dot=function(a,b){return a[0].multiply(b[0]).add(a[1].multiply(b[1]))};a.str=function(a){return 0===a[1].compare(BigInteger.ONE)?a[0].toString():a[0].toString()+"/"+a[1].toString()};a.toDecimal=function(a){return a[0].toJSValue()/a[1].toJSValue()};a.dec=a.toDecimal;a.toInteger=function(a){return a[0].quotient(a[1]).toJSValue()};
a.round=a.toInteger;a.toBigInteger=function(a){return a[0].quotient(a[1])};a.floor=function(e){return Math.floor(a.toDecimal(e))};a.ceil=function(e){return Math.ceil(a.toDecimal(e))};a.fromInteger_copy=function(a,b){a[0]=BigInteger(b);a[1]=BigInteger.ONE;return a};a.fromInteger=function(e){return a.fromInteger_copy(a.create(),e)};a.fromIntegerInverse_copy=function(a,b){a[0]=BigInteger.ONE;a[1]=BigInteger(b);a[1].isNegative()&&(a[0]=a[0].negate(),a[1]=a[1].negate());return a};a.fromIntegerInverse=
function(b){return a.fromIntegerInverse_copy(a.create(),b)};a.fromDecimal=function(b){return a.fromDecimal_copy(a.create(),b)};a.fromDecimal_copy=function(b,c){c=parseFloat(c);if(isNaN(c))return a.copy(b,a.INFINULL);if(Infinity===c)return a.copy(b,a.INFINITY);if(Math.abs(c)<a.EPSILON)return a.copy(b,a.ZERO);if(Math.abs(c-1)<a.EPSILON)return a.copy(b,a.ONE);if(Math.abs(c%1)<a.EPSILON)return a.fromInteger_copy(b,c);if(Math.abs(1/c%1)<a.EPSILON)return a.fromIntegerInverse_copy(b,Math.round(1/c));a.copy(b,
a.ONE);for(var d=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],f=c,g=1,h=a.MAX_LOOPS;h--&&Math.abs(c-a.toDecimal(b))>a.EPSILON;)g=Math.floor(f),b[0]=BigInteger(g*d[0]+d[2]),b[1]=BigInteger(g*d[1]+d[3]),f=1/(f-g),d[2]=d[0],d[3]=d[1],d[0]=b[0],d[1]=b[1];return b};a.fromRandom=function(b){b[0]=BigInteger(0xfffffffffffff*Math.random()<<0);b[1]=BigInteger(Math.abs(0xfffffffffffff*Math.random()<<0));return a.normalize(b,b)};a.sin=function(b,c){if(c[1].isZero())return a.copy(b,a.ZERO);a.scalar_multiply(b,
c,2);var d=a.create();a.pow(d,c,2);a.add(d,d,a.ONE);a.divide(b,b,d);return b};a.cos=function(b,c){if(c[1].isZero())return a.neg(b,a.ONE);var d=a.create();a.pow(d,c,2);a.sub(b,a.ONE,d);var f=a.create();a.add(f,a.ONE,d);a.divide(b,b,f);return b};a.tan=function(b,c){a.scalar_multiply(b,c,2);var d=a.create();a.pow(d,c,2);a.scalar_multiply(d,d,2);a.add(b,b,d);a.pow(d,c,4);a.sub(d,a.ONE,d);a.divide(b,b,d);return b};a.toEgyptian=function(b){b=a.clone(b);a.abs(b,b);var c=a.floor(b);c&&a.sub(b,b,a.fromInteger(c));
if(!b[0])return c.toString();c||(c="");for(var d=1,f=a.create();1!==b[0];)d++,f=a.fromValues(1,d),a.isGreaterThan(b,f)&&(c&&(c+=" + "),c+=a.str(f),a.sub(b,b,f));return b?c?c+" + "+a.str(b):a.str(b):c?c:"0"};a.toBabylonian=function(b){var c="",d=a.toDecimal(b);b=parseInt(d);for(var d=d-b,f=0,g=0;0<b;)(f=b%60)&&(c=f+" * 60^"+g+(c?" + ":"")+c),b=(b-f)/60,g++;for(g=-1;0<d;)d*=60,f=parseInt(d+1E-13),d-=f,-1E-13>d||(f&&(c+=(c?" + ":"")+f+" * 60^"+g),g--);return c?c:"0"};a.traceSternBrocot=function(b){var c=
"";if(a.equals(b,a.ZERO)||a.equals(b,a.ONE)||a.equals(b,a.INFINITY)||a.equals(b,a.INFINULL))return c;b=a.clone(b);a.isNegative(b)&&(b[0]=b[0].negate());for(var d=a.clone(a.ONE),f=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],g=0,h=0,q=65536;!a.equals(b,d)&&q--;)a.isLessThan(b,d)?(f[0]=f[0].add(f[1]),f[2]=f[2].add(f[3]),h++,g&&(c+="R",1!==g&&(c+=g),g=0,c+=" ")):(f[1]=f[1].add(f[0]),f[3]=f[3].add(f[2]),g++,h&&(c+="L",1!==h&&(c+=h),h=0,c+=" ")),d[0]=f[0].add(f[1]),d[1]=f[2].add(f[3]);h?(c+=
"L",1!==h&&(c+=h)):g&&(c+="R",1!==g&&(c+=g));0>q&&(c+="...");return c};a.toContinuedFraction=function(b,c){c="undefined"===typeof c?65536:parseInt(c);if(a.equals(b,a.ZERO))return[0];if(a.equals(b,a.ONE))return[1];if(a.equals(b,a.NEGONE))return[-1];if(a.equals(b,a.INFINITY))return[1,0];if(a.equals(b,a.INFINULL))return[0,0];var d=a.clone(b),f=a.isNegative(d);f&&(d[0]=d[0].negate());for(var g=a.clone(a.ONE),h=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],q=1,k=[0],p=k.length-1;!a.equals(d,
g)&&c--;)a.isLessThan(d,g)?(-1===q?k[p]++:(q=-1,k.push(1),p++),h[0]=h[0].add(h[1]),h[2]=h[2].add(h[3])):(1===q?k[p]++:(q=1,k.push(1),p++),h[1]=h[1].add(h[0]),h[3]=h[3].add(h[2])),g[0]=h[0].add(h[1]),g[1]=h[2].add(h[3]);0>c?k.push(0):k[p]++;if(f)for(var r in k)k[r]=-k[r];return k};a.fromContinuedFraction=function(b,c){a.fromInteger_copy(b,c[c.length-1]);for(var d=c.length-2;-1<d;d--)a.invert(b,b),a.add(b,a.fromInteger(c[d]),b);return b};a.fromFactorial=function(b,c){if("undefined"!==typeof factorial.PREPARED[c])return a.fromInteger_copy(b,
factorial.PREPARED[c]);var d=factorial.PREPARED.length-1;for(a.fromInteger_copy(b,factorial.PREPARED[d]);d<c;)a.scalar_multiply(b,b,++d);return b};a.dump=function(b){return"bigrat\t"+a.str(b)+"\n~\t"+a.toDecimal(b)+"\nCF:\t["+a.toContinuedFraction(b)+"]\n"};a.ZERO=a.fromInteger(0);a.ONE=a.fromInteger(1);a.NEGONE=a.fromInteger(-1);a.INFINITY=a.fromValues(1,0);a.INFINULL=a.fromValues(0,0);a.INFINITESIMAL=a.clone([new BigInteger(1),p]);a.PI=a.fromValues("3141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481117450284102701938521105559644622948954930381964428810975665933446128475648233786783165271201909145648566923460348610454326648213393607260249141273724587",
"1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");"undefined"!==typeof b&&(b.bigrat=a);var q=function(a,b){this.a=f.fromValues(parseInt(a),parseInt(b))};q.prototype.toString=function(){return f.str(this.a)};q.prototype.toContinuedFraction=function(a){return f.toContinuedFraction(this.a,
a)};q.prototype.invert=function(){return f.invert(this.a)};q.prototype.reciprocal=q.prototype.invert;q.prototype.add=function(a){var b=f.create();f.add(b,this.a,a.a);return new q(b[0],b[1])};q.prototype.plus=q.prototype.add;q.prototype.subtract=function(a){var b=f.create();f.sub(b,this.a,a.a);return new q(b[0],b[1])};q.prototype.sub=q.prototype.subtract;q.prototype.minus=q.prototype.subtract;q.prototype.multiply=function(a){var b=f.create();f.mul(b,this.a,a.a);return new q(b[0],b[1])};q.prototype.mul=
q.prototype.multiply;q.prototype.times=q.prototype.multiply;q.prototype.mediant=function(a){var b=f.create();f.mediant(b,this.a,a.a);return new q(b[0],b[1])};q.prototype.divide=function(a){var b=f.create();f.div(b,this.a,a.a);return new q(b[0],b[1])};q.prototype.div=q.prototype.divide;q.prototype.divided_by=q.prototype.divide;q.prototype.power=function(a){var b=f.create();f.pow(b,this.a,a);return new q(b[0],b[1])};q.prototype.pow=q.prototype.power;q.prototype.dump=function(){return f.dump(this.a)};
q.prototype.toRat=function(){return f.clone(this.a)};q.prototype.toDecimal=function(){return f.toDecimal(this.a)};q.fromRat=function(a){var b=new q;b.a[0]=a[0];b.a[1]=a[1];return b};q.fromInteger=function(a){return q.fromRat(f.fromInteger(a))};q.fromIntegerInverse=function(a){return q.fromRat(f.fromIntegerInverse(a))};q.fromDecimal=function(a){return q.fromRat(f.fromDecimal(a))};q.fromContinuedFraction=function(a){return q.fromRat(f.fromContinuedFraction(f.create(),a))};"undefined"!==typeof b&&(b.rational=
q)})(l)})(this);(function(b,l){"object"===typeof module&&"object"===typeof module.exports?module.exports=b.document?l(b,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return l(b)}:l(b)})("undefined"!==typeof window?window:this,function(b,l){function h(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"===typeof b&&0<b&&b-1 in a}function k(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,u){return!!b.call(a,
u,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(hb.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return 0<=X.call(b,a)!==c})}function g(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function c(a){var b=La[a]={};m.each(a.match(Z)||[],function(a,c){b[c]=!0});return b}function d(){F.removeEventListener("DOMContentLoaded",d,!1);b.removeEventListener("load",d,!1);m.ready()}function r(){Object.defineProperty(this.cache={},0,
{get:function(){return{}}});this.expando=m.expando+Math.random()}function f(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(ib,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:jb.test(c)?m.parseJSON(c):c}catch(e){}Q.set(a,b,c)}else c=void 0;return c}function p(){return!0}function s(){return!1}function a(){try{return F.activeElement}catch(a){}}function q(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?
b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function e(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function n(a){var b=kb.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function z(a,b){for(var c=0,e=a.length;c<e;c++)C.set(a[c],"globalEval",!b||C.get(b[c],"globalEval"))}function D(a,b){var c,e,d,f;if(1===b.nodeType){if(C.hasData(a)&&(f=C.access(a),c=C.set(b,f),f=f.events))for(d in delete c.handle,
c.events={},f)for(c=0,e=f[d].length;c<e;c++)m.event.add(b,d,f[d][c]);Q.hasData(a)&&(d=Q.access(a),d=m.extend({},d),Q.set(b,d))}}function y(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&m.nodeName(a,b)?m.merge([a],c):c}function A(a,c){var e=m(c.createElement(a)).appendTo(c.body),d=b.getDefaultComputedStyle?b.getDefaultComputedStyle(e[0]).display:m.css(e[0],"display");e.detach();return d}function w(a){var b=F,
c=Ma[a];c||(c=A(a,b),"none"!==c&&c||(ta=(ta||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=ta[0].contentDocument,b.write(),b.close(),c=A(a,b),ta.detach()),Ma[a]=c);return c}function t(a,b,c){var e,d,f=a.style;(c=c||ua(a))&&(d=c.getPropertyValue(b)||c[b]);c&&(""!==d||m.contains(a.ownerDocument,a)||(d=m.style(a,b)),Ea.test(d)&&Na.test(b)&&(a=f.width,b=f.minWidth,e=f.maxWidth,f.minWidth=f.maxWidth=f.width=d,d=c.width,f.width=a,f.minWidth=b,f.maxWidth=e));return void 0!==
d?d+"":d}function B(a,b){return{get:function(){if(a())delete this.get;else return(this.get=b).apply(this,arguments)}}}function G(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),e=b,d=Oa.length;d--;)if(b=Oa[d]+c,b in a)return b;return e}function x(a,b,c){return(a=lb.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function v(a,b,c,e,d){b=c===(e?"border":"content")?4:"width"===b?1:0;for(var f=0;4>b;b+=2)"margin"===c&&(f+=m.css(a,c+ha[b],!0,d)),e?("content"===c&&(f-=m.css(a,"padding"+
ha[b],!0,d)),"margin"!==c&&(f-=m.css(a,"border"+ha[b]+"Width",!0,d))):(f+=m.css(a,"padding"+ha[b],!0,d),"padding"!==c&&(f+=m.css(a,"border"+ha[b]+"Width",!0,d)));return f}function J(a,b,c){var e=!0,d="width"===b?a.offsetWidth:a.offsetHeight,f=ua(a),g="border-box"===m.css(a,"boxSizing",!1,f);if(0>=d||null==d){d=t(a,b,f);if(0>d||null==d)d=a.style[b];if(Ea.test(d))return d;e=g&&(K.boxSizingReliable()||d===a.style[b]);d=parseFloat(d)||0}return d+v(a,b,c||(g?"border":"content"),e,f)+"px"}function S(a,
b){for(var c,e,d,f=[],g=0,h=a.length;g<h;g++)e=a[g],e.style&&(f[g]=C.get(e,"olddisplay"),c=e.style.display,b?(f[g]||"none"!==c||(e.style.display=""),""===e.style.display&&oa(e)&&(f[g]=C.access(e,"olddisplay",w(e.nodeName)))):f[g]||(d=oa(e),(c&&"none"!==c||!d)&&C.set(e,"olddisplay",d?c:m.css(e,"display"))));for(g=0;g<h;g++)e=a[g],!e.style||b&&"none"!==e.style.display&&""!==e.style.display||(e.style.display=b?f[g]||"":"none");return a}function H(a,b,c,e,d){return new H.prototype.init(a,b,c,e,d)}function E(){setTimeout(function(){ja=
void 0});return ja=m.now()}function N(a,b){var c,e=0,d={height:a};for(b=b?1:0;4>e;e+=2-b)c=ha[e],d["margin"+c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function U(a,b,c){for(var e,d=(pa[b]||[]).concat(pa["*"]),f=0,g=d.length;f<g;f++)if(e=d[f].call(c,b,a))return e}function M(a,b){var c,e,d,f,g;for(c in a)if(e=m.camelCase(c),d=b[e],f=a[c],m.isArray(f)&&(d=f[1],f=a[c]=f[0]),c!==e&&(a[e]=f,delete a[c]),(g=m.cssHooks[e])&&"expand"in g)for(c in f=g.expand(f),delete a[e],f)c in a||(a[c]=f[c],b[c]=
d);else b[e]=d}function fa(a,b,c){var e,d=0,f=va.length,g=m.Deferred().always(function(){delete h.elem}),h=function(){if(e)return!1;for(var b=ja||E(),b=Math.max(0,n.startTime+n.duration-b),c=1-(b/n.duration||0),d=0,f=n.tweens.length;d<f;d++)n.tweens[d].run(c);g.notifyWith(a,[n,c,b]);if(1>c&&f)return b;g.resolveWith(a,[n]);return!1},n=g.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:ja||E(),duration:c.duration,tweens:[],
createTween:function(b,c){var e=m.Tween(a,n.opts,b,c,n.opts.specialEasing[b]||n.opts.easing);n.tweens.push(e);return e},stop:function(b){var c=0,d=b?n.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)n.tweens[c].run(1);b?g.resolveWith(a,[n,b]):g.rejectWith(a,[n,b]);return this}});c=n.props;for(M(c,n.opts.specialEasing);d<f;d++)if(b=va[d].call(n,a,c,n.opts))return b;m.map(c,U,n);m.isFunction(n.opts.start)&&n.opts.start.call(a,n);m.fx.timer(m.extend(h,{elem:a,anim:n,queue:n.opts.queue}));return n.progress(n.opts.progress).done(n.opts.done,
n.opts.complete).fail(n.opts.fail).always(n.opts.always)}function ga(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var e,d=0,f=b.toLowerCase().match(Z)||[];if(m.isFunction(c))for(;e=f[d++];)"+"===e[0]?(e=e.slice(1)||"*",(a[e]=a[e]||[]).unshift(c)):(a[e]=a[e]||[]).push(c)}}function aa(a,b,c,e){function d(n){var h;f[n]=!0;m.each(a[n]||[],function(a,u){var n=u(b,c,e);if("string"===typeof n&&!g&&!f[n])return b.dataTypes.unshift(n),d(n),!1;if(g)return!(h=n)});return h}var f={},g=a===Fa;return d(b.dataTypes[0])||
!f["*"]&&d("*")}function I(a,b){var c,e,d=m.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((d[c]?a:e||(e={}))[c]=b[c]);e&&m.extend(!0,a,e);return a}function R(a,b,c,e){var d;if(m.isArray(b))m.each(b,function(b,d){c||mb.test(a)?e(a,d):R(a+"["+("object"===typeof d?b:"")+"]",d,c,e)});else if(c||"object"!==m.type(b))e(a,b);else for(d in b)R(a+"["+d+"]",b[d],c,e)}function qa(a){return m.isWindow(a)?a:9===a.nodeType&&a.defaultView}var ba=[],Y=ba.slice,V=ba.concat,wa=ba.push,X=ba.indexOf,ka={},
nb=ka.toString,Ga=ka.hasOwnProperty,ob="".trim,K={},F=b.document,m=function(a,b){return new m.fn.init(a,b)},pb=/^-ms-/,qb=/-([\da-z])/gi,rb=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:"2.1.0",constructor:m,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:Y.call(this)},pushStack:function(a){a=m.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a,b){return m.each(this,
a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:wa,sort:ba.sort,splice:ba.splice};m.extend=m.fn.extend=function(){var a,b,c,e,d,f=arguments[0]||{},g=1,n=arguments.length,
h=!1;"boolean"===typeof f&&(h=f,f=arguments[g]||{},g++);"object"===typeof f||m.isFunction(f)||(f={});g===n&&(f=this,g--);for(;g<n;g++)if(null!=(a=arguments[g]))for(b in a)c=f[b],e=a[b],f!==e&&(h&&e&&(m.isPlainObject(e)||(d=m.isArray(e)))?(d?(d=!1,c=c&&m.isArray(c)?c:[]):c=c&&m.isPlainObject(c)?c:{},f[b]=m.extend(h,c,e)):void 0!==e&&(f[b]=e));return f};m.extend({expando:"jQuery"+("2.1.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isFunction:function(a){return"function"===
m.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return 0<=a-parseFloat(a)},isPlainObject:function(a){if("object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!Ga.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){for(var b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?ka[nb.call(a)]||"object":typeof a},
globalEval:function(a){var b;b=eval;if(a=m.trim(a))1===a.indexOf("use strict")?(b=F.createElement("script"),b.text=a,F.head.appendChild(b).parentNode.removeChild(b)):b(a)},camelCase:function(a){return a.replace(pb,"ms-").replace(qb,rb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var e,d=0,f=a.length;e=h(a);if(c)if(e)for(;d<f&&(e=b.apply(a[d],c),!1!==e);d++);else for(d in a){if(e=b.apply(a[d],c),!1===e)break}else if(e)for(;d<f&&(e=b.call(a[d],
d,a[d]),!1!==e);d++);else for(d in a)if(e=b.call(a[d],d,a[d]),!1===e)break;return a},trim:function(a){return null==a?"":ob.call(a)},makeArray:function(a,b){var c=b||[];null!=a&&(h(Object(a))?m.merge(c,"string"===typeof a?[a]:a):wa.call(c,a));return c},inArray:function(a,b,c){return null==b?-1:X.call(b,a,c)},merge:function(a,b){for(var c=+b.length,e=0,d=a.length;e<c;e++)a[d++]=b[e];a.length=d;return a},grep:function(a,b,c){for(var e=[],d=0,f=a.length,g=!c;d<f;d++)c=!b(a[d],d),c!==g&&e.push(a[d]);return e},
map:function(a,b,c){var e,d=0,f=a.length,g=[];if(h(a))for(;d<f;d++)e=b(a[d],d,c),null!=e&&g.push(e);else for(d in a)e=b(a[d],d,c),null!=e&&g.push(e);return V.apply([],g)},guid:1,proxy:function(a,b){var c,e;"string"===typeof b&&(c=a[b],b=a,a=c);if(m.isFunction(a))return e=Y.call(arguments,2),c=function(){return a.apply(b||this,e.concat(Y.call(arguments)))},c.guid=a.guid=a.guid||m.guid++,c},now:Date.now,support:K});m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,
b){ka["[object "+b+"]"]=b.toLowerCase()});var na=function(a){function b(a,c,e,d){var f,g,n,u,h;(c?c.ownerDocument||c:V)!==E&&C(c);c=c||E;e=e||[];if(!a||"string"!==typeof a)return e;if(1!==(u=c.nodeType)&&9!==u)return[];if(F&&!d){if(f=va.exec(a))if(n=f[1])if(9===u)if((g=c.getElementById(n))&&g.parentNode){if(g.id===n)return e.push(g),e}else return e;else{if(c.ownerDocument&&(g=c.ownerDocument.getElementById(n))&&K(c,g)&&g.id===n)return e.push(g),e}else{if(f[2])return R.apply(e,c.getElementsByTagName(a)),
e;if((n=f[3])&&t.getElementsByClassName&&c.getElementsByClassName)return R.apply(e,c.getElementsByClassName(n)),e}if(t.qsa&&(!N||!N.test(a))){g=f=P;n=c;h=9===u&&a;if(1===u&&"object"!==c.nodeName.toLowerCase()){u=m(a);(f=c.getAttribute("id"))?g=f.replace(xa,"\\$&"):c.setAttribute("id",g);g="[id='"+g+"'] ";for(n=u.length;n--;)u[n]=g+r(u[n]);n=ka.test(a)&&k(c.parentNode)||c;h=u.join(",")}if(h)try{return R.apply(e,n.querySelectorAll(h)),e}catch(q){}finally{f||c.removeAttribute("id")}}}var p;a:{a=a.replace(aa,
"$1");g=m(a);if(!d&&1===g.length){f=g[0]=g[0].slice(0);if(2<f.length&&"ID"===(p=f[0]).type&&t.getById&&9===c.nodeType&&F&&v.relative[f[1].type]){c=(v.find.ID(p.matches[0].replace(la,ma),c)||[])[0];if(!c){p=e;break a}a=a.slice(f.shift().value.length)}for(u=ia.needsContext.test(a)?0:f.length;u--;){p=f[u];if(v.relative[n=p.type])break;if(n=v.find[n])if(d=n(p.matches[0].replace(la,ma),ka.test(f[0].type)&&k(c.parentNode)||c)){f.splice(u,1);a=d.length&&r(f);if(!a){R.apply(e,d);p=e;break a}break}}}x(a,g)(d,
c,!F,e,ka.test(a)&&k(c.parentNode)||c);p=e}return p}function c(){function a(c,e){b.push(c+" ")>v.cacheLength&&delete a[b.shift()];return a[c+" "]=e}var b=[];return a}function e(a){a[P]=!0;return a}function d(a){var b=E.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function f(a,b){for(var c=a.split("|"),e=a.length;e--;)v.attrHandle[c[e]]=b}function g(a,b){var c=b&&a,e=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||
-2147483648);if(e)return e;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function n(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function h(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function q(a){return e(function(b){b=+b;return e(function(c,e){for(var d,f=a([],c.length,b),g=f.length;g--;)c[d=f[g]]&&(c[d]=!(e[d]=c[d]))})})}function k(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function p(){}
function m(a,c){var e,d,f,g,n,u,h;if(n=wa[a+" "])return c?0:n.slice(0);n=a;u=[];for(h=v.preFilter;n;){if(!e||(d=ja.exec(n)))d&&(n=n.slice(d[0].length)||n),u.push(f=[]);e=!1;if(d=na.exec(n))e=d.shift(),f.push({value:e,type:d[0].replace(aa," ")}),n=n.slice(e.length);for(g in v.filter)!(d=ia[g].exec(n))||h[g]&&!(d=h[g](d))||(e=d.shift(),f.push({value:e,type:g,matches:d}),n=n.slice(e.length));if(!e)break}return c?n.length:n?b.error(a):wa(a,u).slice(0)}function r(a){for(var b=0,c=a.length,e="";b<c;b++)e+=
a[b].value;return e}function l(a,b,c){var e=b.dir,d=c&&"parentNode"===e,f=Q++;return b.first?function(b,c,f){for(;b=b[e];)if(1===b.nodeType||d)return a(b,c,f)}:function(b,c,g){var n,u,h=[ca,f];if(g)for(;b=b[e];){if((1===b.nodeType||d)&&a(b,c,g))return!0}else for(;b=b[e];)if(1===b.nodeType||d){u=b[P]||(b[P]={});if((n=u[e])&&n[0]===ca&&n[1]===f)return h[2]=n[2];u[e]=h;if(h[2]=a(b,c,g))return!0}}}function z(a){return 1<a.length?function(b,c,e){for(var d=a.length;d--;)if(!a[d](b,c,e))return!1;return!0}:
a[0]}function s(a,b,c,e,d){for(var f,g=[],n=0,u=a.length,h=null!=b;n<u;n++)if(f=a[n])if(!c||c(f,e,d))g.push(f),h&&b.push(n);return g}function D(a,c,d,f,g,n){f&&!f[P]&&(f=D(f));g&&!g[P]&&(g=D(g,n));return e(function(e,n,u,h){var q,k,p=[],m=[],r=n.length,L;if(!(L=e)){L=c||"*";for(var l=u.nodeType?[u]:u,z=[],sa=0,Aa=l.length;sa<Aa;sa++)b(L,l[sa],z);L=z}L=!a||!e&&c?L:s(L,p,a,u,h);l=d?g||(e?a:r||f)?[]:n:L;d&&d(L,l,u,h);if(f)for(q=s(l,m),f(q,[],u,h),u=q.length;u--;)if(k=q[u])l[m[u]]=!(L[m[u]]=k);if(e){if(g||
a){if(g){q=[];for(u=l.length;u--;)(k=l[u])&&q.push(L[u]=k);g(null,l=[],q,h)}for(u=l.length;u--;)(k=l[u])&&-1<(q=g?T.call(e,k):p[u])&&(e[q]=!(n[q]=k))}}else l=s(l===n?l.splice(r,l.length):l),g?g(null,n,l,h):R.apply(n,l)})}function y(a){var b,c,e,d=a.length,f=v.relative[a[0].type];c=f||v.relative[" "];for(var g=f?1:0,n=l(function(a){return a===b},c,!0),u=l(function(a){return-1<T.call(b,a)},c,!0),h=[function(a,c,e){return!f&&(e||c!==B)||((b=c).nodeType?n(a,c,e):u(a,c,e))}];g<d;g++)if(c=v.relative[a[g].type])h=
[l(z(h),c)];else{c=v.filter[a[g].type].apply(null,a[g].matches);if(c[P]){for(e=++g;e<d&&!v.relative[a[e].type];e++);return D(1<g&&z(h),1<g&&r(a.slice(0,g-1).concat({value:" "===a[g-2].type?"*":""})).replace(aa,"$1"),c,g<e&&y(a.slice(g,e)),e<d&&y(a=a.slice(e)),e<d&&r(a))}h.push(c)}return z(h)}function A(a,c){var d=0<c.length,f=0<a.length,g=function(e,g,n,u,h){var q,k,p,m=0,r="0",L=e&&[],l=[],z=B,sa=e||f&&v.find.TAG("*",h),Aa=ca+=null==z?1:Math.random()||.1,D=sa.length;for(h&&(B=g!==E&&g);r!==D&&null!=
(q=sa[r]);r++){if(f&&q){for(k=0;p=a[k++];)if(p(q,g,n)){u.push(q);break}h&&(ca=Aa)}d&&((q=!p&&q)&&m--,e&&L.push(q))}m+=r;if(d&&r!==m){for(k=0;p=c[k++];)p(L,l,g,n);if(e){if(0<m)for(;r--;)L[r]||l[r]||(l[r]=W.call(u));l=s(l)}R.apply(u,l);h&&!e&&0<l.length&&1<m+c.length&&b.uniqueSort(u)}h&&(ca=Aa,B=z);return L};return d?e(g):g}var w,t,v,H,S,x,B,G,J,C,E,M,F,N,U,I,K,P="sizzle"+-new Date,V=a.document,ca=0,Q=0,ba=c(),wa=c(),Y=c(),fa=function(a,b){a===b&&(J=!0);return 0},ga={}.hasOwnProperty,X=[],W=X.pop,Z=
X.push,R=X.push,qa=X.slice,T=X.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},ea="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),ha="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ea+")|)|)[\\x20\\t\\r\\n\\f]*\\]",da=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ha.replace(3,8)+")*)|.*)\\)|)",aa=
/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,ja=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,na=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,oa=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,pa=new RegExp(da),ra=new RegExp("^"+ea+"$"),ia={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+ha),PSEUDO:new RegExp("^"+da),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ta=/^(?:input|select|textarea|button)$/i,ua=/^h\d$/i,ya=/^[^{]+\{\s*\[native \w/,va=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ka=/[+~]/,xa=/'|\\/g,la=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ma=function(a,b,c){a="0x"+b-65536;
return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{R.apply(X=qa.call(V.childNodes),V.childNodes),X[V.childNodes.length].nodeType}catch(za){R={apply:X.length?function(a,b){Z.apply(a,qa.call(b))}:function(a,b){for(var c=a.length,e=0;a[c++]=b[e++];);a.length=c-1}}}t=b.support={};S=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};C=b.setDocument=function(a){var b=a?a.ownerDocument||a:V;a=b.defaultView;if(b===
E||9!==b.nodeType||!b.documentElement)return E;E=b;M=b.documentElement;F=!S(b);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){C()},!1):a.attachEvent&&a.attachEvent("onunload",function(){C()}));t.attributes=d(function(a){a.className="i";return!a.getAttribute("className")});t.getElementsByTagName=d(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});t.getElementsByClassName=ya.test(b.getElementsByClassName)&&d(function(a){a.innerHTML=
"<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});t.getById=d(function(a){M.appendChild(a).id=P;return!b.getElementsByName||!b.getElementsByName(P).length});t.getById?(v.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&F){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},v.filter.ID=function(a){var b=a.replace(la,ma);return function(a){return a.getAttribute("id")===b}}):(delete v.find.ID,v.filter.ID=function(a){var b=
a.replace(la,ma);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});v.find.TAG=t.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var c,e=[],d=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[d++];)1===c.nodeType&&e.push(c);return e}return f};v.find.CLASS=t.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&F)return b.getElementsByClassName(a)};
U=[];N=[];if(t.qsa=ya.test(b.querySelectorAll))d(function(a){a.innerHTML="<select t=''><option selected=''></option></select>";a.querySelectorAll("[t^='']").length&&N.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||N.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||N.push(":checked")}),d(function(a){var c=b.createElement("input");
c.setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&N.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||N.push(":enabled",":disabled");a.querySelectorAll("*,:x");N.push(",.*:")});(t.matchesSelector=ya.test(I=M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&d(function(a){t.disconnectedMatch=I.call(a,"div");I.call(a,"[s!='']:x");U.push("!=",da)});N=N.length&&new RegExp(N.join("|"));
U=U.length&&new RegExp(U.join("|"));K=(a=ya.test(M.compareDocumentPosition))||ya.test(M.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,e=b&&b.parentNode;return a===e||!!(e&&1===e.nodeType&&(c.contains?c.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};fa=a?function(a,c){if(a===c)return J=!0,0;var e=!a.compareDocumentPosition-!c.compareDocumentPosition;if(e)return e;e=(a.ownerDocument||a)===
(c.ownerDocument||c)?a.compareDocumentPosition(c):1;return e&1||!t.sortDetached&&c.compareDocumentPosition(a)===e?a===b||a.ownerDocument===V&&K(V,a)?-1:c===b||c.ownerDocument===V&&K(V,c)?1:G?T.call(G,a)-T.call(G,c):0:e&4?-1:1}:function(a,c){if(a===c)return J=!0,0;var e,d=0;e=a.parentNode;var f=c.parentNode,n=[a],u=[c];if(!e||!f)return a===b?-1:c===b?1:e?-1:f?1:G?T.call(G,a)-T.call(G,c):0;if(e===f)return g(a,c);for(e=a;e=e.parentNode;)n.unshift(e);for(e=c;e=e.parentNode;)u.unshift(e);for(;n[d]===u[d];)d++;
return d?g(n[d],u[d]):n[d]===V?-1:u[d]===V?1:0};return b};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){(a.ownerDocument||a)!==E&&C(a);c=c.replace(oa,"='$1']");if(!(!t.matchesSelector||!F||U&&U.test(c)||N&&N.test(c)))try{var e=I.call(a,c);if(e||t.disconnectedMatch||a.document&&11!==a.document.nodeType)return e}catch(d){}return 0<b(c,E,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==E&&C(a);return K(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==
E&&C(a);var c=v.attrHandle[b.toLowerCase()],c=c&&ga.call(v.attrHandle,b.toLowerCase())?c(a,b,!F):void 0;return void 0!==c?c:t.attributes||!F?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,c=[],e=0,d=0;J=!t.detectDuplicates;G=!t.sortStable&&a.slice(0);a.sort(fa);if(J){for(;b=a[d++];)b===a[d]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}G=null;return a};H=b.getText=function(a){var b,
c="",e=0;b=a.nodeType;if(!b)for(;b=a[e++];)c+=H(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=H(a)}else if(3===b||4===b)return a.nodeValue;return c};v=b.selectors={cacheLength:50,createPseudo:e,match:ia,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(la,ma);a[3]=(a[4]||
a[5]||"").replace(la,ma);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[5]&&a[2];if(ia.CHILD.test(a[0]))return null;a[3]&&void 0!==a[4]?a[2]=a[4]:c&&pa.test(c)&&(b=m(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b));
return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(la,ma).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=ba[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&ba(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,e){return function(d){d=b.attr(d,a);if(null==
d)return"!="===c;if(!c)return!0;d+="";return"="===c?d===e:"!="===c?d!==e:"^="===c?e&&0===d.indexOf(e):"*="===c?e&&-1<d.indexOf(e):"$="===c?e&&d.slice(-e.length)===e:"~="===c?-1<(" "+d+" ").indexOf(e):"|="===c?d===e||d.slice(0,e.length+1)===e+"-":!1}},CHILD:function(a,b,c,e,d){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),n="of-type"===b;return 1===e&&0===d?function(a){return!!a.parentNode}:function(b,c,u){var h,q,k,p,m;c=f!==g?"nextSibling":"previousSibling";var O=b.parentNode,r=n&&b.nodeName.toLowerCase();
u=!u&&!n;if(O){if(f){for(;c;){for(q=b;q=q[c];)if(n?q.nodeName.toLowerCase()===r:1===q.nodeType)return!1;m=c="only"===a&&!m&&"nextSibling"}return!0}m=[g?O.firstChild:O.lastChild];if(g&&u)for(u=O[P]||(O[P]={}),h=u[a]||[],p=h[0]===ca&&h[1],k=h[0]===ca&&h[2],q=p&&O.childNodes[p];q=++p&&q&&q[c]||(k=p=0)||m.pop();){if(1===q.nodeType&&++k&&q===b){u[a]=[ca,p,k];break}}else if(u&&(h=(b[P]||(b[P]={}))[a])&&h[0]===ca)k=h[1];else for(;(q=++p&&q&&q[c]||(k=p=0)||m.pop())&&((n?q.nodeName.toLowerCase()!==r:1!==q.nodeType)||
!++k||(u&&((q[P]||(q[P]={}))[a]=[ca,k]),q!==b)););k-=d;return k===e||0===k%e&&0<=k/e}}},PSEUDO:function(a,c){var d,f=v.pseudos[a]||v.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[P]?f(c):1<f.length?(d=[a,a,"",c],v.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,b){for(var e,d=f(a,c),g=d.length;g--;)e=T.call(a,d[g]),a[e]=!(b[e]=d[g])}):function(a){return f(a,0,d)}):f}},pseudos:{not:e(function(a){var b=[],c=[],d=x(a.replace(aa,"$1"));return d[P]?e(function(a,b,c,e){e=
d(a,null,e,[]);for(var f=a.length;f--;)if(c=e[f])a[f]=!(b[f]=c)}):function(a,e,f){b[0]=a;d(b,null,f,c);return!c.pop()}}),has:e(function(a){return function(c){return 0<b(a,c).length}}),contains:e(function(a){return function(b){return-1<(b.textContent||b.innerText||H(b)).indexOf(a)}}),lang:e(function(a){ra.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(la,ma).toLowerCase();return function(b){var c;do if(c=F?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),
c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===M},focus:function(a){return a===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&
a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!v.pseudos.empty(a)},header:function(a){return ua.test(a.nodeName)},input:function(a){return ta.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===
b.toLowerCase())},first:q(function(){return[0]}),last:q(function(a,b){return[b-1]}),eq:q(function(a,b,c){return[0>c?c+b:c]}),even:q(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:q(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:q(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:q(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};v.pseudos.nth=v.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})v.pseudos[w]=n(w);for(w in{submit:!0,
reset:!0})v.pseudos[w]=h(w);p.prototype=v.filters=v.pseudos;v.setFilters=new p;x=b.compile=function(a,b){var c,e=[],d=[],f=Y[a+" "];if(!f){b||(b=m(a));for(c=b.length;c--;)f=y(b[c]),f[P]?e.push(f):d.push(f);f=Y(a,A(d,e))}return f};t.sortStable=P.split("").sort(fa).join("")===P;t.detectDuplicates=!!J;C();t.sortDetached=d(function(a){return a.compareDocumentPosition(E.createElement("div"))&1});d(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",
function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});t.attributes&&d(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});d(function(a){return null==a.getAttribute("disabled")})||f("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,
b,c){var e;if(!c)return!0===a[b]?b.toLowerCase():(e=a.getAttributeNode(b))&&e.specified?e.value:null});return b}(b);m.find=na;m.expr=na.selectors;m.expr[":"]=m.expr.pseudos;m.unique=na.uniqueSort;m.text=na.getText;m.isXMLDoc=na.isXML;m.contains=na.contains;var Pa=m.expr.match.needsContext,Qa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,hb=/^.[^:#\[\.,]*$/;m.filter=function(a,b,c){var e=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===e.nodeType?m.find.matchesSelector(e,a)?[e]:[]:m.find.matches(a,m.grep(b,function(a){return 1===
a.nodeType}))};m.fn.extend({find:function(a){var b,c=this.length,e=[],d=this;if("string"!==typeof a)return this.pushStack(m(a).filter(function(){for(b=0;b<c;b++)if(m.contains(d[b],this))return!0}));for(b=0;b<c;b++)m.find(a,d[b],e);e=this.pushStack(1<c?m.unique(e):e);e.selector=this.selector?this.selector+" "+a:a;return e},filter:function(a){return this.pushStack(k(this,a||[],!1))},not:function(a){return this.pushStack(k(this,a||[],!0))},is:function(a){return!!k(this,"string"===typeof a&&Pa.test(a)?
m(a):a||[],!1).length}});var xa,tb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(a,b){var c;if(!a)return this;if("string"===typeof a){c="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:tb.exec(a);if(!c||!c[1]&&b)return!b||b.jquery?(b||xa).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:F,!0)),Qa.test(c[1])&&m.isPlainObject(b))for(c in b)if(m.isFunction(this[c]))this[c](b[c]);else this.attr(c,
b[c])}else(c=F.getElementById(c[2]))&&c.parentNode&&(this.length=1,this[0]=c),this.context=F,this.selector=a;return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(m.isFunction(a))return"undefined"!==typeof xa.ready?xa.ready(a):a(m);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return m.makeArray(a,this)}).prototype=m.fn;xa=m(F);var ub=/^(?:parents|prev(?:Until|All))/,vb={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){for(var e=
[],d=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(d&&m(a).is(c))break;e.push(a)}return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});m.fn.extend({has:function(a){var b=m(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(m.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,e=0,d=this.length,f=[],g=Pa.test(a)||"string"!==typeof a?m(a,b||this.context):0;e<d;e++)for(c=this[e];c&&c!==b;c=c.parentNode)if(11>
c.nodeType&&(g?-1<g.index(c):1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(1<f.length?m.unique(f):f)},index:function(a){return a?"string"===typeof a?X.call(m(a),this[0]):X.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});m.each({parent:function(a){return(a=
a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return g(a,"nextSibling")},prev:function(a){return g(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||
{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return a.contentDocument||m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,e){var d=m.map(this,b,c);"Until"!==a.slice(-5)&&(e=c);e&&"string"===typeof e&&(d=m.filter(e,d));1<this.length&&(vb[a]||m.unique(d),ub.test(a)&&d.reverse());return this.pushStack(d)}});var Z=/\S+/g,La={};m.Callbacks=function(a){a="string"===typeof a?La[a]||c(a):m.extend({},a);var b,e,d,f,g,n,h=[],q=!a.once&&[],k=function(c){b=
a.memory&&c;e=!0;n=f||0;f=0;g=h.length;for(d=!0;h&&n<g;n++)if(!1===h[n].apply(c[0],c[1])&&a.stopOnFalse){b=!1;break}d=!1;h&&(q?q.length&&k(q.shift()):b?h=[]:p.disable())},p={add:function(){if(h){var c=h.length;(function sb(b){m.each(b,function(b,c){var e=m.type(c);"function"===e?a.unique&&p.has(c)||h.push(c):c&&c.length&&"string"!==e&&sb(c)})})(arguments);d?g=h.length:b&&(f=c,k(b))}return this},remove:function(){h&&m.each(arguments,function(a,b){for(var c;-1<(c=m.inArray(b,h,c));)h.splice(c,1),d&&
(c<=g&&g--,c<=n&&n--)});return this},has:function(a){return a?-1<m.inArray(a,h):!(!h||!h.length)},empty:function(){h=[];g=0;return this},disable:function(){h=q=b=void 0;return this},disabled:function(){return!h},lock:function(){q=void 0;b||p.disable();return this},locked:function(){return!q},fireWith:function(a,b){!h||e&&!q||(b=b||[],b=[a,b.slice?b.slice():b],d?q.push(b):k(b));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return!!e}};return p};m.extend({Deferred:function(a){var b=
[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",e={state:function(){return c},always:function(){d.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];d[f[1]](function(){var a=g&&g.apply(this,arguments);if(a&&m.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);
else c[f[0]+"With"](this===e?c.promise():this,g?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?m.extend(a,e):e}},d={};e.pipe=e.then;m.each(b,function(a,f){var g=f[2],n=f[3];e[f[1]]=g.add;n&&g.add(function(){c=n},b[a^1][2].disable,b[2][2].lock);d[f[0]]=function(){d[f[0]+"With"](this===d?e:this,arguments);return this};d[f[0]+"With"]=g.fireWith});e.promise(d);a&&a.call(d,d);return d},when:function(a){var b=0,c=Y.call(arguments),e=c.length,d=1!==e||a&&m.isFunction(a.promise)?
e:0,f=1===d?a:m.Deferred(),g=function(a,b,c){return function(e){b[a]=this;c[a]=1<arguments.length?Y.call(arguments):e;c===n?f.notifyWith(b,c):--d||f.resolveWith(b,c)}},n,h,q;if(1<e)for(n=Array(e),h=Array(e),q=Array(e);b<e;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(g(b,q,c)).fail(f.reject).progress(g(b,h,n)):--d;d||f.resolveWith(q,c);return f.promise()}});var za;m.fn.ready=function(a){m.ready.promise().done(a);return this};m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:
m.ready(!0)},ready:function(a){(!0===a?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==a&&0<--m.readyWait||(za.resolveWith(F,[m]),m.fn.trigger&&m(F).trigger("ready").off("ready")))}});m.ready.promise=function(a){za||(za=m.Deferred(),"complete"===F.readyState?setTimeout(m.ready):(F.addEventListener("DOMContentLoaded",d,!1),b.addEventListener("load",d,!1)));return za.promise(a)};m.ready.promise();var T=m.access=function(a,b,c,e,d,f,g){var n=0,h=a.length,q=null==c;if("object"===m.type(c))for(n in d=!0,
c)m.access(a,b,n,c[n],!0,f,g);else if(void 0!==e&&(d=!0,m.isFunction(e)||(g=!0),q&&(g?(b.call(a,e),b=null):(q=b,b=function(a,b,c){return q.call(m(a),c)})),b))for(;n<h;n++)b(a[n],c,g?e:e.call(a[n],n,b(a[n],c)));return d?a:q?b.call(a):h?b(a[0],c):f};m.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};r.uid=1;r.accepts=m.acceptData;r.prototype={key:function(a){if(!r.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=r.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,
b)}catch(e){b[this.expando]=c,m.extend(a,b)}}this.cache[c]||(this.cache[c]={});return c},set:function(a,b,c){var e;a=this.key(a);var d=this.cache[a];if("string"===typeof b)d[b]=c;else if(m.isEmptyObject(d))m.extend(this.cache[a],b);else for(e in b)d[e]=b[e];return d},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){if(void 0===b||b&&"string"===typeof b&&void 0===c)return c=this.get(a,b),void 0!==c?c:this.get(a,m.camelCase(b));this.set(a,b,c);return void 0!==
c?c:b},remove:function(a,b){var c,e;c=this.key(a);var d=this.cache[c];if(void 0===b)this.cache[c]={};else for(m.isArray(b)?e=b.concat(b.map(m.camelCase)):(c=m.camelCase(b),b in d?e=[b,c]:(e=c,e=e in d?[e]:e.match(Z)||[])),c=e.length;c--;)delete d[e[c]]},hasData:function(a){return!m.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var C=new r,Q=new r,jb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ib=/([A-Z])/g;m.extend({hasData:function(a){return Q.hasData(a)||
C.hasData(a)},data:function(a,b,c){return Q.access(a,b,c)},removeData:function(a,b){Q.remove(a,b)},_data:function(a,b,c){return C.access(a,b,c)},_removeData:function(a,b){C.remove(a,b)}});m.fn.extend({data:function(a,b){var c,e,d,g=this[0],n=g&&g.attributes;if(void 0===a){if(this.length&&(d=Q.get(g),1===g.nodeType&&!C.get(g,"hasDataAttrs"))){for(c=n.length;c--;)e=n[c].name,0===e.indexOf("data-")&&(e=m.camelCase(e.slice(5)),f(g,e,d[e]));C.set(g,"hasDataAttrs",!0)}return d}return"object"===typeof a?
this.each(function(){Q.set(this,a)}):T(this,function(b){var c,e=m.camelCase(a);if(g&&void 0===b){c=Q.get(g,a);if(void 0!==c)return c;c=Q.get(g,e);if(void 0!==c)return c;c=f(g,e,void 0);if(void 0!==c)return c}else this.each(function(){var c=Q.get(this,e);Q.set(this,e,b);-1!==a.indexOf("-")&&void 0!==c&&Q.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){Q.remove(this,a)})}});m.extend({queue:function(a,b,c){var e;if(a)return b=(b||"fx")+"queue",
e=C.get(a,b),c&&(!e||m.isArray(c)?e=C.access(a,b,m.makeArray(c)):e.push(c)),e||[]},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),e=c.length,d=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===d&&(d=c.shift(),e--);d&&("fx"===b&&c.unshift("inprogress"),delete f.stop,d.call(a,g,f));!e&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return C.get(a,c)||C.access(a,c,{empty:m.Callbacks("once memory").add(function(){C.remove(a,[b+"queue",c])})})}});m.fn.extend({queue:function(a,
b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,e=1,d=m.Deferred(),f=this,g=this.length,n=function(){--e||d.resolveWith(f,[f])};"string"!==typeof a&&(b=a,a=void 0);for(a=
a||"fx";g--;)(c=C.get(f[g],a+"queueHooks"))&&c.empty&&(e++,c.empty.add(n));n();return d.promise(b)}});var Ba=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ha=["Top","Right","Bottom","Left"],oa=function(a,b){a=b||a;return"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},Ra=/^(?:checkbox|radio)$/i;(function(){var a=F.createDocumentFragment().appendChild(F.createElement("div"));a.innerHTML="<input type='radio' checked='checked' name='t'/>";K.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;
a.innerHTML="<textarea>x</textarea>";K.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue})();K.focusinBubbles="onfocusin"in b;var wb=/^key/,xb=/^(?:mouse|contextmenu)|click/,Sa=/^(?:focusinfocus|focusoutblur)$/,Ta=/^([^.]*)(?:\.(.+)|)$/;m.event={global:{},add:function(a,b,c,e,d){var f,g,n,h,q,k,p,r,l;if(q=C.get(a))for(c.handler&&(f=c,c=f.handler,d=f.selector),c.guid||(c.guid=m.guid++),(h=q.events)||(h=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!==typeof m&&m.event.triggered!==
b.type?m.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(Z)||[""],q=b.length;q--;)n=Ta.exec(b[q])||[],r=k=n[1],l=(n[2]||"").split(".").sort(),r&&(n=m.event.special[r]||{},r=(d?n.delegateType:n.bindType)||r,n=m.event.special[r]||{},k=m.extend({type:r,origType:k,data:e,handler:c,guid:c.guid,selector:d,needsContext:d&&m.expr.match.needsContext.test(d),namespace:l.join(".")},f),(p=h[r])||(p=h[r]=[],p.delegateCount=0,n.setup&&!1!==n.setup.call(a,e,l,g)||a.addEventListener&&a.addEventListener(r,
g,!1)),n.add&&(n.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),d?p.splice(p.delegateCount++,0,k):p.push(k),m.event.global[r]=!0)},remove:function(a,b,c,e,d){var f,g,n,h,q,k,p,r,l,z,s,D=C.hasData(a)&&C.get(a);if(D&&(h=D.events)){b=(b||"").match(Z)||[""];for(q=b.length;q--;)if(n=Ta.exec(b[q])||[],l=s=n[1],z=(n[2]||"").split(".").sort(),l){p=m.event.special[l]||{};l=(e?p.delegateType:p.bindType)||l;r=h[l]||[];n=n[2]&&new RegExp("(^|\\.)"+z.join("\\.(?:.*\\.|)")+"(\\.|$)");for(g=f=r.length;f--;)k=
r[f],!d&&s!==k.origType||c&&c.guid!==k.guid||n&&!n.test(k.namespace)||e&&e!==k.selector&&("**"!==e||!k.selector)||(r.splice(f,1),k.selector&&r.delegateCount--,p.remove&&p.remove.call(a,k));g&&!r.length&&(p.teardown&&!1!==p.teardown.call(a,z,D.handle)||m.removeEvent(a,l,D.handle),delete h[l])}else for(l in h)m.event.remove(a,l+b[q],c,e,!0);m.isEmptyObject(h)&&(delete D.handle,C.remove(a,"events"))}},trigger:function(a,c,e,d){var f,g,n,h,q,k,p=[e||F],r=Ga.call(a,"type")?a.type:a;k=Ga.call(a,"namespace")?
a.namespace.split("."):[];g=f=e=e||F;if(3!==e.nodeType&&8!==e.nodeType&&!Sa.test(r+m.event.triggered)&&(0<=r.indexOf(".")&&(k=r.split("."),r=k.shift(),k.sort()),h=0>r.indexOf(":")&&"on"+r,a=a[m.expando]?a:new m.Event(r,"object"===typeof a&&a),a.isTrigger=d?2:3,a.namespace=k.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=e),c=null==c?[a]:m.makeArray(c,[a]),k=m.event.special[r]||{},d||!k.trigger||!1!==k.trigger.apply(e,
c))){if(!d&&!k.noBubble&&!m.isWindow(e)){n=k.delegateType||r;Sa.test(n+r)||(g=g.parentNode);for(;g;g=g.parentNode)p.push(g),f=g;f===(e.ownerDocument||F)&&p.push(f.defaultView||f.parentWindow||b)}for(f=0;(g=p[f++])&&!a.isPropagationStopped();)a.type=1<f?n:k.bindType||r,(q=(C.get(g,"events")||{})[a.type]&&C.get(g,"handle"))&&q.apply(g,c),(q=h&&g[h])&&q.apply&&m.acceptData(g)&&(a.result=q.apply(g,c),!1===a.result&&a.preventDefault());a.type=r;d||a.isDefaultPrevented()||k._default&&!1!==k._default.apply(p.pop(),
c)||!m.acceptData(e)||!h||!m.isFunction(e[r])||m.isWindow(e)||((f=e[h])&&(e[h]=null),m.event.triggered=r,e[r](),m.event.triggered=void 0,f&&(e[h]=f));return a.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,d,f=[],g=Y.call(arguments);b=(C.get(this,"events")||{})[a.type]||[];var n=m.event.special[a.type]||{};g[0]=a;a.delegateTarget=this;if(!n.preDispatch||!1!==n.preDispatch.call(this,a)){f=m.event.handlers.call(this,a,b);for(b=0;(d=f[b++])&&!a.isPropagationStopped();)for(a.currentTarget=d.elem,
c=0;(e=d.handlers[c++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(e.namespace))a.handleObj=e,a.data=e.data,e=((m.event.special[e.origType]||{}).handle||e.handler).apply(d.elem,g),void 0!==e&&!1===(a.result=e)&&(a.preventDefault(),a.stopPropagation());n.postDispatch&&n.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var c,e,d,f,g=[],n=b.delegateCount,h=a.target;if(n&&h.nodeType&&(!a.button||"click"!==a.type))for(;h!==this;h=h.parentNode||this)if(!0!==
h.disabled||"click"!==a.type){e=[];for(c=0;c<n;c++)f=b[c],d=f.selector+" ",void 0===e[d]&&(e[d]=f.needsContext?0<=m(d,this).index(h):m.find(d,this,null,[h]).length),e[d]&&e.push(f);e.length&&g.push({elem:h,handlers:e})}n<b.length&&g.push({elem:this,handlers:b.slice(n)});return g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==
a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,d=b.button;null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||F,e=c.documentElement,c=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0));a.which||
void 0===d||(a.which=d&1?1:d&2?3:d&4?2:0);return a}},fix:function(a){if(a[m.expando])return a;var b,c,e;b=a.type;var d=a,f=this.fixHooks[b];f||(this.fixHooks[b]=f=xb.test(b)?this.mouseHooks:wb.test(b)?this.keyHooks:{});e=f.props?this.props.concat(f.props):this.props;a=new m.Event(d);for(b=e.length;b--;)c=e[b],a[c]=d[c];a.target||(a.target=F);3===a.target.nodeType&&(a.target=a.target.parentNode);return f.filter?f.filter(a,d):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==a()&&this.focus)return this.focus(),
!1},delegateType:"focusin"},blur:{trigger:function(){if(this===a()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,e){a=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});e?m.event.trigger(a,
null,b):m.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};m.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)};m.Event=function(a,b){if(!(this instanceof m.Event))return new m.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.getPreventDefault&&a.getPreventDefault()?p:s):this.type=a;b&&m.extend(this,b);this.timeStamp=a&&a.timeStamp||m.now();this[m.expando]=!0};
m.Event.prototype={isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=p;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=p;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=p;this.stopPropagation()}};m.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){m.event.special[a]=
{delegateType:b,bindType:b,handle:function(a){var c,e=a.relatedTarget,d=a.handleObj;if(!e||e!==this&&!m.contains(this,e))a.type=d.origType,c=d.handler.apply(this,arguments),a.type=b;return c}}});K.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var e=this.ownerDocument||this,d=C.access(e,b);d||e.addEventListener(a,c,!0);C.access(e,b,(d||0)+1)},teardown:function(){var e=this.ownerDocument||
this,d=C.access(e,b)-1;d?C.access(e,b,d):(e.removeEventListener(a,c,!0),C.remove(e,b))}}});m.fn.extend({on:function(a,b,c,e,d){var f,g;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],d);return this}null==c&&null==e?(e=b,c=b=void 0):null==e&&("string"===typeof b?(e=c,c=void 0):(e=c,c=b,b=void 0));if(!1===e)e=s;else if(!e)return this;1===d&&(f=e,e=function(a){m().off(a);return f.apply(this,arguments)},e.guid=f.guid||(f.guid=m.guid++));return this.each(function(){m.event.add(this,
a,e,c,b)})},one:function(a,b,c,e){return this.on(a,b,c,e,1)},off:function(a,b,c){var e;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,m(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"===typeof a){for(e in a)this.off(e,b,a[e]);return this}if(!1===b||"function"===typeof b)c=b,b=void 0;!1===c&&(c=s);return this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},
triggerHandler:function(a,b){var c=this[0];if(c)return m.event.trigger(a,b,c,!0)}});var Ua=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Va=/<([\w:]+)/,yb=/<|&#?\w+;/,zb=/<(?:script|style|link)/i,Ab=/checked\s*(?:[^=]|=\s*.checked.)/i,Wa=/^$|\/(?:java|ecma)script/i,kb=/^true\/(.*)/,Bb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,W={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,
"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};W.optgroup=W.option;W.tbody=W.tfoot=W.colgroup=W.caption=W.thead;W.th=W.td;m.extend({clone:function(a,b,c){var e,d,f,g,n=a.cloneNode(!0),h=m.contains(a.ownerDocument,a);if(!(K.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(g=y(n),f=y(a),e=0,d=f.length;e<d;e++){var q=f[e],k=g[e],p=k.nodeName.toLowerCase();if("input"===p&&Ra.test(q.type))k.checked=q.checked;else if("input"===
p||"textarea"===p)k.defaultValue=q.defaultValue}if(b)if(c)for(f=f||y(a),g=g||y(n),e=0,d=f.length;e<d;e++)D(f[e],g[e]);else D(a,n);g=y(n,"script");0<g.length&&z(g,!h&&y(a,"script"));return n},buildFragment:function(a,b,c,e){for(var d,f,g,n=b.createDocumentFragment(),h=[],q=0,k=a.length;q<k;q++)if((d=a[q])||0===d)if("object"===m.type(d))m.merge(h,d.nodeType?[d]:d);else if(yb.test(d)){f=f||n.appendChild(b.createElement("div"));g=(Va.exec(d)||["",""])[1].toLowerCase();g=W[g]||W._default;f.innerHTML=g[1]+
d.replace(Ua,"<$1></$2>")+g[2];for(g=g[0];g--;)f=f.lastChild;m.merge(h,f.childNodes);f=n.firstChild;f.textContent=""}else h.push(b.createTextNode(d));n.textContent="";for(q=0;d=h[q++];)if(!e||-1===m.inArray(d,e))if(a=m.contains(d.ownerDocument,d),f=y(n.appendChild(d),"script"),a&&z(f),c)for(g=0;d=f[g++];)Wa.test(d.type||"")&&c.push(d);return n},cleanData:function(a){for(var b,c,e,d,f,g,n=m.event.special,h=0;void 0!==(c=a[h]);h++){if(m.acceptData(c)&&(f=c[C.expando])&&(b=C.cache[f])){e=Object.keys(b.events||
{});if(e.length)for(g=0;void 0!==(d=e[g]);g++)n[d]?m.event.remove(c,d):m.removeEvent(c,d,b.handle);C.cache[f]&&delete C.cache[f]}delete Q.cache[c[Q.expando]]}}});m.fn.extend({text:function(a){return T(this,function(a){return void 0===a?m.text(this):this.empty().each(function(){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||
q(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=q(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,e=a?m.filter(a,this):
this,d=0;null!=(c=e[d]);d++)b||1!==c.nodeType||m.cleanData(y(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&z(y(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(m.cleanData(y(a,!1)),a.textContent="");return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return m.clone(this,a,b)})},html:function(a){return T(this,function(a){var b=this[0]||{},c=0,e=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;
if("string"===typeof a&&!zb.test(a)&&!W[(Va.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ua,"<$1></$2>");try{for(;c<e;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(y(b,!1)),b.innerHTML=a);b=0}catch(d){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];this.domManip(arguments,function(b){a=this.parentNode;m.cleanData(y(this));a&&a.replaceChild(b,this)});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},
domManip:function(a,b){a=V.apply([],a);var c,d,f,g,h=0,q=this.length,k=this,p=q-1,r=a[0],l=m.isFunction(r);if(l||1<q&&"string"===typeof r&&!K.checkClone&&Ab.test(r))return this.each(function(c){var e=k.eq(c);l&&(a[0]=r.call(this,c,e.html()));e.domManip(a,b)});if(q&&(c=m.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){d=m.map(y(c,"script"),e);for(f=d.length;h<q;h++)g=c,h!==p&&(g=m.clone(g,!0,!0),f&&m.merge(d,y(g,"script"))),b.call(this[h],g,h);if(f)for(c=
d[d.length-1].ownerDocument,m.map(d,n),h=0;h<f;h++)g=d[h],Wa.test(g.type||"")&&!C.access(g,"globalEval")&&m.contains(c,g)&&(g.src?m._evalUrl&&m._evalUrl(g.src):m.globalEval(g.textContent.replace(Bb,"")))}return this}});m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c=[],e=m(a),d=e.length-1,f=0;f<=d;f++)a=f===d?this:this.clone(!0),m(e[f])[b](a),wa.apply(c,a.get());return this.pushStack(c)}});
var ta,Ma={},Na=/^margin/,Ea=new RegExp("^("+Ba+")(?!px)[a-z%]+$","i"),ua=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};(function(){function a(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%";d.appendChild(f);var n=b.getComputedStyle(g,null);c="1%"!==n.top;e="4px"===n.width;d.removeChild(f)}var c,e,d=F.documentElement,f=F.createElement("div"),
g=F.createElement("div");g.style.backgroundClip="content-box";g.cloneNode(!0).style.backgroundClip="";K.clearCloneStyle="content-box"===g.style.backgroundClip;f.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";f.appendChild(g);b.getComputedStyle&&m.extend(K,{pixelPosition:function(){a();return c},boxSizingReliable:function(){null==e&&a();return e},reliableMarginRight:function(){var a;a=g.appendChild(F.createElement("div"));a.style.cssText=g.style.cssText=
"padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box";a.style.marginRight=a.style.width="0";g.style.width="1px";d.appendChild(f);a=!parseFloat(b.getComputedStyle(a,null).marginRight);d.removeChild(f);g.innerHTML="";return a}})})();m.swap=function(a,b,c,e){var d,f={};for(d in b)f[d]=a.style[d],a.style[d]=b[d];c=c.apply(a,e||[]);for(d in b)a.style[d]=f[d];return c};var Cb=/^(none|table(?!-c[ea]).+)/,lb=new RegExp("^("+Ba+")(.*)$",
"i"),Db=new RegExp("^([+-])=("+Ba+")","i"),Eb={position:"absolute",visibility:"hidden",display:"block"},Xa={letterSpacing:0,fontWeight:400},Oa=["Webkit","O","Moz","ms"];m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=t(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var d,
f,g,n=m.camelCase(b),h=a.style;b=m.cssProps[n]||(m.cssProps[n]=G(h,n));g=m.cssHooks[b]||m.cssHooks[n];if(void 0!==c)f=typeof c,"string"===f&&(d=Db.exec(c))&&(c=(d[1]+1)*d[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[n]||(c+="px"),K.clearCloneStyle||""!==c||0!==b.indexOf("background")||(h[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,e))||(h[b]="",h[b]=c));else return g&&"get"in g&&void 0!==(d=g.get(a,!1,e))?d:h[b]}},css:function(a,b,c,e){var d,f;f=m.camelCase(b);
b=m.cssProps[f]||(m.cssProps[f]=G(a.style,f));(f=m.cssHooks[b]||m.cssHooks[f])&&"get"in f&&(d=f.get(a,!0,c));void 0===d&&(d=t(a,b,e));"normal"===d&&b in Xa&&(d=Xa[b]);return""===c||c?(a=parseFloat(d),!0===c||m.isNumeric(a)?a||0:d):d}});m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,e){if(c)return 0===a.offsetWidth&&Cb.test(m.css(a,"display"))?m.swap(a,Eb,function(){return J(a,b,e)}):J(a,b,e)},set:function(a,c,e){var d=e&&ua(a);return x(a,c,e?v(a,b,e,"border-box"===m.css(a,
"boxSizing",!1,d),d):0)}}});m.cssHooks.marginRight=B(K.reliableMarginRight,function(a,b){if(b)return m.swap(a,{display:"inline-block"},t,[a,"marginRight"])});m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){var e=0,d={};for(c="string"===typeof c?c.split(" "):[c];4>e;e++)d[a+ha[e]+b]=c[e]||c[e-2]||c[0];return d}};Na.test(a)||(m.cssHooks[a+b].set=x)});m.fn.extend({css:function(a,b){return T(this,function(a,b,c){var e,d={},f=0;if(m.isArray(b)){c=ua(a);for(e=
b.length;f<e;f++)d[b[f]]=m.css(a,b[f],!1,c);return d}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,1<arguments.length)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){oa(this)?m(this).show():m(this).hide()})}});m.Tween=H;H.prototype={constructor:H,init:function(a,b,c,e,d,f){this.elem=a;this.prop=c;this.easing=d||"swing";this.options=b;this.start=this.now=this.cur();this.end=e;this.unit=
f||(m.cssNumber[c]?"":"px")},cur:function(){var a=H.propHooks[this.prop];return a&&a.get?a.get(this):H.propHooks._default.get(this)},run:function(a){var b,c=H.propHooks[this.prop];this.pos=this.options.duration?b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):H.propHooks._default.set(this);return this}};H.prototype.init.prototype=H.prototype;
H.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=m.css(a.elem,a.prop,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(m.fx.step[a.prop])m.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};m.easing={linear:function(a){return a},
swing:function(a){return.5-Math.cos(a*Math.PI)/2}};m.fx=H.prototype.init;m.fx.step={};var ja,Ca,Fb=/^(?:toggle|show|hide)$/,Ya=new RegExp("^(?:([+-])=|)("+Ba+")([a-z%]*)$","i"),Gb=/queueHooks$/,va=[function(a,b,c){var e,d,f,g,n,h=this,q={},k=a.style,p=a.nodeType&&oa(a),r=C.get(a,"fxshow");c.queue||(g=m._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,n=g.empty.fire,g.empty.fire=function(){g.unqueued||n()}),g.unqueued++,h.always(function(){h.always(function(){g.unqueued--;m.queue(a,"fx").length||
g.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[k.overflow,k.overflowX,k.overflowY],d=m.css(a,"display"),"none"===d&&(d=w(a.nodeName)),"inline"===d&&"none"===m.css(a,"float")&&(k.display="inline-block"));c.overflow&&(k.overflow="hidden",h.always(function(){k.overflow=c.overflow[0];k.overflowX=c.overflow[1];k.overflowY=c.overflow[2]}));for(e in b)if(d=b[e],Fb.exec(d)){delete b[e];f=f||"toggle"===d;if(d===(p?"hide":"show"))if("show"===d&&r&&void 0!==r[e])p=!0;else continue;
q[e]=r&&r[e]||m.style(a,e)}if(!m.isEmptyObject(q))for(e in r?"hidden"in r&&(p=r.hidden):r=C.access(a,"fxshow",{}),f&&(r.hidden=!p),p?m(a).show():h.done(function(){m(a).hide()}),h.done(function(){var b;C.remove(a,"fxshow");for(b in q)m.style(a,b,q[b])}),q)b=U(p?r[e]:0,e,h),e in r||(r[e]=b.start,p&&(b.end=b.start,b.start="width"===e||"height"===e?1:0))}],pa={"*":[function(a,b){var c=this.createTween(a,b),e=c.cur(),d=Ya.exec(b),f=d&&d[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+e)&&Ya.exec(m.css(c.elem,
a)),n=1,h=20;if(g&&g[3]!==f){f=f||g[3];d=d||[];g=+e||1;do n=n||".5",g/=n,m.style(c.elem,a,g+f);while(n!==(n=c.cur()/e)&&1!==n&&--h)}d&&(g=c.start=+g||+e||0,c.unit=f,c.end=d[1]?g+(d[1]+1)*d[2]:+d[2]);return c}]};m.Animation=m.extend(fa,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,e=0,d=a.length;e<d;e++)c=a[e],pa[c]=pa[c]||[],pa[c].unshift(b)},prefilter:function(a,b){b?va.unshift(a):va.push(a)}});m.speed=function(a,b,c){var e=a&&"object"===typeof a?m.extend({},a):{complete:c||
!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};e.duration=m.fx.off?0:"number"===typeof e.duration?e.duration:e.duration in m.fx.speeds?m.fx.speeds[e.duration]:m.fx.speeds._default;if(null==e.queue||!0===e.queue)e.queue="fx";e.old=e.complete;e.complete=function(){m.isFunction(e.old)&&e.old.call(this);e.queue&&m.dequeue(this,e.queue)};return e};m.fn.extend({fadeTo:function(a,b,c,e){return this.filter(oa).css("opacity",0).show().end().animate({opacity:b},a,c,e)},animate:function(a,
b,c,e){var d=m.isEmptyObject(a),f=m.speed(b,c,e);b=function(){var b=fa(this,m.extend({},a),f);(d||C.get(this,"finish"))&&b.stop(!0)};b.finish=b;return d||!1===f.queue?this.each(b):this.queue(f.queue,b)},stop:function(a,b,c){var e=function(a){var b=a.stop;delete a.stop;b(c)};"string"!==typeof a&&(c=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,d=null!=a&&a+"queueHooks",f=m.timers,g=C.get(this);if(d)g[d]&&g[d].stop&&e(g[d]);else for(d in g)g[d]&&g[d].stop&&Gb.test(d)&&
e(g[d]);for(d=f.length;d--;)f[d].elem!==this||null!=a&&f[d].queue!==a||(f[d].anim.stop(c),b=!1,f.splice(d,1));!b&&c||m.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,c=C.get(this),e=c[a+"queue"];b=c[a+"queueHooks"];var d=m.timers,f=e?e.length:0;c.finish=!0;m.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=d.length;b--;)d[b].elem===this&&d[b].queue===a&&(d[b].anim.stop(!0),d.splice(b,1));for(b=0;b<f;b++)e[b]&&e[b].finish&&e[b].finish.call(this);delete c.finish})}});
m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,e,d){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(N(b,!0),a,e,d)}});m.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,e){return this.animate(b,a,c,e)}});m.timers=[];m.fx.tick=function(){var a,b=0,c=m.timers;for(ja=m.now();b<c.length;b++)a=c[b],a()||c[b]!==a||
c.splice(b--,1);c.length||m.fx.stop();ja=void 0};m.fx.timer=function(a){m.timers.push(a);a()?m.fx.start():m.timers.pop()};m.fx.interval=13;m.fx.start=function(){Ca||(Ca=setInterval(m.fx.tick,m.fx.interval))};m.fx.stop=function(){clearInterval(Ca);Ca=null};m.fx.speeds={slow:600,fast:200,_default:400};m.fn.delay=function(a,b){a=m.fx?m.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var e=setTimeout(b,a);c.stop=function(){clearTimeout(e)}})};(function(){var a=F.createElement("input"),b=F.createElement("select"),
c=b.appendChild(F.createElement("option"));a.type="checkbox";K.checkOn=""!==a.value;K.optSelected=c.selected;b.disabled=!0;K.optDisabled=!c.disabled;a=F.createElement("input");a.value="t";a.type="radio";K.radioValue="t"===a.value})();var Za,ra=m.expr.attrHandle;m.fn.extend({attr:function(a,b){return T(this,m.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}});m.extend({attr:function(a,b,c){var e,d,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){if("undefined"===
typeof a.getAttribute)return m.prop(a,b,c);1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),e=m.attrHooks[b]||(m.expr.match.bool.test(b)?Za:void 0));if(void 0!==c)if(null===c)m.removeAttr(a,b);else{if(e&&"set"in e&&void 0!==(d=e.set(a,c,b)))return d;a.setAttribute(b,c+"");return c}else{if(e&&"get"in e&&null!==(d=e.get(a,b)))return d;d=m.find.attr(a,b);return null==d?void 0:d}}},removeAttr:function(a,b){var c,e,d=0,f=b&&b.match(Z);if(f&&1===a.nodeType)for(;c=f[d++];)e=m.propFix[c]||c,m.expr.match.bool.test(c)&&
(a[e]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!K.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}}});Za={set:function(a,b,c){!1===b?m.removeAttr(a,c):a.setAttribute(c,c);return c}};m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ra[b]||m.find.attr;ra[b]=function(a,b,e){var d,f;e||(f=ra[b],ra[b]=d,d=null!=c(a,b,e)?b.toLowerCase():null,ra[b]=f);return d}});var Hb=/^(?:input|select|textarea|button)$/i;
m.fn.extend({prop:function(a,b){return T(this,m.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[m.propFix[a]||a]})}});m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var e,d,f;f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){if(f=1!==f||!m.isXMLDoc(a))b=m.propFix[b]||b,d=m.propHooks[b];return void 0!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:a[b]=c:d&&"get"in d&&null!==(e=d.get(a,b))?e:a[b]}},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||
Hb.test(a.nodeName)||a.href?a.tabIndex:-1}}}});K.optSelected||(m.propHooks.selected={get:function(a){(a=a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null}});m.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){m.propFix[this.toLowerCase()]=this});var Ha=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,e,d,f;b="string"===typeof a&&a;var g=0,n=this.length;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,
b,this.className))});if(b)for(b=(a||"").match(Z)||[];g<n;g++)if(c=this[g],e=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ha," "):" ")){for(f=0;d=b[f++];)0>e.indexOf(" "+d+" ")&&(e+=d+" ");e=m.trim(e);c.className!==e&&(c.className=e)}return this},removeClass:function(a){var b,c,e,d,f;b=0===arguments.length||"string"===typeof a&&a;var g=0,n=this.length;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(Z)||[];g<
n;g++)if(c=this[g],e=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ha," "):"")){for(f=0;d=b[f++];)for(;0<=e.indexOf(" "+d+" ");)e=e.replace(" "+d+" "," ");e=a?m.trim(e):"";c.className!==e&&(c.className=e)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"===typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):m.isFunction(a)?this.each(function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,e=0,d=m(this),
f=a.match(Z)||[];b=f[e++];)d.hasClass(b)?d.removeClass(b):d.addClass(b);else if("undefined"===c||"boolean"===c)this.className&&C.set(this,"__className__",this.className),this.className=this.className||!1===a?"":C.get(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Ha," ").indexOf(a))return!0;return!1}});var Ib=/\r/g;m.fn.extend({val:function(a){var b,c,e,d=this[0];if(arguments.length)return e=
m.isFunction(a),this.each(function(c){1===this.nodeType&&(c=e?a.call(this,c,m(this).val()):a,null==c?c="":"number"===typeof c?c+="":m.isArray(c)&&(c=m.map(c,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,c,"value")||(this.value=c))});if(d){if((b=m.valHooks[d.type]||m.valHooks[d.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(d,"value")))return c;c=d.value;return"string"===typeof c?c.replace(Ib,""):null==
c?"":c}}});m.extend({valHooks:{select:{get:function(a){for(var b,c=a.options,e=a.selectedIndex,d=(a="select-one"===a.type||0>e)?null:[],f=a?e+1:c.length,g=0>e?f:a?e:0;g<f;g++)if(b=c[g],!(!b.selected&&g!==e||(K.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&m.nodeName(b.parentNode,"optgroup"))){b=m(b).val();if(a)return b;d.push(b)}return d},set:function(a,b){for(var c,e,d=a.options,f=m.makeArray(b),g=d.length;g--;)if(e=d[g],e.selected=0<=m.inArray(m(e).val(),f))c=
!0;c||(a.selectedIndex=-1);return f}}}});m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){if(m.isArray(b))return a.checked=0<=m.inArray(m(a).val(),b)}};K.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,
b){m.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,e){return this.on(b,a,c,e)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Ia=m.now(),Ja=/\?/;m.parseJSON=function(a){return JSON.parse(a+"")};m.parseXML=function(a){var b,
c;if(!a||"string"!==typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(e){b=void 0}b&&!b.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+a);return b};var da,ea,Jb=/#.*$/,$a=/([?&])_=[^&]*/,Kb=/^(.*?):[ \t]*([^\r\n]*)$/mg,Lb=/^(?:GET|HEAD)$/,Mb=/^\/\//,ab=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,bb={},Fa={},cb="*/".concat("*");try{ea=location.href}catch(Ub){ea=F.createElement("a"),ea.href="",ea=ea.href}da=ab.exec(ea.toLowerCase())||
[];m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ea,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(da[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":cb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,
"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?I(I(a,m.ajaxSettings),b):I(m.ajaxSettings,a)},ajaxPrefilter:ga(bb),ajaxTransport:ga(Fa),ajax:function(a,b){function c(a,b,g,h){var k,y,u,A;A=b;if(2!==w){w=2;n&&clearTimeout(n);e=void 0;f=h||"";v.readyState=0<a?4:0;h=200<=a&&300>a||304===a;if(g){u=p;for(var t=v,O,L,H,x,S=u.contents,B=u.dataTypes;"*"===B[0];)B.shift(),void 0===O&&(O=u.mimeType||t.getResponseHeader("Content-Type"));
if(O)for(L in S)if(S[L]&&S[L].test(O)){B.unshift(L);break}if(B[0]in g)H=B[0];else{for(L in g){if(!B[0]||u.converters[L+" "+B[0]]){H=L;break}x||(x=L)}H=H||x}H?(H!==B[0]&&B.unshift(H),u=g[H]):u=void 0}a:{g=p;O=u;L=v;H=h;var G,E,J,t={},S=g.dataTypes.slice();if(S[1])for(E in g.converters)t[E.toLowerCase()]=g.converters[E];for(x=S.shift();x;)if(g.responseFields[x]&&(L[g.responseFields[x]]=O),!J&&H&&g.dataFilter&&(O=g.dataFilter(O,g.dataType)),J=x,x=S.shift())if("*"===x)x=J;else if("*"!==J&&J!==x){E=t[J+
" "+x]||t["* "+x];if(!E)for(G in t)if(u=G.split(" "),u[1]===x&&(E=t[J+" "+u[0]]||t["* "+u[0]])){!0===E?E=t[G]:!0!==t[G]&&(x=u[0],S.unshift(u[1]));break}if(!0!==E)if(E&&g["throws"])O=E(O);else try{O=E(O)}catch(C){u={state:"parsererror",error:E?C:"No conversion from "+J+" to "+x};break a}}u={state:"success",data:O}}if(h)p.ifModified&&((A=v.getResponseHeader("Last-Modified"))&&(m.lastModified[d]=A),(A=v.getResponseHeader("etag"))&&(m.etag[d]=A)),204===a||"HEAD"===p.type?A="nocontent":304===a?A="notmodified":
(A=u.state,k=u.data,y=u.error,h=!y);else if(y=A,a||!A)A="error",0>a&&(a=0);v.status=a;v.statusText=(b||A)+"";h?z.resolveWith(r,[k,A,v]):z.rejectWith(r,[v,A,y]);v.statusCode(D);D=void 0;q&&l.trigger(h?"ajaxSuccess":"ajaxError",[v,p,h?k:y]);s.fireWith(r,[v,A]);q&&(l.trigger("ajaxComplete",[v,p]),--m.active||m.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);b=b||{};var e,d,f,g,n,h,q,k,p=m.ajaxSetup({},b),r=p.context||p,l=p.context&&(r.nodeType||r.jquery)?m(r):m.event,z=m.Deferred(),s=
m.Callbacks("once memory"),D=p.statusCode||{},y={},A={},w=0,t="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===w){if(!g)for(g={};b=Kb.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===w?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();w||(a=A[c]=A[c]||a,y[a]=b);return this},overrideMimeType:function(a){w||(p.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>w)for(b in a)D[b]=[D[b],
a[b]];else v.always(a[v.status]);return this},abort:function(a){a=a||t;e&&e.abort(a);c(0,a);return this}};z.promise(v).complete=s.add;v.success=v.done;v.error=v.fail;p.url=((a||p.url||ea)+"").replace(Jb,"").replace(Mb,da[1]+"//");p.type=b.method||b.type||p.method||p.type;p.dataTypes=m.trim(p.dataType||"*").toLowerCase().match(Z)||[""];null==p.crossDomain&&(h=ab.exec(p.url.toLowerCase()),p.crossDomain=!(!h||h[1]===da[1]&&h[2]===da[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(da[3]||("http:"===da[1]?
"80":"443"))));p.data&&p.processData&&"string"!==typeof p.data&&(p.data=m.param(p.data,p.traditional));aa(bb,p,b,v);if(2===w)return v;(q=p.global)&&0===m.active++&&m.event.trigger("ajaxStart");p.type=p.type.toUpperCase();p.hasContent=!Lb.test(p.type);d=p.url;p.hasContent||(p.data&&(d=p.url+=(Ja.test(d)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=$a.test(d)?d.replace($a,"$1_="+Ia++):d+(Ja.test(d)?"&":"?")+"_="+Ia++));p.ifModified&&(m.lastModified[d]&&v.setRequestHeader("If-Modified-Since",
m.lastModified[d]),m.etag[d]&&v.setRequestHeader("If-None-Match",m.etag[d]));(p.data&&p.hasContent&&!1!==p.contentType||b.contentType)&&v.setRequestHeader("Content-Type",p.contentType);v.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+cb+"; q=0.01":""):p.accepts["*"]);for(k in p.headers)v.setRequestHeader(k,p.headers[k]);if(p.beforeSend&&(!1===p.beforeSend.call(r,v,p)||2===w))return v.abort();t="abort";for(k in{success:1,error:1,
complete:1})v[k](p[k]);if(e=aa(Fa,p,b,v)){v.readyState=1;q&&l.trigger("ajaxSend",[v,p]);p.async&&0<p.timeout&&(n=setTimeout(function(){v.abort("timeout")},p.timeout));try{w=1,e.send(y,c)}catch(H){if(2>w)c(-1,H);else throw H;}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}});m.each(["get","post"],function(a,b){m[b]=function(a,c,e,d){m.isFunction(c)&&(d=d||e,e=c,c=void 0);return m.ajax({url:a,type:b,
dataType:d,data:c,success:e})}});m.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){m.fn[b]=function(a){return this.on(b,a)}});m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};m.fn.extend({wrapAll:function(a){var b;if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});this[0]&&(b=m(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=
this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this));return this},wrapInner:function(a){return m.isFunction(a)?this.each(function(b){m(this).wrapInner(a.call(this,b))}):this.each(function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}});
m.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight};m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Nb=/%20/g,mb=/\[\]$/,db=/\r?\n/g,Ob=/^(?:submit|button|image|reset|file)$/i,Pb=/^(?:input|select|textarea|keygen)/i;m.param=function(a,b){var c,e=[],d=function(a,b){b=m.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional);if(m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,
function(){d(this.name,this.value)});else for(c in a)R(c,a[c],b,d);return e.join("&").replace(Nb,"+")};m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Pb.test(this.nodeName)&&!Ob.test(a)&&(this.checked||!Ra.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?
m.map(c,function(a){return{name:b.name,value:a.replace(db,"\r\n")}}):{name:b.name,value:c.replace(db,"\r\n")}}).get()}});m.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Qb=0,Da={},Rb={0:200,1223:204},ia=m.ajaxSettings.xhr();if(b.ActiveXObject)m(b).on("unload",function(){for(var a in Da)Da[a]()});K.cors=!!ia&&"withCredentials"in ia;K.ajax=ia=!!ia;m.ajaxTransport(function(a){var b;if(K.cors||ia&&!a.crossDomain)return{send:function(c,e){var d,f=a.xhr(),g=++Qb;f.open(a.type,
a.url,a.async,a.username,a.password);if(a.xhrFields)for(d in a.xhrFields)f[d]=a.xhrFields[d];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(d in c)f.setRequestHeader(d,c[d]);b=function(a){return function(){b&&(delete Da[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?e(f.status,f.statusText):e(Rb[f.status]||f.status,f.statusText,"string"===typeof f.responseText?{text:f.responseText}:void 0,
f.getAllResponseHeaders()))}};f.onload=b();f.onerror=b("error");b=Da[g]=b("abort");f.send(a.hasContent&&a.data||null)},abort:function(){b&&b()}}});m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){m.globalEval(a);return a}}});m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});m.ajaxTransport("script",
function(a){if(a.crossDomain){var b,c;return{send:function(e,d){b=m("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&d("error"===a.type?404:200,a.type)});F.head.appendChild(b[0])},abort:function(){c&&c()}}}});var eb=[],Ka=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=eb.pop()||m.expando+"_"+Ia++;this[a]=!0;return a}});m.ajaxPrefilter("json jsonp",function(a,c,e){var d,f,g,n=!1!==a.jsonp&&(Ka.test(a.url)?
"url":"string"===typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ka.test(a.data)&&"data");if(n||"jsonp"===a.dataTypes[0])return d=a.jsonpCallback=m.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,n?a[n]=a[n].replace(Ka,"$1"+d):!1!==a.jsonp&&(a.url+=(Ja.test(a.url)?"&":"?")+a.jsonp+"="+d),a.converters["script json"]=function(){g||m.error(d+" was not called");return g[0]},a.dataTypes[0]="json",f=b[d],b[d]=function(){g=arguments},e.always(function(){b[d]=
f;a[d]&&(a.jsonpCallback=c.jsonpCallback,eb.push(d));g&&m.isFunction(f)&&f(g[0]);g=f=void 0}),"script"});m.parseHTML=function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||F;var e=Qa.exec(a);c=!c&&[];if(e)return[b.createElement(e[1])];e=m.buildFragment([a],b,c);c&&c.length&&m(c).remove();return m.merge([],e.childNodes)};var fb=m.fn.load;m.fn.load=function(a,b,c){if("string"!==typeof a&&fb)return fb.apply(this,arguments);var e,d,f,g=this,n=a.indexOf(" ");0<=n&&
(e=a.slice(n),a=a.slice(0,n));m.isFunction(b)?(c=b,b=void 0):b&&"object"===typeof b&&(d="POST");0<g.length&&m.ajax({url:a,type:d,dataType:"html",data:b}).done(function(a){f=arguments;g.html(e?m("<div>").append(m.parseHTML(a)).find(e):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])});return this};m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var gb=b.document.documentElement;m.offset={setOffset:function(a,b,c){var e,d,f,g=m.css(a,
"position"),n=m(a),h={};"static"===g&&(a.style.position="relative");f=n.offset();d=m.css(a,"top");e=m.css(a,"left");("absolute"===g||"fixed"===g)&&-1<(d+e).indexOf("auto")?(e=n.position(),d=e.top,e=e.left):(d=parseFloat(d)||0,e=parseFloat(e)||0);m.isFunction(b)&&(b=b.call(a,c,f));null!=b.top&&(h.top=b.top-f.top+d);null!=b.left&&(h.left=b.left-f.left+e);"using"in b?b.using.call(a,h):n.css(h)}};m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,
a,b)});var b,c;c=this[0];var e={top:0,left:0},d=c&&c.ownerDocument;if(d){b=d.documentElement;if(!m.contains(b,c))return e;"undefined"!==typeof c.getBoundingClientRect&&(e=c.getBoundingClientRect());c=qa(d);return{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}}},position:function(){if(this[0]){var a,b,c=this[0],e={top:0,left:0};"fixed"===m.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(e=a.offset()),e.top+=
m.css(a[0],"borderTopWidth",!0),e.left+=m.css(a[0],"borderLeftWidth",!0));return{top:b.top-e.top-m.css(c,"marginTop",!0),left:b.left-e.left-m.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||gb;a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position");)a=a.offsetParent;return a||gb})}});m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var e="pageYOffset"===c;m.fn[a]=function(d){return T(this,function(a,d,f){var g=qa(a);
if(void 0===f)return g?g[c]:a[d];g?g.scrollTo(e?b.pageXOffset:f,e?f:b.pageYOffset):a[d]=f},a,d,arguments.length,null)}});m.each(["top","left"],function(a,b){m.cssHooks[b]=B(K.pixelPosition,function(a,c){if(c)return c=t(a,b),Ea.test(c)?m(a).position()[b]+"px":c})});m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,e){m.fn[e]=function(e,d){var f=arguments.length&&(c||"boolean"!==typeof e),g=c||(!0===e||!0===d?"margin":"border");return T(this,
function(b,c,e){return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===e?m.css(b,c,g):m.style(b,c,e,g)},b,f?e:void 0,f,null)}})});m.fn.size=function(){return this.length};m.fn.andSelf=m.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return m});var Sb=b.jQuery,Tb=b.$;m.noConflict=function(a){b.$===m&&(b.$=Tb);a&&b.jQuery===m&&
(b.jQuery=Sb);return m};"undefined"===typeof l&&(b.jQuery=b.$=m);return m});(function(b,l){function h(c,g){var f,h;f=c.nodeName.toLowerCase();if("area"===f){f=c.parentNode;h=f.name;if(!c.href||!h||"map"!==f.nodeName.toLowerCase())return!1;f=b("img[usemap=#"+h+"]")[0];return!!f&&k(f)}return(/input|select|textarea|button|object/.test(f)?!c.disabled:"a"===f?c.href||g:g)&&k(c)}function k(c){return b.expr.filters.visible(c)&&!b(c).parents().addBack().filter(function(){return"hidden"===b.css(this,"visibility")}).length}var g=0,c=/^ui-id-\d+$/;b.ui=b.ui||{};b.extend(b.ui,{version:"1.10.4",
keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({focus:function(c){return function(g,f){return"number"===typeof g?this.each(function(){var c=this;setTimeout(function(){b(c).focus();f&&f.call(c)},g)}):c.apply(this,arguments)}}(b.fn.focus),scrollParent:function(){var c;c=
b.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.css(this,"position"))&&/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!c.length?b(document):
c},zIndex:function(c){if(c!==l)return this.css("zIndex",c);if(this.length){c=b(this[0]);for(var g;c.length&&c[0]!==document;){g=c.css("position");if("absolute"===g||"relative"===g||"fixed"===g)if(g=parseInt(c.css("zIndex"),10),!isNaN(g)&&0!==g)return g;c=c.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++g)})},removeUniqueId:function(){return this.each(function(){c.test(this.id)&&b(this).removeAttr("id")})}});b.extend(b.expr[":"],{data:b.expr.createPseudo?
b.expr.createPseudo(function(c){return function(g){return!!b.data(g,c)}}):function(c,g,f){return!!b.data(c,f[3])},focusable:function(c){return h(c,!isNaN(b.attr(c,"tabindex")))},tabbable:function(c){var g=b.attr(c,"tabindex"),f=isNaN(g);return(f||0<=g)&&h(c,!f)}});b("<a>").outerWidth(1).jquery||b.each(["Width","Height"],function(c,g){function f(a,c,d,f){b.each(h,function(){c-=parseFloat(b.css(a,"padding"+this))||0;d&&(c-=parseFloat(b.css(a,"border"+this+"Width"))||0);f&&(c-=parseFloat(b.css(a,"margin"+
this))||0)});return c}var h="Width"===g?["Left","Right"]:["Top","Bottom"],k=g.toLowerCase(),a={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+g]=function(c){return c===l?a["inner"+g].call(this):this.each(function(){b(this).css(k,f(this,c)+"px")})};b.fn["outer"+g]=function(c,e){return"number"!==typeof c?a["outer"+g].call(this,c):this.each(function(){b(this).css(k,f(this,c,!0,e)+"px")})}});b.fn.addBack||(b.fn.addBack=function(b){return this.add(null==
b?this.prevObject:this.prevObject.filter(b))});b("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(b.fn.removeData=function(c){return function(g){return arguments.length?c.call(this,b.camelCase(g)):c.call(this)}}(b.fn.removeData));b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());b.support.selectstart="onselectstart"in document.createElement("div");b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",
function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.extend(b.ui,{plugin:{add:function(c,g,f){var h;c=b.ui[c].prototype;for(h in f)c.plugins[h]=c.plugins[h]||[],c.plugins[h].push([g,f[h]])},call:function(b,c,f){var g=b.plugins[c];if(g&&b.element[0].parentNode&&11!==b.element[0].parentNode.nodeType)for(c=0;c<g.length;c++)b.options[g[c][0]]&&g[c][1].apply(b.element,f)}},hasScroll:function(c,g){if("hidden"===b(c).css("overflow"))return!1;var f=
g&&"left"===g?"scrollLeft":"scrollTop",h=!1;if(0<c[f])return!0;c[f]=1;h=0<c[f];c[f]=0;return h}})})(jQuery);
(function(b,l){var h=0,k=Array.prototype.slice,g=b.cleanData;b.cleanData=function(c){for(var d=0,h;null!=(h=c[d]);d++)try{b(h).triggerHandler("remove")}catch(f){}g(c)};b.widget=function(c,d,g){var f,h,k,a,q={},e=c.split(".")[0];c=c.split(".")[1];f=e+"-"+c;g||(g=d,d=b.Widget);b.expr[":"][f.toLowerCase()]=function(a){return!!b.data(a,f)};b[e]=b[e]||{};h=b[e][c];k=b[e][c]=function(a,b){if(!this._createWidget)return new k(a,b);arguments.length&&this._createWidget(a,b)};b.extend(k,h,{version:g.version,
_proto:b.extend({},g),_childConstructors:[]});a=new d;a.options=b.widget.extend({},a.options);b.each(g,function(a,c){b.isFunction(c)?q[a]=function(){var b=function(){return d.prototype[a].apply(this,arguments)},e=function(b){return d.prototype[a].apply(this,b)};return function(){var a=this._super,d=this._superApply,f;this._super=b;this._superApply=e;f=c.apply(this,arguments);this._super=a;this._superApply=d;return f}}():q[a]=c});k.prototype=b.widget.extend(a,{widgetEventPrefix:h?a.widgetEventPrefix||
c:c},q,{constructor:k,namespace:e,widgetName:c,widgetFullName:f});h?(b.each(h._childConstructors,function(a,c){var e=c.prototype;b.widget(e.namespace+"."+e.widgetName,k,c._proto)}),delete h._childConstructors):d._childConstructors.push(k);b.widget.bridge(c,k)};b.widget.extend=function(c){for(var d=k.call(arguments,1),g=0,f=d.length,h,s;g<f;g++)for(h in d[g])s=d[g][h],d[g].hasOwnProperty(h)&&s!==l&&(b.isPlainObject(s)?c[h]=b.isPlainObject(c[h])?b.widget.extend({},c[h],s):b.widget.extend({},s):c[h]=
s);return c};b.widget.bridge=function(c,d){var g=d.prototype.widgetFullName||c;b.fn[c]=function(f){var h="string"===typeof f,s=k.call(arguments,1),a=this;f=!h&&s.length?b.widget.extend.apply(null,[f].concat(s)):f;h?this.each(function(){var d,e=b.data(this,g);if(!e)return b.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+f+"'");if(!b.isFunction(e[f])||"_"===f.charAt(0))return b.error("no such method '"+f+"' for "+c+" widget instance");d=e[f].apply(e,s);if(d!==
e&&d!==l)return a=d&&d.jquery?a.pushStack(d.get()):d,!1}):this.each(function(){var a=b.data(this,g);a?a.option(f||{})._init():b.data(this,g,new d(f,this))});return a}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(c,d){d=b(d||this.defaultElement||this)[0];this.element=b(d);this.uuid=h++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},
this.options,this._getCreateOptions(),c);this.bindings=b();this.hoverable=b();this.focusable=b();d!==this&&(b.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(b){b.target===d&&this.destroy()}}),this.document=b(d.style?d.ownerDocument:d.document||d),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,
_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},
option:function(c,d){var g=c,f,h,k;if(0===arguments.length)return b.widget.extend({},this.options);if("string"===typeof c)if(g={},f=c.split("."),c=f.shift(),f.length){h=g[c]=b.widget.extend({},this.options[c]);for(k=0;k<f.length-1;k++)h[f[k]]=h[f[k]]||{},h=h[f[k]];c=f.pop();if(1===arguments.length)return h[c]===l?null:h[c];h[c]=d}else{if(1===arguments.length)return this.options[c]===l?null:this.options[c];g[c]=d}this._setOptions(g);return this},_setOptions:function(b){for(var d in b)this._setOption(d,
b[d]);return this},_setOption:function(b,d){this.options[b]=d;"disabled"===b&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!d).attr("aria-disabled",d),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,g){var f,h=this;"boolean"!==typeof c&&(g=d,d=c,c=!1);g?(d=f=b(d),this.bindings=this.bindings.add(d)):
(g=d,d=this.element,f=this.widget());b.each(g,function(g,a){function q(){if(c||!0!==h.options.disabled&&!b(this).hasClass("ui-state-disabled"))return("string"===typeof a?h[a]:a).apply(h,arguments)}"string"!==typeof a&&(q.guid=a.guid=a.guid||q.guid||b.guid++);var e=g.match(/^(\w+)\s*(.*)$/),n=e[1]+h.eventNamespace;(e=e[2])?f.delegate(e,n,q):d.bind(n,q)})},_off:function(b,d){d=(d||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;b.unbind(d).undelegate(d)},_delay:function(b,d){var g=
this;return setTimeout(function(){return("string"===typeof b?g[b]:b).apply(g,arguments)},d||0)},_hoverable:function(c){this.hoverable=this.hoverable.add(c);this._on(c,{mouseenter:function(c){b(c.currentTarget).addClass("ui-state-hover")},mouseleave:function(c){b(c.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(c){this.focusable=this.focusable.add(c);this._on(c,{focusin:function(c){b(c.currentTarget).addClass("ui-state-focus")},focusout:function(c){b(c.currentTarget).removeClass("ui-state-focus")}})},
_trigger:function(c,d,g){var f,h=this.options[c];g=g||{};d=b.Event(d);d.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase();d.target=this.element[0];if(c=d.originalEvent)for(f in c)f in d||(d[f]=c[f]);this.element.trigger(d,g);return!(b.isFunction(h)&&!1===h.apply(this.element[0],[d].concat(g))||d.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(c,d){b.Widget.prototype["_"+c]=function(g,f,h){"string"===typeof f&&(f={effect:f});var k,a=f?!0===f||"number"===
typeof f?d:f.effect||d:c;f=f||{};"number"===typeof f&&(f={duration:f});k=!b.isEmptyObject(f);f.complete=h;f.delay&&g.delay(f.delay);if(k&&b.effects&&b.effects.effect[a])g[c](f);else if(a!==c&&g[a])g[a](f.duration,f.easing,h);else g.queue(function(a){b(this)[c]();h&&h.call(g[0]);a()})}})})(jQuery);
(function(b,l){var h=!1;b(document).mouseup(function(){h=!1});b.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var h=this;this.element.bind("mousedown."+this.widgetName,function(b){return h._mouseDown(b)}).bind("click."+this.widgetName,function(g){if(!0===b.data(g.target,h.widgetName+".preventClickEvent"))return b.removeData(g.target,h.widgetName+".preventClickEvent"),g.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(k){if(!h){this._mouseStarted&&this._mouseUp(k);this._mouseDownEvent=k;var g=this,c=1===k.which,d="string"===typeof this.options.cancel&&k.target.nodeName?b(k.target).closest(this.options.cancel).length:!1;if(!c||d||!this._mouseCapture(k))return!0;this.mouseDelayMet=
!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){g.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(k)&&this._mouseDelayMet(k)&&(this._mouseStarted=!1!==this._mouseStart(k),!this._mouseStarted))return k.preventDefault(),!0;!0===b.data(k.target,this.widgetName+".preventClickEvent")&&b.removeData(k.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return g._mouseMove(b)};this._mouseUpDelegate=function(b){return g._mouseUp(b)};
b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);k.preventDefault();return h=!0}},_mouseMove:function(h){if(b.ui.ie&&(!document.documentMode||9>document.documentMode)&&!h.button)return this._mouseUp(h);if(this._mouseStarted)return this._mouseDrag(h),h.preventDefault();this._mouseDistanceMet(h)&&this._mouseDelayMet(h)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,h))?this._mouseDrag(h):this._mouseUp(h));
return!this._mouseStarted},_mouseUp:function(h){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,h.target===this._mouseDownEvent.target&&b.data(h.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(h));return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},
_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(b,l){function h(a,b,c){return[parseFloat(a[0])*(q.test(a[0])?b/100:1),parseFloat(a[1])*(q.test(a[1])?c/100:1)]}function k(a){var c=a[0];return 9===c.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:b.isWindow(c)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}b.ui=b.ui||{};var g,c=Math.max,d=Math.abs,r=
Math.round,f=/left|center|right/,p=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,q=/%$/,e=b.fn.position;b.position={scrollbarWidth:function(){if(g!==l)return g;var a,c,e=b("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");c=e.children()[0];b("body").append(e);a=c.offsetWidth;e.css("overflow","scroll");c=c.offsetWidth;a===c&&(c=e[0].clientWidth);e.remove();return g=a-c},getScrollInfo:function(a){var c=
a.isWindow||a.isDocument?"":a.element.css("overflow-x"),e=a.isWindow||a.isDocument?"":a.element.css("overflow-y"),c="scroll"===c||"auto"===c&&a.width<a.element[0].scrollWidth;return{width:"scroll"===e||"auto"===e&&a.height<a.element[0].scrollHeight?b.position.scrollbarWidth():0,height:c?b.position.scrollbarWidth():0}},getWithinInfo:function(a){a=b(a||window);var c=b.isWindow(a[0]);return{element:a,isWindow:c,isDocument:!!a[0]&&9===a[0].nodeType,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),
scrollTop:a.scrollTop(),width:c?a.width():a.outerWidth(),height:c?a.height():a.outerHeight()}}};b.fn.position=function(g){if(!g||!g.of)return e.apply(this,arguments);g=b.extend({},g);var q,l,y,A,w,t,B=b(g.of),G=b.position.getWithinInfo(g.within),x=b.position.getScrollInfo(G),v=(g.collision||"flip").split(" "),J={};t=k(B);B[0].preventDefault&&(g.at="left top");l=t.width;y=t.height;A=t.offset;w=b.extend({},A);b.each(["my","at"],function(){var b=(g[this]||"").split(" "),c,e;1===b.length&&(b=f.test(b[0])?
b.concat(["center"]):p.test(b[0])?["center"].concat(b):["center","center"]);b[0]=f.test(b[0])?b[0]:"center";b[1]=p.test(b[1])?b[1]:"center";c=s.exec(b[0]);e=s.exec(b[1]);J[this]=[c?c[0]:0,e?e[0]:0];g[this]=[a.exec(b[0])[0],a.exec(b[1])[0]]});1===v.length&&(v[1]=v[0]);"right"===g.at[0]?w.left+=l:"center"===g.at[0]&&(w.left+=l/2);"bottom"===g.at[1]?w.top+=y:"center"===g.at[1]&&(w.top+=y/2);q=h(J.at,l,y);w.left+=q[0];w.top+=q[1];return this.each(function(){var a,e,f=b(this),k=f.outerWidth(),p=f.outerHeight(),
s=parseInt(b.css(this,"marginLeft"),10)||0,t=parseInt(b.css(this,"marginTop"),10)||0,ga=k+s+(parseInt(b.css(this,"marginRight"),10)||0)+x.width,aa=p+t+(parseInt(b.css(this,"marginBottom"),10)||0)+x.height,I=b.extend({},w),R=h(J.my,f.outerWidth(),f.outerHeight());"right"===g.my[0]?I.left-=k:"center"===g.my[0]&&(I.left-=k/2);"bottom"===g.my[1]?I.top-=p:"center"===g.my[1]&&(I.top-=p/2);I.left+=R[0];I.top+=R[1];b.support.offsetFractions||(I.left=r(I.left),I.top=r(I.top));a={marginLeft:s,marginTop:t};
b.each(["left","top"],function(c,e){if(b.ui.position[v[c]])b.ui.position[v[c]][e](I,{targetWidth:l,targetHeight:y,elemWidth:k,elemHeight:p,collisionPosition:a,collisionWidth:ga,collisionHeight:aa,offset:[q[0]+R[0],q[1]+R[1]],my:g.my,at:g.at,within:G,elem:f})});g.using&&(e=function(a){var b=A.left-I.left,e=b+l-k,h=A.top-I.top,q=h+y-p,r={target:{element:B,left:A.left,top:A.top,width:l,height:y},element:{element:f,left:I.left,top:I.top,width:k,height:p},horizontal:0>e?"left":0<b?"right":"center",vertical:0>
q?"top":0<h?"bottom":"middle"};l<k&&d(b+e)<l&&(r.horizontal="center");y<p&&d(h+q)<y&&(r.vertical="middle");c(d(b),d(e))>c(d(h),d(q))?r.important="horizontal":r.important="vertical";g.using.call(this,a,r)});f.offset(b.extend(I,{using:e}))})};b.ui.position={fit:{left:function(a,b){var e=b.within,d=e.isWindow?e.scrollLeft:e.offset.left,f=e.width,g=a.left-b.collisionPosition.marginLeft,e=d-g,h=g+b.collisionWidth-f-d;b.collisionWidth>f?0<e&&0>=h?(d=a.left+e+b.collisionWidth-f-d,a.left+=e-d):a.left=0<h&&
0>=e?d:e>h?d+f-b.collisionWidth:d:a.left=0<e?a.left+e:0<h?a.left-h:c(a.left-g,a.left)},top:function(a,b){var e=b.within,d=e.isWindow?e.scrollTop:e.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,e=d-g,h=g+b.collisionHeight-f-d;b.collisionHeight>f?0<e&&0>=h?(d=a.top+e+b.collisionHeight-f-d,a.top+=e-d):a.top=0<h&&0>=e?d:e>h?d+f-b.collisionHeight:d:a.top=0<e?a.top+e:0<h?a.top-h:c(a.top-g,a.top)}},flip:{left:function(a,b){var c=b.within,e=c.offset.left+c.scrollLeft,f=c.width,g=c.isWindow?
c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft,c=h-g,q=h+b.collisionWidth-f-g,h="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,k="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,p=-2*b.offset[0];if(0>c){if(e=a.left+h+k+p+b.collisionWidth-f-e,0>e||e<d(c))a.left+=h+k+p}else 0<q&&(e=a.left-b.collisionPosition.marginLeft+h+k+p-g,0<e||d(e)<q)&&(a.left+=h+k+p)},top:function(a,b){var c=b.within,e=c.offset.top+c.scrollTop,f=c.height,g=c.isWindow?c.scrollTop:
c.offset.top,h=a.top-b.collisionPosition.marginTop,c=h-g,q=h+b.collisionHeight-f-g,h="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,k="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>c?(e=a.top+h+k+p+b.collisionHeight-f-e,a.top+h+k+p>c&&(0>e||e<d(c))&&(a.top+=h+k+p)):0<q&&(e=a.top-b.collisionPosition.marginTop+h+k+p-g,a.top+h+k+p>q&&(0<e||d(e)<q)&&(a.top+=h+k+p))}},flipfit:{left:function(){b.ui.position.flip.left.apply(this,arguments);b.ui.position.fit.left.apply(this,
arguments)},top:function(){b.ui.position.flip.top.apply(this,arguments);b.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,c,e,d,f=document.getElementsByTagName("body")[0];e=document.createElement("div");a=document.createElement(f?"div":"body");c={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};f&&b.extend(c,{position:"absolute",left:"-1000px",top:"-1000px"});for(d in c)a.style[d]=c[d];a.appendChild(e);c=f||document.documentElement;c.insertBefore(a,c.firstChild);
e.style.cssText="position: absolute; left: 10.7432222px;";e=b(e).offset().left;b.support.offsetFractions=10<e&&11>e;a.innerHTML="";c.removeChild(a)})()})(jQuery);
(function(b,l){function h(b){return parseInt(b,10)||0}function k(b){return!isNaN(parseInt(b,10))}b.widget("ui.resizable",b.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var g,c,d,h,f,k=this,l=this.options;this.element.addClass("ui-resizable");
b.extend(this,{_aspectRatio:!!l.aspectRatio,aspectRatio:l.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:l.helper||l.ghost||l.animate?l.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(b("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),
left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),
this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=l.handles||(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");
if(this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),g=this.handles.split(","),this.handles={},c=0;c<g.length;c++)d=b.trim(g[c]),f="ui-resizable-"+d,h=b("<div class='ui-resizable-handle "+f+"'></div>"),h.css({zIndex:l.zIndex}),"se"===d&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(h);this._renderAxis=function(a){var c,e,d;a=a||this.element;for(c in this.handles)this.handles[c].constructor===
String&&(this.handles[c]=b(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(e=b(this.handles[c],this.element),d=/sw|ne|nw|se|n|s/.test(c)?e.outerHeight():e.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),a.css(e,d),this._proportionallyResize()),b(this.handles[c])};this._renderAxis(this.element);this._handles=b(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){k.resizing||(this.className&&(h=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),k.axis=h&&h[1]?h[1]:"se")});l.autoHide&&(this._handles.hide(),b(this.element).addClass("ui-resizable-autohide").mouseenter(function(){l.disabled||(b(this).removeClass("ui-resizable-autohide"),k._handles.show())}).mouseleave(function(){l.disabled||k.resizing||(b(this).addClass("ui-resizable-autohide"),k._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();
var g,c=function(c){b(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};this.elementIsWrapper&&(c(this.element),g=this.element,this.originalElement.css({position:g.css("position"),width:g.outerWidth(),height:g.outerHeight(),top:g.css("top"),left:g.css("left")}).insertAfter(g),g.remove());this.originalElement.css("resize",this.originalResizeStyle);c(this.originalElement);
return this},_mouseCapture:function(g){var c,d,h=!1;for(c in this.handles)if(d=b(this.handles[c])[0],d===g.target||b.contains(d,g.target))h=!0;return!this.options.disabled&&h},_mouseStart:function(g){var c,d,k;k=this.options;c=this.element.position();var f=this.element;this.resizing=!0;/absolute/.test(f.css("position"))?f.css({position:"absolute",top:f.css("top"),left:f.css("left")}):f.is(".ui-draggable")&&f.css({position:"absolute",top:c.top,left:c.left});this._renderProxy();c=h(this.helper.css("left"));
d=h(this.helper.css("top"));k.containment&&(c+=b(k.containment).scrollLeft()||0,d+=b(k.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:c,top:d};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:f.width(),height:f.height()};this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()};this.originalPosition={left:c,top:d};this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-
f.height()};this.originalMousePosition={left:g.pageX,top:g.pageY};this.aspectRatio="number"===typeof k.aspectRatio?k.aspectRatio:this.originalSize.width/this.originalSize.height||1;k=b(".ui-resizable-"+this.axis).css("cursor");b("body").css("cursor","auto"===k?this.axis+"-resize":k);f.addClass("ui-resizable-resizing");this._propagate("start",g);return!0},_mouseDrag:function(g){var c,d=this.helper,h={};c=this.originalMousePosition;var f=this.position.top,k=this.position.left,l=this.size.width,a=this.size.height,
q=this._change[this.axis];if(!q)return!1;c=q.apply(this,[g,g.pageX-c.left||0,g.pageY-c.top||0]);this._updateVirtualBoundaries(g.shiftKey);if(this._aspectRatio||g.shiftKey)c=this._updateRatio(c,g);c=this._respectSize(c,g);this._updateCache(c);this._propagate("resize",g);this.position.top!==f&&(h.top=this.position.top+"px");this.position.left!==k&&(h.left=this.position.left+"px");this.size.width!==l&&(h.width=this.size.width+"px");this.size.height!==a&&(h.height=this.size.height+"px");d.css(h);!this._helper&&
this._proportionallyResizeElements.length&&this._proportionallyResize();b.isEmptyObject(h)||this._trigger("resize",g,this.ui());return!1},_mouseStop:function(g){this.resizing=!1;var c,d,h,f=this.options;this._helper&&(c=this._proportionallyResizeElements,c=(d=c.length&&/textarea/i.test(c[0].nodeName))&&b.ui.hasScroll(c[0],"left")?0:this.sizeDiff.height,d=d?0:this.sizeDiff.width,d={width:this.helper.width()-d,height:this.helper.height()-c},c=parseInt(this.element.css("left"),10)+(this.position.left-
this.originalPosition.left)||null,h=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,f.animate||this.element.css(b.extend(d,{top:h,left:c})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!f.animate&&this._proportionallyResize());b("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",g);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(b){var c,
d,h,f;f=this.options;f={minWidth:k(f.minWidth)?f.minWidth:0,maxWidth:k(f.maxWidth)?f.maxWidth:Infinity,minHeight:k(f.minHeight)?f.minHeight:0,maxHeight:k(f.maxHeight)?f.maxHeight:Infinity};if(this._aspectRatio||b)b=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,c=f.maxHeight*this.aspectRatio,h=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),d>f.minHeight&&(f.minHeight=d),c<f.maxWidth&&(f.maxWidth=c),h<f.maxHeight&&(f.maxHeight=h);this._vBoundaries=f},_updateCache:function(b){this.offset=
this.helper.offset();k(b.left)&&(this.position.left=b.left);k(b.top)&&(this.position.top=b.top);k(b.height)&&(this.size.height=b.height);k(b.width)&&(this.size.width=b.width)},_updateRatio:function(b){var c=this.position,d=this.size,h=this.axis;k(b.height)?b.width=b.height*this.aspectRatio:k(b.width)&&(b.height=b.width/this.aspectRatio);"sw"===h&&(b.left=c.left+(d.width-b.width),b.top=null);"nw"===h&&(b.top=c.top+(d.height-b.height),b.left=c.left+(d.width-b.width));return b},_respectSize:function(b){var c=
this._vBoundaries,d=this.axis,h=k(b.width)&&c.maxWidth&&c.maxWidth<b.width,f=k(b.height)&&c.maxHeight&&c.maxHeight<b.height,p=k(b.width)&&c.minWidth&&c.minWidth>b.width,l=k(b.height)&&c.minHeight&&c.minHeight>b.height,a=this.originalPosition.left+this.originalSize.width,q=this.position.top+this.size.height,e=/sw|nw|w/.test(d),d=/nw|ne|n/.test(d);p&&(b.width=c.minWidth);l&&(b.height=c.minHeight);h&&(b.width=c.maxWidth);f&&(b.height=c.maxHeight);p&&e&&(b.left=a-c.minWidth);h&&e&&(b.left=a-c.maxWidth);
l&&d&&(b.top=q-c.minHeight);f&&d&&(b.top=q-c.maxHeight);b.width||b.height||b.left||!b.top?b.width||b.height||b.top||!b.left||(b.left=null):b.top=null;return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var b,c,d,h,f,k=this.helper||this.element;for(b=0;b<this._proportionallyResizeElements.length;b++){f=this._proportionallyResizeElements[b];if(!this.borderDif)for(this.borderDif=[],d=[f.css("borderTopWidth"),f.css("borderRightWidth"),f.css("borderBottomWidth"),f.css("borderLeftWidth")],
h=[f.css("paddingTop"),f.css("paddingRight"),f.css("paddingBottom"),f.css("paddingLeft")],c=0;c<d.length;c++)this.borderDif[c]=(parseInt(d[c],10)||0)+(parseInt(h[c],10)||0);f.css({height:k.height()-this.borderDif[0]-this.borderDif[2]||0,width:k.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var g=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||b("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++g.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(b,c){return{width:this.originalSize.width+c}},w:function(b,c){return{left:this.originalPosition.left+c,width:this.originalSize.width-c}},n:function(b,c,d){return{top:this.originalPosition.top+d,height:this.originalSize.height-d}},s:function(b,c,d){return{height:this.originalSize.height+
d}},se:function(g,c,d){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[g,c,d]))},sw:function(g,c,d){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[g,c,d]))},ne:function(g,c,d){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[g,c,d]))},nw:function(g,c,d){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[g,c,d]))}},_propagate:function(g,c){b.ui.plugin.call(this,g,[c,this.ui()]);
"resize"!==g&&this._trigger(g,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});b.ui.plugin.add("resizable","animate",{stop:function(g){var c=b(this).data("ui-resizable"),d=c.options,h=c._proportionallyResizeElements,f=h.length&&/textarea/i.test(h[0].nodeName),k=f&&b.ui.hasScroll(h[0],"left")?0:c.sizeDiff.height,f=
{width:c.size.width-(f?0:c.sizeDiff.width),height:c.size.height-k},k=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(b.extend(f,l&&k?{top:l,left:k}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var a={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),
10)};h&&h.length&&b(h[0]).css({width:a.width,height:a.height});c._updateCache(a);c._propagate("resize",g)}})}});b.ui.plugin.add("resizable","containment",{start:function(){var g,c,d,k,f,p=b(this).data("ui-resizable"),l=p.element;d=p.options.containment;if(l=d instanceof b?d.get(0):/parent/.test(d)?l.parent().get(0):d)p.containerElement=b(l),/document/.test(d)||d===document?(p.containerOffset={left:0,top:0},p.containerPosition={left:0,top:0},p.parentData={element:b(document),left:0,top:0,width:b(document).width(),
height:b(document).height()||document.body.parentNode.scrollHeight}):(g=b(l),c=[],b(["Top","Right","Left","Bottom"]).each(function(a,b){c[a]=h(g.css("padding"+b))}),p.containerOffset=g.offset(),p.containerPosition=g.position(),p.containerSize={height:g.innerHeight()-c[3],width:g.innerWidth()-c[1]},d=p.containerOffset,k=p.containerSize.height,f=p.containerSize.width,f=b.ui.hasScroll(l,"left")?l.scrollWidth:f,k=b.ui.hasScroll(l)?l.scrollHeight:k,p.parentData={element:l,left:d.left,top:d.top,width:f,
height:k})},resize:function(g){var c,d,h,f,k=b(this).data("ui-resizable");c=k.options;d=k.containerOffset;h=k.position;g=k._aspectRatio||g.shiftKey;f={top:0,left:0};var l=k.containerElement;l[0]!==document&&/static/.test(l.css("position"))&&(f=d);h.left<(k._helper?d.left:0)&&(k.size.width+=k._helper?k.position.left-d.left:k.position.left-f.left,g&&(k.size.height=k.size.width/k.aspectRatio),k.position.left=c.helper?d.left:0);h.top<(k._helper?d.top:0)&&(k.size.height+=k._helper?k.position.top-d.top:
k.position.top,g&&(k.size.width=k.size.height*k.aspectRatio),k.position.top=k._helper?d.top:0);k.offset.left=k.parentData.left+k.position.left;k.offset.top=k.parentData.top+k.position.top;c=Math.abs(k.offset.left-f.left+k.sizeDiff.width);d=Math.abs((k._helper?k.offset.top-f.top:k.offset.top-d.top)+k.sizeDiff.height);h=k.containerElement.get(0)===k.element.parent().get(0);f=/relative|absolute/.test(k.containerElement.css("position"));h&&f&&(c-=Math.abs(k.parentData.left));c+k.size.width>=k.parentData.width&&
(k.size.width=k.parentData.width-c,g&&(k.size.height=k.size.width/k.aspectRatio));d+k.size.height>=k.parentData.height&&(k.size.height=k.parentData.height-d,g&&(k.size.width=k.size.height*k.aspectRatio))},stop:function(){var g=b(this).data("ui-resizable"),c=g.options,d=g.containerOffset,h=g.containerPosition,f=g.containerElement,k=b(g.helper),l=k.offset(),a=k.outerWidth()-g.sizeDiff.width,k=k.outerHeight()-g.sizeDiff.height;g._helper&&!c.animate&&/relative/.test(f.css("position"))&&b(this).css({left:l.left-
h.left-d.left,width:a,height:k});g._helper&&!c.animate&&/static/.test(f.css("position"))&&b(this).css({left:l.left-h.left-d.left,width:a,height:k})}});b.ui.plugin.add("resizable","alsoResize",{start:function(){var g=b(this).data("ui-resizable").options,c=function(c){b(c).each(function(){var c=b(this);c.data("ui-resizable-alsoresize",{width:parseInt(c.width(),10),height:parseInt(c.height(),10),left:parseInt(c.css("left"),10),top:parseInt(c.css("top"),10)})})};"object"!==typeof g.alsoResize||g.alsoResize.parentNode?
c(g.alsoResize):g.alsoResize.length?(g.alsoResize=g.alsoResize[0],c(g.alsoResize)):b.each(g.alsoResize,function(b){c(b)})},resize:function(g,c){var d=b(this).data("ui-resizable"),h=d.options,f=d.originalSize,k=d.originalPosition,l={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-k.top||0,left:d.position.left-k.left||0},a=function(a,e){b(a).each(function(){var a=b(this),d=b(this).data("ui-resizable-alsoresize"),f={},g=e&&e.length?e:a.parents(c.originalElement[0]).length?
["width","height"]:["width","height","top","left"];b.each(g,function(a,b){var c=(d[b]||0)+(l[b]||0);c&&0<=c&&(f[b]=c||null)});a.css(f)})};"object"!==typeof h.alsoResize||h.alsoResize.nodeType?a(h.alsoResize):b.each(h.alsoResize,function(b,c){a(b,c)})},stop:function(){b(this).removeData("resizable-alsoresize")}});b.ui.plugin.add("resizable","ghost",{start:function(){var g=b(this).data("ui-resizable"),c=g.options,d=g.size;g.ghost=g.originalElement.clone();g.ghost.css({opacity:.25,display:"block",position:"relative",
height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"===typeof c.ghost?c.ghost:"");g.ghost.appendTo(g.helper)},resize:function(){var g=b(this).data("ui-resizable");g.ghost&&g.ghost.css({position:"relative",height:g.size.height,width:g.size.width})},stop:function(){var g=b(this).data("ui-resizable");g.ghost&&g.helper&&g.helper.get(0).removeChild(g.ghost.get(0))}});b.ui.plugin.add("resizable","grid",{resize:function(){var g=b(this).data("ui-resizable"),
c=g.options,d=g.size,h=g.originalSize,f=g.originalPosition,k=g.axis,l="number"===typeof c.grid?[c.grid,c.grid]:c.grid,a=l[0]||1,q=l[1]||1,e=Math.round((d.width-h.width)/a)*a,d=Math.round((d.height-h.height)/q)*q,n=h.width+e,z=h.height+d,D=c.maxWidth&&c.maxWidth<n,y=c.maxHeight&&c.maxHeight<z,A=c.minWidth&&c.minWidth>n,w=c.minHeight&&c.minHeight>z;c.grid=l;A&&(n+=a);w&&(z+=q);D&&(n-=a);y&&(z-=q);/^(se|s|e)$/.test(k)?(g.size.width=n,g.size.height=z):/^(ne)$/.test(k)?(g.size.width=n,g.size.height=z,
g.position.top=f.top-d):/^(sw)$/.test(k)?(g.size.width=n,g.size.height=z,g.position.left=f.left-e):(0<z-q?(g.size.height=z,g.position.top=f.top-d):(g.size.height=q,g.position.top=f.top+h.height-q),0<n-a?(g.size.width=n,g.position.left=f.left-e):(g.size.width=a,g.position.left=f.left+h.width-a))}})})(jQuery);
(function(b,l){var h=0,k={},g={};k.height=k.paddingTop=k.paddingBottom=k.borderTopWidth=k.borderBottomWidth="hide";g.height=g.paddingTop=g.paddingBottom=g.borderTopWidth=g.borderBottomWidth="show";b.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var c=this.options;
this.prevShow=this.prevHide=b();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");c.collapsible||!1!==c.active&&null!=c.active||(c.active=0);this._processPanels();0>c.active&&(c.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():b(),content:this.active.length?this.active.next():b()}},_createIcons:function(){var c=this.options.icons;c&&(b("<span>").addClass("ui-accordion-header-icon ui-icon "+
c.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(c.header).addClass(c.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var b;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&
this.removeAttribute("id")});this._destroyIcons();b=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&b.css("height","")},_setOption:function(b,d){"active"===b?this._activate(d):("event"===b&&
(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(d)),this._super(b,d),"collapsible"!==b||d||!1!==this.options.active||this._activate(0),"icons"===b&&(this._destroyIcons(),d&&this._createIcons()),"disabled"===b&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!d))},_keydown:function(c){if(!c.altKey&&!c.ctrlKey){var d=b.ui.keyCode,g=this.headers.length,f=this.headers.index(c.target),h=!1;switch(c.keyCode){case d.RIGHT:case d.DOWN:h=this.headers[(f+
1)%g];break;case d.LEFT:case d.UP:h=this.headers[(f-1+g)%g];break;case d.SPACE:case d.ENTER:this._eventHandler(c);break;case d.HOME:h=this.headers[0];break;case d.END:h=this.headers[g-1]}h&&(b(c.target).attr("tabIndex",-1),b(h).attr("tabIndex",0),h.focus(),c.preventDefault())}},_panelKeyDown:function(c){c.keyCode===b.ui.keyCode.UP&&c.ctrlKey&&b(c.currentTarget).prev().focus()},refresh:function(){var c=this.options;this._processPanels();!1===c.active&&!0===c.collapsible||!this.headers.length?(c.active=
!1,this.active=b()):!1===c.active?this._activate(0):this.active.length&&!b.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(c.active=!1,this.active=b()):this._activate(Math.max(0,c.active-1)):c.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},
_refresh:function(){var c,d=this.options,g=d.heightStyle,f=this.element.parent(),k=this.accordionId="ui-accordion-"+(this.element.attr("id")||++h);this.active=this._findActive(d.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(c){var a=b(this),d=a.attr("id"),e=a.next(),f=e.attr("id");d||(d=k+"-header-"+c,a.attr("id",d));f||(f=k+"-panel-"+
c,e.attr("id",f));a.attr("aria-controls",f);e.attr("aria-labelledby",d)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(d.event);"fill"===g?(c=f.height(),this.element.siblings(":visible").each(function(){var d=
b(this),a=d.css("position");"absolute"!==a&&"fixed"!==a&&(c-=d.outerHeight(!0))}),this.headers.each(function(){c-=b(this).outerHeight(!0)}),this.headers.next().each(function(){b(this).height(Math.max(0,c-b(this).innerHeight()+b(this).height()))}).css("overflow","auto")):"auto"===g&&(c=0,this.headers.next().each(function(){c=Math.max(c,b(this).css("height","").height())}).height(c))},_activate:function(c){c=this._findActive(c)[0];c!==this.active[0]&&(c=c||this.active[0],this._eventHandler({target:c,
currentTarget:c,preventDefault:b.noop}))},_findActive:function(c){return"number"===typeof c?this.headers.eq(c):b()},_setupEvents:function(c){var d={keydown:"_keydown"};c&&b.each(c.split(" "),function(b,c){d[c]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,d);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(c){var d=this.options,g=this.active,f=b(c.currentTarget),h=
f[0]===g[0],k=h&&d.collapsible,a=k?b():f.next(),q=g.next(),a={oldHeader:g,oldPanel:q,newHeader:k?b():f,newPanel:a};c.preventDefault();h&&!d.collapsible||!1===this._trigger("beforeActivate",c,a)||(d.active=k?!1:this.headers.index(f),this.active=h?b():f,this._toggle(a),g.removeClass("ui-accordion-header-active ui-state-active"),d.icons&&g.children(".ui-accordion-header-icon").removeClass(d.icons.activeHeader).addClass(d.icons.header),h||(f.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),
d.icons&&f.children(".ui-accordion-header-icon").removeClass(d.icons.header).addClass(d.icons.activeHeader),f.next().addClass("ui-accordion-content-active")))},_toggle:function(c){var d=c.newPanel,g=this.prevShow.length?this.prevShow:c.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=d;this.prevHide=g;this.options.animate?this._animate(d,g,c):(g.hide(),d.show(),this._toggleComplete(c));g.attr({"aria-hidden":"true"});g.prev().attr("aria-selected","false");d.length&&g.length?g.prev().attr({tabIndex:-1,
"aria-expanded":"false"}):d.length&&this.headers.filter(function(){return 0===b(this).attr("tabIndex")}).attr("tabIndex",-1);d.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(b,d,h){var f,p,l,a=this,q=0,e=b.length&&(!d.length||b.index()<d.index()),n=this.options.animate||{},e=e&&n.down||n,z=function(){a._toggleComplete(h)};"number"===typeof e&&(l=e);"string"===typeof e&&(p=e);p=p||e.easing||n.easing;l=l||e.duration||n.duration;
if(!d.length)return b.animate(g,l,p,z);if(!b.length)return d.animate(k,l,p,z);f=b.show().outerHeight();d.animate(k,{duration:l,easing:p,step:function(a,b){b.now=Math.round(a)}});b.hide().animate(g,{duration:l,easing:p,complete:z,step:function(b,c){c.now=Math.round(b);"height"!==c.prop?q+=c.now:"content"!==a.options.heightStyle&&(c.now=Math.round(f-d.outerHeight()-q),q=0)}})},_toggleComplete:function(b){var d=b.oldPanel;d.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");
d.length&&(d.parent()[0].className=d.parent()[0].className);this._trigger("activate",null,b)}})})(jQuery);
(function(b,l){var h,k=function(){var c=b(this);setTimeout(function(){c.find(":ui-button").button("refresh")},1)},g=function(c){var d=c.name,g=c.form,f=b([]);d&&(d=d.replace(/'/g,"\\'"),f=g?b(g).find("[name='"+d+"']"):b("[name='"+d+"']",c.ownerDocument).filter(function(){return!this.form}));return f};b.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+
this.eventNamespace).bind("reset"+this.eventNamespace,k);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var c=this,d=this.options,l="checkbox"===this.type||"radio"===this.type,f=l?"":"ui-state-active";null===d.label&&(d.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);
this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){d.disabled||this===h&&b(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){d.disabled||b(this).removeClass(f)}).bind("click"+this.eventNamespace,function(b){d.disabled&&(b.preventDefault(),b.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}});
l&&this.element.bind("change"+this.eventNamespace,function(){c.refresh()});"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(d.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(d.disabled)return!1;b(this).addClass("ui-state-active");c.buttonElement.attr("aria-pressed","true");var f=c.element[0];g(f).not(f).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",
"false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(d.disabled)return!1;b(this).addClass("ui-state-active");h=this;c.document.one("mouseup",function(){h=null})}).bind("mouseup"+this.eventNamespace,function(){if(d.disabled)return!1;b(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(c){if(d.disabled)return!1;c.keyCode!==b.ui.keyCode.SPACE&&c.keyCode!==b.ui.keyCode.ENTER||b(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+
" blur"+this.eventNamespace,function(){b(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(c){c.keyCode===b.ui.keyCode.SPACE&&b(this).click()}));this._setOption("disabled",d.disabled);this._resetButton()},_determineButtonType:function(){var b,d;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?
(b=this.element.parents().last(),d="label[for='"+this.element.attr("id")+"']",this.buttonElement=b.find(d),this.buttonElement.length||(b=b.length?b.siblings():this.element.siblings(),this.buttonElement=b.filter(d),this.buttonElement.length||(this.buttonElement=b.find(d))),this.element.addClass("ui-helper-hidden-accessible"),(b=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",b)):this.buttonElement=this.element},widget:function(){return this.buttonElement},
_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-active ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(b,d){this._super(b,
d);"disabled"===b?(this.element.prop("disabled",!!d),d&&this.buttonElement.removeClass("ui-state-focus")):this._resetButton()},refresh:function(){var c=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");c!==this.options.disabled&&this._setOption("disabled",c);"radio"===this.type?g(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",
"false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var c=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
d=b("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(c.empty()).text(),g=this.options.icons,f=g.primary&&g.secondary,h=[];g.primary||g.secondary?(this.options.text&&h.push("ui-button-text-icon"+(f?"s":g.primary?"-primary":"-secondary")),g.primary&&c.prepend("<span class='ui-button-icon-primary ui-icon "+g.primary+"'></span>"),g.secondary&&c.append("<span class='ui-button-icon-secondary ui-icon "+g.secondary+"'></span>"),this.options.text||(h.push(f?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||c.attr("title",b.trim(d)))):h.push("ui-button-text-only");c.addClass(h.join(" "))}}});b.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,d){"disabled"===b&&this.buttons.button("option",b,d);this._super(b,d)},refresh:function(){var c=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(c?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(c?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);window.TOONTALK={};window.TOONTALK.creators_from_json={};window.TOONTALK.widget=function(b){var l=function(b){var k=this.get_frontside&&this.get_frontside(!0);if(k)return b&&this.rerender(),k.get_element()};b.creators_from_json.top_level=function(h){h=b.widget.create_top_level_widget();$(h.get_backside(!0).get_element()).addClass("toontalk-top-level-backside");return h};return{add_standard_widget_functionality:function(b){this.add_sides_functionality(b);this.runnable(b);this.stackable(b);this.animatable(b);this.has_title(b);this.has_parent(b);this.has_description(b);
this.has_listeners(b);this.erasable(b);b.is_of_type||(b.is_of_type=function(b){return this.get_type_name()===b});return b},erasable:function(b){var k;b.get_erased||(b.get_erased=function(){return k});b.set_erased||(b.set_erased=function(b,c){k=b;c&&this.rerender()});return b},add_sides_functionality:function(h){var k,g;h.get_frontside||(h.get_frontside=function(c){c&&!k&&(k=b.frontside.create(h));return k},h.save_dimensions=function(){var b;this.get_size_attributes?(b=this.get_size_attributes(),this.saved_width=
b.width,this.saved_height=b.height):(b=this.get_frontside_element(),this.saved_width=$(b).width(),this.saved_height=$(b).height())},h.restore_dimensions=function(){var b;0<this.saved_width&&(this.set_size_attributes?this.set_size_attributes(this.saved_width,this.saved_height):(b=this.get_frontside_element(),$(b).css({width:this.saved_width,height:this.saved_height}),this.saved_height=this.saved_width=void 0))});h.get_backside||(h.get_backside=function(b){b&&!g&&(g=h.create_backside());return g});
h.set_backside||(h.set_backside=function(b){g=b});h.forget_backside||(h.forget_backside=function(){g=void 0;this.get_backside_widgets().forEach(function(b){b.get_widget().forget_backside()})});h.create_backside||(h.create_backside=function(){return b.backside.create(h)});return h},runnable:function(b){var k=!1;b.get_running||(b.get_running=function(){return k});b.set_running||(b.set_running=function(g,c){var d=this.get_backside_widgets(),l;k=g;this.get_backside()&&this.get_backside().run_status_changed(k);
d.forEach(function(d){l=d.get_widget();d.is_backside()&&0<=this.backside_widgets.indexOf(l)||(l.is_of_type("robot")?d.is_backside()||k&&l.get_running()||(k?(l.set_stopped(!1),l.run(b,c)):l.set_stopped(!0),l.rerender()):l.set_running&&(!c&&d.is_backside()&&"top-level"!==b.get_type_name()?l.set_running(g,b):l.set_running(g)))}.bind(this));this.rerender()});return b},stackable:function(b){var k=!1;b.get_infinite_stack||(b.get_infinite_stack=function(){return k});b.set_infinite_stack||(b.set_infinite_stack=
function(g){var c=b.get_backside_element(),d=b.get_frontside_element();k=g;c&&$(c).find(".toontalk-infinite-stack-check-box").prop("checked",g);d&&(g?$(d).addClass("toontalk-infinite-stack"):$(d).removeClass("toontalk-infinite-stack"))});return b},animatable:function(h){var k;h.animate_to_widget||(k=function(g){var c=g.get_side_element();c&&$(c).is(":visible")||(c=b.UTILITIES.find_resource_equal_to_widget(g));return c},h.animate_to_widget=function(b,c,d,h,f){this.animate_to_element(k(b),c,d,h,f)});
h.animate_to_element||(h.animate_to_element=function(g,c,d,h,f){var k=$(g).offset(),l=$(this.get_frontside_element());g&&$(g).is(":visible")?(h||(h=($(g).width()-l.width())*Math.random()),f||(f=($(g).height()-l.height())*Math.random()),k?(k.left+=h,k.top+=f,b.debugging&&(0>k.left||0>k.top)&&console.log("Should this include negative values? "+k)):k={left:0,top:0},this.animate_to_absolute_position(k,c,d)):c()});h.animate_to_absolute_position||(h.animate_to_absolute_position=function(g,c,d){var h;h=
this.get_frontside_element();b.UTILITIES.animate_to_absolute_position(h,g,c,d)});return h},has_title:function(h){h.get_title||(h.get_title=function(){var h=this.get_type_name(),g=this.get_backside(),c=this.get_frontside_element(),d=this.get_description(),l;if($(c).is(".toontalk-top-level-resource"))l="Drag this "+h+" to a work area.";else if(!g||!g.get_element())l="Click to see the back side of this "+h;else if(!d)return b.UTILITIES.add_a_or_an(h,!0);d&&(d="This "+h+" "+d,l=l?d+"\n"+l:d);return l});
return h},has_parent:function(b){var k,g;b.get_parent_of_frontside=function(){return k};b.get_parent_of_backside=function(){return g};b.set_parent_of_frontside=function(b,d){k&&k.is_backside()&&k.get_widget().remove_backside_widget(this,!1,!0);k=b&&d?b.get_backside(!0):b};b.set_parent_of_backside=function(b,d,h){g&&!h&&g.is_backside()&&g.get_widget().remove_backside_widget(this,!0,!0);g=b&&d?b.get_backside(!0):b};b.closest_visible_ancestor=function(){for(var b=this;b&&!b.visible();)b=b.is_backside()?
b.get_parent_of_backside():b.get_parent_of_frontside();return b||this};b.ancestor_of_type=function(b){for(var d=this;d&&!d.is_of_type(b);)d=d.is_backside()?d.get_parent_of_backside():d.get_parent_of_frontside();return d};b.has_ancestor=function(b){for(var d=this;d;){if(b===d)return!0;d=d.is_backside()?d.get_widget().get_parent_of_backside():d.get_parent_of_frontside()}return!1};b.remove_from_parent_of_frontside=function(b){k&&(k.is_backside()?k.remove_backside_widget(this,!1):k.removed_from_container&&
k.removed_from_container(this,!1,b))};return b},has_description:function(b){var k;b.get_description||(b.get_description=function(){return k});b.set_description||(b.set_description=function(b,c){if(k===b||!k&&""===b)return!1;k=b;c&&this.rerender();return!0})},has_listeners:function(h){var k={};h.add_listener||(h.add_listener=function(b,c){var d=k[b];d?0>d.indexOf(c)&&d.push(c):k[b]=[c]});h.remove_listener||(h.remove_listener=function(g,c,d){if(g=k[g])if(c=g.indexOf(c),0<=c){g.splice(c,1);return}!d&&
b.debugging&&console.log("Listener of type "+type_name+" could not be removed.")});h.get_listeners||(h.get_listeners=function(b){return k[b]})},get_full_description:function(){var b,k;if(this.get_erased&&this.get_erased())return"erased "+this.get_type_name();b=this.get_description();k=this.toString();return b?k+" ("+b+")":k},remove:function(b){var k=this.get_backside(),g=this.get_frontside(),c=this.get_parent_of_frontside(),d=this.get_parent_of_backside();k&&(k.remove_element(),d&&(k=d.is_backside()?
d:d.get_backside(),k.removed_from_container&&k.removed_from_container(this,!0,b)));g&&(g.remove(),c&&this.remove_from_parent_of_frontside(b));this.set_running(!1)},get_frontside_element:l,get_element:l,get_backside_element:function(b){if(b=this.get_backside&&this.get_backside(b))return b.get_element()},get_side_element:function(b){return this.get_frontside().visible()?this.get_frontside_element(b):this.get_backside_element(b)},add_to_json:function(b,k){var g,c,d,l,f;if(b){b.view?(g=b.view,b=b.semantic):
g={};c={semantic:b,view:g,version:1};this.get_erased&&this.get_erased()&&(b.erased=!0);this.get_infinite_stack&&this.get_infinite_stack()&&(b.infinite_stack=!0);this.get_running&&this.get_running()&&(b.running=!0);if(!this.get_parent_of_frontside()||this.get_parent_of_frontside().is_backside())if(l=this.get_frontside_element&&this.get_frontside_element())$(l).is(".toontalk-plain-text-element")||(f=$(l).width(),0!==f&&(g.frontside_width=$(l).width(),g.frontside_height=$(l).height())),$(l).is(":visible")&&
(d=$(l).position()),d&&(g.frontside_left=d.left,g.frontside_top=d.top);if(l=this.get_backside()){if(f=l.get_element())g.backside_width=$(f).width(),g.backside_height=$(f).height(),g.backside_left||(d=$(f).position(),g.backside_left=d.left,g.backside_top=d.top,"&lt;"===$(f).find(".toontalk-settings-backside-button").html()&&(g.advanced_settings_open=!0));l.get_backside_dimensions()&&(g.backside_geometry=l.get_backside_dimensions())}!g.backside_geometry&&this.backside_geometry&&(g.backside_geometry=
this.backside_geometry);g.saved_width=this.saved_width;g.saved_height=this.saved_height;b.description=this.get_description&&this.get_description();return c}console.log("get_json not defined");return{}},add_backside_widgets_to_json:function(h,k){var g=this.get_backside_widgets(),c;0<g.length&&(h.semantic.backside_widgets=b.UTILITIES.get_json_of_array(g,k),(g=this.get_backside_widgets_json_views())&&g.forEach(function(b,g){var f;c=h.semantic.backside_widgets[g];0<=c.widget.shared_widget_index?(f=k.widgets_encountered.indexOf(k.shared_widgets[c.widget.shared_widget_index]),
f=k.json_of_widgets_encountered[f].view):f=c.widget.view;c.is_backside?b.backside_left&&(f.backside_left=b.backside_left,f.backside_top=b.backside_top):b.frontside_left&&(f.frontside_left=b.frontside_left,f.frontside_top=b.frontside_top)}))},get_backside_widgets:function(){return this.backside_widgets||[]},add_backside_widget:function(h,k){var g=this.get_backside(),c=k?h.get_backside():h;b.debugging&&h===this?b.UTILITIES.report_internal_error("Adding a widget to a list of its backside widgets!"):
(this.backside_widgets?0>this.backside_widgets.indexOf(c)&&this.backside_widgets.push(c):this.backside_widgets=[c],k?h.set_parent_of_backside(this,!0):h.set_parent_of_frontside(this,!0),c.set_visible(g.visible()),h.render())},remove_backside_widget:function(h,k,g){this.get_backside();var c=k?h.get_backside(!0):h,d;b.debugging&&!this.backside_widgets?g?console.log("remove_backside_widget called and there are no backside_widgets"):b.UTILITIES.report_internal_error("Couldn't remove a widget from backside widgets."):
(d=this.backside_widgets.indexOf(c),0>d?g?b.debugging&&console.log("Warning: Probable redundant call to remove_backside_widget"):b.UTILITIES.report_internal_error("Couldn't find a widget to remove it from backside widgets. "+c.get_widget()+" ("+c.get_widget().debug_id+")"):(this.backside_widgets.splice(d,1),this.backside_widgets_json_views&&this.backside_widgets_json_views.splice(d,1),k?(k=h.get_parent_of_backside())&&k.get_widget()===this&&h.set_parent_of_backside(void 0,!0,!0):(k=h.get_parent_of_frontside())&&
k.get_widget()===this&&h.set_parent_of_frontside(void 0),c.set_visible(!1)))},set_backside_widget_sides:function(b,k){var g=this.get_backside(),c=g&&g.visible();this.backside_widgets=b;0<b.length&&(this.get_backside()?this.get_backside().add_backside_widgets(b,k):this.backside_widgets_json_views=k,b.forEach(function(b){b.is_backside()?b.get_widget().set_parent_of_backside(this,!0):b.get_widget().set_parent_of_frontside(this,!0);b.set_visible(c)}.bind(this)))},get_backside_widgets_json_views:function(b){!this.backside_widgets_json_views&&
b&&(this.backside_widgets_json_views=[]);return this.backside_widgets_json_views},can_run:function(){var b=!1,k;this.get_backside_widgets().some(function(g){k=g.get_widget();if(k.get_body&&!k.get_body().is_empty()||k.can_run())return b=!0});return b},add_to_copy:function(h,k){var g;this.get_erased&&this.get_erased()&&(h.set_erased||b.widget.erasable(h),h.set_erased(this.get_erased()));k||(g=this.get_backside_widgets(),0<g.length&&h.set_backside_widget_sides(b.UTILITIES.copy_widget_sides(g),this.get_backside_widgets_json_views()));
return h},get_type_name:function(){return""},copy:function(){console.assert(!1,"copy not implemented")},add_copy_to_container:function(h){h||(h=this.copy());var k=this.get_frontside_element(),g=h.get_frontside_element(),c=$(k).closest(".toontalk-backside"),d=b.UTILITIES.relative_position(k,c.get(0)),l=b.UTILITIES.widget_from_jquery(c);$(g).css({width:$(k).width(),height:$(k).height(),left:d.left+30,top:d.top+30});c.append(g);l&&l.add_backside_widget(h);b.robot.in_training&&b.robot.in_training.copied(this,
h,!1);return h},visible:function(){var b=this.get_frontside();return b?b.visible():!1},set_visible:function(b){var k=this.get_frontside(b);k&&k.set_visible(b)},is_backside:function(){return!1},drag_started:function(h,k){b.robot.in_training&&b.robot.in_training.picked_up(this,h,k)},match:function(b){console.assert(!1,"match not implemented for "+b.toString())},removed:function(h){b.UTILITIES.report_internal_error("removed not implemented")},equals_box:function(){return!1},equals_number:function(){return!1},
match_box:function(){return"not matched"},match_number:function(){return"not matched"},open_backside:function(h){var k=this.get_backside(),g=!0,c=function(c,e){setTimeout(function(){$(c).addClass("toontalk-side-appearing");b.UTILITIES.add_one_shot_event_handler(c,"transitionend",2500,function(){$(c).removeClass("toontalk-side-appearing");h&&h()});$(c).css({left:s,top:a,opacity:e});this.apply_backside_geometry()}.bind(this),1)}.bind(this),d,l,f,p,s,a,q,e;if(k){d=k.get_element();if($(d).is(":visible")){b.UTILITIES.highlight_element(d,
1E3);return}if((l=this.get_parent_of_backside())&&l.is_backside()){l.get_widget().open_backside();return}}l=this.get_frontside_element();f=$(l).parent();k=$(l);if(!k.is(".toontalk-top-level-resource")){for(;0<f.length&&!f.is(".toontalk-backside");)k=f,f=f.parent(),g=!1;p=k.get(0);k=this.get_backside(!0);d=k.get_element();d.toontalk_widget=this;q=$(l).offset();(e=f.offset())||(e={left:0,top:0});$(d).css({left:q.left-e.left,top:q.top-e.top,opacity:.01});f.append(d);(f=b.UTILITIES.widget_from_jquery(f))&&
f.add_backside_widget(this,!0);g?(s=p.offsetLeft+p.offsetWidth,a=p.offsetTop):(s=q.left-e.left,a=q.top-e.top+l.offsetHeight);c(d,"inherit");k.render();this.backside_widgets&&this.backside_widgets.forEach(function(a){a.render();a.set_visible(!0)});return k}},apply_backside_geometry:function(){var h=this.get_backside(!0),k=h.get_element();this.backside_geometry&&k&&(b.backside.scale_backside($(k),this.backside_geometry.x_scale,this.backside_geometry.y_scale,this.backside_geometry.original_width,this.backside_geometry.original_height),
h.set_dimensions(this.backside_geometry))},top_level_widget:function(){var h;return this.is_of_type("top-level")?this:(h=b.UTILITIES.widget_from_jquery($(this.get_frontside_element()).closest(".toontalk-top-level-backside")))?h:this.create_top_level_widget()},create_top_level_widget:function(){var h=Object.create(b.widget);h.get_json=function(b){b=this.get_backside(!0).get_element();return{semantic:{type:"top_level"},view:{background_color:document.defaultView.getComputedStyle(b,null).getPropertyValue("background-color")}}};
h.get_type_name=function(){return"top-level"};h.is_of_type=function(b){return"top-level"===b};h.toString=function(){return"top level widget"};h.get_description=function(){};h.match=function(){return"matched"};h.update_display=function(){this.backside_widgets&&this.backside_widgets.forEach(function(b){b.visible()&&b.update_display()})};h.copy=function(){return this};h.visible=function(){return!0};h.get_parent_of_frontside=function(){};h.get_parent_of_backside=function(){};h.closest_visible_ancestor=
function(){return this};h.get_infinite_stack=function(){return!1};h=h.add_sides_functionality(h);h=h.runnable(h);h=h.has_parent(h);h.get_backside(!0).set_visible(!0);b.debugging&&(h.debug_id=b.UTILITIES.generate_unique_id(),h.debug_string="Top-level widget");return h},add_to_top_level_backside:function(h,k){var g=this.top_level_widget(),c=h.get_frontside_element(!0);g.add_backside_widget(h);g.get_backside_element().appendChild(c);h.render();k&&b.robot.in_training&&b.robot.in_training.dropped_on(h,
g);return c},backup_all:function(h){var k,g;b.no_local_storage||(k=this.top_level_widget())&&k.local_storage_key&&(g=function(){var c=b.UTILITIES.get_json_top_level(k);try{window.localStorage.setItem(k.local_storage_key,JSON.stringify(c))}catch(d){c="Failed to save state to local storage since it requires "+JSON.stringify(c).length+" bytes. Error message is "+d,b.UTILITIES.is_internet_explorer()?console.error(c):b.UTILITIES.display_message(c)}},h&&g(),setTimeout(g,100))},render:function(){b.DISPLAY_UPDATES.pending_update(this)},
rerender:function(){this.visible()&&b.DISPLAY_UPDATES.pending_update(this)},hide:function(){$(this.get_frontside_element()).hide()},close_button_ok:function(b){return"top-level"!==this.get_type_name()&&!$(b).is(".toontalk-top-level-resource")&&!$(b).closest(".toontalk-conditions-panel").is("*")},get_widget:function(){return this}}}(window.TOONTALK);window.TOONTALK.backside=function(b){return{create:function(l){var h=Object.create(this),k=document.createElement("div"),g=$(k),c=1,d=1,r=document.createElement("div"),f=document.createElement("div"),p=l.get_help_URL&&l.get_help_URL(),s,a,q,e,n,z,D,y,A,w,t=function(a){a?($(r).addClass("toontalk-green-flag-active").removeClass("toontalk-green-flag-inactive"),$(f).addClass("toontalk-stop-sign-inactive").removeClass("toontalk-stop-sign-active")):($(r).addClass("toontalk-green-flag-inactive").removeClass("toontalk-green-flag-active"),
$(f).addClass("toontalk-stop-sign-active").removeClass("toontalk-stop-sign-inactive"))},B=function(){var a=g.width();g.height();var b,c;0===a?setTimeout(B,100):(a=$(f).width(),b=(b=$(z).width())?b+14:0,$(f).css({right:b}),$(r).css({right:b+a+6}),y&&(c=$(r).width(),$(y).css({right:b+a+c+12})))};D=this.create_description_label(h,l);var G,x;l.close_button_ok(k)&&(x=function(a){h.hide_backside(a);a.stopPropagation()},G=(G=l.get_description())?"the "+l.get_type_name()+" who "+G:"the "+l.get_type_name(),
z=b.UTILITIES.create_close_button(x,"Click to hide this back side of "+G+"."),k.appendChild(z));$(r).addClass("toontalk-green-flag toontalk-green-flag-inactive").click(function(a){l.can_run()?(t(!0),l.set_running(!0)):l.is_of_type("top-level")?b.UTILITIES.display_message("There is nothing to run."):b.UTILITIES.display_message("This "+l+" has nothing to run. Add some robots on the back.")}).on("mouseenter",function(a){a=l.get_running()?"Click to stop this from running.":l.can_run()?"This has stopped. Click on the flag to start running it.":
"There is nothing to run here.";f.title=a});$(f).addClass("toontalk-stop-sign toontalk-stop-sign-active").click(function(a){t(!1);l.set_running(!1)}).on("mouseenter",function(a){a=l.get_running()?"To stop this click on the stop sign.":l.can_run()?"Click this to start this running.":"There is nothing to run on this.";r.title=a});k.appendChild(r);k.appendChild(f);p&&(y=document.createElement("div"),$(y).addClass("toontalk-help-button toontalk-widget-help-button").click(function(a){A=document.createElement("iframe");
$(A).addClass("toontalk-help-frame");A.src=p;document.body.appendChild(A);document.body.appendChild(w)}),y.innerHTML="i",y.title="Click to learn more about "+l.get_type_name()+".",w=document.createElement("div"),$(w).addClass("toontalk-close-help-frame-button").button().click(function(a){$(A).remove();$(w).remove()}),w.innerHTML="Return to ToonTalk",k.appendChild(y));D&&k.appendChild(D);setTimeout(B,1);g.addClass("toontalk-backside toontalk-side toontalk-backside-of-"+l.get_type_name());g.css({"z-index":b.UTILITIES.next_z_index()});
h.get_element=function(){return k};h.get_widget=function(){return l};h.visible=function(){return s};h.set_visible=function(a){var b=this.get_widget().get_backside_widgets();s=a;b.forEach(function(b){b.set_visible(a)})};l.get_backside||(l.get_backside=function(){return h});l.removed_from_container||(l.removed_from_container=function(a,c,e,d){b.robot.in_training||this.remove_backside_widget(a,c,d)});h.widget_dropped_on_me=function(a,c,e,d,f){var h=this.get_widget(),n,q;c?(n=a.get_backside(!0),q=n.get_element(),
n.rerender()):(n=a.get_frontside(!0),q=n.get_element(),a.rerender());n=$(q);g.append(n);this.is_of_type("top-level")?d&&!d.visible()&&n.addClass("toontalk-widget-added-to-backside-by-unwatched-robot"):e||a.animate_to_element(k);b.UTILITIES.set_position_is_absolute(q,!0,e);b.robot.in_training&&!f&&b.robot.in_training.dropped_on(a,this.get_widget());c&&"top-level"!=this.get_widget().get_type_name()&&(d=a.get_backside(),a.forget_backside(),a.remove(e),a.set_backside(d));h.add_backside_widget(a,c);a.dropped_on_other&&
a.dropped_on_other(this.get_widget(),!0,e);a.get_body&&a.get_body().is_empty()&&(d=a.open_backside())&&$(d.get_element()).find(".toontalk-train-backside-button").click();e&&a.get_widget().backup_all();return!0};h.add_backside_widgets=function(a,b){0!==a.length&&setTimeout(function(){var c,e,d=this.visible();a.forEach(function(a,f){var h=a.get_widget().get_backside();c=a.get_element(!0);c.toontalk_widget=a.get_widget();b&&(e=b[f])&&(a.is_backside()?($(c).css({left:e.backside_left,top:e.backside_top,
width:e.backside_width,height:e.backside_height}),a.get_widget().apply_backside_geometry(),e.advanced_settings_open&&h.set_advanced_settings_showing(!0,h.get_element())):(0===e.frontside_width&&(e.frontside_width=""),0===e.frontside_height&&(e.frontside_height=""),$(c).css({left:e.frontside_left,top:e.frontside_top,width:e.frontside_width,height:e.frontside_height})));g.append(c);a.set_visible(d);a.get_widget().rerender()})}.bind(this),1)};h.get_backside_dimensions=function(){if(c)return{x_scale:c,
y_scale:d,original_width:a,original_height:q}};h.set_dimensions=function(b){c=b.x_scale;d=b.y_scale;a=b.original_width;q=b.original_height};h.scale_to_fit=function(e,f){var g;!a&&this.get_widget().backside_geometry&&(a=this.get_widget().backside_geometry.original_width,q=this.get_widget().backside_geometry.original_height);g=b.UTILITIES.scale_to_fit(e,f,a,q);c=g.x_scale;d=g.y_scale};h.run_status_changed=function(a){t(a)};k.toontalk_widget=l;b.UTILITIES.drag_and_drop(k);g.resizable({start:function(){e=
g.width();n=g.height();a||(a=e);q||(q=n)},resize:function(f,h){var k=h.size.width,l=h.size.height;g.is(".toontalk-top-level-backside")||(c*=k/e,d*=l/n,e=k,n=l,b.backside.scale_backside(g,c,d,a,q))},handles:"e,s,se"});k.addEventListener("mouseenter",function(a){var c=l.get_frontside(),e=l.get_parent_of_backside();!c||e&&!e.get_widget().is_of_type("top-level")||b.UTILITIES.highlight_element(c.get_element(),a)});k.addEventListener("mouseout",function(a){l.get_frontside()&&b.UTILITIES.remove_highlight()});
h.update_display=function(){h.display_updated()};h.display_updated=function(){var b=$(this.get_element());a||(a=b.width());q||(q=b.height())};l.get_backside_widgets&&(D=l.get_backside_widgets(),h.add_backside_widgets(D,l.get_backside_widgets_json_views()));b.debugging&&(k.id=l.debug_id);return h},toString:function(){return"backside of "+this.get_widget()},remove_element:function(){$(this.get_element()).remove()},create_infinite_stack_check_box:function(l,h){var k=b.UTILITIES.create_check_box(h.get_infinite_stack(),
"toontalk-infinite-stack-check-box","Copy when dragged.","Check this if you want the "+h.get_type_name()+" to be copied instead of moved.");$(k.button).click(function(g){var c=k.button.checked;h.set_infinite_stack(c);b.robot.in_training&&b.robot.in_training.edited(h,{setter_name:"set_infinite_stack",argument_1:c,toString:c?"change dragging to make a copy of ":"change dragging back to moving for ",button_selector:".toontalk-infinite-stack-check-box"});g.stopPropagation()});return k},create_description_label:function(l,
h){var k=h.get_description();if(k)return b.UTILITIES.create_text_element("Back side of a "+h.get_type_name()+" that "+k)},add_advanced_settings:function(l){var h=this.get_widget(),k=this.create_infinite_stack_check_box(this,h),g=h.get_type_name(),c=b.UTILITIES.create_text_area(h.get_description(),"toontalk-description-input","This&nbsp;"+g+"&nbsp;","Type here to provide additional information about this "+g+"."),d=$("<button>Make a sensor</button>").button(),r=function(){var d=c.button.value.trim();
h.set_description(d,!0)&&b.robot.in_training&&b.robot.in_training.edited(h,{setter_name:"set_description",argument_1:d,toString:"change the description to '"+d+"'' of the "+g,button_selector:".toontalk-description-input"})},f=document.createElement("table"),p=this.get_element();$(f).addClass("toontalk-advanced-setting");$(c.button).val(h.get_description());c.button.addEventListener("change",r);c.button.addEventListener("mouseout",r);d.click(function(c){c=b.sensor.create("click","which",void 0,void 0,
!0,h);var a=c.get_frontside_element(!0),f=d.offset();h.add_to_top_level_backside(c,!0);f.left-=120;b.UTILITIES.set_absolute_position($(a),f)});d.attr("title","Click to create a nest which receives messages when events happen to this "+h.get_type_name()+".");f.appendChild(b.UTILITIES.create_row(c.container));f.appendChild(b.UTILITIES.create_row(d.get(0),k.container));p.appendChild(f);l?$(p).find(".toontalk-settings-backside-button").remove():$(p).find(".toontalk-advanced-setting").hide()},get_type_name:function(){return"the backside of "+
b.UTILITIES.add_a_or_an(this.get_widget().get_type_name())},hide_backside:function(l){var h=this.get_widget(),k=h.get_frontside_element(),g=$(h.get_backside_element()),c=g.position(),d=g.parent().closest(".toontalk-backside"),r=h.get_parent_of_backside();b.UTILITIES.remove_highlight();r&&(r.is_backside()?h.set_parent_of_backside(void 0,!0):r.removed_from_container(h,!0,l,!0),h.forget_backside&&h.forget_backside());(function(){var b=h.get_backside_widgets(),c=h.get_backside_widgets_json_views(!0),
d;b.forEach(function(a,b){var e;if(d=a.get_widget().get_element())c[b]||(c[b]={}),a.start_position?(e=a.start_position,a.start_position=void 0):e=$(d).position(),a.is_backside()?(c[b].backside_left=e.left,c[b].backside_top=e.top):(c[b].frontside_left=e.left,c[b].frontside_top=e.top)})})();h.backside_geometry=this.get_backside_dimensions();(function(c){var g=$(k).offset(),h=d.position(),a=function(){c.remove()};c.is(":visible")&&(c.addClass("toontalk-side-appearing"),b.UTILITIES.add_one_shot_event_handler(c.get(0),
"transitionend",2500,a),h||(h={left:0,top:0}),c.css({left:g.left-h.left,top:g.top-h.top,opacity:.1}))})(g);$(k).is(":visible")||(c&&$(k).css({left:c.left,top:c.top}),b.UTILITIES.widget_from_jquery(d).add_backside_widget(h),d.append(k),h.render());h.backside_widgets&&h.backside_widgets.forEach(function(b){b.set_visible(!1)})},create_advanced_settings_button:function(l,h){var k=document.createElement("div"),g=$(k),c=!1;k.innerHTML="&gt;";g.addClass("toontalk-settings-backside-button");g.css({"z-index":b.UTILITIES.next_z_index()});
g.click(function(b){c=!c;this.set_advanced_settings_showing(c,l.get_element(),g);b.stopPropagation()}.bind(this));g.attr("title","Click to see the advanced settings of this "+h.get_type_name()+".");return g.get(0)},set_advanced_settings_showing:function(b,h,k){k||(k=$(h).find(".toontalk-settings-backside-button"));b?($(h).find(".toontalk-advanced-setting").show(),k.html("<"),k.attr("title","Click to hide the advanced settings.")):($(h).find(".toontalk-advanced-setting").hide(),k.html(">"),k.attr("title",
"Click to show the advanced settings."))},get_widgets:function(){var b=[];$(this.get_element()).children().each(function(h,k){var g=k.toontalk_widget;g&&0>b.indexOf(g)&&b.push(g)});return b},scale_backside:function(b,h,k,g,c){var d=Math.min(1,h,k);1===h&&1===k?b.css({width:"",height:""}):b.css({transform:"scale("+d+", "+d+")","transform-origin":"top left",width:g*h/d,height:c*k/d})},render:function(){b.DISPLAY_UPDATES.pending_update(this)},rerender:function(){this.visible()&&b.DISPLAY_UPDATES.pending_update(this)},
remove_backside_widget:function(b,h,k){return this.get_widget().remove_backside_widget(b,h,k)},remove:function(){this.get_widget().remove()},is_backside:function(){return!0},is_of_type:function(b){return this.get_widget().is_of_type(b)}}}(window.TOONTALK);window.TOONTALK.frontside=function(b){return{create:function(l){var h=Object.create(this),k=document.createElement("div"),g=$(k),c;$(k).addClass("toontalk-frontside toontalk-side");k.toontalk_widget=l;b.UTILITIES.drag_and_drop(k);h.get_element=function(){return k};h.get_widget=function(){return l};h.visible=function(){return c};h.set_visible=function(b){var g=this.get_widget();c=b;g.walk_children&&g.walk_children(function(c){c.set_visible(b);return!0})};k.addEventListener("click",function(c){$(c.target).is(".ui-resizable-handle")||
1!==c.which||(g.is(".toontalk-top-level-resource")?l.set_running(!l.get_running()):l.get_running()?b.debugging&&console.log("Ignoring click on running widget."):l.open_backside(),c.stopPropagation())});k.addEventListener("mouseenter",function(c){(c=l.get_backside())&&b.UTILITIES.highlight_element(c.get_element())});k.addEventListener("mouseout",function(c){l.get_backside()&&b.UTILITIES.remove_highlight()});b.debugging&&(k.id=l.debug_id);return h},update_display:function(){return this.get_widget().update_display()},
remove:function(){b.debugging&&0===$(this.get_element()).parent().length&&(console.log("Removing something that has already been removed."),console.log("Widget is "+this.get_widget()));$(this.get_element()).remove()}}}(window.TOONTALK);window.TOONTALK.number=function(b){var l=Object.create(b.widget),h=function(a,b,c,d){var f="",g=100;c=50/c;b/=1+b;if(d)for(d=0;g>=c&&d<a.length;)f=f+"<span class='toontalk-digit' style='font-size:"+g+"%'>"+a[d]+"</span>",d+=1,"-"!==a[d]&&(g*=b);else for(d=a.length-1;g>=c&&0<d;)f="<span class='toontalk-digit' style='font-size:"+g+"%'>"+a[d]+"</span>"+f,d-=1,"-"!==a[d]&&(g*=b);return f},k=function(a,b){var c=a/(1+a);return Math.ceil(Math.log(.5/b)/Math.log(c))},g=function(a,b,c){if(a.length<=Math.round(b))return'<span class="toontalk-digit" style="font-size:100%">'+
a+"</span>";if(1>b)return"";if(5>b)return"<span style='font-size: 80%'>"+g(a,1.25*b,.8*c)+"</span>";b=b/2-1;return h(a,b,c,!0)+h(a,b,c,!1)},c=function(a,b,c){var f="",g=new BigInteger(10),h=a.isNegative();for(h&&(a=a.abs());c>f.length;)if(a=a.multiply(g),0>a.compare(b))f+="0";else if(f+=a.divide(b).toString(),a=a.remainder(b).multiply(g),a.isZero())return h&&(f="-"+f),f=d(f);h&&(f="-"+f);return f},d=function(a){return 0<a.length&&"0"===a.charAt(a.length-1)?d(a.substring(0,a.length-1)):a},r=function(a,
b){var c=Math.min(b,a/2);return a-(c+1)},f=function(a,b){b||(b=1);if(!("number"!==typeof a&&"string"!==typeof a||"number"!==typeof b&&"string"!==typeof b))return bigrat.fromValues(a,b);var c=bigrat.create();1===b?bigrat.set(c,bigrat.toBigInteger(a.get_value()),BigInteger.ONE):a.get_value&&b.get_value?bigrat.set(c,bigrat.toBigInteger(a.get_value()),bigrat.toBigInteger(b.get_value())):bigrat.set(c,a,b);return c},p=function(a){switch(a){case "+":return"";case "-":return"&minus;";case "*":return"&times;";
case "/":return"&divide;";case "^":return"^";default:return b.UTILITIES.report_internal_error("Number has an unsupported operator: "+a),""}},s=bigrat.fromInteger(10);l.create=function(a,c,e,d,g){var h=Object.create(l),k=f(a,c);d||(d="improper_fraction");e||(e="+");h.set_value=function(a){var c=this.get_listeners("value_changed");c&&c.forEach(function(b){b({type:"value_changed",old_value:k,new_value:a})});k=a;this.rerender();b.debugging&&(this.debug_string=this.toString());return this};h.get_value=
function(){return k};h.set_format=function(a,b){d=a;b&&this.rerender();return this};h.get_operator=function(){return e};h.set_operator=function(a,b){e=a;b&&this.rerender();return this};h.get_format=function(){return d};h=l.add_standard_widget_functionality(h);h.set_description(g);b.debugging&&(h.debug_string=h.toString(),h.debug_id=b.UTILITIES.generate_unique_id());return h};l.create_backside=function(){return b.number_backside.create(this)};l.set_from_values=function(a,b){return this.set_value(f(a,
b))};l.ONE=function(){return this.create(1)};l.ZERO=function(){return this.create(0)};l.copy=function(a){return this.add_to_copy(l.create(this.get_value()[0],this.get_value()[1],this.get_operator(),this.get_format(),this.get_description()),a)};l.is_number=function(){return!0};l.equals=function(a){return a.equals_number&&a.equals_number(this)};l.equals_number=function(a){return bigrat.equals(this.get_value(),a.get_value())};l.compare_with=function(a){if(a.compare_with_number)return-1*a.compare_with_number(this)};
l.compare_with_number=function(a){return bigrat.equals(this.get_value(),a.get_value())?0:bigrat.isGreaterThan(this.get_value(),a.get_value())?1:-1};l.update_display=function(){var a,c,e,d,f;a=this.get_frontside(!0).get_element();$(a).is(".toontalk-conditions-contents")?c=$(a):$(a).parent().is(".toontalk-backside, .toontalk-json")?(c=$(a),f=!0):c=$(a).parent().is(".toontalk-scale-half")?$(a):$(a).parent();if($(a).is(".toontalk-carried-by-bird"))e=100,d=40;else{if(!c.is(":visible"))return;e=c.width();
d=c.height();if(0===e||0===d)return;c.is(".toontalk-nest")&&(e*=.8,d*=.8)}$(a).removeClass("toontalk-number-eighth-size-border toontalk-number-quarter-size-border toontalk-number-half-size-border toontalk-number-full-size-border");32>=e||32>=d?($(a).addClass("toontalk-number-eighth-size-border"),a.toontalk_border_size=4):64>=e||64>=d?($(a).addClass("toontalk-number-quarter-size-border"),a.toontalk_border_size=8):128>=e||128>=d?($(a).addClass("toontalk-number-half-size-border"),a.toontalk_border_size=
16):($(a).addClass("toontalk-number-full-size-border"),a.toontalk_border_size=32);c=d-2*a.toontalk_border_size;f=this.to_HTML(e/(.64*c),c,this.get_format(),!0,this.get_operator(),f);b.UTILITIES.on_a_nest_in_a_box(a)&&(e="width:"+e+"px;",c=f.indexOf('style="'),f=0<=c?f.substring(0,c+7)+e+f.substring(c+7):f);e=$(a).children(".toontalk-widget");e.is("*")?e=e.get(0):(e=document.createElement("div"),a.appendChild(e));e.innerHTML=f;$(e).addClass("toontalk-widget");a.title=this.get_title();(a=this.get_backside())&&
a.rerender()};l.to_HTML=function(a,b,e,d,f,l){var y,A,w,t,B,G,x=!1!==d?" toontalk-top-level-number":"";l&&(x+=" toontalk-number-size-unconstrained-by-container");A=f?p(f):"";a||(a=4);b||(b=16);if(this.get_erased&&this.get_erased())return'<div class="toontalk-number toontalk-integer'+x+'" style="font-size: '+b+'px;"></div>';0<A.length&&(a-=1,2>a&&(b*=Math.max(1,a)/2,a=2));if(this.is_integer()&&"scientific_notation"!==e)return y=bigrat.toBigInteger(this.get_value()).toString(),w=y.length,0<A.length&&
w++,4>a&&w>a&&(w=Math.min(4,w),b*=a/w,a=w),'<div class="toontalk-number toontalk-integer'+x+'" style="font-size: '+b+'px;">'+A+g(y,a,b)+"</div>";y=' style="font-size:'+.4*b+'px;"';if("improper_fraction"===e||!e)return b='<table class="toontalk-number toontalk-improper-fraction'+x+'"'+y+'><tr class="toontalk-numerator"><td align="center" class="toontalk-number">'+g(this.numerator_string(),2*a,b)+'</td></tr><tr class="toontalk-fraction-line-as-row"><td  class="toontalk-fraction-line-as-table-entry"><div class="toontalk-fraction-line"></div></tr><tr class="toontalk-denominator"><td align="center" class="toontalk-number">'+
g(this.denominator_string(),2*a,b)+"</td></tr></table>",""===A?b:"<table class='toontalk-operator-and-fraction'"+y+"><tr><td>"+A+"</td><td>"+b+"</td></tr></table>";if("mixed_number"===e||"proper_fraction"===e){A=this.integer_part();if(A.is_zero())return this.to_HTML(a,b,"improper_fraction",d,f);w=this.copy().subtract(A).absolute_value();return'<table class="toontalk-number toontalk-mixed-number'+x+'"'+y+'><tr><td class="toontalk-number toontalk-integer-part-of-mixed-number">'+A.to_HTML(a/2,b,"",!1,
this.get_operator())+'</td><td class="toontalk-number toontalk-fraction-part-of-mixed-number">'+w.to_HTML(a/2,b,"improper_fraction",!1)+"</td></tr></table>"}if("decimal"===e)return 4>a&&(b*=Math.max(1,a)/4,a=4),'<div class="toontalk-number toontalk-decimal'+x+'" style="font-size: '+b+'px;">'+A+this.decimal_string(a,b)+"</div>";if("scientific_notation"===e){w=bigrat.isNegative(this.get_value());t=this.get_value();B=bigrat.abs(bigrat.create(),t);t=bigrat.isLessThan(B,bigrat.ONE);B=(t?bigrat.toBigInteger(bigrat.divide(bigrat.create(),
bigrat.ONE,B)):bigrat.toBigInteger(B)).toString();t=t?-B.length:B.length-1;B=bigrat.power(bigrat.create(),s,t);G=bigrat.divide(bigrat.create(),this.get_value(),B);B=6+(0===t?1:Math.ceil(Math.log10(Math.abs(t)))/2);w&&B++;if(a<B+1)return this.to_HTML(B+1,b*a/(B+1),e,d,f,l);d=k(r(a,B),b);d=c(G[0],G[1],d);w?(w=d.substring(0,2),d=d.substring(2)):(w=d.substring(0,1),d=d.substring(1));a=h(d,a*(1-B/a),b,!0);0<a.length&&(a="<span class='toontalk-decimal-point'>.</span>"+a);return'<table class="toontalk-number toontalk-scientific_notation'+
x+'"'+y+'><tr><td class="toontalk-number toontalk-significand-of-scientific-notation"><div class="toontalk-number toontalk-decimal'+x+'" style="font-size: '+b+'px;">'+A+w+a+'</td><td class="toontalk-number toontalk-exponent-of-scientific-notation"><div style="font-size: '+b+'px;"> &times;10<sup style="font-size: '+b/2+'px;">'+t+"</sup></div></td></tr></table>"}};l.drop_on=function(a,b,c,d){if(a.number_dropped_on_me)return a.number_dropped_on_me(this,b,c,d),!0;if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,
b,c,d);console.log("No handler for drop of '"+this+"' on '"+a+"'")};l.number_dropped_on_me=function(a,c,e,d){var f,g,h,k;return a.visible()&&(e||d&&d.visible())?(d&&(a.robot_waiting_before_next_step=d),f=document.createElement("div"),$(f).addClass("toontalk-bammer-down"),g=$(this.get_frontside_element()).closest(".toontalk-top-level-backside"),f.style.left="-10px",f.style.top=g.height()+"px",g.append(f),c=this.get_frontside_element(),h=$(c).offset(),h.left-=.75*$(f).width(),h.left+=.5*$(c).width()+
.1*$(f).width(),h.top-=.5*$(c).height()+.4*$(f).height(),c=function(){this.number_dropped_on_me_semantics(a,e,d)&&d&&d.run_next_step();$(f).removeClass("toontalk-bammer-down");setTimeout(function(){var a=g.offset();$(f).addClass("toontalk-bammer-away");h.left=a.left+g.width()-100;h.top=a.top+g.height()+100;k=function(){$(f).remove()};b.UTILITIES.animate_to_absolute_position(f,h,k);$(f).css({opacity:.01})},1)}.bind(this),b.UTILITIES.animate_to_absolute_position(f,h,c),$(f).css({opacity:1,"z-index":b.UTILITIES.next_z_index()+
100}),this):this.number_dropped_on_me_semantics(a,e,d)};l.number_dropped_on_me_semantics=function(a,c,e){b.robot.in_training&&b.robot.in_training.dropped_on(a,this);a.remove();switch(a.get_operator()){case "+":return this.add(a);case "-":return this.subtract(a);case "*":return this.multiply(a);case "/":return this.divide(a);case "^":return this.power(a);default:b.UTILITIES.report_internal_error("Number received a number with unsupported operator: "+a.get_operator())}};l.widget_dropped_on_me=function(a,
b,c,d){return a.number_dropped_on_me?this.number_dropped_on_me(a,b,c,d):!1};l.add=function(a){this.set_value(bigrat.add(bigrat.create(),this.get_value(),a.get_value()));return this};l.subtract=function(a){this.set_value(bigrat.subtract(bigrat.create(),this.get_value(),a.get_value()));return this};l.multiply=function(a){this.set_value(bigrat.multiply(bigrat.create(),this.get_value(),a.get_value()));return this};l.divide=function(a){this.set_value(bigrat.divide(bigrat.create(),this.get_value(),a.get_value()));
return this};l.power=function(a){this.set_value(bigrat.power(bigrat.create(),this.get_value(),bigrat.toInteger(a.get_value())));return this};l.absolute_value=function(){this.set_value(bigrat.abs(bigrat.create(),this.get_value()));return this};l.is_zero=function(){return bigrat.equals(this.get_value(),bigrat.ZERO)};l.is_negative=function(){return bigrat.isNegative(this.get_value())};l.toString=function(){return("+"===this.get_operator()?"":this.get_operator())+bigrat.str(this.get_value())};l.to_float=
function(){return bigrat.toDecimal(this.get_value())};l.get_type_name=function(){return"number"};l.get_help_URL=function(){return"docs/manual/numbers.html"};l.get_json=function(){return{type:"number",operator:this.get_operator(),numerator:this.numerator_string(),denominator:this.denominator_string(),format:this.get_format()}};b.creators_from_json.number=function(a){return l.create(a.numerator,a.denominator,a.operator,a.format,a.description)};l.is_integer=function(){return 0===this.get_value()[1].compare(BigInteger.ONE)||
0===this.get_value()[0].compare(BigInteger.ZERO)};l.numerator=function(){var a=bigrat.create();return bigrat.set(a,this.get_value()[0],BigInteger.ONE)};l.denominator=function(){var a=bigrat.create();return bigrat.set(a,this.get_value()[1],BigInteger.ONE)};l.numerator_string=function(){return this.get_value()[0].toString()};l.denominator_string=function(){return this.get_value()[1].toString()};l.integer_part=function(){return this.create(this)};l.decimal_string=function(a,b){if(this.is_integer())return this.numerator_string();
var e=this.copy(),d=e.integer_part(),f=d.toString();"0"===f&&this.is_negative()&&(f="-"+f);var l=e.subtract(d),d=r(a,f.length),p=k(d,b),e=Math.min(f.length,a/2),l=l.absolute_value(),p=c(l.get_value()[0],l.get_value()[1],p),d=p.length<a?p:h(p,d,b,!0);return g(f,e,b)+"<span class='toontalk-decimal-point'>.</span>"+d};l.match=function(a){return this.get_erased&&this.get_erased()?a.match_with_any_number?a.match_with_any_number():"not matched":a.match_with_this_number?a.match_with_this_number(this):"not matched"};
l.match_with_any_number=function(){return"matched"};l.match_with_this_number=function(a){return a.equals(this)?"matched":"not matched"};return l}(window.TOONTALK);
window.TOONTALK.number_backside=function(b){return{create:function(l){var h=b.backside.create(l),k=h.get_element(),g=document.createElement("div"),c=l.numerator_string(),d=l.denominator_string(),r=b.UTILITIES.create_text_area(c,"toontalk-numerator-input","","Type here to edit the numerator"),f=b.UTILITIES.create_text_area(d,"toontalk-denominator-input","","Type here to edit the denominator"),p=b.UTILITIES.create_radio_button("number_format","decimal","toontalk-decimal-radio-button","Decimal number",
"Display number as a decimal."),s=b.UTILITIES.create_radio_button("number_format","proper_fraction","toontalk-proper-fraction-radio-button","Mixed number","Display number as an integer part and a proper fraction."),a=b.UTILITIES.create_radio_button("number_format","improper_fraction","toontalk-improper-fraction-radio-button","Improper fraction","Display number as a simple fraction."),q=b.UTILITIES.create_radio_button("number_format","scientific_notation","toontalk-scientific-notation-radio-button",
"Scientific notation","Display number as a decimal between 1 and 10 multiplied by ten to some power."),e=b.UTILITIES.create_radio_button("operator","+","toontalk-plus-radio-button","+","Add me to what I'm dropped on."),n=b.UTILITIES.create_radio_button("operator","-","toontalk-minus-radio-button","&minus;","Subtract me from what I'm dropped on."),z=b.UTILITIES.create_radio_button("operator","*","toontalk-times-radio-button","&times;","Multiply me with what I'm dropped on."),D=b.UTILITIES.create_radio_button("operator",
"/","toontalk-dividie-radio-button","&divide;","Divide me into what I'm dropped on."),y=b.UTILITIES.create_radio_button("operator","^","toontalk-power-radio-button","Integer power","Use me as the number of times to multiply together what I'm dropped on."),A=function(a){var e=r.button.value.trim(),g=f.button.value.trim();if(e!==c||g!==d)l.set_from_values(e,g),b.robot.in_training&&(a=a.srcElement.className.split(" ",1)[0],b.robot.in_training.edited(l,{setter_name:"set_from_values",argument_1:e,argument_2:g,
toString:"toontalk-denominator-input"===a?"change value of the denominator to "+g+" of the number":"change value of the numerator to "+e+" of the number",button_selector:"."+a}))},w=function(){var c=b.UTILITIES.selected_radio_button(p.button,s.button,a.button,q.button),e=c.value;l.set_format(e,!0);b.robot.in_training&&b.robot.in_training.edited(l,{setter_name:"set_format",argument_1:e,toString:"change the format to "+e+" of the number",button_selector:"."+c.className.split(" ",1)[0]})},t=function(){var a=
b.UTILITIES.selected_radio_button(e.button,n.button,z.button,D.button,y.button),c=a.value;l.set_operator(c,!0);b.robot.in_training&&b.robot.in_training.edited(l,{setter_name:"set_operator",argument_1:c,toString:"change the operator to "+c+" of the number",button_selector:"."+a.className.split(" ",1)[0]})},B=b.UTILITIES.create_horizontal_table(r.container,g,f.container),G=$(b.UTILITIES.create_horizontal_table(p.container,s.container,a.container,q.container)).buttonset().get(0),x=$(b.UTILITIES.create_horizontal_table(e.container,
n.container,z.container,D.container,y.container)).buttonset().get(0),v=b.backside.create_advanced_settings_button(h,l),J=h.update_display;g.innerHTML="/";$(g).addClass("ui-widget");k.appendChild(B);k.appendChild(v);r.button.addEventListener("change",A);r.button.addEventListener("mouseout",A);r.button.addEventListener("mouseenter",function(){c=r.button.value.trim();d=f.button.value.trim()});f.button.addEventListener("change",A);f.button.addEventListener("mouseout",A);p.button.addEventListener("change",
w);s.button.addEventListener("change",w);a.button.addEventListener("change",w);q.button.addEventListener("change",w);switch(l.get_format()){case "decimal":b.UTILITIES.check_radio_button(p);break;case "improper_fraction":b.UTILITIES.check_radio_button(a);break;case "mixed_number":case "proper_fraction":b.UTILITIES.check_radio_button(s);break;case "scientific_format":b.UTILITIES.check_radio_button(q)}switch(l.get_operator()){case "+":b.UTILITIES.check_radio_button(e);break;case "-":b.UTILITIES.check_radio_button(n);
break;case "*":b.UTILITIES.check_radio_button(z);break;case "/":b.UTILITIES.check_radio_button(D);break;case "^":b.UTILITIES.check_radio_button(y)}e.button.addEventListener("change",t);n.button.addEventListener("change",t);z.button.addEventListener("change",t);D.button.addEventListener("change",t);y.button.addEventListener("change",t);h.update_display=function(){$(r.button).val(l.numerator_string());$(f.button).val(l.denominator_string());J()};$(G).addClass("toontalk-advanced-setting");$(x).addClass("toontalk-advanced-setting");
k.appendChild(G);k.appendChild(x);h.add_advanced_settings();return h}}}(window.TOONTALK);window.TOONTALK.box=function(b){var l=Object.create(b.widget);l.create=function(h,k,g,c){var d=Object.create(l),r=[],f;"undefined"===typeof k&&(k=!0);d.get_horizontal=function(){return k};d.set_horizontal=function(b,c){k=b;c&&($(this.get_frontside_element()).children(".toontalk-side").remove(),this.rerender());return this};d.get_hole=function(b){return r[b]};d.get_hole_contents=function(b){return r[b].get_contents()};d.set_hole=function(c,d,a){r[c].set_contents(d);a&&(d&&d.save_dimensions(),this.update_hole_display(c,
d));this.rerender();b.debugging&&(this.debug_string=this.toString())};d.get_holes=function(){return r};d.temporarily_remove_contents=function(b,c){var a=this.get_index_of(b);this.temporarily_removed_contents||(this.temporarily_removed_contents=[]);this.temporarily_removed_contents[a]=b;this.set_hole(a,void 0,c);return function(){this.set_hole(a,b,c);this.temporarily_removed_contents[a]=void 0}.bind(this)};d.get_contents_temporarily_removed=function(b){if(this.temporarily_removed_contents)return this.temporarily_removed_contents[b]};
d.set_contents=function(b){b.forEach(function(b,a){r[a].set_contents(b)})};d.get_size=function(){return h};d.set_size=function(c,f){var a;if(h===c)return!1;r.length=c;if(c>h)for(a=h;a<c;a++)r[a]=b.box_hole.create(a),r[a].set_parent_of_frontside(d);h=c;f&&this.rerender();b.debugging&&(this.debug_string=this.toString());return!0};d.copy=function(b){var c=r.map(function(a){if(a=a.get_contents())return a.copy(b)}),c=l.create(h,k,c,this.get_description());return this.add_to_copy(c,b)};d=d.add_standard_widget_functionality(d);
for(f=0;f<h;f++)r[f]=b.box_hole.create(f),r[f].set_parent_of_frontside(d);d.set_description(c);d.set_contents(g);b.debugging&&(d.debug_string=d.toString(),d.debug_id=b.UTILITIES.generate_unique_id());return d};l.create_backside=function(){return b.box_backside.create(this)};l.equals=function(b){return b.equals_box(this)};l.equals_box=function(b){var k=this.get_size(),g,c,d;if(k!==b.get_size())return!1;for(g=0;g<k;g++)if(c=this.get_hole_contents(g),d=b.get_hole_contents(g),!c&&d||c&&!d||c&&d&&(!c.equals||
!c.equals(d)))return!1;return!0};l.compare_with=function(b){if(b.compare_with_box)return-1*b.compare_with_box(this)};l.compare_with_box=function(b){var k=this.get_size(),g=b.get_size(),c,d;if(k>g)return 1;if(k<g)return-1;for(g=0;g<k;g++){c=this.get_hole_contents(g);d=b.get_hole_contents(g);if(c&&!d)return 1;if(!c&&d)return-1;if(c&&d)if(c.compare_with){if(c=c.compare_with(d),1===c||-1===c)return c}else return}return 0};l.match=function(b){return this.get_erased&&this.get_erased()?b.match_with_any_box?
b.match_with_any_box():"not matched":b.match_with_this_box?b.match_with_this_box(this):"not matched"};l.match_with_any_box=function(){return"matched"};l.match_with_this_box=function(h){var k=this.get_size(),g=[],c,d,l;if(k!==h.get_size())return"not matched";for(c=0;c<k;c++)if(l=h.get_hole_contents(c)){d=this.get_hole_contents(c);if(!d)return"not matched";d=b.UTILITIES.match(l,d);if("not matched"===d)return"not matched";"matched"!==d&&(g=0===g.length?d:g.concat(d))}return 0<g.length?g:"matched"};l.toString=
function(){var b="",k=this.get_size(),g,c,d=this.get_type_name()+" that looks like ";for(g=0;g<k;g++)c=this.get_hole(g),b+=c.get_full_description(),g<k-1&&(b+=" | ");return d+"["+b.replace(d,"")+"]"};l.get_type_name=function(){return"box"};l.get_help_URL=function(){return"docs/manual/boxes.html"};l.get_json=function(h){var k=[],g=this.get_size(),c;for(c=0;c<g;c++)this.get_hole_contents(c)?k[c]=b.UTILITIES.get_json(this.get_hole_contents(c),h):k[c]=null;return{type:"box",size:g,contents:k,horizontal:this.get_horizontal()}};
l.walk_children=function(b){var k=this.get_size(),g;for(g=0;g<k&&b(this.get_hole(g));g++);};b.creators_from_json.box=function(h,k){return l.create(h.size,h.horizontal,b.UTILITIES.create_array_from_json(h.contents,k),h.description)};l.update_display=function(){var h=this.get_frontside(!0).get_element(),k=this.get_size(),g=function(d,f,g){var h=f.get_frontside_element(!0),k,l;c?(k=p*g,1<g&&(k+=e*(g-1)),l=0):(k=0,l=a*g,1<g&&(l+=e*(g-1)));$(d).css({left:k,top:l,width:p,height:a});d!==h&&($(h).css({left:0,
top:0,width:"",height:""}),d.appendChild(h));b.UTILITIES.has_animating_image(h)||(0<g&&($(d).removeClass("toontalk-box-eighth-size-border-left toontalk-box-quarter-size-border-left toontalk-box-half-size-border-left toontalk-box-full-size-border-left"),$(d).removeClass("toontalk-box-eighth-size-border-top toontalk-box-quarter-size-border-top toontalk-box-half-size-border-top toontalk-box-full-size-border-top"),c?$(d).addClass(q+"-left"):$(d).addClass(q+"-top")),d.toontalk_border_size=e);f.render()},
c=this.get_horizontal();$(h).is(".toontalk-box");var d=function(){var a=$(h).children(".toontalk-box-hole");a.length===k?a.each(function(a,b){g(b,this.get_hole(a),a)}.bind(this)):(a.remove(),this.get_holes().forEach(function(a,b){l=a.get_element();$(l).addClass("toontalk-hole-number-"+b);g(l,a,b);h.appendChild(l)}))}.bind(this),l,f,p,s,a,q,e;$(h).addClass("toontalk-box");$(h).removeClass("toontalk-box-eighth-size-border toontalk-box-quarter-size-border toontalk-box-half-size-border toontalk-box-full-size-border");
h.title=this.get_title();b.debugging&&(this.debug_string=this.toString());this.get_erased()?($(h).addClass("toontalk-box-erased"),$(h).children(".toontalk-side").remove()):($(h).removeClass("toontalk-box-erased"),f=$(h).width(),s=$(h).height(),c?(p=f/k,a=s):(p=f,a=s/k),32>=p||32>=a?(q="toontalk-box-eighth-size-border",e=4):64>=p||64>=a?(q="toontalk-box-quarter-size-border",e=8):128>=p||128>=a?(q="toontalk-box-half-size-border",e=16):(q="toontalk-box-full-size-border",e=32),c?p-=(k-1)*e/k:a-=(k-1)*
e/k,$(h).addClass(q),h.toontalk_border_size=e,setTimeout(d,1))};l.update_hole_display=function(b,k){var g=this.get_frontside_element(),g=$(g).children(".toontalk-hole-number-"+b),c;g.empty();k&&(c=k.get_frontside_element(!0),g.append(c),$(c).css({left:0,top:0}),k.rerender())};l.drop_on=function(b,k,g){if(b.box_dropped_on_me)return k=b.box_dropped_on_me(this,g),g&&b.rerender(),this.remove(),k;if(b.widget_dropped_on_me)return b.widget_dropped_on_me(this,k,g);console.log("No handler for drop of "+this.toString()+
" on "+b.toString())};l.box_dropped_on_me=function(b,k){console.log("box on box not yet implemented");return!1};l.widget_dropped_on_me=function(h,k,g,c){var d=this.get_horizontal(),l=this.get_frontside_element(),f=this.get_size(),p,s,a;if(0!==f){s=$(l).offset();l=d?$(l).width()/f:$(l).height()/f;a=d?s.left:s.top;if(g)for(p=0;p<f;p++)if(s=this.get_hole(p),a+=l,(d?g.pageX<=a:g.pageY<=a)||p+1===f)return(d=s.get_contents())?h.drop_on(d,k,g,c):s.widget_dropped_on_me(h,k,g,c);b.UTILITIES.report_internal_error(h+
" dropped on "+this+" but no event was provided.")}};l.get_index_of=function(b){return b.get_parent_of_frontside().get_index()};l.removed_from_container=function(h,k,g,c){k=!!g;"undefined"===typeof c&&(c=this.get_index_of(h));0<=c?(this.set_hole(c,void 0,k),k&&(this.rerender(),h.restore_dimensions())):b.UTILITIES.report_internal_error("Attempted to remove "+h+" from "+this+" but not found.")};l.get_path_to=function(h,k){var g=this.get_size(),c,d;if("empty hole"===h.get_type_name())return b.box.path.create(h.get_index());
for(c=0;c<g;c++)if(d=this.get_hole_contents(c)||this.get_contents_temporarily_removed(c)){if(h===d||d.top_contents_is&&d.top_contents_is(h))return b.box.path.create(c);if(d.get_path_to&&(d=d.get_path_to(h,k)))return g=b.box.path.create(c),g.next=d,g}};l.dereference=function(h,k,g){var c,d;if(h){c=h.get_index&&h.get_index();if(!b.debugging||"number"===typeof c){if(d=this.get_hole_contents(c)){if(d.dereference_contents&&!h.not_to_be_dereferenced)return d.dereference_contents(h,k,g);if(h.next){if(d.dereference)return d.dereference(h.next,
k,g);b.UTILITIES.report_internal_error("Expected to refer to a part of "+d+" but it lacks a method to obtain "+b.path.toString(h.next))}h.removing_widget&&("empty hole"===d.get_type_name()?b.UTILITIES.report_internal_error("Robot is trying to remove something from an empty hole. "):d.get_infinite_stack()||g.remove_from_container(d,this));return d}return this.get_hole(c)}b.UTILITIES.report_internal_error(this+" unable to dereference the path: "+b.path.toString(h))}else return this};l.path={create:function(h){return{get_index:function(){return h},
toString:function(){return"scale"===this.true_type?0===h?"the left side of the scale ":"the right side of the scale ":"the "+b.UTILITIES.cardinal(h)+" hole "},get_json:function(b){return{type:"box_path",index:h,true_type:this.true_type,next:this.next&&this.next.get_json(b)}}}}};b.creators_from_json.box_path=function(h,k){var g=l.path.create(h.index);h.next&&(g.next=b.UTILITIES.create_from_json(h.next,k));h.true_type&&(g.true_type=h.true_type);return g};return l}(window.TOONTALK);
window.TOONTALK.box_backside=function(b){return{create:function(l){var h=b.backside.create(l),k=b.UTILITIES.create_text_input(l.get_size().toString(),"toontalk-box-size-input","Number of holes","Type here to edit the number of holes."),g=b.UTILITIES.create_radio_button("box_orientation","horizontal","toontalk-horizontal-radio-button","Left to right","Show box horizontally."),c=b.UTILITIES.create_radio_button("box_orientation","vertical","toontalk-vertical-radio-button","Top to bottom","Show box vertically."),
d=function(){var a=parseInt(k.button.value.trim(),10);l.set_size(a,!0)&&b.robot.in_training&&b.robot.in_training.edited(l,{setter_name:"set_size",argument_1:a,toString:"change the number of holes to "+a+" of the box",button_selector:".toontalk-box-size-input"})},r=function(){var a=b.UTILITIES.selected_radio_button(g.button,c.button),d=a.value,e="horizontal"===d;l.set_horizontal(e,!0);b.robot.in_training&&b.robot.in_training.edited(l,{setter_name:"set_horizontal",argument_1:e,toString:"change the orientation to "+
d+" of the box",button_selector:"."+a.className.split(" ",1)[0]})},f=h.get_element(),p=b.backside.create_advanced_settings_button(h,l),s=h.update_display;k.button.addEventListener("change",d);k.button.addEventListener("mouseout",d);g.button.addEventListener("change",r);c.button.addEventListener("change",r);h.update_display=function(){k.button.value=l.get_size().toString();l.get_horizontal()?b.UTILITIES.check_radio_button(g):b.UTILITIES.check_radio_button(c);s()};f.appendChild(k.container);f.appendChild($(b.UTILITIES.create_horizontal_table(g.container,
c.container)).buttonset().get(0));f.appendChild(p);h.add_advanced_settings();h.render();return h}}}(window.TOONTALK);
window.TOONTALK.box_hole=function(b){return{create:function(l){var h=Object.create(this),k,g,c;h.get_element=function(){c||(c=document.createElement("div"),c.className="toontalk-box-hole toontalk-frontside toontalk-side",c.toontalk_widget=h);return c};h.get_frontside=function(b){return k?k.get_frontside(b):this.get_element()};h.get_side_element=function(){return this.get_element()};h.get_frontside_element=function(b){return k?k.get_frontside_element(b):this.get_element()};h.get_frontside=function(){return this};
h.widget_dropped_on_me=function(c,g,f,h){g=this.get_parent_of_frontside();var k;b.robot.in_training&&b.robot.in_training.dropped_on(c,this);f&&c.save_dimensions&&(c.save_dimensions(),c.set_size_attributes&&(k=$(this.get_element()),c.set_size_attributes(k.width(),k.height())));this.set_contents(c);c.dropped_on_other&&c.dropped_on_other(this,!1,f,h);g.render();return!0};h.get_json=function(){return null};h.add_to_json=function(b){return b};h.copy=function(c){return b.box_hole.create(l)};h.match=function(){return"matched"};
h.get_type_name=function(){return"empty hole"};h.is_of_type=function(b){return"empty hole"===b};h.get_index=function(){return l};h.get_contents=function(){return k};h.set_contents=function(c){var l=this.get_listeners("value_changed");l&&(k!==c&&l.forEach(function(b){b({type:"value_changed",old_value:k,new_value:c})}),k&&l.forEach(function(b){k.remove_listener("value_changed",b,!0)}),c&&l.forEach(function(b){c.add_listener("value_changed",b)}));k&&k.set_parent_of_frontside(void 0);(k=c)?(k.set_parent_of_frontside(this),
b.debugging&&(h.debug_string="A hole containing "+k),k.set_visible(g)):b.debugging&&(h.debug_string="An empty hole")};h.visible=function(){return this.get_parent_of_frontside().visible()};h.set_visible=function(b){g=b;k&&k.set_visible(b)};h.render=function(){if(k)return k.render()};h.rerender=function(){if(k)return k.rerender()};h.removed_from_container=function(c,g,f){k?(f&&k.restore_dimensions(),this.set_contents(void 0),f&&this.get_parent_of_frontside().render()):b.UTILITIES.report_internal_error("Holes can't be removed from containers.")};
h.temporarily_remove_contents=function(b,c){if(k)return this.get_parent_of_frontside().temporarily_remove_contents(b,c)};h.toString=function(){return k?k.toString():"_"};h.get_description=function(){return k?k.get_description():"_"};h.get_full_description=function(){return k?k.get_full_description():"_"};h.is_backside=function(){return!1};h.get_widget=function(){return this};b.debugging&&(h.debug_string="An empty hole");b.widget.has_parent(h);b.widget.has_listeners(h);return h}}}(window.TOONTALK);window.TOONTALK.bird=function(b){var l=Object.create(b.widget);l.create=function(h,k){var g=Object.create(l);g.widget_dropped_on_me=function(c,d,g,f){d=d?c.get_backside():c;if(h){if(h.has_ancestor(c))return b.UTILITIES.display_message("Bird can't take its nest to its nest!"),!1;this.visible()||h.visible()||h.any_nest_copies_visible()?(c.save_dimensions(),g=this.get_frontside_element(),$(g).removeClass("toontalk-bird-gimme"),f&&(c.robot_waiting_before_next_step=f,c.remove_from_parent_of_frontside()),
h.animate_bird_delivery(d,this,f&&f.run_next_step,f)):(h.add_to_contents(d),f&&f.run_next_step())}else console.log("to do: handle drop on a nestless bird -- just removes other?");b.robot.in_training&&b.robot.in_training.dropped_on(c,this);return!0};g.animate_delivery_to=function(c,d,g,f,k,l,a){var q=!!g,e=this.get_parent_of_frontside(),n=this.get_frontside_element(),z=$(n).offset(),D=function(){var a=$(B).offset(),d;q?this.remove():(d=function(){$(n).removeClass("toontalk-bird-morph-to-static");$(n).addClass("toontalk-bird-static");
e&&e.get_widget().rerender()},n.style.position=G,a&&(z.left-=a.left,z.top-=a.top),$(n).css(z),B&&B.appendChild(n),e&&(e.get_widget().is_of_type("top-level")?this.rerender():e.get_widget().rerender()),S&&(U.remove_backside_widget(this,!1,!0),S()),b.UTILITIES.add_animation_class(n,"toontalk-bird-morph-to-static"),b.UTILITIES.add_one_shot_event_handler(n,"animationend",1E3,d),l&&(l(),c.robot_waiting_before_next_step=void 0))}.bind(this),y=function(){w();g.add_to_contents(c,this,!0);setTimeout(function(){this.fly_to(z,
D)}.bind(this),1)}.bind(this),A=function(a,b){this.element_to_display_when_flying=a;b&&(this.update_display(),b.update_display());a.width_before_carry=a.clientWidth;a.height_before_carry=a.clientHeight;setTimeout(function(){$(this.element_to_display_when_flying).addClass("toontalk-carried-by-bird").css({left:"",top:"",width:"",height:"",position:""});this.update_display()}.bind(this),1)}.bind(this),w=function(a){if(this.element_to_display_when_flying){var c=this.element_to_display_when_flying.width_before_carry,
e=this.element_to_display_when_flying.height_before_carry;$(this.element_to_display_when_flying).removeClass("toontalk-carried-by-bird");a?($(this.element_to_display_when_flying).css({width:c,height:e}),$(n).closest(".toontalk-top-level-backside").append(this.element_to_display_when_flying),b.UTILITIES.set_absolute_position($(this.element_to_display_when_flying),a)):$(this.element_to_display_when_flying).remove();this.element_to_display_when_flying=void 0;this.update_display()}}.bind(this),t,B,G,
x,v,J,S,H,E,N,U,M;g||(g=h);N=c.get_element();A(N,c);t=d.get_widget().closest_visible_ancestor().get_widget().get_frontside_element();if(d.visible()||this.visible())if(d=$(t).offset(),J=$(g.get_frontside_element()).closest(".toontalk-top-level-backside"),J.is("*")||(J=$(this.get_frontside_element()).closest(".toontalk-top-level-backside")),(M=J.offset())||(M={left:0,top:0}),z=f?{left:f+M.left,top:k+M.top}:$(n).offset(),B=n.parentElement,x=$(n).width(),v=$(n).height(),G=n.style.position,n.style.position=
"absolute",U=this.top_level_widget(),e&&e.get_widget().temporarily_remove_contents&&(S=e.get_widget().temporarily_remove_contents(this,!0))&&U.add_to_top_level_backside(this),J.append(n),$(n).css({left:f||z.left-M.left,top:k||z.top-M.top,width:x,height:v}),(H=g.get_contents_frontside_element())&&g.visible()&&(!a||a.visible())){f=$(t).width();k=$(t).height();E=$(t).offset();M.max_left=M.left+J.width();M.max_top=M.top+J.height();d.left+=f;d.top+=k;var fa={left:Math.min(E.left+f,M.max_left-f),top:Math.min(E.top+
k,M.max_top-k)},ga={left:Math.max(E.left-f,M.left),top:Math.max(E.top-k,M.top)};t=function(){var a=function(){g.set_locked(!0);this.fly_to(E,aa,300)}.bind(this);w(fa);g.get_locked()?g.run_when_unlocked(a):a()}.bind(this);var aa=function(){A(H);this.fly_to(ga,I,300)}.bind(this),I=function(){w(ga);this.fly_to(fa,R,300)}.bind(this),R=function(){A(N,c);this.fly_to(E,qa,300)}.bind(this),qa=function(){w(E);this.fly_to(ga,ba,300)}.bind(this),ba=function(){A(H);this.fly_to(E,Y,300)}.bind(this),Y=function(){g.set_locked(!1);
w();g.update_display();y()}.bind(this);this.fly_to(fa,t,300)}else this.fly_to(d,y,300);else g.add_to_contents(c,this,!0)};g.get_json=function(c){return{type:"bird",nest:h&&b.UTILITIES.get_json(h,c)}};g.copy=function(b){var d;d=b?this.create(void 0,this.get_description()):this.create(h,this.get_description());return this.add_to_copy(d,b)};g=g.add_standard_widget_functionality(g);g.set_description(k);b.debugging&&(g.debug_id=b.UTILITIES.generate_unique_id(),g.debug_string=h?"a bird with "+h.debug_string:
"a bird without a nest");return g};l.create_backside=function(){return b.bird_backside.create(this)};l.match=function(b){return b.match_with_any_bird?b.match_with_any_bird(this):"not matched"};l.match_with_any_bird=function(){return"matched"};l.update_display=function(){var h=this.get_frontside(!0),k=this.get_backside(),g;g=h.get_element();g.title=this.get_title();$(g).is(".toontalk-bird, .toontalk-side-animating")||($(g).addClass("toontalk-bird toontalk-bird-static"),g.addEventListener("dragover",
function(c){$(g).is(".toontalk-bird-static")&&($(g).removeClass("toontalk-bird-static"),b.UTILITIES.add_animation_class(g,"toontalk-bird-gimme"))}),g.addEventListener("dragleave",function(b){$(g).is(".toontalk-bird-gimme")&&$(g).addClass("toontalk-bird-static").removeClass("toontalk-bird-gimme")}));this.element_to_display_when_flying?g.appendChild(this.element_to_display_when_flying):$(g).children(".toontalk-side").remove();k&&k.rerender()};l.fly_to=function(h,k,g){var c=this.get_frontside_element(),
d=$(c).offset(),d=Math.atan2(h.top-d.top,h.left-d.left),l="toontalk-fly-west toontalk-fly-northwest toontalk-fly-north toontalk-fly-northeast toontalk-fly-east toontalk-fly-southeast toontalk-fly-south toontalk-fly-southwest".split(" ")[Math.round(4*(d/Math.PI+1))%8];$(c).position();b.UTILITIES.add_animation_class(c,l);this.animate_to_absolute_position(h,function(){$(c).removeClass(l);g?($(c).addClass("toontalk-bird-static"),setTimeout(k,g)):k()})};l.toString=function(){return"a bird"};l.get_type_name=
function(){return"bird"};l.get_help_URL=function(){return"docs/manual/birds-nests.html"};l.matching_resource=function(b){return b.get_type_name&&b.get_type_name()===this.get_type_name()};b.creators_from_json.bird=function(h,k){return b.bird.create(b.UTILITIES.create_from_json(h.nest,k),h.description)};l.drop_on=function(b,k,g,c){if(b.widget_dropped_on_me)return b.widget_dropped_on_me(this,!1,g,c)};return l}(window.TOONTALK);
window.TOONTALK.bird_backside=function(b){return{create:function(l){l=b.backside.create(l);l.add_advanced_settings(!0);return l}}}(window.TOONTALK);
window.TOONTALK.nest=function(b){var l=Object.create(b.widget),h={},k={};l.create=function(g,c,d,k,f){var p=Object.create(l),s;c||(c=[]);d||(d=[]);p.matched_by=function(a){return 0<c.length?b.UTILITIES.match(a,c[0].get_widget()):[this]};p.run_when_non_empty=function(a){d.push(a)};p.add_to_contents=function(a,f,e){var g;1===c.push(a)?0<d.length&&(g=d,d=[],g.forEach(function(a){$(a.robot.get_frontside_element()).removeClass("toontalk-robot-waiting");a.robot.run(a.context,a.top_level_context,a.queue)})):
a.get_widget().hide();a.is_backside()?a.get_widget().set_parent_of_backside(this):a.get_widget().set_parent_of_frontside(this);s&&!e&&(f?s.forEach(function(c){c.has_ancestor(a.get_widget())||c.animate_bird_delivery(b.UTILITIES.copy_side(a),f)}):s.forEach(function(c){c.has_ancestor(a.get_widget())||c.add_to_contents(b.UTILITIES.copy_side(a,!1,!0))}));this.rerender()};p.animate_bird_delivery=function(a,c,e,d){var f,g,h;c.animate_delivery_to(a,this,void 0,void 0,void 0,e,d);s&&(f=$(c.closest_visible_ancestor().get_widget().get_frontside_element()).closest(":visible").position(),
g=c.get_parent_of_frontside().get_element(),h=this.visible(),s.forEach(function(e){var k=b.UTILITIES.copy_side(a,!1,h),l,p;e.has_ancestor(a.get_widget())||(e.visible()||h?(l=c.copy(!0),p=l.get_frontside_element(!0),$(g).append(p),l.animate_delivery_to(k,e,e,f.left,f.top,void 0,d)):e.add_to_contents(k))}))};p.get_contents_frontside_element=function(){if(0<c.length)return c[0].get_widget().get_frontside_element()};p.get_locked=function(){return this.locked_for_animating_deliveries};p.set_locked=function(a){this.locked_for_animating_deliveries=
a;!a&&this.to_run_when_unlocked&&0<this.to_run_when_unlocked.length&&this.to_run_when_unlocked.shift()()};p.run_when_unlocked=function(a){this.to_run_when_unlocked?this.to_run_when_unlocked.push(a):this.to_run_when_unlocked=[a]};p.removed_from_container=function(a,d,e){a=c.shift();this.visible()&&(a?(a.get_widget().restore_dimensions(),a.is_backside()?a.get_widget().set_parent_of_backside(void 0):a.get_widget().set_parent_of_frontside(void 0)):b.UTILITIES.report_internal_error("Nothing removed from nest!"),
0<c.length&&(c[0].set_visible(!0),$(c[0].get_element()).show()),this.render());return a};p.dereference_contents=function(a,b,e){var d,f,g,h;return 0===c.length?this:a.removing_widget?(a=c[0],e.remove_from_container(a,this),this.visible()&&(g=this.get_frontside_element(),e=$(g).offset(),b=$(g).closest(".toontalk-backside-of-top-level"),(d=b.offset())||(d={left:0,top:0}),f=a.get_frontside_element(),h=$(g).width(),g=$(g).height(),$(f).css({left:.1*h+e.left-d.left,top:.1*g+e.top-d.top,width:.8*h,height:.8*
g}),b.append(f)),a):a.next?c[0].get_widget().dereference(a.next,b,e):c[0].get_widget()};p.get_json=function(a){var g=d&&d.map(function(c){return{robot:b.UTILITIES.get_json(c.robot,a),context:c.context&&b.UTILITIES.get_json(c.context,a),top_level_context:c.top_level_context&&b.UTILITIES.get_json(c.top_level_context,a)}});return{type:"nest",contents:b.UTILITIES.get_json_of_array(c,a),guid:k,original_nest:f&&b.UTILITIES.get_json(f,a),waiting_robots:g}};p.copy=function(a,d){var e,g;if(a)return 0<c.length?
c[0].get_widget().copy(a):b.nest.create(this.get_description(),[],[],"in a robot's condition");e=b.UTILITIES.copy_widget_sides(c);d||(g=f||this);e=b.nest.create(this.get_description(),e,[],k,g);return this.add_to_copy(e,a)};p.has_contents=function(){return 0<c.length};p.dropped_on_other=function(a,c,e,d){var f,g,h,l,s,t,B;k||(k=b.UTILITIES.generate_unique_id(),b.debugging&&(p.debug_string="A nest with "+k),f=b.bird.create(this),d&&(d.add_newly_created_widget(f),this.robot_waiting_before_next_step=
d),this.rerender(),g=this.get_frontside_element(!0),b.UTILITIES.add_animation_class(g,"toontalk-hatch-egg"),s=function(){var k,p,r;if(c)k=a.get_backside();else if((r=b.UTILITIES.widget_from_jquery($(g).closest(".toontalk-top-level-backside")))||(r=b.UTILITIES.widget_from_jquery($(a.get_widget().get_frontside_element(!0)).closest(".toontalk-top-level-backside"))),r)k=r.get_backside();else{b.UTILITIES.report_internal_error("Unable to find the top-level backside for bird to go to.");return}p=k.get_element();
r=$(p).offset();h=f.get_frontside_element(!0);$(h).removeClass("toontalk-bird-static");b.UTILITIES.add_animation_class(h,"toontalk-fly-southwest");l=b.UTILITIES.relative_position(g,p);$(h).css({left:l.left,top:l.top});b.robot.in_training?(b.robot.in_training.add_newly_created_widget(f),k.widget_dropped_on_me(f,!1,e,void 0,!0)):k.widget_dropped_on_me(f,!1,e);$(g).removeClass("toontalk-hatch-egg").addClass("toontalk-empty-nest").css({width:"",height:""});"top-level"===this.get_parent_of_frontside().get_widget().get_type_name()&&
$(g).css({left:l.left-5,top:l.top+45});B=function(){$(h).removeClass("toontalk-fly-southwest");setTimeout(function(){b.UTILITIES.add_animation_class(h,"toontalk-fly-down");t=function(){$(h).removeClass("toontalk-fly-down");b.UTILITIES.add_animation_class(h,"toontalk-bird-morph-to-static");b.UTILITIES.add_one_shot_event_handler(h,"animationend",1E3,function(){$(h).removeClass("toontalk-bird-morph-to-static toontalk-side-animating").addClass("toontalk-bird-static")});d&&d.run_next_step();f.update_display()};
b.UTILITIES.add_one_shot_event_handler(g,"animationend",1E3,t)}.bind(this),1)}.bind(this);$(h).removeClass("toontalk-bird-static");k=Math.max(10,l.left-70);p=Math.max(10,l.top+70);f.animate_to_absolute_position({left:k+r.left,top:p+r.top},B);this.rerender()}.bind(this),b.UTILITIES.add_one_shot_event_handler(g,"animationend",2E3,s));return!0};p.widget_dropped_on_me=function(a,d,e,f){e&&a.save_dimensions&&a.save_dimensions();0===c.length?(this.add_to_contents(d?a.get_backside():a),a.dropped_on_other?
a.dropped_on_other(this,d,e,f):b.robot.in_training&&b.robot.in_training.dropped_on(a,this)):a.drop_on(c[0].get_widget(),d,e,f);return!0};p.drop_on=function(a,b,c,d){return a.widget_dropped_on_me?(a.widget_dropped_on_me(this,!1,c,d),!0):!1};p.element_to_highlight=function(a){return 0===c.length?this.get_frontside_element():c[0].get_frontside_element()};p.update_display=function(){var a=this.get_frontside(!0),d=this.get_backside(),e,f,g,h,l,a=a.get_element();0<c.length?(e=c[0].get_widget(),c[0].is_backside()?
(h=e.get_backside(!0),l=h.get_element(),h.update_display(),h.scale_to_fit(l,a)):(e.render(),l=c[0].get_element()),f=$(a).width(),g=$(a).height(),0<f&&0<g&&setTimeout(function(){for(var a=2*l.toontalk_border_size||0,b=.8*f,c=.8*g;2*a>=b||2*a>=c;)a/=2;b-=a;c-=a;$(l).css({width:b,height:c,left:.1*f,top:.1*g});e.set_size_attributes&&e.set_size_attributes(b,c)},2),a.appendChild(l),$(a).addClass("toontalk-empty-nest"),c[0].is_backside()?e.set_parent_of_backside(this):e.set_parent_of_frontside(this)):(a.title=
this.get_title(),k?($(a).removeClass("toontalk-nest-with-egg"),$(a).addClass("toontalk-empty-nest")):b.UTILITIES.add_animation_class(a,"toontalk-nest-with-egg"));$(a).addClass("toontalk-nest");d&&d.rerender()};p[h]=function(a){s||(s=[]);s.push(a)};p.get_path_to=function(a,b){if(0<c.length&&c[0].get_widget().get_path_to)return c[0].get_widget().get_path_to(a,b)};p.walk_children=function(a){if(0<c.length)return a(c[0])};p.top_contents_is=function(a){return 0<c.length&&c[0].get_widget()===a};p.any_nest_copies_visible=
function(){var a=!1;if(!s)return!1;s.some(function(b){b.visible()&&(a=!0)});return a};p.compare_with=function(a){if(0<c.length)return c[0].compare_with(a);if(a.compare_with_nest)return-1*a.compare_with_nest(this)};p.compare_with_nest=function(a){return 0===c.length?0:1};p.compare_with_number=function(a){return 0<c.length?c[0].compare_with(a):-1};p.compare_with_box=p.compare_with_number;p.compare_with_scale=p.compare_with_number;p=p.add_standard_widget_functionality(p);p.set_description(g);b.debugging&&
(p.debug_id=b.UTILITIES.generate_unique_id(),p.debug_string=k?"A nest with id "+k:"A nest with an egg");if(f&&k)f[h](p);return p};l.create_backside=function(){return b.nest_backside.create(this)};l.match=function(b){return b.match_nest_with_nest?b.match_nest_with_nest(this):"not matched"};l.match_nest_with_nest=function(b){return"matched"};l.toString=function(){return"a nest"};l.get_help_URL=function(){return"docs/manual/birds-nests.html"};l.get_type_name=function(){return"nest"};l.matching_resource=
function(b){return b.get_type_name&&b.get_type_name()===this.get_type_name()};b.creators_from_json.nest=function(g,c){var d=!g.original_nest&&g.guid&&k[g.guid];d||(d=b.nest.create(g.description,b.UTILITIES.create_array_from_json(g.contents,c),void 0,g.guid,g.original_nest&&b.UTILITIES.create_from_json(g.original_nest,c)),k[g.guid]=d);return d};return l}(window.TOONTALK);window.TOONTALK.nest_backside=function(b){return{create:function(l){l=b.backside.create(l);l.add_advanced_settings(!0);return l}}}(window.TOONTALK);window.TOONTALK.scale=function(b){var l=Object.create(b.widget);l.create=function(h,k,g){var c=function(){g.rerender()},d=function(b){var a=$(g.get_frontside_element()),a=a.offset().left+a.width()/2;return b.clientX<a?0:1},l,f,p;g||(g=b.box.create(2,void 0,h,k));l=g.get_json;f=g.copy;p=g.get_path_to;g.copy=function(c){var a=f.call(this,c),a=b.scale.create(void 0,void 0,a);return g.add_to_copy(a,c)};g.get_json=function(b){b=l.call(this,b);b.type="scale";return b};g.get_path_to=function(b,a){var c=
p.call(this,b,a);c.true_type="scale";return c};g.element_to_highlight=function(b){b=d(b);b=this.get_hole(b);var a=b.get_contents();return a?a.get_frontside_element():b.get_frontside_element()};g.drop_on=function(b,a,c,e){if(b.widget_dropped_on_me)return b.widget_dropped_on_me(this,a,c,e)};g.widget_dropped_on_me=function(b,a,c,e){var f=this.get_hole_contents(0),g=this.get_hole_contents(1),h;if(f&&!g)return this.set_hole(1,b),!0;if(!f&&g)return this.set_hole(0,b),!0;h=d(c);if(0===h){if(f){if(f.drop_on)return b.drop_on(f,
a,c,e);return}}else if(g){if(g.drop_on)return b.drop_on(g,a,c,e);return}this.set_hole(h,b,c);return!0};g.update_display=function(){var c=this.get_frontside_element(),a=$(c),d=$(c).children(".toontalk-scale-half"),e=$(c).parent(),e=e.is(".toontalk-top-level-backside")?c:e.get(0),f=$(e).width(),g=$(e).height(),h=function(a,b,c){var e=b.get_frontside_element(!0),d=c*f*.5,h=.5*f,l=g;b=b.get_contents();$(a).css({left:d,top:0,width:h,height:l});a!==e&&(d=0===c?-.05*f:.15*f,c="toontalk-scale-balanced"===
k?.1*g:0===c&&"toontalk-scale-left_heavier"===k||1===c&&"toontalk-scale-right_heavier"===k?.25*g:1===c&&"toontalk-scale-left_heavier"===k||0===c&&"toontalk-scale-right_heavier"===k?-.1*g:.2*g,h=.4*f,l=.4*g,$(e).css({left:d,top:c,width:h,height:l}),b&&(b.set_location_attributes&&b.set_location_attributes(d,c),b.set_size_attributes&&b.set_size_attributes(h,l)),a.appendChild(e))},k,e=b.UTILITIES.scale_to_fit(c,e,123,91);0===e.x_scale&&(e.x_scale=1);0===e.y_scale&&(e.y_scale=1);0===f&&(f=1);0===g&&(g=
1);f/=e.x_scale;g/=e.y_scale;a.is(".toontalk-top-level-resource")?k="toontalk-scale-balanced":(e=this.get_state(),k="undefined"===typeof e?"toontalk-scale-unbalanced":["toontalk-scale-right_heavier","toontalk-scale-balanced","toontalk-scale-left_heavier"][e+1]);a.removeClass("toontalk-scale-balanced toontalk-scale-left_heavier toontalk-scale-right_heavier toontalk-scale-unbalanced");a.addClass(k);a.addClass("toontalk-scale");2===d.length?d.each(function(a,b){setTimeout(function(){h(b,this.get_hole(a),
a)}.bind(this),1)}.bind(this)):this.get_holes().forEach(function(a,b){var e=a.get_element();0===b?$(e).addClass("toontalk-left_scale  toontalk-scale-half"):$(e).addClass("toontalk-right_scale toontalk-scale-half");h(e,a,b);c.appendChild(e)});c.title=this.get_title();b.debugging&&(this.debug_string=this.toString())};g.get_type_name=function(){return"scale"};g.get_help_URL=function(){return"docs/manual/scales.html"};g.toString=function(){var c=this.get_hole(0),a=this.get_hole(1),d;switch(this.get_state()){case -1:d=
"scale leaning to the left";break;case 1:d="scale leaning to the right";break;case 0:d="balanced scale";break;default:d="unbalanced scale"}c=c?"contains "+b.UTILITIES.add_a_or_an(c.get_full_description()):"is empty";a=a?"contains "+b.UTILITIES.add_a_or_an(a.get_full_description()):"is empty";return d+" and the left pan "+c+" and the right pan "+a};g.create_backside=function(){return b.scale_backside.create(this)};g.get_state=function(){var b=this.get_hole_contents(0),a=this.get_hole_contents(1);if(b||
a)if(b){if(!a)return 1;if(b.compare_with)return b.compare_with(a)}else return-1};g.match=function(b){return b.match_with_scale?b.match_with_scale(this):"not matched"};g.match_with_scale=function(b){return this.get_state()===b.get_state()?"matched":"not matched"};g.compare_with=function(b){if(b.compare_with_scale)return-1*b.compare_with_scale(this)};g.compare_with_scale=function(b){var a=this.get_state();b=b.get_state();return a&&!b?1:!a&&b?-1:a>b?1:a<b?-1:0};g.get_hole(0).add_listener("value_changed",
c);g.get_hole(1).add_listener("value_changed",c);g.get_hole_contents(0)&&g.get_hole_contents(0).add_listener("value_changed",c);g.get_hole_contents(1)&&g.get_hole_contents(1).add_listener("value_changed",c);return g};b.creators_from_json.scale=function(h,k){return l.create(b.UTILITIES.create_array_from_json(h.contents,k),h.description)};return l}(window.TOONTALK);window.TOONTALK.scale_backside=function(b){return{create:function(l){l=b.backside.create(l);l.add_advanced_settings(!0);return l}}}(window.TOONTALK);window.TOONTALK.robot=function(b){var l=Object.create(b.widget);l.create=function(h,k,g,c,d,r,f){var p=Object.create(l),s,a=!1;g||(g=b.actions.create());s||(s=p);p.get_frontside_conditions=function(){return h};p.set_frontside_conditions=function(a){h=a};p.get_backside_conditions=function(){return k};p.set_backside_conditions=function(a){(k=a)&&b.UTILITIES.available_types.forEach(function(a){k[a]&&b.widget.erasable(k[a])})};p.add_to_backside_conditions=function(a){var c=a.copy(!0);k||(k={});k[a.get_type_name()]=
c;b.widget.erasable(c)};p.get_body=function(){return g};p.get_animating=function(){return a};p.set_animating=function(c,e){var d=this.get_frontside_element();(a=c)?(e||(e=$(d).offset()),$(d).addClass("toontalk-robot-animating toontalk-side-animating"),$(d).css({width:"",height:"","z-index":b.UTILITIES.next_z_index()}),b.UTILITIES.set_position_relative_to_top_level_backside($(d),e),$(d).closest(".toontalk-top-level-backside").append(d)):$(d).removeClass("toontalk-robot-animating toontalk-side-animating")};
p.get_thing_in_hand=function(){return d};p.set_thing_in_hand=function(a){b.debugging&&a&&"empty hole"===a.get_type_name()?b.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):d=a};p.get_next_robot=function(){return f};p.set_next_robot=function(a){var b=this.get_backside_element();a&&a.set_first_in_team(this.get_first_in_team());!a&&f&&f.set_first_in_team(f);f=a;b&&(a=a?"When the robot can't run then this one will try: ":window.TOONTALK.robot.empty_drop_area_instructions,$(b).find(".toontalk-drop-area-instructions").get(0).innerHTML=
a)};p.get_first_in_team=function(){return s};p.set_first_in_team=function(a){s=a;f&&f.set_first_in_team(a)};p.get_run_once=function(){return r};p.set_run_once=function(a){r=a};f&&p.set_next_robot(f);p=p.add_standard_widget_functionality(p);p.set_description(c);b.debugging&&(this.debug_id=b.UTILITIES.generate_unique_id());return p};l.create_backside=function(){return b.robot_backside.create(this)};l.copy=function(h){var k=this.get_frontside_conditions(),g=this.get_backside_conditions(),k=k?k.copy(!0):
void 0,c=this.get_next_robot(),c=c?c.copy(h):void 0,d;g&&(d={},b.UTILITIES.available_types.forEach(function(b){d[b]&&(d[b]=d[b].copy(!0))}));g=this.create(k,d,this.get_body().copy(),this.get_description(),this.get_thing_in_hand(),this.get_run_once(),c);return this.add_to_copy(g,h)};l.match=function(){console.log("Robot-to-robot matching could be more sophisticated.");return"matched"};l.run=function(h,k,g){var c=this.get_frontside_conditions(),d,l,f;if(this.being_trained||!c||this.get_animating())return"not matched";
this.match_status=b.UTILITIES.match(c,h);(l=c.get_frontside_element())&&("matched"===this.match_status?$(l).removeClass("toontalk-conditions-not-matched"):$(l).addClass("toontalk-conditions-not-matched"));"matched"===this.match_status?(d=this.get_backside_conditions())&&(c=h.get_backside_widgets())&&c.some(function(c){var f=!c.is_backside()&&d[c.get_widget().get_type_name()];if(f&&(c=b.UTILITIES.match(f,c.get_widget()),(l=f.get_frontside_element())&&("matched"===c?$(l).removeClass("toontalk-conditions-not-matched"):
$(l).addClass("toontalk-conditions-not-matched")),"matched"!==c))return this.match_status=c,!0}.bind(this)):this.match_status||(this.match_status="not matched");switch(this.match_status){case "matched":return g||(g=b.QUEUE),this.get_body().reset_newly_created_widgets(),g.enqueue({robot:this,context:h,top_level_context:k,queue:g}),this.match_status;case "not matched":return this.get_next_robot()?this.get_next_robot().run(h,k,g):this.match_status;default:if(this.get_next_robot()){c=this.get_next_robot().run(h,
k,g);if("matched"===c)return c;"not matched"!=c&&c.forEach(function(b){0>this.match_status.indexOf(b)&&this.match_status.push(b)})}this.get_first_in_team()===this&&(f={robot:this,context:h,top_level_context:k,queue:g},this.match_status.forEach(function(b){b.run_when_non_empty(f)}),b.UTILITIES.add_animation_class(this.get_frontside_element(),"toontalk-robot-waiting"));return this.match_status}};l.set_stopped=function(b){(this.stopped=b)&&this.visible()&&$(this.get_frontside_element()).removeClass("toontalk-robot-waiting");
this.get_next_robot()&&this.get_next_robot().set_stopped(b)};l.run_actions=function(b,k,g){return this.stopped?!1:this.visible()?this.get_body().run_watched(b,k,g,this):this.get_body().run_unwatched(b,k,g,this)};l.picked_up=function(h,k,g){var c;this!==h&&(h.get_infinite_stack&&h.get_infinite_stack()?this.current_action_name="pick up a copy of":this.current_action_name="pick up",g?(c=h,k=h.copy(),k=b.path.get_path_to_resource(k)):k=b.path.get_path_to(h,this),k&&this.add_step(b.robot_action.create(k,
this.current_action_name),c),h.last_action=this.current_action_name,this.current_action_name=void 0,this.set_thing_in_hand(h))};l.dropped_on=function(h,k){var g;this!==h&&(this.current_action_name="drop it on",(g=b.path.get_path_to(k,this))&&this.add_step(b.robot_action.create(g,this.current_action_name)),h.last_action=this.current_action_name+" "+k.get_type_name(),this.current_action_name=void 0,this.set_thing_in_hand(void 0))};l.copied=function(h,k,g){this.current_action_name=g?"pick up a copy of":
"copy";(h=b.path.get_path_to(h,this))&&this.add_step(b.robot_action.create(h,this.current_action_name),k);k.last_action=this.current_action_name;this.current_action_name=void 0};l.removed=function(h){var k;this.current_action_name="remove";(k=b.path.get_path_to(h,this))&&this.add_step(b.robot_action.create(k,this.current_action_name));h.last_action=this.current_action_name;this.current_action_name=void 0};l.edited=function(h,k){var g;this.current_action_name="edit";(g=b.path.get_path_to(h,this))&&
this.add_step(b.robot_action.create(g,this.current_action_name,k));this.current_action_name=void 0};l.erased_widget=function(h,k){var g;this.current_action_name="erased_widget";(g=b.path.get_path_to(h,this))&&this.add_step(b.robot_action.create(g,this.current_action_name,{erased:k,toString:k?"erase":"un-erase"}));this.current_action_name=void 0};l.remove_from_container=function(h,k){var g=k.get_index_of&&k.get_index_of(h),c=function(){h.get_parent_of_frontside()&&k.removed_from_container(h,!1,!0,
g)};this.get_animating()?b.UTILITIES.add_one_shot_event_handler(this.get_frontside_element(),"transitionend",2500,c):c();this.add_newly_created_widget(h)};l.add_step=function(b,k){this.get_body().add_step(b,k);this.get_frontside_element().title=this.get_title()};l.get_context=function(){var h=this.get_frontside_element(),k=$(h).parent(),h=b.UTILITIES.widget_from_jquery(k);return!h&&(k=b.UTILITIES.widget_from_jquery(k.closest(".toontalk-backside-of-robot")))?k.get_context():h};l.training_started=function(){var h=
this.get_context();h?(this.being_trained=!0,this.set_frontside_conditions(h.copy(!0)),$("*").css({cursor:"url("+b.UTILITIES.absolute_file_path("images/RB19.32x32.PNG")+"), default"}),this.get_frontside_element().title=this.get_title(),h=this.get_backside_element(),$(h).find(".toontalk-conditions-panel").remove()):b.UTILITIES.report_internal_error("Robot started training but can't find its 'context'.")};l.training_finished=function(){var h=this.get_body().get_newly_created_widgets(),k,g;$("*").css({cursor:""});
for(k=0;k<h.length;k++)g=h[k],"drop it on top-level"!==g.last_action&&"copy"!==g.last_action||this.add_step(b.robot_action.create(b.newly_created_widgets_path.create(k),"add to the top-level backside"));this.rerender();this.being_trained=!1;this.get_frontside_element().title=this.get_title();this.backup_all()};l.update_display=function(){var h=this.get_frontside(!0),k=this.get_backside(),g=this.get_thing_in_hand(),c,d;b.debugging&&(this.debug_string=this.toString());c=h.get_element();g&&(d=g.get_frontside_element());
!d&&this.carrying_tool&&(d=document.createElement("div"),$(d).addClass(this.carrying_tool));c.title=this.get_title();$(c).addClass("toontalk-robot");$(c).children(".toontalk-side, .toontalk-held-by-robot").remove();d&&c.appendChild(d);"not matched"===this.match_status?$(c).addClass("toontalk-side-animating toontalk-robot-not-matched"):$(c).removeClass("toontalk-robot-not-matched");setTimeout(function(){var b,f,h,k,a;d&&(a={position:"absolute"},$(d).addClass("toontalk-held-by-robot"),b=$(d).width(),
f=$(d).height(),h=$(c).width(),k=$(c).height(),0===b&&(b=2*h,f=k/2,a.width=b,a.height=f),a.left=(h-b)/2,a.top=(k-f)/2,$(d).css(a),g&&g.render())},1);k&&k.rerender()};l.add_newly_created_widget=function(b){return this.get_body().add_newly_created_widget(b)};l.add_newly_created_widget_if_new=function(b){if(b!==this.get_context())return this.get_body().add_newly_created_widget_if_new(b)};l.get_recently_created_widget=function(){var b=this.get_body().get_newly_created_widgets();return b[b.length-1]};
l.get_title=function(){var b=this.get_description();if(b)return b="This robot "+b,0>b.lastIndexOf(".")&&(b+="."),b+"\n"+this.toString();b=this.get_frontside_element();return $(b).is(".toontalk-top-level-resource")?"Drag this robot to a work area.":this.toString()};l.toString=function(){var h=this.get_frontside_conditions(),k=this.get_body(),g="",c="",d=this.get_next_robot();if(!h)return"has yet to be trained.";h=h.get_full_description();this.being_trained&&(g="is being trained.\n",c="\n...");h=b.UTILITIES.add_a_or_an(h);
k=g+"When working on something that matches "+h+" he will \n"+k.toString()+c;"not matched"===this.match_status&&(k="He isn't running because his conditions don't match. Click to edit his conditions.\n"+k);d&&(k+="\nIf it doesn't match then the next robot will try to run.\n"+d.toString());return k};l.get_type_name=function(){return"robot"};l.get_help_URL=function(){return"docs/manual/robots.html"};l.get_json=function(h){var k=this.get_frontside_conditions(),g=this.get_backside_conditions(),c,d,l;k&&
(c=k.is_of_type("top-level")?{type:"top_level"}:b.UTILITIES.get_json(k,h));g&&b.UTILITIES.available_types.forEach(function(c){g[c]&&(d||(d={}),d[c]=b.UTILITIES.get_json(g[c],h))});this.get_next_robot()&&(l=b.UTILITIES.get_json(this.get_next_robot(),h));return{type:"robot",frontside_conditions:c,backside_conditions:d,body:this.get_body().get_json(h),run_once:this.get_run_once(),next_robot:l}};b.creators_from_json.robot=function(h,k){var g,c,d;h.thing_in_hand&&(c=b.UTILITIES.create_from_json(h.thing_in_hand,
k));h.next_robot&&(g=b.UTILITIES.create_from_json(h.next_robot,k));h.backside_conditions&&(d={},b.UTILITIES.available_types.forEach(function(c){d[c]=b.UTILITIES.create_from_json(h.backside_conditions[c],k)}));return b.robot.create(b.UTILITIES.create_from_json(h.frontside_conditions||h.bubble,k),d,b.UTILITIES.create_from_json(h.body,k),h.description,c,h.run_once,g)};return l}(window.TOONTALK);
window.TOONTALK.robot_backside=function(b){var l=function(h,g,c,d){h=b.UTILITIES.create_text_element(h);var l=g.get_frontside_element(!0);$(l).addClass("toontalk-conditions-contents "+d);setTimeout(function(){$(l).parent().addClass("toontalk-conditions-contents-container");$(l).css({left:"inherit",top:"4%",width:"inherit",height:"inherit"});g.render()},1);"not matched"===c.match_status?$(l).addClass("toontalk-conditions-not-matched"):$(l).removeClass("toontalk-conditions-not-matched");c=b.UTILITIES.create_horizontal_table(h,
l);$(c).addClass("toontalk-conditions-panel");return c},h=function(h,g){var c=g.get_frontside_conditions(),d=g.get_backside_conditions(),r,f;c&&0===$(h).find(".toontalk-frontside-conditions-area").length&&(h.insertBefore(l("Runs only if the widget matches: ",c,g,"toontalk-frontside-conditions-area"),h.firstChild),c.set_visible(!0),c.render());d&&Object.keys(d).forEach(function(c){if(r=d[c])f="toontalk-backside-"+c+"-conditions-area",0===$(h).find("."+f).length&&(c="bird"===c?b.UTILITIES.create_text_element("And there is a bird on the back."):
l("Runs only if the "+c+" on the backside matches: ",r,g,f),h.insertBefore(c,h.firstChild.nextSibling),r.set_visible(!0),r.render())})};return{create:function(k){var g=b.backside.create(k),c=g.get_element(),d=b.UTILITIES.create_check_box(!k.get_run_once(),"toontalk-run-once-check-box","When finished start again","Check this if you want the robot to start over again after finishing what he was trained to do."),l=b.UTILITIES.create_drop_area(window.TOONTALK.robot.empty_drop_area_instructions),f=k.get_next_robot(),
p=b.backside.create_advanced_settings_button(g,k),s=g.update_display;l.data("drop_area_owner",k);$(d.button).click(function(a){var c=d.button.checked;k.set_run_once(!c);b.robot.in_training&&b.robot.in_training.edited(k,{setter_name:"set_run_once",argument_1:!c,toString:"change to "+(c?"run again":"run once")+" of the robot",button_selector:".toontalk-run-once-check-box"});a.stopPropagation()});f&&l.append(f.get_frontside_element());l.get(0).addEventListener("drop",function(a){a=b.UTILITIES.get_dragee();
(a=b.UTILITIES.widget_from_jquery(a))&&a.is_of_type("robot")&&(a=a.open_backside(),$(a.get_element()).find(".toontalk-train-backside-button").click())});g.update_display=function(){var a=k.get_frontside_element();a&&(a.title=k.get_title());s()};c.appendChild(this.create_train_button(g,k));c.appendChild(p);$(d.container).addClass("toontalk-advanced-setting");l.addClass("toontalk-advanced-setting");c.appendChild(d.container);c.appendChild(l.get(0));h(c,k);g.add_advanced_settings();return g},create_train_button:function(k,
g){var c=k.get_element();$(c);var d=$("<button>Train</button>").button();d.addClass("toontalk-train-backside-button");var l=!1,f=function(){l?(d.button("option","label","Stop training"),d.attr("title","Click to stop training this robot.")):g.get_body().is_empty()?(d.button("option","label","Train"),d.attr("title","Click to start training this robot.")):(d.button("option","label","Re-train"),d.attr("title","Click to start training this robot all over again."));$(c).is(":visible")&&h(c,g)};f();d.click(function(c){l=
!l;f();l?(g.get_body().reset_steps(),b.robot.in_training=g,g.training_started()):(g.training_finished(),b.robot.in_training=null);c.stopPropagation()});return d.get(0)}}}(window.TOONTALK);window.TOONTALK.robot.empty_drop_area_instructions="Drop a robot here who will try to run when this robot can't run.";(function(){var b=function(b){return"rotate"===b||"skewX"===b||"skewY"===b||"transform-origin-x"===b||"transform-origin-y"===b};window.TOONTALK.element=function(l){var h=Object.create(l.widget),k=function(b,c){var d,h;"number"===typeof b&&(h=b);0===b.length&&(h=0);if("undefined"===typeof h&&(d=b.substring(b.length-1),0<="0123456789x".indexOf(d)&&(h=parseFloat(b),isNaN(h))))return;d=h;0<=["rotate","skewX","skewY"].indexOf(c)&&(d%=360,0>d&&(d+=360));return d};h.create=function(g,c,d,k){var f=Object.create(h),
p,s,a,q;c||(c=[]);f.get_HTML=function(){return g};f.get_text=function(){return this.get_frontside_element().innerText};f.set_HTML=function(a){var b=this.get_frontside_element();if(!b||g===a)return!1;g=a;$(b).children(":not(.ui-resizable-handle)").remove();this.rerender();return!0};f.set_text=function(a){var b=this.get_frontside_element(),c=function(b){$(b).contents().each(function(){this.nodeType==Node.TEXT_NODE?(this.textContent=a,a=""):c(this,a)})};if(!b||a===b.textContent)return!1;c(b);return this.set_HTML(b.innerHTML)};
f.get_style_attributes=function(){return c};f.set_style_attributes=function(a){c=a};f.get_pending_css=function(){return p};f.get_transform_css=function(){return s};f.add_to_css=function(a,c){b(a)?(s||(s={}),s[a]=c):(p||(p={}),p[a]=c)};f.apply_css=function(){var a,b;if(p||s)if(a=this.get_frontside_element()){if(s){s.rotate&&(b="rotate("+s.rotate+"deg)");s.skewX&&(b||(b=""),b+="skewX("+s.skewX+"deg)");s.skewY&&(b||(b=""),b+="skewY("+s.skewY+"deg)");if(s["transform-origin-x"]||s["transform-origin-y"])p||
(p={}),p["transform-origin"]=(s["transform-origin-x"]||0)+" "+(s["transform-origin-y"]||0);b&&(p||(p={}),p["-webkit-transform"]=b,p["-moz-transform"]=b,p["-ms-transform"]=b,p["o-transform"]=b,p.transform=b)}p&&($(a).css(p),q&&(p.width||p.height)&&(a={},a.width=p.width,a.height=p.height,q.css(a)),p=void 0)}};f.on_update_display=function(b){a?a.push(b):a=[b]};f.fire_on_update_display_handlers=function(){a&&setTimeout(function(){a.forEach(function(a){a()});a=[]},1)};f.get_image_element=function(){return q};
f.set_image_element=function(a,b){q=$(a).find("img");0===q.length?q=void 0:($(b).width(q.width()),$(b).height(q.height()))};f.get_additional_classes=function(){return k};f.set_additional_classes=function(a){k=a};f=f.add_standard_widget_functionality(f);f.set_description(d);l.debugging&&(f.debug_string=f.toString(),f.debug_id=l.UTILITIES.generate_unique_id());return f};h.copy=function(b){var c=h.create(this.get_HTML(),this.get_style_attributes().slice(),this.get_description());return this.add_to_copy(c,
b)};h.match=function(b){return this.get_erased&&this.get_erased()?b.match_with_any_element?b.match_with_any_element():"not matched":b.match_with_this_element?b.match_with_this_element(this):"not matched"};h.match_with_any_element=function(){return"matched"};h.match_with_this_element=function(b){return this.get_HTML()===b.get_HTML()?"matched":"not matched"};h.compare_with=function(b){if(b.compare_with_other_element)return b.compare_with_other_element(this)};h.compare_with_other_element=function(b){b=
b.get_HTML().localeCompare(this.get_HTML());return 0>b?-1:0<b?1:b};h.create_backside=function(){return l.element_backside.create(this)};h.get_attribute=function(b){var c=this.get_pending_css(),d;if(c&&c[b]||(c=this.get_transform_css())&&c[b])return c[b];c=this.get_frontside_element();d=c.style[b];""===d&&(d=$(c).css(b));return d?"number"===typeof d?d:d.replace("px",""):0};h.set_attribute=function(b,c,d,h){var f,p;if(!this.get_frontside(!0).get_element())return!1;f=this.get_attribute(b);if(f===c)return!1;
if(p=k(c,b)){if(f===p)return;c=p}d&&l.robot.in_training&&l.robot.in_training.edited(this,{setter_name:"set_attribute",argument_1:b,argument_2:c,toString:"change the '"+b+"' style to "+c+" of",button_selector:".toontalk-element-"+b+"-attribute-input"});this.add_to_css(b,c);h&&(c=this.get_style_attributes(),0>c.indexOf(b)&&c.push(b));this.rerender();return!0};h.dropped_on_style_attribute=function(b,c,d,h){var f,k,s;if(b){f=b.toString();if(b.is_of_type("number")){k=this.get_attribute(c);if("number"===
typeof k)s=k;else if("auto"===k)switch(c){case "left":s=$(this.get_frontside_element()).offset().left;break;case "top":s=$(this.get_frontside_element()).offset().top;break;default:s=0}else s=parseFloat(k);k=b.to_float();switch(f.substring(0,1)){case "-":f=s-k;break;case "*":f=s*k;break;case "/":f=s/k;break;case "^":f=Math.pow(s,k);break;default:f=s+k}this.set_attribute(c,f,!1);(d||h&&h.visible())&&this.get_backside().render()}b.get_infinite_stack()||b.remove();l.robot.in_training&&l.robot.in_training.dropped_on(b,
this.create_attribute_object(c))}};h.create_attribute_object=function(b){var c=".toontalk-element-"+b+"-attribute-input",d=this.get_backside_element(),h;d&&(h=$(d).find(c),0<h.length&&(h.get(0).toontalk_widget=this));c={element_widget:this,attribute:b,get_type_name:function(){return"element attribute"},toString:function(){return"the "+this.attribute+" of "+this.element_widget},get_side_element:function(){if(h&&0<h.length)return h.get(0)},equals:function(c){return b===c.attribute?this.equals(c.element_widget):
!1},visible:function(){return h&&h.is(":visible")},widget_dropped_on_me:function(c,d,h,a){this.element_widget.dropped_on_style_attribute(c,b,h,a)},update_display:function(){h&&h.val(this.element_widget.get_attribute(this.attribute))},render:function(){l.DISPLAY_UPDATES.pending_update(this)}};l.debugging&&(c.debug_id=l.UTILITIES.generate_unique_id());return c};h.update_display=function(){var b=this.get_frontside_element();this.get_backside();var c,d;this.get_erased&&this.get_erased()?$(b).css({opacity:0}):
(this.get_erased&&"0"===$(b).css("opacity")&&$(b).css({opacity:1}),b.children.length===$(b).children(".ui-resizable-handle").length&&(c=document.createElement("div"),c.innerHTML=this.get_HTML(),b.appendChild(c),this.set_image_element(c,b),$(b).addClass("toontalk-element-frontside"),"<"!==c.innerHTML.substring(0,1)&&((d=this.get_additional_classes())&&$(c).addClass(d),$(b).addClass("ui-widget toontalk-plain-text-element"))),l.UTILITIES.on_a_nest_in_a_box(b)&&(this.set_attribute("width",$(b).closest(".toontalk-box-hole").width(),
!1),this.set_attribute("height",$(b).closest(".toontalk-box-hole").height(),!1)),this.apply_css(),this.fire_on_update_display_handlers())};h.toString=function(){return"element whose HTML is '"+l.UTILITIES.maximum_string_length(this.get_HTML(),40)+"'"};h.get_type_name=function(){return"element"};h.get_help_URL=function(){return"docs/manual/elements.html"};h.get_json=function(){var b=[];this.get_style_attributes().forEach(function(c){b.push(c)});return{type:"element",html:encodeURIComponent(l.UTILITIES.remove_z_index(this.get_HTML())),
attributes:b,attribute_values:b.map(this.get_attribute.bind(this)),additional_classes:this.get_additional_classes()}};l.creators_from_json.element=function(b,c){var d=h.create(decodeURIComponent(b.html),b.attributes,b.description),l;l=c&&c.event?["left","top"]:[];b.attribute_values.forEach(function(c,h){var s=b.attributes[h];0>l.indexOf(s)&&d.add_to_css(s,k(c)||c)});b.additional_classes&&d.set_additional_classes(b.additional_classes);return d};h.create_attribute_path=function(b,c){var d=l.path.get_path_to(b.element_widget,
c);return this.extend_attribute_path(d,b.attribute)};h.extend_attribute_path=function(b,c){return{dereference:function(d,h,f){return b.dereference(h||d,void 0,f).create_attribute_object(c)},toString:function(){return"the '"+c+"' property of "+b},get_json:function(){return{type:"path_to_style_attribute",attribute:c,element_widget_path:b.get_json()}}}};l.creators_from_json.path_to_style_attribute=function(b){var c=l.UTILITIES.create_from_json(b.element_widget_path);return h.extend_attribute_path(c,
b.attribute)};h.get_size_attributes=function(){return{width:this.get_attribute("width"),height:this.get_attribute("height")}};h.set_size_attributes=function(b,c){this.set_attribute("width",b);this.set_attribute("height",c)};h.set_location_attributes=function(b,c){this.set_attribute("left",b);this.set_attribute("top",c)};return h}(window.TOONTALK);window.TOONTALK.element_backside=function(l){var h=function(c,d,g){var f=function(a){var b=d.get_style_attributes();0>b.indexOf(a)&&(b.push(a),"left"===
a?(a=d.get_frontside_element(),$(a).on("drag",function(a){var b=d.get_backside_element(),c=d.get_frontside_element();b&&c&&$(b).find(".toontalk-element-left-attribute-input").val(a.originalEvent.clientX)})):"top"===a&&(a=d.get_frontside_element(),$(a).on("drag",function(a){var b=d.get_backside_element(),c=d.get_frontside_element();b&&c&&$(b).find(".toontalk-element-top-attribute-input").val(a.originalEvent.clientY)})))},p=function(a,q){var e=0<=d.get_style_attributes().indexOf(a),n=l.UTILITIES.create_check_box(e,
"toontalk-style-attribute-check-box",a+"&nbsp;","Click to add or remove the '"+a+"' style attribute from the backside of this element."),e=l.UTILITIES.create_anchor_element("i",("transform-origin-x"===a||"transform-origin-y"===a?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin#":b(a)?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform#":"http://www.w3.org/community/webed/wiki/CSS/Properties/")+a),p=document.createElement("li");$(e).addClass("toontalk-help-button toontalk-attribute-help-button");
$(e).css({color:"white"});n.container.appendChild(e);n.button.addEventListener("click",function(b){if(n.button.checked)f(a);else{b=d.get_style_attributes();var e=b.indexOf(a);0<=e&&(b.splice(e,1),h(c,d,g))}k(g,d)});p.appendChild(n.container);q.appendChild(p)},s=function(a,b){var c,d;"string"===typeof a?p(a,b):a.label?(c=document.createElement("h3"),c.textContent=a.label,d=document.createElement("ul"),b.appendChild(c),b.appendChild(d),s(a.sub_menus,d)):a.forEach(function(a){s(a,b)})};$(c).is(".ui-accordion")&&
$(c).accordion("destroy");$(c).empty();s([{label:"Geometry attributes",sub_menus:"left top width height z-index background-position".split(" ")},{label:"Color attributes",sub_menus:["background-color","color","opacity"]},{label:"Font attributes",sub_menus:["font-size","font-weight"]},{label:"Visibility",sub_menus:["display","visibility"]},{label:"Transformations",sub_menus:["rotate","skewX","skewY","transform-origin-x","transform-origin-y"]}],c);$(c).accordion({active:0,heightStyle:"content"});return c},
k=function(b,d){var g=d.get_style_attributes();d.get_frontside_element();var f,h,k;$(b).empty();g.forEach(function(a){var g=d.get_attribute(a),e="toontalk-element-attribute-input toontalk-element-"+a+"-attribute-input";f=document.createElement("tr");b.appendChild(f);h=document.createElement("td");f.appendChild(h);h.appendChild(l.UTILITIES.create_text_element(a));h=document.createElement("td");f.appendChild(h);k=l.UTILITIES.create_text_input(g,e,void 0,"Click here to edit the '"+a+"' style attribute of this element.");
k.button.name=a;k.button.addEventListener("input",function(b){d.set_attribute(a,this.value.trim(),!0)});l.UTILITIES.can_receive_drops(k.container);h.appendChild(k.container)});return b},g=function(b){var d=$("<button>Add or remove style attributes</button>").button();d.addClass("toontalk-show-attributes-chooser-button");d.click(function(g){$(b).is(":visible")?($(b).hide(),d.button("option","label","Add or remove style attributes"),d.attr("title","Click to add widgets for reading and writing style attributes of this element.")):
($(b).show(),d.button("option","label","Hide style attributes list"),d.attr("title","Click to hide the list of attributes that can be added or removed."))});d.attr("title","Click to add widgets for reading and writing style attributes of this element.");return d.get(0)};return{create:function(b){var d=l.backside.create(b),r=d.get_element();b.get_HTML();var f=document.createElement("table"),p=document.createElement("div"),s=g(p),a=l.backside.create_advanced_settings_button(d,b),q=l.UTILITIES.get_current_url_boolean_parameter("elementHTML",
!1),e=q?"get_HTML":"get_text",n=d.update_display,z,D;b.update_display();z=b[e]().trim();0<z.length&&(D=l.UTILITIES.create_text_area(z,"toontalk-html-input","","Type here to edit the text."),z=function(a){a=D.button.value.trim();b.get_frontside_element();var e=q?"set_HTML":"set_text";b[e](a)&&l.robot.in_training&&l.robot.in_training.edited(b,{setter_name:e,argument_1:a,toString:"change the text to "+a+" of",button_selector:".toontalk-html-input"})},$(D.container).resizable(),$(D.container).css({width:"100%"}),
$(D.button).css({width:"100%"}),D.button.addEventListener("change",z),D.button.addEventListener("mouseout",z),r.appendChild(D.container));d.get_attributes_chooser=function(){return p};h(p,b,f);k(f,b);r.appendChild(p);r.appendChild(s);r.appendChild(f);r.appendChild(a);$(p).hide();$(p).addClass("toontalk-attributes-chooser");d.update_display=function(){D&&$(D.button).val(b[e]());k(f,b);$(p).is(":visible")&&h(p,b,f);n()};$(r).find(".toontalk-hide-backside-button").click(function(a){$(p).hide()});d.add_advanced_settings();
return d}}}(window.TOONTALK)})();window.TOONTALK.sensor=function(b){var l=Object.create(b.widget),h=function(b,g){"element"===b.get_type_name()&&(b.set_attribute("font-size",.5*$(g.get_frontside_element(!0)).height(),!1,!0),b.set_additional_classes("toontalk-string-value-from-sensor"),g.visible()&&b.rerender())};l.create=function(k,g,c,d,r,f){var p=b.nest.create(c,d,void 0,"sensor"),s=p.get_json,a=p.update_display,q=p.copy,e=function(a){var c=a[g],e=p.visible(),d=$(p.get_frontside_element()).closest(".toontalk-top-level-backside"),
f;if("keyCode"===g){if(16===c)return;c=String.fromCharCode(c);a.shiftKey||(c=c.toLowerCase())}switch(typeof c){case "number":f=b.number.create(Math.round(c),1);break;case "string":f=b.element.create(c,void 0,void 0,"toontalk-string-value-from-sensor");h(f,p);break;case "boolean":f=b.element.create(c.toString(),void 0,void 0,"toontalk-string-value-from-sensor");h(f,p);break;case "undefined":b.UTILITIES.report_internal_error("No "+g+" in sensor "+l);return}e?(a=b.bird.create(),p.add_to_top_level_backside(a),
a.animate_delivery_to(f,p,p,d.width()/2,d.height())):p.add_to_contents(f)}.bind(this);p.copy=function(a){var e;if(a&&this.has_contents())return q.call(this,!0);e=b.sensor.create(k,g,c,void 0,r,a?void 0:f);return p.add_to_copy(e,a)};p.get_json=function(a){var c=s.call(this,a);c.type="sensor";c.event_name=k;c.attribute=g;c.active=r;c.sensor_of=f&&b.UTILITIES.get_json(f,a);return c};p.update_display=function(){var b=$(this.get_frontside_element());a.call(this);r||b.is(".toontalk-top-level-resource")?
(b.addClass("toontalk-sensor-nest"),b.removeClass("toontalk-sensor-inactive-nest")):(b.addClass("toontalk-sensor-inactive-nest"),b.removeClass("toontalk-sensor-nest"));b.removeClass("toontalk-empty-nest")};p.get_type_name=function(){return"sensor"};p.get_help_URL=function(){return"docs/manual/sensors.html"};p.toString=function(){return"a sensor of "+g+" for "+k+" sensors"};p.get_active=function(){return r};p.set_active=function(a,b){if(r!==a||b)a?f?f.get_frontside_element().addEventListener(k,e):
window.addEventListener(k,e):f?f.get_frontside_element().removeEventListener(k,e):window.removeEventListener(k,e),r=a};p.set_active(r,!0);p.create_backside=function(){return b.sensor_backside.create(this)};p.get_event_name=function(){return k};p.set_event_name=function(a){var b=r;k&&r&&this.set_active(!1);k=a;b&&this.set_active(!0)};p.get_attribute=function(){return g};p.set_attribute=function(a){g=a};p.match=function(a){return"not matched"};p.set_sensor_of=function(a){f=a};return p};b.creators_from_json.sensor=
function(k,g){var c=b.UTILITIES.create_array_from_json(k.contents,g),d=b.sensor.create(k.event_name,k.attribute,k.description,c,!1);k.sensor_of?setTimeout(function(){d.set_sensor_of(b.UTILITIES.create_from_json(k.sensor_of,g));d.set_active(k.active)},1):d.set_active(k.active);0<c.length&&setTimeout(function(){c.forEach(function(b){h(b.get_widget(),d)})},500);return d};return l}(window.TOONTALK);
window.TOONTALK.sensor_backside=function(b){return{create:function(l){var h=b.UTILITIES.create_text_input(l.get_event_name(),"toontalk-sensor-event-name-input","Event name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;","Type here the event name.","https://developer.mozilla.org/en-US/docs/Web/Events/"+l.get_event_name()),k=b.UTILITIES.create_text_input(l.get_attribute(),"toontalk-sensor-event-attribute-input","Event attribute","Type here the event attribute name.","https://developer.mozilla.org/en/docs/Web/API/Event"),
g=b.UTILITIES.create_check_box(l.get_active(),"toontalk-sensor-active-check-box","Listening to events","Check the box if you want to make this sensor active."),c=b.nest_backside.create(l),d=c.get_element(),r=$(d).find(".toontalk-settings-backside-button").get(0);h.button.addEventListener("change",function(){l.set_event_name(h.button.value.trim())});k.button.addEventListener("change",function(){l.set_attribute(k.button.value.trim())});$(g.button).click(function(c){var d=g.button.checked;l.set_active(d);
b.robot.in_training&&b.robot.in_training.edited(robot,{setter_name:"set_active",argument_1:d,toString:"change to "+(d?"active":"inactive")+" of the "+l,button_selector:".toontalk-sensor-active-check-box"});l.render();c.stopPropagation()});d.insertBefore(h.container,r);d.insertBefore(k.container,r);d.insertBefore(g.container,r);return c}}}(window.TOONTALK);window.TOONTALK.tool=function(b){return{add_listeners:function(l,h){var k,g,c,d,r,f=function(a){var d=s(a),e;a.preventDefault();var f=0,h=0;20>a.clientX?f=-20:a.clientX+20>window.innerWidth&&(f=20);20>a.clientY?h=-20:a.clientY+20>window.innerHeight&&(h=20);window.scrollBy(f,h);l.style.left=a.pageX-f-g+"px";l.style.top=a.pageY-h-c+"px";if(d&&d.is_of_type("top-level"))r&&(b.UTILITIES.remove_highlight(),r=void 0);else{if(d&&(e=d.get_frontside_element(),e===r))return;r=e;b.UTILITIES.highlight_element(r)}},
p=function(a){var c=s(a);a.preventDefault();r&&b.UTILITIES.remove_highlight();c&&c.add_copy_to_container&&(h.apply_tool(c,a),c.backup_all());!c&&h.nothing_under_tool&&h.nothing_under_tool();$(l).removeClass("toontalk-tool-held");$(l).addClass("toontalk-tool-returning");b.UTILITIES.add_one_shot_event_handler(l,"transitionend",1E3,function(){$(l).removeClass("toontalk-tool-returning")});setTimeout(function(){l.style.left=k.left+"px";l.style.top=k.top+"px"},1);document.removeEventListener("mousemove",
f);document.removeEventListener("mouseup",p)},s=function(a){var b;$(l).hide();a=document.elementFromPoint(a.pageX-(window.pageXOffset+g),a.pageY-(window.pageYOffset+c)+d/2);for($(l).show();a&&!a.toontalk_widget&&(!$(a).is(".toontalk-backside")||$(a).is(".toontalk-top-level-backside"));)a=a.parentNode;a&&(b=a.toontalk_widget);if(b)return a=b.get_type_name(),b&&"empty hole"===a?b.get_parent_of_frontside():b};l.addEventListener("mousedown",function(a){var b=l.getBoundingClientRect();g=a.clientX-b.left;
c=a.clientY-b.top;d=b.height;a.preventDefault();$(l).addClass("toontalk-tool-held");k=$(l).offset();document.addEventListener("mousemove",f);document.addEventListener("mouseup",p)})}}}(window.TOONTALK);window.TOONTALK.vacuum=function(b){var l=Object.create(null),h={suck:"Drag this vacuum over the thing you want to remove. Click or type 'e' to switch to erasing. Type 'r' to restore previously removed or erased things.",erase:"Drag this vacuum over the thing you want to erase (or un-erase). Type 's' to switch to sucking. Click or type 'r' to restore contents.",restore:"Drag this over the work area. Each time you release it a widget is restored. Click or type 's' to switch to sucking. Type 'e' to switch to erasing."},
k={suck:"toontalk-vacuum-s",erase:"toontalk-vacuum-e",restore:"toontalk-vacuum-r"},g={suck:"erase",erase:"restore",restore:"suck"};l.create=function(){var c,d,l,f=[],p=function(a){d!==a&&(d=a,$(c).removeClass(l),l=k[d],$(c).addClass(l),s())},s=function(){c.title="restore"===d&&0===f.length?"The vacuum is empty. Type 'r' to switch to removing. Type 'e' to switch to erasing.":h[d]};return{apply_tool:function(a,g){var e,h;"suck"===d?a.remove&&"top-level"!==a.get_type_name()&&(b.robot.in_training&&b.robot.in_training.removed(a),
a.remove(g),f.push(a)):"erase"===d?"top-level"!==a.get_type_name()&&(a.get_frontside_element(),e=!a.get_erased(),a.set_erased(e,!0),b.robot.in_training&&b.robot.in_training.set_erased(a,e)):"restore"===d&&0<f.length&&(e=f.pop(),h=a.add_to_top_level_backside(e,!0),e=$(c).offset(),e.left-=$(h).width(),b.UTILITIES.set_absolute_position($(h),e))},nothing_under_tool:function(){p(g[d])},get_element:function(){c||(c=document.createElement("div"),$(c).addClass("toontalk-vacuum"),b.tool.add_listeners(c,this),
p("suck"),document.addEventListener("keyup",function(a){a=String.fromCharCode(a.keyCode);"s"===a||"S"===a?p("suck"):"e"===a||"E"===a?p("erase"):"r"!==a&&"R"!==a||p("restore")}),s());return c}}};b.creators_from_json.vacuum=function(c,d){var g=b.vacuum.create();c.mode&&setTimeout(function(){g.set_mode(c.mode)},1);return g};return l}(window.TOONTALK);window.TOONTALK.wand=function(b){var l=Object.create(null);l.create=function(){var h;return{apply_tool:function(b){"top-level"!==b.get_type_name()&&b.add_copy_to_container()},get_element:function(){h||(h=document.createElement("div"),$(h).addClass("toontalk-wand"),h.title="Drag this magic wand over the thing you want to copy.",b.tool.add_listeners(h,this));return h}}};b.creators_from_json.wand=function(){return b.wand.create()};return l}(window.TOONTALK);window.TOONTALK.DISPLAY_UPDATES=function(b){var l=[],h=0;return{pending_update:function(b){b.update_display&&(0<=l.indexOf(b)||l.push(b))},update_display:function(){var h=l,g=function(b,d){$(b).children().each(function(b,c){$(c).css({"z-index":d+1});g(c,d+1)})};l=[];0!==h.length&&h.forEach(function(c){var d=c.get_frontside_element&&c.get_frontside_element(),h,f,k;c.update_display();h=$(d).parent().closest(".toontalk-side");h.is("*")&&(f=b.UTILITIES.get_style_numeric_property(d,"z-index"),k=b.UTILITIES.get_style_numeric_property(h.get(0),
"z-index"),k||(k=b.UTILITIES.next_z_index(),h.css({"z-index":k})),!f||h.is(".toontalk-top-level-backside")?(f=b.UTILITIES.next_z_index(),$(d).css({"z-index":f})):f>=k&&(f=k+1,$(d).css({"z-index":f})),g(d,f));d&&!$(d).is(".toontalk-top-level-resource, .toontalk-bird, .toontalk-nest, .toontalk-box-hole, .toontalk-plain-text-element, .toontalk-conditions-contents, .toontalk-robot, .toontalk-widget, .toontalk-held-by-robot")&&setTimeout(function(){h.is(".toontalk-box-hole")?$(d).is(".ui-resizable")&&
$(d).resizable("destroy"):$(d).is(".ui-resizable")||b.UTILITIES.make_resizable($(d),c)},1)})},run_cycle_is_over:function(){var b=(new Date).getTime();20<=b-h&&(this.update_display(),h=b)}}}(window.TOONTALK);window.TOONTALK.actions=function(b){b.creators_from_json.body=function(l){var h=b.actions.create();h.initialise_steps(b.UTILITIES.create_array_from_json(l.steps,{body:h}));return h};return{create:function(l){var h=Object.create(this),k=[];l||(l=[]);h.copy=function(){return b.actions.create(b.UTILITIES.copy_array(l))};h.get_steps=function(){return l};h.initialise_steps=function(b){l=b};h.is_empty=function(){return 0===l.length};h.reset_steps=function(){l=[];this.reset_newly_created_widgets()};h.reset_newly_created_widgets=
function(){k=[]};h.add_step=function(b,c){l.push(b);c&&this.add_newly_created_widget(c)};h.add_newly_created_widget_if_new=function(b){0<=k.indexOf(b)||this.add_newly_created_widget(b)};h.add_newly_created_widget=function(g){b.debugging&&0<=k.indexOf(g)?console.log("add_newly_created_widget called with not new widget."):k.push(g)};h.get_newly_created_widgets=function(){return k};h.get_path_to=function(g,c){var d,h;k.some(function(f,k){if(f===g)return d=b.newly_created_widgets_path.create(k),!0;if(f.get_path_to&&
(h=f.get_path_to(g,c)))return d=b.newly_created_widgets_path.create(k),d.next=h,!0});return d};h.dereference=function(g){b.debugging&&!k[g]&&b.UTILITIES.report_internal_error("Expected to find the "+(g+1)+"th newly created widget.");return k[g]};return h},run_unwatched:function(b,h,k,g,c){var d=this.get_steps();c||(c=0);g.run_next_step=function(){if(c<d.length){var r=d[c];c++;r.run_unwatched(b,h,g)}else g.get_run_once()||g.get_first_in_team().run(b,h,k)};g.run_next_step()},run_watched:function(l,
h,k,g){var c=this.get_steps(),d=g.get_frontside_element(),r=d.parentElement,f=function(){$(d).addClass("toontalk-side-animating");b.UTILITIES.set_position_relative_to_top_level_backside($(d),s);setTimeout(function(){r.appendChild(d);b.UTILITIES.set_absolute_position($(d),s);g.set_animating(!1);g.get_run_once()||g.get_first_in_team().run(l,h,k);g.render()},1E3)},p=0,s=$(d).offset(),a=$(d).position(),q=$(d).width(),e=$(d).height(),n=$(d).closest(".toontalk-backside"),z=n.get(0).getBoundingClientRect(),
D=$(d).closest(".toontalk-top-level-backside").offset(),y=l.get_backside();0===q&&($(d).css({width:"",height:""}),q=$(d).width(),e=$(d).height());if(s.left<z.left-D.left||s.top<z.top-D.top||s.left+q>z.right+D.left||s.top+e>z.bottom+D.top)s=n.offset(),s.left+=n.width()/2,s.top+=n.height()-e;g.start_position=a;g.run_next_step=function(){y&&y.visible()?setTimeout(function(){if(p<c.length){var a=c[p];p++;a.run_watched(l,h,g);g.get_thing_in_hand()&&(g.get_thing_in_hand().save_dimensions(),g.render())}else f()},
500):(g.set_animating(!1),$(d).css({width:"",height:""}),d.style.left=a.left+"px",d.style.top=a.top+"px",r.appendChild(d),this.run_unwatched(l,h,k,g,p))}.bind(this);g.set_animating(!0,s);g.run_next_step();return!0},toString:function(){var b="",h=this.get_steps();h.forEach(function(k,g){b+=k.toString();b=g===h.length-2?b+" and \n":g<h.length-2?b+", \n":b+"."});return b},get_json:function(l){return{type:"body",steps:b.UTILITIES.get_json_of_array(this.get_steps(),l)}}}}(window.TOONTALK);
window.TOONTALK.newly_created_widgets_path=function(b){b.creators_from_json.newly_created_widgets_path=function(l){return b.newly_created_widgets_path.create(l.index)};return{create:function(l){return{dereference:function(h,k,g){h=g.get_body().dereference(l);return this.next?b.path.dereference_path(this.next,h,k,g):h},toString:function(){var b;switch(l){case 0:b="first";break;case 1:b="second";break;case 2:b="third";break;default:b=l+1+"th"}return"the "+b+" widget he created"},get_json:function(){return{type:"newly_created_widgets_path",
index:l}}}}}}(window.TOONTALK);window.TOONTALK.robot_action=function(b){var l={copy:function(b,c,d,a){a.add_newly_created_widget(b.copy());return!0},"pick up":function(b,c,d,a){a.set_thing_in_hand(b);return!0},"pick up a copy of":function(b,c,d,a){b=b.copy();a.add_newly_created_widget(b);a.set_thing_in_hand(b);return!0},"drop it on":function(c,d,g,a,h){if(c)if(d=a.get_thing_in_hand()){if(d.drop_on)return d.drop_on(c,!1,void 0,a),a.set_thing_in_hand(void 0),c.visible&&c.visible()&&c.render(),d.robot_waiting_before_next_step===a?
(h&&h.running_watched||(d.robot_waiting_before_next_step=void 0),!1):!0;b.UTILITIES.report_internal_error("Thing in robot's hand ("+d+") doesn't handle 'drop_on'. Robot that "+a)}else b.UTILITIES.report_internal_error("The robot that '"+a.toString()+"' is executing drop_on but has nothing in its hand.");else b.UTILITIES.report_internal_error("The robot that '"+a.toString()+"' is executing drop_on but doesn't know where to drop what its holding")},remove:function(b,c,d,a){b.remove();return!0},erased_widget:function(b,
c,d,a,g){b.set_erased(g.erased);return!0},edit:function(c,d,g,a,h){if(c[h.setter_name])return h.argument_2?c[h.setter_name].call(c,h.argument_1,h.argument_2,c.visible()):c[h.setter_name].call(c,h.argument_1,c.visible()),!0;b.UTILITIES.report_internal_error(c+" cannot be edited.")},"add to the top-level backside":function(b,c,d,a,g){a.visible()||(a=b.get_frontside_element(!0),d=$(c.get_frontside_element()).position(),c=$(c.get_frontside_element()).closest(".toontalk-top-level-backside").get(0),$(a).css({left:d.left,
top:d.top}),c.appendChild(a),c.toontalk_widget.add_backside_widget(b),b.animate_to_element(c));return!0}},h=function(b,c,d,a,g){c=a.get_thing_in_hand();a.get_frontside_element();d=b.get_widget();var e=b.get_element();b=$(e).width()/2;e=$(e).height()/2;a.animate_to_widget(d,g,.25,b,e);c&&a.render()},k=function(b,c){var d=b.get_backside_element(!0);return $(d).find(c).get(0)},g=function(b,c,d,a,g,e){var h=k(b,e),l=a.get_frontside_element(),r=h&&$(h).is(":visible"),y=function(){g();$(h).addClass("ui-state-active");
setTimeout(function(){$(h).removeClass("ui-state-active");!r&&b.get_backside()&&b.get_backside().hide_backside();a.run_next_step()},500)};c=function(){a.animate_to_element(h,y,.25,0,-$(l).height())};!r&&b.open_backside?b.open_backside(c):c()},c=function(b,c,d,a,g,e){a.get_frontside_element();a.carrying_tool=e;a.update_display();a.animate_to_element(b.get_frontside_element(),function(){g();a.carrying_tool=void 0;a.update_display();a.run_next_step()},.25,0,0)},d=function(b,d,g,a,h){var e=b.get_parent_of_frontside();
c(b,d,g,a,function(){h();e&&"top-level"!==e.get_widget().get_type_name()&&e.update_display&&e.update_display();b.render()},"toontalk-vacuum-ready-small")},r={copy:function(b,d,g,a,h){c(b,d,g,a,function(){h();b.add_copy_to_container(a.get_recently_created_widget())},"toontalk-wand-small")},"pick up":function(c,d,g,a,k){var e=c.get_frontside_element(),l=function(){k();a.run_next_step()};"empty hole"===c.get_type_name()?b.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):(c.save_dimensions(),
$(e).css({width:e.offsetWidth+"px",height:e.offsetHeight+"px"}),h(c,d,g,a,l))},"pick up a copy of":function(b,c,d,a,g){h(b,c,d,a,function(){g();a.get_recently_created_widget().set_visible(!0);a.update_display();a.run_next_step()})},"drop it on":function(c,d,g,a,k){var e=a.get_thing_in_hand(),l;e?(l=$(e.get_frontside_element()),h(c,d,g,a,function(){var c=l.offset();l.removeClass("toontalk-held-by-robot");k();e.drop_on&&($(a.get_frontside_element()).closest(".toontalk-top-level-backside").append(l.get(0)),
b.UTILITIES.set_absolute_position(l,c),e.restore_dimensions(),e.robot_waiting_before_next_step===a?e.robot_waiting_before_next_step=void 0:(a.set_thing_in_hand(void 0),a.run_next_step()),a.rerender())})):(b.UTILITIES.report_internal_error("Expected the robot to be holding something."),console.log("The robot is "+a),h(c,d,g,a,k))},remove:d,erased_widget:d,edit:function(b,c,d,a,h,e){g(b,c,d,a,function(){b.get_backside()&&b.get_backside().update_display();h()},e.button_selector)},"add to the top-level backside":function(b,
c,d,a,g){g();a.run_next_step()}};b.creators_from_json.robot_action=function(c,d,g){return c.additional_info?b.robot_action.create(b.path.create_from_json(c.path,g),c.action_name,c.additional_info):b.robot_action.create(b.path.create_from_json(c.path,g),c.action_name)};return{create:function(c,d,g){var a=Object.create(this),h=l[d],e=r[d];e||(e=function(a,b,c,e,d){setTimeout(function(){continuation(a)},3E3)});c||b.UTILITIES.report_internal_error("path undefined in "+d+" action");h||b.UTILITIES.report_internal_error("no run_function for "+
d);a.run_unwatched=function(a,e,d){var k=b.path.dereference_path(c,a,e,d);if(!k)return b.UTILITIES.report_internal_error("Unable to dereference path: "+b.path.toString(c)+" in context: "+a.toString()),!1;h(k,a,e,d,g)&&d.run_next_step()};a.run_watched=function(a,d,k){var l=b.path.dereference_path(c,a,d,k),p=function(){g||(g={});g.running_watched=!0;h(l,a,d,k,g)};l?(l.set_visible(!0),e(l,a,d,k,p,g)):b.UTILITIES.report_internal_error("Unable to dereference the path: "+b.path.toString(c)+" in context: "+
a.toString())};a.toString=function(){return d+" "+b.path.toString(c)};a.get_json=function(a){return{type:"robot_action",action_name:d,path:b.path.get_json(c,a),additional_info:g}};return a}}}(window.TOONTALK);window.TOONTALK.queue=function(b){return{create:function(){var b=Object.create(this);b.to_run=[];return b},enqueue:function(l){b.debugging&&this.to_run.forEach(function(b){b.robot===l.robot&&(console.log("The same robot is being queued twice."),console.log("Robot is "+b.robot))});return this.to_run.push(l)},maximum_run:1,paused:!1,run:function(l,h){for(var k,g=(new Date).getTime()+this.maximum_run;0<this.to_run.length&&!this.paused;){k=(new Date).getTime();if(k>=g)break;k=this.to_run.shift();k.robot.run_actions(k.context,
k.top_level_context,k.queue);if(l&&(l-=1,0===l)){h&&h();break}}b.DISPLAY_UPDATES.run_cycle_is_over();setTimeout(function(){this.run(l,h)}.bind(this),0)}}}(window.TOONTALK);window.TOONTALK.QUEUE=window.TOONTALK.queue.create();window.TOONTALK.path=function(b){b.creators_from_json["path.to_entire_context"]=function(){return b.path.to_entire_context()};b.creators_from_json["path.top_level_backside"]=function(){return b.path.top_level_backside};b.creators_from_json["path.to_backside_widget_of_context"]=function(l){return b.path.get_path_to_backside_widget_of_context(l.type_name)};b.creators_from_json["path.to_resource"]=function(l,h){return b.path.get_path_to_resource(b.UTILITIES.create_from_json(l.resource,h))};return{get_path_to:function(l,
h){var k=function(g,c){var d=c.get_context(),h=c.get_body(),f,k;if(d===g)return b.path.to_entire_context();k=g.get_type_name();if("top-level"===k)return b.path.top_level_backside;if(f=h.get_path_to(g,c))return f;if("element attribute"===k)return b.element.create_attribute_path(g,c);if(d.get_path_to&&(h=d.get_path_to(g,c)))return f=b.path.to_entire_context(),f.next=h,f;d.backside_widgets.some(function(d){d=d.get_widget();var a;if(d===g||d.top_contents_is&&d.top_contents_is(g))return f=b.path.get_path_to_backside_widget_of_context(d.get_type_name()),
c.add_to_backside_conditions(d),!0;if(d.get_path_to&&(a=d.get_path_to(g,c)))return f=b.path.get_path_to_backside_widget_of_context(d.get_type_name()),f.next=a,c.add_to_backside_conditions(d),!0});return f?f:b.path.get_path_to_resource(g.copy())}(l,h);k&&l.dereference_contents&&(b.path.path_end(k).not_to_be_dereferenced=!0);!k||"pick up"!==h.current_action_name&&"remove"!==h.current_action_name||(b.path.path_end(k).removing_widget=!0);return k},path_end:function(b){for(;b.next;)b=b.next;return b},
dereference_path:function(b,h,k,g){return b?b.dereference?b.dereference(h,k,g):h.dereference(b,k,g):h},continue_dereferencing_path:function(b,h,k,g){return b.next?h.dereference_contents&&!b.next.not_to_be_dereferenced?h.dereference_contents(b.next,k,g):h.dereference(b.next,k,g):h.dereference_contents&&!b.not_to_be_dereferenced?h.dereference_contents(b,k,g):h},toString:function(l){return l.next?(b.path.toString(l.next),b.path.toString(l.next)+"of "+l.toString()):l.toString()},get_json:function(l,h){var k;
if(!l.get_json)return l;k=l.get_json(h);l.next&&(k.next_path=b.path.get_json(l.next,h));l.removing_widget&&(k.removing_widget=!0);l.not_to_be_dereferenced&&(k.not_to_be_dereferenced=!0);return k},to_entire_context:function(){return{dereference:function(l,h,k){return b.path.continue_dereferencing_path(this,l,h,k)},toString:function(){return"what he's working on"},get_json:function(){return{type:"path.to_entire_context"}}}},get_path_to_resource:function(l,h){l=l.get_widget();return{dereference:function(h,
g,c){h=l.copy();var d,r,f;c.add_newly_created_widget(h);c.visible()&&!l.visible()&&(d=b.UTILITIES.find_resource_equal_to_widget(l))&&(f=h.get_frontside_element(),r=$(d).position(),setTimeout(function(){$(f).css({left:r.left,top:r.top,width:d.offsetWidth,height:d.offsetHeight})},0));return h},toString:function(){return b.UTILITIES.add_a_or_an(l.toString())},get_json:function(h){return{type:"path.to_resource",resource:b.path.get_json(l,h)}}}},get_path_to_backside_widget_of_context:function(l){return{dereference:function(h,
k,g){var c;h.backside_widgets.some(function(b){if(b.get_widget().is_of_type(l))return c=b.get_widget(),!0});if(c)return b.path.continue_dereferencing_path(this,c,k,g)},toString:function(){return"the "+l+" on the back of what he's working on"},get_json:function(){return{type:"path.to_backside_widget_of_context",type_name:l}}}},create_from_json:function(l,h){var k=b.UTILITIES.create_from_json(l,h),g;l.next_path&&(g=b.UTILITIES.create_from_json(l.next_path,h),l.next_path.removing_widget&&(g.removing_widget=
!0),l.next_path.not_to_be_dereferenced&&(g.not_to_be_dereferenced=!0),k.next=g);l.removing_widget&&(k.removing_widget=!0);l.not_to_be_dereferenced&&(k.not_to_be_dereferenced=!0);return k},top_level_backside:{dereference:function(b,h,k){return b.ancestor_of_type("top-level")},toString:function(){return"the top-level backside"},get_json:function(){return{type:"path.top_level_backside"}}}}}(window.TOONTALK);window.TOONTALK.UTILITIES=function(b){var l,h=100,k=(new Date).getTime(),g,c=function(a,c){var e=a.view.backside,d=c.get_backside_widgets(),f=c.get_type_name();"top-level"===f?e?(f="a work area containing ",0===d.length?f="an empty work area":(f=1===d.length?f+"one thing: ":f+(d.length+" things: "),g=d.length,d.forEach(function(a){g--;f+=b.UTILITIES.add_a_or_an(a.get_type_name());1===g?f+=", and ":1<g&&(f+=", ")}))):f="a top-level widget":(f=b.UTILITIES.add_a_or_an(f),e&&(f="the back of "+f));return"<div class='toontalk-json'>\nThis will be replaced by "+
f+".\n<div style='display:none;'>"+JSON.stringify(a,null,"  ")+"</div></div>"},d=function(a){var b=a.indexOf("{"),c=a.lastIndexOf("}");if(!(0>b||0>c))return a.substring(b,c+1)},r=function(a,c,e,d,f,g,h,k,l,p){var r,s,x;e.set_visible(!0);if(a.is(".toontalk-backside")){if(e.is_of_type("top-level")){r=h.semantic.backside_widgets;s=h.shared_widgets;x=a.get(0);a=e.get_backside_widgets().slice();a.forEach(function(a,b){var c=a.get_widget(),f,g,h,k,l,q,p;e.remove_backside_widget(c,a.is_backside());f=0<=
r[b].widget.shared_widget_index?s[r[b].widget.shared_widget_index].view:r[b].widget.view;a.is_backside()?(g=c.get_backside_element(!0),h=f.backside_left,k=f.backside_top,l=f.backside_width,q=f.backside_height):(g=c.get_frontside_element(!0),h=f.frontside_left,k=f.frontside_top,l=f.frontside_width,q=f.frontside_height);d.add_backside_widget(c,a.is_backside());x.appendChild(g);p=$(g).position();$(g).css({left:p.left+h,top:p.top+k,width:l,height:q});a.is_backside()&&(c.backside_geometry=f.backside_geometry,
c.apply_backside_geometry())}.bind(this));return}e?d.get_backside().widget_dropped_on_me(e,p,g):b.UTILITIES.report_internal_error("No source_widget");k||(k=0);l||(l=0);c.css({left:g.pageX-(f.left+k),top:g.pageY-(f.top+l)});h&&h.semantic.running&&e.set_running(!0)}else if(a.is(".toontalk-drop-area"))c.addClass("toontalk-widget-in-drop_area"),a.append(c.get(0)),c.is(".toontalk-robot")&&a.data("drop_area_owner").set_next_robot(b.UTILITIES.widget_from_jquery(c));else{if(c.is(".toontalk-backside-of-top-level"))return;
if(d){if(x=a.closest(".toontalk-top-level-backside").get(0),x.appendChild(c.get(0)),f=$(x).offset(),c.css({left:g.pageX-(f.left+k),top:g.pageY-(f.top+l)}),!e.drop_on||!e.drop_on(d,p,g))if(!d.widget_dropped_on_me||!d.widget_dropped_on_me(e,p,g))if(k=a.closest(".toontalk-top-level-backside"),0<k.length&&(d=b.UTILITIES.widget_from_jquery(k)))d.get_backside().widget_dropped_on_me(e,p,g),c.css({left:a.position().left,top:a.position().top+a.height()})}else{b.UTILITIES.report_internal_error("target element has no 'owner'");
return}}b.UTILITIES.remove_highlight()},f=function(a,c,e,f,g){var h=new FileReader,k=0===a.type.indexOf("image"),l,p;h.onloadend=function(){if(k)l=b.element.create("<img src='"+h.result+"' alt='"+a.name+"'/>");else{if(p=d(h.result))try{l=b.UTILITIES.create_from_json(JSON.parse(p))}catch(s){}l||(l=b.element.create(h.result))}r(c,$(l.get_frontside_element(!0)),l,e,f,g)};k?h.readAsDataURL(a):h.readAsText(a)},p=function(){l&&(l.removeClass("toontalk-being-dragged"),l.find("*").removeClass("toontalk-ignore-events"),
setTimeout(function(){l=void 0},1))},s=function(a,b){if(a===b)return!0;if(a.parentNode)return s(a.parentNode,b)};$(document).ready(function(){var a=!1,c=0;b.debugging=b.UTILITIES.get_current_url_boolean_parameter("debugging",!1);$(".toontalk-json").each(function(e,d){var f=d.textContent,g,h,k,l;if(f)if(f=f.substring(f.indexOf("{"),f.lastIndexOf("}")+1),g=JSON.parse(f),h=b.UTILITIES.create_from_json(g)){d.textContent="";if(h.get_type_name)if(h.is_of_type("top-level")){c++;if(!b.no_local_storage){f=
b.UTILITIES.current_URL();1<c&&(f+="#"+c);if(b.UTILITIES.get_current_url_boolean_parameter("reset",!1))try{window.localStorage.removeItem(f)}catch(p){b.UTILITIES.display_message("Error removing previous state. Error message is "+p)}else{try{k=window.localStorage.getItem(f)}catch(r){l="Error reading previous state. Error message is "+r,b.UTILITIES.is_internet_explorer()?console.error(l):b.UTILITIES.display_message()}k&&(g=JSON.parse(k),h=b.UTILITIES.create_from_json(g))}h.local_storage_key=f}k=h.get_backside(!0);
k=k.get_element();$(d).replaceWith(k);$(k).css({width:g.view.backside_width,height:g.view.backside_height,"background-color":g.view.background_color,"border-width":g.view.border_width});a=!0}else $(d).addClass("toontalk-top-level-resource"),k=h.get_frontside_element(),$(k).addClass("toontalk-top-level-resource").css({position:"relative"}),d.appendChild(k);else d.appendChild(h.get_element());h.set_active&&h.set_active(!1);setTimeout(function(){h.update_display&&h.update_display();g.semantic.running&&
h.set_running(!0)},1)}else b.UTILITIES.report_internal_error("Could not recreate a widget from this JSON: "+f)});a||$(document).click(function(){$(".toontalk-frontside").each(function(a,b){var c=b.toontalk_widget;c&&c.set_running&&c.set_running(!1)})});b.QUEUE.run();window.addEventListener("beforeunload",function(a){b.UTILITIES.backup_all_top_level_widgets(!0)});b.UTILITIES.add_test_all_button()});return{create_from_json:function(a,c){var e,d,f,g,h;if(a){a.shared_widgets&&(c||(c={}),c.json_of_shared_widgets=
a.shared_widgets,c.shared_widgets=[]);if(a.widget)return e=b.UTILITIES.create_from_json(a.widget,c),a.is_backside?e.get_backside(!0):e;if(c&&c.shared_widgets&&0<=a.shared_widget_index){if(e=c.shared_widgets[a.shared_widget_index])return e;e=c.json_of_shared_widgets[a.shared_widget_index];e=b.UTILITIES.create_from_json(e,c);return c.shared_widgets[a.shared_widget_index]=e}(g=a.semantic)||(g=a);f=a.view;if(0<=g.shared_widget_index)return b.UTILITIES.create_from_json(c.json_of_shared_widgets[g.shared_widget_index],
c);if(b.creators_from_json[g.type]){c||(c={});f?c.json_view=f:f=c.json_view;if((e=b.creators_from_json[g.type](g,c))&&e.get_backside){g.erased&&(b.widget.erasable(e),e.set_erased(g.erased));g.infinite_stack&&e.set_infinite_stack(g.infinite_stack);if(f&&f.frontside_width)if(d=f.backside?e.get_backside(!0).get_element():e.get_frontside_element(),h={width:f.frontside_width,height:f.frontside_height},"element"===g.type)e.on_update_display(function(){$(d).css(h)});else $(d).css(h);f&&f.saved_width&&(e.saved_width=
f.saved_width,e.saved_height=f.saved_height);f&&f.backside_geometry&&(e.backside_geometry=f.backside_geometry);g.backside_widgets&&(f=this.create_array_from_json(g.backside_widgets,c),e.set_backside_widget_sides(f,g.backside_widgets.map(function(a){return 0<=a.widget.shared_widget_index?c.json_of_shared_widgets[a.widget.shared_widget_index].view:a.widget.view})))}return e}b.UTILITIES.report_internal_error("JSON type '"+g.type+"' not supported. Perhaps a JavaScript file implementing it is missing.")}},
create_array_from_json:function(a,c){var e=[];a.forEach(function(a,d){e[d]=a?b.UTILITIES.create_from_json(a,c):a});return e},get_json_of_array:function(a,c){var e=[];a.forEach(function(a,d){a.is_backside&&a.is_backside()?e[d]={widget:b.UTILITIES.get_json(a.get_widget(),c),is_backside:!0}:e[d]=a.get_type_name?{widget:b.UTILITIES.get_json(a,c)}:a.get_json(c)});return e},get_json_top_level:function(a){var c={widgets_encountered:[],shared_widgets:[],json_of_widgets_encountered:[]},e=b.UTILITIES.get_json(a,
c);0<c.shared_widgets.length&&(e.shared_widgets=c.shared_widgets.map(function(d,f){var g=function(a){a=c.widgets_encountered.indexOf(a);return c.json_of_widgets_encountered[a]},h=function(a){return g(c.shared_widgets[a])},k=g(d);a===d?(k={semantic:k.semantic,view:k.view,version:k.version},e.semantic={shared_widget_index:f}):b.UTILITIES.tree_replace_once(e.semantic,k,{shared_widget_index:f},h);return k}));return e},get_json:function(a,c){var e,d;b.debugging&&!c&&b.UTILITIES.report_internal_error("no json_history");
e=c.shared_widgets.indexOf(a);if(0<=e)return{shared_widget_index:e};e=c.widgets_encountered.indexOf(a);if(0<=e)return e=b.UTILITIES.insert_ancestors_last(a,c.shared_widgets),{shared_widget_index:e};e=c.widgets_encountered.push(a)-1;d=a.get_json(c);d=a.add_to_json(d,c);c.json_of_widgets_encountered[e]=d;a.add_backside_widgets_to_json&&a.add_backside_widgets_to_json(d,c);return d},tree_replace_once:function(a,b,c,d){var f,g;for(g in a)if(a.hasOwnProperty(g)&&(f=a[g])){if(f===b)return a[g]=c,!0;if("shared_widget_index"===
g){if(this.tree_replace_once(d(f),b,c,d))return!0}else if(!(0<=["string","number","function","undefined"].indexOf(typeof f))&&this.tree_replace_once(f,b,c,d))return!0}return!1},insert_ancestors_last:function(a,b){var c=-1;b.some(function(b,d){if(a.has_ancestor(b))return c=d,!0});0>c&&(c=b.length);b.splice(c,0,a);return c},copy_widgets:function(a,b){var c=[],d;for(d=0;d<a.length;d++)c[d]=a[d]&&a[d].copy(b);return c},copy_widget_sides:function(a,b){return a.map(function(a){var c=a.get_widget().copy(b);
a.is_backside()&&c.get_backside();return c})},copy_array:function(a){return a.slice()},generate_unique_id:function(){k+=1;return"toontalk_id_"+k},get_style_property:function(a,b){if(a.currentStyle)return a.currentStyle[b];if(window.getComputedStyle)return document.defaultView.getComputedStyle(a,null).getPropertyValue(b)},get_style_numeric_property:function(a,b){var c=this.get_style_property(a,b),d;return"string"===typeof c?(d=c.indexOf("px"),0<=d&&(c=c.substring(0,d)),parseInt(c,10)):c},data_transfer_json_object:function(a){var c;
if(a.dataTransfer){try{c=a.dataTransfer.getData("text/html")}catch(e){c=a.dataTransfer.getData("text")}if(!c||c.match(/[\u3400-\u9FBF]/))c=a.dataTransfer.getData("text");if(c){a=d(c);if(!a)return b.UTILITIES.get_json_top_level(b.element.create(c));try{return JSON.parse(a)}catch(f){b.UTILITIES.report_internal_error("Exception parsing "+a+"\n"+f.toString())}}}},drag_and_drop:function(a){b.UTILITIES.draggable(a);b.UTILITIES.can_receive_drops(a)},draggable:function(a){$(a).attr("draggable",!0);a.addEventListener("dragstart",
function(d){var e=$(d.target).closest(".toontalk-side"),f,g,h;d.dataTransfer.getData("text")&&0<d.dataTransfer.getData("text").length||(l=e||$(a),g=b.UTILITIES.widget_from_jquery(l),g||(g=b.UTILITIES.widget_from_jquery($element),b.UTILITIES.report_internal_error("Possible bug that "+l+" doesn't have a known owner."),l=$(a)),f=l.get(0).getBoundingClientRect(),h=l.is(".toontalk-top-level-resource"),d.dataTransfer&&g.get_json&&(d.dataTransfer.effectAllowed=h?"copy":"move",e=b.UTILITIES.get_json_top_level(g),
e.view.drag_x_offset=d.clientX-f.left,e.view.drag_y_offset=d.clientY-f.top,!e.view.frontside_width&&l.parent().is(".toontalk-backside")&&(e.view.frontside_width=l.width(),e.view.frontside_height=l.height()),l.is(".toontalk-backside")&&(e.view.backside=!0),l.data("json",e),f=c(e,g),d.dataTransfer.setData("text",f),b.UTILITIES.is_internet_explorer()||d.dataTransfer.setData("text/html",f),g.drag_started(e,h)),l.addClass("toontalk-being-dragged"),d.stopPropagation())});a.addEventListener("dragend",function(a){l||
(l=$(a.target).closest(".toontalk-side"));if(l.is(".toontalk-frontside"))if(l.parent().is(".toontalk-backside")){var c=l.data("json");c&&(l.data("json",""),l.css({width:c.view.frontside_width,height:c.view.frontside_height}))}else l.parent().is(".toontalk-top-level-resource, .toontalk-drop-area")||l.is(".toontalk-carried-by-bird")||b.UTILITIES.has_animating_image(l.get(0))||l.css({width:"100%",height:"100%"});p();a.stopPropagation()})},can_receive_drops:function(a){a.addEventListener("dragover",function(a){a.preventDefault();
return!1});a.addEventListener("drop",function(c){var e,d,g,h,k,s,w,t,B,G,x=b.UTILITIES.data_transfer_json_object(c);c.preventDefault();$(a).find("*").removeClass("toontalk-ignore-events");e=l;p();if(e||x||c.dataTransfer.files){if($(c.target).is(".toontalk-drop-area-instructions"))g=$(c.target).parent();else if($(c.target).is(".toontalk-element-attribute-input")){if(g=$(c.target).closest(".toontalk-side"),h=b.UTILITIES.widget_from_jquery(g)){d=e?b.UTILITIES.widget_from_jquery(e):b.UTILITIES.create_from_json(x);
b.UTILITIES.restore_resource(e,d);h.dropped_on_style_attribute(d,c.target.name,c);c.stopPropagation();return}}else g=$(c.target).is(".toontalk-drop-area")?$(c.target):$(c.target).closest(".toontalk-side");if(0!==g.length&&!g.is(".toontalk-top-level-resource")){w=g.offset();b.UTILITIES.remove_highlight();h=b.UTILITIES.widget_from_jquery(g);if(e&&0<e.length&&(!h.get_infinite_stack||!h.get_infinite_stack())&&(e.get(0)===g.get(0)||jQuery.contains(e.get(0),g.get(0)))){if(e.is(".toontalk-top-level-backside"))return;
g.hide();d=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset);g.show();d&&(g=$(d).closest(".toontalk-side"),w=g.offset(),h=b.UTILITIES.widget_from_jquery(g))}x&&x.view&&x.view.drag_x_offset?(k=x.view.drag_x_offset,s=x.view.drag_y_offset):s=k=0;if(e&&0<e.length){if(!(h.get_infinite_stack&&h.get_infinite_stack()||e.get(0)!==g.get(0)&&!jQuery.contains(e.get(0),g.get(0)))){e.css({left:e.get(0).offsetLeft+(c.layerX-k),top:e.get(0).offsetTop+(c.layerY-s)});c.stopPropagation();
return}t=e.is(".toontalk-backside");d=b.UTILITIES.widget_from_jquery(e);e.parent().is(".toontalk-drop-area")?(e.removeClass("toontalk-widget-in-drop_area"),e.parent().data("drop_area_owner").set_next_robot(void 0)):(B=e.parents(".toontalk-side:first"),(G=b.UTILITIES.widget_from_jquery(B))?!t&&d.get_infinite_stack&&d.get_infinite_stack()?(d=d.copy(),B=e.width(),G=e.height(),e=$(d.get_frontside_element(!0)),g.is(".toontalk-backside")&&e.css({width:x.view.frontside_width||B,height:x.view.frontside_height||
G})):G.removed_from_container&&(B.is(".toontalk-backside")?G.remove_backside_widget(d,t,!0):(G.removed_from_container(d,t,c),d.restore_dimensions&&d.restore_dimensions())):b.UTILITIES.restore_resource(e,d),b.robot.in_training&&b.robot.in_training.add_newly_created_widget_if_new(d))}else{if(0<c.dataTransfer.files.length){for(e=0;e<c.dataTransfer.files.length;e++)f(c.dataTransfer.files[e],g,h,w,c);c.stopPropagation();return}d=b.UTILITIES.create_from_json(x,{event:c});if(!d){x?b.UTILITIES.report_internal_error("Unable to construct a ToonTalk widget from the JSON."):
b.debugging&&console.log("No data transfer in drop.");c.stopPropagation();return}(t=x.view.backside)?(e=$(d.get_backside_element()),e.css({width:x.view.backside_width,height:x.view.backside_height,"background-color":x.view.background_color,"border-width":x.view.border_width}),d.apply_backside_geometry()):e=$(d.get_frontside_element())}d!==h&&r(g,e,d,h,w,c,x,k,s,t);c.stopPropagation()}}else c.dataTransfer?b.UTILITIES.report_internal_error("Drop failed since unable to parse as JSON."):b.UTILITIES.report_internal_error("Drop failed since there is no event.dataTransfer"),
c.stopPropagation()});a.addEventListener("dragenter",function(c){var e=$(c.target).closest(".toontalk-side"),d=b.UTILITIES.get_dragee();e.is(".toontalk-top-level-backside")||e.closest(".toontalk-top-level-resource").is("*")||e.is(".toontalk-being-dragged")||d&&s(e.get(0),d.get(0))||(b.UTILITIES.highlight_element(e),e.is(".toontalk-backside, .toontalk-drop-area")||"box"===b.UTILITIES.widget_from_jquery($(a)).get_type_name()||e.find(".toontalk-side").addClass("toontalk-ignore-events"));c.stopPropagation()});
a.addEventListener("dragleave",function(a){a.stopPropagation()})},create_drop_area:function(a){var c=document.createElement("div"),e=$(c),d=document.createElement("div");d.innerHTML=a;$(d).addClass("toontalk-drop-area-instructions ui-widget");e.addClass("toontalk-drop-area");e.append(d);b.UTILITIES.can_receive_drops(c);return e},set_absolute_position:function(a,b){for(var c=a.parent(),d=b.left,f=b.top,g;c.is("*")&&!c.is("html");)g=c.position(),d-=g.left,f-=g.top,c=c.parent();a.css({left:d,top:f,position:"absolute"});
a.is(".toontalk-side-animating")&&(a.get(0).style.left=d+"px",a.get(0).style.top=f+"px")},set_position_relative_to_top_level_backside:function(a,b){var c=a.closest(".toontalk-top-level-backside").offset(),d=b.left-c.left,c=b.top-c.top;a.css({left:d,top:c,position:"absolute"});a.is(".toontalk-side-animating")&&(a.get(0).style.left=d+"px",a.get(0).style.top=c+"px")},restore_resource:function(a,c){var d,f;a.is(".toontalk-top-level-resource")&&(d=c.copy(!1,!0),f=d.get_frontside_element(),$(f).css({width:a.width(),
height:a.height()}),a.removeClass("toontalk-top-level-resource"),$(f).addClass("toontalk-top-level-resource").css({position:"relative"}),a.get(0).parentElement.appendChild(f),b.DISPLAY_UPDATES.pending_update(d),c.set_active&&(c.set_active(!0),d.set_active(!1)))},find_resource_equal_to_widget:function(a){var c;$(".toontalk-top-level-resource").each(function(d,f){var g=$(f).children(":first"),h=b.UTILITIES.widget_from_jquery(g);if(h&&(a.equals&&a.equals(h)||a.matching_resource&&a.matching_resource(h)))return c=
g.get(0),!1});return c},set_position_is_absolute:function(a,b,c){b?(c=$(a).position(),b=c.left,c=c.top,$(a).css({left:b,top:c,position:"absolute"})):a.style.position="static"},cardinal:function(a){switch(a){case 0:return"first";case 1:return"second";case 2:return"third";default:return a+"th"}},on_a_nest_in_a_box:function(a){return $(a).closest(".toontalk-nest").is("*")&&$(a).closest(".toontalk-box").is("*")},add_one_shot_event_handler:function(a,b,c,d){var f=!1,g=function(c){f=!0;d&&d();a.removeEventListener(b,
g)};a.addEventListener(b,g);setTimeout(function(){f||g()},c)},animate_to_absolute_position:function(a,c,d,f,g){var h=$(a).offset(),k=$(a).position(),l=b.UTILITIES.distance(c,h);f||(f=.5);f=Math.round(l/f);$(a).addClass("toontalk-side-animating");a.style.transitionDuration=f+"ms";a.style.left=k.left+(c.left-h.left)+"px";a.style.top=k.top+(c.top-h.top)+"px";g||b.UTILITIES.add_one_shot_event_handler(a,"transitionend",f+500,function(){$(a).removeClass("toontalk-side-animating");a.style.transitionDuration=
""});b.UTILITIES.add_one_shot_event_handler(a,"transitionend",f+500,d)},distance:function(a,b){var c=a.left-b.left,d=a.top-b.top;return Math.sqrt(c*c+d*d)},highlight_element:function(a,c){var d;if(!$(a).is(".toontalk-highlight")&&(b.UTILITIES.remove_highlight(),d=b.UTILITIES.widget_from_jquery($(a)))){if(d.element_to_highlight&&(a=d.element_to_highlight(event),!a))return;$(a).addClass("toontalk-highlight");c&&setTimeout(function(){b.UTILITIES.remove_highlight()},c)}},remove_highlight:function(){$(".toontalk-highlight").removeClass("toontalk-highlight")},
cursor_of_image:function(a){var b=a.lastIndexOf(".");return 0<=b?a.substring(0,b)+".32x32"+a.substring(b):a},next_z_index:function(){h++;return h},create_close_button:function(a,b){var c=document.createElement("div"),d=document.createElement("div");$(c).addClass("toontalk-close-button");$(c).click(a);$(c).attr("title",b);d.innerHTML="&times;";c.appendChild(d);return c},check_radio_button:function(a){$(a.button).prop("checked",!0);$(a.label).addClass("ui-state-active")},create_button_set:function(){var a=
document.createElement("div"),b,c;for(b=0;b<arguments.length;b++)if(0<=arguments[b].length)for(c=0;c<arguments[b].length;c++)a.appendChild(arguments[b][c]);else a.appendChild(arguments[b]);$(a).buttonset();return a},create_text_element:function(a){var b=document.createElement("div");b.textContent=a;$(b).addClass("ui-widget");return b},create_anchor_element:function(a,b){var c=document.createElement("a");c.innerHTML=a;c.href=b;c.target="_blank";return c},create_text_input:function(a,c,d,f,g){var h=
document.createElement("input"),k;h.type="text";h.className=c;h.value=a;h.title=f;d?(a=document.createElement("label"),a.innerHTML=d,h.id=b.UTILITIES.generate_unique_id(),a.htmlFor=h.id,g&&(k=b.UTILITIES.create_anchor_element("i",g),$(k).addClass("toontalk-help-button")),d=b.UTILITIES.create_horizontal_table(a,h,k),$(a).addClass("ui-widget")):d=h;$(h).button().addClass("toontalk-text-input");$(h).css({"background-color":"white"});return{container:d,button:h}},create_text_area:function(a,c,d,f){var g=
document.createElement("textarea");g.className=c;g.value=a;g.title=f;a=document.createElement("label");a.innerHTML=d;g.id=b.UTILITIES.generate_unique_id();a.htmlFor=g.id;d=b.UTILITIES.create_horizontal_table(a,g);$(g).button().addClass("toontalk-text-text_area");$(g).css({background:"white"});$(a).addClass("ui-widget");return{container:d,button:g}},create_radio_button:function(a,c,d,f,g){var h=document.createElement("div"),k=document.createElement("input"),l=document.createElement("label");k.type=
"radio";k.className=d;k.name=a;k.value=c;l.innerHTML=f;k.id=b.UTILITIES.generate_unique_id();l.htmlFor=k.id;h.appendChild(k);h.appendChild(l);h.title=g;$(k).button();return{container:h,button:k,label:l}},create_check_box:function(a,c,d,f){var g=document.createElement("div"),h=document.createElement("input"),k=document.createElement("label");h.type="checkbox";h.className=c;h.checked=a;k.innerHTML=d;h.id=b.UTILITIES.generate_unique_id();k.htmlFor=h.id;$(k).addClass("ui-widget");g.appendChild(h);g.appendChild(k);
g.title=f;return{container:g,button:h,label:k}},create_horizontal_table:function(){var a=document.createElement("table"),b,c,d;c=document.createElement("tr");a.appendChild(c);for(b=0;b<arguments.length;b++)arguments[b]&&(d=document.createElement("td"),c.appendChild(d),d.appendChild(arguments[b]));return a},create_vertical_table:function(){var a=document.createElement("table"),c,d;for(c=0;c<arguments.length;c++)arguments[c]&&(d=b.UTILITIES.create_row(arguments[c]),a.appendChild(d));return a},create_row:function(){var a=
document.createElement("tr"),b=document.createElement("td"),c;for(c=0;c<arguments.length;c++)a.appendChild(arguments[c]);b.appendChild(a);return a},selected_radio_button:function(){var a;for(a=0;a<arguments.length;a++)if(arguments[a].checked)return arguments[a]},create_image:function(a,b){var c=document.createElement("img"),d;c.src=a;b&&$(c).addClass(b);0===a.indexOf("images/")&&(d=function(b){c.removeEventListener("error",d);c.src="http://toontalk.github.io/ToonTalk/"+a},c.addEventListener("error",
d));return c},get_dragee:function(){return l},add_a_or_an:function(a,b){var c=a.charAt(0);return 0===a.indexOf("the ")?a:0>"aeiou".indexOf(c)?b?"A "+a:"a "+a:b?"An "+a:"an "+a},maximum_string_length:function(a,b){var c;if(a.length<=b)return a;c=a.substring(0,Math.round(.75*b));return c+" ... "+a.substring(a.length-(b-c.length))},backup_all_top_level_widgets:function(a){b.UTILITIES.get_current_url_boolean_parameter("autosave",!0)&&$(".toontalk-top-level-backside").each(function(c,d){b.UTILITIES.widget_from_jquery($(d)).backup_all(a)})},
make_resizable:function(a,b){a.resizable({resize:function(c,d){a.find("img").css({width:d.size.width,height:d.size.height});b.render()},handles:"n,e,s,w"})},match:function(a,b){var c=a.match(b);return"not matched"===c&&b.matched_by?b.matched_by(a):c},current_URL:function(){return window.location.pathname},absolute_file_path:function(a){var b=window.location.pathname,c=b.lastIndexOf("ToonTalk/");return 0>c?a:b.substring(0,c+9)+a},copy_side:function(a,b,c){b=a.get_widget().copy(b);var d;c&&(c=a.get_widget().get_frontside_element())&&
(d=b.get_frontside_element(!0),$(d).css({width:$(c).width(),height:$(c).height()}));return a.is_backside()?b.get_backside():b},scale_to_fit:function(a,b,c,d,f){var g=$(b).width();b=$(b).height();var h=function(){$(a).css({transform:"scale("+k+", "+l+")","transform-origin":"top left",width:c,height:d})},k,l;c||(c=$(a).width());d||(d=$(a).height());k=g/c;l=b/d;0===k&&(k=1);0===l&&(l=1);f?setTimeout(h,f):h();return{x_scale:k,y_scale:l}},relative_position:function(a,b){var c=$(a).offset(),d=$(b).offset();
return{left:c.left-d.left,top:c.top-d.top}},add_animation_class:function(a,b){$(a).css({width:"",height:""}).addClass(b)},widget_from_jquery:function(a){if(0<a.length)return a.get(0).toontalk_widget},has_animating_image:function(a){a=$(a);return(a=a.css("animation")||a.css("webkit-animation")||a.css("moz-animation")||a.css("ms-animation")||a.css("o-animation"))&&0!==a.indexOf("none")},display_message:function(a){alert(a)},report_internal_error:function(a){console.log(a);b.debugging&&b.UTILITIES.display_message(a)},
get_current_url_boolean_parameter:function(a,b){return 0>window.location.href.indexOf(a+"=")?b:0<=window.location.href.indexOf(a+"=1")?!0:!1},is_browser_of_type:function(a){return 0<=window.navigator.userAgent.indexOf(a)},is_internet_explorer:function(){return b.UTILITIES.is_browser_of_type("MSIE")||b.UTILITIES.is_browser_of_type("Trident")},remove_z_index:function(a){if(0===a.length||"<"!==a.charAt(0)||0>a.indexOf("z-index"))return a;a=$(a);a.attr("z-index","");return a.html()},add_test_all_button:function(){var a=
$("#toontalk-test-all-button"),b;if(0!==a.length){a.button();b=a.get(0);b.innerHTML="Run all tests";var c=!1;a.click(function(a){c?($(".toontalk-stop-sign").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&$(this).click()}),b.innerHTML="Run all tests"):($(".toontalk-green-flag").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&$(this).click()}),b.innerHTML="Stop all tests");c=!c})}}}}(window.TOONTALK);window.TOONTALK.UTILITIES.available_types="number box element robot nest sensor top-level".split(" ");
