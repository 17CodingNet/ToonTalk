'use strict';(function(d){var k;"undefined"===typeof exports?"function"===typeof define&&"object"===typeof define.amd&&define.amd?(k={},define(function(){return k})):k="undefined"!==typeof window?window:d:k=exports;(function(b){var a={greatest_common_divisor:function(c,p){if(1===p||1===c)return 1;for(var a;0!==p;){a=p;p=c%p;if(!isFinite(p))return 0;c=a}return c}};a.gcd=a.greatest_common_divisor;a.fromRandom=function(c){return Math.random()*(1<<c)>>>0};a.fromMillitime=function(){return+new Date};a.fromUnixtime=
function(){return.001*a.fromMillitime()|0};"undefined"!==typeof b&&(b.integer=a);(function(c){function p(c,g,d){if(d!==a)return c instanceof p?c:"undefined"===typeof c?b:p.parse(c);for(c=c||[];c.length&&!c[c.length-1];)--c.length;this._d=c;this._s=c.length?g||1:0}var a={};p._construct=function(c,b){return new p(c,b,a)};p.base=1E7;p.base_log10=7;var b=new p([],0,a);p.ZERO=b;var d=new p([1],1,a);p.ONE=d;var g=new p(d._d,-1,a);p.M_ONE=g;p._0=b;p._1=d;p.small=[b,d,new p([2],1,a),new p([3],1,a),new p([4],
1,a),new p([5],1,a),new p([6],1,a),new p([7],1,a),new p([8],1,a),new p([9],1,a),new p([10],1,a),new p([11],1,a),new p([12],1,a),new p([13],1,a),new p([14],1,a),new p([15],1,a),new p([16],1,a),new p([17],1,a),new p([18],1,a),new p([19],1,a),new p([20],1,a),new p([21],1,a),new p([22],1,a),new p([23],1,a),new p([24],1,a),new p([25],1,a),new p([26],1,a),new p([27],1,a),new p([28],1,a),new p([29],1,a),new p([30],1,a),new p([31],1,a),new p([32],1,a),new p([33],1,a),new p([34],1,a),new p([35],1,a),new p([36],
1,a)];p.digits="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");p.prototype.toString=function(c){c=+c||10;if(2>c||36<c)throw Error("illegal radix "+c+".");if(0===this._s)return"0";if(10===c){c=0>this._s?"-":"";c+=this._d[this._d.length-1].toString();for(var a=this._d.length-2;0<=a;a--){for(var b=this._d[a].toString();7>b.length;)b="0"+b;c+=b}return c}a=p.digits;c=p.small[c];for(var b=this._s,g=this.abs(),d=[],e;0!==g._s;)e=g.divRem(c),g=e[0],e=e[1],d.push(a[e.valueOf()]);return(0>b?"-":"")+d.reverse().join("")};
p.radixRegex=[/^$/,/^$/,/^[01]*$/,/^[012]*$/,/^[0-3]*$/,/^[0-4]*$/,/^[0-5]*$/,/^[0-6]*$/,/^[0-7]*$/,/^[0-8]*$/,/^[0-9]*$/,/^[0-9aA]*$/,/^[0-9abAB]*$/,/^[0-9abcABC]*$/,/^[0-9a-dA-D]*$/,/^[0-9a-eA-E]*$/,/^[0-9a-fA-F]*$/,/^[0-9a-gA-G]*$/,/^[0-9a-hA-H]*$/,/^[0-9a-iA-I]*$/,/^[0-9a-jA-J]*$/,/^[0-9a-kA-K]*$/,/^[0-9a-lA-L]*$/,/^[0-9a-mA-M]*$/,/^[0-9a-nA-N]*$/,/^[0-9a-oA-O]*$/,/^[0-9a-pA-P]*$/,/^[0-9a-qA-Q]*$/,/^[0-9a-rA-R]*$/,/^[0-9a-sA-S]*$/,/^[0-9a-tA-T]*$/,/^[0-9a-uA-U]*$/,/^[0-9a-vA-V]*$/,/^[0-9a-wA-W]*$/,
/^[0-9a-xA-X]*$/,/^[0-9a-yA-Y]*$/,/^[0-9a-zA-Z]*$/];p.parse=function(c,g){function d(c){c=c.replace(/\s*[*xX]\s*10\s*(\^|\*\*)\s*/,"e");return c.replace(/^([+\-])?(\d+)\.?(\d*)[eE]([+\-]?\d+)$/,function(c,a,p,b,g){g=+g;var d=0>g,e=p.length+g;c=(d?p:b).length;g=(g=Math.abs(g))>=c?g-c+d:0;c=Array(g+1).join("0");p+=b;return(a||"")+(d?p=c+p:p+=c).substr(0,e+=d?c.length:0)+(e<p.length?"."+p.substr(e):"")})}c=c.toString();if("undefined"===typeof g||10===+g)c=d(c);var e=RegExp("^([+\\-]?)("+("undefined"===
typeof g?"0[xcb]":16==g?"0x":8==g?"0c":2==g?"0b":"")+")?([0-9a-z]*)(?:\\.\\d*)?$","i").exec(c);if(e){var f=e[1]||"+",h=e[2]||"",e=e[3]||"";if("undefined"===typeof g)g="0x"===h||"0X"===h?16:"0c"===h||"0C"===h?8:"0b"===h||"0B"===h?2:10;else if(2>g||36<g)throw Error("Illegal radix "+g+".");g=+g;if(!p.radixRegex[g].test(e))throw Error("Bad digit for radix "+g);e=e.replace(/^0+/,"").split("");if(0===e.length)return b;f="-"===f?-1:1;if(10==g){for(h=[];7<=e.length;)h.push(parseInt(e.splice(e.length-p.base_log10,
p.base_log10).join(""),10));h.push(parseInt(e.join(""),10));return new p(h,f,a)}h=b;g=p.small[g];for(var l=p.small,n=0;n<e.length;n++)h=h.multiply(g).add(l[parseInt(e[n],36)]);return new p(h._d,f,a)}throw Error("Invalid BigInteger format: "+c);};p.prototype.add=function(c){if(0===this._s)return p(c);c=p(c);if(0===c._s)return this;if(this._s!==c._s)return c=c.negate(),this.subtract(c);var b=this._d;c=c._d;for(var g=b.length,d=c.length,e=Array(Math.max(g,d)+1),h=Math.min(g,d),f=0,l=0;l<h;l++)f=b[l]+
c[l]+f,e[l]=f%1E7,f=f/1E7|0;d>g&&(b=c,g=d);for(l=h;f&&l<g;l++)f=b[l]+f,e[l]=f%1E7,f=f/1E7|0;for(f&&(e[l]=f);l<g;l++)e[l]=b[l];return new p(e,this._s,a)};p.prototype.negate=function(){return new p(this._d,-this._s|0,a)};p.prototype.abs=function(){return 0>this._s?this.negate():this};p.prototype.subtract=function(c){if(0===this._s)return p(c).negate();c=p(c);if(0===c._s)return this;if(this._s!==c._s)return c=c.negate(),this.add(c);var g=this;0>this._s&&(g=new p(c._d,1,a),c=new p(this._d,1,a));var d=
g.compareAbs(c);if(0===d)return b;if(0>d){var e=c;c=g;g=e}g=g._d;c=c._d;var e=g.length,f=c.length,h=Array(e),l=0,n,k;for(n=0;n<f;n++)k=g[n]-l-c[n],0>k?(k+=1E7,l=1):l=0,h[n]=k;for(n=f;n<e;n++){k=g[n]-l;if(0>k)k+=1E7;else{h[n++]=k;break}h[n]=k}for(;n<e;n++)h[n]=g[n];return new p(h,d,a)};(function(){function c(b,g){for(var d=b._d,e=d.slice(),f=0;;){var h=(d[f]||0)+1;e[f]=h%1E7;if(9999999>=h)break;++f}return new p(e,g,a)}function b(c,g){for(var d=c._d,e=d.slice(),f=0;;){var h=(d[f]||0)-1;if(0>h)e[f]=
h+1E7;else{e[f]=h;break}++f}return new p(e,g,a)}p.prototype.next=function(){switch(this._s){case 0:return d;case -1:return b(this,-1);default:return c(this,1)}};p.prototype.prev=function(){switch(this._s){case 0:return g;case -1:return c(this,-1);default:return b(this,1)}}})();p.prototype.compareAbs=function(c){if(this===c)return 0;if(!(c instanceof p)){if(!isFinite(c))return isNaN(c)?c:-1;c=p(c)}if(0===this._s)return 0!==c._s?-1:0;if(0===c._s)return 1;var a=this._d.length,b=c._d.length;if(a<b)return-1;
if(a>b)return 1;b=this._d;c=c._d;for(--a;0<=a;a--)if(b[a]!==c[a])return b[a]<c[a]?-1:1;return 0};p.prototype.compare=function(c){if(this===c)return 0;c=p(c);return 0===this._s?-c._s:this._s===c._s?this.compareAbs(c)*this._s:this._s};p.prototype.isUnit=function(){return this===d||this===g||1===this._d.length&&1===this._d[0]};p.prototype.multiply=function(c){if(0===this._s)return b;c=p(c);if(0===c._s)return b;if(this.isUnit())return 0>this._s?c.negate():c;if(c.isUnit())return 0>c._s?this.negate():this;
if(this===c)return this.square();var g=this._d.length>=c._d.length,d=(g?this:c)._d,g=(g?c:this)._d,e=d.length,f=g.length,h=e+f,l=Array(h),n;for(n=0;n<h;n++)l[n]=0;for(n=0;n<f;n++){for(var h=0,k=g[n],z=e+n,t,q=n;q<z;q++)t=l[q]+k*d[q-n]+h,h=t/1E7|0,l[q]=t%1E7|0;h&&(t=l[q]+h,l[q]=t%1E7)}return new p(l,this._s*c._s,a)};p.prototype.multiplySingleDigit=function(c){if(0===c||0===this._s)return b;if(1===c)return this;var g;if(1===this._d.length)return g=this._d[0]*c,1E7<=g?new p([g%1E7|0,g/1E7|0],1,a):new p([g],
1,a);if(2===c)return this.add(this);if(this.isUnit())return new p([c],1,a);var d=this._d,e=d.length;g=e+1;for(var h=Array(g),f=0;f<g;f++)h[f]=0;for(var l=f=0;l<e;l++)g=c*d[l]+f,f=g/1E7|0,h[l]=g%1E7|0;f&&(h[l]=f);return new p(h,1,a)};p.prototype.square=function(){if(0===this._s)return b;if(this.isUnit())return d;var c=this._d,g=c.length,e=Array(g+g+1),f,h,l,n;for(n=0;n<g;n++)l=2*n,f=c[n]*c[n],h=f/1E7|0,e[l]=f%1E7,e[l+1]=h;for(n=0;n<g;n++){h=0;l=2*n+1;for(var k=n+1;k<g;k++,l++)f=c[k]*c[n]*2+e[l]+h,
h=f/1E7|0,e[l]=f%1E7;l=g+n;f=h+e[l];h=f/1E7|0;e[l]=f%1E7;e[l+1]+=h}return new p(e,1,a)};p.prototype.quotient=function(c){return this.divRem(c)[0]};p.prototype.divide=p.prototype.quotient;p.prototype.remainder=function(c){return this.divRem(c)[1]};p.prototype.divRem=function(c){c=p(c);if(0===c._s)throw Error("Divide by zero");if(0===this._s)return[b,b];if(1===c._d.length)return this.divRemSmall(c._s*c._d[0]);switch(this.compareAbs(c)){case 0:return[this._s===c._s?d:g,b];case -1:return[b,this]}var e=
this._s*c._s,f=c.abs(),h=this._d,l=h.length,n=[],k,z=new p([],0,a);for(z._s=1;l;)if(z._d.unshift(h[--l]),0>z.compareAbs(c))n.push(0);else{if(0===z._s)k=0;else{var t=z._d.length;k=f._d.length;t=1E7*z._d[t-1]+z._d[t-2];k=1E7*f._d[k-1]+f._d[k-2];z._d.length>f._d.length&&(t=1E7*(t+1));k=Math.ceil(t/k)}do{t=f.multiplySingleDigit(k);if(0>=t.compareAbs(z))break;k--}while(k);n.push(k);k&&(k=z.subtract(t),z._d=k._d.slice(),0===z._d.length&&(z._s=0))}return[new p(n.reverse(),e,a),new p(z._d,this._s,a)]};p.prototype.divRemSmall=
function(c){c=+c;if(0===c)throw Error("Divide by zero");var g=this._s*(0>c?-1:1);c=Math.abs(c);if(1>c||1E7<=c)throw Error("Argument out of range");if(0===this._s)return[b,b];if(1===c||-1===c)return[1===g?this.abs():new p(this._d,g,a),b];if(1===this._d.length){var d=new p([this._d[0]/c|0],1,a);c=new p([this._d[0]%c|0],1,a);0>g&&(d=d.negate());0>this._s&&(c=c.negate());return[d,c]}for(var e=this._d.slice(),d=Array(e.length),f=0,h=0,l=0,n;e.length;)f=1E7*f+e[e.length-1],f<c?(d[l++]=0,e.pop(),h=1E7*h+
f):(n=0===f?0:f/c|0,h=f-c*n,(d[l++]=n)?(e.pop(),f=h):e.pop());c=new p([h],1,a);0>this._s&&(c=c.negate());return[new p(d.reverse(),g,a),c]};p.prototype.isEven=function(){var c=this._d;return 0===this._s||0===c.length||0===c[0]%2};p.prototype.isOdd=function(){return!this.isEven()};p.prototype.sign=function(){return this._s};p.prototype.isPositive=function(){return 0<this._s};p.prototype.isNegative=function(){return 0>this._s};p.prototype.isZero=function(){return 0===this._s};p.prototype.exp10=function(c){c=
+c;if(0===c)return this;if(Math.abs(c)>Number(e))throw Error("exponent too large in BigInteger.exp10");if(0<c){for(var g=new p(this._d.slice(),this._s,a);7<=c;c-=7)g._d.unshift(0);if(0==c)return g;g._s=1;g=g.multiplySingleDigit(Math.pow(10,c));return 0>this._s?g.negate():g}if(-c>=7*this._d.length)return b;g=new p(this._d.slice(),this._s,a);for(c=-c;7<=c;c-=7)g._d.shift();return 0==c?g:g.divRemSmall(Math.pow(10,c))[0]};p.prototype.pow=function(c){if(this.isUnit())return 0<this._s?this:p(c).isOdd()?
this:this.negate();c=p(c);if(0===c._s)return d;if(0>c._s){if(0===this._s)throw Error("Divide by zero");return b}if(0===this._s)return b;if(c.isUnit())return this;if(0<c.compareAbs(e))throw Error("exponent too large in BigInteger.pow");for(var a=this,g=d,f=p.small[2];c.isPositive()&&(!c.isOdd()||(g=g.multiply(a),!c.isUnit()));)a=a.square(),c=c.quotient(f);return g};p.prototype.modPow=function(c,a){for(var b=d,g=this;c.isPositive();)c.isOdd()&&(b=b.multiply(g).remainder(a)),c=c.quotient(p.small[2]),
c.isPositive()&&(g=g.square().remainder(a));return b};p.prototype.log=function(){switch(this._s){case 0:return-Infinity;case -1:return NaN}var c=this._d.length;if(30>7*c)return Math.log(this.valueOf());var b=Math.ceil(30/7),g=this._d.slice(c-b);return Math.log((new p(g,1,a)).valueOf())+(c-b)*Math.log(1E7)};p.prototype.valueOf=function(){return parseInt(this.toString(),10)};p.prototype.toJSValue=function(){return parseInt(this.toString(),10)};var e=p(2147483647);p.MAX_EXP=e;(function(){function c(a){return function(c){return a.call(p(c))}}
function a(c){return function(a,b){return c.call(p(a),p(b))}}function b(c){return function(a,b,g){return c.call(p(a),p(b),p(g))}}(function(){var g,d,e="toJSValue isEven isOdd sign isZero isNegative abs isUnit square negate isPositive toString next prev log".split(" "),f="compare remainder divRem subtract add quotient divide multiply pow compareAbs".split(" "),h=["modPow"];for(g=0;g<e.length;g++)d=e[g],p[d]=c(p.prototype[d]);for(g=0;g<f.length;g++)d=f[g],p[d]=a(p.prototype[d]);for(g=0;g<h.length;g++)d=
h[g],p[d]=b(p.prototype[d]);p.exp10=function(c,a){return p(c).exp10(a)}})()})();c.BigInteger=p})("undefined"!==typeof b?b:this);var d={greatest_common_divisor:function(c,a){if(a.isUnit()||c.isUnit())return BigInteger.ONE;for(var b;!a.isZero();)b=a,a=c.remainder(a),c=b;return c},create:function(){return[0]},clone:function(c){for(var a=[],b=0,d=c.length;b<d;b++)a[b]=c[b];return a},copy:function(c,a){c=[];for(var b=0,d=a.length;b<d;b++)c[b]=a[b];return c},abs:function(c,a){c[0]=Math.abs(a[0]);return c},
str:function(c){return c[0].toString()},toInteger:function(c){return out[0]},fromInteger:function(c){return[parseInt(c)]}};d.ZERO=d.fromInteger(0);d.ONE=d.fromInteger(1);"undefined"!==typeof b&&(b.bigint=d);if(!l)var l=Array;if(!h)var h=Math.pow(2,56);if(!k)var k=16777216;var e={EPSILON:2E-16};e.MAX_LOOPS=k;e.create=function(){var c=new l(2);c[0]=0;c[1]=1;return c};e.clone=function(c){var a=new l(2);a[0]=c[0];a[1]=c[1];return a};e.fromValues=function(c,a){var b=new l(2);b[0]=c;b[1]=a;return e.normalize(b,
b)};e.copy=function(c,a){c[0]=a[0];c[1]=a[1];return c};e.set=function(c,a,b){c[0]=a;c[1]=b;return e.normalize(c,c)};e.abs=function(c,a){c[0]=Math.abs(a[0]);c[1]=a[1];return c};e.invert=function(c,a){var b=a[0];c[0]=a[1];c[1]=b;return c};e.reciprocal=e.invert;e.add=function(c,a,b){a[1]===b[1]?(c[0]=a[0]+b[0],c[1]=a[1]):(c[0]=a[0]*b[1]+b[0]*a[1],c[1]=a[1]*b[1]);return e.normalize(c,c)};e.subtract=function(c,a,b){a[1]===b[1]?(c[0]=a[0]-b[0],c[1]=a[1]):(c[0]=a[0]*b[1]-b[0]*a[1],c[1]=a[1]*b[1]);return e.normalize(c,
c)};e.sub=e.subtract;e.multiply=function(c,a,b){c[0]=a[0]*b[0];c[1]=a[1]*b[1];return e.normalize(c,c)};e.mul=e.multiply;e.mediant=function(c,a,b){c[0]=a[0]+b[0];c[1]=a[1]+b[1];return e.normalize(c,c)};e.divide=function(c,a,b){c[0]=a[0]*b[1];c[1]=a[1]*b[0];return e.normalize(c,c)};e.div=e.divide;e.equals=function(c,a){return 0===c[0]&&0===a[0]||0===c[1]&&0===a[1]?!0:c[0]===a[0]&&c[1]===a[1]};e.approximates=function(c,a){if(e.equals(c,a))return!0;var b=e.create();e.sub(b,c,a);e.abs(b,b);return e.isLessThan(b,
e.INFINITESIMAL)};e.isGreaterThan=function(c,a){return e.equals(c,a)?!1:c[0]*a[1]>a[0]*c[1]};e.isLessThan=function(c,a){return e.equals(c,a)?!1:c[0]*a[1]<a[0]*c[1]};e.isNegative=function(c){return 0>c[0]};e.min=function(c,a,b){e.isLessThan(a,b)?(c[0]=a[0],c[1]=a[1]):(c[0]=b[0],c[1]=b[1]);return c};e.max=function(c,a,b){e.isGreaterThan(a,b)?(c[0]=a[0],c[1]=a[1]):(c[0]=b[0],c[1]=b[1]);return c};e.scalar_multiply=function(c,a,b){c[0]=a[0]*b;c[1]=a[1];return e.normalize(c,c)};e.scalar_divide=function(c,
a,b){c[0]=a[0];c[1]=a[1]*b;return e.normalize(c,c)};e.normalize=function(c,b){if(isNaN(b[0])||isNaN(b[1])||0===b[0]&&0===b[1])return c[0]=0,c[1]=0,c;if(0===b[0])return c[0]=0,c[1]=1,c;if(0===b[1])return c[0]=1,c[1]=0,c;if(b[0]===b[1])return c[0]=1,c[1]=1,c;0<b[1]?(c[0]=b[0],c[1]=b[1]):(c[0]=-b[0],c[1]=-b[1]);var d=a.greatest_common_divisor(Math.abs(c[0]),c[1]);1<d&&(c[0]/=d,c[1]/=d);return c};e.opposite=function(c,a){c[0]=-a[0];c[1]=a[1];return c};e.negative=e.opposite;e.neg=e.opposite;e.power=function(c,
a,b){2===b?(c[0]=a[0]*a[0],c[1]=a[1]*a[1]):0<b?(c[0]=Math.pow(a[0],b),c[1]=Math.pow(a[1],b)):0>b?(b=Math.abs(b),c[0]=Math.pow(a[1],b),c[1]=Math.pow(a[0],b)):e.copy(c,e.ONE);return e.normalize(c,c)};e.pow=e.power;e.sqrt=function(c,a){return e.nthRoot(c,a,2)};e.nthRoot=function(c,a,b){if(e.equals(a,e.ZERO))return e.copy(c,e.ZERO);if(e.equals(a,e.ONE))return e.copy(c,e.ONE);if(e.equals(a,e.INFINITY))return e.copy(c,e.INFINITY);if(e.equals(a,e.INFINULL))return e.copy(c,e.INFINULL);var d=e.isNegative(a);
d&&(a[0]=-a[0]);c=e.copy(c,e.ONE);for(var f=[1,0,0,1],g=e.clone(e.ONE),h=e.MAX_LOOPS;!e.approximates(a,g)&&h--;)e.isLessThan(a,g)?(f[0]+=f[1],f[2]+=f[3]):(f[1]+=f[0],f[3]+=f[2]),c[0]=f[0]+f[1],c[1]=f[2]+f[3],e.pow(g,c,b);d&&(a[0]=-a[0],1===b%2&&e.neg(c,c));return c};e.dot=function(c,a){return c[0]*a[0]+c[1]*a[1]};e.str=function(c){return 1===c[1]?c[0].toString():c[0]+"/"+c[1]};e.toDecimal=function(c){return c[0]/c[1]};e.dec=e.toDecimal;e.toInteger=function(c){return Math.round(e.toDecimal(c))};e.round=
e.toInteger;e.floor=function(c){return Math.floor(e.toDecimal(c))};e.ceil=function(c){return Math.ceil(e.toDecimal(c))};e.fromInteger_copy=function(c,a){c[0]=parseInt(a);c[1]=1;return c};e.fromInteger=function(c){return e.fromInteger_copy(e.create(),c)};e.fromIntegerInverse_copy=function(c,a){c[0]=1;c[1]=parseInt(a);0>c[1]&&(c[0]=-c[0],c[1]=-c[1]);return c};e.fromIntegerInverse=function(c){return e.fromIntegerInverse_copy(e.create(),c)};e.fromDecimal=function(c){return e.fromDecimal_copy(e.create(),
c)};e.fromDecimal_copy=function(c,a){a=parseFloat(a);if(isNaN(a))return e.copy(c,e.INFINULL);if(Infinity===a)return e.copy(c,e.INFINITY);if(Math.abs(a)<e.EPSILON)return e.copy(c,e.ZERO);if(Math.abs(a-1)<e.EPSILON)return e.copy(c,e.ONE);if(Math.abs(a%1)<e.EPSILON)return e.fromInteger_copy(c,a);if(Math.abs(1/a%1)<e.EPSILON)return e.fromIntegerInverse_copy(c,Math.round(1/a));e.copy(c,e.ONE);for(var b=[1,0,0,1],d=a,f=1,g=e.MAX_LOOPS;g--&&Math.abs(a-e.toDecimal(c))>e.EPSILON;)f=Math.floor(d),c[0]=f*b[0]+
b[2],c[1]=f*b[1]+b[3],d=1/(d-f),b[2]=b[0],b[3]=b[1],b[0]=c[0],b[1]=c[1];return c};e.fromRandom=function(c){c[0]=0xfffffffffffff*Math.random()<<0;c[1]=Math.abs(0xfffffffffffff*Math.random()<<0);return e.normalize(c,c)};e.sin=function(c,a){if(0===a[1])return e.copy(c,e.ZERO);e.scalar_multiply(c,a,2);var b=e.create();e.pow(b,a,2);e.add(b,b,e.ONE);e.divide(c,c,b);return c};e.cos=function(c,a){if(0===a[1])return e.neg(c,e.ONE);var b=e.create();e.pow(b,a,2);e.sub(c,e.ONE,b);var d=e.create();e.add(d,e.ONE,
b);e.divide(c,c,d);return c};e.tan=function(c,a){e.scalar_multiply(c,a,2);var b=e.create();e.pow(b,a,2);e.scalar_multiply(b,b,2);e.add(c,c,b);e.pow(b,a,4);e.sub(b,e.ONE,b);e.divide(c,c,b);return c};e.toEgyptian=function(c){c=e.clone(c);e.abs(c,c);var a=e.floor(c);a&&e.sub(c,c,e.fromInteger(a));if(!c[0])return a.toString();a||(a="");for(var b=1,d=e.create();1!==c[0];)b++,d=e.fromValues(1,b),e.isGreaterThan(c,d)&&(a&&(a+=" + "),a+=e.str(d),e.sub(c,c,d));return c?a?a+" + "+e.str(c):e.str(c):a?a:"0"};
e.toBabylonian=function(c){var a="",b=e.toDecimal(c);c=parseInt(b);for(var b=b-c,d=0,f=0;0<c;)(d=c%60)&&(a=d+" * 60^"+f+(a?" + ":"")+a),c=(c-d)/60,f++;for(f=-1;0<b;)b*=60,d=parseInt(b+1E-13),b-=d,-1E-13>b||(d&&(a+=(a?" + ":"")+d+" * 60^"+f),f--);return a?a:"0"};e.traceSternBrocot=function(c){var a="";if(e.equals(c,e.ZERO)||e.equals(c,e.ONE)||e.equals(c,e.INFINITY)||e.equals(c,e.INFINULL))return a;if(e.equals(c,e.ZERO))return e.copy(out,e.ZERO);if(e.equals(c,e.ONE))return e.copy(out,e.ONE);if(e.equals(c,
e.INFINITY))return e.copy(out,e.INFINITY);if(e.equals(c,e.INFINULL))return e.copy(out,e.INFINULL);c=e.clone(c);e.isNegative(c)&&(c[0]=-c[0]);for(var b=e.clone(e.ONE),d=[1,0,0,1],f=0,g=0,h=e.MAX_LOOPS;!e.approximates(c,b)&&h--;)e.isLessThan(c,b)?(d[0]+=d[1],d[2]+=d[3],g++,f&&(a+="R",1!==f&&(a+=f),f=0,a+=" ")):(d[1]+=d[0],d[3]+=d[2],f++,g&&(a+="L",1!==g&&(a+=g),g=0,a+=" ")),b[0]=d[0]+d[1],b[1]=d[2]+d[3];g?(a+="L",1!==g&&(a+=g)):f&&(a+="R",1!==f&&(a+=f));0>h&&(a+="...");return a};e.toContinuedFraction=
function(c,a){a="undefined"===typeof a?65536:parseInt(a);if(e.equals(c,e.ZERO))return[0];if(e.equals(c,e.ONE))return[1];if(e.equals(c,e.NEGONE))return[-1];if(e.equals(c,e.INFINITY))return[1,0];if(e.equals(c,e.INFINULL))return[0,0];var b=e.clone(c),d=e.isNegative(b);d&&(b[0]=-b[0]);for(var f=e.clone(e.ONE),g=[1,0,0,1],h=1,l=[0],n=l.length-1;!e.equals(b,f)&&a--;)e.isLessThan(b,f)?(-1===h?l[n]++:(h=-1,l.push(1),n++),g[0]+=g[1],g[2]+=g[3]):(1===h?l[n]++:(h=1,l.push(1),n++),g[1]+=g[0],g[3]+=g[2]),f[0]=
g[0]+g[1],f[1]=g[2]+g[3];0>a?l.push(0):l[n]++;if(d)for(var k in l)l[k]=-l[k];return l};e.fromContinuedFraction=function(c,a){e.fromInteger_copy(c,a[a.length-1]);for(var b=a.length-2;-1<b;b--)e.invert(c,c),e.add(c,e.fromInteger(a[b]),c);return c};e.dump=function(c){e.create();return"rat\t"+e.str(c)+"\n~\t"+e.toDecimal(c)+"\nCF:\t["+e.toContinuedFraction(c)+"]\n"};e.ZERO=e.fromInteger(0);e.ONE=e.fromInteger(1);e.NEGONE=e.fromInteger(-1);e.INFINITY=e.fromValues(1,0);e.INFINULL=e.fromValues(0,0);e.INFINITESIMAL=
e.clone([1,h]);e.PI=e.fromValues(1320192667429,420230377710);"undefined"!==typeof b&&(b.rat=e);if(!q)var q=new BigInteger("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");if(!u)var u=1073741824;var f={EPSILON:2E-16};f.MAX_LOOPS=u;f.create=function(){var c=[];c[0]=BigInteger.ZERO;c[1]=BigInteger.ONE;return c};f.clone=function(c){var a=[];a[0]=c[0];a[1]=c[1];return a};f.fromValues=function(c,a){var b=[];b[0]=new BigInteger(c);b[1]=new BigInteger(a);return f.normalize(b,b)};f.copy=function(c,a){c[0]=a[0];c[1]=
a[1];return c};f.set=function(c,a,b){c[0]=a;c[1]=b;return f.normalize(c,c)};f.toRat=function(c,a){return e.set(c,a[0].toJSValue(),a[1].toJSValue())};f.fromRat=function(c,a){return f.set(c,BigInteger(a[0]),BigInteger(a[1]))};f.abs=function(c,a){c[0]=a[0].abs();c[1]=a[1];return c};f.invert=function(c,a){var b=a[0];c[0]=a[1];c[1]=b;return c};f.reciprocal=f.invert;f.add=function(c,a,b){0===a[1].compare(b[1])?(c[0]=a[0].add(b[0]),c[1]=a[1]):(c[0]=a[0].multiply(b[1]).add(b[0].multiply(a[1])),c[1]=a[1].multiply(b[1]));
return f.normalize(c,c)};f.subtract=function(c,a,b){0===a[1].compare(b[1])?(c[0]=a[0].subtract(b[0]),c[1]=a[1]):(c[0]=a[0].multiply(b[1]).subtract(b[0].multiply(a[1])),c[1]=a[1].multiply(b[1]));return f.normalize(c,c)};f.sub=f.subtract;f.multiply=function(c,a,b){c[0]=a[0].multiply(b[0]);c[1]=a[1].multiply(b[1]);return f.normalize(c,c)};f.mul=f.multiply;f.mediant=function(c,a,b){c[0]=a[0].add(b[0]);c[1]=a[1].add(b[1]);return f.normalize(c,c)};f.divide=function(c,a,b){c[0]=a[0].multiply(b[1]);c[1]=
a[1].multiply(b[0]);return f.normalize(c,c)};f.div=f.divide;f.equals=function(c,a){return c[0].isZero()&&a[0].isZero()||c[1].isZero()&&a[1].isZero()?!0:0===c[0].compare(a[0])&&0===c[1].compare(a[1])};f.approximates=function(c,a){if(f.equals(c,a))return!0;var b=f.create();f.sub(b,c,a);f.abs(b,b);return f.isLessThan(b,f.INFINITESIMAL)};f.isGreaterThan=function(c,a){return f.equals(c,a)?!1:0<c[0].multiply(a[1]).compare(a[0].multiply(c[1]))};f.isLessThan=function(c,a){return f.equals(c,a)?!1:0>c[0].multiply(a[1]).compare(a[0].multiply(c[1]))};
f.isNegative=function(c){return c[0].isNegative()};f.min=function(c,a,b){f.isLessThan(a,b)?(c[0]=a[0],c[1]=a[1]):(c[0]=b[0],c[1]=b[1]);return c};f.max=function(c,a,b){f.isGreaterThan(a,b)?(c[0]=a[0],c[1]=a[1]):(c[0]=b[0],c[1]=b[1]);return c};f.scalar_multiply=function(c,a,b){c[0]=a[0].multiply(b);c[1]=a[1];return f.normalize(c,c)};f.scalar_divide=function(c,a,b){c[0]=a[0];c[1]=a[1].multiply(b);return f.normalize(c,c)};f.normalize=function(c,a){if(a[0].isZero()||a[1].isZero())return a;if(0===a[0].compare(a[1]))return f.clone(f.ONE);
if(a[1].isNegative())c[0]=a[0].negate(),c[1]=a[1].negate();else if(c[0]=a[0],c[1]=a[1],c[1].isZero())return c;var b=d.greatest_common_divisor(c[0].abs(),c[1]);0<b.compare(BigInteger.ONE)&&(c[0]=c[0].quotient(b),c[1]=c[1].quotient(b));return c};f.opposite=function(a,b){a[0]=b[0].negate();a[1]=b[1];return a};f.negative=f.opposite;f.neg=f.opposite;f.power=function(a,b,d){2===d?(a[0]=b[0].square(),a[1]=b[1].square()):0<d?(a[0]=b[0].pow(d),a[1]=b[1].pow(d)):0>d?(d=Math.abs(d),a[0]=b[1].pow(d),a[1]=b[0].pow(d)):
f.copy(a,f.ONE);return a};f.pow=f.power;f.sqrt=function(a,b){return f.nthRoot(a,b,2)};f.nthRoot=function(a,b,d){if(f.equals(b,f.ZERO))return f.copy(a,f.ZERO);if(f.equals(b,f.ONE))return f.copy(a,f.ONE);if(f.equals(b,f.INFINITY))return f.copy(a,f.INFINITY);if(f.equals(b,f.INFINULL))return f.copy(a,f.INFINULL);var e=f.isNegative(b);e&&(b[0]=b[0].negate());f.copy(a,f.ONE);for(var h=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],g=f.clone(f.ONE),l=u;!f.approximates(b,g)&&l--;)f.isLessThan(b,
g)?(h[0]=h[0].add(h[1]),h[2]=h[2].add(h[3])):(h[1]=h[1].add(h[0]),h[3]=h[3].add(h[2])),a[0]=h[0].add(h[1]),a[1]=h[2].add(h[3]),f.pow(g,a,d);e&&(b[0]=b[0].negate(),1===d%2&&f.neg(a,a));return a};f.dot=function(a,b){return a[0].multiply(b[0]).add(a[1].multiply(b[1]))};f.str=function(a){return 0===a[1].compare(BigInteger.ONE)?a[0].toString():a[0].toString()+"/"+a[1].toString()};f.toDecimal=function(a){return a[0].toJSValue()/a[1].toJSValue()};f.dec=f.toDecimal;f.toInteger=function(a){return a[0].quotient(a[1]).toJSValue()};
f.round=f.toInteger;f.toBigInteger=function(a){return a[0].quotient(a[1])};f.floor=function(a){return Math.floor(f.toDecimal(a))};f.ceil=function(a){return Math.ceil(f.toDecimal(a))};f.fromInteger_copy=function(a,b){a[0]=BigInteger(b);a[1]=BigInteger.ONE;return a};f.fromInteger=function(a){return f.fromInteger_copy(f.create(),a)};f.fromIntegerInverse_copy=function(a,b){a[0]=BigInteger.ONE;a[1]=BigInteger(b);a[1].isNegative()&&(a[0]=a[0].negate(),a[1]=a[1].negate());return a};f.fromIntegerInverse=
function(a){return f.fromIntegerInverse_copy(f.create(),a)};f.fromDecimal=function(a){return f.fromDecimal_copy(f.create(),a)};f.fromDecimal_copy=function(a,b){b=parseFloat(b);if(isNaN(b))return f.copy(a,f.INFINULL);if(Infinity===b)return f.copy(a,f.INFINITY);if(Math.abs(b)<f.EPSILON)return f.copy(a,f.ZERO);if(Math.abs(b-1)<f.EPSILON)return f.copy(a,f.ONE);if(Math.abs(b%1)<f.EPSILON)return f.fromInteger_copy(a,b);if(Math.abs(1/b%1)<f.EPSILON)return f.fromIntegerInverse_copy(a,Math.round(1/b));f.copy(a,
f.ONE);for(var d=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],e=b,h=1,g=f.MAX_LOOPS;g--&&Math.abs(b-f.toDecimal(a))>f.EPSILON;)h=Math.floor(e),a[0]=BigInteger(h*d[0]+d[2]),a[1]=BigInteger(h*d[1]+d[3]),e=1/(e-h),d[2]=d[0],d[3]=d[1],d[0]=a[0],d[1]=a[1];return a};f.fromRandom=function(a){a[0]=BigInteger(0xfffffffffffff*Math.random()<<0);a[1]=BigInteger(Math.abs(0xfffffffffffff*Math.random()<<0));return f.normalize(a,a)};f.sin=function(a,b){if(b[1].isZero())return f.copy(a,f.ZERO);f.scalar_multiply(a,
b,2);var d=f.create();f.pow(d,b,2);f.add(d,d,f.ONE);f.divide(a,a,d);return a};f.cos=function(a,b){if(b[1].isZero())return f.neg(a,f.ONE);var d=f.create();f.pow(d,b,2);f.sub(a,f.ONE,d);var e=f.create();f.add(e,f.ONE,d);f.divide(a,a,e);return a};f.tan=function(a,b){f.scalar_multiply(a,b,2);var d=f.create();f.pow(d,b,2);f.scalar_multiply(d,d,2);f.add(a,a,d);f.pow(d,b,4);f.sub(d,f.ONE,d);f.divide(a,a,d);return a};f.toEgyptian=function(a){a=f.clone(a);f.abs(a,a);var b=f.floor(a);b&&f.sub(a,a,f.fromInteger(b));
if(!a[0])return b.toString();b||(b="");for(var d=1,e=f.create();1!==a[0];)d++,e=f.fromValues(1,d),f.isGreaterThan(a,e)&&(b&&(b+=" + "),b+=f.str(e),f.sub(a,a,e));return a?b?b+" + "+f.str(a):f.str(a):b?b:"0"};f.toBabylonian=function(a){var b="",d=f.toDecimal(a);a=parseInt(d);for(var d=d-a,e=0,h=0;0<a;)(e=a%60)&&(b=e+" * 60^"+h+(b?" + ":"")+b),a=(a-e)/60,h++;for(h=-1;0<d;)d*=60,e=parseInt(d+1E-13),d-=e,-1E-13>d||(e&&(b+=(b?" + ":"")+e+" * 60^"+h),h--);return b?b:"0"};f.traceSternBrocot=function(a){var b=
"";if(f.equals(a,f.ZERO)||f.equals(a,f.ONE)||f.equals(a,f.INFINITY)||f.equals(a,f.INFINULL))return b;a=f.clone(a);f.isNegative(a)&&(a[0]=a[0].negate());for(var d=f.clone(f.ONE),e=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],h=0,g=0,l=65536;!f.equals(a,d)&&l--;)f.isLessThan(a,d)?(e[0]=e[0].add(e[1]),e[2]=e[2].add(e[3]),g++,h&&(b+="R",1!==h&&(b+=h),h=0,b+=" ")):(e[1]=e[1].add(e[0]),e[3]=e[3].add(e[2]),h++,g&&(b+="L",1!==g&&(b+=g),g=0,b+=" ")),d[0]=e[0].add(e[1]),d[1]=e[2].add(e[3]);g?(b+=
"L",1!==g&&(b+=g)):h&&(b+="R",1!==h&&(b+=h));0>l&&(b+="...");return b};f.toContinuedFraction=function(a,b){b="undefined"===typeof b?65536:parseInt(b);if(f.equals(a,f.ZERO))return[0];if(f.equals(a,f.ONE))return[1];if(f.equals(a,f.NEGONE))return[-1];if(f.equals(a,f.INFINITY))return[1,0];if(f.equals(a,f.INFINULL))return[0,0];var d=f.clone(a),e=f.isNegative(d);e&&(d[0]=d[0].negate());for(var h=f.clone(f.ONE),g=[BigInteger(1),BigInteger(0),BigInteger(0),BigInteger(1)],l=1,n=[0],k=n.length-1;!f.equals(d,
h)&&b--;)f.isLessThan(d,h)?(-1===l?n[k]++:(l=-1,n.push(1),k++),g[0]=g[0].add(g[1]),g[2]=g[2].add(g[3])):(1===l?n[k]++:(l=1,n.push(1),k++),g[1]=g[1].add(g[0]),g[3]=g[3].add(g[2])),h[0]=g[0].add(g[1]),h[1]=g[2].add(g[3]);0>b?n.push(0):n[k]++;if(e)for(var t in n)n[t]=-n[t];return n};f.fromContinuedFraction=function(a,b){f.fromInteger_copy(a,b[b.length-1]);for(var d=b.length-2;-1<d;d--)f.invert(a,a),f.add(a,f.fromInteger(b[d]),a);return a};f.fromFactorial=function(a,b){if("undefined"!==typeof factorial.PREPARED[b])return f.fromInteger_copy(a,
factorial.PREPARED[b]);var d=factorial.PREPARED.length-1;for(f.fromInteger_copy(a,factorial.PREPARED[d]);d<b;)f.scalar_multiply(a,a,++d);return a};f.dump=function(a){return"bigrat\t"+f.str(a)+"\n~\t"+f.toDecimal(a)+"\nCF:\t["+f.toContinuedFraction(a)+"]\n"};f.ZERO=f.fromInteger(0);f.ONE=f.fromInteger(1);f.NEGONE=f.fromInteger(-1);f.INFINITY=f.fromValues(1,0);f.INFINULL=f.fromValues(0,0);f.INFINITESIMAL=f.clone([new BigInteger(1),q]);f.PI=f.fromValues("3141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481117450284102701938521105559644622948954930381964428810975665933446128475648233786783165271201909145648566923460348610454326648213393607260249141273724587",
"1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");"undefined"!==typeof b&&(b.bigrat=f);var w=function(a,b){this.a=e.fromValues(parseInt(a),parseInt(b))};w.prototype.toString=function(){return e.str(this.a)};w.prototype.toContinuedFraction=function(a){return e.toContinuedFraction(this.a,
a)};w.prototype.invert=function(){return e.invert(this.a)};w.prototype.reciprocal=w.prototype.invert;w.prototype.add=function(a){var b=e.create();e.add(b,this.a,a.a);return new w(b[0],b[1])};w.prototype.plus=w.prototype.add;w.prototype.subtract=function(a){var b=e.create();e.sub(b,this.a,a.a);return new w(b[0],b[1])};w.prototype.sub=w.prototype.subtract;w.prototype.minus=w.prototype.subtract;w.prototype.multiply=function(a){var b=e.create();e.mul(b,this.a,a.a);return new w(b[0],b[1])};w.prototype.mul=
w.prototype.multiply;w.prototype.times=w.prototype.multiply;w.prototype.mediant=function(a){var b=e.create();e.mediant(b,this.a,a.a);return new w(b[0],b[1])};w.prototype.divide=function(a){var b=e.create();e.div(b,this.a,a.a);return new w(b[0],b[1])};w.prototype.div=w.prototype.divide;w.prototype.divided_by=w.prototype.divide;w.prototype.power=function(a){var b=e.create();e.pow(b,this.a,a);return new w(b[0],b[1])};w.prototype.pow=w.prototype.power;w.prototype.dump=function(){return e.dump(this.a)};
w.prototype.toRat=function(){return e.clone(this.a)};w.prototype.toDecimal=function(){return e.toDecimal(this.a)};w.fromRat=function(a){var b=new w;b.a[0]=a[0];b.a[1]=a[1];return b};w.fromInteger=function(a){return w.fromRat(e.fromInteger(a))};w.fromIntegerInverse=function(a){return w.fromRat(e.fromIntegerInverse(a))};w.fromDecimal=function(a){return w.fromRat(e.fromDecimal(a))};w.fromContinuedFraction=function(a){return w.fromRat(e.fromContinuedFraction(e.create(),a))};"undefined"!==typeof b&&(b.rational=
w)})(k)})(this);(function(d,k){"object"===typeof module&&"object"===typeof module.exports?module.exports=d.document?k(d,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return k(b)}:k(d)})("undefined"!==typeof window?window:this,function(d,k){function b(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"===typeof b&&0<b&&b-1 in a}function a(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,D){return!!b.call(a,
D,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(Cb.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return 0<=la.call(b,a)!==c})}function n(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function l(a){var b=nb[a]={};m.each(a.match(ta)||[],function(a,D){b[D]=!0});return b}function h(){I.removeEventListener("DOMContentLoaded",h,!1);d.removeEventListener("load",h,!1);m.ready()}function t(){Object.defineProperty(this.cache={},
0,{get:function(){return{}}});this.expando=m.expando+Math.random()}function e(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(Ra,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Db.test(c)?m.parseJSON(c):c}catch(d){}T.set(a,b,c)}else c=void 0;return c}function q(){return!0}function u(){return!1}function f(){try{return I.activeElement}catch(a){}}function w(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?
b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function c(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function p(a){var b=cb.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function y(a,b){for(var c=0,d=a.length;c<d;c++)J.set(a[c],"globalEval",!b||J.get(b[c],"globalEval"))}function C(a,b){var c,d,g,e;if(1===b.nodeType){if(J.hasData(a)&&(e=J.access(a),c=J.set(b,e),e=e.events))for(g in delete c.handle,
c.events={},e)for(c=0,d=e[g].length;c<d;c++)m.event.add(b,g,e[g][c]);T.hasData(a)&&(g=T.access(a),g=m.extend({},g),T.set(b,g))}}function E(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&m.nodeName(a,b)?m.merge([a],c):c}function g(a,b){var c,g=m(b.createElement(a)).appendTo(b.body),e=d.getDefaultComputedStyle&&(c=d.getDefaultComputedStyle(g[0]))?c.display:m.css(g[0],"display");g.detach();return e}function z(a){var b=
I,c=Sa[a];c||(c=g(a,b),"none"!==c&&c||(Ta=(Ta||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Ta[0].contentDocument,b.write(),b.close(),c=g(a,b),Ta.detach()),Sa[a]=c);return c}function x(a,b,c){var d,g,e=a.style;(c=c||Ua(a))&&(g=c.getPropertyValue(b)||c[b]);c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),ea.test(g)&&Ia.test(b)&&(a=e.width,b=e.minWidth,d=e.maxWidth,e.minWidth=e.maxWidth=e.width=g,g=c.width,e.width=a,e.minWidth=b,e.maxWidth=d));return void 0!==
g?g+"":g}function O(a,b){return{get:function(){if(a())delete this.get;else return(this.get=b).apply(this,arguments)}}}function G(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,g=ha.length;g--;)if(b=ha[g]+c,b in a)return b;return d}function A(a,b,c){return(a=ia.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function M(a,b,c,d,g){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var e=0;4>b;b+=2)"margin"===c&&(e+=m.css(a,c+Aa[b],!0,g)),d?("content"===c&&(e-=m.css(a,"padding"+
Aa[b],!0,g)),"margin"!==c&&(e-=m.css(a,"border"+Aa[b]+"Width",!0,g))):(e+=m.css(a,"padding"+Aa[b],!0,g),"padding"!==c&&(e+=m.css(a,"border"+Aa[b]+"Width",!0,g)));return e}function L(a,b,c){var d=!0,g="width"===b?a.offsetWidth:a.offsetHeight,e=Ua(a),f="border-box"===m.css(a,"boxSizing",!1,e);if(0>=g||null==g){g=x(a,b,e);if(0>g||null==g)g=a.style[b];if(ea.test(g))return g;d=f&&(Q.boxSizingReliable()||g===a.style[b]);g=parseFloat(g)||0}return g+M(a,b,c||(f?"border":"content"),d,e)+"px"}function S(a,
b){for(var c,d,g,e=[],f=0,h=a.length;f<h;f++)d=a[f],d.style&&(e[f]=J.get(d,"olddisplay"),c=d.style.display,b?(e[f]||"none"!==c||(d.style.display=""),""===d.style.display&&Da(d)&&(e[f]=J.access(d,"olddisplay",z(d.nodeName)))):(g=Da(d),"none"===c&&g||J.set(d,"olddisplay",g?c:m.css(d,"display"))));for(f=0;f<h;f++)d=a[f],!d.style||b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?e[f]||"":"none");return a}function N(a,b,c,d,g){return new N.prototype.init(a,b,c,d,g)}function V(){setTimeout(function(){Ea=
void 0});return Ea=m.now()}function da(a,b){var c,d=0,g={height:a};for(b=b?1:0;4>d;d+=2-b)c=Aa[d],g["margin"+c]=g["padding"+c]=a;b&&(g.opacity=g.width=a);return g}function na(a,b,c){for(var d,g=(H[b]||[]).concat(H["*"]),e=0,f=g.length;e<f;e++)if(d=g[e].call(c,b,a))return d}function oa(a,b){var c,d,g,e,f;for(c in a)if(d=m.camelCase(c),g=b[d],e=a[c],m.isArray(e)&&(g=e[1],e=a[c]=e[0]),c!==d&&(a[d]=e,delete a[c]),(f=m.cssHooks[d])&&"expand"in f)for(c in e=f.expand(e),delete a[d],e)c in a||(a[c]=e[c],
b[c]=g);else b[d]=g}function ka(a,b,c){var d,g=0,e=R.length,f=m.Deferred().always(function(){delete h.elem}),h=function(){if(d)return!1;for(var b=Ea||V(),b=Math.max(0,l.startTime+l.duration-b),r=1-(b/l.duration||0),c=0,g=l.tweens.length;c<g;c++)l.tweens[c].run(r);f.notifyWith(a,[l,r,b]);if(1>r&&g)return b;f.resolveWith(a,[l]);return!1},l=f.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Ea||V(),duration:c.duration,tweens:[],
createTween:function(b,r){var c=m.Tween(a,l.opts,b,r,l.opts.specialEasing[b]||l.opts.easing);l.tweens.push(c);return c},stop:function(b){var r=0,c=b?l.tweens.length:0;if(d)return this;for(d=!0;r<c;r++)l.tweens[r].run(1);b?f.resolveWith(a,[l,b]):f.rejectWith(a,[l,b]);return this}});c=l.props;for(oa(c,l.opts.specialEasing);g<e;g++)if(b=R[g].call(l,a,c,l.opts))return b;m.map(c,na,l);m.isFunction(l.opts.start)&&l.opts.start.call(a,l);m.fx.timer(m.extend(h,{elem:a,anim:l,queue:l.opts.queue}));return l.progress(l.opts.progress).done(l.opts.done,
l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function ga(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,g=0,e=b.toLowerCase().match(ta)||[];if(m.isFunction(c))for(;d=e[g++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function va(a,b,c,d){function g(h){var l;e[h]=!0;m.each(a[h]||[],function(a,r){var D=r(b,c,d);if("string"===typeof D&&!f&&!e[D])return b.dataTypes.unshift(D),g(D),!1;if(f)return!(l=D)});return l}var e={},f=a===db;return g(b.dataTypes[0])||
!e["*"]&&g("*")}function aa(a,b){var c,d,g=m.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((g[c]?a:d||(d={}))[c]=b[c]);d&&m.extend(!0,a,d);return a}function pa(a,b,c,d){var g;if(m.isArray(b))m.each(b,function(b,g){c||Oa.test(a)?d(a,g):pa(a+"["+("object"===typeof g?b:"")+"]",g,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(g in b)pa(a+"["+g+"]",b[g],c,d)}function qa(a){return m.isWindow(a)?a:9===a.nodeType&&a.defaultView}var W=[],ba=W.slice,xa=W.concat,wa=W.push,la=W.indexOf,ma={},
eb=ma.toString,Fa=ma.hasOwnProperty,Q={},I=d.document,m=function(a,b){return new m.fn.init(a,b)},Fb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Gb=/^-ms-/,ob=/-([\da-z])/gi,fb=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:"2.1.1",constructor:m,selector:"",length:0,toArray:function(){return ba.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:ba.call(this)},pushStack:function(a){a=m.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a,
b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(ba.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:wa,sort:W.sort,splice:W.splice};m.extend=m.fn.extend=function(){var a,b,c,d,g,e=arguments[0]||
{},f=1,h=arguments.length,l=!1;"boolean"===typeof e&&(l=e,e=arguments[f]||{},f++);"object"===typeof e||m.isFunction(e)||(e={});f===h&&(e=this,f--);for(;f<h;f++)if(null!=(a=arguments[f]))for(b in a)c=e[b],d=a[b],e!==d&&(l&&d&&(m.isPlainObject(d)||(g=m.isArray(d)))?(g?(g=!1,c=c&&m.isArray(c)?c:[]):c=c&&m.isPlainObject(c)?c:{},e[b]=m.extend(l,c,d)):void 0!==d&&(e[b]=d));return e};m.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},
isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!m.isArray(a)&&0<=a-parseFloat(a)},isPlainObject:function(a){return"object"!==m.type(a)||a.nodeType||m.isWindow(a)||a.constructor&&!Fa.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){for(var b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?ma[eb.call(a)]||"object":
typeof a},globalEval:function(a){var b;b=eval;if(a=m.trim(a))1===a.indexOf("use strict")?(b=I.createElement("script"),b.text=a,I.head.appendChild(b).parentNode.removeChild(b)):b(a)},camelCase:function(a){return a.replace(Gb,"ms-").replace(ob,fb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var g,e=0,f=a.length;g=b(a);if(d)if(g)for(;e<f&&(g=c.apply(a[e],d),!1!==g);e++);else for(e in a){if(g=c.apply(a[e],d),!1===g)break}else if(g)for(;e<
f&&(g=c.call(a[e],e,a[e]),!1!==g);e++);else for(e in a)if(g=c.call(a[e],e,a[e]),!1===g)break;return a},trim:function(a){return null==a?"":(a+"").replace(Fb,"")},makeArray:function(a,c){var d=c||[];null!=a&&(b(Object(a))?m.merge(d,"string"===typeof a?[a]:a):wa.call(d,a));return d},inArray:function(a,b,c){return null==b?-1:la.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,g=a.length;d<c;d++)a[g++]=b[d];a.length=g;return a},grep:function(a,b,c){for(var d=[],g=0,e=a.length,f=!c;g<e;g++)c=!b(a[g],
g),c!==f&&d.push(a[g]);return d},map:function(a,c,d){var g,e=0,f=a.length,h=[];if(b(a))for(;e<f;e++)g=c(a[e],e,d),null!=g&&h.push(g);else for(e in a)g=c(a[e],e,d),null!=g&&h.push(g);return xa.apply([],h)},guid:1,proxy:function(a,b){var c,d;"string"===typeof b&&(c=a[b],b=a,a=c);if(m.isFunction(a))return d=ba.call(arguments,2),c=function(){return a.apply(b||this,d.concat(ba.call(arguments)))},c.guid=a.guid=a.guid||m.guid++,c},now:Date.now,support:Q});m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){ma["[object "+b+"]"]=b.toLowerCase()});var Ja=function(a){function b(a,c,d,g){var v,D,e,f,h;(c?c.ownerDocument||c:H)!==M&&N(c);c=c||M;d=d||[];if(!a||"string"!==typeof a)return d;if(1!==(f=c.nodeType)&&9!==f)return[];if(V&&!g){if(v=ta.exec(a))if(e=v[1])if(9===f)if((D=c.getElementById(e))&&D.parentNode){if(D.id===e)return d.push(D),d}else return d;else{if(c.ownerDocument&&(D=c.ownerDocument.getElementById(e))&&na(c,D)&&D.id===e)return d.push(D),d}else{if(v[2])return ga.apply(d,c.getElementsByTagName(a)),
d;if((e=v[3])&&t.getElementsByClassName&&c.getElementsByClassName)return ga.apply(d,c.getElementsByClassName(e)),d}if(t.qsa&&(!S||!S.test(a))){D=v=I;e=c;h=9===f&&a;if(1===f&&"object"!==c.nodeName.toLowerCase()){f=O(a);(v=c.getAttribute("id"))?D=v.replace(ua,"\\$&"):c.setAttribute("id",D);D="[id='"+D+"'] ";for(e=f.length;e--;)f[e]=D+F(f[e]);e=wa.test(a)&&r(c.parentNode)||c;h=f.join(",")}if(h)try{return ga.apply(d,e.querySelectorAll(h)),d}catch(l){}finally{v||c.removeAttribute("id")}}}return y(a.replace(va,
"$1"),c,d,g)}function c(){function a(r,c){b.push(r+" ")>q.cacheLength&&delete a[b.shift()];return a[r+" "]=c}var b=[];return a}function d(a){a[I]=!0;return a}function g(a){var b=M.createElement("div");try{return!!a(b)}catch(r){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function e(a,b){for(var r=a.split("|"),c=a.length;c--;)q.attrHandle[r[c]]=b}function f(a,b){var r=b&&a,c=r&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(c)return c;
if(r)for(;r=r.nextSibling;)if(r===b)return-1;return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function l(a){return function(b){var r=b.nodeName.toLowerCase();return("input"===r||"button"===r)&&b.type===a}}function m(a){return d(function(b){b=+b;return d(function(r,c){for(var d,g=a([],r.length,b),v=g.length;v--;)r[d=g[v]]&&(r[d]=!(c[d]=r[d]))})})}function r(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function v(){}function F(a){for(var b=
0,r=a.length,c="";b<r;b++)c+=a[b].value;return c}function K(a,b,r){var c=b.dir,d=r&&"parentNode"===c,g=R++;return b.first?function(b,r,g){for(;b=b[c];)if(1===b.nodeType||d)return a(b,r,g)}:function(b,r,v){var D,e,f=[J,g];if(v)for(;b=b[c];){if((1===b.nodeType||d)&&a(b,r,v))return!0}else for(;b=b[c];)if(1===b.nodeType||d){e=b[I]||(b[I]={});if((D=e[c])&&D[0]===J&&D[1]===g)return f[2]=D[2];e[c]=f;if(f[2]=a(b,r,v))return!0}}}function n(a){return 1<a.length?function(b,r,c){for(var d=a.length;d--;)if(!a[d](b,
r,c))return!1;return!0}:a[0]}function Ga(a,b,r,c,d){for(var g,v=[],D=0,e=a.length,f=null!=b;D<e;D++)if(g=a[D])if(!r||r(g,c,d))v.push(g),f&&b.push(D);return v}function k(a,r,c,g,v,D){g&&!g[I]&&(g=k(g));v&&!v[I]&&(v=k(v,D));return d(function(d,D,e,f){var F,h,l=[],K=[],m=D.length,n;if(!(n=d)){n=r||"*";for(var k=e.nodeType?[e]:e,Na=[],Ba=0,p=k.length;Ba<p;Ba++)b(n,k[Ba],Na);n=Na}n=!a||!d&&r?n:Ga(n,l,a,e,f);k=c?v||(d?a:m||g)?[]:D:n;c&&c(n,k,e,f);if(g)for(F=Ga(k,K),g(F,[],e,f),e=F.length;e--;)if(h=F[e])k[K[e]]=
!(n[K[e]]=h);if(d){if(v||a){if(v){F=[];for(e=k.length;e--;)(h=k[e])&&F.push(n[e]=h);v(null,k=[],F,f)}for(e=k.length;e--;)(h=k[e])&&-1<(F=v?oa.call(d,h):l[e])&&(d[F]=!(D[F]=h))}}else k=Ga(k===D?k.splice(m,k.length):k),v?v(null,D,k,f):ga.apply(D,k)})}function p(a){var b,r,c,d=a.length,g=q.relative[a[0].type];r=g||q.relative[" "];for(var v=g?1:0,e=K(function(a){return a===b},r,!0),D=K(function(a){return-1<oa.call(b,a)},r,!0),f=[function(a,r,c){return!g&&(c||r!==G)||((b=r).nodeType?e(a,r,c):D(a,r,c))}];v<
d;v++)if(r=q.relative[a[v].type])f=[K(n(f),r)];else{r=q.filter[a[v].type].apply(null,a[v].matches);if(r[I]){for(c=++v;c<d&&!q.relative[a[c].type];c++);return k(1<v&&n(f),1<v&&F(a.slice(0,v-1).concat({value:" "===a[v-2].type?"*":""})).replace(va,"$1"),r,v<c&&p(a.slice(v,c)),c<d&&p(a=a.slice(c)),c<d&&F(a))}f.push(r)}return n(f)}function x(a,r){var c=0<r.length,g=0<a.length,v=function(d,v,e,D,f){var F,h,l,K=0,n="0",m=d&&[],k=[],Na=G,Ba=d||g&&q.find.TAG("*",f),p=J+=null==Na?1:Math.random()||.1,z=Ba.length;
for(f&&(G=v!==M&&v);n!==z&&null!=(F=Ba[n]);n++){if(g&&F){for(h=0;l=a[h++];)if(l(F,v,e)){D.push(F);break}f&&(J=p)}c&&((F=!l&&F)&&K--,d&&m.push(F))}K+=n;if(c&&n!==K){for(h=0;l=r[h++];)l(m,k,v,e);if(d){if(0<K)for(;n--;)m[n]||k[n]||(k[n]=pa.call(D));k=Ga(k)}ga.apply(D,k);f&&!d&&0<k.length&&1<K+r.length&&b.uniqueSort(D)}f&&(J=p,G=Na);return m};return c?d(v):v}var z,t,q,w,u,O,E,y,G,A,C,N,M,L,V,S,B,da,na,I="sizzle"+-new Date,H=a.document,J=0,R=0,P=c(),aa=c(),W=c(),ka=function(a,b){a===b&&(C=!0);return 0},
T={}.hasOwnProperty,Q=[],pa=Q.pop,U=Q.push,ga=Q.push,qa=Q.slice,oa=Q.indexOf||function(a){for(var b=0,r=this.length;b<r;b++)if(this[b]===a)return b;return-1},ba="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),X="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ba+"))|)[\\x20\\t\\r\\n\\f]*\\]",Y=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
X+")*)|.*)\\)|)",va=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Z=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,fa=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ha=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,ia=new RegExp(Y),ja=new RegExp("^"+ba+"$"),ea={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+X),PSEUDO:new RegExp("^"+Y),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},xa=/^(?:input|select|textarea|button)$/i,sa=/^h\d$/i,ca=/^[^{]+\{\s*\[native \w/,ta=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,wa=/[+~]/,ua=/'|\\/g,la=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ma=function(a,b,r){a="0x"+b-65536;
return a!==a||r?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{ga.apply(Q=qa.call(H.childNodes),H.childNodes),Q[H.childNodes.length].nodeType}catch(za){ga={apply:Q.length?function(a,b){U.apply(a,qa.call(b))}:function(a,b){for(var r=a.length,c=0;a[r++]=b[c++];);a.length=r-1}}}t=b.support={};u=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};N=b.setDocument=function(a){var b=a?a.ownerDocument||a:H;a=b.defaultView;if(b===
M||9!==b.nodeType||!b.documentElement)return M;M=b;L=b.documentElement;V=!u(b);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){N()},!1):a.attachEvent&&a.attachEvent("onunload",function(){N()}));t.attributes=g(function(a){a.className="i";return!a.getAttribute("className")});t.getElementsByTagName=g(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});t.getElementsByClassName=ca.test(b.getElementsByClassName)&&g(function(a){a.innerHTML=
"<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});t.getById=g(function(a){L.appendChild(a).id=I;return!b.getElementsByName||!b.getElementsByName(I).length});t.getById?(q.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&V){var r=b.getElementById(a);return r&&r.parentNode?[r]:[]}},q.filter.ID=function(a){var b=a.replace(la,ma);return function(a){return a.getAttribute("id")===b}}):(delete q.find.ID,q.filter.ID=function(a){var b=
a.replace(la,ma);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});q.find.TAG=t.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var r,c=[],d=0,g=b.getElementsByTagName(a);if("*"===a){for(;r=g[d++];)1===r.nodeType&&c.push(r);return c}return g};q.find.CLASS=t.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&V)return b.getElementsByClassName(a)};
B=[];S=[];if(t.qsa=ca.test(b.querySelectorAll))g(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";a.querySelectorAll("[msallowclip^='']").length&&S.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||S.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||S.push(":checked")}),g(function(a){var r=
b.createElement("input");r.setAttribute("type","hidden");a.appendChild(r).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&S.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||S.push(":enabled",":disabled");a.querySelectorAll("*,:x");S.push(",.*:")});(t.matchesSelector=ca.test(da=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&g(function(a){t.disconnectedMatch=da.call(a,"div");da.call(a,"[s!='']:x");
B.push("!=",Y)});S=S.length&&new RegExp(S.join("|"));B=B.length&&new RegExp(B.join("|"));na=(a=ca.test(L.compareDocumentPosition))||ca.test(L.contains)?function(a,b){var r=9===a.nodeType?a.documentElement:a,c=b&&b.parentNode;return a===c||!!(c&&1===c.nodeType&&(r.contains?r.contains(c):a.compareDocumentPosition&&a.compareDocumentPosition(c)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};ka=a?function(a,r){if(a===r)return C=!0,0;var c=!a.compareDocumentPosition-!r.compareDocumentPosition;
if(c)return c;c=(a.ownerDocument||a)===(r.ownerDocument||r)?a.compareDocumentPosition(r):1;return c&1||!t.sortDetached&&r.compareDocumentPosition(a)===c?a===b||a.ownerDocument===H&&na(H,a)?-1:r===b||r.ownerDocument===H&&na(H,r)?1:A?oa.call(A,a)-oa.call(A,r):0:c&4?-1:1}:function(a,r){if(a===r)return C=!0,0;var c,d=0;c=a.parentNode;var g=r.parentNode,v=[a],e=[r];if(!c||!g)return a===b?-1:r===b?1:c?-1:g?1:A?oa.call(A,a)-oa.call(A,r):0;if(c===g)return f(a,r);for(c=a;c=c.parentNode;)v.unshift(c);for(c=
r;c=c.parentNode;)e.unshift(c);for(;v[d]===e[d];)d++;return d?f(v[d],e[d]):v[d]===H?-1:e[d]===H?1:0};return b};b.matches=function(a,r){return b(a,null,null,r)};b.matchesSelector=function(a,r){(a.ownerDocument||a)!==M&&N(a);r=r.replace(ha,"='$1']");if(!(!t.matchesSelector||!V||B&&B.test(r)||S&&S.test(r)))try{var c=da.call(a,r);if(c||t.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return 0<b(r,M,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==M&&N(a);return na(a,
b)};b.attr=function(a,b){(a.ownerDocument||a)!==M&&N(a);var r=q.attrHandle[b.toLowerCase()],r=r&&T.call(q.attrHandle,b.toLowerCase())?r(a,b,!V):void 0;return void 0!==r?r:t.attributes||!V?a.getAttribute(b):(r=a.getAttributeNode(b))&&r.specified?r.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,r=[],c=0,d=0;C=!t.detectDuplicates;A=!t.sortStable&&a.slice(0);a.sort(ka);if(C){for(;b=a[d++];)b===a[d]&&(c=r.push(d));for(;c--;)a.splice(r[c],
1)}A=null;return a};w=b.getText=function(a){var b,r="",c=0;b=a.nodeType;if(!b)for(;b=a[c++];)r+=w(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)r+=w(a)}else if(3===b||4===b)return a.nodeValue;return r};q=b.selectors={cacheLength:50,createPseudo:d,match:ea,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=
a[1].replace(la,ma);a[3]=(a[3]||a[4]||a[5]||"").replace(la,ma);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,r=!a[6]&&a[2];if(ea.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":r&&ia.test(r)&&(b=O(r,!0))&&(b=r.indexOf(")",r.length-b)-r.length)&&(a[0]=a[0].slice(0,
b),a[2]=r.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(la,ma).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=P[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&P(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,r,c){return function(d){d=
b.attr(d,a);if(null==d)return"!="===r;if(!r)return!0;d+="";return"="===r?d===c:"!="===r?d!==c:"^="===r?c&&0===d.indexOf(c):"*="===r?c&&-1<d.indexOf(c):"$="===r?c&&d.slice(-c.length)===c:"~="===r?-1<(" "+d+" ").indexOf(c):"|="===r?d===c||d.slice(0,c.length+1)===c+"-":!1}},CHILD:function(a,b,r,c,d){var g="nth"!==a.slice(0,3),v="last"!==a.slice(-4),e="of-type"===b;return 1===c&&0===d?function(a){return!!a.parentNode}:function(b,r,D){var f,F,h,l,K;r=g!==v?"nextSibling":"previousSibling";var n=b.parentNode,
m=e&&b.nodeName.toLowerCase();D=!D&&!e;if(n){if(g){for(;r;){for(F=b;F=F[r];)if(e?F.nodeName.toLowerCase()===m:1===F.nodeType)return!1;K=r="only"===a&&!K&&"nextSibling"}return!0}K=[v?n.firstChild:n.lastChild];if(v&&D)for(D=n[I]||(n[I]={}),f=D[a]||[],l=f[0]===J&&f[1],h=f[0]===J&&f[2],F=l&&n.childNodes[l];F=++l&&F&&F[r]||(h=l=0)||K.pop();){if(1===F.nodeType&&++h&&F===b){D[a]=[J,l,h];break}}else if(D&&(f=(b[I]||(b[I]={}))[a])&&f[0]===J)h=f[1];else for(;(F=++l&&F&&F[r]||(h=l=0)||K.pop())&&((e?F.nodeName.toLowerCase()!==
m:1!==F.nodeType)||!++h||(D&&((F[I]||(F[I]={}))[a]=[J,h]),F!==b)););h-=d;return h===c||0===h%c&&0<=h/c}}},PSEUDO:function(a,r){var c,g=q.pseudos[a]||q.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return g[I]?g(r):1<g.length?(c=[a,a,"",r],q.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var c,d=g(a,r),v=d.length;v--;)c=oa.call(a,d[v]),a[c]=!(b[c]=d[v])}):function(a){return g(a,0,c)}):g}},pseudos:{not:d(function(a){var b=[],r=[],c=E(a.replace(va,"$1"));return c[I]?
d(function(a,b,r,d){d=c(a,null,d,[]);for(var g=a.length;g--;)if(r=d[g])a[g]=!(b[g]=r)}):function(a,d,g){b[0]=a;c(b,null,g,r);return!r.pop()}}),has:d(function(a){return function(r){return 0<b(a,r).length}}),contains:d(function(a){return function(b){return-1<(b.textContent||b.innerText||w(b)).indexOf(a)}}),lang:d(function(a){ja.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(la,ma).toLowerCase();return function(b){var r;do if(r=V?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return r=
r.toLowerCase(),r===a||0===r.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var r=a.location&&a.location.hash;return r&&r.slice(1)===b.id},root:function(a){return a===L},focus:function(a){return a===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&
!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!q.pseudos.empty(a)},header:function(a){return sa.test(a.nodeName)},input:function(a){return xa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===
a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:m(function(){return[0]}),last:m(function(a,b){return[b-1]}),eq:m(function(a,b,r){return[0>r?r+b:r]}),even:m(function(a,b){for(var r=0;r<b;r+=2)a.push(r);return a}),odd:m(function(a,b){for(var r=1;r<b;r+=2)a.push(r);return a}),lt:m(function(a,b,r){for(b=0>r?r+b:r;0<=--b;)a.push(b);return a}),gt:m(function(a,b,r){for(r=0>r?r+b:r;++r<b;)a.push(r);return a})}};q.pseudos.nth=q.pseudos.eq;for(z in{radio:!0,checkbox:!0,file:!0,password:!0,
image:!0})q.pseudos[z]=h(z);for(z in{submit:!0,reset:!0})q.pseudos[z]=l(z);v.prototype=q.filters=q.pseudos;q.setFilters=new v;O=b.tokenize=function(a,r){var c,d,g,v,e,D,f;if(e=aa[a+" "])return r?0:e.slice(0);e=a;D=[];for(f=q.preFilter;e;){if(!c||(d=Z.exec(e)))d&&(e=e.slice(d[0].length)||e),D.push(g=[]);c=!1;if(d=fa.exec(e))c=d.shift(),g.push({value:c,type:d[0].replace(va," ")}),e=e.slice(c.length);for(v in q.filter)!(d=ea[v].exec(e))||f[v]&&!(d=f[v](d))||(c=d.shift(),g.push({value:c,type:v,matches:d}),
e=e.slice(c.length));if(!c)break}return r?e.length:e?b.error(a):aa(a,D).slice(0)};E=b.compile=function(a,b){var r,c=[],d=[],g=W[a+" "];if(!g){b||(b=O(a));for(r=b.length;r--;)g=p(b[r]),g[I]?c.push(g):d.push(g);g=W(a,x(d,c));g.selector=a}return g};y=b.select=function(a,b,c,d){var g,v,e,D,f="function"===typeof a&&a,h=!d&&O(a=f.selector||a);c=c||[];if(1===h.length){v=h[0]=h[0].slice(0);if(2<v.length&&"ID"===(e=v[0]).type&&t.getById&&9===b.nodeType&&V&&q.relative[v[1].type]){b=(q.find.ID(e.matches[0].replace(la,
ma),b)||[])[0];if(!b)return c;f&&(b=b.parentNode);a=a.slice(v.shift().value.length)}for(g=ea.needsContext.test(a)?0:v.length;g--;){e=v[g];if(q.relative[D=e.type])break;if(D=q.find[D])if(d=D(e.matches[0].replace(la,ma),wa.test(v[0].type)&&r(b.parentNode)||b)){v.splice(g,1);a=d.length&&F(v);if(!a)return ga.apply(c,d),c;break}}}(f||E(a,h))(d,b,!V,c,wa.test(a)&&r(b.parentNode)||b);return c};t.sortStable=I.split("").sort(ka).join("")===I;t.detectDuplicates=!!C;N();t.sortDetached=g(function(a){return a.compareDocumentPosition(M.createElement("div"))&
1});g(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||e("type|href|height|width",function(a,b,r){if(!r)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});t.attributes&&g(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||e("value",function(a,b,r){if(!r&&"input"===a.nodeName.toLowerCase())return a.defaultValue});g(function(a){return null==a.getAttribute("disabled")})||e("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
function(a,b,r){var c;if(!r)return!0===a[b]?b.toLowerCase():(c=a.getAttributeNode(b))&&c.specified?c.value:null});return b}(d);m.find=Ja;m.expr=Ja.selectors;m.expr[":"]=m.expr.pseudos;m.unique=Ja.uniqueSort;m.text=Ja.getText;m.isXMLDoc=Ja.isXML;m.contains=Ja.contains;var pb=m.expr.match.needsContext,qb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Cb=/^.[^:#\[\.,]*$/;m.filter=function(a,b,c){var d=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,
function(a){return 1===a.nodeType}))};m.fn.extend({find:function(a){var b,c=this.length,d=[],g=this;if("string"!==typeof a)return this.pushStack(m(a).filter(function(){for(b=0;b<c;b++)if(m.contains(g[b],this))return!0}));for(b=0;b<c;b++)m.find(a,g[b],d);d=this.pushStack(1<c?m.unique(d):d);d.selector=this.selector?this.selector+" "+a:a;return d},filter:function(b){return this.pushStack(a(this,b||[],!1))},not:function(b){return this.pushStack(a(this,b||[],!0))},is:function(b){return!!a(this,"string"===
typeof b&&pb.test(b)?m(b):b||[],!1).length}});var Va,Hb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(a,b){var c;if(!a)return this;if("string"===typeof a){c="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:Hb.exec(a);if(!c||!c[1]&&b)return!b||b.jquery?(b||Va).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:I,!0)),qb.test(c[1])&&m.isPlainObject(b))for(c in b)if(m.isFunction(this[c]))this[c](b[c]);
else this.attr(c,b[c])}else(c=I.getElementById(c[2]))&&c.parentNode&&(this.length=1,this[0]=c),this.context=I,this.selector=a;return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(m.isFunction(a))return"undefined"!==typeof Va.ready?Va.ready(a):a(m);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return m.makeArray(a,this)}).prototype=m.fn;Va=m(I);var Wa=/^(?:parents|prev(?:Until|All))/,gb={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,
b,c){for(var d=[],g=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(g&&m(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});m.fn.extend({has:function(a){var b=m(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(m.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,g=this.length,e=[],f=pb.test(a)||"string"!==typeof a?m(a,b||this.context):0;d<g;d++)for(c=this[d];c&&c!==
b;c=c.parentNode)if(11>c.nodeType&&(f?-1<f.index(c):1===c.nodeType&&m.find.matchesSelector(c,a))){e.push(c);break}return this.pushStack(1<e.length?m.unique(e):e)},index:function(a){return a?"string"===typeof a?la.call(m(a),this[0]):la.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});m.each({parent:function(a){return(a=
a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return n(a,"nextSibling")},prev:function(a){return n(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||
{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return a.contentDocument||m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var g=m.map(this,b,c);"Until"!==a.slice(-5)&&(d=c);d&&"string"===typeof d&&(g=m.filter(d,g));1<this.length&&(gb[a]||m.unique(g),Wa.test(a)&&g.reverse());return this.pushStack(g)}});var ta=/\S+/g,nb={};m.Callbacks=function(a){a="string"===typeof a?nb[a]||l(a):m.extend({},a);var b,c,d,g,e,f,h=[],n=!a.once&&[],k=function(v){b=
a.memory&&v;c=!0;f=g||0;g=0;e=h.length;for(d=!0;h&&f<e;f++)if(!1===h[f].apply(v[0],v[1])&&a.stopOnFalse){b=!1;break}d=!1;h&&(n?n.length&&k(n.shift()):b?h=[]:r.disable())},r={add:function(){if(h){var c=h.length;(function K(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&r.has(c)||h.push(c):c&&c.length&&"string"!==d&&K(c)})})(arguments);d?e=h.length:b&&(g=c,k(b))}return this},remove:function(){h&&m.each(arguments,function(a,b){for(var r;-1<(r=m.inArray(b,h,r));)h.splice(r,1),d&&(r<=
e&&e--,r<=f&&f--)});return this},has:function(a){return a?-1<m.inArray(a,h):!(!h||!h.length)},empty:function(){h=[];e=0;return this},disable:function(){h=n=b=void 0;return this},disabled:function(){return!h},lock:function(){n=void 0;b||r.disable();return this},locked:function(){return!n},fireWith:function(a,b){!h||c&&!n||(b=b||[],b=[a,b.slice?b.slice():b],d?n.push(b):k(b));return this},fire:function(){r.fireWith(this,arguments);return this},fired:function(){return!!c}};return r};m.extend({Deferred:function(a){var b=
[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){g.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,e){var f=m.isFunction(a[b])&&a[b];g[e[1]](function(){var a=f&&f.apply(this,arguments);if(a&&m.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);
else c[e[0]+"With"](this===d?c.promise():this,f?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},g={};d.pipe=d.then;m.each(b,function(a,e){var f=e[2],D=e[3];d[e[1]]=f.add;D&&f.add(function(){c=D},b[a^1][2].disable,b[2][2].lock);g[e[0]]=function(){g[e[0]+"With"](this===g?d:this,arguments);return this};g[e[0]+"With"]=f.fireWith});d.promise(g);a&&a.call(g,g);return g},when:function(a){var b=0,c=ba.call(arguments),d=c.length,g=1!==d||a&&m.isFunction(a.promise)?
d:0,e=1===g?a:m.Deferred(),f=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?ba.call(arguments):d;c===h?e.notifyWith(b,c):--g||e.resolveWith(b,c)}},h,l,n;if(1<d)for(h=Array(d),l=Array(d),n=Array(d);b<d;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(f(b,n,c)).fail(e.reject).progress(f(b,l,h)):--g;g||e.resolveWith(n,c);return e.promise()}});var Xa;m.fn.ready=function(a){m.ready.promise().done(a);return this};m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:
m.ready(!0)},ready:function(a){(!0===a?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==a&&0<--m.readyWait||(Xa.resolveWith(I,[m]),m.fn.triggerHandler&&(m(I).triggerHandler("ready"),m(I).off("ready"))))}});m.ready.promise=function(a){Xa||(Xa=m.Deferred(),"complete"===I.readyState?setTimeout(m.ready):(I.addEventListener("DOMContentLoaded",h,!1),d.addEventListener("load",h,!1)));return Xa.promise(a)};m.ready.promise();var za=m.access=function(a,b,c,d,g,e,f){var h=0,l=a.length,n=null==c;if("object"===m.type(c))for(h in g=
!0,c)m.access(a,b,h,c[h],!0,e,f);else if(void 0!==d&&(g=!0,m.isFunction(d)||(f=!0),n&&(f?(b.call(a,d),b=null):(n=b,b=function(a,b,c){return n.call(m(a),c)})),b))for(;h<l;h++)b(a[h],c,f?d:d.call(a[h],h,b(a[h],c)));return g?a:n?b.call(a):l?b(a[0],c):e};m.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};t.uid=1;t.accepts=m.acceptData;t.prototype={key:function(a){if(!t.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=t.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,
b)}catch(d){b[this.expando]=c,m.extend(a,b)}}this.cache[c]||(this.cache[c]={});return c},set:function(a,b,c){var d;a=this.key(a);var g=this.cache[a];if("string"===typeof b)g[b]=c;else if(m.isEmptyObject(g))m.extend(this.cache[a],b);else for(d in b)g[d]=b[d];return g},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){if(void 0===b||b&&"string"===typeof b&&void 0===c)return c=this.get(a,b),void 0!==c?c:this.get(a,m.camelCase(b));this.set(a,b,c);return void 0!==
c?c:b},remove:function(a,b){var c,d;c=this.key(a);var g=this.cache[c];if(void 0===b)this.cache[c]={};else for(m.isArray(b)?d=b.concat(b.map(m.camelCase)):(c=m.camelCase(b),b in g?d=[b,c]:(d=c,d=d in g?[d]:d.match(ta)||[])),c=d.length;c--;)delete g[d[c]]},hasData:function(a){return!m.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var J=new t,T=new t,Db=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ra=/([A-Z])/g;m.extend({hasData:function(a){return T.hasData(a)||
J.hasData(a)},data:function(a,b,c){return T.access(a,b,c)},removeData:function(a,b){T.remove(a,b)},_data:function(a,b,c){return J.access(a,b,c)},_removeData:function(a,b){J.remove(a,b)}});m.fn.extend({data:function(a,b){var c,d,g,f=this[0],h=f&&f.attributes;if(void 0===a){if(this.length&&(g=T.get(f),1===f.nodeType&&!J.get(f,"hasDataAttrs"))){for(c=h.length;c--;)h[c]&&(d=h[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),e(f,d,g[d])));J.set(f,"hasDataAttrs",!0)}return g}return"object"===
typeof a?this.each(function(){T.set(this,a)}):za(this,function(b){var c,d=m.camelCase(a);if(f&&void 0===b){c=T.get(f,a);if(void 0!==c)return c;c=T.get(f,d);if(void 0!==c)return c;c=e(f,d,void 0);if(void 0!==c)return c}else this.each(function(){var c=T.get(this,d);T.set(this,d,b);-1!==a.indexOf("-")&&void 0!==c&&T.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){T.remove(this,a)})}});m.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+
"queue",d=J.get(a,b),c&&(!d||m.isArray(c)?d=J.access(a,b,m.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,g=c.shift(),e=m._queueHooks(a,b),f=function(){m.dequeue(a,b)};"inprogress"===g&&(g=c.shift(),d--);g&&("fx"===b&&c.unshift("inprogress"),delete e.stop,g.call(a,f,e));!d&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return J.get(a,c)||J.access(a,c,{empty:m.Callbacks("once memory").add(function(){J.remove(a,[b+"queue",c])})})}});
m.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,g=m.Deferred(),e=this,f=this.length,h=function(){--d||g.resolveWith(e,[e])};"string"!==
typeof a&&(b=a,a=void 0);for(a=a||"fx";f--;)(c=J.get(e[f],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));h();return g.promise(b)}});var sa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Aa=["Top","Right","Bottom","Left"],Da=function(a,b){a=b||a;return"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},rb=/^(?:checkbox|radio)$/i;(function(){var a=I.createDocumentFragment().appendChild(I.createElement("div")),b=I.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked",
"checked");b.setAttribute("name","t");a.appendChild(b);Q.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";Q.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue})();Q.focusinBubbles="onfocusin"in d;var Ib=/^key/,Jb=/^(?:mouse|pointer|contextmenu)|click/,sb=/^(?:focusinfocus|focusoutblur)$/,P=/^([^.]*)(?:\.(.+)|)$/;m.event={global:{},add:function(a,b,c,d,g){var e,f,h,l,n,r,v,F,K;if(n=J.get(a))for(c.handler&&(e=c,c=e.handler,g=e.selector),c.guid||(c.guid=
m.guid++),(l=n.events)||(l=n.events={}),(f=n.handle)||(f=n.handle=function(b){return"undefined"!==typeof m&&m.event.triggered!==b.type?m.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(ta)||[""],n=b.length;n--;)h=P.exec(b[n])||[],F=r=h[1],K=(h[2]||"").split(".").sort(),F&&(h=m.event.special[F]||{},F=(g?h.delegateType:h.bindType)||F,h=m.event.special[F]||{},r=m.extend({type:F,origType:r,data:d,handler:c,guid:c.guid,selector:g,needsContext:g&&m.expr.match.needsContext.test(g),namespace:K.join(".")},
e),(v=l[F])||(v=l[F]=[],v.delegateCount=0,h.setup&&!1!==h.setup.call(a,d,K,f)||a.addEventListener&&a.addEventListener(F,f,!1)),h.add&&(h.add.call(a,r),r.handler.guid||(r.handler.guid=c.guid)),g?v.splice(v.delegateCount++,0,r):v.push(r),m.event.global[F]=!0)},remove:function(a,b,c,d,g){var e,f,h,l,n,r,v,F,K,k,Ga,p=J.hasData(a)&&J.get(a);if(p&&(l=p.events)){b=(b||"").match(ta)||[""];for(n=b.length;n--;)if(h=P.exec(b[n])||[],K=Ga=h[1],k=(h[2]||"").split(".").sort(),K){v=m.event.special[K]||{};K=(d?v.delegateType:
v.bindType)||K;F=l[K]||[];h=h[2]&&new RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)");for(f=e=F.length;e--;)r=F[e],!g&&Ga!==r.origType||c&&c.guid!==r.guid||h&&!h.test(r.namespace)||d&&d!==r.selector&&("**"!==d||!r.selector)||(F.splice(e,1),r.selector&&F.delegateCount--,v.remove&&v.remove.call(a,r));f&&!F.length&&(v.teardown&&!1!==v.teardown.call(a,k,p.handle)||m.removeEvent(a,K,p.handle),delete l[K])}else for(K in l)m.event.remove(a,K+b[n],c,d,!0);m.isEmptyObject(l)&&(delete p.handle,J.remove(a,
"events"))}},trigger:function(a,b,c,g){var e,f,h,l,n,k,r=[c||I],v=Fa.call(a,"type")?a.type:a;k=Fa.call(a,"namespace")?a.namespace.split("."):[];f=e=c=c||I;if(3!==c.nodeType&&8!==c.nodeType&&!sb.test(v+m.event.triggered)&&(0<=v.indexOf(".")&&(k=v.split("."),v=k.shift(),k.sort()),l=0>v.indexOf(":")&&"on"+v,a=a[m.expando]?a:new m.Event(v,"object"===typeof a&&a),a.isTrigger=g?2:3,a.namespace=k.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,
a.target||(a.target=c),b=null==b?[a]:m.makeArray(b,[a]),k=m.event.special[v]||{},g||!k.trigger||!1!==k.trigger.apply(c,b))){if(!g&&!k.noBubble&&!m.isWindow(c)){h=k.delegateType||v;sb.test(h+v)||(f=f.parentNode);for(;f;f=f.parentNode)r.push(f),e=f;e===(c.ownerDocument||I)&&r.push(e.defaultView||e.parentWindow||d)}for(e=0;(f=r[e++])&&!a.isPropagationStopped();)a.type=1<e?h:k.bindType||v,(n=(J.get(f,"events")||{})[a.type]&&J.get(f,"handle"))&&n.apply(f,b),(n=l&&f[l])&&n.apply&&m.acceptData(f)&&(a.result=
n.apply(f,b),!1===a.result&&a.preventDefault());a.type=v;g||a.isDefaultPrevented()||k._default&&!1!==k._default.apply(r.pop(),b)||!m.acceptData(c)||!l||!m.isFunction(c[v])||m.isWindow(c)||((e=c[l])&&(c[l]=null),m.event.triggered=v,c[v](),m.event.triggered=void 0,e&&(c[l]=e));return a.result}},dispatch:function(a){a=m.event.fix(a);var b,c,d,g,e=[],f=ba.call(arguments);b=(J.get(this,"events")||{})[a.type]||[];var h=m.event.special[a.type]||{};f[0]=a;a.delegateTarget=this;if(!h.preDispatch||!1!==h.preDispatch.call(this,
a)){e=m.event.handlers.call(this,a,b);for(b=0;(g=e[b++])&&!a.isPropagationStopped();)for(a.currentTarget=g.elem,c=0;(d=g.handlers[c++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(d.namespace))a.handleObj=d,a.data=d.data,d=((m.event.special[d.origType]||{}).handle||d.handler).apply(g.elem,f),void 0!==d&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation());h.postDispatch&&h.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var c,d,g,e,f=[],h=
b.delegateCount,l=a.target;if(h&&l.nodeType&&(!a.button||"click"!==a.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==a.type){d=[];for(c=0;c<h;c++)e=b[c],g=e.selector+" ",void 0===d[g]&&(d[g]=e.needsContext?0<=m(g,this).index(l):m.find(g,this,null,[l]).length),d[g]&&d.push(e);d.length&&f.push({elem:l,handlers:d})}h<b.length&&f.push({elem:this,handlers:b.slice(h)});return f},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,g=b.button;null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||I,d=c.documentElement,c=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0),a.pageY=
b.clientY+(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||c&&c.clientTop||0));a.which||void 0===g||(a.which=g&1?1:g&2?3:g&4?2:0);return a}},fix:function(a){if(a[m.expando])return a;var b,c,d;b=a.type;var g=a,e=this.fixHooks[b];e||(this.fixHooks[b]=e=Jb.test(b)?this.mouseHooks:Ib.test(b)?this.keyHooks:{});d=e.props?this.props.concat(e.props):this.props;a=new m.Event(g);for(b=d.length;b--;)c=d[b],a[c]=g[c];a.target||(a.target=I);3===a.target.nodeType&&(a.target=a.target.parentNode);return e.filter?
e.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===f()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=
a.result)}}},simulate:function(a,b,c,d){a=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(a,null,b):m.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};m.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)};m.Event=function(a,b){if(!(this instanceof m.Event))return new m.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?
q:u):this.type=a;b&&m.extend(this,b);this.timeStamp=a&&a.timeStamp||m.now();this[m.expando]=!0};m.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=q;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=q;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=
q;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,g=a.handleObj;if(!d||d!==this&&!m.contains(this,d))a.type=g.origType,c=g.handler.apply(this,arguments),a.type=b;return c}}});Q.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=
function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,g=J.access(d,b);g||d.addEventListener(a,c,!0);J.access(d,b,(g||0)+1)},teardown:function(){var d=this.ownerDocument||this,g=J.access(d,b)-1;g?J.access(d,b,g):(d.removeEventListener(a,c,!0),J.remove(d,b))}}});m.fn.extend({on:function(a,b,c,d,g){var e,f;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],g);return this}null==c&&null==
d?(d=b,c=b=void 0):null==d&&("string"===typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0));if(!1===d)d=u;else if(!d)return this;1===g&&(e=d,d=function(a){m().off(a);return e.apply(this,arguments)},d.guid=e.guid||(e.guid=m.guid++));return this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),
this;if("object"===typeof a){for(d in a)this.off(d,b,a[d]);return this}if(!1===b||"function"===typeof b)c=b,b=void 0;!1===c&&(c=u);return this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return m.event.trigger(a,b,c,!0)}});var tb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ka=/<([\w:]+)/,Kb=/<|&#?\w+;/,Lb=/<(?:script|style|link)/i,ub=/checked\s*(?:[^=]|=\s*.checked.)/i,
hb=/^$|\/(?:java|ecma)script/i,cb=/^true\/(.*)/,Mb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ja={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ja.optgroup=ja.option;ja.tbody=ja.tfoot=ja.colgroup=ja.caption=ja.thead;ja.th=ja.td;m.extend({clone:function(a,b,c){var d,g,e,f,h=a.cloneNode(!0),l=m.contains(a.ownerDocument,
a);if(!(Q.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(f=E(h),e=E(a),d=0,g=e.length;d<g;d++){var n=e[d],r=f[d],v=r.nodeName.toLowerCase();if("input"===v&&rb.test(n.type))r.checked=n.checked;else if("input"===v||"textarea"===v)r.defaultValue=n.defaultValue}if(b)if(c)for(e=e||E(a),f=f||E(h),d=0,g=e.length;d<g;d++)C(e[d],f[d]);else C(a,h);f=E(h,"script");0<f.length&&y(f,!l&&E(a,"script"));return h},buildFragment:function(a,b,c,d){for(var g,e,f,h=b.createDocumentFragment(),l=[],
n=0,r=a.length;n<r;n++)if((g=a[n])||0===g)if("object"===m.type(g))m.merge(l,g.nodeType?[g]:g);else if(Kb.test(g)){e=e||h.appendChild(b.createElement("div"));f=(Ka.exec(g)||["",""])[1].toLowerCase();f=ja[f]||ja._default;e.innerHTML=f[1]+g.replace(tb,"<$1></$2>")+f[2];for(f=f[0];f--;)e=e.lastChild;m.merge(l,e.childNodes);e=h.firstChild;e.textContent=""}else l.push(b.createTextNode(g));h.textContent="";for(n=0;g=l[n++];)if(!d||-1===m.inArray(g,d))if(a=m.contains(g.ownerDocument,g),e=E(h.appendChild(g),
"script"),a&&y(e),c)for(f=0;g=e[f++];)hb.test(g.type||"")&&c.push(g);return h},cleanData:function(a){for(var b,c,d,g,e=m.event.special,f=0;void 0!==(c=a[f]);f++){if(m.acceptData(c)&&(g=c[J.expando])&&(b=J.cache[g])){if(b.events)for(d in b.events)e[d]?m.event.remove(c,d):m.removeEvent(c,d,b.handle);J.cache[g]&&delete J.cache[g]}delete T.cache[c[T.expando]]}}});m.fn.extend({text:function(a){return za(this,function(a){return void 0===a?m.text(this):this.empty().each(function(){if(1===this.nodeType||
11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||w(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=w(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,
this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,g=0;null!=(c=d[g]);g++)b||1!==c.nodeType||m.cleanData(E(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&y(E(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(m.cleanData(E(a,!1)),a.textContent="");return this},clone:function(a,
b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return m.clone(this,a,b)})},html:function(a){return za(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"===typeof a&&!Lb.test(a)&&!ja[(Ka.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(tb,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(E(b,!1)),b.innerHTML=a);b=0}catch(g){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=
arguments[0];this.domManip(arguments,function(b){a=this.parentNode;m.cleanData(E(this));a&&a.replaceChild(b,this)});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=xa.apply([],a);var d,g,e,f,h=0,l=this.length,n=this,k=l-1,r=a[0],v=m.isFunction(r);if(v||1<l&&"string"===typeof r&&!Q.checkClone&&ub.test(r))return this.each(function(c){var d=n.eq(c);v&&(a[0]=r.call(this,c,d.html()));d.domManip(a,b)});if(l&&(d=m.buildFragment(a,
this[0].ownerDocument,!1,this),g=d.firstChild,1===d.childNodes.length&&(d=g),g)){g=m.map(E(d,"script"),c);for(e=g.length;h<l;h++)f=d,h!==k&&(f=m.clone(f,!0,!0),e&&m.merge(g,E(f,"script"))),b.call(this[h],f,h);if(e)for(d=g[g.length-1].ownerDocument,m.map(g,p),h=0;h<e;h++)f=g[h],hb.test(f.type||"")&&!J.access(f,"globalEval")&&m.contains(d,f)&&(f.src?m._evalUrl&&m._evalUrl(f.src):m.globalEval(f.textContent.replace(Mb,"")))}return this}});m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",
insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c=[],d=m(a),g=d.length-1,e=0;e<=g;e++)a=e===g?this:this.clone(!0),m(d[e])[b](a),wa.apply(c,a.get());return this.pushStack(c)}});var Ta,Sa={},Ia=/^margin/,ea=new RegExp("^("+sa+")(?!px)[a-z%]+$","i"),Ua=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};(function(){function a(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";
f.innerHTML="";g.appendChild(e);var h=d.getComputedStyle(f,null);b="1%"!==h.top;c="4px"===h.width;g.removeChild(e)}var b,c,g=I.documentElement,e=I.createElement("div"),f=I.createElement("div");f.style&&(f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f),d.getComputedStyle&&m.extend(Q,{pixelPosition:function(){a();
return b},boxSizingReliable:function(){null==c&&a();return c},reliableMarginRight:function(){var a;a=f.appendChild(I.createElement("div"));a.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";a.style.marginRight=a.style.width="0";f.style.width="1px";g.appendChild(e);a=!parseFloat(d.getComputedStyle(a,null).marginRight);g.removeChild(e);return a}}))})();m.swap=function(a,b,c,d){var g,e={};for(g in b)e[g]=
a.style[g],a.style[g]=b[g];c=c.apply(a,d||[]);for(g in b)a.style[g]=e[g];return c};var vb=/^(none|table(?!-c[ea]).+)/,ia=new RegExp("^("+sa+")(.*)$","i"),X=new RegExp("^([+-])=("+sa+")","i"),wb={position:"absolute",visibility:"hidden",display:"block"},ib={letterSpacing:"0",fontWeight:"400"},ha=["Webkit","O","Moz","ms"];m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=x(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,
opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var g,e,f,h=m.camelCase(b),l=a.style;b=m.cssProps[h]||(m.cssProps[h]=G(l,h));f=m.cssHooks[b]||m.cssHooks[h];if(void 0!==c)e=typeof c,"string"===e&&(g=X.exec(c))&&(c=(g[1]+1)*g[2]+parseFloat(m.css(a,b)),e="number"),null!=c&&c===c&&("number"!==e||m.cssNumber[h]||(c+="px"),Q.clearCloneStyle||""!==c||0!==b.indexOf("background")||(l[b]="inherit"),
f&&"set"in f&&void 0===(c=f.set(a,c,d))||(l[b]=c));else return f&&"get"in f&&void 0!==(g=f.get(a,!1,d))?g:l[b]}},css:function(a,b,c,d){var g,e;e=m.camelCase(b);b=m.cssProps[e]||(m.cssProps[e]=G(a.style,e));(e=m.cssHooks[b]||m.cssHooks[e])&&"get"in e&&(g=e.get(a,!0,c));void 0===g&&(g=x(a,b,d));"normal"===g&&b in ib&&(g=ib[b]);return""===c||c?(a=parseFloat(g),!0===c||m.isNumeric(a)?a||0:g):g}});m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){if(c)return vb.test(m.css(a,"display"))&&
0===a.offsetWidth?m.swap(a,wb,function(){return L(a,b,d)}):L(a,b,d)},set:function(a,c,d){var g=d&&Ua(a);return A(a,c,d?M(a,b,d,"border-box"===m.css(a,"boxSizing",!1,g),g):0)}}});m.cssHooks.marginRight=O(Q.reliableMarginRight,function(a,b){if(b)return m.swap(a,{display:"inline-block"},x,[a,"marginRight"])});m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){var d=0,g={};for(c="string"===typeof c?c.split(" "):[c];4>d;d++)g[a+Aa[d]+b]=c[d]||c[d-2]||c[0];return g}};
Ia.test(a)||(m.cssHooks[a+b].set=A)});m.fn.extend({css:function(a,b){return za(this,function(a,b,c){var d,g={},e=0;if(m.isArray(b)){c=Ua(a);for(d=b.length;e<d;e++)g[b[e]]=m.css(a,b[e],!1,c);return g}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,1<arguments.length)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){Da(this)?m(this).show():m(this).hide()})}});m.Tween=N;N.prototype={constructor:N,
init:function(a,b,c,d,g,e){this.elem=a;this.prop=c;this.easing=g||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=e||(m.cssNumber[c]?"":"px")},cur:function(){var a=N.propHooks[this.prop];return a&&a.get?a.get(this):N.propHooks._default.get(this)},run:function(a){var b,c=N.propHooks[this.prop];this.pos=this.options.duration?b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,
this.now,this);c&&c.set?c.set(this):N.propHooks._default.set(this);return this}};N.prototype.init.prototype=N.prototype;N.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=m.css(a.elem,a.prop,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(m.fx.step[a.prop])m.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};N.propHooks.scrollTop=
N.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};m.fx=N.prototype.init;m.fx.step={};var Ea,Ya,Nb=/^(?:toggle|show|hide)$/,B=new RegExp("^(?:([+-])=|)("+sa+")([a-z%]*)$","i"),Z=/queueHooks$/,R=[function(a,b,c){var d,g,e,f,h,l,n=this,r={},v=a.style,F=a.nodeType&&Da(a),K=J.get(a,"fxshow");c.queue||(f=m._queueHooks(a,"fx"),null==f.unqueued&&(f.unqueued=0,h=f.empty.fire,
f.empty.fire=function(){f.unqueued||h()}),f.unqueued++,n.always(function(){n.always(function(){f.unqueued--;m.queue(a,"fx").length||f.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[v.overflow,v.overflowX,v.overflowY],l=m.css(a,"display"),g="none"===l?J.get(a,"olddisplay")||z(a.nodeName):l,"inline"===g&&"none"===m.css(a,"float")&&(v.display="inline-block"));c.overflow&&(v.overflow="hidden",n.always(function(){v.overflow=c.overflow[0];v.overflowX=c.overflow[1];v.overflowY=
c.overflow[2]}));for(d in b)if(g=b[d],Nb.exec(g)){delete b[d];e=e||"toggle"===g;if(g===(F?"hide":"show"))if("show"===g&&K&&void 0!==K[d])F=!0;else continue;r[d]=K&&K[d]||m.style(a,d)}else l=void 0;if(m.isEmptyObject(r))"inline"===("none"===l?z(a.nodeName):l)&&(v.display=l);else for(d in K?"hidden"in K&&(F=K.hidden):K=J.access(a,"fxshow",{}),e&&(K.hidden=!F),F?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;J.remove(a,"fxshow");for(b in r)m.style(a,b,r[b])}),r)b=na(F?K[d]:0,d,n),
d in K||(K[d]=b.start,F&&(b.end=b.start,b.start="width"===d||"height"===d?1:0))}],H={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),g=B.exec(b),e=g&&g[3]||(m.cssNumber[a]?"":"px"),f=(m.cssNumber[a]||"px"!==e&&+d)&&B.exec(m.css(c.elem,a)),h=1,l=20;if(f&&f[3]!==e){e=e||f[3];g=g||[];f=+d||1;do h=h||".5",f/=h,m.style(c.elem,a,f+e);while(h!==(h=c.cur()/d)&&1!==h&&--l)}g&&(f=c.start=+f||+d||0,c.unit=e,c.end=g[1]?f+(g[1]+1)*g[2]:+g[2]);return c}]};m.Animation=m.extend(ka,{tweener:function(a,b){m.isFunction(a)?
(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,g=a.length;d<g;d++)c=a[d],H[c]=H[c]||[],H[c].unshift(b)},prefilter:function(a,b){b?R.unshift(a):R.push(a)}});m.speed=function(a,b,c){var d=a&&"object"===typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};d.duration=m.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;
d.complete=function(){m.isFunction(d.old)&&d.old.call(this);d.queue&&m.dequeue(this,d.queue)};return d};m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Da).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var g=m.isEmptyObject(a),e=m.speed(b,c,d);b=function(){var b=ka(this,m.extend({},a),e);(g||J.get(this,"finish"))&&b.stop(!0)};b.finish=b;return g||!1===e.queue?this.each(b):this.queue(e.queue,b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;
b(c)};"string"!==typeof a&&(c=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,g=null!=a&&a+"queueHooks",e=m.timers,f=J.get(this);if(g)f[g]&&f[g].stop&&d(f[g]);else for(g in f)f[g]&&f[g].stop&&Z.test(g)&&d(f[g]);for(g=e.length;g--;)e[g].elem!==this||null!=a&&e[g].queue!==a||(e[g].anim.stop(c),b=!1,e.splice(g,1));!b&&c||m.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,c=J.get(this),d=c[a+"queue"];b=c[a+"queueHooks"];
var g=m.timers,e=d?d.length:0;c.finish=!0;m.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=g.length;b--;)g[b].elem===this&&g[b].queue===a&&(g[b].anim.stop(!0),g.splice(b,1));for(b=0;b<e;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}});m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,g){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(da(b,!0),a,d,g)}});m.each({slideDown:da("show"),slideUp:da("hide"),slideToggle:da("toggle"),
fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});m.timers=[];m.fx.tick=function(){var a,b=0,c=m.timers;for(Ea=m.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||m.fx.stop();Ea=void 0};m.fx.timer=function(a){m.timers.push(a);a()?m.fx.start():m.timers.pop()};m.fx.interval=13;m.fx.start=function(){Ya||(Ya=setInterval(m.fx.tick,m.fx.interval))};m.fx.stop=function(){clearInterval(Ya);
Ya=null};m.fx.speeds={slow:600,fast:200,_default:400};m.fn.delay=function(a,b){a=m.fx?m.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})};(function(){var a=I.createElement("input"),b=I.createElement("select"),c=b.appendChild(I.createElement("option"));a.type="checkbox";Q.checkOn=""!==a.value;Q.optSelected=c.selected;b.disabled=!0;Q.optDisabled=!c.disabled;a=I.createElement("input");a.value="t";a.type="radio";Q.radioValue="t"===a.value})();
var U,La=m.expr.attrHandle;m.fn.extend({attr:function(a,b){return za(this,m.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}});m.extend({attr:function(a,b,c){var d,g,e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if("undefined"===typeof a.getAttribute)return m.prop(a,b,c);1===e&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?U:void 0));if(void 0!==c)if(null===c)m.removeAttr(a,b);else{if(d&&"set"in d&&void 0!==(g=d.set(a,
c,b)))return g;a.setAttribute(b,c+"");return c}else{if(d&&"get"in d&&null!==(g=d.get(a,b)))return g;g=m.find.attr(a,b);return null==g?void 0:g}}},removeAttr:function(a,b){var c,d,g=0,e=b&&b.match(ta);if(e&&1===a.nodeType)for(;c=e[g++];)d=m.propFix[c]||c,m.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!Q.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}}});U={set:function(a,b,c){!1===b?
m.removeAttr(a,c):a.setAttribute(c,c);return c}};m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=La[b]||m.find.attr;La[b]=function(a,b,d){var g,e;d||(e=La[b],La[b]=g,g=null!=c(a,b,d)?b.toLowerCase():null,La[b]=e);return g}});var Ob=/^(?:input|select|textarea|button)$/i;m.fn.extend({prop:function(a,b){return za(this,m.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[m.propFix[a]||a]})}});m.extend({propFix:{"for":"htmlFor","class":"className"},
prop:function(a,b,c){var d,g,e;e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if(e=1!==e||!m.isXMLDoc(a))b=m.propFix[b]||b,g=m.propHooks[b];return void 0!==c?g&&"set"in g&&void 0!==(d=g.set(a,c,b))?d:a[b]=c:g&&"get"in g&&null!==(d=g.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||Ob.test(a.nodeName)||a.href?a.tabIndex:-1}}}});Q.optSelected||(m.propHooks.selected={get:function(a){(a=a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null}});m.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){m.propFix[this.toLowerCase()]=this});var Pa=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,g,e;b="string"===typeof a&&a;var f=0,h=this.length;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ta)||[];f<h;f++)if(c=this[f],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Pa," "):" ")){for(e=0;g=b[e++];)0>d.indexOf(" "+g+" ")&&(d+=g+" ");d=m.trim(d);c.className!==d&&(c.className=d)}return this},
removeClass:function(a){var b,c,d,g,e;b=0===arguments.length||"string"===typeof a&&a;var f=0,h=this.length;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ta)||[];f<h;f++)if(c=this[f],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Pa," "):"")){for(e=0;g=b[e++];)for(;0<=d.indexOf(" "+g+" ");)d=d.replace(" "+g+" "," ");d=a?m.trim(d):"";c.className!==d&&(c.className=d)}return this},toggleClass:function(a,b){var c=
typeof a;return"boolean"===typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):m.isFunction(a)?this.each(function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,g=m(this),e=a.match(ta)||[];b=e[d++];)g.hasClass(b)?g.removeClass(b):g.addClass(b);else if("undefined"===c||"boolean"===c)this.className&&J.set(this,"__className__",this.className),this.className=this.className||!1===a?"":J.get(this,"__className__")||""})},hasClass:function(a){a=
" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Pa," ").indexOf(a))return!0;return!1}});var Tb=/\r/g;m.fn.extend({val:function(a){var b,c,d,g=this[0];if(arguments.length)return d=m.isFunction(a),this.each(function(c){1===this.nodeType&&(c=d?a.call(this,c,m(this).val()):a,null==c?c="":"number"===typeof c?c+="":m.isArray(c)&&(c=m.map(c,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&
"set"in b&&void 0!==b.set(this,c,"value")||(this.value=c))});if(g){if((b=m.valHooks[g.type]||m.valHooks[g.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(g,"value")))return c;c=g.value;return"string"===typeof c?c.replace(Tb,""):null==c?"":c}}});m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,g=(a="select-one"===a.type||0>d)?null:[],e=a?d+1:c.length,f=0>d?e:a?d:0;f<e;f++)if(b=
c[f],!(!b.selected&&f!==d||(Q.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&m.nodeName(b.parentNode,"optgroup"))){b=m(b).val();if(a)return b;g.push(b)}return g},set:function(a,b){for(var c,d,g=a.options,e=m.makeArray(b),f=g.length;f--;)if(d=g[f],d.selected=0<=m.inArray(d.value,e))c=!0;c||(a.selectedIndex=-1);return e}}}});m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){if(m.isArray(b))return a.checked=0<=m.inArray(m(a).val(),b)}};Q.checkOn||
(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,
b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var xb=m.now(),yb=/\?/;m.parseJSON=function(a){return JSON.parse(a+"")};m.parseXML=function(a){var b,c;if(!a||"string"!==typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}b&&!b.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+
a);return b};var Ca,fa,Pb=/#.*$/,zb=/([?&])_=[^&]*/,Ab=/^(.*?):[ \t]*([^\r\n]*)$/mg,Qb=/^(?:GET|HEAD)$/,ua=/^\/\//,Qa=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ma={},db={},jb="*/".concat("*");try{fa=location.href}catch(ca){fa=I.createElement("a"),fa.href="",fa=fa.href}Ca=Qa.exec(fa.toLowerCase())||[];m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fa,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ca[1]),global:!0,processData:!0,async:!0,
contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?aa(aa(a,m.ajaxSettings),b):aa(m.ajaxSettings,
a)},ajaxPrefilter:ga(Ma),ajaxTransport:ga(db),ajax:function(a,b){function c(a,b,r,f){var l,z,x,q;q=b;if(2!==t){t=2;h&&clearTimeout(h);d=void 0;e=f||"";w.readyState=0<a?4:0;f=200<=a&&300>a||304===a;if(r){x=v;for(var u=w,O,Ha,E,ra,G=x.contents,y=x.dataTypes;"*"===y[0];)y.shift(),void 0===O&&(O=x.mimeType||u.getResponseHeader("Content-Type"));if(O)for(Ha in G)if(G[Ha]&&G[Ha].test(O)){y.unshift(Ha);break}if(y[0]in r)E=y[0];else{for(Ha in r){if(!y[0]||x.converters[Ha+" "+y[0]]){E=Ha;break}ra||(ra=Ha)}E=
E||ra}E?(E!==y[0]&&y.unshift(E),x=r[E]):x=void 0}a:{r=v;O=x;Ha=w;E=f;var A,ya,D,u={},G=r.dataTypes.slice();if(G[1])for(ya in r.converters)u[ya.toLowerCase()]=r.converters[ya];for(ra=G.shift();ra;)if(r.responseFields[ra]&&(Ha[r.responseFields[ra]]=O),!D&&E&&r.dataFilter&&(O=r.dataFilter(O,r.dataType)),D=ra,ra=G.shift())if("*"===ra)ra=D;else if("*"!==D&&D!==ra){ya=u[D+" "+ra]||u["* "+ra];if(!ya)for(A in u)if(x=A.split(" "),x[1]===ra&&(ya=u[D+" "+x[0]]||u["* "+x[0]])){!0===ya?ya=u[A]:!0!==u[A]&&(ra=
x[0],G.unshift(x[1]));break}if(!0!==ya)if(ya&&r["throws"])O=ya(O);else try{O=ya(O)}catch(C){x={state:"parsererror",error:ya?C:"No conversion from "+D+" to "+ra};break a}}x={state:"success",data:O}}if(f)v.ifModified&&((q=w.getResponseHeader("Last-Modified"))&&(m.lastModified[g]=q),(q=w.getResponseHeader("etag"))&&(m.etag[g]=q)),204===a||"HEAD"===v.type?q="nocontent":304===a?q="notmodified":(q=x.state,l=x.data,z=x.error,f=!z);else if(z=q,a||!q)q="error",0>a&&(a=0);w.status=a;w.statusText=(b||q)+"";
f?k.resolveWith(F,[l,q,w]):k.rejectWith(F,[w,q,z]);w.statusCode(p);p=void 0;n&&K.trigger(f?"ajaxSuccess":"ajaxError",[w,v,f?l:z]);Ga.fireWith(F,[w,q]);n&&(K.trigger("ajaxComplete",[w,v]),--m.active||m.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);b=b||{};var d,g,e,f,h,l,n,r,v=m.ajaxSetup({},b),F=v.context||v,K=v.context&&(F.nodeType||F.jquery)?m(F):m.event,k=m.Deferred(),Ga=m.Callbacks("once memory"),p=v.statusCode||{},z={},x={},t=0,q="canceled",w={readyState:0,getResponseHeader:function(a){var b;
if(2===t){if(!f)for(f={};b=Ab.exec(e);)f[b[1].toLowerCase()]=b[2];b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();t||(a=x[c]=x[c]||a,z[a]=b);return this},overrideMimeType:function(a){t||(v.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)p[b]=[p[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){a=a||q;d&&d.abort(a);c(0,a);return this}};k.promise(w).complete=
Ga.add;w.success=w.done;w.error=w.fail;v.url=((a||v.url||fa)+"").replace(Pb,"").replace(ua,Ca[1]+"//");v.type=b.method||b.type||v.method||v.type;v.dataTypes=m.trim(v.dataType||"*").toLowerCase().match(ta)||[""];null==v.crossDomain&&(l=Qa.exec(v.url.toLowerCase()),v.crossDomain=!(!l||l[1]===Ca[1]&&l[2]===Ca[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(Ca[3]||("http:"===Ca[1]?"80":"443"))));v.data&&v.processData&&"string"!==typeof v.data&&(v.data=m.param(v.data,v.traditional));va(Ma,v,b,w);if(2===t)return w;
(n=v.global)&&0===m.active++&&m.event.trigger("ajaxStart");v.type=v.type.toUpperCase();v.hasContent=!Qb.test(v.type);g=v.url;v.hasContent||(v.data&&(g=v.url+=(yb.test(g)?"&":"?")+v.data,delete v.data),!1===v.cache&&(v.url=zb.test(g)?g.replace(zb,"$1_="+xb++):g+(yb.test(g)?"&":"?")+"_="+xb++));v.ifModified&&(m.lastModified[g]&&w.setRequestHeader("If-Modified-Since",m.lastModified[g]),m.etag[g]&&w.setRequestHeader("If-None-Match",m.etag[g]));(v.data&&v.hasContent&&!1!==v.contentType||b.contentType)&&
w.setRequestHeader("Content-Type",v.contentType);w.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+jb+"; q=0.01":""):v.accepts["*"]);for(r in v.headers)w.setRequestHeader(r,v.headers[r]);if(v.beforeSend&&(!1===v.beforeSend.call(F,w,v)||2===t))return w.abort();q="abort";for(r in{success:1,error:1,complete:1})w[r](v[r]);if(d=va(db,v,b,w)){w.readyState=1;n&&K.trigger("ajaxSend",[w,v]);v.async&&0<v.timeout&&(h=setTimeout(function(){w.abort("timeout")},
v.timeout));try{t=1,d.send(z,c)}catch(u){if(2>t)c(-1,u);else throw u;}}else c(-1,"No Transport");return w},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}});m.each(["get","post"],function(a,b){m[b]=function(a,c,d,g){m.isFunction(c)&&(g=g||d,d=c,c=void 0);return m.ajax({url:a,type:b,dataType:g,data:c,success:d})}});m.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){m.fn[b]=function(a){return this.on(b,
a)}});m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};m.fn.extend({wrapAll:function(a){var b;if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});this[0]&&(b=m(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this));return this},wrapInner:function(a){return m.isFunction(a)?this.each(function(b){m(this).wrapInner(a.call(this,
b))}):this.each(function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}});m.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight};m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Za=/%20/g,Oa=/\[\]$/,$a=
/\r?\n/g,Ub=/^(?:submit|button|image|reset|file)$/i,Vb=/^(?:input|select|textarea|keygen)/i;m.param=function(a,b){var c,d=[],g=function(a,b){b=m.isFunction(b)?b():null==b?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional);if(m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){g(this.name,this.value)});else for(c in a)pa(c,a[c],b,g);return d.join("&").replace(Za,"+")};m.fn.extend({serialize:function(){return m.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Vb.test(this.nodeName)&&!Ub.test(a)&&(this.checked||!rb.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace($a,"\r\n")}}):{name:b.name,value:c.replace($a,"\r\n")}}).get()}});m.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};
var Rb=0,Y={},Wb={0:200,1223:204},ab=m.ajaxSettings.xhr();if(d.ActiveXObject)m(d).on("unload",function(){for(var a in Y)Y[a]()});Q.cors=!!ab&&"withCredentials"in ab;Q.ajax=ab=!!ab;m.ajaxTransport(function(a){var b;if(Q.cors||ab&&!a.crossDomain)return{send:function(c,d){var g,e=a.xhr(),f=++Rb;e.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(g in a.xhrFields)e[g]=a.xhrFields[g];a.mimeType&&e.overrideMimeType&&e.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||
(c["X-Requested-With"]="XMLHttpRequest");for(g in c)e.setRequestHeader(g,c[g]);b=function(a){return function(){b&&(delete Y[f],b=e.onload=e.onerror=null,"abort"===a?e.abort():"error"===a?d(e.status,e.statusText):d(Wb[e.status]||e.status,e.statusText,"string"===typeof e.responseText?{text:e.responseText}:void 0,e.getAllResponseHeaders()))}};e.onload=b();e.onerror=b("error");b=Y[f]=b("abort");try{e.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h;}},abort:function(){b&&b()}}});m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){m.globalEval(a);return a}}});m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,g){b=m("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&g("error"===a.type?404:200,a.type)});I.head.appendChild(b[0])},abort:function(){c&&c()}}}});
var Bb=[],bb=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Bb.pop()||m.expando+"_"+xb++;this[a]=!0;return a}});m.ajaxPrefilter("json jsonp",function(a,b,c){var g,e,f,h=!1!==a.jsonp&&(bb.test(a.url)?"url":"string"===typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&bb.test(a.data)&&"data");if(h||"jsonp"===a.dataTypes[0])return g=a.jsonpCallback=m.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,h?a[h]=a[h].replace(bb,"$1"+
g):!1!==a.jsonp&&(a.url+=(yb.test(a.url)?"&":"?")+a.jsonp+"="+g),a.converters["script json"]=function(){f||m.error(g+" was not called");return f[0]},a.dataTypes[0]="json",e=d[g],d[g]=function(){f=arguments},c.always(function(){d[g]=e;a[g]&&(a.jsonpCallback=b.jsonpCallback,Bb.push(g));f&&m.isFunction(e)&&e(f[0]);f=e=void 0}),"script"});m.parseHTML=function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||I;var d=qb.exec(a);c=!c&&[];if(d)return[b.createElement(d[1])];
d=m.buildFragment([a],b,c);c&&c.length&&m(c).remove();return m.merge([],d.childNodes)};var kb=m.fn.load;m.fn.load=function(a,b,c){if("string"!==typeof a&&kb)return kb.apply(this,arguments);var d,g,e,f=this,h=a.indexOf(" ");0<=h&&(d=m.trim(a.slice(h)),a=a.slice(0,h));m.isFunction(b)?(c=b,b=void 0):b&&"object"===typeof b&&(g="POST");0<f.length&&m.ajax({url:a,type:g,dataType:"html",data:b}).done(function(a){e=arguments;f.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){f.each(c,
e||[a.responseText,b,a])});return this};m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var lb=d.document.documentElement;m.offset={setOffset:function(a,b,c){var d,g,e,f=m.css(a,"position"),h=m(a),l={};"static"===f&&(a.style.position="relative");e=h.offset();g=m.css(a,"top");d=m.css(a,"left");("absolute"===f||"fixed"===f)&&-1<(g+d).indexOf("auto")?(d=h.position(),g=d.top,d=d.left):(g=parseFloat(g)||0,d=parseFloat(d)||0);m.isFunction(b)&&(b=b.call(a,
c,e));null!=b.top&&(l.top=b.top-e.top+g);null!=b.left&&(l.left=b.left-e.left+d);"using"in b?b.using.call(a,l):h.css(l)}};m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c;c=this[0];var d={top:0,left:0},g=c&&c.ownerDocument;if(g){b=g.documentElement;if(!m.contains(b,c))return d;"undefined"!==typeof c.getBoundingClientRect&&(d=c.getBoundingClientRect());c=qa(g);return{top:d.top+c.pageYOffset-b.clientTop,left:d.left+
c.pageXOffset-b.clientLeft}}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};"fixed"===m.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(d=a.offset()),d.top+=m.css(a[0],"borderTopWidth",!0),d.left+=m.css(a[0],"borderLeftWidth",!0));return{top:b.top-d.top-m.css(c,"marginTop",!0),left:b.left-d.left-m.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||lb;a&&!m.nodeName(a,
"html")&&"static"===m.css(a,"position");)a=a.offsetParent;return a||lb})}});m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;m.fn[a]=function(g){return za(this,function(a,g,e){var f=qa(a);if(void 0===e)return f?f[b]:a[g];f?f.scrollTo(c?d.pageXOffset:e,c?e:d.pageYOffset):a[g]=e},a,g,arguments.length,null)}});m.each(["top","left"],function(a,b){m.cssHooks[b]=O(Q.pixelPosition,function(a,c){if(c)return c=x(a,b),ea.test(c)?m(a).position()[b]+"px":c})});m.each({Height:"height",
Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,g){var e=arguments.length&&(c||"boolean"!==typeof d),f=c||(!0===d||!0===g?"margin":"border");return za(this,function(b,c,d){return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===d?m.css(b,c,f):m.style(b,c,d,f)},b,e?d:void 0,e,null)}})});m.fn.size=
function(){return this.length};m.fn.andSelf=m.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return m});var mb=d.jQuery,Xb=d.$;m.noConflict=function(a){d.$===m&&(d.$=Xb);a&&d.jQuery===m&&(d.jQuery=mb);return m};"undefined"===typeof k&&(d.jQuery=d.$=m);return m});/*
   Copyright 2008-2014 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net
*/
(function(d,k,b){(function(a){"function"===typeof define&&define.amd?define("datatables",["jquery"],a):"object"===typeof exports?a(require("jquery")):jQuery&&!jQuery.fn.dataTable&&a(jQuery)})(function(a){function n(b){var c,d,g={};a.each(b,function(a,e){(c=a.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(c[1]+" ")&&(d=a.replace(c[0],c[2].toLowerCase()),g[d]=a,"o"===c[1]&&n(b[a]))});b._hungarianMap=g}function l(c,d,g){c._hungarianMap||n(c);var e;a.each(d,function(f,h){e=c._hungarianMap[f];
e===b||!g&&d[e]!==b||("o"===e.charAt(0)?(d[e]||(d[e]={}),a.extend(!0,d[e],d[f]),l(c[e],d[e],g)):d[e]=d[f])})}function h(a){var b=B.defaults.oLanguage,c=a.sZeroRecords;!a.sEmptyTable&&c&&"No data available in table"===b.sEmptyTable&&ea(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&c&&"Loading..."===b.sLoadingRecords&&ea(a,a,"sZeroRecords","sLoadingRecords");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&Ya(a)}function t(a){ca(a,"ordering","bSort");ca(a,"orderMulti","bSortMulti");
ca(a,"orderClasses","bSortClasses");ca(a,"orderCellsTop","bSortCellsTop");ca(a,"order","aaSorting");ca(a,"orderFixed","aaSortingFixed");ca(a,"paging","bPaginate");ca(a,"pagingType","sPaginationType");ca(a,"pageLength","iDisplayLength");ca(a,"searching","bFilter");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&l(B.models.oSearch,a[b])}function e(a){ca(a,"orderable","bSortable");ca(a,"orderData","aDataSort");ca(a,"orderSequence","asSorting");ca(a,"orderDataType","sortDataType")}function q(b){b=
b.oBrowser;var c=a("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(a("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(a('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),d=c.find(".test");b.bScrollOversize=100===d[0].offsetWidth;b.bScrollbarLeft=1!==d.offset().left;c.remove()}function u(a,c,d,g,e,f){var h,l=!1;d!==b&&(h=d,l=!0);for(;g!==e;)a.hasOwnProperty(g)&&(h=l?c(h,a[g],g,a):a[g],l=!0,g+=f);return h}
function f(b,c){var d=B.defaults.column,g=b.aoColumns.length,d=a.extend({},B.models.oColumn,d,{nTh:c?c:k.createElement("th"),sTitle:d.sTitle?d.sTitle:c?c.innerHTML:"",aDataSort:d.aDataSort?d.aDataSort:[g],mData:d.mData?d.mData:g,idx:g});b.aoColumns.push(d);d=b.aoPreSearchCols;d[g]=a.extend({},B.models.oSearch,d[g]);w(b,g,null)}function w(c,d,g){d=c.aoColumns[d];var f=c.oClasses,h=a(d.nTh);if(!d.sWidthOrig){d.sWidthOrig=h.attr("width")||null;var n=(h.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);
n&&(d.sWidthOrig=n[1])}g!==b&&null!==g&&(e(g),l(B.defaults.column,g),g.mDataProp===b||g.mData||(g.mData=g.mDataProp),g.sType&&(d._sManualType=g.sType),g.className&&!g.sClass&&(g.sClass=g.className),a.extend(d,g),ea(d,g,"sWidth","sWidthOrig"),"number"===typeof g.iDataSort&&(d.aDataSort=[g.iDataSort]),ea(d,g,"aDataSort"));var m=d.mData,k=L(m),p=d.mRender?L(d.mRender):null;g=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};d._bAttrSrc=a.isPlainObject(m)&&(g(m.sort)||g(m.type)||g(m.filter));
d.fnGetData=function(a,c,d){var r=k(a,c,b,d);return p&&c?p(r,c,a,d):r};d.fnSetData=function(a,b,c){return S(m)(a,b,c)};"number"!==typeof m&&(c._rowReadObject=!0);c.oFeatures.bSort||(d.bSortable=!1,h.addClass(f.sSortableNone));c=-1!==a.inArray("asc",d.asSorting);g=-1!==a.inArray("desc",d.asSorting);d.bSortable&&(c||g)?c&&!g?(d.sSortingClass=f.sSortableAsc,d.sSortingClassJUI=f.sSortJUIAscAllowed):!c&&g?(d.sSortingClass=f.sSortableDesc,d.sSortingClassJUI=f.sSortJUIDescAllowed):(d.sSortingClass=f.sSortable,
d.sSortingClassJUI=f.sSortJUI):(d.sSortingClass=f.sSortableNone,d.sSortingClassJUI="")}function c(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Aa(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;""===b.sY&&""===b.sX||Ra(a);X(a,null,"column-sizing",[a])}function p(a,b){var c=E(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function y(b,c){var d=E(b,"bVisible"),d=a.inArray(c,d);return-1!==d?d:null}function C(a){return E(a,"bVisible").length}function E(b,c){var d=
[];a.map(b.aoColumns,function(a,b){a[c]&&d.push(b)});return d}function g(a){var c=a.aoColumns,d=a.aoData,g=B.ext.type.detect,e,f,h,l,n,m,k,p,x;e=0;for(f=c.length;e<f;e++)if(k=c[e],x=[],!k.sType&&k._sManualType)k.sType=k._sManualType;else if(!k.sType){h=0;for(l=g.length;h<l;h++){n=0;for(m=d.length;n<m;n++){x[n]===b&&(x[n]=G(a,n,e,"type"));p=g[h](x[n],a);if(!p&&h!==g.length-1)break;if("html"===p)break}if(p){k.sType=p;break}}k.sType||(k.sType="string")}}function z(c,d,g,e){var h,l,n,m,k,p,x=c.aoColumns;
if(d)for(h=d.length-1;0<=h;h--){p=d[h];var z=p.targets!==b?p.targets:p.aTargets;a.isArray(z)||(z=[z]);l=0;for(n=z.length;l<n;l++)if("number"===typeof z[l]&&0<=z[l]){for(;x.length<=z[l];)f(c);e(z[l],p)}else if("number"===typeof z[l]&&0>z[l])e(x.length+z[l],p);else if("string"===typeof z[l])for(m=0,k=x.length;m<k;m++)("_all"==z[l]||a(x[m].nTh).hasClass(z[l]))&&e(m,p)}if(g)for(h=0,c=g.length;h<c;h++)e(h,g[h])}function x(b,c,d,g){var e=b.aoData.length,f=a.extend(!0,{},B.models.oRow,{src:d?"dom":"data"});
f._aData=c;b.aoData.push(f);c=b.aoColumns;for(var f=0,h=c.length;f<h;f++)d&&A(b,e,f,G(b,e,f)),c[f].sType=null;b.aiDisplayMaster.push(e);!d&&b.oFeatures.bDeferRender||ka(b,e,d,g);return e}function O(b,c){var d;c instanceof a||(c=a(c));return c.map(function(a,c){d=oa(b,c);return x(b,d.data,c,d.cells)})}function G(a,c,d,g){var e=a.iDraw,f=a.aoColumns[d],h=a.aoData[c]._aData,l=f.sDefaultContent;d=f.fnGetData(h,g,{settings:a,row:c,col:d});if(d===b)return a.iDrawError!=e&&null===l&&(Ia(a,0,"Requested unknown parameter "+
("function"==typeof f.mData?"{function}":"'"+f.mData+"'")+" for row "+c,4),a.iDrawError=e),l;if((d===h||null===d)&&null!==l)d=l;else if("function"===typeof d)return d.call(h);return null===d&&"display"==g?"":d}function A(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}function M(b){return a.map(b.match(/(\\.|[^\.])+/g),function(a){return a.replace(/\\./g,".")})}function L(c){if(a.isPlainObject(c)){var d={};a.each(c,function(a,b){b&&(d[a]=L(b))});return function(a,
c,g,r){var e=d[c]||d._;return e!==b?e(a,c,g,r):a}}if(null===c)return function(a){return a};if("function"===typeof c)return function(a,b,d,g){return c(a,b,d,g)};if("string"!==typeof c||-1===c.indexOf(".")&&-1===c.indexOf("[")&&-1===c.indexOf("("))return function(a,b){return a[c]};var g=function(a,c,d){var r,e;if(""!==d){e=M(d);for(var f=0,h=e.length;f<h;f++){d=e[f].match(Za);r=e[f].match(Oa);if(d){e[f]=e[f].replace(Za,"");""!==e[f]&&(a=a[e[f]]);r=[];e.splice(0,f+1);e=e.join(".");f=0;for(h=a.length;f<
h;f++)r.push(g(a[f],c,e));a=d[0].substring(1,d[0].length-1);a=""===a?r:r.join(a);break}else if(r){e[f]=e[f].replace(Oa,"");a=a[e[f]]();continue}if(null===a||a[e[f]]===b)return b;a=a[e[f]]}}return a};return function(a,b){return g(a,b,c)}}function S(c){if(a.isPlainObject(c))return S(c._);if(null===c)return function(){};if("function"===typeof c)return function(a,b,d){c(a,"set",b,d)};if("string"!==typeof c||-1===c.indexOf(".")&&-1===c.indexOf("[")&&-1===c.indexOf("("))return function(a,b){a[c]=b};var d=
function(a,c,g){g=M(g);var r;r=g[g.length-1];for(var e,f,h=0,l=g.length-1;h<l;h++){e=g[h].match(Za);f=g[h].match(Oa);if(e){g[h]=g[h].replace(Za,"");a[g[h]]=[];r=g.slice();r.splice(0,h+1);e=r.join(".");f=0;for(l=c.length;f<l;f++)r={},d(r,c[f],e),a[g[h]].push(r);return}f&&(g[h]=g[h].replace(Oa,""),a=a[g[h]](c));if(null===a[g[h]]||a[g[h]]===b)a[g[h]]={};a=a[g[h]]}if(r.match(Oa))a[r.replace(Oa,"")](c);else a[r.replace(Za,"")]=c};return function(a,b){return d(a,b,c)}}function N(a){return ua(a.aoData,"_aData")}
function V(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0}function da(a,c,d){for(var g=-1,e=0,f=a.length;e<f;e++)a[e]==c?g=e:a[e]>c&&a[e]--; -1!=g&&d===b&&a.splice(g,1)}function na(a,c,d,g){var e=a.aoData[c],f,h=function(b,d){for(;b.childNodes.length;)b.removeChild(b.firstChild);b.innerHTML=G(a,c,d,"display")};if("dom"!==d&&(d&&"auto"!==d||"dom"!==e.src)){var l=e.anCells;if(l)if(g!==b)h(l[g],g);else for(d=0,f=l.length;d<f;d++)h(l[d],d)}else e._aData=oa(a,e,g,g===b?b:e._aData).data;
e._aSortData=null;e._aFilterData=null;h=a.aoColumns;if(g!==b)h[g].sType=null;else{d=0;for(f=h.length;d<f;d++)h[d].sType=null;ga(e)}}function oa(c,d,g,e){var f=[],h=d.firstChild,l,n=0,m,k=c.aoColumns,p=c._rowReadObject;e=e||p?{}:[];var x=function(a,b){if("string"===typeof a){var c=a.indexOf("@");-1!==c&&(c=a.substring(c+1),S(a)(e,b.getAttribute(c)))}};c=function(c){if(g===b||g===n)l=k[n],m=a.trim(c.innerHTML),l&&l._bAttrSrc?(S(l.mData._)(e,m),x(l.mData.sort,c),x(l.mData.type,c),x(l.mData.filter,c)):
p?(l._setter||(l._setter=S(l.mData)),l._setter(e,m)):e[n]=m;n++};if(h)for(;h;){d=h.nodeName.toUpperCase();if("TD"==d||"TH"==d)c(h),f.push(h);h=h.nextSibling}else for(f=d.anCells,h=0,d=f.length;h<d;h++)c(f[h]);return{data:e,cells:f}}function ka(a,b,c,d){var g=a.aoData[b],e=g._aData,f=[],h,l,n,m,p;if(null===g.nTr){h=c||k.createElement("tr");g.nTr=h;g.anCells=f;h._DT_RowIndex=b;ga(g);m=0;for(p=a.aoColumns.length;m<p;m++){n=a.aoColumns[m];l=c?d[m]:k.createElement(n.sCellType);f.push(l);if(!c||n.mRender||
n.mData!==m)l.innerHTML=G(a,b,m,"display");n.sClass&&(l.className+=" "+n.sClass);n.bVisible&&!c?h.appendChild(l):!n.bVisible&&c&&l.parentNode.removeChild(l);n.fnCreatedCell&&n.fnCreatedCell.call(a.oInstance,l,G(a,b,m),e,b,m)}X(a,"aoRowCreatedCallback",null,[h,e,b])}g.nTr.setAttribute("role","row")}function ga(b){var c=b.nTr,d=b._aData;if(c){d.DT_RowId&&(c.id=d.DT_RowId);if(d.DT_RowClass){var g=d.DT_RowClass.split(" ");b.__rowc=b.__rowc?jb(b.__rowc.concat(g)):g;a(c).removeClass(b.__rowc.join(" ")).addClass(d.DT_RowClass)}d.DT_RowData&&
a(c).data(d.DT_RowData)}}function va(b){var c,d,g,e,f,h=b.nTHead,l=b.nTFoot,n=0===a("th, td",h).length,m=b.oClasses,k=b.aoColumns;n&&(e=a("<tr/>").appendTo(h));c=0;for(d=k.length;c<d;c++)f=k[c],g=a(f.nTh).addClass(f.sClass),n&&g.appendTo(e),b.oFeatures.bSort&&(g.addClass(f.sSortingClass),!1!==f.bSortable&&(g.attr("tabindex",b.iTabIndex).attr("aria-controls",b.sTableId),hb(b,f.nTh,c))),f.sTitle!=g.html()&&g.html(f.sTitle),ib(b,"header")(b,g,f,m);n&&ba(b.aoHeader,h);a(h).find(">tr").attr("role","row");
a(h).find(">tr>th, >tr>td").addClass(m.sHeaderTH);a(l).find(">tr>th, >tr>td").addClass(m.sFooterTH);if(null!==l)for(b=b.aoFooter[0],c=0,d=b.length;c<d;c++)f=k[c],f.nTf=b[c].cell,f.sClass&&a(f.nTf).addClass(f.sClass)}function aa(c,d,g){var e,f,h,l=[],n=[],m=c.aoColumns.length,k;if(d){g===b&&(g=!1);e=0;for(f=d.length;e<f;e++){l[e]=d[e].slice();l[e].nTr=d[e].nTr;for(h=m-1;0<=h;h--)c.aoColumns[h].bVisible||g||l[e].splice(h,1);n.push([])}e=0;for(f=l.length;e<f;e++){if(c=l[e].nTr)for(;h=c.firstChild;)c.removeChild(h);
h=0;for(d=l[e].length;h<d;h++)if(k=m=1,n[e][h]===b){c.appendChild(l[e][h].cell);for(n[e][h]=1;l[e+m]!==b&&l[e][h].cell==l[e+m][h].cell;)n[e+m][h]=1,m++;for(;l[e][h+k]!==b&&l[e][h].cell==l[e][h+k].cell;){for(g=0;g<m;g++)n[e+g][h+k]=1;k++}a(l[e][h].cell).attr("rowspan",m).attr("colspan",k)}}}}function pa(c){var d=X(c,"aoPreDrawCallback","preDraw",[c]);if(-1!==a.inArray(!1,d))T(c,!1);else{var d=[],g=0,e=c.asStripeClasses,f=e.length,h=c.oLanguage,l=c.iInitDisplayStart,n="ssp"==ha(c),m=c.aiDisplay;c.bDrawing=
!0;l!==b&&-1!==l&&(c._iDisplayStart=n?l:l>=c.fnRecordsDisplay()?0:l,c.iInitDisplayStart=-1);var l=c._iDisplayStart,k=c.fnDisplayEnd();if(c.bDeferLoading)c.bDeferLoading=!1,c.iDraw++,T(c,!1);else if(!n)c.iDraw++;else if(!c.bDestroying&&!la(c))return;if(0!==m.length)for(h=n?c.aoData.length:k,n=n?0:l;n<h;n++){var p=m[n],x=c.aoData[p];null===x.nTr&&ka(c,p);p=x.nTr;if(0!==f){var z=e[g%f];x._sRowStripe!=z&&(a(p).removeClass(x._sRowStripe).addClass(z),x._sRowStripe=z)}X(c,"aoRowCallback",null,[p,x._aData,
g,n]);d.push(p);g++}else g=h.sZeroRecords,1==c.iDraw&&"ajax"==ha(c)?g=h.sLoadingRecords:h.sEmptyTable&&0===c.fnRecordsTotal()&&(g=h.sEmptyTable),d[0]=a("<tr/>",{"class":f?e[0]:""}).append(a("<td />",{valign:"top",colSpan:C(c),"class":c.oClasses.sRowEmpty}).html(g))[0];X(c,"aoHeaderCallback","header",[a(c.nTHead).children("tr")[0],N(c),l,k,m]);X(c,"aoFooterCallback","footer",[a(c.nTFoot).children("tr")[0],N(c),l,k,m]);e=a(c.nTBody);e.children().detach();e.append(a(d));X(c,"aoDrawCallback","draw",[c]);
c.bSorted=!1;c.bFiltered=!1;c.bDrawing=!1}}function qa(a,b){var c=a.oFeatures,d=c.bFilter;c.bSort&&Kb(a);d?I(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;pa(a);a._drawHold=!1}function W(b){var c=b.oClasses,d=a(b.nTable),d=a("<div/>").insertBefore(d),g=b.oFeatures,e=a("<div/>",{id:b.sTableId+"_wrapper","class":c.sWrapper+(b.nTFoot?"":" "+c.sNoFooter)});b.nHolding=d[0];b.nTableWrapper=e[0];b.nTableReinsertBefore=b.nTable.nextSibling;for(var f=
b.sDom.split(""),h,l,n,m,k,p,x=0;x<f.length;x++){h=null;l=f[x];if("<"==l){n=a("<div/>")[0];m=f[x+1];if("'"==m||'"'==m){k="";for(p=2;f[x+p]!=m;)k+=f[x+p],p++;"H"==k?k=c.sJUIHeader:"F"==k&&(k=c.sJUIFooter);-1!=k.indexOf(".")?(m=k.split("."),n.id=m[0].substr(1,m[0].length-1),n.className=m[1]):"#"==k.charAt(0)?n.id=k.substr(1,k.length-1):n.className=k;x+=p}e.append(n);e=a(n)}else if(">"==l)e=e.parent();else if("l"==l&&g.bPaginate&&g.bLengthChange)h=nb(b);else if("f"==l&&g.bFilter)h=Q(b);else if("r"==
l&&g.bProcessing)h=J(b);else if("t"==l)h=Db(b);else if("i"==l&&g.bInfo)h=Cb(b);else if("p"==l&&g.bPaginate)h=Xa(b);else if(0!==B.ext.feature.length)for(n=B.ext.feature,p=0,m=n.length;p<m;p++)if(l==n[p].cFeature){h=n[p].fnInit(b);break}h&&(n=b.aanFeatures,n[l]||(n[l]=[]),n[l].push(h),e.append(h))}d.replaceWith(e)}function ba(b,c){var d=a(c).children("tr"),g,e,f,h,l,n,m,k,p,x;b.splice(0,b.length);f=0;for(n=d.length;f<n;f++)b.push([]);f=0;for(n=d.length;f<n;f++)for(g=d[f],e=g.firstChild;e;){if("TD"==
e.nodeName.toUpperCase()||"TH"==e.nodeName.toUpperCase()){k=1*e.getAttribute("colspan");p=1*e.getAttribute("rowspan");k=k&&0!==k&&1!==k?k:1;p=p&&0!==p&&1!==p?p:1;h=0;for(l=b[f];l[h];)h++;m=h;x=1===k?!0:!1;for(l=0;l<k;l++)for(h=0;h<p;h++)b[f+h][m+l]={cell:e,unique:x},b[f+h].nTr=g}e=e.nextSibling}}function xa(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],ba(c,b)));b=0;for(var g=c.length;b<g;b++)for(var e=0,f=c[b].length;e<f;e++)!c[b][e].unique||d[e]&&a.bSortCellsTop||(d[e]=c[b][e].cell);return d}function wa(b,
c,d){X(b,"aoServerParams","serverParams",[c]);if(c&&a.isArray(c)){var g={},e=/(.*?)\[\]$/;a.each(c,function(a,b){var c=b.name.match(e);c?(c=c[0],g[c]||(g[c]=[]),g[c].push(b.value)):g[b.name]=b.value});c=g}var f,h=b.ajax,l=b.oInstance;if(a.isPlainObject(h)&&h.data){f=h.data;var n=a.isFunction(f)?f(c):f;c=a.isFunction(f)&&n?n:a.extend(!0,c,n);delete h.data}n={data:c,success:function(a){var c=a.error||a.sError;c&&b.oApi._fnLog(b,0,c);b.json=a;X(b,null,"xhr",[b,a]);d(a)},dataType:"json",cache:!1,type:b.sServerMethod,
error:function(a,c,d){d=b.oApi._fnLog;"parsererror"==c?d(b,0,"Invalid JSON response",1):4===a.readyState&&d(b,0,"Ajax error",7);T(b,!1)}};b.oAjaxData=c;X(b,null,"preXhr",[b,c]);b.fnServerData?b.fnServerData.call(l,b.sAjaxSource,a.map(c,function(a,b){return{name:b,value:a}}),d,b):b.sAjaxSource||"string"===typeof h?b.jqXHR=a.ajax(a.extend(n,{url:h||b.sAjaxSource})):a.isFunction(h)?b.jqXHR=h.call(l,c,d,b):(b.jqXHR=a.ajax(a.extend(n,h)),h.data=f)}function la(a){return a.bAjaxDataGet?(a.iDraw++,T(a,!0),
wa(a,ma(a),function(b){eb(a,b)}),!1):!0}function ma(b){var c=b.aoColumns,d=c.length,g=b.oFeatures,e=b.oPreviousSearch,f=b.aoPreSearchCols,h,l=[],n,m,k,p=Ka(b);h=b._iDisplayStart;n=!1!==g.bPaginate?b._iDisplayLength:-1;var x=function(a,b){l.push({name:a,value:b})};x("sEcho",b.iDraw);x("iColumns",d);x("sColumns",ua(c,"sName").join(","));x("iDisplayStart",h);x("iDisplayLength",n);var z={draw:b.iDraw,columns:[],order:[],start:h,length:n,search:{value:e.sSearch,regex:e.bRegex}};for(h=0;h<d;h++)m=c[h],
k=f[h],n="function"==typeof m.mData?"function":m.mData,z.columns.push({data:n,name:m.sName,searchable:m.bSearchable,orderable:m.bSortable,search:{value:k.sSearch,regex:k.bRegex}}),x("mDataProp_"+h,n),g.bFilter&&(x("sSearch_"+h,k.sSearch),x("bRegex_"+h,k.bRegex),x("bSearchable_"+h,m.bSearchable)),g.bSort&&x("bSortable_"+h,m.bSortable);g.bFilter&&(x("sSearch",e.sSearch),x("bRegex",e.bRegex));g.bSort&&(a.each(p,function(a,b){z.order.push({column:b.col,dir:b.dir});x("iSortCol_"+a,b.col);x("sSortDir_"+
a,b.dir)}),x("iSortingCols",p.length));c=B.ext.legacy.ajax;return null===c?b.sAjaxSource?l:z:c?l:z}function eb(a,c){var d=function(a,d){return c[a]!==b?c[a]:c[d]},g=d("sEcho","draw"),e=d("iTotalRecords","recordsTotal"),d=d("iTotalDisplayRecords","recordsFiltered");if(g){if(1*g<a.iDraw)return;a.iDraw=1*g}V(a);a._iRecordsTotal=parseInt(e,10);a._iRecordsDisplay=parseInt(d,10);g=Fa(a,c);e=0;for(d=g.length;e<d;e++)x(a,g[e]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;pa(a);a._bInitComplete||
gb(a,c);a.bAjaxDataGet=!0;T(a,!1)}function Fa(c,d){var g=a.isPlainObject(c.ajax)&&c.ajax.dataSrc!==b?c.ajax.dataSrc:c.sAjaxDataProp;return"data"===g?d.aaData||d[g]:""!==g?L(g)(d):d}function Q(b){var c=b.oClasses,d=b.sTableId,g=b.oLanguage,e=b.oPreviousSearch,f=b.aanFeatures,h='<input type="search" class="'+c.sFilterInput+'"/>',l=g.sSearch,l=l.match(/_INPUT_/)?l.replace("_INPUT_",h):l+h,c=a("<div/>",{id:f.f?null:d+"_filter","class":c.sFilter}).append(a("<label/>").append(l)),f=function(){var a=this.value?
this.value:"";a!=e.sSearch&&(I(b,{sSearch:a,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),b._iDisplayStart=0,pa(b))},h=null!==b.searchDelay?b.searchDelay:"ssp"===ha(b)?400:0,n=a("input",c).val(e.sSearch).attr("placeholder",g.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",h?Da(f,h):f).bind("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",d);a(b.nTable).on("search.dt.DT",function(a,c){if(b===c)try{n[0]!==k.activeElement&&n.val(e.sSearch)}catch(d){}});
return c[0]}function I(a,c,d){var e=a.oPreviousSearch,f=a.aoPreSearchCols,h=function(a){e.sSearch=a.sSearch;e.bRegex=a.bRegex;e.bSmart=a.bSmart;e.bCaseInsensitive=a.bCaseInsensitive},l=function(a){return a.bEscapeRegex!==b?!a.bEscapeRegex:a.bRegex};g(a);if("ssp"!=ha(a)){Gb(a,c.sSearch,d,l(c),c.bSmart,c.bCaseInsensitive);h(c);for(c=0;c<f.length;c++)Fb(a,f[c].sSearch,c,l(f[c]),f[c].bSmart,f[c].bCaseInsensitive);m(a)}else h(c);a.bFiltered=!0;X(a,null,"search",[a])}function m(a){for(var b=B.ext.search,
c=a.aiDisplay,d,g,e=0,f=b.length;e<f;e++){for(var h=[],l=0,n=c.length;l<n;l++)g=c[l],d=a.aoData[g],b[e](a,d._aFilterData,g,d._aData,l)&&h.push(g);c.length=0;c.push.apply(c,h)}}function Fb(a,b,c,d,g,e){if(""!==b){var f=a.aiDisplay;d=ob(b,d,g,e);for(g=f.length-1;0<=g;g--)b=a.aoData[f[g]]._aFilterData[c],d.test(b)||f.splice(g,1)}}function Gb(a,b,c,d,g,e){d=ob(b,d,g,e);g=a.oPreviousSearch.sSearch;e=a.aiDisplayMaster;var f;0!==B.ext.search.length&&(c=!0);f=Ja(a);if(0>=b.length)a.aiDisplay=e.slice();else{if(f||
c||g.length>b.length||0!==b.indexOf(g)||a.bSorted)a.aiDisplay=e.slice();b=a.aiDisplay;for(c=b.length-1;0<=c;c--)d.test(a.aoData[b[c]]._sFilterRow)||b.splice(c,1)}}function ob(b,c,d,g){b=c?b:fb(b);d&&(b="^(?=.*?"+a.map(b.match(/"[^"]+"|[^ ]+/g)||"",function(a){if('"'===a.charAt(0)){var b=a.match(/^"(.*)"$/);a=b?b[1]:a}return a.replace('"',"")}).join(")(?=.*?")+").*$");return new RegExp(b,g?"i":"")}function fb(a){return a.replace(yb,"\\$1")}function Ja(a){var b=a.aoColumns,c,d,g,e,f,h,l,n,m=B.ext.type.search;
c=!1;d=0;for(e=a.aoData.length;d<e;d++)if(n=a.aoData[d],!n._aFilterData){h=[];g=0;for(f=b.length;g<f;g++)c=b[g],c.bSearchable?(l=G(a,d,g,"filter"),m[c.sType]&&(l=m[c.sType](l)),null===l&&(l=""),"string"!==typeof l&&l.toString&&(l=l.toString())):l="",l.indexOf&&-1!==l.indexOf("&")&&($a.innerHTML=l,l=Ub?$a.textContent:$a.innerText),l.replace&&(l=l.replace(/[\r\n]/g,"")),h.push(l);n._aFilterData=h;n._sFilterRow=h.join("  ");c=!0}return c}function pb(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,
caseInsensitive:a.bCaseInsensitive}}function qb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function Cb(b){var c=b.sTableId,d=b.aanFeatures.i,g=a("<div/>",{"class":b.oClasses.sInfo,id:d?null:c+"_info"});d||(b.aoDrawCallback.push({fn:Va,sName:"information"}),g.attr("role","status").attr("aria-live","polite"),a(b.nTable).attr("aria-describedby",c+"_info"));return g[0]}function Va(b){var c=b.aanFeatures.i;if(0!==c.length){var d=b.oLanguage,g=b._iDisplayStart+
1,e=b.fnDisplayEnd(),f=b.fnRecordsTotal(),h=b.fnRecordsDisplay(),l=h?d.sInfo:d.sInfoEmpty;h!==f&&(l+=" "+d.sInfoFiltered);l+=d.sInfoPostFix;l=Hb(b,l);d=d.fnInfoCallback;null!==d&&(l=d.call(b.oInstance,b,g,e,f,h,l));a(c).html(l)}}function Hb(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,g=a._iDisplayLength,e=a.fnRecordsDisplay(),f=-1===g;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,
e)).replace(/_PAGE_/g,c.call(a,f?1:Math.ceil(d/g))).replace(/_PAGES_/g,c.call(a,f?1:Math.ceil(e/g)))}function Wa(a){var b,c,d=a.iInitDisplayStart,g=a.aoColumns,e;c=a.oFeatures;if(a.bInitialised){W(a);va(a);aa(a,a.aoHeader);aa(a,a.aoFooter);T(a,!0);c.bAutoWidth&&Aa(a);b=0;for(c=g.length;b<c;b++)e=g[b],e.sWidth&&(e.nTh.style.width=P(e.sWidth));qa(a);g=ha(a);"ssp"!=g&&("ajax"==g?wa(a,[],function(c){var g=Fa(a,c);for(b=0;b<g.length;b++)x(a,g[b]);a.iInitDisplayStart=d;qa(a);T(a,!1);gb(a,c)},a):(T(a,!1),
gb(a)))}else setTimeout(function(){Wa(a)},200)}function gb(a,b){a._bInitComplete=!0;b&&c(a);X(a,"aoInitComplete","init",[a,b])}function ta(a,b){var c=parseInt(b,10);a._iDisplayLength=c;wb(a);X(a,null,"length",[a,c])}function nb(b){for(var c=b.oClasses,d=b.sTableId,g=b.aLengthMenu,e=a.isArray(g[0]),f=e?g[0]:g,g=e?g[1]:g,e=a("<select/>",{name:d+"_length","aria-controls":d,"class":c.sLengthSelect}),h=0,l=f.length;h<l;h++)e[0][h]=new Option(g[h],f[h]);var n=a("<div><label/></div>").addClass(c.sLength);
b.aanFeatures.l||(n[0].id=d+"_length");n.children().append(b.oLanguage.sLengthMenu.replace("_MENU_",e[0].outerHTML));a("select",n).val(b._iDisplayLength).bind("change.DT",function(c){ta(b,a(this).val());pa(b)});a(b.nTable).bind("length.dt.DT",function(c,d,g){b===d&&a("select",n).val(g)});return n[0]}function Xa(b){var c=b.sPaginationType,d=B.ext.pager[c],g="function"===typeof d,e=function(a){pa(a)},c=a("<div/>").addClass(b.oClasses.sPaging+c)[0],f=b.aanFeatures;g||d.fnInit(b,c,e);f.p||(c.id=b.sTableId+
"_paginate",b.aoDrawCallback.push({fn:function(a){if(g){var b=a._iDisplayStart,c=a._iDisplayLength,h=a.fnRecordsDisplay(),r=-1===c,b=r?0:Math.ceil(b/c),c=r?1:Math.ceil(h/c),h=d(b,c),l,r=0;for(l=f.p.length;r<l;r++)ib(a,"pageButton")(a,f.p[r],r,h,b,c)}else d.fnUpdate(a,e)},sName:"pagination"}));return c}function za(a,b,c){var d=a._iDisplayStart,g=a._iDisplayLength,e=a.fnRecordsDisplay();0===e||-1===g?d=0:"number"===typeof b?(d=b*g,d>e&&(d=0)):"first"==b?d=0:"previous"==b?(d=0<=g?d-g:0,0>d&&(d=0)):"next"==
b?d+g<e&&(d+=g):"last"==b?d=Math.floor((e-1)/g)*g:Ia(a,0,"Unknown paging action: "+b,5);b=a._iDisplayStart!==d;a._iDisplayStart=d;b&&(X(a,null,"page",[a]),c&&pa(a));return b}function J(b){return a("<div/>",{id:b.aanFeatures.r?null:b.sTableId+"_processing","class":b.oClasses.sProcessing}).html(b.oLanguage.sProcessing).insertBefore(b.nTable)[0]}function T(b,c){b.oFeatures.bProcessing&&a(b.aanFeatures.r).css("display",c?"block":"none");X(b,null,"processing",[b,c])}function Db(b){var c=a(b.nTable);c.attr("role",
"grid");var d=b.oScroll;if(""===d.sX&&""===d.sY)return b.nTable;var g=d.sX,e=d.sY,f=b.oClasses,h=c.children("caption"),l=h.length?h[0]._captionSide:null,n=a(c[0].cloneNode(!1)),m=a(c[0].cloneNode(!1)),k=c.children("tfoot");d.sX&&"100%"===c.attr("width")&&c.removeAttr("width");k.length||(k=null);d=a("<div/>",{"class":f.sScrollWrapper}).append(a("<div/>",{"class":f.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:g?g?P(g):null:"100%"}).append(a("<div/>",{"class":f.sScrollHeadInner}).css({"box-sizing":"content-box",
width:d.sXInner||"100%"}).append(n.removeAttr("id").css("margin-left",0).append("top"===l?h:null).append(c.children("thead"))))).append(a("<div/>",{"class":f.sScrollBody}).css({overflow:"auto",height:e?P(e):null,width:g?P(g):null}).append(c));k&&d.append(a("<div/>",{"class":f.sScrollFoot}).css({overflow:"hidden",border:0,width:g?g?P(g):null:"100%"}).append(a("<div/>",{"class":f.sScrollFootInner}).append(m.removeAttr("id").css("margin-left",0).append("bottom"===l?h:null).append(c.children("tfoot")))));
var c=d.children(),p=c[0],f=c[1],x=k?c[2]:null;g&&a(f).scroll(function(a){a=this.scrollLeft;p.scrollLeft=a;k&&(x.scrollLeft=a)});b.nScrollHead=p;b.nScrollBody=f;b.nScrollFoot=x;b.aoDrawCallback.push({fn:Ra,sName:"scrolling"});return d[0]}function Ra(b){var c=b.oScroll,d=c.sX,g=c.sXInner,e=c.sY,f=c.iBarWidth,h=a(b.nScrollHead),l=h[0].style,n=h.children("div"),m=n[0].style,k=n.children("table"),n=b.nScrollBody,x=a(n),z=n.style,q=a(b.nScrollFoot).children("div"),t=q.children("table"),w=a(b.nTHead),u=
a(b.nTable),O=u[0],E=O.style,y=b.nTFoot?a(b.nTFoot):null,G=b.oBrowser,A=G.bScrollOversize,C,M,N,L,S,V=[],B=[],D=[],I,da=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};u.children("thead, tfoot").remove();S=w.clone().prependTo(u);C=w.find("tr");N=S.find("tr");S.find("th, td").removeAttr("tabindex");y&&(L=y.clone().prependTo(u),M=y.find("tr"),L=L.find("tr"));d||(z.width="100%",h[0].style.width="100%");a.each(xa(b,S),function(a,c){I=
p(b,a);c.style.width=b.aoColumns[I].sWidth});y&&sa(function(a){a.style.width=""},L);c.bCollapse&&""!==e&&(z.height=x[0].offsetHeight+w[0].offsetHeight+"px");h=u.outerWidth();""===d?(E.width="100%",A&&(u.find("tbody").height()>n.offsetHeight||"scroll"==x.css("overflow-y"))&&(E.width=P(u.outerWidth()-f))):""!==g?E.width=P(g):h==x.width()&&x.height()<u.height()?(E.width=P(h-f),u.outerWidth()>h-f&&(E.width=P(h))):E.width=P(h);h=u.outerWidth();sa(da,N);sa(function(b){D.push(b.innerHTML);V.push(P(a(b).css("width")))},
N);sa(function(a,b){a.style.width=V[b]},C);a(N).height(0);y&&(sa(da,L),sa(function(b){B.push(P(a(b).css("width")))},L),sa(function(a,b){a.style.width=B[b]},M),a(L).height(0));sa(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+D[b]+"</div>";a.style.width=V[b]},N);y&&sa(function(a,b){a.innerHTML="";a.style.width=B[b]},L);u.outerWidth()<h?(M=n.scrollHeight>n.offsetHeight||"scroll"==x.css("overflow-y")?h+f:h,A&&(n.scrollHeight>n.offsetHeight||"scroll"==x.css("overflow-y"))&&
(E.width=P(M-f)),""!==d&&""===g||Ia(b,1,"Possible column misalignment",6)):M="100%";z.width=P(M);l.width=P(M);y&&(b.nScrollFoot.style.width=P(M));!e&&A&&(z.height=P(O.offsetHeight+f));e&&c.bCollapse&&(z.height=P(e),c=d&&O.offsetWidth>n.offsetWidth?f:0,O.offsetHeight<n.offsetHeight&&(z.height=P(O.offsetHeight+c)));c=u.outerWidth();k[0].style.width=P(c);m.width=P(c);k=u.height()>n.clientHeight||"scroll"==x.css("overflow-y");G="padding"+(G.bScrollbarLeft?"Left":"Right");m[G]=k?f+"px":"0px";y&&(t[0].style.width=
P(c),q[0].style.width=P(c),q[0].style[G]=k?f+"px":"0px");x.scroll();!b.bSorted&&!b.bFiltered||b._drawHold||(n.scrollTop=0)}function sa(a,b,c){for(var d=0,g=0,e=b.length,f,h;g<e;){f=b[g].firstChild;for(h=c?c[g].firstChild:null;f;)1===f.nodeType&&(c?a(f,h,d):a(f,d),d++),f=f.nextSibling,h=c?h.nextSibling:null;g++}}function Aa(b){var g=b.nTable,e=b.aoColumns,f=b.oScroll,h=f.sY,l=f.sX,n=f.sXInner,m=e.length,f=E(b,"bVisible"),k=a("th",b.nTHead),p=g.getAttribute("width"),x=g.parentNode,z=!1,q,t;for(q=0;q<
f.length;q++)t=e[f[q]],null!==t.sWidth&&(t.sWidth=rb(t.sWidthOrig,x),z=!0);if(z||l||h||m!=C(b)||m!=k.length){m=a(g).clone().empty().css("visibility","hidden").removeAttr("id").append(a(b.nTHead).clone(!1)).append(a(b.nTFoot).clone(!1)).append(a("<tbody><tr/></tbody>"));m.find("tfoot th, tfoot td").css("width","");var w=m.find("tbody tr"),k=xa(b,m.find("thead")[0]);for(q=0;q<f.length;q++)t=e[f[q]],k[q].style.width=null!==t.sWidthOrig&&""!==t.sWidthOrig?P(t.sWidthOrig):"";if(b.aoData.length)for(q=0;q<
f.length;q++)z=f[q],t=e[z],a(Jb(b,z)).clone(!1).append(t.sContentPadding).appendTo(w);m.appendTo(x);l&&n?m.width(n):l?(m.css("width","auto"),m.width()<x.offsetWidth&&m.width(x.offsetWidth)):h?m.width(x.offsetWidth):p&&m.width(p);Ib(b,m[0]);if(l){for(q=n=0;q<f.length;q++)t=e[f[q]],h=a(k[q]).outerWidth(),n+=null===t.sWidthOrig?h:parseInt(t.sWidth,10)+h-a(k[q]).width();m.width(P(n));g.style.width=P(n)}for(q=0;q<f.length;q++)if(t=e[f[q]],h=a(k[q]).width())t.sWidth=P(h);g.style.width=P(m.css("width"));
m.remove()}else for(q=0;q<m;q++)e[q].sWidth=P(k.eq(q).width());p&&(g.style.width=P(p));!p&&!l||b._reszEvt||(a(d).bind("resize.DT-"+b.sInstance,Da(function(){c(b)})),b._reszEvt=!0)}function Da(a,c){var d=c!==b?c:200,g,e;return function(){var c=this,f=+new Date,h=arguments;g&&f<g+d?(clearTimeout(e),e=setTimeout(function(){g=b;a.apply(c,h)},d)):g?(g=f,a.apply(c,h)):g=f}}function rb(b,c){if(!b)return 0;var d=a("<div/>").css("width",P(b)).appendTo(c||k.body),g=d[0].offsetWidth;d.remove();return g}function Ib(b,
c){var d=b.oScroll;if(d.sX||d.sY)d=d.sX?0:d.iBarWidth,c.style.width=P(a(c).outerWidth()-d)}function Jb(b,c){var d=sb(b,c);if(0>d)return null;var g=b.aoData[d];return g.nTr?g.anCells[c]:a("<td/>").html(G(b,d,c,"display"))[0]}function sb(a,b){for(var c,d=-1,g=-1,e=0,f=a.aoData.length;e<f;e++)c=G(a,e,b,"display")+"",c=c.replace(Vb,""),c.length>d&&(d=c.length,g=e);return g}function P(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function tb(){if(!B.__scrollbarWidth){var b=
a("<p/>").css({width:"100%",height:200,padding:0})[0],c=a("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(b).appendTo("body"),d=b.offsetWidth;c.css("overflow","scroll");b=b.offsetWidth;d===b&&(b=c[0].clientWidth);c.remove();B.__scrollbarWidth=d-b}return B.__scrollbarWidth}function Ka(c){var d,g,e=[],f=c.aoColumns,h,l,n,m;d=c.aaSortingFixed;g=a.isPlainObject(d);var k=[];h=function(b){b.length&&!a.isArray(b[0])?k.push(b):
k.push.apply(k,b)};a.isArray(d)&&h(d);g&&d.pre&&h(d.pre);h(c.aaSorting);g&&d.post&&h(d.post);for(c=0;c<k.length;c++)for(m=k[c][0],h=f[m].aDataSort,d=0,g=h.length;d<g;d++)l=h[d],n=f[l].sType||"string",k[c]._idx===b&&(k[c]._idx=a.inArray(k[c][1],f[l].asSorting)),e.push({src:m,col:l,dir:k[c][1],index:k[c]._idx,type:n,formatter:B.ext.type.order[n+"-pre"]});return e}function Kb(a){var b,c,d=[],e=B.ext.type.order,f=a.aoData,h=0,l,n=a.aiDisplayMaster,m;g(a);m=Ka(a);b=0;for(c=m.length;b<c;b++)l=m[b],l.formatter&&
h++,Mb(a,l.col);if("ssp"!=ha(a)&&0!==m.length){b=0;for(c=n.length;b<c;b++)d[n[b]]=b;h===m.length?n.sort(function(a,b){var c,g,e,h,l=m.length,r=f[a]._aSortData,n=f[b]._aSortData;for(e=0;e<l;e++)if(h=m[e],c=r[h.col],g=n[h.col],c=c<g?-1:c>g?1:0,0!==c)return"asc"===h.dir?c:-c;c=d[a];g=d[b];return c<g?-1:c>g?1:0}):n.sort(function(a,b){var c,g,h,l,r=m.length,n=f[a]._aSortData,k=f[b]._aSortData;for(h=0;h<r;h++)if(l=m[h],c=n[l.col],g=k[l.col],l=e[l.type+"-"+l.dir]||e["string-"+l.dir],c=l(c,g),0!==c)return c;
c=d[a];g=d[b];return c<g?-1:c>g?1:0})}a.bSorted=!0}function Lb(a){var b,c,d=a.aoColumns,g=Ka(a);a=a.oLanguage.oAria;for(var e=0,f=d.length;e<f;e++){c=d[e];var h=c.asSorting;b=c.sTitle.replace(/<.*?>/g,"");var l=c.nTh;l.removeAttribute("aria-sort");c.bSortable&&(0<g.length&&g[0].col==e?(l.setAttribute("aria-sort","asc"==g[0].dir?"ascending":"descending"),c=h[g[0].index+1]||h[0]):c=h[0],b+="asc"===c?a.sSortAscending:a.sSortDescending);l.setAttribute("aria-label",b)}}function ub(c,d,g,e){var f=c.aaSorting,
h=c.aoColumns[d].asSorting,l=function(c,d){var g=c._idx;g===b&&(g=a.inArray(c[1],h));return g+1<h.length?g+1:d?null:0};"number"===typeof f[0]&&(f=c.aaSorting=[f]);g&&c.oFeatures.bSortMulti?(g=a.inArray(d,ua(f,"0")),-1!==g?(d=l(f[g],!0),null===d?f.splice(g,1):(f[g][1]=h[d],f[g]._idx=d)):(f.push([d,h[0],0]),f[f.length-1]._idx=0)):f.length&&f[0][0]==d?(d=l(f[0]),f.length=1,f[0][1]=h[d],f[0]._idx=d):(f.length=0,f.push([d,h[0]]),f[0]._idx=0);qa(c);"function"==typeof e&&e(c)}function hb(a,b,c,d){var g=
a.aoColumns[c];vb(b,{},function(b){!1!==g.bSortable&&(a.oFeatures.bProcessing?(T(a,!0),setTimeout(function(){ub(a,c,b.shiftKey,d);"ssp"!==ha(a)&&T(a,!1)},0)):ub(a,c,b.shiftKey,d))})}function cb(b){var c=b.aLastSort,d=b.oClasses.sSortColumn,g=Ka(b),e=b.oFeatures,f,h;if(e.bSort&&e.bSortClasses){e=0;for(f=c.length;e<f;e++)h=c[e].src,a(ua(b.aoData,"anCells",h)).removeClass(d+(2>e?e+1:3));e=0;for(f=g.length;e<f;e++)h=g[e].src,a(ua(b.aoData,"anCells",h)).addClass(d+(2>e?e+1:3))}b.aLastSort=g}function Mb(a,
b){var c=a.aoColumns[b],d=B.ext.order[c.sSortDataType],g;d&&(g=d.call(a.oInstance,a,b,y(a,b)));for(var e,f=B.ext.type.order[c.sType+"-pre"],h=0,l=a.aoData.length;h<l;h++)if(c=a.aoData[h],c._aSortData||(c._aSortData=[]),!c._aSortData[b]||d)e=d?g[h]:G(a,h,b,"sort"),c._aSortData[b]=f?f(e):e}function ja(b){if(b.oFeatures.bStateSave&&!b.bDestroying){var c={time:+new Date,start:b._iDisplayStart,length:b._iDisplayLength,order:a.extend(!0,[],b.aaSorting),search:pb(b.oPreviousSearch),columns:a.map(b.aoColumns,
function(a,c){return{visible:a.bVisible,search:pb(b.aoPreSearchCols[c])}})};X(b,"aoStateSaveParams","stateSaveParams",[b,c]);b.oSavedState=c;b.fnStateSaveCallback.call(b.oInstance,b,c)}}function Ta(b,c){var d,g,e=b.aoColumns;if(b.oFeatures.bStateSave){var f=b.fnStateLoadCallback.call(b.oInstance,b);if(f&&f.time&&(d=X(b,"aoStateLoadParams","stateLoadParams",[b,f]),-1===a.inArray(!1,d)&&(d=b.iStateDuration,!(0<d&&f.time<+new Date-1E3*d)&&e.length===f.columns.length))){b.oLoadedState=a.extend(!0,{},
f);b._iDisplayStart=f.start;b.iInitDisplayStart=f.start;b._iDisplayLength=f.length;b.aaSorting=[];a.each(f.order,function(a,c){b.aaSorting.push(c[0]>=e.length?[0,c[1]]:c)});a.extend(b.oPreviousSearch,qb(f.search));d=0;for(g=f.columns.length;d<g;d++){var h=f.columns[d];e[d].bVisible=h.visible;a.extend(b.aoPreSearchCols[d],qb(h.search))}X(b,"aoStateLoaded","stateLoaded",[b,f])}}}function Sa(b){var c=B.settings;b=a.inArray(b,ua(c,"nTable"));return-1!==b?c[b]:null}function Ia(a,b,c,g){c="DataTables warning: "+
(null!==a?"table id="+a.sTableId+" - ":"")+c;g&&(c+=". For more information about this error, please see http://datatables.net/tn/"+g);if(b)d.console&&console.log&&console.log(c);else if(a=B.ext,"alert"==(a.sErrMode||a.errMode))alert(c);else throw Error(c);}function ea(c,d,g,e){a.isArray(g)?a.each(g,function(b,g){a.isArray(g)?ea(c,d,g[0],g[1]):ea(c,d,g)}):(e===b&&(e=g),d[g]!==b&&(c[e]=d[g]))}function Ua(b,c,d){var g,e;for(e in c)c.hasOwnProperty(e)&&(g=c[e],a.isPlainObject(g)?(a.isPlainObject(b[e])||
(b[e]={}),a.extend(!0,b[e],g)):d&&"data"!==e&&"aaData"!==e&&a.isArray(g)?b[e]=g.slice():b[e]=g);return b}function vb(b,c,d){a(b).bind("click.DT",c,function(a){b.blur();d(a)}).bind("keypress.DT",c,function(a){13===a.which&&(a.preventDefault(),d(a))}).bind("selectstart.DT",function(){return!1})}function ia(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function X(b,c,d,g){var e=[];c&&(e=a.map(b[c].slice().reverse(),function(a,c){return a.fn.apply(b.oInstance,g)}));null!==d&&a(b.nTable).trigger(d+".dt",g);return e}
function wb(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),d=a._iDisplayLength;b>=c&&(b=c-d);b-=b%d;if(-1===d||0>b)b=0;a._iDisplayStart=b}function ib(b,c){var d=b.renderer,g=B.ext.renderer[c];return a.isPlainObject(d)&&d[c]?g[d[c]]||g._:"string"===typeof d?g[d]||g._:g._}function ha(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function Ea(a,b){var c=[],c=Zb.numbers_length,d=Math.floor(c/2);b<=c?c=Ma(0,b):a<=d?(c=Ma(0,c-2),c.push("ellipsis"),c.push(b-1)):(a>=b-1-d?c=Ma(b-
(c-2),b):(c=Ma(a-1,a+2),c.push("ellipsis"),c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0));c.DT_el="span";return c}function Ya(b){a.each({num:function(a){return Eb(a,b)},"num-fmt":function(a){return Eb(a,b,Ca)},"html-num":function(a){return Eb(a,b,Pa)},"html-num-fmt":function(a){return Eb(a,b,Pa,Ca)}},function(a,c){Z.type.order[a+b+"-pre"]=c;a.match(/^html\-/)&&(Z.type.search[a+b]=Z.type.search.html)})}function Nb(a){return function(){var b=[Sa(this[B.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));
return B.ext.internal[a].apply(this,b)}}var B,Z,R,H,U,La={},Ob=/[\r\n]/g,Pa=/<.*?>/g,Tb=/^[\w\+\-]/,xb=/[\w\+\-]$/,yb=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\|\$|\^|\-)/g,Ca=/[',$\u00a3\u20ac\u00a5%\u2009\u202F]/g,fa=function(a){return a&&!0!==a&&"-"!==a?!1:!0},Pb=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},zb=function(a,b){La[b]||(La[b]=new RegExp(fb(b),"g"));return"string"===typeof a&&"."!==b?a.replace(/\./g,"").replace(La[b],"."):a},Ab=function(a,b,c){var d="string"===
typeof a;b&&d&&(a=zb(a,b));c&&d&&(a=a.replace(Ca,""));return fa(a)||!isNaN(parseFloat(a))&&isFinite(a)},Qb=function(a,b,c){return fa(a)?!0:fa(a)||"string"===typeof a?Ab(a.replace(Pa,""),b,c)?!0:null:null},ua=function(a,c,d){var g=[],e=0,f=a.length;if(d!==b)for(;e<f;e++)a[e]&&a[e][c]&&g.push(a[e][c][d]);else for(;e<f;e++)a[e]&&g.push(a[e][c]);return g},Qa=function(a,c,d,g){var e=[],f=0,h=c.length;if(g!==b)for(;f<h;f++)a[c[f]][d]&&e.push(a[c[f]][d][g]);else for(;f<h;f++)e.push(a[c[f]][d]);return e},
Ma=function(a,c){var d=[],g;c===b?(c=0,g=a):(g=c,c=a);for(var e=c;e<g;e++)d.push(e);return d},db=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},jb=function(a){var b=[],c,d,g=a.length,e,f=0;d=0;a:for(;d<g;d++){c=a[d];for(e=0;e<f;e++)if(b[e]===c)continue a;b.push(c);f++}return b},ca=function(a,c,d){a[c]!==b&&(a[d]=a[c])},Za=/\[.*?\]$/,Oa=/\(\)$/,$a=a("<div>")[0],Ub=$a.textContent!==b,Vb=/<.*?>/g;B=function(c){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,
b){return this.api(!0).rows(a,b).data()};this.api=function(a){return a?new R(Sa(this[Z.iApiIndex])):new R(this)};this.fnAddData=function(c,d){var g=this.api(!0),e=a.isArray(c)&&(a.isArray(c[0])||a.isPlainObject(c[0]))?g.rows.add(c):g.row.add(c);(d===b||d)&&g.draw();return e.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var c=this.api(!0).columns.adjust(),d=c.settings()[0],g=d.oScroll;a===b||a?c.draw(!1):""===g.sX&&""===g.sY||Ra(d)};this.fnClearTable=function(a){var c=this.api(!0).clear();
(a===b||a)&&c.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,c,d){var g=this.api(!0);a=g.rows(a);var e=a.settings()[0],f=e.aoData[a[0][0]];a.remove();c&&c.call(this,e,f);(d===b||d)&&g.draw();return f};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(!a)};this.fnFilter=function(a,c,d,g,e,f){e=this.api(!0);null===c||c===b?e.search(a,d,g,f):e.column(c).search(a,d,g,f);e.draw()};this.fnGetData=function(a,c){var d=
this.api(!0);if(a!==b){var g=a.nodeName?a.nodeName.toLowerCase():"";return c!==b||"td"==g||"th"==g?d.cell(a,c).data():d.row(a).data()||null}return d.data().toArray()};this.fnGetNodes=function(a){var c=this.api(!0);return a!==b?c.row(a).node():c.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(a=b.cell(a).index(),[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};
this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};this.fnPageChange=function(a,c){var d=this.api(!0).page(a);(c===b||c)&&d.draw(!1)};this.fnSetColumnVis=function(a,c,d){a=this.api(!0).column(a).visible(c);(d===b||d)&&a.columns.adjust().draw()};this.fnSettings=function(){return Sa(this[Z.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,c,d,g,e){var f=
this.api(!0);d===b||null===d?f.row(c).data(a):f.cell(c,d).data(a);(e===b||e)&&f.columns.adjust();(g===b||g)&&f.draw();return 0};this.fnVersionCheck=Z.fnVersionCheck;var d=this,g=c===b,n=this.length;g&&(c={});this.oApi=this.internal=Z.internal;for(var m in B.ext.internal)m&&(this[m]=Nb(m));this.each(function(){var m={},m=1<n?Ua(m,c,!0):c,k=0,p,u=this.getAttribute("id"),E=!1,y=B.defaults;if("table"!=this.nodeName.toLowerCase())Ia(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{t(y);
e(y.column);l(y,y,!0);l(y.column,y.column,!0);l(y,m);var G=B.settings,k=0;for(p=G.length;k<p;k++){if(G[k].nTable==this){p=m.bRetrieve!==b?m.bRetrieve:y.bRetrieve;if(g||p)return G[k].oInstance;if(m.bDestroy!==b?m.bDestroy:y.bDestroy){G[k].oInstance.fnDestroy();break}else{Ia(G[k],0,"Cannot reinitialise DataTable",3);return}}if(G[k].sTableId==this.id){G.splice(k,1);break}}if(null===u||""===u)this.id=u="DataTables_Table_"+B.ext._unique++;var A=a.extend(!0,{},B.models.oSettings,{nTable:this,oApi:d.internal,
oInit:m,sDestroyWidth:a(this)[0].style.width,sInstance:u,sTableId:u});G.push(A);A.oInstance=1===d.length?d:a(this).dataTable();t(m);m.oLanguage&&h(m.oLanguage);m.aLengthMenu&&!m.iDisplayLength&&(m.iDisplayLength=a.isArray(m.aLengthMenu[0])?m.aLengthMenu[0][0]:m.aLengthMenu[0]);m=Ua(a.extend(!0,{},y),m);ea(A.oFeatures,m,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));ea(A,m,["asStripeClasses","ajax","fnServerData","fnFormatNumber",
"sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);ea(A.oScroll,m,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);
ea(A.oLanguage,m,"fnInfoCallback");ia(A,"aoDrawCallback",m.fnDrawCallback,"user");ia(A,"aoServerParams",m.fnServerParams,"user");ia(A,"aoStateSaveParams",m.fnStateSaveParams,"user");ia(A,"aoStateLoadParams",m.fnStateLoadParams,"user");ia(A,"aoStateLoaded",m.fnStateLoaded,"user");ia(A,"aoRowCallback",m.fnRowCallback,"user");ia(A,"aoRowCreatedCallback",m.fnCreatedRow,"user");ia(A,"aoHeaderCallback",m.fnHeaderCallback,"user");ia(A,"aoFooterCallback",m.fnFooterCallback,"user");ia(A,"aoInitComplete",m.fnInitComplete,
"user");ia(A,"aoPreDrawCallback",m.fnPreDrawCallback,"user");u=A.oClasses;m.bJQueryUI?(a.extend(u,B.ext.oJUIClasses,m.oClasses),m.sDom===y.sDom&&"lfrtip"===y.sDom&&(A.sDom='<"H"lfr>t<"F"ip>'),A.renderer)?a.isPlainObject(A.renderer)&&!A.renderer.header&&(A.renderer.header="jqueryui"):A.renderer="jqueryui":a.extend(u,B.ext.classes,m.oClasses);a(this).addClass(u.sTable);if(""!==A.oScroll.sX||""!==A.oScroll.sY)A.oScroll.iBarWidth=tb();!0===A.oScroll.sX&&(A.oScroll.sX="100%");A.iInitDisplayStart===b&&
(A.iInitDisplayStart=m.iDisplayStart,A._iDisplayStart=m.iDisplayStart);null!==m.iDeferLoading&&(A.bDeferLoading=!0,k=a.isArray(m.iDeferLoading),A._iRecordsDisplay=k?m.iDeferLoading[0]:m.iDeferLoading,A._iRecordsTotal=k?m.iDeferLoading[1]:m.iDeferLoading);var C=A.oLanguage;a.extend(!0,C,m.oLanguage);""!==C.sUrl&&(a.ajax({dataType:"json",url:C.sUrl,success:function(b){h(b);l(y.oLanguage,b);a.extend(!0,C,b);Wa(A)},error:function(){Wa(A)}}),E=!0);null===m.asStripeClasses&&(A.asStripeClasses=[u.sStripeOdd,
u.sStripeEven]);var k=A.asStripeClasses,M=a("tbody tr:eq(0)",this);-1!==a.inArray(!0,a.map(k,function(a,b){return M.hasClass(a)}))&&(a("tbody tr",this).removeClass(k.join(" ")),A.asDestroyStripes=k.slice());var G=[],N,k=this.getElementsByTagName("thead");0!==k.length&&(ba(A.aoHeader,k[0]),G=xa(A));if(null===m.aoColumns)for(N=[],k=0,p=G.length;k<p;k++)N.push(null);else N=m.aoColumns;k=0;for(p=N.length;k<p;k++)f(A,G?G[k]:null);z(A,m.aoColumnDefs,N,function(a,b){w(A,a,b)});if(M.length){var Ba=function(a,
b){return a.getAttribute("data-"+b)?b:null};a.each(oa(A,M[0]).cells,function(a,c){var d=A.aoColumns[a];if(d.mData===a){var g=Ba(c,"sort")||Ba(c,"order"),e=Ba(c,"filter")||Ba(c,"search");if(null!==g||null!==e)d.mData={_:a+".display",sort:null!==g?a+".@data-"+g:b,type:null!==g?a+".@data-"+g:b,filter:null!==e?a+".@data-"+e:b},w(A,a)}})}var L=A.oFeatures;m.bStateSave&&(L.bStateSave=!0,Ta(A,m),ia(A,"aoDrawCallback",ja,"state_save"));if(m.aaSorting===b)for(G=A.aaSorting,k=0,p=G.length;k<p;k++)G[k][1]=A.aoColumns[k].asSorting[0];
cb(A);L.bSort&&ia(A,"aoDrawCallback",function(){if(A.bSorted){var b=Ka(A),c={};a.each(b,function(a,b){c[b.src]=b.dir});X(A,null,"order",[A,b,c]);Lb(A)}});ia(A,"aoDrawCallback",function(){(A.bSorted||"ssp"===ha(A)||L.bDeferRender)&&cb(A)},"sc");q(A);k=a(this).children("caption").each(function(){this._captionSide=a(this).css("caption-side")});p=a(this).children("thead");0===p.length&&(p=a("<thead/>").appendTo(this));A.nTHead=p[0];p=a(this).children("tbody");0===p.length&&(p=a("<tbody/>").appendTo(this));
A.nTBody=p[0];p=a(this).children("tfoot");0===p.length&&0<k.length&&(""!==A.oScroll.sX||""!==A.oScroll.sY)&&(p=a("<tfoot/>").appendTo(this));0===p.length||0===p.children().length?a(this).addClass(u.sNoFooter):0<p.length&&(A.nTFoot=p[0],ba(A.aoFooter,A.nTFoot));if(m.aaData)for(k=0;k<m.aaData.length;k++)x(A,m.aaData[k]);else(A.bDeferLoading||"dom"==ha(A))&&O(A,a(A.nTBody).children("tr"));A.aiDisplay=A.aiDisplayMaster.slice();A.bInitialised=!0;!1===E&&Wa(A)}});d=null;return this};var Rb=[],Y=Array.prototype,
Wb=function(b){var c,d,g=B.settings,e=a.map(g,function(a,b){return a.nTable});if(b){if(b.nTable&&b.oApi)return[b];if(b.nodeName&&"table"===b.nodeName.toLowerCase())return c=a.inArray(b,e),-1!==c?[g[c]]:null;if(b&&"function"===typeof b.settings)return b.settings().toArray();"string"===typeof b?d=a(b):b instanceof a&&(d=b)}else return[];if(d)return d.map(function(b){c=a.inArray(this,e);return-1!==c?g[c]:null}).toArray()};R=function(b,c){if(!this instanceof R)throw"DT API must be constructed as a new object";
var d=[],g=function(a){(a=Wb(a))&&d.push.apply(d,a)};if(a.isArray(b))for(var e=0,f=b.length;e<f;e++)g(b[e]);else g(b);this.context=jb(d);c&&this.push.apply(this,c.toArray?c.toArray():c);this.selector={rows:null,cols:null,opts:null};R.extend(this,this,Rb)};B.Api=R;R.prototype={concat:Y.concat,context:[],each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new R(b[a],this[a]):null},filter:function(a){var b=[];
if(Y.filter)b=Y.filter.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new R(this.context,b)},flatten:function(){var a=[];return new R(this.context,a.concat.apply(a,this.toArray()))},join:Y.join,indexOf:Y.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},iterator:function(a,c,d,g){var e=[],f,h,l,n,m,k=this.context,p,x,z=this.selector;"string"===typeof a&&(g=d,d=c,c=a,a=!1);h=0;for(l=k.length;h<
l;h++){var q=new R(k[h]);if("table"===c)f=d.call(q,k[h],h),f!==b&&e.push(f);else if("columns"===c||"rows"===c)f=d.call(q,k[h],this[h],h),f!==b&&e.push(f);else if("column"===c||"column-rows"===c||"row"===c||"cell"===c)for(x=this[h],"column-rows"===c&&(p=mb(k[h],z.opts)),n=0,m=x.length;n<m;n++)f=x[n],f="cell"===c?d.call(q,k[h],f.row,f.column,h,n):d.call(q,k[h],f,h,n,p),f!==b&&e.push(f)}return e.length||g?(a=new R(k,a?e.concat.apply([],e):e),c=a.selector,c.rows=z.rows,c.cols=z.cols,c.opts=z.opts,a):
this},lastIndexOf:Y.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(Y.map)b=Y.map.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new R(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:Y.pop,push:Y.push,reduce:Y.reduce||function(a,b){return u(this,a,b,0,this.length,1)},reduceRight:Y.reduceRight||function(a,b){return u(this,a,b,this.length-1,-1,
-1)},reverse:Y.reverse,selector:null,shift:Y.shift,sort:Y.sort,splice:Y.splice,toArray:function(){return Y.slice.call(this)},to$:function(){return a(this)},toJQuery:function(){return a(this)},unique:function(){return new R(this.context,jb(this))},unshift:Y.unshift};R.extend=function(b,c,d){if(c&&(c instanceof R||c.__dt_wrapper)){var g,e,f,h=function(a,b,c){return function(){var d=b.apply(a,arguments);R.extend(d,d,c.methodExt);return d}};g=0;for(e=d.length;g<e;g++)f=d[g],c[f.name]="function"===typeof f.val?
h(b,f.val,f):a.isPlainObject(f.val)?{}:f.val,c[f.name].__dt_wrapper=!0,R.extend(b,c[f.name],f.propExt)}};R.register=H=function(b,c){if(a.isArray(b))for(var d=0,g=b.length;d<g;d++)R.register(b[d],c);else for(var e=b.split("."),f=Rb,h,l,d=0,g=e.length;d<g;d++){h=(l=-1!==e[d].indexOf("()"))?e[d].replace("()",""):e[d];var n;a:{n=0;for(var m=f.length;n<m;n++)if(f[n].name===h){n=f[n];break a}n=null}n||(n={name:h,val:{},methodExt:[],propExt:[]},f.push(n));d===g-1?n.val=c:f=l?n.methodExt:n.propExt}};R.registerPlural=
U=function(c,d,g){R.register(c,g);R.register(d,function(){var c=g.apply(this,arguments);return c===this?this:c instanceof R?c.length?a.isArray(c[0])?new R(c.context,c[0]):c[0]:b:c})};var ab=function(b,c){if("number"===typeof b)return[c[b]];var d=a.map(c,function(a,b){return a.nTable});return a(d).filter(b).map(function(b){b=a.inArray(this,d);return c[b]}).toArray()};H("tables()",function(a){return a?new R(ab(a,this.context)):this});H("table()",function(a){a=this.tables(a);var b=a.context;return b.length?
new R(b[0]):a});U("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});U("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody},1)});U("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});U("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});U("tables().containers()","table().container()",
function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});H("draw()",function(a){return this.iterator("table",function(b){qa(b,!1===a)})});H("page()",function(a){return a===b?this.page.info().page:this.iterator("table",function(b){za(b,a)})});H("page.info()",function(a){if(0===this.context.length)return b;a=this.context[0];var c=a._iDisplayStart,d=a._iDisplayLength,g=a.fnRecordsDisplay(),e=-1===d;return{page:e?0:Math.floor(c/d),pages:e?1:Math.ceil(g/d),start:c,end:a.fnDisplayEnd(),
length:d,recordsTotal:a.fnRecordsTotal(),recordsDisplay:g}});H("page.len()",function(a){return a===b?0!==this.context.length?this.context[0]._iDisplayLength:b:this.iterator("table",function(b){ta(b,a)})});var Bb=function(a,b,c){"ssp"==ha(a)?qa(a,b):(T(a,!0),wa(a,[],function(c){V(a);c=Fa(a,c);for(var d=0,g=c.length;d<g;d++)x(a,c[d]);qa(a,b);T(a,!1)}));if(c){var d=new R(a);d.one("draw",function(){c(d.ajax.json())})}};H("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});H("ajax.params()",
function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});H("ajax.reload()",function(a,b){return this.iterator("table",function(c){Bb(c,!1===b,a)})});H("ajax.url()",function(c){var d=this.context;if(c===b){if(0===d.length)return b;d=d[0];return d.ajax?a.isPlainObject(d.ajax)?d.ajax.url:d.ajax:d.sAjaxSource}return this.iterator("table",function(b){a.isPlainObject(b.ajax)?b.ajax.url=c:b.ajax=c})});H("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Bb(c,!1===b,a)})});
var bb=function(c,d){var g=[],e,f,h,l,n,m;e=typeof c;c&&"string"!==e&&"function"!==e&&c.length!==b||(c=[c]);h=0;for(l=c.length;h<l;h++)for(f=c[h]&&c[h].split?c[h].split(","):[c[h]],n=0,m=f.length;n<m;n++)(e=d("string"===typeof f[n]?a.trim(f[n]):f[n]))&&e.length&&g.push.apply(g,e);return g},kb=function(a){a||(a={});a.filter&&!a.search&&(a.search=a.filter);return{search:a.search||"none",order:a.order||"current",page:a.page||"all"}},lb=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=
a[b],a.length=1,a.context=[a.context[b]],a;a.length=0;return a},mb=function(b,c){var d,g,e,f=[],h=b.aiDisplay;d=b.aiDisplayMaster;var l=c.search;g=c.order;e=c.page;if("ssp"==ha(b))return"removed"===l?[]:Ma(0,d.length);if("current"==e)for(d=b._iDisplayStart,g=b.fnDisplayEnd();d<g;d++)f.push(h[d]);else if("current"==g||"applied"==g)f="none"==l?d.slice():"applied"==l?h.slice():a.map(d,function(b,c){return-1===a.inArray(b,h)?b:null});else if("index"==g||"original"==g)for(d=0,g=b.aoData.length;d<g;d++)"none"==
l?f.push(d):(e=a.inArray(d,h),(-1===e&&"removed"==l||0<=e&&"applied"==l)&&f.push(d));return f},Xb=function(b,c,d){return bb(c,function(c){var g=Pb(c);if(null!==g&&!d)return[g];var e=mb(b,d);if(null!==g&&-1!==a.inArray(g,e))return[g];if(!c)return e;if("function"===typeof c)return a.map(e,function(a){var d=b.aoData[a];return c(a,d._aData,d.nTr)?a:null});g=db(Qa(b.aoData,e,"nTr"));return c.nodeName&&-1!==a.inArray(c,g)?[c._DT_RowIndex]:a(g).filter(c).map(function(){return this._DT_RowIndex}).toArray()})};
H("rows()",function(c,d){c===b?c="":a.isPlainObject(c)&&(d=c,c="");d=kb(d);var g=this.iterator("table",function(a){return Xb(a,c,d)},1);g.selector.rows=c;g.selector.opts=d;return g});H("rows().nodes()",function(){return this.iterator("row",function(a,c){return a.aoData[c].nTr||b},1)});H("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return Qa(a.aoData,b,"_aData")},1)});U("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var d=b.aoData[c];
return"search"===a?d._aFilterData:d._aSortData},1)});U("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){na(b,c,a)})});U("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b},1)});U("rows().remove()","row().remove()",function(){var b=this;return this.iterator("row",function(c,d,g){var e=c.aoData;e.splice(d,1);for(var f=0,h=e.length;f<h;f++)null!==e[f].nTr&&(e[f].nTr._DT_RowIndex=f);a.inArray(d,c.aiDisplay);da(c.aiDisplayMaster,
d);da(c.aiDisplay,d);da(b[g],d,!1);wb(c)})});H("rows.add()",function(a){var b=this.iterator("table",function(b){var c,d,g,e=[];d=0;for(g=a.length;d<g;d++)c=a[d],c.nodeName&&"TR"===c.nodeName.toUpperCase()?e.push(O(b,c)[0]):e.push(x(b,c));return e},1),c=this.rows(-1);c.pop();c.push.apply(c,b.toArray());return c});H("row()",function(a,b){return lb(this.rows(a,b))});H("row().data()",function(a){var c=this.context;if(a===b)return c.length&&this.length?c[0].aoData[this[0]]._aData:b;c[0].aoData[this[0]]._aData=
a;na(c[0],this[0],"data");return this});H("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});H("row.add()",function(b){b instanceof a&&b.length&&(b=b[0]);var c=this.iterator("table",function(a){return b.nodeName&&"TR"===b.nodeName.toUpperCase()?O(a,b)[0]:x(a,b)});return this.row(c[0])});var D=function(b,c,d,g){var e=[],f=function(c,d){if(c.nodeName&&"tr"===c.nodeName.toLowerCase())e.push(c);else{var g=a("<tr><td/></tr>").addClass(d);a("td",
g).addClass(d).html(c)[0].colSpan=C(b);e.push(g[0])}};if(a.isArray(d)||d instanceof a)for(var h=0,l=d.length;h<l;h++)f(d[h],g);else f(d,g);c._details&&c._details.remove();c._details=a(e);c._detailsShow&&c._details.insertAfter(c.nTr)},Sb=function(a,c){var d=a.context;d.length&&(d=d[0].aoData[c!==b?c:a[0]],d._details&&(d._details.remove(),d._detailsShow=b,d._details=b))},Na=function(a,b){var c=a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];d._details&&((d._detailsShow=b)?d._details.insertAfter(d.nTr):
d._details.detach(),$b(c[0]))}},$b=function(a){var b=new R(a),c=a.aoData;b.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<ua(c,"_details").length&&(b.on("draw.dt.DT_details",function(d,g){a===g&&b.rows({page:"current"}).eq(0).each(function(a){a=c[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),b.on("column-visibility.dt.DT_details",function(b,d,g,e){if(a===d)for(d=C(d),g=0,e=c.length;g<e;g++)b=c[g],b._details&&b._details.children("td[colspan]").attr("colspan",
d)}),b.on("destroy.dt.DT_details",function(d,g){if(a===g)for(var e=0,f=c.length;e<f;e++)c[e]._details&&Sb(b,e)}))};H("row().child()",function(a,c){var d=this.context;if(a===b)return d.length&&this.length?d[0].aoData[this[0]]._details:b;!0===a?this.child.show():!1===a?Sb(this):d.length&&this.length&&D(d[0],d[0].aoData[this[0]],a,c);return this});H(["row().child.show()","row().child().show()"],function(a){Na(this,!0);return this});H(["row().child.hide()","row().child().hide()"],function(){Na(this,!1);
return this});H(["row().child.remove()","row().child().remove()"],function(){Sb(this);return this});H("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var ac=/^(.+):(name|visIdx|visible)$/,Yb=function(a,b,c,d,g){c=[];d=0;for(var e=g.length;d<e;d++)c.push(G(a,g[d],b));return c},bc=function(b,c,d){var g=b.aoColumns,e=ua(g,"sName"),f=ua(g,"nTh");return bb(c,function(c){var h=Pb(c);if(""===c)return Ma(g.length);if(null!==h)return[0<=
h?h:g.length+h];if("function"===typeof c){var l=mb(b,d);return a.map(g,function(a,d){return c(d,Yb(b,d,0,0,l),f[d])?d:null})}var n="string"===typeof c?c.match(ac):"";if(n)switch(n[2]){case "visIdx":case "visible":h=parseInt(n[1],10);if(0>h){var m=a.map(g,function(a,b){return a.bVisible?b:null});return[m[m.length+h]]}return[p(b,h)];case "name":return a.map(e,function(a,b){return a===n[1]?b:null})}else return a(f).filter(c).map(function(){return a.inArray(this,f)}).toArray()})};H("columns()",function(c,
d){c===b?c="":a.isPlainObject(c)&&(d=c,c="");d=kb(d);var g=this.iterator("table",function(a){return bc(a,c,d)},1);g.selector.cols=c;g.selector.opts=d;return g});U("columns().header()","column().header()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)});U("columns().footer()","column().footer()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf},1)});U("columns().data()","column().data()",function(){return this.iterator("column-rows",
Yb,1)});U("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)});U("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,d,g,e){return Qa(b.aoData,e,"search"===a?"_aFilterData":"_aSortData",c)},1)});U("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,d,g){return Qa(a.aoData,g,"anCells",b)},1)});U("columns().visible()","column().visible()",
function(d,g){return this.iterator("column",function(e,f){if(d===b)return e.aoColumns[f].bVisible;var h=e.aoColumns,l=h[f],n=e.aoData,m,k,p;if(d!==b&&l.bVisible!==d){if(d){var x=a.inArray(!0,ua(h,"bVisible"),f+1);m=0;for(k=n.length;m<k;m++)p=n[m].nTr,h=n[m].anCells,p&&p.insertBefore(h[f],h[x]||null)}else a(ua(e.aoData,"anCells",f)).detach();l.bVisible=d;aa(e,e.aoHeader);aa(e,e.aoFooter);if(g===b||g)c(e),(e.oScroll.sX||e.oScroll.sY)&&Ra(e);X(e,null,"column-visibility",[e,f,d]);ja(e)}})});U("columns().indexes()",
"column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?y(b,c):c},1)});H("columns.adjust()",function(){return this.iterator("table",function(a){c(a)},1)});H("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return p(c,b);if("fromData"===a||"toVisible"===a)return y(c,b)}});H("column()",function(a,b){return lb(this.columns(a,b))});var cc=function(c,d,g){var e=c.aoData,f=mb(c,g);g=db(Qa(e,f,"anCells"));
var h=a([].concat.apply([],g)),l,n=c.aoColumns.length,m,k,p,x,z,q;return bb(d,function(d){var g="function"===typeof d;if(null===d||d===b||g){m=[];k=0;for(p=f.length;k<p;k++)for(l=f[k],x=0;x<n;x++)z={row:l,column:x},g?(q=c.aoData[l],d(z,G(c,l,x),q.anCells[x])&&m.push(z)):m.push(z);return m}return a.isPlainObject(d)?[d]:h.filter(d).map(function(b,c){l=c.parentNode._DT_RowIndex;return{row:l,column:a.inArray(c,e[l].anCells)}}).toArray()})};H("cells()",function(c,d,g){a.isPlainObject(c)&&(typeof c.row!==
b?(g=d,d=null):(g=c,c=null));a.isPlainObject(d)&&(g=d,d=null);if(null===d||d===b)return this.iterator("table",function(a){return cc(a,c,kb(g))});var e=this.columns(d,g),f=this.rows(c,g),h,l,n,m,k,p=this.iterator("table",function(a,b){h=[];l=0;for(n=f[b].length;l<n;l++)for(m=0,k=e[b].length;m<k;m++)h.push({row:f[b][l],column:e[b][m]});return h},1);a.extend(p.selector,{cols:d,rows:c,opts:g});return p});U("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,c,d){return(a=
a.aoData[c].anCells)?a[d]:b},1)});H("cells().data()",function(){return this.iterator("cell",function(a,b,c){return G(a,b,c)},1)});U("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]},1)});U("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,c,d){return G(b,c,d,a)},1)});U("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,
b,c){return{row:b,column:c,columnVisible:y(a,c)}},1)});U("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,d){na(b,c,a,d)})});H("cell()",function(a,b,c){return lb(this.cells(a,b,c))});H("cell().data()",function(a){var c=this.context,d=this[0];if(a===b)return c.length&&d.length?G(c[0],d[0].row,d[0].column):b;A(c[0],d[0].row,d[0].column,a);na(c[0],d[0].row,"data",d[0].column);return this});H("order()",function(c,d){var g=this.context;if(c===b)return 0!==
g.length?g[0].aaSorting:b;"number"===typeof c?c=[[c,d]]:a.isArray(c[0])||(c=Array.prototype.slice.call(arguments));return this.iterator("table",function(a){a.aaSorting=c.slice()})});H("order.listener()",function(a,b,c){return this.iterator("table",function(d){hb(d,a,b,c)})});H(["columns().order()","column().order()"],function(b){var c=this;return this.iterator("table",function(d,g){var e=[];a.each(c[g],function(a,c){e.push([c,b])});d.aaSorting=e})});H("search()",function(c,d,g,e){var f=this.context;
return c===b?0!==f.length?f[0].oPreviousSearch.sSearch:b:this.iterator("table",function(b){b.oFeatures.bFilter&&I(b,a.extend({},b.oPreviousSearch,{sSearch:c+"",bRegex:null===d?!1:d,bSmart:null===g?!0:g,bCaseInsensitive:null===e?!0:e}),1)})});U("columns().search()","column().search()",function(c,d,g,e){return this.iterator("column",function(f,h){var l=f.aoPreSearchCols;if(c===b)return l[h].sSearch;f.oFeatures.bFilter&&(a.extend(l[h],{sSearch:c+"",bRegex:null===d?!1:d,bSmart:null===g?!0:g,bCaseInsensitive:null===
e?!0:e}),I(f,f.oPreviousSearch,1))})});H("state()",function(){return this.context.length?this.context[0].oSavedState:null});H("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});H("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});H("state.save()",function(){return this.iterator("table",function(a){ja(a)})});B.versionCheck=B.fnVersionCheck=function(a){var b=B.version.split(".");a=a.split(".");
for(var c,d,g=0,e=a.length;g<e;g++)if(c=parseInt(b[g],10)||0,d=parseInt(a[g],10)||0,c!==d)return c>d;return!0};B.isDataTable=B.fnIsDataTable=function(b){var c=a(b).get(0),d=!1;a.each(B.settings,function(a,b){if(b.nTable===c||b.nScrollHead===c||b.nScrollFoot===c)d=!0});return d};B.tables=B.fnTables=function(b){return a.map(B.settings,function(c){if(!b||b&&a(c.nTable).is(":visible"))return c.nTable})};B.util={throttle:Da,escapeRegex:fb};B.camelToHungarian=l;H("$()",function(b,c){var d=this.rows(c).nodes(),
d=a(d);return a([].concat(d.filter(b).toArray(),d.find(b).toArray()))});a.each(["on","one","off"],function(b,c){H(c+"()",function(){var b=Array.prototype.slice.call(arguments);b[0].match(/\.dt\b/)||(b[0]+=".dt");var d=a(this.tables().nodes());d[c].apply(d,b);return this})});H("clear()",function(){return this.iterator("table",function(a){V(a)})});H("settings()",function(){return new R(this.context,this.context)});H("data()",function(){return this.iterator("table",function(a){return ua(a.aoData,"_aData")}).flatten()});
H("destroy()",function(b){b=b||!1;return this.iterator("table",function(c){var g=c.nTableWrapper.parentNode,e=c.oClasses,f=c.nTable,h=c.nTBody,l=c.nTHead,n=c.nTFoot,m=a(f),h=a(h),k=a(c.nTableWrapper),p=a.map(c.aoData,function(a){return a.nTr}),x;c.bDestroying=!0;X(c,"aoDestroyCallback","destroy",[c]);b||(new R(c)).columns().visible(!0);k.unbind(".DT").find(":not(tbody *)").unbind(".DT");a(d).unbind(".DT-"+c.sInstance);f!=l.parentNode&&(m.children("thead").detach(),m.append(l));n&&f!=n.parentNode&&
(m.children("tfoot").detach(),m.append(n));m.detach();k.detach();c.aaSorting=[];c.aaSortingFixed=[];cb(c);a(p).removeClass(c.asStripeClasses.join(" "));a("th, td",l).removeClass(e.sSortable+" "+e.sSortableAsc+" "+e.sSortableDesc+" "+e.sSortableNone);c.bJUI&&(a("th span."+e.sSortIcon+", td span."+e.sSortIcon,l).detach(),a("th, td",l).each(function(){var b=a("div."+e.sSortJUIWrapper,this);a(this).append(b.contents());b.detach()}));!b&&g&&g.insertBefore(f,c.nTableReinsertBefore);h.children().detach();
h.append(p);m.css("width",c.sDestroyWidth).removeClass(e.sTable);(x=c.asDestroyStripes.length)&&h.children().each(function(b){a(this).addClass(c.asDestroyStripes[b%x])});g=a.inArray(c,B.settings);-1!==g&&B.settings.splice(g,1)})});B.version="1.10.4";B.settings=[];B.models={};B.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};B.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null};B.models.oColumn={idx:null,aDataSort:null,
asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};B.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],
asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,
fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,
iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",
sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:a.extend({},B.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null};n(B.defaults);B.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,
mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};n(B.defaults.column);B.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,
bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,
nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:b,oAjaxData:b,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},
bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==ha(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==ha(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,g=this.oFeatures,e=g.bPaginate;return g.bServerSide?!1===e||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!e||c>d||-1===a?d:c},
oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}};B.ext=Z={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:B.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:B.version};a.extend(Z,{afnFiltering:Z.search,aTypes:Z.type.detect,ofnSearch:Z.type.search,oSort:Z.type.order,afnSortData:Z.order,aoFeatures:Z.feature,
oApi:Z.internal,oStdClasses:Z.classes,oPagination:Z.pager});a.extend(B.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",
sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",
sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});(function(){var b="",b="",c=b+"ui-state-default",d=b+"css_right ui-icon ui-icon-",b=b+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";a.extend(B.ext.oJUIClasses,B.ext.classes,{sPageButton:"fg-button ui-button "+c,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:c+
" sorting_asc",sSortDesc:c+" sorting_desc",sSortable:c+" sorting",sSortableAsc:c+" sorting_asc_disabled",sSortableDesc:c+" sorting_desc_disabled",sSortableNone:c+" sorting_disabled",sSortJUIAsc:d+"triangle-1-n",sSortJUIDesc:d+"triangle-1-s",sSortJUI:d+"carat-2-n-s",sSortJUIAscAllowed:d+"carat-1-n",sSortJUIDescAllowed:d+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+c,sScrollFoot:"dataTables_scrollFoot "+c,sHeaderTH:c,sFooterTH:c,
sJUIHeader:b+" ui-corner-tl ui-corner-tr",sJUIFooter:b+" ui-corner-bl ui-corner-br"})})();var Zb=B.ext.pager;a.extend(Zb,{simple:function(a,b){return["previous","next"]},full:function(a,b){return["first","previous","next","last"]},simple_numbers:function(a,b){return["previous",Ea(a,b),"next"]},full_numbers:function(a,b){return["first","previous",Ea(a,b),"next","last"]},_numbers:Ea,numbers_length:7});a.extend(!0,B.ext.renderer,{pageButton:{_:function(b,c,d,g,e,f){var h=b.oClasses,l=b.oLanguage.oPaginate,
n,m,p=0,x=function(c,g){var k,z,q,t,w=function(a){za(b,a.data.action,!0)};k=0;for(z=g.length;k<z;k++)if(t=g[k],a.isArray(t))q=a("<"+(t.DT_el||"div")+"/>").appendTo(c),x(q,t);else{m=n="";switch(t){case "ellipsis":c.append("<span>&hellip;</span>");break;case "first":n=l.sFirst;m=t+(0<e?"":" "+h.sPageButtonDisabled);break;case "previous":n=l.sPrevious;m=t+(0<e?"":" "+h.sPageButtonDisabled);break;case "next":n=l.sNext;m=t+(e<f-1?"":" "+h.sPageButtonDisabled);break;case "last":n=l.sLast;m=t+(e<f-1?"":
" "+h.sPageButtonDisabled);break;default:n=t+1,m=e===t?h.sPageButtonActive:""}n&&(q=a("<a>",{"class":h.sPageButton+" "+m,"aria-controls":b.sTableId,"data-dt-idx":p,tabindex:b.iTabIndex,id:0===d&&"string"===typeof t?b.sTableId+"_"+t:null}).html(n).appendTo(c),vb(q,{action:t},w),p++)}};try{var z=a(k.activeElement).data("dt-idx");x(a(c).empty(),g);null!==z&&a(c).find("[data-dt-idx="+z+"]").focus()}catch(q){}}}});a.extend(B.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return Ab(a,c)?"num"+
c:null},function(a,b){if(!(!a||a instanceof Date||Tb.test(a)&&xb.test(a)))return null;var c=Date.parse(a);return null!==c&&!isNaN(c)||fa(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return Ab(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Qb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Qb(a,c,!0)?"html-num-fmt"+c:null},function(a,b){return fa(a)||"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);a.extend(B.ext.type.search,{html:function(a){return fa(a)?
a:"string"===typeof a?a.replace(Ob," ").replace(Pa,""):""},string:function(a){return fa(a)?a:"string"===typeof a?a.replace(Ob," "):a}});var Eb=function(a,b,c,d){if(0!==a&&(!a||"-"===a))return-Infinity;b&&(a=zb(a,b));a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,"")));return 1*a};a.extend(Z.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return fa(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return fa(a)?"":"string"===
typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0}});Ya("");a.extend(!0,B.ext.renderer,{header:{_:function(b,c,d,g){a(b.nTable).on("order.dt.DT",function(a,e,f,h){b===e&&(a=d.idx,c.removeClass(d.sSortingClass+" "+g.sSortAsc+" "+g.sSortDesc).addClass("asc"==h[a]?g.sSortAsc:"desc"==h[a]?g.sSortDesc:d.sSortingClass))})},jqueryui:function(b,c,d,g){a("<div/>").addClass(g.sSortJUIWrapper).append(c.contents()).append(a("<span/>").addClass(g.sSortIcon+
" "+d.sSortingClassJUI)).appendTo(c);a(b.nTable).on("order.dt.DT",function(a,e,f,h){b===e&&(a=d.idx,c.removeClass(g.sSortAsc+" "+g.sSortDesc).addClass("asc"==h[a]?g.sSortAsc:"desc"==h[a]?g.sSortDesc:d.sSortingClass),c.find("span."+g.sSortIcon).removeClass(g.sSortJUIAsc+" "+g.sSortJUIDesc+" "+g.sSortJUI+" "+g.sSortJUIAscAllowed+" "+g.sSortJUIDescAllowed).addClass("asc"==h[a]?g.sSortJUIAsc:"desc"==h[a]?g.sSortJUIDesc:d.sSortingClassJUI))})}}});B.render={number:function(a,b,c,d){return{display:function(g){var e=
0>g?"-":"";g=Math.abs(parseFloat(g));var f=parseInt(g,10);g=c?b+(g-f).toFixed(c).substring(2):"";return e+(d||"")+f.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+g}}}};a.extend(B.ext.internal,{_fnExternApiFunc:Nb,_fnBuildAjax:wa,_fnAjaxUpdate:la,_fnAjaxParameters:ma,_fnAjaxUpdateDraw:eb,_fnAjaxDataSrc:Fa,_fnAddColumn:f,_fnColumnOptions:w,_fnAdjustColumnSizing:c,_fnVisibleToColumnIndex:p,_fnColumnIndexToVisible:y,_fnVisbleColumns:C,_fnGetColumns:E,_fnColumnTypes:g,_fnApplyColumnDefs:z,_fnHungarianMap:n,
_fnCamelToHungarian:l,_fnLanguageCompat:h,_fnBrowserDetect:q,_fnAddData:x,_fnAddTr:O,_fnNodeToDataIndex:function(a,c){return c._DT_RowIndex!==b?c._DT_RowIndex:null},_fnNodeToColumnIndex:function(b,c,d){return a.inArray(d,b.aoData[c].anCells)},_fnGetCellData:G,_fnSetCellData:A,_fnSplitObjNotation:M,_fnGetObjectDataFn:L,_fnSetObjectDataFn:S,_fnGetDataMaster:N,_fnClearTable:V,_fnDeleteIndex:da,_fnInvalidate:na,_fnGetRowElements:oa,_fnCreateTr:ka,_fnBuildHead:va,_fnDrawHead:aa,_fnDraw:pa,_fnReDraw:qa,
_fnAddOptionsHtml:W,_fnDetectHeader:ba,_fnGetUniqueThs:xa,_fnFeatureHtmlFilter:Q,_fnFilterComplete:I,_fnFilterCustom:m,_fnFilterColumn:Fb,_fnFilter:Gb,_fnFilterCreateSearch:ob,_fnEscapeRegex:fb,_fnFilterData:Ja,_fnFeatureHtmlInfo:Cb,_fnUpdateInfo:Va,_fnInfoMacros:Hb,_fnInitialise:Wa,_fnInitComplete:gb,_fnLengthChange:ta,_fnFeatureHtmlLength:nb,_fnFeatureHtmlPaginate:Xa,_fnPageChange:za,_fnFeatureHtmlProcessing:J,_fnProcessingDisplay:T,_fnFeatureHtmlTable:Db,_fnScrollDraw:Ra,_fnApplyToChildren:sa,
_fnCalculateColumnWidths:Aa,_fnThrottle:Da,_fnConvertToWidth:rb,_fnScrollingWidthAdjust:Ib,_fnGetWidestNode:Jb,_fnGetMaxLenString:sb,_fnStringToCss:P,_fnScrollBarWidth:tb,_fnSortFlatten:Ka,_fnSort:Kb,_fnSortAria:Lb,_fnSortListener:ub,_fnSortAttachListener:hb,_fnSortingClasses:cb,_fnSortData:Mb,_fnSaveState:ja,_fnLoadState:Ta,_fnSettingsFromNode:Sa,_fnLog:Ia,_fnMap:ea,_fnBindAction:vb,_fnCallbackReg:ia,_fnCallbackFire:X,_fnLengthOverflow:wb,_fnRenderer:ib,_fnDataSource:ha,_fnRowAttributes:ga,_fnCalculateEnd:function(){}});
a.fn.dataTable=B;a.fn.dataTableSettings=B.settings;a.fn.dataTableExt=B.ext;a.fn.DataTable=function(b){return a(this).dataTable(b).api()};a.each(B,function(b,c){a.fn.DataTable[b]=c});return a.fn.dataTable})})(window,document);window.TOONTALK||(window.TOONTALK={});window.TOONTALK.creators_from_json={};window.TOONTALK.widget=function(d){var k=function(b){var a=this.get_frontside&&this.get_frontside(!0);if(a)return b&&this.rerender(),a.get_element()};d.creators_from_json.top_level=function(b){b=d.widget.create_top_level_widget(b.settings);$(b.get_backside(!0).get_element()).addClass("toontalk-top-level-backside");return b};return{add_standard_widget_functionality:function(b){this.add_sides_functionality(b);this.runnable(b);this.stackable(b);this.animatable(b);this.has_title(b);this.has_parent(b);
this.has_description(b);this.has_listeners(b);this.erasable(b);b.is_of_type||(b.is_of_type=function(a){return this.get_type_name()===a});b.is_widget=!0;return b},erasable:function(b){var a;b.get_erased||(b.get_erased=function(){return a});b.set_erased||(b.set_erased=function(b,d){a=b;d&&this.rerender()});return b},add_sides_functionality:function(b){var a,n;b.get_frontside||(b.get_frontside=function(l){l&&!a&&(a=d.frontside.create(b));return a},b.save_dimensions=function(){var a;this.get_size_attributes?
(a=this.get_size_attributes(),this.saved_width=a.width,this.saved_height=a.height):(a=this.get_frontside_element(),this.saved_width=$(a).width(),this.saved_height=$(a).height())},b.restore_dimensions=function(){var a;0<this.saved_width&&(this.set_size_attributes?this.set_size_attributes(this.saved_width,this.saved_height):(a=this.get_frontside_element(),$(a).css({width:this.saved_width,height:this.saved_height})),this.saved_height=this.saved_width=void 0)});b.get_backside||(b.get_backside=function(a){a&&
!n&&(n=b.create_backside());return n});b.set_backside||(b.set_backside=function(a){n=a});b.forget_backside||(b.forget_backside=function(){n=void 0});b.create_backside||(b.create_backside=function(){return d.backside.create(b)});return b},runnable:function(b){var a=!1;b.get_running||(b.get_running=function(){return a});b.set_running||(b.set_running=function(d,l){var h,k;a===d&&a||(h=this.get_backside_widgets(),a=d,this.get_backside()&&this.get_backside().run_status_changed(a),h.forEach(function(e){k=
e.get_widget();e.is_backside()&&0<=this.backside_widgets.indexOf(k)||(k.is_of_type("robot")?e.is_backside()||a&&k.get_running()||(a?(k.set_stopped(!1),k.run(b,l)):k.set_stopped(!0),k.rerender()):k.set_running&&(!l&&e.is_backside()&&"top-level"!==b.get_type_name()?k.set_running(d,b):k.set_running(d)))}.bind(this)),this.walk_children&&this.walk_children(function(b){b.set_running&&b.set_running(a);return!0}),this.rerender())});return b},stackable:function(b){var a=!1;b.get_infinite_stack||(b.get_infinite_stack=
function(){return a});b.set_infinite_stack||(b.set_infinite_stack=function(d){var l=b.get_backside_element(),h=b.get_frontside_element();a=d;l&&$(l).find(".toontalk-infinite-stack-check-box").prop("checked",d);h&&(d?$(h).addClass("toontalk-infinite-stack"):$(h).removeClass("toontalk-infinite-stack"))});return b},animatable:function(b){var a;b.animate_to_widget||(a=function(a){var b=a.get_element();b&&$(b).is(":visible")||(b=d.UTILITIES.find_resource_equal_to_widget(a));return b},b.animate_to_widget=
function(b,d,h,k,e){this.animate_to_element(a(b),d,h,k,e)});b.animate_to_element||(b.animate_to_element=function(a,b,h,k,e){var q=$(a).offset(),u=$(this.get_frontside_element());a&&$(a).is(":visible")?(k||(k=($(a).width()-u.width())*Math.random()),e||(e=($(a).height()-u.height())*Math.random()),q?(q.left+=k,q.top+=e,d.debugging&&(0>q.left||0>q.top)&&console.log("Should this include negative values? "+q)):q={left:0,top:0},this.animate_to_absolute_position(q,b,h)):b()});b.animate_to_absolute_position||
(b.animate_to_absolute_position=function(a,b,h){var k;k=this.get_frontside_element();d.UTILITIES.animate_to_absolute_position(k,a,b,h)});return b},has_title:function(b){b.get_title||(b.get_title=function(){var a=this.get_type_name(),b=this.get_backside(),l=this.get_frontside_element(),h=this.get_description(),b=$(l).is(".toontalk-top-level-resource")?this.can_run&&this.can_run()?this.get_running()?"Click elsewhere to stop this from running. Click on it to start it up again.":"Click to start this running. Click elsewhere to stop it.":
"Drag this "+a+" to a work area.":b&&b.get_element()&&$(b.get_element()).is(":visible")?h||this.get_custom_title_prefix?"":"This is "+d.UTILITIES.add_a_or_an(a):"Click to see the back side of this "+a;h&&(h="This "+a+" "+h,b=b?h+"\n"+b:h);if(this.get_erased())return this.get_title_of_erased_widget();this.get_custom_title_prefix&&!$(l).is(".toontalk-top-level-resource")&&(b=this.get_custom_title_prefix()+" "+b);b=b.trim();0>".?!".indexOf(b[b.length-1])&&(b+=".");return b});return b},get_title_of_erased_widget:function(){var b=
this.get_frontside_element(),a=this.get_type_name();return b&&$(b).closest(".toontalk-conditions-contents-container").is("*")?"This "+a+" has been erased so that it matches with any "+a+".":"This "+a+" has been erased. Dusty the Vacuum can restore the "+a+" to normal."},has_parent:function(b){var a,d;b.get_parent_of_frontside=function(){return a};b.get_parent_of_backside=function(){return d};b.set_parent_of_frontside=function(b,d,n){a&&!n&&a.is_backside()&&a.get_widget().remove_backside_widget(this,
!1,!0);a=b&&d?b.get_backside(!0):b};b.set_parent_of_backside=function(a,b,k){d&&!k&&d.is_backside()&&d.get_widget().remove_backside_widget(this,!0,!0);d=a&&b?a.get_backside(!0):a};b.closest_visible_ancestor=function(){for(var a=this;a&&!a.visible();)a=a.is_backside()?a.get_parent_of_backside():a.get_parent_of_frontside();return a||this};b.closest_visible_ancestor_or_frontside=function(){for(var a=this,b;a&&!a.visible();)b=a,a.is_backside()?(a=a.get_parent_of_backside())||(a=b.get_widget()):a=a.get_parent_of_frontside();
return a||this};b.ancestor_of_type=function(a){for(var b=this;b&&!b.is_of_type(a);)b=b.is_backside()?b.get_widget().get_parent_of_backside():b.get_parent_of_frontside();return b};b.has_ancestor=function(a){for(var b=this;b;){if(a===b)return!0;b=b.is_backside()?b.get_widget().get_parent_of_backside():b.get_parent_of_frontside()}return!1};b.remove_from_parent_of_frontside=function(b){a&&(a.is_backside()?a.remove_backside_widget(this,!1,!b):a.removed_from_container&&a.removed_from_container(this,!1,
b,void 0,!0))};return b},has_description:function(b){var a;b.get_description||(b.get_description=function(){return a});b.set_description||(b.set_description=function(b,d){if(a===b||!a&&""===b)return!1;a=b;d&&this.rerender();return!0})},has_listeners:function(b){var a={};b.add_listener||(b.add_listener=function(b,d){var h=a[b];h?0>h.indexOf(d)&&h.push(d):a[b]=[d]});b.remove_listener||(b.remove_listener=function(b,l,h){if(b=a[b])if(l=b.indexOf(l),0<=l){b.splice(l,1);return}!h&&d.debugging&&console.log("Listener of type "+
type_name+" could not be removed.")});b.get_listeners||(b.get_listeners=function(b){return a[b]})},get_full_description:function(){var b,a;if(this.get_erased&&this.get_erased())return"erased "+this.get_type_name();b=this.get_description();a=this.toString();return b?a+" ("+b+")":a},remove:function(b){var a=this.get_backside(),d=this.get_frontside(),l=this.get_parent_of_frontside(),h=this.get_parent_of_backside();a&&(a.remove_element(),h&&(a=h.is_backside()?h:h.get_backside(),a.removed_from_container&&
a.removed_from_container(this,!0,b,void 0,!0)));d&&(d.remove(),l&&this.remove_from_parent_of_frontside(b));this.set_running(!1)},get_frontside_element:k,get_element:k,get_backside_element:function(b){if(b=this.get_backside&&this.get_backside(b))return b.get_element()},add_to_json:function(b,a){var d,l,h,k,e;if(b){b.view?(l=b,d=b.view,b=b.semantic):(d={},l={semantic:b,view:d});l.version=1;this.get_erased&&this.get_erased()&&(b.erased=!0);this.get_infinite_stack&&this.get_infinite_stack()&&(b.infinite_stack=
!0);this.get_running&&this.get_running()&&(b.running=!0);if(!this.get_parent_of_frontside()||this.get_parent_of_frontside().is_backside())if(k=this.get_frontside_element&&this.get_frontside_element())e=$(k).width(),$(k).is(".toontalk-plain-text-element")||0===e||(d.frontside_width=$(k).width(),d.frontside_height=$(k).height()),0!==e&&(h=$(k).position()),h&&(d.frontside_left=h.left,d.frontside_top=h.top);if(k=this.get_backside()){if(e=k.get_element())d.backside_width=$(e).width(),d.backside_height=
$(e).height(),d.backside_left||(h=$(e).position(),d.backside_left=h.left,d.backside_top=h.top,"&lt;"===$(e).find(".toontalk-settings-backside-button").html()&&(d.advanced_settings_open=!0));k.get_backside_dimensions()&&(d.backside_geometry=k.get_backside_dimensions())}!d.backside_geometry&&this.backside_geometry&&(d.backside_geometry=this.backside_geometry);d.saved_width=this.saved_width;d.saved_height=this.saved_height;b.description=this.get_description&&this.get_description();return l}console.log("get_json not defined");
return{}},add_backside_widgets_to_json:function(b,a){var n=this.get_backside_widgets(),l;0<n.length&&(b.semantic.backside_widgets=d.UTILITIES.get_json_of_array(n,a),(n=this.get_backside_widgets_json_views())&&n.forEach(function(d,n){var e;l=b.semantic.backside_widgets[n];0<=l.widget.shared_widget_index?(e=a.widgets_encountered.indexOf(a.shared_widgets[l.widget.shared_widget_index]),e=a.json_of_widgets_encountered[e].view):e=l.widget.view;l.is_backside?d.backside_left&&(e.backside_left=d.backside_left,
e.backside_top=d.backside_top):d.frontside_left&&(e.frontside_left=d.frontside_left,e.frontside_top=d.frontside_top)}))},get_backside_widgets:function(){return this.backside_widgets||[]},add_backside_widget:function(b,a){var n=this.get_backside(),l=a?b.get_backside():b;d.debugging&&b===this?d.UTILITIES.report_internal_error("Adding a widget to a list of its backside widgets!"):(this.backside_widgets?0>this.backside_widgets.indexOf(l)&&this.backside_widgets.push(l):this.backside_widgets=[l],a?b.set_parent_of_backside(this,
!0):b.set_parent_of_frontside(this,!0),l.set_visible(n.visible()),this.get_running()&&b.set_running(!0),b.render())},remove_all_backside_widgets:function(){if(this.backside_widgets)for(;0<this.backside_widgets.length;)this.backside_widgets[0].remove()},remove_backside_widget:function(b,a,n){this.get_backside();var l=a?b.get_backside(!0):b,h;d.debugging&&!this.backside_widgets?n?console.log("remove_backside_widget called and there are no backside_widgets"):d.UTILITIES.report_internal_error("Couldn't remove a widget from backside widgets."):
(h=this.backside_widgets.indexOf(l),0>h?n?d.debugging&&console.log("Warning: Probable redundant call to remove_backside_widget"):d.UTILITIES.report_internal_error("Couldn't find a widget to remove it from backside widgets. "+l.get_widget()+" ("+l.get_widget().debug_id+")"):(this.backside_widgets.splice(h,1),this.backside_widgets_json_views&&this.backside_widgets_json_views.splice(h,1),a?(a=b.get_parent_of_backside())&&a.get_widget()===this&&b.set_parent_of_backside(void 0,!0,!0):(a=b.get_parent_of_frontside())&&
a.get_widget()===this&&b.set_parent_of_frontside(void 0,void 0,!0),l.set_visible(!1)))},set_backside_widget_sides:function(b,a){var d=this.get_backside(),l=d&&d.visible();this.backside_widgets=b;0<b.length&&(this.get_backside()?this.get_backside().add_backside_widgets(b,a):this.backside_widgets_json_views=a,b.forEach(function(a){a.is_backside()?a.get_widget().set_parent_of_backside(this,!0):a.get_widget().set_parent_of_frontside(this,!0);a.set_visible(l)}.bind(this)))},get_backside_widgets_json_views:function(b){!this.backside_widgets_json_views&&
b&&(this.backside_widgets_json_views=[]);return this.backside_widgets_json_views},can_run:function(){var b=!1,a;this.get_backside_widgets().some(function(d){a=d.get_widget();if(a.get_body&&!a.get_body().is_empty()||a.can_run())return b=!0});return b},add_to_copy:function(b,a){var n;this.get_erased&&this.get_erased()&&(b.set_erased||d.widget.erasable(b),b.set_erased(this.get_erased()));a&&a.just_value||(n=this.get_backside_widgets(),0<n.length&&b.set_backside_widget_sides(d.UTILITIES.copy_widget_sides(n,
a),this.get_backside_widgets_json_views()));b.set_visible(this.visible());return b},get_type_name:function(){return""},copy:function(){console.assert(!1,"copy not implemented")},add_copy_to_container:function(b,a,n){b||(b=this.copy());var l=this.get_frontside_element(),h=b.get_frontside_element(),k=$(l).closest(".toontalk-backside"),e,q;0===k.length&&(k=$(".toontalk-backside"));"undefined"===typeof a&&(a=30);"undefined"===typeof n&&(n=30);e=d.UTILITIES.relative_position(l,k.get(0));q=d.UTILITIES.widget_from_jquery(k);
$(h).css({width:$(l).width(),height:$(l).height(),left:e.left+a,top:e.top+n});k.get(0).appendChild(h);q&&q.add_backside_widget(b);d.robot.in_training&&d.robot.in_training.copied(this,b,!1);return b},visible:function(){var b=this.get_frontside();return b?b.visible():!1},set_visible:function(b){var a=this.get_frontside(b);a&&a.set_visible(b)},is_backside:function(){return!1},get_parent:function(){return this.get_parent_of_frontside()},drag_started:function(b,a){d.robot.in_training&&d.robot.in_training.picked_up(this,
b,a)},match:function(b){console.assert(!1,"match not implemented for "+b.toString())},removed:function(b){d.UTILITIES.report_internal_error("removed not implemented")},equals_box:function(){return!1},equals_number:function(){return!1},open_backside:function(b){var a=this.get_backside(),n=function(a,c){d.UTILITIES.set_timeout(function(){$(a).addClass("toontalk-side-appearing");d.UTILITIES.add_one_shot_event_handler(a,"transitionend",2500,function(){$(a).removeClass("toontalk-side-appearing");b&&b()});
$(a).css({left:e,top:q,opacity:c});this.apply_backside_geometry()}.bind(this))}.bind(this),l,h,k,e,q,u,f;if(a){l=a.get_element();if($(l).is(":visible"))return d.UTILITIES.highlight_element(l,void 0,1E3),a;if((h=this.get_parent_of_backside())&&h.is_backside())return h.get_widget().open_backside()}h=this.get_frontside_element();k=$(h).parent();a=$(h);if(!a.is(".toontalk-top-level-resource")){for(;0<k.length&&!k.is(".toontalk-backside");)a=k,k=k.parent();a.get(0);a=this.get_backside(!0);l=a.get_element();
l.toontalk_widget=this;u=$(h).offset();(f=k.offset())||(f={left:0,top:0});$(l).css({left:u.left-f.left,top:u.top-f.top,opacity:.01});k.append(l);(k=d.UTILITIES.widget_from_jquery(k))&&k.add_backside_widget(this,!0);e=u.left-f.left;q=u.top-f.top+h.offsetHeight+26;n(l,"inherit");a.render();this.backside_widgets&&this.backside_widgets.forEach(function(a){a.render();a.set_visible(!0)});return a}},apply_backside_geometry:function(){var b=this.get_backside(!0),a=b.get_element();this.backside_geometry&&
a&&(d.backside.scale_backside($(a),this.backside_geometry.x_scale,this.backside_geometry.y_scale,this.backside_geometry.original_width,this.backside_geometry.original_height),b.set_dimensions(this.backside_geometry))},top_level_widget:function(){var b;return this.is_of_type("top-level")?this:(b=d.UTILITIES.widget_from_jquery($(this.get_frontside_element()).closest(".toontalk-top-level-backside")))?b:(b=this.get_parent_of_frontside()||this.get_parent_of_backside())?b.get_widget().top_level_widget():
this.create_top_level_widget()},backup_all:function(b){var a=this.top_level_widget();a&&a.save(b)},render:function(){d.DISPLAY_UPDATES.pending_update(this)},rerender:function(){this.visible()&&this.render()},hide:function(){$(this.get_frontside_element()).hide()},close_button_ok:function(b){return"top-level"!==this.get_type_name()&&!$(b).is(".toontalk-top-level-resource")&&!$(b).closest(".toontalk-conditions-panel").is("*")},get_widget:function(){return this},add_to_top_level_backside:function(b,
a){var n=this.top_level_widget(),l=b.get_frontside_element(!0);n.add_backside_widget(b);n.get_backside_element().appendChild(l);b.render();a&&d.robot.in_training&&d.robot.in_training.dropped_on(b,n);return l},create_top_level_widget:function(b){var a=Object.create(d.widget);b||(b={});a.get_json=function(a){a=this.get_backside(!0).get_element();a=document.defaultView.getComputedStyle(a,null).getPropertyValue("background-color");return{semantic:{type:"top_level",settings:b},view:{background_color:a}}};
a.get_type_name=function(){return"top-level"};a.is_of_type=function(a){return"top-level"===a};a.toString=function(){return"top level widget"};a.get_description=function(){};a.match=function(){return"matched"};a.update_display=function(){this.backside_widgets&&this.backside_widgets.forEach(function(a){a.visible()&&a.update_display()})};a.copy=function(){return this};a.visible=function(){return!0};a.get_parent_of_frontside=function(){};a.get_parent_of_backside=function(){};a.closest_visible_ancestor=
function(){return this};a.get_infinite_stack=function(){return!1};a.top_level_widget=function(){return this};a=a.add_sides_functionality(a);a=a.runnable(a);a=a.has_parent(a);a.get_setting=function(a){"undefined"===typeof b[a]&&(b[a]=d.DEFAULT_SETTINGS&&d.DEFAULT_SETTINGS[a]);return b[a]};a.set_setting=function(a,d){b[a]=d};a.open_settings=function(){d.SETTINGS.open(a)};a.save=function(a,b,h){var k;b||(b={});"undefined"===typeof b.google_drive&&(b.google_drive=d.google_drive&&this.get_setting("auto_save_to_google_drive"));
"undefined"===typeof b.local_storage&&(b.local_storage=this.get_setting("auto_save_to_local_storage"));a?(b.google_drive&&(k=d.UTILITIES.get_json_top_level(this),a=d.google_drive.get_status(),"Ready"===a?(d.google_drive.upload_file(this.get_setting("program_name"),"json",JSON.stringify(k),h),h=void 0):d.google_drive.connection_to_google_drive_possible()&&("Need to authorize"===a?(d.UTILITIES.display_message_if_new("Unable to save to your Google Drive because you need to log in. Click on the settings icon to log in."),
d.UTILITIES.display_tooltip($(".toontalk-settings-button"))):console.log("Unable to save to Google Drive because: "+a))),b.local_storage&&(k||(k=d.UTILITIES.get_json_top_level(this)),this.save_to_local_storage(k)),h&&h()):setTimeout(function(){this.save(!0,b,h)}.bind(this),100)};a.publish=function(a,b){d.publish.publish_widget(this.get_setting("program_name"),this,b,a)};a.save_to_local_storage=function(a,b){var h=this.get_setting("program_name"),k=d.UTILITIES.local_storage_program_key(h),e=d.UTILITIES.local_storage_program_meta_data_key(h),
q,u,f;b||(b=Date.now());try{u=(u=window.localStorage.getItem(e))?JSON.parse(u):{created:b},u.last_modified=b,f=JSON.stringify(a),u.file_size=f.length,window.localStorage.setItem(e,JSON.stringify(u)),window.localStorage.setItem(k,f),window.localStorage.setItem("toontalk-last-key",k),q=d.UTILITIES.get_all_locally_stored_program_names(),0>q.indexOf(h)&&(q.push(h),d.UTILITIES.set_all_locally_stored_program_names(q))}catch(w){h="Failed to save state to local storage since it requires "+JSON.stringify(a).length+
" bytes. Error message is "+w,d.UTILITIES.is_internet_explorer()?console.error(h):d.UTILITIES.display_message(h),this.last_local_storage_error=h}};a.load=function(b,l,h){var k=this.get_setting("program_name"),e=k+".json",q=d.UTILITIES.local_storage_program_key(k),u=function(b){b?(b=JSON.parse(b),a.remove_all_backside_widgets(),d.UTILITIES.add_backside_widgets_from_json(a,b.semantic.backside_widgets),l&&l()):h&&h()},k=function(a){a?d.google_drive.download_file(a,u):u(window.localStorage.getItem(q))};
b&&d.google_drive&&"Ready"===d.google_drive.get_status()?d.google_drive.get_toontalk_program_file(e,k):u(window.localStorage.getItem(q))};a.walk_children=function(){};a.is_widget=!0;a.get_backside(!0).set_visible(!0);d.debugging&&(a.debug_id=d.UTILITIES.generate_unique_id(),a.debug_string="Top-level widget");return a}}}(window.TOONTALK);window.TOONTALK.backside=function(d){return{create:function(k){var b=Object.create(this),a=document.createElement("div"),n=$(a),l=1,h=1,t=document.createElement("div"),e=document.createElement("div"),q=k.get_help_URL&&k.get_help_URL(),u,f,w,c,p,y,C,E,g,z,x,O=function(a){a?($(t).addClass("toontalk-green-flag-active").removeClass("toontalk-green-flag-inactive"),$(e).addClass("toontalk-stop-sign-inactive").removeClass("toontalk-stop-sign-active")):($(t).addClass("toontalk-green-flag-inactive").removeClass("toontalk-green-flag-active"),
$(e).addClass("toontalk-stop-sign-active").removeClass("toontalk-stop-sign-inactive"))},G=function(){var a=n.width();n.height();var b,c,d;0===a?setTimeout(G,100):(a=$(e).width(),b=(b=$(C).width())?b+14:0,$(e).css({right:b}),$(t).css({right:b+a+6}),c=$(t).width(),g&&$(g).css({right:b+a+c+12}),u&&(d=$(g).width()||0,$(u).css({right:b+a+c+d+12})))};E=this.create_description_label(b,k);var A=function(){var a;a=k.get_running()?"To stop this click on the stop sign.":k.can_run()?"Click this to start this running.":
"There is nothing to run on this.";t.title=a},M=function(){var a;a=k.get_running()?"Click to stop this from running.":k.can_run()?"This has stopped. Click on the flag to start running it.":"There is nothing to run here.";e.title=a},L,S;d.TRANSLATION_ENABLED&&(q=d.UTILITIES.add_URL_parameter(q,"translate","1"));k.close_button_ok(a)&&(S=function(a){b.hide_backside(a);a.stopPropagation()},L=(L=k.get_description())?"the "+k.get_type_name()+" who "+L:"the "+k.get_type_name(),C=d.UTILITIES.create_close_button(S,
"Click to hide this back side of "+L+"."),a.appendChild(C));$(t).addClass("toontalk-green-flag toontalk-green-flag-inactive").click(function(a){k.can_run()?(O(!0),k.set_running(!0),M()):k.is_of_type("top-level")?d.UTILITIES.display_message("There is nothing to run."):d.UTILITIES.display_message("This "+k.get_type_name()+" has nothing to run. Add some robots on the back.")}).on("mouseenter",M);$(e).addClass("toontalk-stop-sign toontalk-stop-sign-active").click(function(a){O(!1);k.set_running(!1);A()}).on("mouseenter",
A);a.appendChild(t);a.appendChild(e);q&&(g=document.createElement("div"),$(g).addClass("toontalk-help-button notranslate toontalk-widget-help-button").click(function(a){z=document.createElement("iframe");$(z).addClass("toontalk-help-frame");z.src=q;document.body.appendChild(x);document.body.appendChild(z)}),g.innerHTML="i",g.translate=!1,g.title="Click to learn more about "+k.get_type_name()+".",x=document.createElement("div"),$(x).addClass("toontalk-close-help-frame-button").button().click(function(a){$(z).remove();
$(x).remove()}),x.innerHTML="Return to ToonTalk",a.appendChild(g));E&&a.appendChild(E);k.is_of_type("top-level")&&(u=document.createElement("div"),$(u).addClass("toontalk-settings-button").click(function(a){k.open_settings()}),u.title="Click to change settings or open a different program.",a.appendChild(u));d.UTILITIES.set_timeout(G);n.addClass("toontalk-backside toontalk-side toontalk-backside-of-"+k.get_type_name());n.css({"z-index":d.UTILITIES.next_z_index()});b.get_element=function(){return a};
b.get_widget=function(){return k};b.visible=function(){return f};b.set_visible=function(a){var b=this.get_widget().get_backside_widgets();f=a;b.forEach(function(b){b.set_visible(a)})};k.get_backside||(k.get_backside=function(){return b});b.get_parent_of_backside=function(){return k.get_parent_of_backside()};b.get_parent_of_frontside=function(){return k.get_parent_of_frontside()};b.get_frontside=function(){return k.get_frontside()};b.get_frontside_element=function(){return k.get_frontside_element()};
k.removed_from_container||(k.removed_from_container=function(a,b,c,g,e){d.robot.in_training||this.remove_backside_widget(a,b,e)});b.widget_dropped_on_me=function(b,c,g,e,f){var h=this.get_widget(),l,k,p;c?(l=b.get_backside(!0),k=l.get_element(),l.rerender()):(l=b.get_frontside(!0),k=l.get_element(),b.rerender());l=$(k);n.append(l);this.is_of_type("top-level")?e&&!e.visible()&&l.addClass("toontalk-widget-added-to-backside-by-unwatched-robot"):g||b.animate_to_element(a);d.UTILITIES.set_position_is_absolute(k,
!0,g);d.robot.in_training&&!f&&g&&d.robot.in_training.dropped_on(b,this.get_widget());c&&"top-level"!=this.get_widget().get_type_name()&&(p=b.get_backside(),b.forget_backside(),b.remove(g),b.set_backside(p));h.add_backside_widget(b,c);b.dropped_on_other&&b.dropped_on_other(this.get_widget(),!0,g);b.get_body&&b.get_body().is_empty()&&!b.being_trained&&setTimeout(function(){(p=b.open_backside())&&$(p.get_element()).find(".toontalk-train-backside-button").click()});g&&b.get_widget().backup_all();return!0};
b.add_backside_widgets=function(a,b){0!==a.length&&d.UTILITIES.set_timeout(function(){var c,d,g=this.visible();a.forEach(function(a,e){var f=a.get_widget().get_backside();c=a.get_element(!0);c.toontalk_widget=a.get_widget();b&&(d=b[e])&&(a.is_backside()?($(c).css({left:d.backside_left,top:d.backside_top,width:d.backside_width,height:d.backside_height}),a.get_widget().apply_backside_geometry(),d.advanced_settings_open&&f.set_advanced_settings_showing(!0,f.get_element())):(0===d.frontside_width&&(d.frontside_width=
""),0===d.frontside_height&&(d.frontside_height=""),$(c).css({left:d.frontside_left,top:d.frontside_top,width:d.frontside_width,height:d.frontside_height})));n.append(c);a.set_visible(g);a.get_widget().rerender()})}.bind(this))};b.get_backside_dimensions=function(){if(l)return{x_scale:l,y_scale:h,original_width:w,original_height:c}};b.set_dimensions=function(a){l=a.x_scale;h=a.y_scale;w=a.original_width;c=a.original_height};b.scale_to_fit=function(a,b){var g;!w&&this.get_widget().backside_geometry&&
(w=this.get_widget().backside_geometry.original_width,c=this.get_widget().backside_geometry.original_height);g=d.UTILITIES.scale_to_fit(a,b,w,c);l=g.x_scale;h=g.y_scale};b.run_status_changed=function(a){O(a)};a.toontalk_widget=k;d.UTILITIES.drag_and_drop(a);n.resizable({start:function(){p=n.width();y=n.height();w||(w=p);c||(c=y)},resize:function(a,b){var g=b.size.width,e=b.size.height;n.is(".toontalk-top-level-backside")||(l*=g/p,h*=e/y,p=g,y=e,d.backside.scale_backside(n,l,h,w,c))},handles:"e,s,se"});
a.addEventListener("mouseenter",function(a){a=k.get_frontside();var b=k.get_parent_of_backside();!a||b&&!b.get_widget().is_of_type("top-level")||d.UTILITIES.highlight_element(a.get_element())});a.addEventListener("mouseleave",function(a){k.is_of_type("top-level")||d.UTILITIES.remove_highlight()});b.update_display=function(){b.display_updated()};b.display_updated=function(){var a=$(this.get_element());w||(w=a.width());c||(c=a.height())};k.get_backside_widgets&&(E=k.get_backside_widgets(),b.add_backside_widgets(E,
k.get_backside_widgets_json_views()));d.debugging&&(a.id=k.debug_id);return b},toString:function(){return"backside of "+this.get_widget()},remove_element:function(){$(this.get_element()).remove()},create_infinite_stack_check_box:function(k,b){var a=d.UTILITIES.create_check_box(b.get_infinite_stack(),"toontalk-infinite-stack-check-box","Copy when dragged.","Check this if you want the "+b.get_type_name()+" to be copied instead of moved.");$(a.button).click(function(k){var l=a.button.checked;b.set_infinite_stack(l);
d.robot.in_training&&d.robot.in_training.edited(b,{setter_name:"set_infinite_stack",argument_1:l,toString:l?"change dragging to make a copy of ":"change dragging back to moving for ",button_selector:".toontalk-infinite-stack-check-box"});k.stopPropagation()});return a},create_description_label:function(k,b){var a=b.get_description();if(a)return d.UTILITIES.create_text_element("Back side of a "+b.get_type_name()+" that "+a)},add_advanced_settings:function(k){var b=this.get_widget(),a=this.create_infinite_stack_check_box(this,
b),n=b.get_type_name(),l=d.UTILITIES.create_text_area(b.get_description(),"toontalk-description-input","This&nbsp;"+n+"&nbsp;","Type here to provide additional information about this "+n+"."),h=$("<button>Make a sensor</button>").button(),t=function(){var a=l.button.value.trim();b.set_description(a,!0)&&d.robot.in_training&&d.robot.in_training.edited(b,{setter_name:"set_description",argument_1:a,toString:"change the description to '"+a+"'' of the "+n,button_selector:".toontalk-description-input"})},
e=document.createElement("table"),q=this.get_element();$(e).addClass("toontalk-advanced-setting");$(l.button).val(b.get_description());l.button.addEventListener("change",t);l.button.addEventListener("mouseout",t);h.click(function(a){a=d.sensor.create("click","which",void 0,void 0,!0,b);var e=a.get_frontside_element(!0),l=h.offset();b.add_to_top_level_backside(a,!0);l.left-=120;d.UTILITIES.set_absolute_position($(e),l)});h.attr("title","Click to create a nest which receives messages when events happen to this "+
b.get_type_name()+".");e.appendChild(d.UTILITIES.create_row(l.container));e.appendChild(d.UTILITIES.create_row(h.get(0),a.container));q.appendChild(e);k?$(q).find(".toontalk-settings-backside-button").remove():$(q).find(".toontalk-advanced-setting").hide()},get_type_name:function(){return"the backside of "+d.UTILITIES.add_a_or_an(this.get_widget().get_type_name())},hide_backside:function(k){var b=this.get_widget(),a=b.get_frontside_element(),n=$(b.get_backside_element()),l=n.position(),h=n.parent().closest(".toontalk-backside"),
t=b.get_parent_of_backside();d.UTILITIES.remove_highlight();t&&(t.is_backside()?b.set_parent_of_backside(void 0,!0):t.removed_from_container(b,!0,k,void 0,!0),b.forget_backside&&b.forget_backside());(function(){var a=b.get_backside_widgets(),d=b.get_backside_widgets_json_views(!0),h;a.forEach(function(a,b){a.get_widget();var c;if(h=a.get_element())d[b]||(d[b]={}),a.start_position?(c=a.start_position,a.start_position=void 0):c=$(h).position(),a.is_backside()?(d[b].backside_left=c.left,d[b].backside_top=
c.top):(d[b].frontside_left=c.left,d[b].frontside_top=c.top)})})();b.backside_geometry=this.get_backside_dimensions();(function(b){var l=$(a).offset(),k=h.position(),f=function(){b.remove()};b.is(":visible")&&(b.addClass("toontalk-side-appearing"),d.UTILITIES.add_one_shot_event_handler(b.get(0),"transitionend",2500,f),k||(k={left:0,top:0}),b.css({left:l.left-k.left,top:l.top-k.top,opacity:.1}))})(n);!$(a).is(":visible")&&(l&&$(a).css({left:l.left,top:l.top}),k=d.UTILITIES.widget_from_jquery(h))&&
(k.add_backside_widget(b),h.append(a),b.render());b.backside_widgets&&b.backside_widgets.forEach(function(a){a.set_visible(!1)})},create_advanced_settings_button:function(k,b){var a=document.createElement("div"),n=$(a),l=!1;a.innerHTML="&gt;";n.addClass("toontalk-settings-backside-button");n.css({"z-index":d.UTILITIES.next_z_index()});n.click(function(a){l=!l;this.set_advanced_settings_showing(l,k.get_element(),n);a.stopPropagation()}.bind(this));n.attr("title","Click to see the advanced settings of this "+
b.get_type_name()+".");return n.get(0)},set_advanced_settings_showing:function(d,b,a){a||(a=$(b).find(".toontalk-settings-backside-button"));d?($(b).find(".toontalk-advanced-setting").show(),a.html("<"),a.attr("title","Click to hide the advanced settings.")):($(b).find(".toontalk-advanced-setting").hide(),a.html(">"),a.attr("title","Click to show the advanced settings."))},get_widgets:function(){var d=[];$(this.get_element()).children().each(function(b,a){var n=a.toontalk_widget;n&&0>d.indexOf(n)&&
d.push(n)});return d},scale_backside:function(d,b,a,n,l){var h=Math.min(1,b,a);1===b&&1===a?d.css({width:"",height:""}):d.css({transform:"scale("+h+", "+h+")","transform-origin":"top left",width:n*b/h,height:l*a/h})},render:function(){d.DISPLAY_UPDATES.pending_update(this)},rerender:function(){this.visible()&&d.DISPLAY_UPDATES.pending_update(this)},remove_backside_widget:function(d,b,a){return this.get_widget().remove_backside_widget(d,b,a)},remove:function(){this.get_widget().remove()},is_backside:function(){return!0},
get_parent:function(){return this.get_parent_of_backside()},is_of_type:function(d){return this.get_widget().is_of_type(d)},save_dimensions:function(){return!1}}}(window.TOONTALK);window.TOONTALK.frontside=function(d){return{create:function(k){var b=Object.create(this),a=document.createElement("div"),n=$(a),l=function(a){$(a.target).is(".ui-resizable-handle")||"click"===a.type&&1!==a.which||(n.is(".toontalk-top-level-resource")?k.set_running(!k.get_running()):k.get_running()?d.debugging&&d.UTILITIES.display_message("Clicks on running widgets are ignored. If you wish to see its backside then stop it and click again."):k.open_backside(),a.stopPropagation())},h;$(a).addClass("toontalk-frontside toontalk-side");
a.toontalk_widget=k;d.UTILITIES.drag_and_drop(a);b.get_element=function(){return a};b.get_widget=function(){return k};b.visible=function(){return h};b.set_visible=function(a){var b=this.get_widget();h=a;b.walk_children&&b.walk_children(function(b){b.set_visible(a);return!0})};a.addEventListener("click",l);a.addEventListener("touchstart",l);a.addEventListener("mouseenter",function(a){(a=k.get_backside())&&d.UTILITIES.highlight_element(a.get_element())});a.addEventListener("mouseleave",function(a){k.get_backside()&&
d.UTILITIES.remove_highlight()});d.debugging&&(a.id=k.debug_id);return b},update_display:function(){return this.get_widget().update_display()},remove:function(){$(this.get_element()).remove()}}}(window.TOONTALK);window.TOONTALK.number=function(d){var k=Object.create(d.widget),b=function(a,b,d,e){var f="",g=100;d=50/d;b/=1+b;if(e)for(e=0;g>=d&&e<a.length;)f=f+"<span class='toontalk-digit' style='font-size:"+g+"%'>"+a[e]+"</span>",e+=1,"-"!==a[e]&&(g*=b);else for(e=a.length-1;g>=d&&0<e;)f="<span class='toontalk-digit' style='font-size:"+g+"%'>"+a[e]+"</span>"+f,--e,"-"!==a[e]&&(g*=b);return f},a=function(a,b){var d=a/(1+a);return Math.ceil(Math.log(.5/b)/Math.log(d))},n=function(a,d,e){if(a.length<=Math.round(d))return'<span class="toontalk-digit" style="font-size:100%">'+
a+"</span>";if(1>d)return"";if(5>d)return"<span style='font-size: 80%'>"+n(a,1.25*d,.8*e)+"</span>";d=d/2-1;return b(a,d,e,!0)+b(a,d,e,!1)},l=function(a,b,d){var e="",f=new BigInteger(10),g=a.isNegative();for(g&&(a=a.abs());d>e.length;)if(a=a.multiply(f),0>a.compare(b))e+="0";else if(e+=a.divide(b).toString(),a=a.remainder(b).multiply(f),a.isZero())return g&&(e="-"+e),e=h(e);g&&(e="-"+e);return e},h=function(a){return 0<a.length&&"0"===a.charAt(a.length-1)?h(a.substring(0,a.length-1)):a},t=function(a,
b){var d=Math.min(b,a/2);return a-(d+1)},e=function(a,b){b||(b=1);if(!("number"!==typeof a&&"string"!==typeof a||"number"!==typeof b&&"string"!==typeof b))return bigrat.fromValues(a,b);var d=bigrat.create();1===b?bigrat.set(d,bigrat.toBigInteger(a.get_value()),BigInteger.ONE):a.get_value&&b.get_value?bigrat.set(d,bigrat.toBigInteger(a.get_value()),bigrat.toBigInteger(b.get_value())):bigrat.set(d,a,b);return d},q=function(a){switch(a){case "+":return"";case "-":return"&minus;";case "*":return"&times;";
case "/":return"&divide;";case "^":return"^";default:return d.UTILITIES.report_internal_error("Number has an unsupported operator: "+a),""}},u=Math.log(10),f=Math.log10?Math.log10:function(a){return Math.log(a)/u},w=bigrat.fromInteger(10);k.create=function(a,b,f,h,l){var g=Object.create(k),n=e(a,b);h||(h="improper_fraction");f||(f="+");g.set_value=function(a){if(!bigrat.equals(n,a))return this.fire_value_change_listeners(n,a),n=a,this.rerender(),d.debugging&&(this.debug_string=this.toString()),this};
g.set_value_from_sub_classes=g.set_value;g.fire_value_change_listeners=function(a,b){var c=this.get_listeners("value_changed"),d;c&&(d={type:"value_changed",old_value:a,new_value:b},c.forEach(function(a){a(d)}))};g.get_value=function(){return n};g.set_value_from_decimal=function(a){"number"===typeof a?this.set_value(bigrat.fromInteger(a)):this.set_value(bigrat.fromDecimal(a))};g.get_format=function(){return h};g.set_format=function(a,b){h=a;b&&this.rerender();return this};g.get_operator=function(){return f};
g.set_operator=function(a,b){f=a;b&&this.rerender();return this};g=k.add_standard_widget_functionality(g);g.set_description(l);d.debugging&&(g.debug_string=g.toString(),g.debug_id=d.UTILITIES.generate_unique_id(),n.debug_id_new=g.debug_id);return g};k.create_backside=function(){return d.number_backside.create(this)};k.set_from_values=function(a,b){return this.set_value(e(a,b))};k.ONE=function(){return this.create(1)};k.ZERO=function(){return this.create(0)};k.copy=function(a){return this.add_to_copy(k.create(this.get_value()[0],
this.get_value()[1],this.get_operator(),this.get_format(),this.get_description()),a)};k.is_number=function(){return!0};k.equals=function(a){return a.equals_number&&a.equals_number(this)};k.equals_number=function(a){return bigrat.equals(this.get_value(),a.get_value())};k.compare_with=function(a){if(a.compare_with_number)return-1*a.compare_with_number(this)};k.compare_with_number=function(a){return bigrat.equals(this.get_value(),a.get_value())?0:bigrat.isGreaterThan(this.get_value(),a.get_value())?
1:-1};k.update_display=function(){var a,b,e,f,h;a=this.get_frontside(!0).get_element();$(a).is(".toontalk-conditions-contents")?b=$(a):$(a).parent().is(".toontalk-backside, .toontalk-json")?(b=$(a),h=!0):b=$(a).parent().is(".toontalk-scale-half")?$(a):$(a).parent();if($(a).is(".toontalk-carried-by-bird"))e=100,f=40;else if($(a).is(".toontalk-element-attribute"))e=200,f=32;else{if(!b.is(":visible"))return;e=b.width();f=b.height();if(0===e||0===f)return;b.is(".toontalk-nest")&&(e*=.8,f*=.8)}$(a).removeClass("toontalk-number-eighth-size-border toontalk-number-quarter-size-border toontalk-number-half-size-border toontalk-number-full-size-border");
32>=e||32>=f?($(a).addClass("toontalk-number-eighth-size-border"),a.toontalk_border_size=4):64>=e||64>=f?($(a).addClass("toontalk-number-quarter-size-border"),a.toontalk_border_size=8):128>=e||128>=f?($(a).addClass("toontalk-number-half-size-border"),a.toontalk_border_size=16):($(a).addClass("toontalk-number-full-size-border"),a.toontalk_border_size=32);b=f-2*a.toontalk_border_size;h=this.to_HTML(e/(.64*b),b,this.get_format(),!0,this.get_operator(),h);d.UTILITIES.on_a_nest_in_a_box(a)&&(e="width:"+
e+"px;",b=h.indexOf('style="'),h=0<=b?h.substring(0,b+7)+e+h.substring(b+7):h);e=$(a).children(".toontalk-widget");e.is("*")?e=e.get(0):(e=document.createElement("div"),a.appendChild(e));e.innerHTML=h;e.translate=!1;$(e).addClass("toontalk-widget notranslate");a.title=this.get_title();(a=this.get_backside())&&a.rerender()};k.to_HTML=function(c,d,e,h,k,g){var z,x,u,G,A,M,L=!1!==h?" toontalk-top-level-number":"";g&&(L+=" toontalk-number-size-unconstrained-by-container");x=k?q(k):"";c||(c=4);d||(d=16);
if(this.get_erased&&this.get_erased())return'<div class="toontalk-number toontalk-integer'+L+'" style="font-size: '+d+'px;"></div>';0<x.length&&(--c,2>c&&(d*=Math.max(1,c)/2,c=2));if(this.is_integer()&&"scientific_notation"!==e)return z=bigrat.toBigInteger(this.get_value()).toString(),u=z.length,0<x.length&&u++,4>c&&u>c&&(u=Math.min(4,u),d*=c/u,c=u),'<div class="toontalk-number toontalk-integer'+L+'" style="font-size: '+d+'px;">'+x+n(z,c,d)+"</div>";z=' style="font-size:'+.4*d+'px;"';if("improper_fraction"===
e||!e)return d='<table class="toontalk-number toontalk-improper-fraction'+L+'"'+z+'><tr class="toontalk-numerator"><td align="center" class="toontalk-number">'+n(this.numerator_string(),2*c,d)+'</td></tr><tr class="toontalk-fraction-line-as-row"><td  class="toontalk-fraction-line-as-table-entry"><div class="toontalk-fraction-line"></div></tr><tr class="toontalk-denominator"><td align="center" class="toontalk-number">'+n(this.denominator_string(),2*c,d)+"</td></tr></table>",""===x?d:"<table class='toontalk-operator-and-fraction'"+
z+"><tr><td>"+x+"</td><td>"+d+"</td></tr></table>";if("mixed_number"===e||"proper_fraction"===e){x=this.integer_part();if(x.is_zero())return this.to_HTML(c,d,"improper_fraction",h,k);u=this.copy({just_value:!0}).subtract(x).absolute_value();return'<table class="toontalk-number toontalk-mixed-number'+L+'"'+z+'><tr><td class="toontalk-number toontalk-integer-part-of-mixed-number">'+x.to_HTML(c/2,d,"",!1,this.get_operator())+'</td><td class="toontalk-number toontalk-fraction-part-of-mixed-number">'+
u.to_HTML(c/2,d,"improper_fraction",!1)+"</td></tr></table>"}if("decimal"===e)return 4>c&&(d*=Math.max(1,c)/4,c=4),'<div class="toontalk-number toontalk-decimal'+L+'" style="font-size: '+d+'px;">'+x+this.decimal_string(c,d)+"</div>";if("scientific_notation"===e){u=bigrat.isNegative(this.get_value());G=this.get_value();A=bigrat.abs(bigrat.create(),G);G=bigrat.isLessThan(A,bigrat.ONE);A=(G?bigrat.toBigInteger(bigrat.divide(bigrat.create(),bigrat.ONE,A)):bigrat.toBigInteger(A)).toString();G=G?-A.length:
A.length-1;A=bigrat.power(bigrat.create(),w,G);M=bigrat.divide(bigrat.create(),this.get_value(),A);A=6+(0===G?1:Math.ceil(f(Math.abs(G)))/2);u&&A++;if(c<A+1)return this.to_HTML(A+1,d*c/(A+1),e,h,k,g);h=a(t(c,A),d);h=l(M[0],M[1],h);u?(u=h.substring(0,2),h=h.substring(2)):(u=h.substring(0,1),h=h.substring(1));c=b(h,c*(1-A/c),d,!0);0<c.length&&(c="<span class='toontalk-decimal-point'>.</span>"+c);return'<table class="toontalk-number toontalk-scientific_notation'+L+'"'+z+'><tr><td class="toontalk-number toontalk-significand-of-scientific-notation"><div class="toontalk-number toontalk-decimal'+
L+'" style="font-size: '+d+'px;">'+x+u+c+'</td><td class="toontalk-number toontalk-exponent-of-scientific-notation"><div style="font-size: '+d+'px;"> &times;10<sup style="font-size: '+d/2+'px;">'+G+"</sup></div></td></tr></table>"}};k.drop_on=function(a,b,d,e){if(a.number_dropped_on_me)return a.number_dropped_on_me(this,b,d,e),!0;if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,b,d,e);console.log("No handler for drop of '"+this+"' on '"+a+"'")};k.number_dropped_on_me=function(a,b,e,f){var h,
g,l,k;return a.visible()&&(e||f&&f.visible())?(f&&(a.robot_waiting_before_next_step=f),h=document.createElement("div"),$(h).addClass("toontalk-bammer-down"),g=$(this.get_frontside_element()).closest(".toontalk-top-level-backside"),h.style.left="-10px",h.style.top=g.height()+"px",g.append(h),b=this.get_frontside_element(),l=$(b).offset(),l.left-=.75*$(h).width(),l.left+=.5*$(b).width()+.1*$(h).width(),l.top-=.5*$(b).height()+.4*$(h).height(),b=function(){this.number_dropped_on_me_semantics(a,e,f)&&
f&&f.run_next_step();e&&this.backup_all();$(h).removeClass("toontalk-bammer-down");d.UTILITIES.set_timeout(function(){var a=g.offset();a||(a={left:0,top:0});$(h).addClass("toontalk-bammer-away");l.left=a.left+g.width()-100;l.top=a.top+g.height()+100;k=function(){$(h).remove()};d.UTILITIES.animate_to_absolute_position(h,l,k);$(h).css({opacity:.01})})}.bind(this),d.UTILITIES.animate_to_absolute_position(h,l,b),$(h).css({opacity:1,"z-index":d.UTILITIES.next_z_index()+100}),this):this.number_dropped_on_me_semantics(a,
e,f)};k.number_dropped_on_me_semantics=function(a,b,e){d.robot.in_training&&b&&d.robot.in_training.dropped_on(a,this);a.remove();switch(a.get_operator()){case "+":return this.add(a);case "-":return this.subtract(a);case "*":return this.multiply(a);case "/":return this.divide(a);case "^":return this.power(a);default:d.UTILITIES.report_internal_error("Number received a number with unsupported operator: "+a.get_operator())}};k.widget_dropped_on_me=function(a,b,d,e){return a.number_dropped_on_me?this.number_dropped_on_me(a,
b,d,e):!1};k.add=function(a){this.set_value(bigrat.add(bigrat.create(),this.get_value(),a.get_value()));return this};k.subtract=function(a){this.set_value(bigrat.subtract(bigrat.create(),this.get_value(),a.get_value()));return this};k.multiply=function(a){this.set_value(bigrat.multiply(bigrat.create(),this.get_value(),a.get_value()));return this};k.divide=function(a){this.set_value(bigrat.divide(bigrat.create(),this.get_value(),a.get_value()));return this};k.power=function(a){this.set_value(bigrat.power(bigrat.create(),
this.get_value(),bigrat.toInteger(a.get_value())));return this};k.absolute_value=function(){this.set_value(bigrat.abs(bigrat.create(),this.get_value()));return this};k.is_zero=function(){return bigrat.equals(this.get_value(),bigrat.ZERO)};k.is_negative=function(){return bigrat.isNegative(this.get_value())};k.toString=function(){return this.get_erased()?"erased number":("+"===this.get_operator()?"":this.get_operator())+bigrat.str(this.get_value())};k.to_float=function(){return bigrat.toDecimal(this.get_value())};
k.get_type_name=function(){return"number"};k.get_help_URL=function(){return"docs/manual/numbers.html"};k.get_json=function(){return{type:"number",operator:this.get_operator(),numerator:this.numerator_string(),denominator:this.denominator_string(),format:this.get_format()}};d.creators_from_json.number=function(a){return k.create(a.numerator,a.denominator,a.operator,a.format,a.description)};k.is_integer=function(){return 0===this.get_value()[1].compare(BigInteger.ONE)||0===this.get_value()[0].compare(BigInteger.ZERO)};
k.numerator=function(){var a=bigrat.create();return bigrat.set(a,this.get_value()[0],BigInteger.ONE)};k.denominator=function(){var a=bigrat.create();return bigrat.set(a,this.get_value()[1],BigInteger.ONE)};k.numerator_string=function(){return this.get_value()[0].toString()};k.denominator_string=function(){return this.get_value()[1].toString()};k.integer_part=function(){return this.create(this)};k.decimal_string=function(c,d){if(this.is_integer())return this.numerator_string();var e=k.copy.call(this),
f=e.integer_part(),h=f.toString();"0"===h&&this.is_negative()&&(h="-"+h);var g=e.subtract(f),f=t(c,h.length),z=a(f,d),e=Math.min(h.length,c/2),g=g.absolute_value(),z=l(g.get_value()[0],g.get_value()[1],z),f=z.length<c?z:b(z,f,d,!0);return n(h,e,d)+"<span class='toontalk-decimal-point'>.</span>"+f};k.match=function(a){return this.get_erased&&this.get_erased()?a.match_with_any_number?a.match_with_any_number():this:a.match_with_this_number?a.match_with_this_number(this):this};k.match_with_any_number=
function(){return"matched"};k.match_with_this_number=function(a){return a.equals(this)?"matched":a};k.get_custom_title_prefix=function(){return"Drop another number on me and I'll add it to my value (unless it has been changed so that I'll subtract, multiply, or divide instead)."};return k}(window.TOONTALK);
window.TOONTALK.number_backside=function(d){return{create:function(k){var b=d.backside.create(k),a=b.get_element(),n=document.createElement("div"),l=k.numerator_string(),h=k.denominator_string(),t=d.UTILITIES.create_text_area(l,"toontalk-numerator-input","","Type here to edit the numerator","number"),e=d.UTILITIES.create_text_area(h,"toontalk-denominator-input","","Type here to edit the denominator","number"),q=d.UTILITIES.create_radio_button("number_format","decimal","toontalk-decimal-radio-button",
"Decimal number","Display number as a decimal."),u=d.UTILITIES.create_radio_button("number_format","proper_fraction","toontalk-proper-fraction-radio-button","Mixed number","Display number as an integer part and a proper fraction."),f=d.UTILITIES.create_radio_button("number_format","improper_fraction","toontalk-improper-fraction-radio-button","Improper fraction","Display number as a simple fraction."),w=d.UTILITIES.create_radio_button("number_format","scientific_notation","toontalk-scientific-notation-radio-button",
"Scientific notation","Display number as a decimal between 1 and 10 multiplied by ten to some power."),c=d.UTILITIES.create_radio_button("operator","+","toontalk-plus-radio-button","+","Add me to what I'm dropped on."),p=d.UTILITIES.create_radio_button("operator","-","toontalk-minus-radio-button","&minus;","Subtract me from what I'm dropped on."),y=d.UTILITIES.create_radio_button("operator","*","toontalk-times-radio-button","&times;","Multiply me with what I'm dropped on."),C=d.UTILITIES.create_radio_button("operator",
"/","toontalk-dividie-radio-button","&divide;","Divide me into what I'm dropped on."),E=d.UTILITIES.create_radio_button("operator","^","toontalk-power-radio-button","Integer power","Use me as the number of times to multiply together what I'm dropped on."),g=function(a){var b=t.button.value.trim(),c=e.button.value.trim();if(b!==l||c!==h)k.set_from_values(b,c),l=b,h=c,d.robot.in_training&&(a=a.srcElement.className.split(" ",1)[0],d.robot.in_training.edited(k,{setter_name:"set_from_values",argument_1:b,
argument_2:c,toString:"toontalk-denominator-input"===a?"change value of the denominator to "+c+" of the number":"change value of the numerator to "+b+" of the number",button_selector:"."+a}))},z=function(){var a=d.UTILITIES.selected_radio_button(q.button,u.button,f.button,w.button),b=a.value;k.set_format(b,!0);d.robot.in_training&&d.robot.in_training.edited(k,{setter_name:"set_format",argument_1:b,toString:"change the format to "+b+" of the number",button_selector:"."+a.className.split(" ",1)[0]})},
x=function(){var a=d.UTILITIES.selected_radio_button(c.button,p.button,y.button,C.button,E.button),b=a.value;k.set_operator(b,!0);d.robot.in_training&&d.robot.in_training.edited(k,{setter_name:"set_operator",argument_1:b,toString:"change the operator to "+b+" of the number",button_selector:"."+a.className.split(" ",1)[0]})},O=d.UTILITIES.create_horizontal_table(t.container,n,e.container),G=$(d.UTILITIES.create_horizontal_table(q.container,u.container,f.container,w.container)).buttonset().get(0),A=
$(d.UTILITIES.create_horizontal_table(c.container,p.container,y.container,C.container,E.container)).buttonset().get(0),M=d.backside.create_advanced_settings_button(b,k),L=b.update_display;n.innerHTML="/";$(n).addClass("ui-widget");a.appendChild(O);a.appendChild(M);t.button.addEventListener("change",g);t.button.addEventListener("mouseout",g);t.button.addEventListener("mouseenter",function(){l=t.button.value.trim()});e.button.addEventListener("change",g);e.button.addEventListener("mouseout",g);e.button.addEventListener("mouseenter",
function(){h=e.button.value.trim()});q.button.addEventListener("change",z);u.button.addEventListener("change",z);f.button.addEventListener("change",z);w.button.addEventListener("change",z);switch(k.get_format()){case "decimal":d.UTILITIES.check_radio_button(q);break;case "improper_fraction":d.UTILITIES.check_radio_button(f);break;case "mixed_number":case "proper_fraction":d.UTILITIES.check_radio_button(u);break;case "scientific_format":d.UTILITIES.check_radio_button(w)}switch(k.get_operator()){case "+":d.UTILITIES.check_radio_button(c);
break;case "-":d.UTILITIES.check_radio_button(p);break;case "*":d.UTILITIES.check_radio_button(y);break;case "/":d.UTILITIES.check_radio_button(C);break;case "^":d.UTILITIES.check_radio_button(E)}c.button.addEventListener("change",x);p.button.addEventListener("change",x);y.button.addEventListener("change",x);C.button.addEventListener("change",x);E.button.addEventListener("change",x);b.update_display=function(){$(t.button).val(k.numerator_string());$(e.button).val(k.denominator_string());L()};$(G).addClass("toontalk-advanced-setting");
$(A).addClass("toontalk-advanced-setting");a.appendChild(G);a.appendChild(A);b.add_advanced_settings();return b}}}(window.TOONTALK);window.TOONTALK.box=function(d){var k=Object.create(d.widget);k.create=function(b,a,n,l){var h=Object.create(k),t=[],e;"undefined"===typeof a&&(a=!0);h.get_horizontal=function(){return a};h.set_horizontal=function(b,d){a=b;d&&($(this.get_frontside_element()).children(".toontalk-side").remove(),this.rerender());return this};h.get_hole=function(a){return t[a]};h.get_hole_contents=function(a){return t[a].get_contents()};h.set_hole=function(a,b,e){t[a].set_contents(b);e&&(b&&b.save_dimensions(),this.update_hole_display(a,
b));this.rerender();d.debugging&&(this.debug_string=this.toString())};h.get_holes=function(){return t};h.temporarily_remove_contents=function(a,b){var d=this.get_index_of(a);this.temporarily_removed_contents||(this.temporarily_removed_contents=[]);this.temporarily_removed_contents[d]=a;this.set_hole(d,void 0,b);return function(){this.set_hole(d,a,b);this.temporarily_removed_contents[d]=void 0}.bind(this)};h.get_contents_temporarily_removed=function(a){if(this.temporarily_removed_contents)return this.temporarily_removed_contents[a]};
h.set_contents=function(a){a.forEach(function(a,b){t[b].set_contents(a)})};h.get_size=function(){return b};h.set_size=function(a,e){var f;if(b===a||0>a||isNaN(a))return!1;t.length=a;if(a>b)for(f=b;f<a;f++)t[f]=d.box_hole.create(f),t[f].set_parent_of_frontside(h);b=a;e&&this.rerender();d.debugging&&(this.debug_string=this.toString());return!0};h.copy=function(d){var e;d||(d={});e=t.map(function(a){if(a=a.get_contents())return a.copy(d)});e=k.create(b,a,e,this.get_description());return this.add_to_copy(e,
d)};h=h.add_standard_widget_functionality(h);for(e=0;e<b;e++)t[e]=d.box_hole.create(e),t[e].set_parent_of_frontside(h);h.set_description(l);h.set_contents(n);d.debugging&&(h.debug_string=h.toString(),h.debug_id=d.UTILITIES.generate_unique_id());return h};k.create_backside=function(){return d.box_backside.create(this)};k.equals=function(b){return b.equals_box&&b.equals_box(this)};k.equals_box=function(b){var a=this.get_size(),d,l,h;if(a!==b.get_size())return!1;for(d=0;d<a;d++)if(l=this.get_hole_contents(d),
h=b.get_hole_contents(d),!l&&h||l&&!h||l&&h&&(!l.equals||!l.equals(h)))return!1;return!0};k.compare_with=function(b){if(b.compare_with_box)return-1*b.compare_with_box(this)};k.compare_with_box=function(b){var a=this.get_size(),d=b.get_size(),l,h;if(a>d)return 1;if(a<d)return-1;for(d=0;d<a;d++){l=this.get_hole_contents(d);h=b.get_hole_contents(d);if(l&&!h)return 1;if(!l&&h)return-1;if(l&&h)if(l.compare_with){if(l=l.compare_with(h),1===l||-1===l)return l}else return}return 0};k.match=function(b){return this.get_erased&&
this.get_erased()?b.match_with_any_box?b.match_with_any_box():this:b.match_with_this_box?b.match_with_this_box(this):this};k.match_with_any_box=function(){return"matched"};k.match_with_this_box=function(b){var a=this.get_size(),k=[],l,h,t;if(a!==b.get_size())return b;for(l=0;l<a;l++)if(t=b.get_hole_contents(l))if(h=this.get_hole_contents(l)){h=d.UTILITIES.match(t,h);if(h.is_widget)return h;"matched"!==h&&(k=0===k.length?h:k.concat(h))}else if(h=this.get_contents_temporarily_removed(l))k.push(h);else return b;
return 0<k.length?k:"matched"};k.toString=function(){var b="",a=this.get_size(),d,l,h=this.get_type_name()+" that looks like ";for(d=0;d<a;d++)l=this.get_hole(d),b+=l.get_full_description(),d<a-1&&(b+=" | ");return h+"["+b.replace(h,"")+"]"};k.get_type_name=function(){return"box"};k.get_help_URL=function(){return"docs/manual/boxes.html"};k.get_json=function(b){var a=[],k=this.get_size(),l;for(l=0;l<k;l++)this.get_hole_contents(l)?a[l]=d.UTILITIES.get_json(this.get_hole_contents(l),b):a[l]=null;return{type:"box",
size:k,contents:a,horizontal:this.get_horizontal()}};k.walk_children=function(b){var a=this.get_size(),d;for(d=0;d<a&&b(this.get_hole(d));d++);};d.creators_from_json.box=function(b,a){return k.create(b.size,b.horizontal,d.UTILITIES.create_array_from_json(b.contents,a),b.description)};k.render=function(){var b=this.get_parent_of_frontside();b&&b.is_of_type("empty hole")&&b.get_parent_of_frontside().render();d.DISPLAY_UPDATES.pending_update(this)};k.update_display=function(){var b=this.get_frontside(!0).get_element(),
a=this.get_size(),k=function(b,e,h){var k=e.get_frontside_element(!0),g,n,x,t;l?(n=0,0<$(b).parents(".toontalk-box-hole").length?(x=q-2*c/a,t=f-2*c):(x=q,t=f),g=x*h,1<h&&(g+=c*(h-1))):(g=0,0<$(b).parents(".toontalk-box-hole").length?(x=q-2*c,t=f-2*c/a):(x=q,t=f),n=t*h,1<h&&(n+=c*(h-1)));$(b).css({left:g,top:n,width:x,height:t});b!==k&&($(k).css({left:0,top:0,width:"",height:""}),b.appendChild(k));d.UTILITIES.has_animating_image(k)||(0<h&&($(b).removeClass("toontalk-box-eighth-size-border-left toontalk-box-quarter-size-border-left toontalk-box-half-size-border-left toontalk-box-full-size-border-left"),
$(b).removeClass("toontalk-box-eighth-size-border-top toontalk-box-quarter-size-border-top toontalk-box-half-size-border-top toontalk-box-full-size-border-top"),l?$(b).addClass(w+"-left"):$(b).addClass(w+"-top")),b.toontalk_border_size=c);e.render()},l=this.get_horizontal();$(b).is(".toontalk-box");var h=function(){var c=$(b).children(".toontalk-box-hole");c.length===a?c.each(function(a,b){var c=this.get_hole(a);c&&k(b,c,a)}.bind(this)):(c.remove(),this.get_holes().forEach(function(a,c){t=a.get_element();
$(t).addClass("toontalk-hole-number-"+c);k(t,a,c);b.appendChild(t)}))}.bind(this),t,e,q,u,f,w,c;$(b).addClass("toontalk-box");$(b).removeClass("toontalk-box-eighth-size-border toontalk-box-quarter-size-border toontalk-box-half-size-border toontalk-box-full-size-border");b.title=this.get_title();d.debugging&&(this.debug_string=this.toString());this.get_erased()?($(b).addClass("toontalk-box-erased"),$(b).children(".toontalk-side").remove()):($(b).removeClass("toontalk-box-erased"),e=$(b).width(),u=
$(b).height(),l?(q=e/a,f=u):(q=e,f=u/a),32>=q||32>=f?(w="toontalk-box-eighth-size-border",c=4):64>=q||64>=f?(w="toontalk-box-quarter-size-border",c=8):128>=q||128>=f?(w="toontalk-box-half-size-border",c=16):(w="toontalk-box-full-size-border",c=32),l?q-=(a-1)*c/a:f-=(a-1)*c/a,$(b).addClass(w),b.toontalk_border_size=c,d.UTILITIES.set_timeout(h))};k.update_hole_display=function(b,a){var d=this.get_frontside_element(),d=$(d).children(".toontalk-hole-number-"+b),l;d.empty();a&&(l=a.get_frontside_element(!0),
d.append(l),$(l).css({left:0,top:0}),a.rerender())};k.drop_on=function(b,a,d){if(b.box_dropped_on_me)return a=b.box_dropped_on_me(this,d),d&&b.rerender(),this.remove(),a;if(b.widget_dropped_on_me)return b.widget_dropped_on_me(this,a,d);console.log("No handler for drop of "+this+" on "+b)};k.box_dropped_on_me=function(b,a){console.log("box on box not yet implemented");return!1};k.widget_dropped_on_me=function(b,a,k,l){var h=this.which_hole(k),t;if(0<=h)return t=this.get_hole(h),(h=t.get_contents())?
b.drop_on(h,a,k,l):t.widget_dropped_on_me(b,a,k,l);d.UTILITIES.report_internal_error(b+" dropped on "+this+" but no event was provided.")};k.get_index_of=function(b){return b.get_parent_of_frontside().get_index()};k.removed_from_container=function(b,a,k,l,h){a=!!k;"undefined"===typeof l&&(l=this.get_index_of(b));0<=l?(this.set_hole(l,void 0,a),a&&(this.rerender(),b.restore_dimensions())):h&&d.UTILITIES.report_internal_error("Attempted to remove "+b+" from "+this+" but not found.")};k.get_path_to=
function(b,a){var k=this.get_size(),l,h;if("empty hole"===b.get_type_name()){k=b.get_parent_of_frontside();h=d.box.path.create(b.get_index());if(k===this)return h;k=this.get_path_to(k);if(!k)return;k.next=h;return k}for(l=0;l<k;l++)if(h=this.get_hole_contents(l)||this.get_contents_temporarily_removed(l)){if(b===h||h.top_contents_is&&h.top_contents_is(b))return d.box.path.create(l);if(h.get_path_to&&(h=h.get_path_to(b,a)))return k=d.box.path.create(l),k.next=h,k}};k.element_to_highlight=function(b){b=
this.which_hole(b,!0);var a;if(0>b)return this.get_frontside_element();b=this.get_hole(b);return(a=b.get_contents())?a.get_frontside_element():b.get_frontside_element()};k.which_hole=function(b){var a=this.get_horizontal(),d=this.get_frontside_element(),l=this.get_size(),h;if(0!==l&&(h=$(d).offset(),d=a?$(d).width()/l:$(d).height()/l,h=a?h.left:h.top,b))for(b=0;b<l;b++)if(h+=d,(a?event.pageX<=h:event.pageY<=h)||b+1===l)return b};k.dereference=function(b,a,k){var l,h;if(b){l=b.get_index&&b.get_index();
if(!d.debugging||"number"===typeof l){if(h=this.get_hole_contents(l)){if(h.dereference_contents&&!b.not_to_be_dereferenced)return h.dereference_contents(b,a,k);if(b.next){if(h.dereference)return h.dereference(b.next,a,k);d.UTILITIES.report_internal_error("Expected to refer to a part of "+h+" but it lacks a method to obtain "+d.path.toString(b.next))}b.removing_widget&&("empty hole"===h.get_type_name()?d.UTILITIES.report_internal_error("Robot is trying to remove something from an empty hole. "):h.get_infinite_stack()||
k.remove_from_container(h,this));return h}return this.get_hole(l)}d.UTILITIES.report_internal_error(this+" unable to dereference the path: "+d.path.toString(b))}else return this};k.path={create:function(b){return{get_index:function(){return b},toString:function(){return"scale"===this.true_type?0===b?"the left side of the scale ":"the right side of the scale ":"the "+d.UTILITIES.cardinal(b)+" hole "},get_json:function(a){return{type:"box_path",index:b,true_type:this.true_type,next:this.next&&this.next.get_json(a)}}}}};
k.get_custom_title_prefix=function(){return"Drop things in my holes to keep them for later."};d.creators_from_json.box_path=function(b,a){var n=k.path.create(b.index);b.next&&(n.next=d.UTILITIES.create_from_json(b.next,a));b.true_type&&(n.true_type=b.true_type);return n};return k}(window.TOONTALK);
window.TOONTALK.box_backside=function(d){return{create:function(k){var b=d.backside.create(k),a=d.UTILITIES.create_text_input(k.get_size().toString(),"toontalk-box-size-input","Number of holes","Type here to edit the number of holes.",void 0,"number"),n=d.UTILITIES.create_radio_button("box_orientation","horizontal","toontalk-horizontal-radio-button","Left to right","Show box horizontally."),l=d.UTILITIES.create_radio_button("box_orientation","vertical","toontalk-vertical-radio-button","Top to bottom",
"Show box vertically."),h=function(){var b=parseInt(a.button.value.trim(),10);k.set_size(b,!0)&&d.robot.in_training&&d.robot.in_training.edited(k,{setter_name:"set_size",argument_1:b,toString:"change the number of holes to "+b+" of the box",button_selector:".toontalk-box-size-input"})},t=function(){var a=d.UTILITIES.selected_radio_button(n.button,l.button),b=a.value,c="horizontal"===b;k.set_horizontal(c,!0);d.robot.in_training&&d.robot.in_training.edited(k,{setter_name:"set_horizontal",argument_1:c,
toString:"change the orientation to "+b+" of the box",button_selector:"."+a.className.split(" ",1)[0]})},e=b.get_element(),q=d.backside.create_advanced_settings_button(b,k),u=b.update_display;a.button.addEventListener("change",h);a.button.addEventListener("mouseout",h);n.button.addEventListener("change",t);l.button.addEventListener("change",t);b.update_display=function(){a.button.value=k.get_size().toString();k.get_horizontal()?d.UTILITIES.check_radio_button(n):d.UTILITIES.check_radio_button(l);u()};
e.appendChild(a.container);e.appendChild($(d.UTILITIES.create_horizontal_table(n.container,l.container)).buttonset().get(0));e.appendChild(q);b.add_advanced_settings();b.render();return b}}}(window.TOONTALK);
window.TOONTALK.box_hole=function(d){return{create:function(k){var b=Object.create(this),a,n,l;b.get_element=function(){l||(l=document.createElement("div"),l.className="toontalk-box-hole toontalk-frontside toontalk-side",l.toontalk_widget=b);return l};b.get_frontside=function(b){return a?a.get_frontside(b):this.get_element()};b.get_side_element=function(){return this.get_element()};b.get_frontside_element=function(b){return a?a.get_frontside_element(b):this.get_element()};b.get_frontside=function(){return this};
b.widget_dropped_on_me=function(a,b,e,l){b=this.get_parent_of_frontside();var k;d.robot.in_training&&e&&d.robot.in_training.dropped_on(a,this);e&&a.save_dimensions&&(a.save_dimensions(),a.set_size_attributes&&(k=$(this.get_element()),a.set_size_attributes(k.width(),k.height())));this.set_contents(a);a.dropped_on_other&&a.dropped_on_other(this,!1,e,l);b.render();return!0};b.get_json=function(){return null};b.add_to_json=function(a){return a};b.copy=function(a){return d.box_hole.create(k)};b.match=
function(){return"matched"};b.get_type_name=function(){return a?a.get_type_name():"empty hole"};b.is_of_type=function(a){return"empty hole"===a};b.get_index=function(){return k};b.get_contents=function(){return a};b.set_contents=function(h){var l=this.get_listeners("value_changed");l&&(a!==h&&l.forEach(function(b){b({type:"value_changed",old_value:a,new_value:h})}),a&&l.forEach(function(b){a.remove_listener("value_changed",b,!0)}),h&&l.forEach(function(a){h.add_listener("value_changed",a)}));a&&a.set_parent_of_frontside(void 0);
(a=h)?(a.set_parent_of_frontside(this),d.debugging&&(b.debug_string="A hole containing "+a),a.set_visible(n)):d.debugging&&(b.debug_string="An empty hole")};b.visible=function(){return this.get_parent_of_frontside().visible()};b.set_visible=function(b){n=b;a&&a.set_visible(b)};b.render=function(){if(a)return a.render()};b.rerender=function(){if(a)return a.rerender()};b.set_running=function(b){a&&a.set_running(b)};b.removed_from_container=function(b,l,e,k,n){a?(e&&a.restore_dimensions(),this.set_contents(void 0),
e&&this.get_parent_of_frontside().render()):n&&d.UTILITIES.report_internal_error("Holes can't be removed from containers.")};b.temporarily_remove_contents=function(b,d){if(a)return this.get_parent_of_frontside().temporarily_remove_contents(b,d)};b.toString=function(){return a?a.toString():"_"};b.get_description=function(){return a?a.get_description():"_"};b.get_full_description=function(){return a?a.get_full_description():"_"};b.is_backside=function(){return!1};b.get_widget=function(){return this};
d.debugging&&(b.debug_string="An empty hole");d.widget.has_parent(b);d.widget.has_listeners(b);return b}}}(window.TOONTALK);(function(){var d,k,b,a,n,l;window.TOONTALK.bird=function(a){var b=Object.create(a.widget);b.create=function(e,n){var u=Object.create(b),f=[];d=function(a){e=a};u.widget_dropped_on_me=function(b,c,d,f){c=c?b.get_backside():b;var l;if(e){if(e.has_ancestor(b))return a.UTILITIES.display_message("Bird can't take its nest to its nest!"),!1;e.visible()||e.any_nest_copies_visible()?(b.save_dimensions(),l=this.get_frontside_element(),$(l).removeClass("toontalk-bird-gimme"),f&&(b.robot_waiting_before_next_step=
f,b.remove_from_parent_of_frontside()),e.animate_bird_delivery(c,this,f&&f.run_next_step,f)):(e.add_to_contents(c),f&&f.run_next_step())}else console.log("to do: handle drop on a nestless bird -- just removes other?");a.robot.in_training&&d&&a.robot.in_training.dropped_on(b,this);return!0};u.animate_delivery_to=function(b,c,d,l,k,n,g){var z=!!d,x=this.get_parent_of_frontside(),q=this.get_frontside_element(),t=this.closest_visible_ancestor_or_frontside(),u=$(t.get_frontside_element()).offset(),M=function(){var c=
$(V).offset(),d;z?this.remove():(d=function(){$(q).removeClass("toontalk-bird-morph-to-static");$(q).addClass("toontalk-bird-static");x&&x.get_widget().rerender()},q.style.position=da,c&&(u.left-=c.left,u.top-=c.top),$(q).css(u),V&&V.appendChild(q),x&&(x.get_widget().is_of_type("top-level")?this.rerender():x.get_widget().rerender()),ga&&(qa.remove_backside_widget(this,!1,!0),ga(),f&&(c=f,f=[],c.forEach(function(a){a.robot.run(a.context,a.top_level_context,a.queue)}))),a.UTILITIES.add_animation_class(q,
"toontalk-bird-morph-to-static"),a.UTILITIES.add_one_shot_event_handler(q,"animationend",1E3,d),n&&(n(),b.robot_waiting_before_next_step=void 0))}.bind(this),L=function(){N();d.add_to_contents(b,this,!0);a.UTILITIES.set_timeout(function(){this.fly_to(u,M)}.bind(this))}.bind(this),S=function(b,c){this.element_to_display_when_flying=b;c&&(this.update_display(),c.update_display());b.width_before_carry=b.clientWidth;b.height_before_carry=b.clientHeight;a.UTILITIES.set_timeout(function(){$(this.element_to_display_when_flying).addClass("toontalk-carried-by-bird").css({left:"",
top:"",width:"",height:"",position:""});this.update_display()}.bind(this))}.bind(this),N=function(b){if(this.element_to_display_when_flying){var c=this.element_to_display_when_flying.width_before_carry,d=this.element_to_display_when_flying.height_before_carry;$(this.element_to_display_when_flying).removeClass("toontalk-carried-by-bird");b?($(this.element_to_display_when_flying).css({width:c,height:d}),$(q).closest(".toontalk-top-level-backside").append(this.element_to_display_when_flying),a.UTILITIES.set_absolute_position($(this.element_to_display_when_flying),
b)):$(this.element_to_display_when_flying).remove();this.element_to_display_when_flying=void 0;this.update_display()}}.bind(this),V,da,na,oa,ka,ga,va,aa,pa,qa,W;d||(d=e);pa=b.get_element();S(pa,b);t=c.get_widget().closest_visible_ancestor().get_widget().get_frontside_element();if(c.visible()||this.visible())if(c=$(t).offset(),ka=$(d.get_frontside_element()).closest(".toontalk-top-level-backside"),ka.is("*")||(ka=$(this.get_frontside_element()).closest(".toontalk-top-level-backside")),(W=ka.offset())||
(W={left:0,top:0}),l&&(u={left:l+W.left,top:k+W.top}),V=q.parentElement,na=$(q).width(),oa=$(q).height(),da=q.style.position,q.style.position="absolute",qa=this.top_level_widget(),x&&x.get_widget().temporarily_remove_contents&&(ga=x.get_widget().temporarily_remove_contents(this,!0))&&qa.add_to_top_level_backside(this),ka.append(q),$(q).css({left:l||u.left-W.left,top:k||u.top-W.top,width:na,height:oa}),(va=d.get_contents_frontside_element())&&d.visible()&&(!g||g.visible())){l=$(t).width();k=$(t).height();
aa=$(t).offset();W.max_left=W.left+ka.width();W.max_top=W.top+ka.height();c.left+=l;c.top+=k;var ba={left:Math.min(aa.left+l,W.max_left-l),top:Math.min(aa.top+k,W.max_top-k)},xa={left:Math.max(aa.left-l,W.left),top:Math.max(aa.top-k,W.top)},t=function(){var a=function(){d.set_locked(!0);this.fly_to(aa,wa,300)}.bind(this);N(ba);d.get_locked()?d.run_when_unlocked(a):a()}.bind(this),wa=function(){S(va);this.fly_to(xa,la,300)}.bind(this),la=function(){N(xa);this.fly_to(ba,ma,300)}.bind(this),ma=function(){S(pa,
b);this.fly_to(aa,eb,300)}.bind(this),eb=function(){N(aa);this.fly_to(xa,Fa,300)}.bind(this),Fa=function(){S(va);this.fly_to(aa,Q,300)}.bind(this),Q=function(){d.set_locked(!1);N();d.update_display();L()}.bind(this);this.fly_to(ba,t,300)}else this.fly_to(c,L,300);else d.add_to_contents(b,this,!0)};u.get_json=function(b){return{type:"bird",nest:e&&a.UTILITIES.get_json(e,b)}};u.copy=function(a){var b,d;if(a)if(a.just_value)b=this.create(void 0,this.get_description());else{if(a.nests_copied&&a.nests_copied[e]){b=
a.nests_copied[e][0];l.call(b);for(d=1;d<a.nests_copied[e].length;d++)k.call(a.nests_copied[e][d],b);b=this.create(b,this.get_description())}else b=this.create(e,this.get_description());a.birds_copied||(a.birds_copied={});a.birds_copied[e]||(a.birds_copied[e]=[]);a.birds_copied[e].push(b)}else b=this.create(e,this.get_description());return this.add_to_copy(b,a)};u.run_when_non_empty=function(a){f.push(a)};u=u.add_standard_widget_functionality(u);u.set_description(n);a.debugging&&(u.debug_id=a.UTILITIES.generate_unique_id(),
u.debug_string=e?"a bird with "+e.debug_string:"a bird without a nest");return u};b.create_backside=function(){return a.bird_backside.create(this)};b.match=function(a){return a.match_with_any_bird?a.match_with_any_bird(this):this};b.match_with_any_bird=function(){return"matched"};b.update_display=function(){var b=this.get_frontside(!0),d=this.get_backside(),l;l=b.get_element();l.title=this.get_title();$(l).is(".toontalk-bird, .toontalk-side-animating")||($(l).addClass("toontalk-bird toontalk-bird-static"),
l.addEventListener("dragover",function(b){$(l).is(".toontalk-bird-static")&&($(l).removeClass("toontalk-bird-static"),a.UTILITIES.add_animation_class(l,"toontalk-bird-gimme"))}),l.addEventListener("dragleave",function(a){$(l).is(".toontalk-bird-gimme")&&$(l).addClass("toontalk-bird-static").removeClass("toontalk-bird-gimme")}));this.element_to_display_when_flying?l.appendChild(this.element_to_display_when_flying):$(l).children(".toontalk-side").remove();d&&d.rerender()};b.fly_to=function(b,d,l){var f=
this.get_frontside_element(),k=$(f).offset(),k=Math.atan2(b.top-k.top,b.left-k.left),c="toontalk-fly-west toontalk-fly-northwest toontalk-fly-north toontalk-fly-northeast toontalk-fly-east toontalk-fly-southeast toontalk-fly-south toontalk-fly-southwest".split(" ")[Math.round(4*(k/Math.PI+1))%8];$(f).position();a.UTILITIES.add_animation_class(f,c);this.animate_to_absolute_position(b,function(){$(f).removeClass(c);l?($(f).addClass("toontalk-bird-static"),setTimeout(d,l)):d()})};b.toString=function(){return"a bird"};
b.get_type_name=function(){return"bird"};b.get_help_URL=function(){return"docs/manual/birds-nests.html"};b.matching_resource=function(a){return a.get_type_name&&a.get_type_name()===this.get_type_name()};a.creators_from_json.bird=function(b,d){return a.bird.create(a.UTILITIES.create_from_json(b.nest,d),b.description)};b.drop_on=function(a,b,d,f){if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,!1,d,f)};b.get_custom_title_prefix=function(){return"Drop something on me and I'll take it to my nest."};
return b}(window.TOONTALK);window.TOONTALK.bird_backside=function(a){return{create:function(b){b=a.backside.create(b);b.add_advanced_settings(!0);return b}}}(window.TOONTALK);window.TOONTALK.nest=function(h){var t=Object.create(h.widget),e={},q={};t.create=function(q,f,w,c,p){var y=Object.create(t),C;f||(f=[]);w||(w=[]);k=function(d){p&&n.call(p,this);p=d;c=b.call(d);a.call(d,this)};b=function(){return c};l=function(){p&&n.call(p,this);p=void 0;c=h.UTILITIES.generate_unique_id()};a=function(a){this[e](a)};
n=function(a){this[e](a,!0)};y.matched_by=function(a){return 0<f.length?h.UTILITIES.match(a,f[0].get_widget()):[[this,a]]};y.run_when_non_empty=function(a){w.push(a)};y.add_to_contents=function(a,b,c){var d;1===f.push(a)?0<w.length&&(d=w,w=[],d.forEach(function(a){$(a.robot.get_frontside_element()).removeClass("toontalk-robot-waiting");a.robot.run(a.context,a.top_level_context,a.queue)})):a.get_widget().hide();a.is_backside()?a.get_widget().set_parent_of_backside(this):a.get_widget().set_parent_of_frontside(this);
C&&!c&&(b?C.forEach(function(c){c.has_ancestor(a.get_widget())||c.animate_bird_delivery(h.UTILITIES.copy_side(a),b)}):C.forEach(function(b){b.has_ancestor(a.get_widget())||b.add_to_contents(h.UTILITIES.copy_side(a,!1,!0))}));this.rerender()};y.animate_bird_delivery=function(a,b,c,d){var e,f,l;b.animate_delivery_to(a,this,void 0,void 0,void 0,c,d);C&&(e=$(b.closest_visible_ancestor().get_widget().get_frontside_element()).closest(":visible").position(),f=b.get_parent_of_frontside().get_element(),l=
this.visible(),C.forEach(function(c){var k=h.UTILITIES.copy_side(a,!1,l),n,z;c.has_ancestor(a.get_widget())||(c.visible()||l?(n=b.copy({just_value:!0}),z=n.get_frontside_element(!0),$(f).append(z),n.animate_delivery_to(k,c,c,e.left,e.top,void 0,d)):c.add_to_contents(k))}))};y.get_contents_frontside_element=function(){if(0<f.length)return f[0].get_widget().get_frontside_element()};y.get_locked=function(){return this.locked_for_animating_deliveries};y.set_locked=function(a){this.locked_for_animating_deliveries=
a;!a&&this.to_run_when_unlocked&&0<this.to_run_when_unlocked.length&&this.to_run_when_unlocked.shift()()};y.run_when_unlocked=function(a){this.to_run_when_unlocked?this.to_run_when_unlocked.push(a):this.to_run_when_unlocked=[a]};y.removed_from_container=function(a,b,c,d,e){a=f.shift();this.visible()&&(a?(a.get_widget().restore_dimensions(),a.is_backside()?a.get_widget().set_parent_of_backside(void 0):a.get_widget().set_parent_of_frontside(void 0)):e&&h.UTILITIES.report_internal_error("Nothing removed from nest!"),
0<f.length&&(f[0].set_visible(!0),$(f[0].get_element()).show()),this.render());return a};y.dereference_contents=function(a,b,c){var d,e,h,l;return 0===f.length?this:a.removing_widget?(a=f[0],c.remove_from_container(a,this),this.visible()&&(h=this.get_frontside_element(),c=$(h).offset(),b=$(h).closest(".toontalk-backside-of-top-level"),(d=b.offset())||(d={left:0,top:0}),e=a.get_frontside_element(),l=$(h).width(),h=$(h).height(),$(e).css({left:.1*l+c.left-d.left,top:.1*h+c.top-d.top,width:.8*l,height:.8*
h}),b.append(e)),a):a.next?f[0].get_widget().dereference(a.next,b,c):f[0].get_widget()};y.get_json=function(a){var b=w&&w.map(function(b){return{robot:h.UTILITIES.get_json(b.robot,a),context:b.context&&h.UTILITIES.get_json(b.context,a),top_level_context:b.top_level_context&&h.UTILITIES.get_json(b.top_level_context,a)}});return{type:"nest",contents:h.UTILITIES.get_json_of_array(f,a),guid:c,original_nest:p&&h.UTILITIES.get_json(p,a),waiting_robots:b}};y.copy=function(a){var b,e,l;if(a&&a.just_value)return 0<
f.length?f[0].get_widget().copy(a):h.nest.create(this.get_description(),[],[],"in a robot's condition");b=h.UTILITIES.copy_widget_sides(f,a);a?a.fresh_copy?e=h.nest.create(this.get_description(),b,[],c&&h.UTILITIES.generate_unique_id()):(l=p||this,a.birds_copied&&a.birds_copied[this]?(a.nests_copied&&a.nests_copied[l]?(e=a.nests_copied[t][0].copy(),a.nests_copied[l].forEach(function(a){k.call(a,e)})):e=h.nest.create(this.get_description(),b,[],h.UTILITIES.generate_unique_id()),a.birds_copied[this].forEach(function(a){d.call(a,
e)})):e=h.nest.create(this.get_description(),b,[],c,l),a.nests_copied||(a.nests_copied={}),a.nests_copied[l]?a.nests_copied[l].push(e):a.nests_copied[l]=[e]):e=h.nest.create(this.get_description(),b,[],c,p||this);return this.add_to_copy(e,a)};y.has_contents=function(){return 0<f.length};y.dropped_on_other=function(a,b,d,e){var f,l,k,n,q,p,t;c||(c=h.UTILITIES.generate_unique_id(),h.debugging&&(y.debug_string="A nest with "+c),f=h.bird.create(this),e&&(e.add_newly_created_widget(f),this.robot_waiting_before_next_step=
e),this.rerender(),l=this.get_frontside_element(!0),h.UTILITIES.add_animation_class(l,"toontalk-hatch-egg"),q=function(){var c,q,u;if(b)c=a.get_backside();else if((u=h.UTILITIES.widget_from_jquery($(l).closest(".toontalk-top-level-backside")))||(u=h.UTILITIES.widget_from_jquery($(a.get_widget().get_frontside_element(!0)).closest(".toontalk-top-level-backside"))),u)c=u.get_backside();else{h.UTILITIES.report_internal_error("Unable to find the top-level backside for bird to go to.");return}q=c.get_element();
u=$(q).offset();k=f.get_frontside_element(!0);$(k).removeClass("toontalk-bird-static");h.UTILITIES.add_animation_class(k,"toontalk-fly-southwest");n=h.UTILITIES.relative_position(l,q);$(k).css({left:n.left,top:n.top});h.robot.in_training&&d?(h.robot.in_training.add_newly_created_widget(f),c.widget_dropped_on_me(f,!1,d,void 0,!0)):c.widget_dropped_on_me(f,!1,d);$(l).removeClass("toontalk-hatch-egg").addClass("toontalk-empty-nest").css({width:"",height:""});"top-level"===this.get_parent_of_frontside().get_widget().get_type_name()&&
$(l).css({left:n.left-5,top:n.top+45});t=function(){$(k).removeClass("toontalk-fly-southwest");h.UTILITIES.set_timeout(function(){h.UTILITIES.add_animation_class(k,"toontalk-fly-down");p=function(){$(k).removeClass("toontalk-fly-down");h.UTILITIES.add_animation_class(k,"toontalk-bird-morph-to-static");h.UTILITIES.add_one_shot_event_handler(k,"animationend",1E3,function(){$(k).removeClass("toontalk-bird-morph-to-static toontalk-side-animating").addClass("toontalk-bird-static")});e&&e.run_next_step();
f.update_display()};h.UTILITIES.add_one_shot_event_handler(l,"animationend",1E3,p)}.bind(this))}.bind(this);$(k).removeClass("toontalk-bird-static");c=Math.max(10,n.left-70);q=Math.max(10,n.top+70);f.animate_to_absolute_position({left:c+u.left,top:q+u.top},t);this.rerender()}.bind(this),h.UTILITIES.add_one_shot_event_handler(l,"animationend",2E3,q));return!0};y.widget_dropped_on_me=function(a,b,c,d){c&&a.save_dimensions&&a.save_dimensions();0===f.length?(this.add_to_contents(b?a.get_backside():a),
a.dropped_on_other?a.dropped_on_other(this,b,c,d):h.robot.in_training&&c&&h.robot.in_training.dropped_on(a,this)):a.drop_on(f[0].get_widget(),b,c,d);return!0};y.drop_on=function(a,b,c,d){return a.widget_dropped_on_me?(a.widget_dropped_on_me(this,!1,c,d),!0):!1};y.element_to_highlight=function(){return 0===f.length?this.get_frontside_element():f[0].get_frontside_element()};y.update_display=function(){var a=this.get_frontside(!0),b=this.get_backside(),d,e,l,k,n,a=a.get_element();0<f.length?(d=f[0].get_widget(),
f[0].is_backside()?(k=d.get_backside(!0),n=k.get_element(),k.update_display(),k.scale_to_fit(n,a)):(d.render(),n=f[0].get_element()),e=$(a).width(),l=$(a).height(),0<e&&0<l&&h.UTILITIES.set_timeout(function(){for(var a=2*n.toontalk_border_size||0,b=.8*e,c=.8*l;2*a>=b||2*a>=c;)a/=2;b-=a;c-=a;$(n).css({width:b,height:c,left:.1*e,top:.1*l});d.set_size_attributes&&d.set_size_attributes(b,c)},2),a.appendChild(n),$(a).addClass("toontalk-empty-nest"),f[0].is_backside()?d.set_parent_of_backside(this):d.set_parent_of_frontside(this)):
(a.title=this.get_title(),c?($(a).removeClass("toontalk-nest-with-egg"),$(a).addClass("toontalk-empty-nest")):h.UTILITIES.add_animation_class(a,"toontalk-nest-with-egg"));$(a).addClass("toontalk-nest");b&&b.rerender()};y[e]=function(a,b){if(!C){if(b)return;C=[]}b?C.splice(C.indexOf(a),1):C.push(a)};y.get_path_to=function(a,b){if(0<f.length){if(f[0].get_widget().get_path_to)return f[0].get_widget().get_path_to(a,b);if(f[0].get_widget()===a)return h.path.to_entire_context()}};y.walk_children=function(a){if(0<
f.length)return a(f[0])};y.top_contents_is=function(a){return 0<f.length&&f[0].get_widget()===a};y.any_nest_copies_visible=function(){var a=!1;if(!C)return!1;C.some(function(b){b.visible()&&(a=!0)});return a};y.compare_with=function(a){if(0<f.length)return f[0].compare_with(a);if(a.compare_with_nest)return-1*a.compare_with_nest(this)};y.compare_with_nest=function(a){return 0===f.length?0:1};y.compare_with_number=function(a){return 0<f.length?f[0].compare_with(a):-1};y.compare_with_box=y.compare_with_number;
y.compare_with_scale=y.compare_with_number;y=y.add_standard_widget_functionality(y);y.set_description(q);h.debugging&&(y.debug_id=h.UTILITIES.generate_unique_id(),y.debug_string=c?"A nest with "+c:"A nest with an egg");if(p&&c)p[e](y);return y};t.create_backside=function(){return h.nest_backside.create(this)};t.match=function(a){return a.match_nest_with_nest?a.match_nest_with_nest(this):a};t.match_nest_with_nest=function(a){return"matched"};t.toString=function(){return"a nest"};t.get_help_URL=function(){return"docs/manual/birds-nests.html"};
t.get_type_name=function(){return"nest"};t.matching_resource=function(a){return a.get_type_name&&a.get_type_name()===this.get_type_name()};t.get_custom_title_prefix=function(){return"Drop something on my bird and she'll take it here."};h.creators_from_json.nest=function(a,b){var d=!a.original_nest&&a.guid&&q[a.guid];d||(d=h.nest.create(a.description,h.UTILITIES.create_array_from_json(a.contents,b),void 0,a.guid,a.original_nest&&h.UTILITIES.create_from_json(a.original_nest,b)),q[a.guid]=d);return d};
return t}(window.TOONTALK);window.TOONTALK.nest_backside=function(a){return{create:function(b){b=a.backside.create(b);b.add_advanced_settings(!0);return b}}}(window.TOONTALK)})();window.TOONTALK.scale=function(d){var k=Object.create(d.widget);k.create=function(b,a,k,l){var h=function(){k.rerender()},t,e,q;k||(k=d.box.create(2,void 0,b,a));t=k.get_json;e=k.copy;q=k.get_path_to;k.copy=function(a){var b;a||(a={});b=e.call(this,a);b=d.scale.create(void 0,void 0,b,a.just_value&&this.get_state());return k.add_to_copy(b,a)};k.get_json=function(a){a=t.call(this,a);a.type="scale";a.inactive_state=this.get_inactive_state();return a};k.get_path_to=function(a,b){var d=q.call(this,a,b);
d&&(d.true_type="scale");return d};k.drop_on=function(a,b,d,c){if(a.widget_dropped_on_me)return a.widget_dropped_on_me(this,b,d,c)};k.widget_dropped_on_me=function(a,b,d,c){var e=this.get_hole_contents(0),h=this.get_hole_contents(1),l;if(e&&!h)return this.set_hole(1,a),!0;if(!e&&(h||!d))return this.set_hole(0,a),!0;l=this.which_hole(d,!1);if(0===l){if(e){if(e.drop_on)return a.drop_on(e,b,d,c);return}}else if(h){if(h.drop_on)return a.drop_on(h,b,d,c);return}this.set_hole(l,a,d);return!0};k.which_hole=
function(a,b){var d=$(k.get_frontside_element()),c=d.offset(),d=d.width(),c=a.clientX-(c.left+d/2),d=b?d/10:0;return-c>d?0:c>d?1:-1};k.get_inactive_state=function(){return l};k.update_display=function(){var a=this.get_frontside_element(),b=$(a),e=$(a).children(".toontalk-scale-half"),c=$(a).parent(),c=c.is(".toontalk-backside")?a:c.get(0),h=$(c).width(),l=$(c).height(),k=function(a,b,c){var d=b.get_frontside_element(!0),e=c*h*.5,f=.5*h,k=l;b=b.get_contents();$(a).css({left:e,top:0,width:f,height:k});
a!==d&&(e=0===c?-.05*h:.15*h,c="toontalk-scale-balanced"===n?.1*l:0===c&&"toontalk-scale-left_heavier"===n||1===c&&"toontalk-scale-right_heavier"===n?.25*l:1===c&&"toontalk-scale-left_heavier"===n||0===c&&"toontalk-scale-right_heavier"===n?-.1*l:.2*l,f=.4*h,k=.4*l,$(d).css({left:e,top:c,width:f,height:k}),b&&(b.set_location_attributes&&b.set_location_attributes(e,c),b.set_size_attributes&&b.set_size_attributes(f,k)),a.appendChild(d))},n,c=d.UTILITIES.scale_to_fit(a,c,123,91);0===h&&(h=1);0===l&&(l=
1);h/=c.x_scale;l/=c.y_scale;b.is(".toontalk-top-level-resource")?n="toontalk-scale-balanced":(c=this.get_state(),n="undefined"===typeof c?"toontalk-scale-unbalanced":["toontalk-scale-right_heavier","toontalk-scale-balanced","toontalk-scale-left_heavier"][c+1]);b.removeClass("toontalk-scale-balanced toontalk-scale-left_heavier toontalk-scale-right_heavier toontalk-scale-unbalanced");b.addClass(n);b.addClass("toontalk-scale");2===e.length?e.each(function(a,b){d.UTILITIES.set_timeout(function(){k(b,
this.get_hole(a),a)}.bind(this))}.bind(this)):this.get_holes().forEach(function(b,c){var d=b.get_element();0===c?$(d).addClass("toontalk-left_scale  toontalk-scale-half"):$(d).addClass("toontalk-right_scale toontalk-scale-half");k(d,b,c);a.appendChild(d)});a.title=this.get_title();d.debugging&&(this.debug_string=this.toString())};k.render=function(){d.DISPLAY_UPDATES.pending_update(this)};k.get_type_name=function(){return"scale"};k.get_help_URL=function(){return"docs/manual/scales.html"};k.toString=
function(){var a=this.get_hole(0),b=this.get_hole(1),e;switch(this.get_state()){case -1:e="scale leaning to the right";break;case 1:e="scale leaning to the left";break;case 0:e="balanced scale";break;default:e="unbalanced scale"}a=a?"contains "+d.UTILITIES.add_a_or_an(a.get_full_description()):"is empty";b=b?"contains "+d.UTILITIES.add_a_or_an(b.get_full_description()):"is empty";return e+" and the left pan "+a+" and the right pan "+b};k.create_backside=function(){return d.scale_backside.create(this)};
k.get_state=function(){var a=this.get_inactive_state(),b;if(a)return a;a=this.get_hole_contents(0);b=this.get_hole_contents(1);if(a||b)if(a){if(!b)return 1;if(a.compare_with)return a.compare_with(b)}else return-1};k.match=function(a){return a.match_with_scale?a.match_with_scale(this):this};k.match_with_scale=function(a){return this.get_state()===a.get_state()?"matched":a};k.compare_with=function(a){if(a.compare_with_scale)return-1*a.compare_with_scale(this)};k.compare_with_scale=function(a){var b=
this.get_state();a=a.get_state();return b&&!a?1:!b&&a?-1:b>a?1:b<a?-1:0};k.get_hole(0).add_listener("value_changed",h);k.get_hole(1).add_listener("value_changed",h);k.get_hole_contents(0)&&k.get_hole_contents(0).add_listener("value_changed",h);k.get_hole_contents(1)&&k.get_hole_contents(1).add_listener("value_changed",h);k.get_custom_title_prefix=function(){var a=this.get_state(),b=this.get_hole_contents(0),d=this.get_hole_contents(1);if("undefined"===typeof a)return b&&d?"I can't compare "+b+" and "+
d+".":"Use me to compare two things. Drop them in my pans.";b||(b="empty pan");d||(d="empty pan");return["The "+d+" is greater than the "+b+".","The "+d+" is equal to the "+b+".","The "+d+" is less than the "+b+"."][a+1]};return k};d.creators_from_json.scale=function(b,a){return k.create(d.UTILITIES.create_array_from_json(b.contents,a),b.description,void 0,b.inactive_state)};return k}(window.TOONTALK);
window.TOONTALK.scale_backside=function(d){return{create:function(k){k=d.backside.create(k);k.add_advanced_settings(!0);return k}}}(window.TOONTALK);window.TOONTALK.robot=function(d){var k=Object.create(d.widget);k.create=function(b,a,n,l,h,t,e){var q=Object.create(k),u,f=!1;n||(n=d.actions.create());u||(u=q);q.get_frontside_conditions=function(){return b};q.set_frontside_conditions=function(a){b=a};q.get_backside_conditions=function(){return a};q.set_backside_conditions=function(b){(a=b)&&d.UTILITIES.available_types.forEach(function(b){a[b]&&d.widget.erasable(a[b])})};q.add_to_backside_conditions=function(b){var c=b.copy({just_value:!0});a||
(a={});a[b.get_type_name()]=c;d.widget.erasable(c)};q.get_body=function(){return n};q.get_animating=function(){return f};q.set_animating=function(a,b){var e=this.get_frontside_element();(f=a)?(b||(b=$(e).offset()),$(e).addClass("toontalk-robot-animating toontalk-side-animating"),$(e).css({width:"",height:"","z-index":d.UTILITIES.next_z_index()}),d.UTILITIES.set_position_relative_to_top_level_backside($(e),b),$(e).closest(".toontalk-top-level-backside").append(e)):$(e).removeClass("toontalk-robot-animating toontalk-side-animating")};
q.get_thing_in_hand=function(){return h};q.set_thing_in_hand=function(a){d.debugging&&a&&"empty hole"===a.get_type_name()?d.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):h=a};q.get_next_robot=function(){return e};q.set_next_robot=function(a){var b=this.get_backside_element();a&&a.set_first_in_team(this.get_first_in_team());!a&&e&&e.set_first_in_team(e);e=a;b&&(a=a?"When the robot can't run then this one will try: ":window.TOONTALK.robot.empty_drop_area_instructions,$(b).find(".toontalk-drop-area-instructions").get(0).innerHTML=
a)};q.get_first_in_team=function(){return u};q.set_first_in_team=function(a){u=a;e&&e.set_first_in_team(a)};q.walk_children=function(a){(!e||a(e))&&this.get_frontside_conditions()&&a(this.get_frontside_conditions())};q.get_run_once=function(){return t};q.set_run_once=function(a){t=a};e&&q.set_next_robot(e);q=q.add_standard_widget_functionality(q);q.set_description(l);d.debugging&&(this.debug_id=d.UTILITIES.generate_unique_id());return q};k.create_backside=function(){return d.robot_backside.create(this)};
k.copy=function(b){var a=this.get_frontside_conditions(),k=this.get_backside_conditions(),a=a?a.copy({just_value:!0}):void 0,l=this.get_next_robot(),l=l?l.copy(b):void 0,h;k&&(h={},d.UTILITIES.available_types.forEach(function(a){h[a]&&(h[a]=h[a].copy({just_value:!0}))}));k=this.create(a,h,this.get_body().copy(),this.get_description(),this.get_thing_in_hand(),this.get_run_once(),l);return this.add_to_copy(k,b)};k.match=function(){console.log("Robot-to-robot matching could be more sophisticated.");
return"matched"};k.run=function(b,a,k){var l=this.get_frontside_conditions(),h=function(a){a.visible()&&$(a.get_frontside_element()).removeClass("toontalk-conditions-not-matched toontalk-conditions-waiting").find(".toontalk-conditions-not-matched, .toontalk-conditions-waiting").removeClass("toontalk-conditions-not-matched toontalk-conditions-waiting")},t,e;if(this.being_trained||!l||this.get_animating())return this;h(l);this.rerender();this.match_status=d.UTILITIES.match(l,b);"matched"===this.match_status&&
(t=this.get_backside_conditions())&&(l=b.get_backside_widgets())&&l.some(function(a){var b=!a.is_backside()&&t[a.get_widget().get_type_name()];if(b&&(h(b),a=d.UTILITIES.match(b,a.get_widget()),"matched"!==a))return this.match_status=a,!0}.bind(this));if("matched"===this.match_status)return k||(k=d.QUEUE),this.get_body().reset_newly_created_widgets(),k.enqueue({robot:this,context:b,top_level_context:a,queue:k}),this.match_status;if(this.match_status.is_widget)return $(this.match_status.get_frontside_element()).addClass("toontalk-conditions-not-matched"),
this.rerender(),this.get_next_robot()?this.get_next_robot().run(b,a,k):this.match_status;this.match_status.forEach(function(a){a[1]&&$(a[1].get_frontside_element()).addClass("toontalk-conditions-waiting")});if(this.get_next_robot()){l=this.get_next_robot().run(b,a,k);if("matched"===l)return l;l.is_widget||l.forEach(function(a){0>this.match_status.indexOf(a)&&this.match_status.push(a)})}this.get_first_in_team()===this&&(e={robot:this,context:b,top_level_context:a,queue:k},this.match_status.forEach(function(a){a[0]?
a[0].run_when_non_empty(e):a.run_when_non_empty(e)}),d.UTILITIES.add_animation_class(this.get_frontside_element(),"toontalk-robot-waiting"));return this.match_status};k.set_stopped=function(b){(this.stopped=b)&&this.visible()&&$(this.get_frontside_element()).removeClass("toontalk-robot-waiting");this.get_next_robot()&&this.get_next_robot().set_stopped(b)};k.run_actions=function(b,a,d){return this.stopped?!1:this.visible()?this.get_body().run_watched(b,a,d,this):this.get_body().run_unwatched(b,a,d,
this)};k.picked_up=function(b,a,k){var l;this!==b&&(b.get_infinite_stack&&b.get_infinite_stack()?this.current_action_name="pick up a copy of":this.current_action_name="pick up",k?(l=b,a=b.copy(),a=d.path.get_path_to_resource(a)):a=d.path.get_path_to(b,this),a&&this.add_step(d.robot_action.create(a,this.current_action_name),l),b.last_action=this.current_action_name,this.current_action_name=void 0,this.set_thing_in_hand(b))};k.dropped_on=function(b,a){var k;this!==b&&(this.current_action_name="drop it on",
(k=d.path.get_path_to(a,this))&&this.add_step(d.robot_action.create(k,this.current_action_name)),b.last_action=this.current_action_name+" "+a.get_type_name(),this.current_action_name=void 0,this.set_thing_in_hand(void 0))};k.copied=function(b,a,k){this.current_action_name=k?"pick up a copy of":"copy";(b=d.path.get_path_to(b,this))&&this.add_step(d.robot_action.create(b,this.current_action_name),a);a.last_action=this.current_action_name;this.current_action_name=void 0};k.removed=function(b){var a;
this.current_action_name="remove";(a=d.path.get_path_to(b,this))&&this.add_step(d.robot_action.create(a,this.current_action_name));b.last_action=this.current_action_name;this.current_action_name=void 0};k.edited=function(b,a){var k;this.current_action_name="edit";(k=d.path.get_path_to(b,this))&&this.add_step(d.robot_action.create(k,this.current_action_name,a));this.current_action_name=void 0};k.erased_widget=function(b,a){var k;this.current_action_name="erased_widget";(k=d.path.get_path_to(b,this))&&
this.add_step(d.robot_action.create(k,this.current_action_name,{erased:a,toString:a?"erase":"un-erase"}));this.current_action_name=void 0};k.remove_from_container=function(b,a){var k=a.get_index_of&&b.get_parent_of_frontside()&&a.get_index_of(b),l=function(){a.removed_from_container(b,!1,!0,k,!1)};this.get_animating()?d.UTILITIES.add_one_shot_event_handler(this.get_frontside_element(),"transitionend",2500,l):l();this.add_newly_created_widget(b)};k.add_step=function(b,a){this.get_body().add_step(b,
a);this.get_frontside_element().title=this.get_title()};k.get_context=function(){var b=this.get_frontside_element(),a=$(b).parent(),b=d.UTILITIES.widget_from_jquery(a);return!b&&(a=d.UTILITIES.widget_from_jquery(a.closest(".toontalk-backside-of-robot")))?a.get_context():b};k.training_started=function(){var b=this.get_context();b?(this.being_trained=!0,this.set_frontside_conditions(b.copy({just_value:!0})),$("*").css({cursor:"url("+d.UTILITIES.absolute_file_path("images/RB19.32x32.PNG")+"), default"}),
this.get_frontside_element().title=this.get_title(),b=this.get_backside_element(),$(b).find(".toontalk-conditions-panel").remove()):d.UTILITIES.report_internal_error("Robot started training but can't find its 'context'.")};k.training_finished=function(){var b=this.get_body().get_newly_created_widgets(),a,k;$("*").css({cursor:""});for(a=0;a<b.length;a++)k=b[a],"drop it on top-level"!==k.last_action&&"copy"!==k.last_action||this.add_step(d.robot_action.create(d.newly_created_widgets_path.create(a),
"add to the top-level backside"));this.rerender();this.being_trained=!1;this.get_frontside_element().title=this.get_title();this.backup_all()};k.update_display=function(){var b=this.get_frontside(!0),a=this.get_backside(),k=this.get_thing_in_hand(),l,h;d.debugging&&(this.debug_string=this.toString());l=b.get_element();k&&(h=k.get_frontside_element());!h&&this.carrying_tool&&(h=document.createElement("div"),$(h).addClass(this.carrying_tool));l.title=this.get_title();$(l).addClass("toontalk-robot");
$(l).children(".toontalk-side, .toontalk-held-by-robot").remove();h&&l.appendChild(h);this.match_status&&(this.match_status.is_widget?$(l).addClass("toontalk-side-animating toontalk-robot-not-matched"):$(l).removeClass("toontalk-robot-not-matched"));d.UTILITIES.set_timeout(function(){var a,b,d,u,f;h&&(f={position:"absolute"},$(h).addClass("toontalk-held-by-robot"),a=$(h).width(),b=$(h).height(),d=$(l).width(),u=$(l).height(),0===a&&(a=2*d,b=u/2,f.width=a,f.height=b),f.left=(d-a)/2,f.top=(u-b)/2,$(h).css(f),
k&&k.render())});a&&a.rerender()};k.add_newly_created_widget=function(b){return this.get_body().add_newly_created_widget(b)};k.add_newly_created_widget_if_new=function(b){if(b!==this.get_context())return this.get_body().add_newly_created_widget_if_new(b)};k.get_recently_created_widget=function(){var b=this.get_body().get_newly_created_widgets();return b[b.length-1]};k.get_title=function(){var b=this.get_description();if(b)return b="This robot "+b,0>b.lastIndexOf(".")&&(b+="."),b+"\n"+this.toString();
b=this.get_frontside_element();return $(b).is(".toontalk-top-level-resource")?"Drag this robot to a work area.":this.toString()};k.toString=function(){var b=this.get_frontside_conditions(),a=this.get_body(),k="",l="",h=this.get_next_robot();if(!b)return"has yet to be trained.";b=b.get_full_description();this.being_trained&&(k="is being trained.\n",l="\n...");b=d.UTILITIES.add_a_or_an(b);a=k+"When working on something that matches "+b+" he will \n"+a.toString()+l;this.match_status&&(this.match_status.is_widget?
a="He isn't running because the "+this.match_status+" in his conditions (highlighted in red) doesn't match the corresponding widget. Perhaps editing his conditions will help.\n"+a:"matched"!==this.match_status&&(a="He is waiting for something to be delivered to the nest that matches the "+this.match_status[0][1]+"in his conditions (highlighted in yellow).\n"+a));h&&(a+="\nIf it doesn't match then the next robot will try to run.\n"+h.toString());return a};k.get_type_name=function(){return"robot"};
k.get_help_URL=function(){return"docs/manual/robots.html"};k.get_json=function(b){var a=this.get_frontside_conditions(),k=this.get_backside_conditions(),l,h,t;a&&(l=a.is_of_type("top-level")?{type:"top_level"}:d.UTILITIES.get_json(a,b));k&&d.UTILITIES.available_types.forEach(function(a){k[a]&&(h||(h={}),h[a]=d.UTILITIES.get_json(k[a],b))});this.get_next_robot()&&(t=d.UTILITIES.get_json(this.get_next_robot(),b));return{type:"robot",frontside_conditions:l,backside_conditions:h,body:this.get_body().get_json(b),
run_once:this.get_run_once(),next_robot:t}};d.creators_from_json.robot=function(b,a){var k,l,h;b.thing_in_hand&&(l=d.UTILITIES.create_from_json(b.thing_in_hand,a));b.next_robot&&(k=d.UTILITIES.create_from_json(b.next_robot,a));b.backside_conditions&&(h={},d.UTILITIES.available_types.forEach(function(l){h[l]=d.UTILITIES.create_from_json(b.backside_conditions[l],a)}));return d.robot.create(d.UTILITIES.create_from_json(b.frontside_conditions||b.bubble,a),h,d.UTILITIES.create_from_json(b.body,a),b.description,
l,b.run_once,k)};return k}(window.TOONTALK);
window.TOONTALK.robot_backside=function(d){var k=function(a,b,l,h){a=d.UTILITIES.create_text_element(a);var k=b.get_frontside_element(!0),e=document.createElement("div");$(k).addClass("toontalk-conditions-contents "+h);d.UTILITIES.set_timeout(function(){$(k).parent().addClass("toontalk-conditions-contents-container");$(k).css({left:"inherit",width:"inherit",height:"inherit"});b.render()});l.match_status&&(l.match_status.is_widget?$(l.match_status.get_frontside_element()).addClass("toontalk-conditions-not-matched"):"matched"!==
l.match_status&&l.match_status.forEach(function(a){$(a[1].get_frontside_element()).addClass("toontalk-conditions-waiting")}));e.appendChild(k);l=d.UTILITIES.create_horizontal_table(a,e);$(l).addClass("toontalk-conditions-panel");return l},b=function(a,b){var l=b.get_frontside_conditions(),h=b.get_backside_conditions(),t,e;l&&0===$(a).find(".toontalk-frontside-conditions-area").length&&(a.insertBefore(k("Runs only if the widget matches: ",l,b,"toontalk-frontside-conditions-area"),a.firstChild),l.set_visible(!0),
l.render());h&&Object.keys(h).forEach(function(l){if(t=h[l])e="toontalk-backside-"+l+"-conditions-area",0===$(a).find("."+e).length&&(l="bird"===l?d.UTILITIES.create_text_element("And there is a bird on the back."):k("Runs only if the "+l+" on the backside matches: ",t,b,e),a.insertBefore(l,a.firstChild.nextSibling),t.set_visible(!0),t.render())})};return{create:function(a){var k=d.backside.create(a),l=k.get_element(),h=d.UTILITIES.create_check_box(!a.get_run_once(),"toontalk-run-once-check-box",
"When finished start again","Check this if you want the robot to start over again after finishing what he was trained to do."),t=d.UTILITIES.create_drop_area(window.TOONTALK.robot.empty_drop_area_instructions),e=a.get_next_robot(),q=d.backside.create_advanced_settings_button(k,a),u=k.update_display;t.data("drop_area_owner",a);$(h.button).click(function(b){var e=h.button.checked;a.set_run_once(!e);d.robot.in_training&&d.robot.in_training.edited(a,{setter_name:"set_run_once",argument_1:!e,toString:"change to "+
(e?"run again":"run once")+" of the robot",button_selector:".toontalk-run-once-check-box"});b.stopPropagation()});e&&t.append(e.get_frontside_element(!0));t.get(0).addEventListener("drop",function(a){a=d.UTILITIES.get_dragee();(a=d.UTILITIES.widget_from_jquery(a))&&a.is_of_type("robot")&&(a=a.open_backside(),$(a.get_element()).find(".toontalk-train-backside-button").click())});k.update_display=function(){var b=a.get_frontside_element();b&&(b.title=a.get_title());u()};l.appendChild(this.create_train_button(k,
a));l.appendChild(q);$(h.container).addClass("toontalk-advanced-setting");t.addClass("toontalk-advanced-setting");l.appendChild(h.container);l.appendChild(t.get(0));b(l,a);k.add_advanced_settings();return k},create_train_button:function(a,k){var l=a.get_element();$(l);var h=$("<button>Train</button>").button();h.addClass("toontalk-train-backside-button");var t=!1,e=function(){t?(h.button("option","label","Stop training"),h.attr("title","Click to stop training this robot.")):k.get_body().is_empty()?
(h.button("option","label","Train"),h.attr("title","Click to start training this robot.")):(h.button("option","label","Re-train"),h.attr("title","Click to start training this robot all over again."));$(l).is(":visible")&&b(l,k)};e();h.click(function(a){t=!t;e();t?(k.get_body().reset_steps(),d.robot.in_training=k,k.training_started()):(k.training_finished(),d.robot.in_training=null);a.stopPropagation()});return h.get(0)}}}(window.TOONTALK);window.TOONTALK.robot.empty_drop_area_instructions="Drop a robot here who will try to run when this robot can't run.";(function(){var d=function(d){return"rotate"===d||"skewX"===d||"skewY"===d||"transform-origin-x"===d||"transform-origin-y"===d};window.TOONTALK.element=function(k){var b=["left","top","width","height"],a=Object.create(k.widget),n=function(a,b){var d,e;"number"===typeof a&&(e=a);0===a.length&&(e=0);if("undefined"===typeof e&&(d=a.substring(a.length-1),0<="0123456789x".indexOf(d)&&(e=parseFloat(a),isNaN(e))))return;d=e;0<=["rotate","skewX","skewY"].indexOf(b)&&(d%=360,0>d&&(d+=360));return d};a.create=
function(b,h,n,e){var q=Object.create(a),u=q.drag_started,f={},w={},c,p,y,C;h||(h=[]);q.get_HTML=function(){return b};q.get_text=function(){return this.get_frontside_element().textContent};q.set_HTML=function(a){var c=this.get_frontside_element();if(!c||b===a)return!1;b=a;$(c).children(":not(.ui-resizable-handle)").remove();this.rerender();return!0};q.set_text=function(a){var b=this.get_frontside_element(),c=function(b){$(b).contents().each(function(){this.nodeType==Node.TEXT_NODE?(this.textContent=
a,a=""):c(this,a)})};if(!b||a===b.textContent)return!1;c(b);return this.set_HTML(b.innerHTML)};q.get_style_attributes=function(){return h};q.set_style_attributes=function(a){h=a};q.get_attribute_widgets=function(){return f};q.get_original_copies=function(){return w};q.get_pending_css=function(){return c};q.get_transform_css=function(){return p};q.add_to_css=function(a,b){d(a)?(p||(p={}),p[a]=b):(c||(c={}),c[a]=b)};q.apply_css=function(){var a,b;if(c||p)if(a=this.get_frontside_element())if($(a).is(":visible")){if(p){p.rotate&&
(b="rotate("+p.rotate+"deg)");p.skewX&&(b||(b=""),b+="skewX("+p.skewX+"deg)");p.skewY&&(b||(b=""),b+="skewY("+p.skewY+"deg)");if(p["transform-origin-x"]||p["transform-origin-y"])c||(c={}),c["transform-origin"]=(p["transform-origin-x"]||0)+" "+(p["transform-origin-y"]||0);b&&(c||(c={}),c["-webkit-transform"]=b,c["-moz-transform"]=b,c["-ms-transform"]=b,c["o-transform"]=b,c.transform=b)}k.UTILITIES.set_timeout(function(){c&&(c.width&&"undefined"===typeof c.height?c.height=a.clientHeight:c.height&&"undefined"===
typeof c.width&&(c.width=a.clientWidth),$(a).css(c),C&&(c.width||c.height)&&C.css({width:c.width,height:c.height}),c=void 0)})}else k.UTILITIES.set_timeout(function(){this.apply_css()}.bind(this),100)};q.on_update_display=function(a){y?y.push(a):y=[a]};q.fire_on_update_display_handlers=function(){y&&k.UTILITIES.set_timeout(function(){y.forEach(function(a,b){a()||y.splice(b,1)})})};q.get_image_element=function(){return C};q.set_image_element=function(a,b){C=$(a).find("img");0===C.length?C=void 0:($(b).width(C.width()),
$(b).height(C.height()))};q.get_additional_classes=function(){return e};q.set_additional_classes=function(a){e=a};q=q.add_standard_widget_functionality(q);q.drag_started=function(a,b){this.drag_x_offset=a.view.drag_x_offset;this.drag_y_offset=a.view.drag_y_offset;u.call(this,a,b)};q.set_description(n);k.debugging&&(q.debug_string=q.toString(),q.debug_id=k.UTILITIES.generate_unique_id());return q};a.copy=function(b){var d=a.create(this.get_HTML(),this.get_style_attributes().slice(),this.get_description());
return this.add_to_copy(d,b)};a.match=function(a){return this.get_erased&&this.get_erased()?a.match_with_any_element?a.match_with_any_element():this:a.match_with_another_element_widget?a.match_with_another_element_widget(this):this};a.match_with_any_element=function(){return"matched"};a.match_with_another_element_widget=function(a){return this.get_HTML()===a.get_HTML()?"matched":a};a.compare_with=function(a){if(a.compare_with_other_element)return a.compare_with_other_element(this)};a.compare_with_other_element=
function(a){a=a.get_HTML().localeCompare(this.get_HTML());return 0>a?-1:0<a?1:a};a.create_backside=function(){return k.element_backside.create(this)};a.get_attribute_from_pending_css=function(a){var b=this.get_pending_css();if(b&&b[a]||(b=this.get_transform_css())&&b[a])return b[a]};a.get_attribute_from_current_css=function(a){var b=this.get_frontside_element(),d=b.style[a];""===d&&(d=$(b).css(a));return d?"number"===typeof d?d:d.replace("px",""):0};a.get_attribute=function(a){var b=this.get_attribute_from_pending_css(a);
return"undefined"!==typeof b?b:this.get_attribute_from_current_css(a)};a.set_attribute=function(a,b,d,e){var q,u;if(!this.get_frontside(!0).get_element())return!1;q=this.get_attribute_from_pending_css(a);if(q===b)return!1;"undefined"===typeof q&&(q=this.get_attribute_from_current_css(a));u=n(b,a);if("number"===typeof u){if(q==u)return!0;b=u}d&&k.robot.in_training&&k.robot.in_training.edited(this,{setter_name:"set_attribute",argument_1:a,argument_2:b,toString:"change the '"+a+"' style to "+b+" of",
button_selector:".toontalk-element-"+a+"-attribute-input"});this.add_to_css(a,b);e&&(b=this.get_style_attributes(),0>b.indexOf(a)&&b.push(a));this.rerender();return!0};a.dropped_on_style_attribute=function(a,b,d,e){var n,u,f;if(a){n=a.toString();if(a.is_of_type("number")){u=this.get_attribute(b);if("number"===typeof u)f=u;else if("auto"===u)switch(b){case "left":f=$(this.get_frontside_element()).offset().left;break;case "top":f=$(this.get_frontside_element()).offset().top;break;default:f=0}else f=
parseFloat(u);u=a.to_float();switch(n.substring(0,1)){case "-":n=f-u;break;case "*":n=f*u;break;case "/":n=f/u;break;case "^":n=Math.pow(f,u);break;default:n=f+u}this.set_attribute(b,n,!1);(d||e&&e.visible())&&this.get_backside().render()}a.get_infinite_stack()||a.remove();k.robot.in_training&&d&&k.robot.in_training.dropped_on(a,this.create_attribute_widget(b))}};a.get_attribute_widget=function(a){var b=this.get_attribute_widgets()[a];b||(b=this.create_attribute_widget(a),this.get_attribute_widgets()[a]=
b);return b};a.create_attribute_widget=function(a){var d=".toontalk-element-"+a+"-attribute-input",n=this.get_backside_element(),e=this.get_attribute(a),q=this,u=function(b){var d=f.get_attribute_owner(),e;b.currentTarget.toontalk_widget===d&&(e=$(d.get_frontside_element()).closest(".toontalk-top-level-backside").offset(),e||(console.log("Unable to find top-level backside of an element for its position. Perhaps is 'visible' but not attached."),e={left:0,top:0}),b="left"===a?b.pageX-e.left-d.drag_x_offset:
b.pageY-e.top-d.drag_y_offset,f.set_value_from_decimal(b),c.call(f))}.bind(this),f,w,c,p;n&&(d=$(n).find(d),0<d.length&&(d.get(0).toontalk_widget=this));f=k.number.create(0,1);f.element_widget=this;f.set_value_from_decimal(e);f.set_format("decimal");f.attribute=a;f.get_type_name=function(){return"element attribute"};p=f.toString;f.toString=function(){return p.call(this)+" ("+this.attribute+")"};w=f.equals;f.equals=function(b){return a===b.attribute?this.equals(b.element_widget):w.call(this,b)};(e=
this.get_original_copies()[a])?e.push(f):this.get_original_copies()[a]=[f];f.set_value=function(b){var c=q.get_original_copies()[a],d;this.get_attribute_owner().set_attribute(this.attribute,bigrat.toDecimal(b))&&c.forEach(function(a,c){d=a.set_value_from_sub_classes(b)});return d};c=f.update_display;f.update_display=function(){var a;this.get_erased()||(a=this.get_attribute_owner().get_attribute(this.attribute),f.set_value_from_decimal(a));c.call(this)};0<=b.indexOf(a)&&(this.on_update_display(function(){f.update_display();
return!0}),"left"===a||"top"===a)&&(e=this.get_frontside_element(),e.addEventListener("drag",u));f.copy=function(b){return b&&b.just_value?k.number.copy.call(this,b):this.add_to_copy(q.create_attribute_widget(a),b)};f.get_json=function(b){return{type:"attribute_number",attribute_name:a,element:k.UTILITIES.get_json(q,b)}};f.get_original_attribute_widget=function(){return q.get_original_copies()[a][0]};f.get_attribute_owner=function(){var a=function(b){if(b=b.get_parent_of_frontside())return b.is_backside()?
b:a(b.get_widget())},b=this.get_original_attribute_widget();if(b!==this)return b.get_attribute_owner();var c,b=a(this);if(!b||!b.is_of_type("element"))return q;b=b.get_widget();for(c=b.get_parent_of_backside();c&&c.is_of_type("element");)b=c.get_widget(),c=b.get_parent_of_backside();return b};return f};k.creators_from_json.attribute_number=function(a,b){return k.UTILITIES.create_from_json(a.element,b).create_attribute_widget(a.attribute_name)};a.update_display=function(){var a=this.get_frontside_element();
this.get_backside();var b=function(a){return this.get_image_element()?"image":$(a).is(".toontalk-plain-text-element")?"text":"element"}.bind(this),d,e;this.being_dragged||(this.get_erased&&this.get_erased()?$(a).css({opacity:0}):(this.get_erased&&"0"===$(a).css("opacity")&&$(a).css({opacity:1}),a.children.length===$(a).children(".ui-resizable-handle").length&&(d=document.createElement("div"),d.innerHTML=this.get_HTML(),a.appendChild(d),this.set_image_element(d,a),$(a).addClass("toontalk-element-frontside"),
"<"!==d.innerHTML.substring(0,1)&&((e=this.get_additional_classes())&&$(d).addClass(e),$(a).addClass("ui-widget toontalk-plain-text-element"))),k.UTILITIES.on_a_nest_in_a_box(a)&&(this.set_attribute("width",$(a).closest(".toontalk-box-hole").width(),!1),this.set_attribute("height",$(a).closest(".toontalk-box-hole").height(),!1)),this.apply_css(),this.fire_on_update_display_handlers(),a.title="Click to see the backside where you can place robots or change the style of this "+b(a)))};a.toString=function(){var a=
"element whose HTML is '"+k.UTILITIES.maximum_string_length(this.get_HTML(),40)+"'";k.debugging&&(a+=" ("+this.debug_id+")");return a};a.get_type_name=function(){return"element"};a.get_help_URL=function(){return"docs/manual/elements.html"};a.get_json=function(a){var b=this.get_style_attributes(),d=[],e=k.UTILITIES.remove_z_index(this.get_HTML()),n=encodeURIComponent(e);0===e.indexOf("<img src='data:image/")?(a.shared_html||(a.shared_html=[]),e=a.shared_html.indexOf(n),0>e&&(e=a.shared_html.push(n)-
1),a={shared_html_index:e}):a=n;b.forEach(function(a){d.push(a)});return{type:"element",html:a,attributes:d,attribute_values:d.map(this.get_attribute.bind(this)),additional_classes:this.get_additional_classes()}};k.creators_from_json.element=function(b,d){var k=decodeURIComponent("string"===typeof b.html?b.html:d.shared_html[b.html.shared_html_index]),e=a.create(k,b.attributes,b.description),q;q=d&&d.event?["left","top"]:[];b.attribute_values.forEach(function(a,d){var h=b.attributes[d];0>q.indexOf(h)&&
e.add_to_css(h,n(a)||a)});b.additional_classes&&e.set_additional_classes(b.additional_classes);return e};a.create_attribute_path=function(a,b){var d=k.path.get_path_to(a.element_widget,b);return this.extend_attribute_path(d,a.attribute)};a.extend_attribute_path=function(a,b){return{dereference:function(d,e,k){return a.dereference(e||d,void 0,k).get_attribute_widget(b)},toString:function(){return"the '"+b+"' property of "+a},get_json:function(){return{type:"path_to_style_attribute",attribute:b,element_widget_path:a.get_json()}}}};
k.creators_from_json.path_to_style_attribute=function(b){var d=k.UTILITIES.create_from_json(b.element_widget_path);return a.extend_attribute_path(d,b.attribute)};a.get_size_attributes=function(){return{width:this.get_attribute("width"),height:this.get_attribute("height")}};a.set_size_attributes=function(a,b){this.set_attribute("width",a);this.set_attribute("height",b);k.UTILITIES.set_timeout(function(){this.rerender()}.bind(this))};a.set_location_attributes=function(a,b){this.set_attribute("left",
a);this.set_attribute("top",b)};return a}(window.TOONTALK);window.TOONTALK.element_backside=function(k){var b=function(l,h,n){var e=function(a){var b=h.get_style_attributes();0>b.indexOf(a)&&(b.push(a),"left"===a?(a=h.get_frontside_element(),$(a).on("drag",function(a){var b=h.get_backside_element(),d=h.get_frontside_element();b&&d&&$(b).find(".toontalk-element-left-attribute-input").val(a.originalEvent.clientX)})):"top"===a&&(a=h.get_frontside_element(),$(a).on("drag",function(a){var b=h.get_backside_element(),
d=h.get_frontside_element();b&&d&&$(b).find(".toontalk-element-top-attribute-input").val(a.originalEvent.clientY)})))},q=function(f,q){var c=0<=h.get_style_attributes().indexOf(f),p=k.UTILITIES.create_check_box(c,"toontalk-style-attribute-check-box",f+"&nbsp;","Click to add or remove the '"+f+"' style attribute from the backside of this element."),c=k.UTILITIES.create_anchor_element("i",("transform-origin-x"===f||"transform-origin-y"===f?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin#":
d(f)?"https://developer.mozilla.org/en-US/docs/Web/CSS/transform#":"http://www.w3.org/community/webed/wiki/CSS/Properties/")+f),u=document.createElement("li");$(c).addClass("toontalk-help-button notranslate toontalk-attribute-help-button");$(c).css({color:"white"});c.translate=!1;c.lang="en";p.container.appendChild(c);p.button.addEventListener("click",function(c){if(p.button.checked)e(f);else{c=h.get_style_attributes();var d=c.indexOf(f);0<=d&&(c.splice(d,1),b(l,h,n))}a(n,h,h.get_backside())});u.appendChild(p.container);
q.appendChild(u)},u=function(a,b){var c,d;"string"===typeof a?q(a,b):a.label?(c=document.createElement("h3"),c.textContent=a.label,d=document.createElement("ul"),b.appendChild(c),b.appendChild(d),u(a.sub_menus,d)):a.forEach(function(a){u(a,b)})};$(l).is(".ui-accordion")&&$(l).accordion("destroy");$(l).empty();u([{label:"Geometry attributes",sub_menus:"left top width height z-index background-position".split(" ")},{label:"Color attributes",sub_menus:["background-color","color","opacity"]},{label:"Font attributes",
sub_menus:["font-size","font-weight"]},{label:"Visibility",sub_menus:["display","visibility"]},{label:"Transformations",sub_menus:["rotate","skewX","skewY","transform-origin-x","transform-origin-y"]}],l);$(l).accordion({active:0,heightStyle:"content"});return l},a=function(a,b,d){var e=b.get_style_attributes();b.get_frontside_element();$(a).empty();e.forEach(function(e){b.get_attribute(e);var n=document.createElement("tr"),f=document.createElement("td"),w=b.get_attribute_widget(e),c=w.get_frontside_element();
w.set_parent_of_frontside(d,!1,!0);w.set_infinite_stack(!0);a.appendChild(n);n.appendChild(f);f.appendChild(k.UTILITIES.create_text_element(e));f=document.createElement("td");n.appendChild(f);w.set_visible(!0);$(c).addClass("toontalk-element-attribute");f.appendChild(c);w.render()})},n=function(a){var b=$("<button>Add or remove style attributes</button>").button();b.addClass("toontalk-show-attributes-chooser-button");b.click(function(d){$(a).is(":visible")?($(a).hide(),b.button("option","label","Add or remove style attributes"),
b.attr("title","Click to add widgets for reading and writing style attributes of this element.")):($(a).show(),b.button("option","label","Hide style attributes list"),b.attr("title","Click to hide the list of attributes that can be added or removed."))});b.attr("title","Click to add widgets for reading and writing style attributes of this element.");return b.get(0)};return{create:function(d){var h=k.backside.create(d),t=h.get_element();d.get_HTML();var e=document.createElement("table"),q=document.createElement("div"),
u=n(q),f=k.backside.create_advanced_settings_button(h,d),w=k.UTILITIES.get_current_url_boolean_parameter("elementHTML",!1),c=w?"get_HTML":"get_text",p=h.update_display,y,C;d.update_display();y=d[c]().trim();0<y.length&&(C=k.UTILITIES.create_text_area(y,"toontalk-html-input","","Type here to edit the text."),y=function(a){a=C.button.value.trim();d.get_frontside_element();var b=w?"set_HTML":"set_text";d[b](a)&&k.robot.in_training&&k.robot.in_training.edited(d,{setter_name:b,argument_1:a,toString:"change the text to "+
a+" of",button_selector:".toontalk-html-input"})},$(C.container).resizable(),$(C.container).css({width:"100%"}),$(C.button).css({width:"100%"}),C.button.addEventListener("change",y),C.button.addEventListener("mouseout",y),t.appendChild(C.container));h.get_attributes_chooser=function(){return q};b(q,d,e);a(e,d,h);t.appendChild(q);t.appendChild(u);t.appendChild(e);t.appendChild(f);$(q).hide();$(q).addClass("toontalk-attributes-chooser");h.update_display=function(){C&&$(C.button).val(d[c]());a(e,d,h);
$(q).is(":visible")&&b(q,d,e);p()};$(t).find(".toontalk-hide-backside-button").click(function(a){$(q).hide()});h.add_advanced_settings();return h}}}(window.TOONTALK)})();window.TOONTALK.sensor=function(d){var k=Object.create(d.widget),b=function(a,b){"element"===a.get_type_name()&&(a.set_attribute("font-size",.5*$(b.get_frontside_element(!0)).height(),!1,!0),a.set_additional_classes("toontalk-string-value-from-sensor"),b.visible()&&a.rerender())};k.create=function(a,n,l,h,t,e){var q=d.nest.create(l,h,void 0,"sensor"),u=q.get_json,f=q.update_display,w=q.copy,c=function(a){var c=a[n],e=q.visible(),f=$(q.get_frontside_element()).closest(".toontalk-top-level-backside"),
g;if("keyCode"===n){if(16===c)return;c=String.fromCharCode(c);a.shiftKey||(c=c.toLowerCase())}switch(typeof c){case "number":g=d.number.create(Math.round(c),1);break;case "string":g=d.element.create(c,void 0,void 0,"toontalk-string-value-from-sensor");b(g,q);break;case "boolean":g=d.element.create(c.toString(),void 0,void 0,"toontalk-string-value-from-sensor");b(g,q);break;case "undefined":d.UTILITIES.report_internal_error("No "+n+" in sensor "+k);return}e?(a=d.bird.create(),q.add_to_top_level_backside(a),
a.animate_delivery_to(g,q,q,f.width()/2,f.height())):q.add_to_contents(g)}.bind(this);q.copy=function(b){var c;if(b&&b.just_value&&this.has_contents())return w.call(this,b);c=d.sensor.create(a,n,l,void 0,t,b?void 0:e);return q.add_to_copy(c,b)};q.get_json=function(b){var c=u.call(this,b);c.type="sensor";c.event_name=a;c.attribute=n;c.active=t;c.sensor_of=e&&d.UTILITIES.get_json(e,b);return c};q.update_display=function(){var a=$(this.get_frontside_element());f.call(this);t||a.is(".toontalk-top-level-resource")?
(a.addClass("toontalk-sensor-nest"),a.removeClass("toontalk-sensor-inactive-nest")):(a.addClass("toontalk-sensor-inactive-nest"),a.removeClass("toontalk-sensor-nest"));a.removeClass("toontalk-empty-nest")};q.get_type_name=function(){return"sensor"};q.get_help_URL=function(){return"docs/manual/sensors.html"};q.toString=function(){return"a sensor that receives the '"+n+"' attribute of "+a+" events"};q.get_active=function(){return t};q.set_active=function(b,d){if(t!==b||d)b?e?e.get_frontside_element().addEventListener(a,
c):window.addEventListener(a,c):e?e.get_frontside_element().removeEventListener(a,c):window.removeEventListener(a,c),t=b};q.set_active(t,!0);q.create_backside=function(){return d.sensor_backside.create(this)};q.get_event_name=function(){return a};q.set_event_name=function(b){var c=t;a&&t&&this.set_active(!1);a=b;c&&this.set_active(!0)};q.get_attribute=function(){return n};q.set_attribute=function(a){n=a};q.match=function(a){return this};q.set_sensor_of=function(a){e=a};q.get_custom_title_prefix=function(){return"Use this nest to receive notices of events."};
return q};d.creators_from_json.sensor=function(a,k){var l=d.UTILITIES.create_array_from_json(a.contents,k),h=d.sensor.create(a.event_name,a.attribute,a.description,l,!1);a.sensor_of?d.UTILITIES.set_timeout(function(){h.set_sensor_of(d.UTILITIES.create_from_json(a.sensor_of,k));h.set_active(a.active)}):h.set_active(a.active);0<l.length&&setTimeout(function(){l.forEach(function(a){b(a.get_widget(),h)})},500);return h};return k}(window.TOONTALK);
window.TOONTALK.sensor_backside=function(d){return{create:function(k){var b=d.UTILITIES.create_text_input(k.get_event_name(),"toontalk-sensor-event-name-input","Event name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;","Type here the event name.","https://developer.mozilla.org/en-US/docs/Web/Events/"+k.get_event_name()),a=d.UTILITIES.create_text_input(k.get_attribute(),"toontalk-sensor-event-attribute-input","Event attribute","Type here the event attribute name.","https://developer.mozilla.org/en/docs/Web/API/Event"),
n=d.UTILITIES.create_check_box(k.get_active(),"toontalk-sensor-active-check-box","Listening to events","Check the box if you want to make this sensor active."),l=d.nest_backside.create(k),h=l.get_element(),t=$(h).find(".toontalk-settings-backside-button").get(0);b.button.addEventListener("change",function(){k.set_event_name(b.button.value.trim())});a.button.addEventListener("change",function(){k.set_attribute(a.button.value.trim())});$(n.button).click(function(a){var b=n.button.checked;k.set_active(b);
d.robot.in_training&&d.robot.in_training.edited(robot,{setter_name:"set_active",argument_1:b,toString:"change to "+(b?"active":"inactive")+" of the "+k,button_selector:".toontalk-sensor-active-check-box"});k.render();a.stopPropagation()});h.insertBefore(b.container,t);h.insertBefore(a.container,t);h.insertBefore(n.container,t);return l}}}(window.TOONTALK);window.TOONTALK.tool=function(d){return{add_listeners:function(k,b){var a,n,l,h,t,e=function(b){var c=k.getBoundingClientRect();n=d.UTILITIES.get_mouse_or_first_touch_event_attribute("clientX",b)-c.left;l=d.UTILITIES.get_mouse_or_first_touch_event_attribute("clientY",b)-c.top;h=c.height;b.preventDefault();$(k).addClass("toontalk-tool-held");a=$(k).offset();document.addEventListener("mousemove",q);document.addEventListener("touchmove",q);document.addEventListener("mouseup",u);document.addEventListener("touchend",
u);d.debugging&&0===d.debugging.indexOf("touch")&&(d.debugging+="\nmouse_down at "+Date.now());$(".ui-tooltip").each(function(){$(this).hide()})},q=function(a){var b=d.UTILITIES.find_widget_on_page(a,k,n,l-h/2),e,q,u;a.preventDefault();$(".ui-tooltip").each(function(){$(this).hide()});q=f(a);u=d.UTILITIES.get_mouse_or_first_touch_event_attribute("pageX",a)-q.deltaX-n;a=d.UTILITIES.get_mouse_or_first_touch_event_attribute("pageY",a)-q.deltaY-l;k.style.left=u+"px";k.style.top=a+"px";d.debugging&&0===
d.debugging.indexOf("touch")&&(d.debugging+="\nmouse_move at "+Date.now()+" now at "+k.style.left+", "+k.style.top);if(b&&b.is_of_type("top-level"))t&&(d.UTILITIES.remove_highlight(),t=void 0);else{if(b&&(e=b.get_frontside_element(),e===t))return;t=e;d.UTILITIES.highlight_element(t)}},u=function(e){var c=d.UTILITIES.find_widget_on_page(e,k,n,l-h/2),f;e.preventDefault();t&&d.UTILITIES.remove_highlight();c&&c.add_copy_to_container&&(f=c.top_level_widget(),b.apply_tool(c,e),f.backup_all());!c&&b.nothing_under_tool&&
b.nothing_under_tool();$(k).removeClass("toontalk-tool-held");$(k).addClass("toontalk-tool-returning");d.UTILITIES.add_one_shot_event_handler(k,"transitionend",1E3,function(){$(k).removeClass("toontalk-tool-returning")});d.UTILITIES.set_timeout(function(){k.style.left=a.left+"px";k.style.top=a.top+"px"});document.removeEventListener("mousemove",q);document.removeEventListener("touchmove",q);document.removeEventListener("mouseup",u);document.removeEventListener("touchend",u);d.debugging&&0===d.debugging.indexOf("touch")&&
(d.debugging+="\nmouse_up at "+Date.now(),alert(d.debugging),d.debugging="touch")},f=function(a){var b=0,d=0;20>a.clientX?b=-20:a.clientX+20>window.innerWidth&&(b=20);20>a.clientY?d=-20:a.clientY+20>window.innerHeight&&(d=20);window.scrollBy(b,d);return{deltaX:b,deltaY:d}};k.addEventListener("mousedown",e);k.addEventListener("touchstart",e)}}}(window.TOONTALK);window.TOONTALK.vacuum=function(d){var k=Object.create(null),b={suck:"Drag this vacuum over the thing you want to remove. Click or type 'e' to switch to erasing. Click twice or type 'r' to restore previously removed or erased things.",erase:"Drag this vacuum over the thing you want to erase (or un-erase). Click twice or type 's' to switch to sucking. Click or type 'r' to restore contents.",restore:"Drag this over the work area. Each time you release it a widget is restored. Click or type 's' to switch to sucking. Click twice or type 'e' to switch to erasing."},
a={suck:"toontalk-vacuum-s",erase:"toontalk-vacuum-e",restore:"toontalk-vacuum-r"},n={suck:"erase",erase:"restore",restore:"suck"};k.create=function(){var k,h,t,e=[],q=function(b){h!==b&&(h=b,$(k).removeClass(t),t=a[h],$(k).addClass(t),u())},u=function(){k.title="restore"===h&&0===e.length?"The vacuum is empty. Type 's' to switch to sucking. Type 'e' to switch to erasing.":b[h]};return{apply_tool:function(a,b){var c,n;"suck"===h?a.remove&&"top-level"!==a.get_type_name()&&(d.robot.in_training&&b&&
d.robot.in_training.removed(a),a.remove(b),e.push(a)):"erase"===h||"restore"===h&&a.get_erased&&a.get_erased()?"top-level"!==a.get_type_name()&&(c=!a.get_erased(),a.set_erased(c,!0),d.robot.in_training&&b&&d.robot.in_training.set_erased(a,c)):"restore"===h&&0<e.length&&(c=e.pop(),n=a.add_to_top_level_backside(c,!0),c=$(k).offset(),c.left-=$(n).width(),d.UTILITIES.set_absolute_position($(n),c))},nothing_under_tool:function(){q(n[h])},get_element:function(){k||(k=document.createElement("div"),$(k).addClass("toontalk-vacuum"),
d.tool.add_listeners(k,this),q("suck"),document.addEventListener("keyup",function(a){a=String.fromCharCode(a.keyCode);"s"===a||"S"===a?q("suck"):"e"===a||"E"===a?q("erase"):"r"!==a&&"R"!==a||q("restore")}),u());return k}}};d.creators_from_json.vacuum=function(a,b){var k=d.vacuum.create();a.mode&&d.UTILITIES.set_timeout(function(){k.set_mode(a.mode)});return k};return k}(window.TOONTALK);window.TOONTALK.wand=function(d){var k=Object.create(null);k.create=function(){var b;return{apply_tool:function(a){"top-level"!==a.get_type_name()&&a.add_copy_to_container()},get_element:function(){b||(b=document.createElement("div"),$(b).addClass("toontalk-wand"),b.title="Drag this magic wand over the thing you want to copy.",d.tool.add_listeners(b,this));return b}}};d.creators_from_json.wand=function(){return d.wand.create()};return k}(window.TOONTALK);window.TOONTALK.SETTINGS=function(d){var k=[],b=function(b,h,t){var e=[],q=d.UTILITIES.create_local_files_table(),u=function(e,h){var c=function(a){a||h.newPanel.appendChild(d.UTILITIES.create_text_element("Error connecting to cloud"))},k=h.newPanel.is(".dataTable");$(".dataTables_info").hide();$(".dataTables_wrapper").hide();h.newPanel.is(".toontalk-programs-in-cloud-table")?k?($("#tab-1_info").show(),$("#tab-1_wrapper").show()):a(h.newPanel,"program",b,t,c):h.newPanel.is(".toontalk-pages-in-cloud-table")?
k?($("#tab-2_info").show(),$("#tab-2_wrapper").show()):a(h.newPanel,"page",b,t,c):($("#tab-0_info").show(),$("#tab-0_wrapper").show())};e[0]="Programs stored in browser";n(b,q,!1,t);k[0]=q;h?(e[1]="Programs in cloud",k[1]=d.UTILITIES.create_file_data_table("toontalk-programs-in-cloud-table"),e[2]="Published pages",k[2]=d.UTILITIES.create_file_data_table("toontalk-pages-in-cloud-table"),h=d.UTILITIES.create_tabs(e,k),t.appendChild(h),$(h).on("tabsactivate",u)):t.appendChild(d.UTILITIES.create_tabs(e,
k))},a=function(a,b,k,e,q){d.google_drive.get_toontalk_files(!1,b,function(u){var f;"string"===typeof u?f=u:u.error&&(f=u.error.message);f?"Need to authorize"===f||"Login Required"===f?d.google_drive.authorize(q):(console.log(f),console.log("Google drive status: "+d.google_drive.get_status()),q(null)):(f="program"===b&&"toontalk-file-load-button",d.UTILITIES.become_file_data_table(a,u.items,!0,f),n(k,a.get(0),!0,e),q(a.get(0)))})},n=function(a,b,d,e){$(b).find(".toontalk-file-load-button").click(function(b){var h=
function(){$(e).remove()},f=function(){a.set_setting("program_name",b.target.textContent);a.load(d,h)}.bind(this);a.save(!0,void 0,f)})};return{open:function(a){var h=document.createElement("div"),k=a.get_backside_element(),e=a.get_setting("program_name"),n=d.UTILITIES.create_text_input(e,"toontalk-program-name-input","Current program name:","Edit this to change the name of your program","docs/manual/settings.html"),u=d.UTILITIES.create_close_button(function(){$(h).remove()},"Click to close the settings panel."),
f=d.UTILITIES.create_text_element("How should your program be saved?"),w=d.UTILITIES.create_check_box(a.get_setting("auto_save_to_google_drive"),"toontalk-save-setting","Save automatically to my Google Drive",'Check this if you want your programs automatically saved to a "ToonTalk Programs" folder in your Google Drive.'),c=d.UTILITIES.create_check_box(a.get_setting("auto_save_to_local_storage"),"toontalk-save-setting","Save automatically to this browser's local storage","Check this if you want your programs automatically saved in this browser's local storage."),
p=d.UTILITIES.create_button("Save to Google Drive now","toontalk-save-button","Click to save your program now to your Google Drive account.",function(){a.save(!0,{google_drive:!0})}),y=d.UTILITIES.create_button("Save to browser's storage now","toontalk-save-button","Click to save your program now to this browser's local storage.",function(){a.save(!0,{local_storage:!0})}),C=d.UTILITIES.create_button("Login to Google","toontalk-google-login-button","Click to log in to Google to authorize use of your Google Drive.",
function(){d.google_drive.authorize(function(){$(C).remove()})}),E=d.UTILITIES.create_button("Publish","toontalk-publish-button","Click to publish your program by generating a Google Drive URL.",function(){d.UTILITIES.display_message("Creating your web page...");a.publish(g,!1)}),g=function(b,c){var g=document.createElement("span"),e=d.google_drive.google_drive_url(b.id);d.TRANSLATION_ENABLED&&(e=d.UTILITIES.add_URL_parameter(e,"translate","1"));g.innerHTML="Published: <a href='"+e+"' target='_blank'>"+
a.get_setting("program_name")+"</a>";d.UTILITIES.display_message("Your web page is ready for you to edit. Just click on the link.");$(n.container).children("tr").append(d.UTILITIES.create_table_entry(g))},z=document.createElement("div"),x=d.google_drive&&"undefined"!==typeof gapi?d.google_drive.get_status():"Google Drive API not loaded",O=!0;$(h).addClass("toontalk-settings-panel").css({width:$(k).width()+29,height:$(k).height()+50,left:-2,top:-25,"z-index":d.UTILITIES.next_z_index()});h.appendChild(u);
n.button.addEventListener("change",function(){var b=n.button.value.trim();e!==b&&a.save(!0,void 0,function(){e=b;a.set_setting("program_name",b);a.load(!0,function(){setTimeout(function(){$(h).css({"z-index":d.UTILITIES.next_z_index()})},500)},function(){a.save(!0,void 0,function(){$(".toontalk-settings-panel").remove();d.UTILITIES.display_message("Your program was copied and the new copy's name is "+a.get_setting("program_name")+".")})})})});w.button.addEventListener("click",function(b){a.save(!0,
{auto_save_to_google_drive:c.button.checked,gooogle_drive:!0});a.set_setting("auto_save_to_google_drive",w.button.checked);w.button.checked?$(p).hide():$(p).show()});c.button.addEventListener("click",function(b){a.save(!0,{auto_save_to_local_storage:c.button.checked,local_storage:!0});a.set_setting("auto_save_to_local_storage",c.button.checked);c.button.checked?$(y).hide():$(y).show()});h.appendChild(z);$(f).css({"font-weight":"bold","font-size":24,color:"navy"});z.appendChild(f);z.appendChild(n.container);
z.appendChild(w.container);z.appendChild(c.container);w.container.appendChild(d.UTILITIES.create_space());w.container.appendChild(p);a.get_setting("auto_save_to_google_drive")&&$(p).hide();c.container.appendChild(d.UTILITIES.create_space());c.container.appendChild(y);a.get_setting("auto_save_to_local_storage")&&$(y).hide();"Need to authorize"===x?(w.container.appendChild(d.UTILITIES.create_space()),w.container.appendChild(C)):"Authorized"!==x&&"Ready"!==x&&"Authorized but not yet ready"!==x&&(O=!1,
setTimeout(function(){w.button.disabled=!0;$(E).button("option","disabled",!0);$(p).button("option","disabled",!0);w.container.title="Inactived because attempt to connect to Google Drive returned: "+x;E.title=w.container.title;p.title=w.container.title},1));$(n.container).children("tr").append(d.UTILITIES.create_table_entry(E));b(a,O,h);k.appendChild(h)}}}(window.TOONTALK);window.TOONTALK.DEFAULT_SETTINGS={program_name:"My first program",auto_save_to_google_drive:!0,auto_save_to_local_storage:!0};window.TOONTALK.DISPLAY_UPDATES=function(d){var k=[];return{pending_update:function(b){b.update_display&&(0<=k.indexOf(b)||k.push(b))},update_display:function(){var b,a;0!==k.length&&(b=k,a=function(b,d){$(b).children().each(function(b,k){$(k).css({"z-index":d+1});a(k,d+1)})},k=[],b.forEach(function(b){var k=b.get_frontside_element&&b.get_frontside_element(),h,t,e;b.update_display();h=$(k).parent().closest(".toontalk-side");h.is("*")&&(t=d.UTILITIES.get_style_numeric_property(k,"z-index"),e=d.UTILITIES.get_style_numeric_property(h.get(0),
"z-index"),e||(e=d.UTILITIES.next_z_index(),h.css({"z-index":e})),!t||h.is(".toontalk-top-level-backside")?(t=d.UTILITIES.next_z_index(),$(k).css({"z-index":t})):t>=e&&(t=e+1,$(k).css({"z-index":t})),a(k,t));k&&!$(k).is(".toontalk-top-level-resource, .toontalk-bird, .toontalk-nest, .toontalk-box-hole, .toontalk-plain-text-element, .toontalk-conditions-contents, .toontalk-robot, .toontalk-widget, .toontalk-held-by-robot")&&d.UTILITIES.set_timeout(function(){h.is(".toontalk-box-hole")?$(k).is(".ui-resizable")&&
$(k).resizable("destroy"):$(k).is(".ui-resizable")||d.UTILITIES.make_resizable($(k),b)})}))},run_cycle_is_over:function(){this.update_display()}}}(window.TOONTALK);window.TOONTALK.actions=function(d){d.creators_from_json.body=function(k,b){var a=d.actions.create();b.body=a;a.initialise_steps(d.UTILITIES.create_array_from_json(k.steps,b));return a};return{create:function(k){var b=Object.create(this),a=[];k||(k=[]);b.copy=function(){return d.actions.create(d.UTILITIES.copy_array(k))};b.get_steps=function(){return k};b.initialise_steps=function(a){k=a};b.is_empty=function(){return 0===k.length};b.reset_steps=function(){k=[];this.reset_newly_created_widgets()};
b.reset_newly_created_widgets=function(){a=[]};b.add_step=function(a,b){k.push(a);b&&this.add_newly_created_widget(b)};b.add_newly_created_widget_if_new=function(b){0<=a.indexOf(b)||this.add_newly_created_widget(b)};b.add_newly_created_widget=function(b){d.debugging&&0<=a.indexOf(b)?console.log("add_newly_created_widget called with not new widget."):a.push(b)};b.get_newly_created_widgets=function(){return a};b.get_path_to=function(b,k){var h,t;a.some(function(a,q){if(a===b)return h=d.newly_created_widgets_path.create(q),
!0;if(a.get_path_to&&(t=a.get_path_to(b,k)))return h=d.newly_created_widgets_path.create(q),h.next=t,!0});return h};b.dereference=function(b){d.debugging&&!a[b]&&d.UTILITIES.report_internal_error("Expected to find the "+(b+1)+"th newly created widget.");return a[b]};return b},run_unwatched:function(d,b,a,n,l){var h=this.get_steps();l||(l=0);n.run_next_step=function(){if(l<h.length){var t=h[l];l++;t.run_unwatched(d,b,n)}else n.get_run_once()||n.get_first_in_team().run(d,b,a)};n.run_next_step()},run_watched:function(k,
b,a,n){var l=this.get_steps(),h=n.get_frontside_element(),t=h.parentElement,e=function(){$(h).addClass("toontalk-side-animating");d.UTILITIES.set_position_relative_to_top_level_backside($(h),u);setTimeout(function(){t.appendChild(h);d.UTILITIES.set_absolute_position($(h),u);n.set_animating(!1);n.get_run_once()||n.get_first_in_team().run(k,b,a);n.render()},1E3)},q=0,u=$(h).offset(),f=$(h).position(),w=$(h).width(),c=$(h).height(),p=$(h).closest(".toontalk-backside"),y=p.get(0).getBoundingClientRect(),
C=$(h).closest(".toontalk-top-level-backside").offset(),E=k.get_backside();0===w&&($(h).css({width:"",height:""}),w=$(h).width(),c=$(h).height());C||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),C={left:0,top:0});if(u.left<y.left-C.left||u.top<y.top-C.top||u.left+w>y.right+C.left||u.top+c>y.bottom+C.top)u=p.offset(),u.left+=p.width()/2,u.top+=p.height()-c;n.start_position=f;n.run_next_step=function(){E&&E.visible()?setTimeout(function(){if(q<l.length){var a=
l[q];q++;a.run_watched(k,b,n);n.get_thing_in_hand()&&(n.get_thing_in_hand().save_dimensions(),n.render())}else e()},500):(n.set_animating(!1),$(h).css({width:"",height:""}),h.style.left=f.left+"px",h.style.top=f.top+"px",t.appendChild(h),this.run_unwatched(k,b,a,n,q))}.bind(this);n.set_animating(!0,u);n.run_next_step();return!0},toString:function(){var d="",b=this.get_steps();b.forEach(function(a,n){d+=a.toString();d=n===b.length-2?d+" and \n":n<b.length-2?d+", \n":d+"."});return d},get_json:function(k){return{type:"body",
steps:d.UTILITIES.get_json_of_array(this.get_steps(),k)}}}}(window.TOONTALK);
window.TOONTALK.newly_created_widgets_path=function(d){d.creators_from_json.newly_created_widgets_path=function(k){return d.newly_created_widgets_path.create(k.index)};return{create:function(k){return{dereference:function(b,a,n){b=n.get_body().dereference(k);return this.next?d.path.dereference_path(this.next,b,a,n):b},toString:function(){var b;switch(k){case 0:b="first";break;case 1:b="second";break;case 2:b="third";break;default:b=k+1+"th"}return"the "+b+" widget he created"},get_json:function(){return{type:"newly_created_widgets_path",
index:k}}}}}}(window.TOONTALK);window.TOONTALK.robot_action=function(d){var k={copy:function(a,b,d,f){f.add_newly_created_widget(a.copy());return!0},"pick up":function(a,b,d,f){f.set_thing_in_hand(a);return!0},"pick up a copy of":function(a,b,d,f){a=a.copy();f.add_newly_created_widget(a);f.set_thing_in_hand(a);return!0},"drop it on":function(a,b,h,f,k){if(a)if(b=f.get_thing_in_hand()){if(b.drop_on)return b.drop_on(a,!1,void 0,f),f.set_thing_in_hand(void 0),a.visible&&a.visible()&&a.render(),b.robot_waiting_before_next_step===f?
(k&&k.running_watched||(b.robot_waiting_before_next_step=void 0),!1):!0;d.UTILITIES.report_internal_error("Thing in robot's hand ("+b+") doesn't handle 'drop_on'. Robot that "+f)}else d.UTILITIES.report_internal_error("The robot that '"+f.toString()+"' is executing drop_on but has nothing in its hand.");else d.UTILITIES.report_internal_error("The robot that '"+f.toString()+"' is executing drop_on but doesn't know where to drop what its holding")},remove:function(a,b,d,f){a.remove();return!0},erased_widget:function(a,
b,d,f,h){a.set_erased(h.erased);return!0},edit:function(a,b,h,f,k){if(a[k.setter_name])return k.argument_2?a[k.setter_name].call(a,k.argument_1,k.argument_2,a.visible()):a[k.setter_name].call(a,k.argument_1,a.visible()),!0;d.UTILITIES.report_internal_error(a+" cannot be edited.")},"add to the top-level backside":function(a,b,d,f,h){f.visible()||(f=a.get_frontside_element(!0),d=$(b.get_frontside_element()).position(),b=$(b.get_frontside_element()).closest(".toontalk-top-level-backside").get(0),$(f).css({left:d.left,
top:d.top}),b.appendChild(f),b.toontalk_widget.add_backside_widget(a),a.animate_to_element(b));return!0}},b=function(a,b,d,f,h){b=f.get_thing_in_hand();f.get_frontside_element();var c=a.get_element();d=$(c).width()/2;c=$(c).height()/2;f.animate_to_widget(a,h,.25,d,c);b&&f.render()},a=function(a,b){var d=a.get_backside_element(!0);return $(d).find(b).get(0)},n=function(b,d,h,f,k,c){var l=a(b,c),n=f.get_frontside_element(),t=l&&$(l).is(":visible"),E=function(){k();$(l).addClass("ui-state-active");setTimeout(function(){$(l).removeClass("ui-state-active");
!t&&b.get_backside()&&b.get_backside().hide_backside();f.run_next_step()},500)};d=function(){f.animate_to_element(l,E,.25,0,-$(n).height())};!t&&b.open_backside?b.open_backside(d):d()},l=function(a,b,d,f,h,c){f.get_frontside_element();f.carrying_tool=c;f.update_display();f.animate_to_element(a.get_frontside_element(),function(){h();f.carrying_tool=void 0;f.update_display();f.run_next_step()},.25,0,0)},h=function(a,b,d,f,h){var c=a.get_parent_of_frontside();l(a,b,d,f,function(){h();c&&"top-level"!==
c.get_widget().get_type_name()&&c.update_display&&c.update_display();a.render()},"toontalk-vacuum-ready-small")},t={copy:function(a,b,d,f,h){l(a,b,d,f,function(){h();a.add_copy_to_container(f.get_recently_created_widget())},"toontalk-wand-small")},"pick up":function(a,h,k,f,l){var c=a.get_frontside_element(),n=function(){l();f.run_next_step()};"empty hole"===a.get_type_name()?d.UTILITIES.report_internal_error("Robot trying to pick up an empty hole."):a.save_dimensions()?($(c).css({width:c.offsetWidth+
"px",height:c.offsetHeight+"px"}),b(a,h,k,f,n)):n()},"pick up a copy of":function(a,d,h,f,k){b(a,d,h,f,function(){k();f.get_recently_created_widget().set_visible(!0);f.update_display();f.run_next_step()})},"drop it on":function(a,h,k,f,l){var c=f.get_thing_in_hand(),n;c?(n=$(c.get_frontside_element()),b(a,h,k,f,function(){var a=n.offset();n.removeClass("toontalk-held-by-robot");l();c.drop_on&&($(f.get_frontside_element()).closest(".toontalk-top-level-backside").append(n.get(0)),d.UTILITIES.set_absolute_position(n,
a),c.restore_dimensions(),c.robot_waiting_before_next_step===f?c.robot_waiting_before_next_step=void 0:(f.set_thing_in_hand(void 0),f.run_next_step()),f.rerender())})):(d.UTILITIES.report_internal_error("Expected the robot to be holding something."),console.log("The robot is "+f),b(a,h,k,f,l))},remove:h,erased_widget:h,edit:function(a,b,d,f,h,c){n(a,b,d,f,function(){a.get_backside()&&a.get_backside().update_display();h()},c.button_selector)},"add to the top-level backside":function(a,b,d,f,h){h();
f.run_next_step()}};d.creators_from_json.robot_action=function(a,b){return a.additional_info?d.robot_action.create(d.path.create_from_json(a.path,b),a.action_name,a.additional_info):d.robot_action.create(d.path.create_from_json(a.path,b),a.action_name)};return{create:function(a,b,h){var f=Object.create(this),l=k[b],c=t[b];c||(c=function(a,b,c,d,g){setTimeout(function(){continuation(a)},3E3)});a||d.UTILITIES.report_internal_error("path undefined in "+b+" action");l||d.UTILITIES.report_internal_error("no run_function for "+
b);f.run_unwatched=function(b,c,f){var k=d.path.dereference_path(a,b,c,f);if(!k)return d.UTILITIES.report_internal_error("Unable to dereference path: "+d.path.toString(a)+" in context: "+b.toString()),!1;l(k,b,c,f,h)&&f.run_next_step()};f.run_watched=function(b,f,k){var n=d.path.dereference_path(a,b,f,k),g=function(){h||(h={});h.running_watched=!0;l(n,b,f,k,h)};n?(n.set_visible(!0),c(n,b,f,k,g,h)):d.UTILITIES.report_internal_error("Unable to dereference the path: "+d.path.toString(a)+" in context: "+
b.toString())};f.toString=function(){return b+" "+d.path.toString(a)};f.get_json=function(c){return{type:"robot_action",action_name:b,path:d.path.get_json(a,c),additional_info:h}};return f}}}(window.TOONTALK);window.TOONTALK.queue=function(d){return{create:function(){var k=Object.create(this);k.to_run=d.UTILITIES.create_queue();return k},enqueue:function(k){if(d.debugging&&this.to_run.does_any_item_satisfy(function(b){return b.robot===k.robot}))console.log("The same robot is being queued twice."),console.log("Robot is "+k.robot);else return this.to_run.enqueue(k)},maximum_run:50,paused:!1,run:function(){for(var k,b=Date.now()+this.maximum_run;!(this.to_run.isEmpty()||this.paused||Date.now()>=b);)k=this.to_run.dequeue(),
k.robot.run_actions(k.context,k.top_level_context,k.queue);d.DISPLAY_UPDATES.run_cycle_is_over();d.UTILITIES.set_timeout(function(){this.run()}.bind(this),this.to_run.isEmpty()?this.maximum_run:0)}}}(window.TOONTALK);window.TOONTALK.path=function(d){d.creators_from_json["path.to_entire_context"]=function(){return d.path.to_entire_context()};d.creators_from_json["path.top_level_backside"]=function(){return d.path.top_level_backside};d.creators_from_json["path.to_backside_widget_of_context"]=function(k){return d.path.get_path_to_backside_widget_of_context(k.type_name)};d.creators_from_json["path.to_resource"]=function(k,b){return d.path.get_path_to_resource(d.UTILITIES.create_from_json(k.resource,b))};return{get_path_to:function(k,
b){var a=function(a,b){var h=b.get_context(),k=b.get_body(),e,q;if(h===a)return d.path.to_entire_context();q=a.get_type_name();if("top-level"===q)return d.path.top_level_backside;if(e=k.get_path_to(a,b))return e;if("element attribute"===q&&a.get_original_attribute_widget()===a)return d.element.create_attribute_path(a,b);if(h.get_path_to&&(k=h.get_path_to(a,b)))return e=d.path.to_entire_context(),e.next=k,e;h.backside_widgets.some(function(h){h=h.get_widget();var f;if(h===a||h.top_contents_is&&h.top_contents_is(a))return e=
d.path.get_path_to_backside_widget_of_context(h.get_type_name()),b.add_to_backside_conditions(h),!0;if(h.get_path_to&&(f=h.get_path_to(a,b)))return e=d.path.get_path_to_backside_widget_of_context(h.get_type_name()),e.next=f,b.add_to_backside_conditions(h),!0});return e?e:d.path.get_path_to_resource(a.copy())}(k,b);a&&k.dereference_contents&&(d.path.path_end(a).not_to_be_dereferenced=!0);!a||"pick up"!==b.current_action_name&&"remove"!==b.current_action_name||(d.path.path_end(a).removing_widget=!0);
return a},path_end:function(d){for(;d.next;)d=d.next;return d},dereference_path:function(d,b,a,n){return d?d.dereference?d.dereference(b,a,n):b.dereference(d,a,n):b},continue_dereferencing_path:function(d,b,a,n){return d.next?b.dereference_contents&&!d.next.not_to_be_dereferenced?b.dereference_contents(d.next,a,n):b.dereference(d.next,a,n):b.dereference_contents&&!d.not_to_be_dereferenced?b.dereference_contents(d,a,n):b},toString:function(k){return k.next?(d.path.toString(k.next),d.path.toString(k.next)+
"of "+k.toString()):k.toString()},get_json:function(k,b){var a;if(!k.get_json)return k;a=k.get_json(b);k.next&&(a.next_path=d.path.get_json(k.next,b));k.removing_widget&&(a.removing_widget=!0);k.not_to_be_dereferenced&&(a.not_to_be_dereferenced=!0);return a},to_entire_context:function(){return{dereference:function(k,b,a){return d.path.continue_dereferencing_path(this,k,b,a)},toString:function(){return"what he's working on"},get_json:function(){return{type:"path.to_entire_context"}}}},get_path_to_resource:function(k,
b){k=k.get_widget();return{dereference:function(a,b,l){a=k.copy();var h,t,e;l.add_newly_created_widget(a);l.visible()&&!k.visible()&&(h=d.UTILITIES.find_resource_equal_to_widget(k))&&(e=a.get_frontside_element(),t=$(h).position(),d.UTILITIES.set_timeout(function(){$(e).css({left:t.left,top:t.top,width:h.offsetWidth,height:h.offsetHeight})}));return a},toString:function(){return d.UTILITIES.add_a_or_an(k.toString())},get_json:function(){return{type:"path.to_resource",resource:d.path.get_json(k,d.UTILITIES.fresh_json_history())}}}},
get_path_to_backside_widget_of_context:function(k){return{dereference:function(b,a,n){var l;b.backside_widgets.some(function(a){if(a.get_widget().is_of_type(k))return l=a.get_widget(),!0});if(l)return d.path.continue_dereferencing_path(this,l,a,n)},toString:function(){var b="the "+k+" on the back of what he's working on";return this.removing_widget?"what is on "+b:b},get_json:function(){return{type:"path.to_backside_widget_of_context",type_name:k}}}},create_from_json:function(k,b){var a=d.UTILITIES.create_from_json(k,
b),n;k.next_path&&(n=d.UTILITIES.create_from_json(k.next_path,b),k.next_path.removing_widget&&(n.removing_widget=!0),k.next_path.not_to_be_dereferenced&&(n.not_to_be_dereferenced=!0),a.next=n);k.removing_widget&&(a.removing_widget=!0);k.not_to_be_dereferenced&&(a.not_to_be_dereferenced=!0);return a},top_level_backside:{dereference:function(d,b,a){return d.ancestor_of_type("top-level")},toString:function(){return"the top-level backside"},get_json:function(){return{type:"path.top_level_backside"}}}}}(window.TOONTALK);window.TOONTALK.publish=function(d){var k=function(b,a,d){var k='<!DOCTYPE html>\n<html>\n<head>\n<link rel="stylesheet" media="all" href="https://toontalk.github.io/ToonTalk/toontalk.css">\n<link href="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/css/font-awesome.min.css" rel="stylesheet" type="text/css" />\n<link href="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/css/froala_editor.min.css" rel="stylesheet" type="text/css" />\n<script src="https://toontalk.github.io/ToonTalk/compile/toontalk.js">\x3c/script>\n<script src="https://toontalk.github.io/ToonTalk/libraries/jquery-ui-1.11.2.custom/jquery-ui.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/froala_editor.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/block_styles.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/colors.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/font_family.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/font_size.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/lists.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/tables.min.js">\x3c/script>\n<script src="https://dl.dropboxusercontent.com/u/51973316/ToonTalk/libraries/froala-wysiwyg-editor/js/plugins/video.min.js">\x3c/script>\n<title>\n'+
b+'</title>\n<link rel="shortcut icon" href="favicon.ico" />\n</head>\n<body>\n';a.forEach(function(a,b){k+='<div class="toontalk-edit" name="content">\n'+a+"\n</div>\n";d[b]&&(k+=d[b])});return k+='<script src="https://toontalk.github.io/ToonTalk/support/published_support.js">\x3c/script>\n</body>\n</html>\n'};return{publish_widget:function(b,a,n,l){var h=d.google_drive.get_status(),t=["Edit this. Select text for formatting.","And edit this."],e=function(a){(a=a&&a.items&&0<a.items.length&&a.items[0])?
l(a,f):(a=k(b,t,f),d.google_drive.upload_file(q,"html",a,l))},q,u,f;"Ready"===h?(q=a.get_setting("program_name"),n?(u=d.UTILITIES.get_json_top_level(a),a.set_setting("program_name",q+" (published version)"),f=[d.UTILITIES.toontalk_json_div(u,a)],a.set_setting("program_name",q)):(a=a.get_backside_widgets(),f=[],a.forEach(function(a,b){a.visible()&&(u=d.UTILITIES.get_json_top_level(a),f.push(d.UTILITIES.toontalk_json_div(u,a.get_widget())),1<b&&(t[b]=t[1]))}),t.push(t[1])),d.google_drive.get_toontalk_files(d.google_drive.full_file_name(q,
"page"),"page",e)):(console.log("Unable to publish to Google Drive because: "+h),l(null))},republish:function(b){d.google_drive.insert_or_update_file(void 0,b.file_id,"page",k(b.title,b.editable_contents,b.widgets_json),function(){console.log("Published page '"+b.title+"' updated.")})}}}(window.TOONTALK);function handle_client_load(){window.TOONTALK.google_drive.handle_client_load()}
window.TOONTALK.google_drive=function(d){var k=d.GOOGLE_DRIVE_CLIENT_ID||"148386604750-704q35l4gcffpj2nn3p4ivcopl81nm27.apps.googleusercontent.com",b=d.ORIGIN_FOR_GOOGLE_DRIVE||"toontalk.github.io",a="Need to authorize",n,l;return{handle_client_load:function(h){0>window.location.href.indexOf(b)?(a="Connections to Google Drive are configured for the following domain only: "+b+".\nIf you are hosting ToonTalk elsewhere you need to set TOONTALK.GOOGLE_DRIVE_CLIENT_ID and TOONTALK.ORIGIN_FOR_GOOGLE_DRIVE",h&&
h(a)):setTimeout(function(){d.google_drive.check_authorization(h)})},check_authorization:function(b){a="Awaiting authorization";gapi.auth.authorize({client_id:k,scope:"https://www.googleapis.com/auth/drive",immediate:!0},function(a){d.google_drive.handle_authorization_result(a,b)})},handle_authorization_result:function(b,k){b&&!b.error?(a="Authorized but not yet ready",gapi.client.load("drive","v2",function(){d.google_drive.get_folder_ids(function(){a="Ready"})}),k&&k()):(a="Need to authorize",k&&
k(a))},authorize:function(a){gapi.auth.authorize({client_id:k,scope:"https://www.googleapis.com/auth/drive",immediate:!1},function(b){d.google_drive.handle_authorization_result(b,a)})},get_folder_ids:function(a){d.google_drive.get_folder_id(!0,function(b){n=b;d.google_drive.get_folder_id(!1,function(b){l=b;a()})})},get_folder_id:function(a,b){var e=a?"ToonTalk Programs":"ToonTalk Pages",k=function(k){var f=function(a){a&&a.id?b(a.id):console.error("Failure to create folder '"+e+"'. Response was "+
a)};(k=k&&k.items&&0<k.items.length&&k.items[0].id)?b(k):a?d.google_drive.create_folder("ToonTalk Programs",!1,f):d.google_drive.create_folder("ToonTalk Pages",!0,f)};a&&n?b(n):!a&&l?b(l):d.google_drive.fetch_folder_id(e,k)},get_status:function(){return a},connection_to_google_drive_possible:function(){return 0!==a.indexOf("Connections to Google Drive are configured for the following domain only: ")},list_files:function(a,b){gapi.client.request({path:"/drive/v2/files",method:"GET",params:a}).execute(b)},
fetch_folder_id:function(a,b){d.google_drive.list_files({q:"mimeType = 'application/vnd.google-apps.folder' and title ='"+a+"' and trashed = false"},b)},get_toontalk_files:function(a,b,e){"undefined"===typeof gapi?e("Google Drive API not available."):(b="properties has {key='ToonTalkType' and value='"+b+"' and visibility='PUBLIC'} and trashed = false",a&&(b+=" and title='"+a+"'"),d.google_drive.list_files({q:b},e))},get_toontalk_program_file:function(a,b){d.google_drive.list_files({q:"'"+n+"' in parents and trashed = false and title='"+
a+"'"},function(a){a&&a.items&&0<a.items.length?b(a.items[0]):b(null)})},upload_file:function(a,b,e,k){var l="json"===b?"program":"page",f=a+"."+b;d.google_drive.get_toontalk_files(f,l,function(a){gapi.client.load("drive","v2",function(){var b=a&&a.items&&0<a.items.length&&a.items[0].id;k||(k=function(a){a.error&&(console.log("Google drive status: "+d.google_drive.get_status()),"Login Required"!==a.error.message&&console.log(a.error.message));console.log("File "+a.title+" ("+a.id+") "+(b?"updated":
"created"))});b?d.google_drive.insert_or_update_file(void 0,b,l,e,k):d.google_drive.insert_or_update_file(f,void 0,l,e,k)})})},full_file_name:function(a,b){return a+"."+("program"===b?"json":"html")},insert_or_update_file:function(a,b,e,k,u){var f={title:a,mimeType:"text/html"};f.parents=[{kind:"drive#fileLink",id:"program"===e?n:l}];k="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify(f)+"\r\n---------314159265358979323846\r\nContent-Type: text/html\r\n\r\n"+
k+"\r\n---------314159265358979323846--";a?(a="/upload/drive/v2/files",f="POST"):(a="/upload/drive/v2/files/"+b,f="PUT");gapi.client.request({path:a,method:f,params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="-------314159265358979323846"'},body:k}).execute(function(a){b||d.google_drive.insert_property(a.id,"ToonTalkType",e,"PUBLIC");u&&u(a)})},create_folder:function(a,b,d){gapi.client.drive.files.insert({resource:{title:a,mimeType:"application/vnd.google-apps.folder"}}).execute(b?
function(a){gapi.client.drive.permissions.insert({fileId:a.id,resource:{value:"",type:"anyone",role:"reader"}}).execute(function(b){d(a)})}:d)},download_file:function(a,b){if(a.downloadUrl){var d=gapi.auth.getToken().access_token,k=new XMLHttpRequest;k.open("GET",a.downloadUrl);k.setRequestHeader("Authorization","Bearer "+d);k.onload=function(){b(k.responseText)};k.onerror=function(){b(null)};k.send()}else b(null)},google_drive_url:function(a){return"https://googledrive.com/host/"+a+"/"},insert_property:function(a,
b,d,k){gapi.client.drive.properties.insert({fileId:a,resource:{key:b,value:d,visibility:k}}).execute(function(a){})}}}(window.TOONTALK);function googleTranslateElementInit(){new google.translate.TranslateElement({pageLanguage:"en",layout:google.translate.TranslateElement.InlineLayout.SIMPLE},"google_translate_element")}
window.TOONTALK.UTILITIES=function(d){var k,b=100,a=(new Date).getTime(),n=function(a){var b=a.indexOf("{"),c=a.lastIndexOf("}");if(!(0>b||0>c))return a.substring(b,c+1)},l=function(a,b){var c=$(b).closest(".toontalk-side"),e=d.UTILITIES.get_mouse_or_first_touch_event_attribute("clientX",a),f=d.UTILITIES.get_mouse_or_first_touch_event_attribute("clientY",a),h,l,n;$(".ui-tooltip").remove();a.dataTransfer&&a.dataTransfer.getData("text")&&0<a.dataTransfer.getData("text").length||(k=c||$(b),l=d.UTILITIES.widget_from_jquery(k),
l||(l=d.UTILITIES.widget_of_element(b),d.UTILITIES.report_internal_error("Possible bug that "+k+" doesn't have a known owner."),k=$(b)),l.being_dragged=!0,h=k.get(0).getBoundingClientRect(),n=k.is(".toontalk-top-level-resource"),l.get_json&&(c=d.UTILITIES.get_json_top_level(l),c.view.drag_x_offset=e-h.left,c.view.drag_y_offset=f-h.top,!c.view.frontside_width&&k.parent().is(".toontalk-backside")&&(c.view.frontside_width=k.width(),c.view.frontside_height=k.height()),k.is(".toontalk-backside")&&(c.view.backside=
!0),k.data("json",c),a.dataTransfer&&(e=d.UTILITIES.toontalk_json_div(c,l),a.dataTransfer.effectAllowed=n?"copy":"move",a.dataTransfer.setData("text",e),d.UTILITIES.is_internet_explorer()||a.dataTransfer.setData("text/html",e)),l.drag_started(c,n)),k.addClass("toontalk-being-dragged"),a.stopPropagation())},h=function(a){k||(k=$(a.target).closest(".toontalk-side"));d.UTILITIES.widget_from_jquery(k).being_dragged=void 0;if(k.is(".toontalk-frontside"))if(k.parent().is(".toontalk-backside")){var b=k.data("json");
b&&k.css({width:b.view.frontside_width,height:b.view.frontside_height})}else k.parent().is(".toontalk-top-level-resource, .toontalk-drop-area, .toontalk-json")||k.is(".toontalk-carried-by-bird, .toontalk-element-attribute")||d.UTILITIES.has_animating_image(k.get(0))||k.css({width:"100%",height:"100%"});c();a.stopPropagation()},t=function(a,b){var e=d.UTILITIES.data_transfer_json_object(a),f,h,l,n,p,t,w,y,C,E;!e&&k&&(e=k.data("json"));k&&k.data("json","");$(b).find("*").removeClass("toontalk-ignore-events");
f=k;c();if(f||e||a.dataTransfer.files){if($(a.target).is(".toontalk-drop-area-instructions"))l=$(a.target).parent();else if($(a.target).is(".toontalk-element-attribute-input")){if(l=$(a.target).closest(".toontalk-side"),n=d.UTILITIES.widget_from_jquery(l)){h=f?d.UTILITIES.widget_from_jquery(f):d.UTILITIES.create_from_json(e);d.UTILITIES.restore_resource(f,h);n.dropped_on_style_attribute(h,a.target.name,a);a.stopPropagation();return}}else if($(a.target).is(".toontalk-drop-area"))l=$(a.target);else{if(e&&
$(a.currentTarget).is(".froala-element")){w=e;l=d.UTILITIES.create_from_json(w);n=document.createElement("div");w=w.view.backside?l.get_backside_element(!0):l.get_frontside_element(!0);e=$(b).closest(".toontalk-edit");f=d.published_support.create_editable_text();h=a.target;$(n).addClass("toontalk-json toontalk-top-level-resource toontalk-top-level-resource-container");$(w).addClass("toontalk-top-level-resource").css({position:"relative"});w.toontalk_widget=l;n.toontalk_widget=l;n.appendChild(w);for($(n).insertAfter(e);h.nextSibling;)$(f).children(".froala-element").get(0).appendChild(h.nextSibling);
$(f).insertAfter(n);l.update_display();return}l=$(b).closest(".toontalk-side")}if(0!==l.length&&!l.is(".toontalk-top-level-resource")){w=l.offset();d.UTILITIES.remove_highlight();n=d.UTILITIES.widget_from_jquery(l);if(f&&0<f.length&&!(n&&n.get_infinite_stack&&n.get_infinite_stack())&&(f.get(0)===l.get(0)||jQuery.contains(f.get(0),l.get(0)))){if(f.is(".toontalk-top-level-backside"))return;l.hide();h=d.UTILITIES.get_mouse_or_first_touch_event_attribute("pageX",a);p=d.UTILITIES.get_mouse_or_first_touch_event_attribute("pageY",
a);h=document.elementFromPoint(h-window.pageXOffset,p-window.pageYOffset);l.show();h&&(l=$(h).closest(".toontalk-side"),w=l.offset(),n=d.UTILITIES.widget_from_jquery(l))}e&&e.view&&e.view.drag_x_offset?(p=e.view.drag_x_offset,t=e.view.drag_y_offset):t=p=0;if(f&&0<f.length){if(!(n&&n.get_infinite_stack&&n.get_infinite_stack()||f.get(0)!==l.get(0)&&!jQuery.contains(f.get(0),l.get(0)))){f.css({left:f.get(0).offsetLeft+(a.layerX-p),top:f.get(0).offsetTop+(a.layerY-t)});a.stopPropagation();return}y=f.is(".toontalk-backside");
h=d.UTILITIES.widget_from_jquery(f);f.parent().is(".toontalk-drop-area")?(f.removeClass("toontalk-widget-in-drop_area"),f.parent().data("drop_area_owner").set_next_robot(void 0)):(C=f.parents(".toontalk-side:first"),(E=d.UTILITIES.widget_from_jquery(C))?!y&&h.get_infinite_stack&&h.get_infinite_stack()?(h=h.copy(),C=f.width(),E=f.height(),f=$(h.get_frontside_element(!0)),l.is(".toontalk-backside")&&f.css({width:e.view.frontside_width||C,height:e.view.frontside_height||E})):E.removed_from_container&&
(C.is(".toontalk-backside")?E.remove_backside_widget(h,y,!0):(E.removed_from_container(h,y,a,void 0,!0),h.restore_dimensions&&h.restore_dimensions())):d.UTILITIES.restore_resource(f,h),d.robot.in_training&&d.robot.in_training.add_newly_created_widget_if_new(h))}else{if(0<a.dataTransfer.files.length){for(e=0;e<a.dataTransfer.files.length;e++)u(a.dataTransfer.files[e],l,n,w,a);a.stopPropagation();return}h=d.UTILITIES.create_from_json(e,{event:a});if(!h){e?d.UTILITIES.report_internal_error("Unable to construct a ToonTalk widget from the JSON."):
d.debugging&&console.log("No data transfer in drop.");a.stopPropagation();return}(y=e.view.backside)?(f=$(h.get_backside_element()),f.css({width:e.view.backside_width,height:e.view.backside_height,"background-color":e.view.background_color,"border-width":e.view.border_width}),h.apply_backside_geometry()):f=$(h.get_frontside_element())}h!==n&&q(l,f,h,n,w,a,e,p,t,y)}}else a.dataTransfer?d.UTILITIES.report_internal_error("Drop failed since unable to parse as JSON."):d.UTILITIES.report_internal_error("Drop failed since there is no event.dataTransfer"),
a.stopPropagation()},e=function(a,b){var c;c=$(b).closest(".toontalk-side");var e=d.UTILITIES.get_dragee();c=!c.is("*")||c.is(".toontalk-top-level-backside")||c.closest(".toontalk-top-level-resource").is("*")||c.is(".toontalk-being-dragged")||e&&p(c.get(0),e.get(0))?void 0:c;if(c)return d.UTILITIES.highlight_element(c.get(0),a),c.is(".toontalk-backside, .toontalk-drop-area")||"box"===d.UTILITIES.widget_of_element(b).get_type_name()||c.find(".toontalk-side").addClass("toontalk-ignore-events"),c.get(0)},
q=function(a,b,c,e,f,h,k,l,n,p){var q=d.UTILITIES.get_mouse_or_first_touch_event_attribute("pageX",h),t=d.UTILITIES.get_mouse_or_first_touch_event_attribute("pageY",h),u,w,y,C,E;c.set_visible(!0);if(a.is(".toontalk-backside")){if(c.is_of_type("top-level")){u=k.semantic.backside_widgets;w=k.shared_widgets;y=a.get(0);h=c.get_backside_widgets().slice();h.forEach(function(a,b){var d=a.get_widget(),g,f,h,k,l,n,z;c.remove_backside_widget(d,a.is_backside());g=0<=u[b].widget.shared_widget_index?w[u[b].widget.shared_widget_index].view:
u[b].widget.view;a.is_backside()?(f=d.get_backside_element(!0),h=g.backside_left,k=g.backside_top,l=g.backside_width,n=g.backside_height):(f=d.get_frontside_element(!0),h=g.frontside_left,k=g.frontside_top,l=g.frontside_width,n=g.frontside_height);e.add_backside_widget(d,a.is_backside());y.appendChild(f);z=$(f).position();$(f).css({left:z.left+h,top:z.top+k,width:l,height:n});a.is_backside()&&(d.backside_geometry=g.backside_geometry,d.apply_backside_geometry())}.bind(this));return}c?e.get_backside().widget_dropped_on_me(c,
p,h):d.UTILITIES.report_internal_error("No source_widget");"undefined"===typeof l&&(n=l=0,setTimeout(function(){var a=c.get_HTML(),d=b.width(),g=b.height();0<=a.indexOf("data:image")?(a=Math.min(80,d)/2,d=90,90>g&&(d-=(90-g)/2)):(a=Math.min(60,d/2),d=Math.min(30,g/2));b.css({left:C-a,top:E-d})},50));C=q-(f.left+l);E=t-(f.top+n);b.css({left:C,top:E});k&&k.semantic.running&&c.set_running(!0)}else if(a.is(".toontalk-drop-area"))b.addClass("toontalk-widget-in-drop_area"),a.append(b.get(0)),b.is(".toontalk-robot")&&
a.data("drop_area_owner").set_next_robot(d.UTILITIES.widget_from_jquery(b));else{if(b.is(".toontalk-backside-of-top-level"))return;if(e||h.changedTouches)y=a.closest(".toontalk-top-level-backside").get(0),!y&&h.changedTouches&&(f=document.elementFromPoint(q-window.pageXOffset,t-window.pageYOffset),(y=$(f).is(".toontalk-top-level-backside")?f:$(f).closest(".toontalk-top-level-backside").get(0))||(y=$(".toontalk-top-level-backside").get(0)),e=d.UTILITIES.widget_of_element(y).get_backside()),y.appendChild(b.get(0)),
f=$(y).offset(),b.css({left:q-(f.left+l),top:t-(f.top+n)}),c.drop_on&&c.drop_on(e,p,h)||e.widget_dropped_on_me&&e.widget_dropped_on_me(c,p,h)||(a=a.closest(".toontalk-top-level-backside"),0<a.length&&(e=d.UTILITIES.widget_from_jquery(a))&&e.get_backside().widget_dropped_on_me(c,p,h));else{d.UTILITIES.report_internal_error("target widget missing");return}}d.UTILITIES.remove_highlight()},u=function(a,b,c,e,f){var h=new FileReader,k=0===a.type.indexOf("image"),l,p;h.onloadend=function(){if(k)l=d.element.create("<img src='"+
h.result+"' alt='"+a.name+"'/>");else{if(p=n(h.result))try{l=d.UTILITIES.create_from_json(JSON.parse(p))}catch(t){}l||(l=d.element.create(h.result))}q(b,$(l.get_frontside_element(!0)),l,c,e,f)};k?h.readAsDataURL(a):h.readAsText(a)},f=function(a){a.tooltip({position:{my:"center bottom-20",at:"center top",using:function(a,b){$(this).css(a);$("<div>").addClass("toontalk-arrow").addClass(b.vertical).addClass(b.horizontal).appendTo(this)}},open:function(a,b){setTimeout(function(){$(b.tooltip).hide()},
b.tooltip.get(0).textContent.length*(d.MAXIMUM_TOOLTIP_DURATION_PER_CHARACTER||100))}})},w=function(a){var b=document.createElement("script");b.src=a;document.body.appendChild(b)},c=function(){k&&(k.removeClass("toontalk-being-dragged"),k.find("*").removeClass("toontalk-ignore-events"),d.UTILITIES.set_timeout(function(){k=void 0}))},p=function(a,b){if(a===b)return!0;if(a.parentNode)return p(a.parentNode,b)},y=[],C=[],E;window.addEventListener("message",function(a){a.source===window&&"zero-timeout-message"===
a.data?(a.stopPropagation(),0<y.length&&y.shift()()):a.data.editable_contents&&d.publish.republish(a.data)},!1);$(document).ready(function(){var a;d.debugging=d.UTILITIES.get_current_url_parameter("debugging");d.UTILITIES.process_json_elements();$(document).click(function(a){$(".toontalk-top-level-resource-container").each(function(a,b){var c=b.toontalk_widget;c&&c.set_running&&c.set_running(!1)})});d.QUEUE=window.TOONTALK.queue.create();d.QUEUE.run();window.addEventListener("beforeunload",function(a){try{d.UTILITIES.backup_all_top_level_widgets(!0)}catch(b){console.log(b)}});
f($(document));d.TRANSLATION_ENABLED=d.UTILITIES.get_current_url_boolean_parameter("translate",!1);d.TRANSLATION_ENABLED?($("a").each(function(a,b){b.href=d.UTILITIES.add_URL_parameter(b.href,"translate","1")}),$("#google_translate_element").is("*")||(a=document.createElement("div"),a.id="google_translate_element",document.body.insertBefore(a,document.body.firstChild)),document.head.appendChild($('<meta name="google-translate-customization" content="7e20c0dc38d147d6-a2c819007bfac9d1-gc84ee27cc12fd5d1-1b"></meta>')[0]),
w("https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit")):$("#google_translate_element").remove();d.UTILITIES.add_test_all_button()});return{create_from_json:function(a,b,c){var e=function(a,b,c){b.shared_widgets[c]=a;a.finish_create_from_json_continuation&&(a.finish_create_from_json_continuation(),a.finish_create_from_json_continuation=void 0);return a},f,h,k,l;if(a){b||(b={});a.shared_widgets&&(b.json_of_shared_widgets=a.shared_widgets,b.shared_widgets=[]);a.shared_html&&
(b.shared_html=a.shared_html);if(a.widget)return f=d.UTILITIES.create_from_json(a.widget,b),a.is_backside?f.get_backside(!0):f;if(b&&b.shared_widgets&&0<=a.shared_widget_index){if(c=b.shared_widgets[a.shared_widget_index])return c;c=b.json_of_shared_widgets[a.shared_widget_index];f=d.UTILITIES.create_from_json(c,b,!0);return e(f,b,a.shared_widget_index)}(k=a.semantic)||(k=a);a=a.view;if(0<=k.shared_widget_index)return f=d.UTILITIES.create_from_json(b.json_of_shared_widgets[k.shared_widget_index],
b,!0),e(f,b,k.shared_widget_index);if(d.creators_from_json[k.type]){b||(b={});a?b.json_view=a:a=b.json_view;if((f=d.creators_from_json[k.type](k,b))&&f.get_backside){k.erased&&(d.widget.erasable(f),f.set_erased(k.erased));k.infinite_stack&&f.set_infinite_stack(k.infinite_stack);if(a&&a.frontside_width)if(h=a.backside?f.get_backside(!0).get_element():f.get_frontside_element(),l={width:a.frontside_width,height:a.frontside_height},"element"===k.type)f.on_update_display(function(){$(h).css(l)});else $(h).css(l);
a&&a.saved_width&&(f.saved_width=a.saved_width,f.saved_height=a.saved_height);a&&a.backside_geometry&&(f.backside_geometry=a.backside_geometry);k.backside_widgets&&(c?f.finish_create_from_json_continuation=function(){this.add_backside_widgets_from_json(f,k.backside_widgets,b)}.bind(this):this.add_backside_widgets_from_json(f,k.backside_widgets,b))}return f}d.UTILITIES.report_internal_error("JSON type '"+k.type+"' not supported. Perhaps a JavaScript file implementing it is missing.")}},add_backside_widgets_from_json:function(a,
b,c){var d;b&&(d=this.create_array_from_json(b,c),a.set_backside_widget_sides(d,b.map(function(a){return 0<=a.widget.shared_widget_index?c.json_of_shared_widgets[a.widget.shared_widget_index].view:a.widget.view})))},create_array_from_json:function(a,b){var c=[];a.forEach(function(a,g){c[g]=a?d.UTILITIES.create_from_json(a,b):a});return c},get_json_of_array:function(a,b){var c=[];a.forEach(function(a,g){a.is_backside&&a.is_backside()?c[g]={widget:d.UTILITIES.get_json(a.get_widget(),b),is_backside:!0}:
c[g]=a.get_type_name?{widget:d.UTILITIES.get_json(a,b)}:a.get_json(b)});return c},fresh_json_history:function(){return{widgets_encountered:[],shared_widgets:[],json_of_widgets_encountered:[]}},get_json_top_level:function(a){var b=this.fresh_json_history(),c=d.UTILITIES.get_json(a,b);0<b.shared_widgets.length&&(c.shared_widgets=b.shared_widgets.map(function(e,f){var h=function(a){a=b.widgets_encountered.indexOf(a);return b.json_of_widgets_encountered[a]},k=function(a){return h(b.shared_widgets[a])},
l=h(e);a===e?(l={semantic:l.semantic,view:l.view,version:l.version},c.semantic={shared_widget_index:f}):d.UTILITIES.tree_replace_once(c.semantic,l,{shared_widget_index:f},k);return l}));c.shared_html=b.shared_html;return c},get_json:function(a,b){var c,e,f;d.debugging&&!b&&d.UTILITIES.report_internal_error("no json_history");c=b.shared_widgets.indexOf(a);if(0<=c)return{shared_widget_index:c};c=b.widgets_encountered.indexOf(a);if(0<=c)return c=d.UTILITIES.insert_ancestors_last(a,b.shared_widgets),
{shared_widget_index:c};c=b.widgets_encountered.push(a)-1;f=a.is_backside();a=a.get_widget();e=a.get_json(b);e=a.add_to_json(e,b);e.view.backside=f;b.json_of_widgets_encountered[c]=e;a.add_backside_widgets_to_json&&a.add_backside_widgets_to_json(e,b);return e},tree_replace_once:function(a,b,c,d){var e,f;for(f in a)if(a.hasOwnProperty(f)&&(e=a[f])){if(e===b)return a[f]=c,!0;if("shared_widget_index"===f){if(this.tree_replace_once(d(e),b,c,d))return!0}else if(!(0<=["string","number","function","undefined"].indexOf(typeof e))&&
this.tree_replace_once(e,b,c,d))return!0}return!1},insert_ancestors_last:function(a,b){var c=-1;b.some(function(b,d){if(a.has_ancestor(b))return c=d,!0});0>c&&(c=b.length);b.splice(c,0,a);return c},toontalk_json_div:function(a,b){var c=a.view.backside,e=b.get_backside_widgets(),f=b.get_type_name();"top-level"===f?c?(f="a work area containing ",0===e.length?f="an empty work area":(f=1===e.length?f+"one thing: ":f+(e.length+" things: "),E=e.length,e.forEach(function(a){E--;f+=d.UTILITIES.add_a_or_an(a.get_type_name());
1===E?f+=", and ":1<E&&(f+=", ")}))):f="a top-level widget":(f=d.UTILITIES.add_a_or_an(f),c&&(f="the back of "+f));return"<div class='toontalk-json'>\nThis will be replaced by "+f+".\n<div style='display:none;'>"+JSON.stringify(a,null,"  ")+"</div></div>"},copy_widgets:function(a,b){var c=[],d;for(d=0;d<a.length;d++)c[d]=a[d]&&a[d].copy(b);return c},copy_widget_sides:function(a,b){return a.map(function(a){var c=a.get_widget().copy(b);a.is_backside()&&c.get_backside();return c})},copy_array:function(a){return a.slice()},
generate_unique_id:function(){a+=1;return"toontalk_id_"+a},get_style_property:function(a,b){if(a.currentStyle)return a.currentStyle[b];if(window.getComputedStyle)return document.defaultView.getComputedStyle(a,null).getPropertyValue(b)},get_style_numeric_property:function(a,b){var c=this.get_style_property(a,b),d;return"string"===typeof c?(d=c.indexOf("px"),0<=d&&(c=c.substring(0,d)),parseInt(c,10)):c},data_transfer_json_object:function(a){var b;if(a.dataTransfer){try{b=a.dataTransfer.getData("text/html")}catch(c){b=
a.dataTransfer.getData("text")}if(!b||b.match(/[\u3400-\u9FBF]/))b=a.dataTransfer.getData("text");if(b){a=n(b);if(!a)return d.UTILITIES.get_json_top_level(d.element.create(b));try{return JSON.parse(a)}catch(e){d.UTILITIES.report_internal_error("Exception parsing "+a+"\n"+e.toString())}}}},drag_and_drop:function(a){var b;d.UTILITIES.draggable(a);d.UTILITIES.can_receive_drops(a);$(a).is(".toontalk-backside-of-top-level")||(b=$(a).is(".toontalk-top-level-resource")?0:500,d.UTILITIES.enable_touch_events(a,
b))},draggable:function(a){$(a).attr("draggable",!0);a.addEventListener("dragstart",function(b){l(b,a)});a.addEventListener("dragend",function(b){h(b,a)})},can_receive_drops:function(a){var b=function(b){var f=e(b,a);f&&c!==f&&d.UTILITIES.remove_highlight(c);c=f;b.stopPropagation()},c;a.addEventListener("dragover",function(a){b(a);a.preventDefault();return!1});a.addEventListener("drop",function(b){b.preventDefault();t(b,a);b.stopPropagation()});a.addEventListener("dragenter",b);a.addEventListener("dragleave",
function(a){c&&!d.UTILITIES.inside_rectangle(a.clientX,a.clientY,c.getBoundingClientRect())&&(d.UTILITIES.remove_highlight(c),c=void 0);a.stopPropagation()})},create_drop_area:function(a){var b=document.createElement("div"),c=$(b),e=document.createElement("div");e.innerHTML=a;$(e).addClass("toontalk-drop-area-instructions ui-widget");c.addClass("toontalk-drop-area");c.append(e);d.UTILITIES.can_receive_drops(b);return c},process_json_elements:function(){$(".toontalk-json").each(function(a,b){var c=
b.textContent,e,f,h,k;if(c)if(c=c.substring(c.indexOf("{"),c.lastIndexOf("}")+1),e=JSON.parse(c),f=d.UTILITIES.create_from_json(e)){b.textContent="";if(f.get_type_name)if(f.is_of_type("top-level")){if(!d.no_local_storage&&!d.UTILITIES.get_current_url_boolean_parameter("reset",!1)){if(e.load_most_recent_program)try{(k=window.localStorage.getItem("toontalk-last-key"))&&(h=window.localStorage.getItem(k))}catch(l){c="Error reading previous state. Error message is "+l,d.UTILITIES.is_internet_explorer()?
console.error(c):d.UTILITIES.display_message(c)}h&&(e=JSON.parse(h),f=d.UTILITIES.create_from_json(e))}h=f.get_backside(!0);h=h.get_element();$(b).replaceWith(h);$(h).css({width:e.view.backside_width,height:e.view.backside_height,"background-color":e.view.background_color,"border-width":e.view.border_width})}else $(b).addClass("toontalk-top-level-resource toontalk-top-level-resource-container"),h=f.get_frontside_element(),$(h).addClass("toontalk-top-level-resource").css({position:"relative"}),b.toontalk_widget=
f,b.appendChild(h);else b.appendChild(f.get_element());f.set_active&&f.set_active(!1);f.set_visible&&f.set_visible(!0);setTimeout(function(){f.update_display&&f.update_display();e.semantic.running&&f.set_running(!0)},1)}else d.UTILITIES.report_internal_error("Could not recreate a widget from this JSON: "+c)})},set_absolute_position:function(a,b){for(var c=a.parent(),d=b.left,e=b.top,f;c.is("*")&&!c.is("html");)f=c.position(),d-=f.left,e-=f.top,c=c.parent();a.css({left:d,top:e,position:"absolute"});
a.is(".toontalk-side-animating")&&(a.get(0).style.left=d+"px",a.get(0).style.top=e+"px")},set_position_relative_to_top_level_backside:function(a,b){var c=a.closest(".toontalk-top-level-backside").offset();c||(console.log("Unable to find top-level backside. Perhaps is 'visible' but not attached."),c={left:0,top:0});var d=b.left-c.left,c=b.top-c.top;a.css({left:d,top:c,position:"absolute"});a.is(".toontalk-side-animating")&&(a.get(0).style.left=d+"px",a.get(0).style.top=c+"px")},restore_resource:function(a,
b){var c,e;a.is(".toontalk-top-level-resource")&&(c=b.copy({fresh_copy:!0}),e=c.get_frontside_element(),$(e).css({width:a.width(),height:a.height()}),a.parent().removeClass("toontalk-top-level-resource toontalk-top-level-resource-container"),a.removeClass("toontalk-top-level-resource toontalk-top-level-resource-container"),$(e).addClass("toontalk-top-level-resource toontalk-top-level-resource-container").css({position:"relative"}),a.get(0).parentElement.appendChild(e),d.DISPLAY_UPDATES.pending_update(c),
b.set_active&&(b.set_active(!0),c.set_active(!1)))},find_resource_equal_to_widget:function(a){var b;$(".toontalk-top-level-resource").each(function(c,e){var f=$(e).children(":first"),h=d.UTILITIES.widget_from_jquery(f);if(h&&(a.equals&&a.equals(h)||a.matching_resource&&a.matching_resource(h)))return b=f.get(0),!1});return b},set_position_is_absolute:function(a,b,c){b?(c=$(a).position(),b=c.left,c=c.top,$(a).css({left:b,top:c,position:"absolute"})):a.style.position="static"},cardinal:function(a){switch(a){case 0:return"first";
case 1:return"second";case 2:return"third";default:return a+"th"}},on_a_nest_in_a_box:function(a){return $(a).closest(".toontalk-nest").is("*")&&$(a).closest(".toontalk-box").is("*")},add_one_shot_event_handler:function(a,b,c,d){var e=!1,f=function(c){e=!0;d&&d();a.removeEventListener(b,f)};a.addEventListener(b,f);setTimeout(function(){e||f()},c)},animate_to_absolute_position:function(a,b,c,e,f){var h=$(a).offset(),k=$(a).position(),l=d.UTILITIES.distance(b,h);e||(e=.5);e=Math.round(l/e);$(a).addClass("toontalk-side-animating");
a.style.transitionDuration=e+"ms";a.style.left=k.left+(b.left-h.left)+"px";a.style.top=k.top+(b.top-h.top)+"px";f||d.UTILITIES.add_one_shot_event_handler(a,"transitionend",e+500,function(){$(a).removeClass("toontalk-side-animating");a.style.transitionDuration=""});d.UTILITIES.add_one_shot_event_handler(a,"transitionend",e+500,c)},distance:function(a,b){var c=a.left-b.left,d=a.top-b.top;return Math.sqrt(c*c+d*d)},highlight_element:function(a,b,c){var e;if(a){d.UTILITIES.remove_highlight();if(!$(a).is(".toontalk-backside")&&
(e=d.UTILITIES.widget_of_element(a),!e||e.element_to_highlight&&b&&(a=e.element_to_highlight(b),!a)))return;$(a).is(".toontalk-highlight")||($(a).addClass("toontalk-highlight").css({"z-index":d.UTILITIES.next_z_index()}),c&&setTimeout(function(){d.UTILITIES.remove_highlight()},c))}},remove_highlight:function(a){a?$(a).removeClass("toontalk-highlight"):$(".toontalk-highlight").removeClass("toontalk-highlight")},cursor_of_image:function(a){var b=a.lastIndexOf(".");return 0<=b?a.substring(0,b)+".32x32"+
a.substring(b):a},inside_rectangle:function(a,b,c){return a>=c.left&&a<=c.right&&b>=c.top&&b<=c.bottom},next_z_index:function(){b++;return b},create_button:function(a,b,c,d){a=$("<button>"+a+"</button>").button();a.addClass(b).click(d).attr("title",c);return a.get(0)},create_close_button:function(a,b){var c=document.createElement("div"),d=document.createElement("div");$(c).addClass("toontalk-close-button");$(c).click(a);$(c).attr("title",b);d.innerHTML="&times;";c.appendChild(d);return c},check_radio_button:function(a){$(a.button).prop("checked",
!0);$(a.label).addClass("ui-state-active")},create_button_set:function(){var a=document.createElement("div"),b,c;for(b=0;b<arguments.length;b++)if(0<=arguments[b].length)for(c=0;c<arguments[b].length;c++)a.appendChild(arguments[b][c]);else a.appendChild(arguments[b]);$(a).buttonset();return a},create_alert_element:function(a){a=d.UTILITIES.create_text_element(a);$(a).addClass("toontalk-alert-element");return a},create_text_element:function(a){var b=document.createElement("div");b.textContent=a;$(b).addClass("ui-widget");
return b},create_space:function(){var a=document.createElement("span");a.innerHTML="&nbsp;";$(a).addClass("ui-widget");return a},create_anchor_element:function(a,b){var c=document.createElement("a");c.innerHTML=a;d.TRANSLATION_ENABLED&&(b=d.UTILITIES.add_URL_parameter(b,"translate","1"));c.href=b;c.target="_blank";return c},create_text_input:function(a,b,c,e,f,h){var k=document.createElement("input"),l;k.type="text";k.className=b;k.value=a;k.title=e;h&&(k.type=h);c?(a=document.createElement("label"),
a.innerHTML=c,k.id=d.UTILITIES.generate_unique_id(),a.htmlFor=k.id,f&&(l=d.UTILITIES.create_anchor_element("i",f),$(l).addClass("toontalk-help-button notranslate"),l.translate=!1),c=d.UTILITIES.create_horizontal_table(a,k,l),$(a).addClass("ui-widget")):c=k;$(k).button().addClass("toontalk-text-input").css({"background-color":"white"});k.addEventListener("touchstart",function(){$(k).select()});return{container:c,button:k}},create_text_area:function(a,b,c,e,f){var h=document.createElement("textarea");
h.className=b;h.value=a;h.title=e;a=document.createElement("label");a.innerHTML=c;h.id=d.UTILITIES.generate_unique_id();a.htmlFor=h.id;c=d.UTILITIES.create_horizontal_table(a,h);$(h).button().addClass("toontalk-text-area").css({background:"white"});h.addEventListener("touchstart",function(){$(h).select()});$(a).addClass("ui-widget");return{container:c,button:h}},create_radio_button:function(a,b,c,e,f){var h=document.createElement("div"),k=document.createElement("input"),l=document.createElement("label");
k.type="radio";k.className=c;k.name=a;k.value=b;l.innerHTML=e;k.id=d.UTILITIES.generate_unique_id();l.htmlFor=k.id;h.appendChild(k);h.appendChild(l);h.title=f;$(k).button();return{container:h,button:k,label:l}},create_check_box:function(a,b,c,e){var f=document.createElement("div"),h=document.createElement("input"),k=document.createElement("label");h.type="checkbox";h.className=b;h.checked=a;k.innerHTML=c;h.id=d.UTILITIES.generate_unique_id();k.htmlFor=h.id;$(k).addClass("ui-widget");f.appendChild(h);
f.appendChild(k);f.title=e;return{container:f,button:h,label:k}},create_horizontal_table:function(){var a=document.createElement("table"),b,c,d;c=document.createElement("tr");a.appendChild(c);for(b=0;b<arguments.length;b++)arguments[b]&&(d=document.createElement("td"),c.appendChild(d),d.appendChild(arguments[b]));return a},create_vertical_table:function(){var a=document.createElement("table"),b,c;for(b=0;b<arguments.length;b++)arguments[b]&&(c=d.UTILITIES.create_row(arguments[b]),a.appendChild(c));
return a},create_row:function(){var a=document.createElement("tr"),b=document.createElement("td"),c;for(c=0;c<arguments.length;c++)a.appendChild(arguments[c]);b.appendChild(a);return a},create_table_entry:function(a){var b=document.createElement("td");b.appendChild(a);return b},selected_radio_button:function(){var a;for(a=0;a<arguments.length;a++)if(arguments[a].checked)return arguments[a]},create_image:function(a,b){var c=document.createElement("img"),d;c.src=a;b&&$(c).addClass(b);0===a.indexOf("images/")&&
(d=function(b){c.removeEventListener("error",d);c.src="http://toontalk.github.io/ToonTalk/"+a},c.addEventListener("error",d));return c},create_tabs:function(a,b){var c=document.createElement("div"),d=document.createElement("ul"),e;if(a.length!==b.length)return console.error("UTILITIES.create_tabs called with different length lists."),c;a.forEach(function(a,c){var g=document.createElement("li"),f=document.createElement("a"),h;"string"===typeof a?(h=document.createElement("span"),h.innerHTML=a):h=a;
e="tab-"+c;f.href="#"+e;f.appendChild(h);g.appendChild(f);d.appendChild(g);b[c].id=e});c.appendChild(d);b.forEach(function(a){c.appendChild(a)});$(c).tabs();return c},create_file_data_table:function(a){var b=$('<table cellpadding="0" cellspacing="0" border="0"></table>');a&&b.addClass(a);return b.get(0)},become_file_data_table:function(a,b,c,e){$(a).DataTable({data:b,autoWidth:!1,columns:[{data:"title",title:"Name",render:function(a,b,g,f){a=c?a.substring(0,a.length-5):a;b=c?d.google_drive.google_drive_url(g.id):
"Click to load this program.";if(e)return"<div class='"+e+"' title='"+b+"'id='"+g.id+"'>"+a+"</div>";d.TRANSLATION_ENABLED&&(b=d.UTILITIES.add_URL_parameter(b,"translate","1"));return"<a href='"+b+"'target='_blank' title='Click to open published page.'>"+a+"</a>"}},{data:"modifiedDate",title:"Modified",render:function(a,b,c,d){return(new Date(a)).toUTCString()}},{data:"createdDate",title:"Created",render:function(a,b,c,d){return(new Date(a)).toUTCString()}},{data:"fileSize",title:"Size"}]});$(a).addClass("toontalk-file-table")},
get_local_files_data:function(){return d.UTILITIES.get_all_locally_stored_program_names().map(function(a){var b=d.UTILITIES.get_local_storage_meta_data(a);if(b)return{title:a,modifiedDate:b.last_modified,createdDate:b.created,fileSize:b.file_size}})},create_local_files_table:function(){var a=d.UTILITIES.get_local_files_data(),b=d.UTILITIES.create_file_data_table();setTimeout(function(){d.UTILITIES.become_file_data_table(b,a,!1,"toontalk-file-load-button")});return b},get_dragee:function(){return k},
add_URL_parameter:function(a,b,c){a=d.UTILITIES.remove_URL_parameter(a,b);var e;e=0<=a.indexOf("?")?"&":"?";return a+e+b+"="+c},remove_URL_parameter:function(a,b){var c=a.indexOf("&"+b+"="),d;0>c&&(c=a.indexOf("?"+b+"="));if(0>c)return a;d=a.indexOf("&",c+1);0>d&&(d=a.length);a=a.substring(0,c)+a.substring(d);"?"===a[a.length-1]&&(a=substring(0,a.length-1));return a},add_a_or_an:function(a,b){var c=a.charAt(0);return 0===a.indexOf("the ")?a:0>"aeiou".indexOf(c)?b?"A "+a:"a "+a:b?"An "+a:"an "+a},
maximum_string_length:function(a,b){var c;if(a.length<=b)return a;c=a.substring(0,Math.round(.75*b));return c+" ... "+a.substring(a.length-(b-c.length))},backup_all_top_level_widgets:function(a){$(".toontalk-top-level-backside").each(function(b,c){d.UTILITIES.widget_of_element(c).save(a)})},make_resizable:function(a,b){a.resizable({resize:function(c,d){a.find("img").css({width:d.size.width,height:d.size.height});b.render()},handles:"n,e,s,w"})},match:function(a,b){var c=a.match(b);return c.is_widget&&
b.matched_by?b.matched_by(a):c},current_URL:function(){return window.location.pathname},absolute_file_path:function(a){var b=window.location.pathname,c=b.lastIndexOf("ToonTalk/");return 0>c?a:b.substring(0,c+9)+a},copy_side:function(a,b,c){b=a.get_widget().copy(b);var d;c&&(c=a.get_widget().get_frontside_element())&&(d=b.get_frontside_element(!0),$(d).css({width:$(c).width(),height:$(c).height()}));return a.is_backside()?b.get_backside():b},scale_to_fit:function(a,b,c,d,e){var f=function(){$(a).css({transform:"scale("+
k+", "+l+")","transform-origin":"top left",width:c,height:d})},h,k,l;c||(c=$(a).width());d||(d=$(a).height());$(b).is(".toontalk-backside")?l=k=1:(h=$(b).width(),b=$(b).height(),k=h/c,l=b/d,0===k&&(k=1),0===l&&(l=1));e?setTimeout(f,e):f();return{x_scale:k,y_scale:l}},relative_position:function(a,b){var c=$(a).offset(),d;b&&(d=$(b).offset(),c.left-=d.left,c.top-=d.top);return c},add_animation_class:function(a,b){$(a).css({width:"",height:""}).addClass(b)},widget_from_jquery:function(a){if(0<a.length)return a.get(0).toontalk_widget},
widget_of_element:function(a){return a.toontalk_widget},has_animating_image:function(a){a=$(a);return(a=a.css("animation")||a.css("webkit-animation")||a.css("moz-animation")||a.css("ms-animation")||a.css("o-animation"))&&0!==a.indexOf("none")},display_message_if_new:function(a){0>C.indexOf(a)&&(d.UTILITIES.display_message(a),C.push(a))},display_message:function(a){var b=d.UTILITIES.create_alert_element(a);$(".toontalk-alert-element").remove();console.log(a);document.body.insertBefore(b,document.body.firstChild);
setTimeout(function(){$(b).remove()},Math.max(2E3,a.length*(d.MAXIMUM_TOOLTIP_DURATION_PER_CHARACTER||100)))},display_tooltip:function(a){f(a);a.tooltip("open")},report_internal_error:function(a){console.log(a);d.debugging&&d.UTILITIES.display_message(a)},get_current_url_boolean_parameter:function(a,b){return 0>window.location.href.indexOf(a+"=")?b:0<=window.location.href.indexOf(a+"=1")?!0:!1},get_current_url_parameter:function(a,b){var c=window.location.href.indexOf(a+"="),d;if(0>c)return b;c=c+
a.length+1;d=window.location.href.indexOf("&",c);0>d&&(d=window.location.href.length);return window.location.href.substring(c,d)},is_browser_of_type:function(a){return 0<=window.navigator.userAgent.indexOf(a)},is_internet_explorer:function(){return d.UTILITIES.is_browser_of_type("MSIE")||d.UTILITIES.is_browser_of_type("Trident")},remove_z_index:function(a){if(0===a.length||"<"!==a.charAt(0)||0>a.indexOf("z-index"))return a;a=$(a);a.attr("z-index","");return a.html()},add_test_all_button:function(){var a=
$("#toontalk-test-all-button"),b;if(0!==a.length){a.button();b=a.get(0);b.innerHTML="Run all tests";var c=!1;a.click(function(a){c?($(".toontalk-stop-sign").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&$(this).click()}),b.innerHTML="Run all tests"):($(".toontalk-green-flag").each(function(){$(this).parent().is(".toontalk-top-level-backside")&&$(this).click()}),b.innerHTML="Stop all tests");c=!c})}},set_timeout:function(a,b){b?setTimeout(a,b):(y.push(a),window.postMessage("zero-timeout-message",
"*"))},get_all_locally_stored_program_names:function(){var a=window.localStorage.getItem("toontalk-all-program-names");return a?JSON.parse(a):[]},set_all_locally_stored_program_names:function(a){window.localStorage.setItem("toontalk-all-program-names",JSON.stringify(a))},get_local_storage_meta_data:function(a){a=d.UTILITIES.local_storage_program_meta_data_key(a);var b;try{if(b=window.localStorage.getItem(a))return JSON.parse(b)}catch(c){}},local_storage_program_key:function(a){return"toontalk-json: "+
a},local_storage_program_meta_data_key:function(a){return"toontalk-meta-data: "+a},enable_editor:function(a,b,c,d){(function(a,b){var c=function(a){a.data.editor_enabled_for&&a.data.editor_enabled_for===b&&(e=!0,window.removeEventListener("message",c))},d=function(a,b){e||setTimeout(function(){a();d(a,b)},500)},e=!1;window.addEventListener("message",c);d(a,b)})(function(){a.postMessage({save_edits_to:window.location.href,file_id:c,widgets_json:d},"*")},c)},touch_available:function(){return"ontouchstart"in
window||navigator.msMaxTouchPoints},enable_touch_events:function(a,b){var c=a,f=function(b){var e;b.stopPropagation();b.preventDefault();k?(k=!1,h(b,a),e=d.UTILITIES.widget_of_element(a),d.debugging&&0===d.debugging.indexOf("touch")&&(d.debugging+="\ndrag ended"),e&&(t(b,a),d.debugging&&0===d.debugging.indexOf("touch")&&(d.debugging+="\ndrop happened")),d.debugging&&0===d.debugging.indexOf("touch")&&(alert(d.debugging),d.debugging="touch")):n=!0;a=c},k=!1,n=!1,p=0,q=0,u;a.addEventListener("touchstart",
function(c){d.debugging&&0===d.debugging.indexOf("touch")&&(d.debugging+="\ntouch start");c.preventDefault();"TEXTAREA"===c.srcElement.tagName||"INPUT"===c.srcElement.tagName||$(c.srcElement).is(".ui-resizable-handle")?d.debugging&&0===d.debugging.indexOf("touch")&&(d.debugging+="\ntouch start ignored due to tag name or class"):(c.stopPropagation(),d.UTILITIES.set_timeout(function(){var b=c.changedTouches[0],e,f,h;n?(n=!1,e=document.createEvent("MouseEvent"),e.initMouseEvent("click",!0,!0,window,
1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null),b.target.dispatchEvent(e),d.debugging&&0===d.debugging.indexOf("touch")&&(d.debugging+="\ntouch end treated as click",alert(d.debugging),d.debugging="touch")):(k=!0,(e=d.UTILITIES.widget_of_element(a))&&e.get_infinite_stack()?(f=e.copy(),e.add_copy_to_container(f,0,0),e.set_infinite_stack(!1),f.set_infinite_stack(!0)):$(a).is(".toontalk-top-level-resource")&&(f=e.copy(),e.add_copy_to_container(f,0,0),h=$(a).offset(),a=f.get_frontside_element(!0)),
h||(h=$(a).offset()),l(c,a),p=b.clientX-h.left,q=b.clientY-h.top,d.debugging&&0===d.debugging.indexOf("touch")&&(d.debugging+="\ndrag started"))},b))},!0);a.addEventListener("touchmove",function(b){var c;b.preventDefault();if(k){c=b.changedTouches[0];d.UTILITIES.set_absolute_position($(a),{left:c.pageX-p,top:c.pageY-q});b=d.UTILITIES.find_widget_on_page(c,a,0,0);if(u&&u!==b){var f=u.get_frontside_element();d.UTILITIES.remove_highlight(f);u=void 0}b&&(e(c,b.get_frontside_element()),u=b);d.debugging&&
0===d.debugging.indexOf("touch")&&(d.debugging+="\ndragged to "+(c.pageX-p)+", "+(c.pageY-q))}else d.debugging&&0===d.debugging.indexOf("touch")&&(d.debugging+="\ntouch move ignored since drag_started not yet set. "+Date.now())},!0);a.addEventListener("touchend",f,!0);a.addEventListener("touchcancel",f,!0)},get_mouse_or_first_touch_event_attribute:function(a,b){return b.changedTouches?b.changedTouches[0][a]:b[a]},find_widget_on_page:function(a,b,c,e){var f=d.UTILITIES.get_mouse_or_first_touch_event_attribute("pageX",
a);a=d.UTILITIES.get_mouse_or_first_touch_event_attribute("pageY",a);var h;$(b).hide();c=document.elementFromPoint(f-(window.pageXOffset+c),a-(window.pageYOffset+e));for($(b).show();c&&!c.toontalk_widget&&(!$(c).is(".toontalk-backside")||$(c).is(".toontalk-top-level-backside"));)c=c.parentNode;c&&(h=c.toontalk_widget);if(h)return h&&h.get_contents&&h.get_contents()&&(h=h.get_contents()),b=h.get_type_name(),h&&"empty hole"===b?h.get_parent_of_frontside():h},closest_top_level_backside:function(a,b){var c,
e;$(".toontalk-top-level-backside").each(function(){var b=$(this).offset(),b=b.left+$(this).width()/2-a^2+(b.top+$(this).height()/2-a)^2;c?b<e&&(c=this,e=b):(c=this,e=b)});return d.UTILITIES.widget_of_element(c)},create_queue:function(){var a=[],b=0;return{getLength:function(){return a.length-b},isEmpty:function(){return 0==a.length},enqueue:function(b){a.push(b)},dequeue:function(){var c;if(0!=a.length)return c=a[b],2*++b>=a.length&&(a=a.slice(b),b=0),c},peek:function(){return 0<a.length?a[b]:void 0},
does_any_item_satisfy:function(c){var d;for(d=b;d<a.length;d++)if(c(a[d]))return!0;return!1}}}}}(window.TOONTALK);window.TOONTALK.UTILITIES.available_types="number box element robot nest sensor top-level".split(" ");
